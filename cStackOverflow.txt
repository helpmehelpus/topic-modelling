c-1-1	X	How to get data from a wav-file for each channel? I am wondering, how the data of two channels is stored in a wav file? I will try to explain it with an example. I have 60221 Samples in my wav-file and 2 channels. The size of each sample is 4 bytes. So how to split up the data for the left and the data for the right channel? My ideas: 1. First sample is data for left channel, second sample is data for right channel, ... 2. One sample consists of two channels, so 2 bytes for every channel of one sample. But then the left and right channel would always be the same, wouldnt it? I found multiple solutions for my question, but I don't know whats the right one now. I hope you guys can help me, I'm quite confused right now.. 
c-1-2	X	How to run external programs in C and make it invisible by ps command? I create a C program to run an external command on a CentOS system. I use system(cmd); to run the external command but this command can be seen by ps command. Is there a way for me to hide the command which is run through system? I only want my C program to be found by users. 
c-1-3	X	invalid conversion from 'const char*' to 'char' [-fpermissive] In my code below, this line: Is throwing this error: Question Why am I receiving this error? Actually, all I want is to declare "b[6]" separately. Not like char b[6] = "Hello" like If I take a int variable say "int x" then i can easily declare it's value separately say "x = 2" but here, for string variable why I am unable to do that. benter code here[6] = "Hello"; Here you are assigning a char const * to a single char (and in addition that char is out of range). If you want be to hold "H" do: In C, Strings are treated as char arrays, and the name of an array is treated as a pointer to the beginning of the array. Based on this declaration, b is a pointer to the beginning of an array of 6 chars. This line attempts to set the 6th element of b to "Hello", but there's two problems with doing that: b[6] does not actually exist. b is 6 elements long, beginning with index 0, so the highest index you can use is 5. b is an array, so b[6] refers to a specific char whereas you attempt to set it to a String, i.e. a pointer to char, hence your error message. If you're trying to make b hold the value of "Hello", there are a number of ways to do that. Theoretically, your method of b = "Hello"; would work, but would probably be considered bad practice by most. The most basic is to set the values of the chars in the array to the letters in "Hello" one-by-one, followed by a NULL byte. Using the <string.h> standard library, you could (and probably should) do it using strcpy. you should use it like b[] = "Hello"; 
c-1-4	X	8 Queens diagonal checking At the moment I am creating a program where the user is asked to place the queens for the 8 Queens Problem. Right now I have nearly created the program, but I'm stuck on how to make the program check diagonally. This is the (unfinished)code: Firstable, what is with all those x ? Secondable, it's ok to write junk code but if you share it please correct it to make it easily understandable for most of the readers or explain it. Finally, to answer your question, one way to do it is : The logic for checking diagonal for a queen placed is (p,q) is to check for all the places located at (p+i,q+i) for all i, where both p+i and q+i are within the board. For negative side, use (p-i,q-i). 
c-1-5	X	hashedmap and pointer to structs: CXX0030: Error: expression cannot be evaluated Im trying to create a simple hashmap in C. The vs doesnt know any errors at compilation time. But during execution, the pointer to the structure is becoming a bad pointer. Here is the code for that, can anyone tell me why the code is crashing. During the debugging it seems the code is crashing at the exact line of: Please tell me why the code is crashing. 
c-1-6	X	Debugging with Xcode? Hi I would like to learn how to debug properly using Xcode. It seems to me pretty difficult compared to codeblocks or other windows compilers, can you tell me how to properly use breakpoints and other features? Thanks! 
c-1-7	X	Sorting Subarrays in C Sorts Entire Array Instead? So in this little game I wrote I have a deck of n_C cards, each with a unique integer value. There are n_P players each holding n_H cards in their hand. The deck and the hands share an array, like so: Player i_P's hand contains all cards from from deck[i_P * n_H to deck[i_P * (n_H + 1) - 1]. All players combined always hold less than n_C cards. Now I want to sort each player's hand, but not the entire deck (obviously, as this would move some cards between players' hands). I've gone about this like so: And then, using insertion sort (this function will sort an entire array just fine): *Note: card_swapdoes exactly what you would expect it to, it's only 3 statements. Both n_Cand n_H are #define'd constants, n_P is a local variable. When I run the above code with a shuffled deck, and params n_C = 104, n_H = 10, n_P = 3, I get: 0: 74 31 53 46 42 75 72 77 70 49 1: 76 86 99 78 11 94 61 14 41 87 2: 40 26 92 5 9 3 66 63 101 98 before subarray sorting and something like: 0: 3 5 9 11 31 42 46 49 53 74 1: 61 70 75 72 76 77 78 86 94 99 2: 14 26 40 41 63 66 87 92 98 101 afterwards. As we can see, some cards have moved hands when they shouldn't have. But the deck has not been sorted across all hands (see e.g. 14 in player 2's hand. How can this be? The way I see it, my coding skills are not at fault, but the compiler seems to be messing with me. I have observed this behaviour both with the VS15 C++ compiler as well as GCC. 
c-1-8	X	how to move an imported .db file within xcode directly to an iphone I want to replace an existing sms.db file in my iphone with a modified sms.db file that has been imported into the xcode project. I have a function below, cp() that takes "from" and "to" params. I want to execute it like this: how can i modify the below function to take the sms.db imported in xcode and replace the sms.db within my phone? how can i modify the below function to take the sms.db imported in xcode and replace the sms.db within my phone? You can't. Your iPhone is "sandboxed". It cannot "see" your computer. 
c-1-9	X	C arrays on stack In c (and c++), one can create an integer array in the following ways: Where const is a compile-time constant, or According to my understanding, the first allocates the memory on stack, and the second on the heap. Now, as far as i know, memory on the stack is ordered such that the program can pop it off the top as needed. This would imply that the elements in the array are not necessarily stored sequentially, which sound odd. What, precisely, is happening here? You may be misunderstanding something. In fact, the stack will always be sequential storage. The stack, however, will be far more limited in size than the heap. While it is true that things are "popped" off of the stack, this will effectively not apply within the function where the local array is declared. The heap, on the other hand, can grow. When running out of memory, malloc implementations will call sbrk() to request additional memory. This means that, overall, the heap need not be contiguous, though when you call malloc or realloc, you can be confident that the memory will be at least as large as what you have requested and that the addresses will be sequential (at least, from your point of view). There are 3 main memory types in programming: static memory, heap and stack. Static memory is used to allocate all 'static' vairables, i.e. variables declared in global scope or declared as static in functions. This means that the number of static variables and their size is known at compilation time and compiler just reserves memory for them. Heap is a dynamic memory pool where you can borrow memory when you need it and return the memory to it. So, when you borrow memroy, i.e. 'malloc' it, you can use it as you wish till you return (free) it sot that it could be reused by a different piece of th program. satck is a special memroy region, used to allocate local variables for functions. When you call a function wich has non-static local variables, it will allocate enough space for those variables in the memory (plus additional space needed for the function's needs). When you return from the function, the memory gets automaticlly return to the system for reuse in another function call. In your case, the first declaration could eithe be a static variable or cold be a local function variable. Depending on this it could be allocated in one of those pools. The second case borrows memory from heap. Usually every single variable occupies contiguous space in memory. It does not matter whichg type of th memory it is. Array is such a variable which occupies a memory region. The order in which data is put in memroy itself depends on architecture. The task of th compiler is to give you a standard view of the varialbles, i.s. array[0] should conatin data for array[0] and pointer arithmetic shold work in the standard way. So, in practice all elements of an array are stored sequentially. If not, it will not alter anything in the programming. Though i have not seen a case where they would not be as such. While abstract C language does not say how local objects are allocated (i.e. there's no explicit references to "stack" language specification), the storage duration of local objects is well aligned with LIFO properties of stacks: local objects are destroyed in the reverse order of their creation. Object that are created last are destroyed first and vice versa. This principle applies uniformly to all local objects. Arrays are no exception. Every array is just an appropriately sized block of contiguous memory bytes (which, BTW, is true for objects of any type). There's nothing special about arrays. There's no reason to store array elements non-sequentially. Every array object is created in its entirety on top of the stack. And when array object reaches the end of its storage duration, it is simply "popped off the top", just like you said. Anything that could have possibly resided above it in the stack should have already been popped off by that moment. 
c-1-10	X	Adding more than two numbers in C How would I go about adding more than two numbers together? I have a feeling I would have to use arrays but not quite sure how to implement it. I can add two numbers easy but how would I change that to adding 3 numbers and more? Thanks I don't see what the problem is, it should be pretty straight forward it seems that you are new in programming. Here are a few ways you can add: first way: Second Way: Third Way: Well, if u want to save them, do some kind of changes and print sum, this code might help : You can also use linked lists or other type of data structures. 
c-1-11	X	Why scanf("%d", &number) results 'a' as 29 in C programming? I have a following code in C Here I am expected to enter a number but I have entered a character 'a' and it results 29. I expected that it will throw an exception but I was surprised by an output. I think "scanf()" doesn't read "a" as as number and simply skips to put any number in "number" and 29 is the initial value of the number which is found in stack! try to initialize "number" with something like 123 and you will get 123 in output. For starters the function main without parameters shall be declared like Just change your program the following way and see what will happen if you try to enter the character 'a' instead of a number. According to the description of the function in the C Standard (7.21.6.2 The fscanf function) d Matches an optionally signed decimal integer, whose format is the same as expected for the subject sequence of the strtol function with the value 10 for the base argument. The corresponding argument shall be a pointer to signed integer. And (7.22.1.4 The strtol, strtoll, strtoul, and strtoull functions) 7 If the subject sequence is empty or does not have the expected form, no conversion is performed; the value of nptr is stored in the object pointed to by endptr, provided that endptr is not a null pointer. Thus in the demonstrative program the else statement will be executed because (The C Standard, 7.21.6.2 The fscanf function) 16 The fscanf function returns the value of the macro EOF if an input failure occurs before the first conversion (if any) has completed. Otherwise, the function returns the number of input items assigned, which can be fewer than provided for, or even zero, in the event of an early matching failure You have fallen into the same trap that snares virtually all new C programmers that do not take the time to fully understand the scanf family of function before attempting to take user input with it. Before getting to the specifics, any time you take user input, you must validate the input. That means checking the return for whatever function you used to validate input was in fact received, and if necessary, validate that the input received was within the expected/acceptable range of values for your code. Using scanf is no different. The preferred method for user input is fgets because it avoids the pitfalls inherent in scanf and completely consumes each line of input (provided the buffer is large enough, or if it is called repeatedly until you validate the last character read was a '\n') With scanf, it is up to you to account for, and remove, any characters that remain in stdin in the event of (1) successful input or (2) an input or matching failure where additional attempts at input will follow. To safely use scanf for user input, you have three conditions to test for, (1) did the return indicate all conversions specified in the format string took place? If so, empty stdin and check the range of values received as required. (2) did the user cancel input by pressing Ctrl+d (or Ctrl+z on windoze). If so, gracefully exit insuring a final '\n' is provided in your output -- (OS & compiler dependent); and finally (3) did a matching or input failure occur? If so, handle the error and empty any invalid characters from stdin. When you are taking user input, an invalid input does you no good. So you generally want to loop until you receive valid input or the user cancels, that can be done relatively easily with a simple infinite loop, e.g. Stepping though the input loop, you will notice each of the three conditions you must check for are handled, and any characters that remain in stdin are emptied in preparation for the next input. Your complete code simply outputs the result of the successful input (and if on windows, adds a final getchar(); to prevent the terminal window from closing if you are running withing an IDE, e.g. Example Use/Output Example where input canceled. (note: on Win10, ctrl+z does not generate EOF by default, See CTRL+Z does not generate EOF in Windows 10 | PROC-X.com) Look things over and let me know if you have further questions. 
c-1-12	X	GTK Glade C - Treeview selection weird segfault I'm currently learning GTK and Glade. I'm trying little by little to make a small accounting programm. Now, i have a weird segfault happening and i can't understand why. I just want to unselect all the GtkTreeSelection using gtk_tree_selection_unselect_all. Note that it also crashes if try to select all. What is weird is that the segfault doesn't occur if i comment out my on_treeview_selection1_changed function. So it seems this function somehow messes with the other one.. Is it possible ? main.c : and the test.glade file : 
c-1-13	X	Testing a Linked List I am reading Skiena's "The Algorithm Design Manual" for personal learning, and I am trying to implement the linked list in C. How do I use the insert_list() function and then print out my list to verify the values? I wrote a main function to try and figure out how to use insert_list(): I receive an error at compilation with gcc: expected 'struct list **' but argument is of type 'struct list * How do I properly use this function to insert items into and then print my list? Without the insert_list() call, it prints root->item as 5, as expected. You have a nice function. Now: use it. As mentioned in the comments, the way to get it to compile is to change the call to insert_list() to this: The insert_list() function takes a pointer to a pointer to a struct list, not just a pointer to a struct list. You've written the code in an odd way. You're first assigning traverse to be equal to root and then calling the insert_list() function, which will overwrite traverse with the pointer to the new node it creates. At that point, the new node will be the "root" of your tree, not the root node you originally created. This will likely cause confusion when you attempt to traverse the list later. 
c-1-14	X	Why am I getting Conditional jump or move depends on uninitialised value(s)? I have written the following funktion: its taking a pointer to a queue and adding a new element, containig the string as data, to the end of it. When im running my programm on macos it's working fine but when i run it on ubuntu i'm getting a memory error. Valgrind is telling me the following what condition exactly is depending on a uninitialised value und what value is it ? An obvious problem here is a lack of new_queue->next = NULL in the if clause. The next field is left uninitialized indeed. I don't know whether valgrind is sophisticated enough to detect it. 
c-1-15	X	C - converting hex to string Following on an old question Converting hex to string in C? The approved answer suggests to use sprintf to convert each hex to string. I have two question on this - 1) When i have a hex like 0a i want my string to have 0a too, but following the above solution the result will have a. 2) What am i doing wrong here? The o/p seems to - String: 4aaa40 3) Combining both the both questions, i want my result string to be 4aabab0a40 TIA Your code has several problems. First unsigned char temp[10]; should be unsigned char temp[11]; to contain a string terminator. Next is the format spec "%x" should be "%02x" so each value is 2 digits. Then temp + i should be temp + i*2 so each pair of digits is written in the right place. Correcting those mistakes: Program output is now the required String: 4aabab0a40 
c-1-16	X	c - struct unsafe warning i am trying to use struct to make some kind of list that takes the student's name, number etc. My problem when i try to build solution and see if there is an error, compiler(Visual Studio 2013) tells me to use "strcpy_s" intead of "strcpy". And when i fix it this time i get errors related to string string sizes. What exactly am i doing wrong? Well safe unsafe question is coming because of the buffer over run issue. strcpy is not aware of destinations characeter holding capability. That's why its unsafe. Safer would be strcpy_s( stud.name, 20, "goktug" );. Here we are specifying that no matter what we should be in limit of 20 as destnation is capable of holding 20 characters including the NUL terminating character. One can argue that here data is being truncated which is not better than a clear message that destination is too small to hold the copied thing, but surely better than a buffer overrun exploits. If we think along that line then well, we can reach the conclusion that we shouldn't call them unless we become sure that destination can hold the copied string. 
c-1-17	X	FreeRTOS, Atmel Studio - Task not being blocked before it receives a binary semaphore I'm trying to switch to a blocked task after a button press. Basically I want task_player1 to do nothing until it receives a semaphore from task_ctrl. The way I'm giving the semaphore is on a button press. The code is bellow: The problem is task_player1 is never blocked as it should be by portMAX_DELAY. As soon as I upload the code to the microchip the LED lights up while I only want it to light up once I press the button and the semaphore is given. What am I doing wrong here? Due to Atmel Studio restrictions I'm using FreeRTOS v7.3. Edit: Updated code 
c-1-18	X	C language can not reading the file which is .txt I have a reading file problem with C language. The file is on my desktop and also in my project directory. I have to take all the text in .txt document and cut them word by word. I think there is no problem in my code, it should take all the data but it is not working so output is "File couldn't be opened". Can you help me guys? Thank you so much. Here is my codes: 
c-1-19	X	Pointer to string changes its value unexpectedly I have note that, when writing a string in an array allocated with malloc, its value changes. To be clear, here, the code that replicates the "error": When executing, the output is: while I was expecting the same value because I am not changing where the pointer points (at least not directly). What is happening under the wood? What am I missing? How to do the things in the right way? this causes problem when using free(). And this is the real reason why I am writing this question. This code was written just to replicate the error and show where I have found the problem Well the literal string are basically arrays and it decayed into pointer to the first element when you assigned it to a_p. That address is being printed. And as you dont keep the address of the allocated memory you are having memory leak. Also you cant use it in free and that gives enough hint that it is not allocated dynamically . From standard The free function causes the space pointed to by ptr to be deallocated, that is, made available for further allocation. If ptr is a null pointer, no action occurs. Otherwise, if the argument does not match a pointer earlier returned by a memory management function, or if the space has been deallocated by a call to free or realloc, the behavior is undefined. Well this explains why you faced problem when trying to free memory you haven't allocated. Again to have something like copying you need to use strcpy or strncpy or strdup(POSIX compliant). For more information check this link. Standard says it explicitly how it is considered as array in translation steps. Especially this part - ( Decayed pointer is of type char* that's why) For character string literals, the array elements have type char, and are initialized with the individual bytes of the multibyte character sequence. You are changing the pointer directly. This statement is equivalent to String literals have types of character arrays. For example the string literal "something" has type char[10]. From the C Standard (6.4.5 String literals) 6 In translation phase 7, a byte or code of value zero is appended to each multibyte character sequence that results from a string literal or literals.78) The multibyte character sequence is then used to initialize an array of static storage duration and length just sufficient to contain the sequence. For character string literals, the array elements have type char, and are initialized with the individual bytes of the multibyte character sequence... Used in expressions arrays with rare exceptions are converted to pointers to their first elements. From the C Standard (6.3.2.1 Lvalues, arrays, and function designators) 3 Except when it is the operand of the sizeof operator or the unary & operator, or is a string literal used to initialize an array, an expression that has type "˜"˜array of type'' is converted to an expression with type "˜"˜pointer to type'' that points to the initial element of the array object and is not an lvalue. If the array object has register storage class, the behavior is undefined. So after this statement the pointer points to the first character of the string literal with the static storage duration. I think you mean That is you wanted to copy the string literal in the dynamically allocated memory. Take into account that if even you'll write the following code then it is not necessary that p1 is equal to p2 because depending on compiler options the compiler can place these two identical string literals in different memory extents. So the if statement can yield either true or false. The string literal "something" represents a null-terminated series of characters that live in some read-only region (most likely .text if you build/link/run on a GNU/Linux system). Initially, a_p points to somewhere in the memory region within which malloc is allocating buffers. You can freely write to the location to which a_p points, free() it, etc. When you perform the assignment a_p = "something";, you are not writing characters to the location to which a_p points, but rather changing that pointer to point to the beginning of that string. Now, you're pointing into (read-only) memory that wasn't allocated by malloc so its corresponding free function isn't able to do anything meaningful. Use strcpy (or better yet for safety, strncpy) instead to copy characters to the destination, a_p. Your problem You are allocating memory for your pointer with malloc() but then you assign your pointer variable to something else ("something", which has its own address), instead of filling the newly-allocated pointer. Solution You should use the strdup() function that allocates memory and copies a string at the allocated memory: Or the strcpy() function, that takes a malloc()'d pointer and a string to copy in the pointed memory: 
c-1-20	X	what does dereference operator return? l-value or r-value what does dereference operator return? l-value or r-value based on below example as the increment opearator is working properly. Need an explanation for the same 
c-1-21	X	GCC confusing standard header with personal one named the same In a project I'm working on, I named one of my files math.h, which obvisouly is also the name of a standard library header. Everything worked fine, until I began to use gcc's -I option: I sorted my files into separate directories, like src, obj and inc for headers. I ended up with something like and now my issue is that another library I use (the SDL, btw) #includes the standard math.h header (located at /usr/include/math.h), and GCC gives it my own math.h (found at like /home/me/my_project/inc/math.h), and obviously this does not compile. So my question is, how can I make GCC not think my headers are standard? Of course I can just rename the file, but that would just be avoiding the issue -- even if I end up doing so I wish to know the solution in case I come across this issue again. Why do you think the proper solution is not to rename the file? If there are multiple files with the same name, how would the compiler know which one to use? You must rename your file. The C11 standard says that in the current state the behaviour is undefined. C11 7.1.2p3 If a file with the same name as one of the above < and > delimited sequences, not provided as part of the implementation, is placed in any of the standard places that are searched for included source files, the behavior is undefined. Otherwise, if you're compiling a kernel or similar, use -ffreestanding. 
c-1-22	X	Searching in array of struct in C How to search on char that has been randomly generated in an array of structures. If char is found the function must return the info[i].num in array of struct, where info is the array of structures (see code below). I got error in gcc how can I use correct comparison ?? Your program is missing quite a few things. First order of business is you need to set seed for rand function in order to get pseudo random numbers. The warning you're getting ( not error, at least on my compiler) tells you you're comparing pointer with integer because an arrays in c are actually plain old pointers. According to https://www.tutorialspoint.com/c_standard_library/c_function_sprintf.htm sprintf sends output to your arr variable and retruns a value depending on the success of the operation so the following code: should be written as I suggest you try to grasp core concepts of C as it can be of great help in your future programming life even if you never use C again. the following proposed code: cleanly compiles incorporated the majority of the comments to the question performs the desired functionality documents why each header file is included the code will probably fail to find a matching entry in the strut array because the generation of the arr[] contents could have been any value from 10 to 50 so will never result in a 5 appended to the string: some. And is unlikely to append a 10 or 50. And now the proposed code 
c-1-23	X	test C program with some inputs I wrote a program in C and I want to try it with some inputs. The inputs are not numbers so I can't use a for loop or something like this in the code. So I want to write a file with inputs and give it to the program so it will take every time (it waits to input) 1 line from the text file or something like this, is it possible? If your program reads input from stdin - i.e. if you're using a function like gets or scanf to get your input - you can achieve what you're asking about by using input redirection. Let's say you create a file called test_input.dat which contains your test data. If this file and your program reside in the same directory, you can change to that directory using and then run your program, telling it to read input from test_input.dat by doing the following: This will cause your program to read data from test_input.dat instead of from the terminal, and should work the same for most common operating systems (Windows or Unix variants such as Linux, etc). Best of luck. 
c-1-24	X	OpenCL: Values of __local array are lost after a barrier call I have a kernel storing some partial results in a local array before reducing them into a single value (see the example below). Before the reduction process starts, a barrier is placed to ensure all threads have successfully written their partial data. However, the barrier resets the values of the temporary array to default values (i.e. 0.0f for floats). Minimal example: The argument partial has the following initializer: The clSetKernelArg() call returns a status code CL_SUCCESS and the kernel terminates without any errors. Another observation is that swapping lines partial[lpos] = 1 and barrier(CLK_LOCAL_MEM_FENCE) achieves the wanted result --- all components of the array partial now equal to 1. Any input why this behaviour occurs would be much appreciated. 
c-1-25	X	Why cannot we declare a variable after a switch case colon without using curly braces? Without the curly brace after case 1: it gave an error: * a label can only be part of a statement and a declaration is not a statement: int val; * That is how the C grammar is defined. Variable declarations are not considered statements: A label is required to be followed by a statement. A label plus a declaration is not allowed. That is, IMO, inconvenient: And remember that a case is just a special kind of label, so: The issue with braces is that in C they are used to build a compound statement, that of course is a kind of statement. The lines inside the compound statements can be both declarations and statements, all mixed (old C versions only allowed declarations at the beginning, not in the middle). So: As a footnote, since modern C allows to intermix declarations and statements you can also write: because an isolated ; is an empty statement, it can be used to satisfy the grammar whereever a no-op statement is needed. Whether to use a ; or a { ... } is a matter of readability. In the end: example I'd use a ;, but in the case: I prefer the {...}. Of course more creative solutions can be written, such as: C Rules About Case Labels The rules of the C standard that prevent a declaration from following a case label are: A case label must be followed by a statement (C 2011 [N1570] 6.8.1). The C standard defines a statement as one of labeled-statement, compound-statement, expression-statement, selection-statement, iteration-statement, or jump-statement (6.8). None of these is a declaration. The C standard treats declarations and statements separately. The rule that allows declarations to be largely mingled with statements is that a compound-statement is a list of block-items in braces (that is, { block-item-listopt }) (6.8.2), and a block-item is defined as a declaration or a statement. So, inside braces, you can mix declarations and statements. But a case label must be part of a statement; it is not a separate thing you can insert anywhere. Declarations can be included inside a switch using two alternatives. One is to use an empty statement after the case label, as in: Another is to use a compound statement after the case label, as in: Generally, the latter is preferable, because the scope of foo is limited to the compound statement, so it cannot be used accidentally in another section of the switch statement. Reasons For the Rules I do not see a reason for this other than history. Originally, declarations were even more restricted than they are now. Inside functions, declarations had to be the first statements inside braces. You could not put a declaration after any statement. That has been relaxed in modern C, but why is there still a restriction on what follows a case label? There cannot be a semantic reason that a declaration cannot follow a case label in modern C, because the empty-statement example above would have the same semantics as: That is, the compiler would have to be prepared to create and initialize a new object at the same point in execution. Since it has to do that for the legal example code, it would be able to do it for this version too. I also do not see a syntactic or grammatical barrier. The colon after the constant expression of a case label is pretty distinct. (The constant expression can have colons in it from ? : operators, but the first : not associated with a ? will be the end of the case label.) Once parsing reaches that colon, the current parsing state seems clean. I do not see why it could not recognize either a declaration or a statement there, just as it was prepared to do before the case. (If somebody can find a problem in the grammar that would be caused by allowing a case label to be followed by a declaration, that would be interesting.) 
c-1-26	X	Including basics library of C (unistd.h) on window I've been programming at my school on a Mac for one month. We did C programming on an UNIX shell. Now i'm back at home and I use my own PC that is on window 10. I have tried to make a similar set up, but i don't know much about all that. I installed git and bash, this made it like a UNIX shell. Also I have installed the gcc compiler. So, now that i'm making a basic program, it should be working but when I make the include <unistd.h>, the shell can't find it. I know my question is probably silly but I really couldn't find how to solve the problem. I downloaded the unistd.h file. I also found this http://processors.wiki.ti.com/index.php/Compiler/diagnostic_messages/5 It explain that i should be putting the .h folder in some kind of defined path, but I don't know how to do that. Does anyone know how I can fix this? If you installed gcc as part of mingw or something similar, it should have included a unistd.h. Just having the gcc compiler is not likely to get you very far. You probably want to start over and install something different than you did (mingw or cygwin or just set up a vm as suggested) that provides a more complete environment. 
c-1-27	X	What happened about inet_ntoa? Let me be puzzled,the example with A different result.Is it somewhere wrong with me. the result: The documentation for inet_ntoa says: The inet_ntoa() function converts the Internet host address in, given in network byte order, to a string in IPv4 dotted-decimal notation. The string is returned in a statically allocated buffer, which subsequent calls will overwrite. (That's from the Linux man page; others have different wording but the warning about the static buffer should be in there somewhere) So you called inet_ntoa once, the buffer was filled, and a pointer to it was returned. You called it again, the buffer was overwritten, and a pointer to it was returned again. You passed both of those pointers to printf, and it printed the buffer contents twice. To do this properly, you need to copy the first inet_ntoa result into your own local buffer before calling it again, or just use 2 printfs. Or you can use inet_ntop instead, which requires you to provide the output buffer yourself. (Caller-provided output buffers are more common in newer interfaces; static output buffers seem easy at first but in the long run cause accidents like the one in your code.) 
c-1-28	X	Reading all .txt files from a folder? I am trying to read all .txt files which is in the directory named "dataset". All text files has name like 1.txt, 2.txt, 3.txt... And then saving the contents of the files to a structure named FILES. I used the dirent.h library and readdir( ) function as I saw in some sources. But the file name which program read from directory does not return correctly. Here is my related code: The file name that I printed in here "printf("%s\n", filesInDirectory->d_name);" is ".". Where am I doing wrong? THIS IS NOT AN ANSWER BUT TOO BIG FOR A COMMENT Here are your problems: 1. This is enough size of one FILES. This is will not be enough After Put something like This will check to ensure files end in .txt Consider using fstat to ensure that the file is a text file Remove the casts on malloc Perhaps use realloc for files while ... feof is bad - see link above fscanf(file, "%s", - Buffer overruns is possible. Do something about this. Read the manual page 
c-1-29	X	Print with junk values,c I'm having a problem and I can not figure out why. In main I create 2 arrays of strings. The function accepts 2 strings and creates a new array of the appropriate size according to the following requirement: For example: Array 1: aviv , Array 2: 12 , The new array: a12v12i12v The new array must be exactly the size! And then send the new array to main and main to print it. I also print junk values. I checked the size of the new array and it is the right size. My code: The function should be declared like because neither string str1 nor string str2 are changed in the function. You have to append the result string with a terminating zero. The length of the resulted string can be calculated simpler without using loops. As the function strlen has the return type size_t then variables that accept the result of a function call should be also declared as having the type size_t instead of the type int. The function can be implemented the following way as it is shown in the demonstrative program. The program output is 
c-1-30	X	Why is comparision between floats so troublesome? i had a small problem with comparing two floats (or double) so i went searching for hours and i found sooooo many answers that it was a bit confusing ( all those fabs and EPSILON answers), but at the end the solution was very simple and i discovered a new question, so to sum up here's what i was trying to do: and it was giving false instead of true!! so i used this instead and it worked perfectly. but then i tried this and this and they both gave me perfectly correct results (i ddin't need any of those solutions using fabs and epsilon?? and the second worked perfectly too!!) but this printf("%d", k ==(float) 0.1); won't give me correct results, i just don't understand why the 2nd, 3rd and 4th examples worked while the first and the last did not work???? any help is reaalllyyy much appreciated. P.S: guys i'm new to here so if my question is not well written please do tell me hwo i can improve it, thanks a looot once again. 
c-1-31	X	Shape modification of sine signal in C using only integer math I want to generate a sine signal on an ARM Cortex M0 microcontroller that is customizable concerning its shape by a shape parameter n. Have a look at the plot below as an example. Here I modelled the different curves with the function For a higher n, the maxima are "shorter" and the minima are "wider". For a lower n, the maxima are "wider" and the minima are "shorter". In order to reduce memory consumption and increase performance, I only use integer math to generate the sine signal. Here's the code for the sine calculation: Output range [-1.0 1.0] mapped to [-16,384 16,384]. Does anyone have an idea how to realize such a shape modification only with integer math? 
c-1-32	X	What should be the output of the following and why it should depend on compiler? Please help me to understand the output.Here we know, we can't say that f1() is evaluated before f2() due to Left to Right associativity of '+' because associativity only happens when there are 2 or more than 2 operators of the same precedence.So what should be the concept used to determine the answer? Because the standard doesn't impose any constraint in it. The section that says this is from 6.5 The grouping of operators and operands is indicated by the syntax.85) Except as specified later, side effects and value computations of subexpressions are unsequenced. From standard itself 6.5.2.2 (Showing an example that standard doesn't impose any constraint) In the function call the functions f1, f2, f3, and f4 may be called in any order. All side effects have to be completed before the function pointed to by pf[f1()] is called. The answer to your question would be unspecified. You can't say something for sure. If f1() is called first result would be something and if it is other way round then the result would be different. To support what I said check this link ... In the expression f(i++) + g(j++) + h(k++), f is called with a parameter of the original value of i, but i is incremented before entering the body of f. Similarly, j and k are updated before entering g and h respectively. However, it is not specified in which order f(), g(), h() are executed, nor in which order i, j, k are incremented. If the body of f accesses the variables j and k, it might find both, neither, or just one of them to have been incremented. (The function call f(a,b,c) is not a use of the comma operator; the order of evaluation for a, b, and c is unspecified.) These two function calls are indeterminately sequenced w.r.t. each other. C11 6.5.2.2p10: There is a sequence point after the evaluations of the function designator and the actual arguments but before the actual call. Every evaluation in the calling function (including other function calls) that is not otherwise specifically sequenced before or after the execution of the body of the called function is indeterminately sequenced with respect to the execution of the called function. And indeterminately sequenced means that C11 5.1.2.3p3 Evaluations A and B are indeterminately sequenced when A is sequenced either before or after B, but it is unspecified which Therefore either f1 or f2 will be called first, and the execution of the functions would not be interleaved. You can tell it afterwards by checking the value of x - if it is 5 then f2 was called first; if 10, f1 was called first. The footnote 86 says also: In an expression that is evaluated more than once during the execution of a program, unsequenced and indeterminately sequenced evaluations of its subexpressions need not be performed consistently in different evaluations. I.e. if you did this in a loop, on first iteration f1 might be called first and on next f2 might be called first... The operator associativity and precedence have almost nothing at all to do with actual order of evaluation - the order of evaluation of operands of +, like almost all other operators, is unspecified - and unsequenced (C11 6.5p3). 
c-1-33	X	makefile error - Unity testing framework - Keil uvision 5 - STM32CubeMx I have been trying to integrate Unity Testing Framework into Keil version 5, naturally I faced a lot of issues and errors and was able to solve a lot of them, now I am facing an error that I would like to get your support with. A brief summary: This is my thesis project, which is Embedded software testing and the implementation teams are using Keil uvision 5 with code skeleton and configuration generated using STM32CubeMx for the development of a self-driving car project at my university. The enviroment The approach I plan to integrate Unity FW by using a makefile to compile and run the tests in the pre-build option available withing Keil. for now I am trying to make the makefile work using commandline outside Keil, once it works, I believe it will easy to just run it with a make command from Keil pre-build option. I followed this tutorial to create the makefile http://www.throwtheswitch.org/build/make I edited the makefile by adding the appropriate armcc and armlinker with the commandline options that were present in the keil configuration of the project and the arm compiler alternatives for what the tutorial was adding to their gcc as you will see in the makefile below The structure The following is sample structure of a Blinky project using TIM10 timer created using STM32CubeMx and Unity FW is added manually to the folder The makefile The current output and error 
c-1-34	X	Why should be there the involvement of type promotion in this code? In the code below the sizeof(int) will produce a signed int with a value of 4 bytes (suppose on a particular compiler) and -1 is also signed int, then my answer should be Yes but it displays No. Well it is the famous signed unsigned comparison. Here -1 which is signed number when compared to unsigned numbers - promoted to an unsigned number resulting in a big magnitude value (SIZE_MAX). So it is always false. The explanation why there would be type promotion here when comparing: From standard Â§6.3.1.8 Otherwise, if the operand that has unsigned integer type has rank greater or equal to the rank of the type of the other operand, then the operand with signed integer type is converted to the type of the operand with unsigned integer type. Also from Â§6.5.8 under relational operators If both of the operands have arithmetic type, the usual arithmetic conversions are performed. And what sizeof returns? Under The sizeof and _Alignof operators Â§6.5.3.4 The value of the result of both operators is implementation-defined, and its type (an unsigned integer type) is size_t, defined in (and other headers). And in section Â§7.19 under Common definitions size_t which is the unsigned integer type of the result of the sizeof operator; To clarify a bit further when you are converting -1 to size_t it will have the value (Basically modulo SIZE_MAX+1) Also from standard Â§6.2.5 (Explaining the conversion) A computation involving unsigned operands can never overflow, because a result that cannot be represented by the resulting unsigned integer type is reduced modulo the number that is one greater than the largest value that can be represented by the resulting type. 
c-1-35	X	function to fill the top part of a table I have a function that allows me to fill the top part of a table by a number like in this example with 1: becomes after applying the function : This is my code (using an if test): Question How can I achieve the same result without using an if test? Try this. 
c-1-36	X	c program for calculating expressions I have made this program to calculate expressions like '2 + 6 - 9'(with spaces between numbers and operators), but the last if block is not correct. How can I break the loop when \n is received, and also store the input if not. See the documentation for scanf On success, the function returns the number of items of the argument list successfully filled. Replace this part: with: This: checks whether scanf() has put any value into oper if yes then it checks if the value is equal to \n 
c-1-37	X	how to split screen in Terminal? I tried to install screen but it says "/Library/Java/JavaVirtualMachines/jdk1.8.0_141.jdk/Contents/Home/bin/apt" I tried to split screen in a terminal so that I can code in one window using vim and execute in another one, but I could not split screen at all. After googling for little bit I realized that I need to install screen using but is says, "/Library/Java/JavaVirtualMachines/jdk1.8.0_141.jdk/Contents/Home/bin/apt" can anyone help me out, please? Merry Christmas!!! Use apt-get install, not get -apt. Install screen Start a screen session Ctrl+A then S (uppercase!) to split horizontically or Ctrl+A then | to split vertically. In order to remove all splits (windows are being preserved) do Ctrl+A followed by Q. Note that everything is case-sensitive. You can use Ctrl+A then " to switch through the windows after removing splits. 
c-1-38	X	Change colors of keywords in linux terminal while typing I'm writing an interpreter in C, which runs in ubuntu console. I want to change the colors of keywords like int, double, function while typing. Example: functio should be white, but as soon as I finish typing a keyword function its color should be changed to blue. Simple example that would answer my question: I want to set the text color in terminal to blue when the number of letters is odd and red when it's even and it should happen while typing (not after pressing enter). How to operate on text in terminal and change its colors while typing? Live text editing on a terminal console is much of a black art, because there is no reliable way to be sure that the console supports any and all escape sequences that you need. For a full-screen editor, you could use ncurses, but "inline" is harder than it looks. An example: my otherwise fairly compliant Mac OS X's own Terminal handles single line input gracefully but it gets confused when a text string contains nonprintables or spans more than can fit in the Terminal's width. The following not-so-quick (but still dirty) C program allows very basic input. A few of the hoops it required jumping through: on OS X, getchar echoes its input back to the command line; the terminal itself (!) does not forward its input to the running program until an Enter was entered. Other consoles may have other quirks. With single-line editing working, the only remarkable thing is how to process the running line to display parts in color. That's left to walking over the string while it's being displayed, using ANSI Escape Codes to toggle color on and off. My syntax highlighting method is very basic; if you have many more keywords, you may want to look in a quicker way of looking them up. It's also not able to handle wildcards, so you cannot highlight stuff like "any decimal number". As you can see this already is quite a large program, and it only allows basic editing. I left out tab completion, cursor movement, undo, and various other niceties users may expect from a full line editor. Rather than re-inventing the wheel, you could look at the sources of GNU readline and check if it would be easier to adjust its redraw routine to allow your custom syntax highlighting. Other than that, it works just nicely: 
c-1-39	X	understanding the pointers So I have the following code, I am trying to understand the basics of pointers, so I want to change the value/string inside first, while also preserving it hence using second. Problem is, whatever the input is, the function will print 0 followed by 1 (the value of i) then crash. I can clearly see it has to do the with loop, but I can't understand why! Can anyone explain to me why this is happening and how I can avoid this? Try doing this: (it is a precedence problem. Hint: if you did str[1] inside that function what had to be its value?) But you are not preserving anything this way because from spells function you are still modyfing the instance of the string created inside main: char first[20]. If you want to preserve anything make a copy of the string and operate on the copy. Don't complicate things - here you are complicating things (By the way you accessed array index out of bound and then you got seg fault in the called function). Easy way to do things Array decays into pointer to the first element. Then with the same logic you do one thing And then You are not creating any copy - well if you need to use allocate memory or just copy it to some already allocated memory. Explanation of what might have gone wrong in your case For your clarity &first is of type char (*)[20]. pointers are not same if the values are equal. You are assigning the value of it to char* and the you pass it's address. Now when you pass it to the function you do this *(*(str+i)) So now str is being incremented by i*sizeof char** - what ever the size of char** maybe it will result in the accessing the memory out of bound, resulting in undefined behavior which in your case turns out to be segmentation fault. scanf use can be way better by doing two thing saving you from possible case of buffer overrun and also checking whether the input got successful or not. To be clear, my earlier edit was lacking in explaining the problem. To be more explicit, the pointers have two aspect to it - it's value and it's type. The second dictates all the pointer arithmetic. Here when I said incrementing str would be out of bound by 80 Bytes that will be true only if relevant type information is passed to the function. Something like and But here we didn't pass that information - we instead assigned the value of char(*)[20] to a char*.(Ofcourse compiler complained) And started working with char**. Now when I say Actually we move more clearly Here in your case this str originally contains some arbitrary address of a char*, it has no relation with address directly. This memory location now it points to after addition is not your concern and that is some memory to which you have no permission to access. With (*str) now you get the address of the base of the array. Then you index into it. That's a right thing to do and doesn't create any illegal memory access. 
c-1-40	X	Memory Leak from C Socket Read Function I am writing a small code to read ADS-B data from a Socket. The data is in following format MSG,6,1,1,4242D7,1,2017/12/25,12:04:05.695,2017/12/25,12:04:05.695,,,,,,,,6142,0,0,0, MSG,4,1,1,80068D,1,2017/12/25,12:04:05.695,2017/12/25,12:04:05.695,,,183,268,,,-576,,,,,0 MSG,2,1,1,800B6F,1,2017/12/25,12:04:05.695,2017/12/25,12:04:05.695,,,7,165,28.53949,77.10886,,,,,,-1 MSG,5,1,1,4242D7,1,2017/12/25,12:04:05.695,2017/12/25,12:04:05.696,KAR2440 ,32025,,,,,,,0,,0 The strings are terminated by CRLF I am presently using a readline function to read the data from the socket line by line The above function is called from main using the following routine bytesread=readline(netfd, &netbuf); The problem is the code footprint in the memory increases gradually indicating a memory leak. Valgrind also points to the readline function. There is no memory leak if I uncomment the second last line (free(buffer)). But doing so gives me no data at output. What am I missing here. Your design indicates that the function readline allocates the memory required and returns a pointer to the calling function. Using this design, the calling function MUST call free to avoid a memory leak. I should point out that this design is often problematic and increases the chances for memory leaks. A better design keeps memory management concerns together (the allocating function should free the memory. When this is impossible or impractical, the function name should clearly indicate the allocation and a destructor should be written (i.e., line_alloc and line_free), minimizing any confusion. 
c-1-41	X	Adding comma between integer values in text file I have a input.txt file something like that: 88 552 55 57 66 5 96 78 1 10 So i want to change input.txt file this way but if there is a space at the end of the line, and what should I do if I do not want it to be a comma in that space in C programming language. 88,552,55,57,66 5,96,78,1 10 Read or a char for time and then if the caracter is equal to space caracter seek back one position and write ";" You can do something like this (for the sake of simplicity I skipped validating) This code starts by reading the contents of "input.txt" into a char buffer and closing it. Then, it loops through the read file contents where (n is the size of these contents) replacing spaces with commas. After, it opens the file again, writing the replaced buffer and then closing it. 
c-1-42	X	C - fscanf does not return the correct result? I have a small project to do, and I am required to read from a .txt file, the amount of students, and some info for each student but when I read the names of the students, this is what it returns "P" and "P|" even though the txt file does not have anything like that in it. This is what it returns: This is the txt file (downloaded from a site, and encoding ANSI) : https://hastebin.com/epagahagoy.css Last but not least, this is the code that I've written so far: Still rather new at C, and I'm not really sure what causes that. 
c-1-43	X	How come this C code array works? In the following code: At the first code snippet under "Insertions method" The array LA[] is intialized to include 5 elements, but after that the array's size increases ! How come does this happen since array are of fixed size 
c-1-44	X	Do I have to initialize a char* after malloc? I have a program that reads chars into a dynamic string buffer. We do not know the size of the string, and it is a requirement that we do not simply set a fixed-size, "large-enough" buffer. The relevant function works like this: Now the program seems to work, but when running it through Valgrind I get the errors Uninitialised value was created by a heap allocation and Conditional jump or move depends on uninitialised value(s). These error appears arbitrarily (sometimes) when I call functions like printf or strlen, as seen in the code above. This problem is sorted if I use calloc instead of malloc / realloc, but then the reallocation process becomes messier. Is the Valgrind error something that could be ignored if the program works fine? What are the implications of not initializing the memory to zero? If this can't be ignored, what's the best design to sort it out? You should put a string terminator at the end of the string. PS: If you want to clear some memory use memset, it's faster than a for cycle use calloc , its much better than malloc and memset. Example 
c-1-45	X	What are the following notations pointing to? For an integer array declared as- int arr[4][3][2] My analysis: arr:- pointing to the base address of the three dimensional array &arr:- The same thing as arr just here the array name does not decompose arr[0]:-The pointer pointing to the first element of a 3 dimensional array that is pointer to the base address of a 2d array arr[0][0]:The pointer pointing to the first element of first cell of first 2D array of the first 3D array. Am I thinking on the correct lines? Which ones out of these are pointing to the same thing? int arr[4][3][2] means arr is 3D array, consists four 2D array, each 2D array having three 1D array and each 1D array having two-two elements. Let's Have a pictorial representation of arr : Assume arr base address is 0x100. If you analyse above figure, you will come to know that arr,arr[0],arr[0][0] and &arr[0][0][0] all are same, all are holding arr base address that is 0x100. Note that arr[0][0][0] is value but &arr[0][0][0] is address of first elements, so both are different. arr and &arr also same because arr name itself address so by putting & doesn't make any difference. arr[0][0] and &arr[0][0] also same because arr[0][0] is one dimensional array i.e single pointer pointing to two elements called arr[0][0][0] and arr[0][0][1]. as 
c-1-46	X	Matrix multiplication in 2 different ways (comparing time) I've got an assignment - compare 2 matrix multiplications - in the default way, and multiplication after transposition of second matrix, we should point the difference which method is faster. I've written something like this below, but time and time2 are nearly equal to each other. In one case the first method is faster, I run the multiplication with the same size of matrix, and in another one the second method is faster. Is something done wrong? Should I change something in my code? 
c-1-47	X	Polish calculator in C I am doing the exercise 5-10 on K&R's TCPL, which lets you write a simple Polish calculator: Exercise 5-10. Write he program expr , which evaluates a revers Polish expression from the comand line, whre each operator or operand is a separte argument. For example, expr 2 3 4 + * evaluates 2 * (3+4). The output of my program is 0.000000 anyway, for example, when I input ./expr 2 3, it would be 0.000000, which is not intended. My code below: 
c-1-48	X	Time optimization for string formatting: pad a line to length K by adding spaces between words I have written code to extend string to length K using spacebar symbol. My code works, but is not fast enough for lengthy strings. My tries at optimizing the code were insufficient, so any help would be appreciated. Example: The goal is to make any string process in 1 second, if K = BUFSIZE. Here is the code: I'm running on an Android phone so I'm not posting code here, but I'll give you some hint. First, you don't need to insert spaces one-by-one. You can create an array of strings, separate the sentence into an array of words and store them. Now you have the number of words. You can use a very simple integer division to determine how many spaces should every "word separation" have, as well as how many remaining spaces to be added from left to right. You've done all of them. You can now concatenate the words and add the spaces during concatenation. The whole procedure can be done in a time of O(N), where N is the length of the original string. Most linear algorithms should be fast enough in this case. The performance is likely limited by I/O. Here's a straightforward O(n) algorithm to pad a line to width with spaces: find number of words in the input line described by /([ ]*[^ ]*)*/ regex: find total number of spaces required knowing the desired line width and the number of word (nonspace) characters in the input: it allows to find the desired number of spaces between words. If spaces can't be evenly distributed between words then the remainder is inserted from left to right by adjusting the space between words if necessary the main loop copies words from the source to destination inserting the computed number of spaces between words: Example: 
c-1-49	X	writev(or pwritev) will conflict with O_DIRECT in c? I tried to combine writev with direct IO. But I got failed when I combined with them. Below code works, but failed if I add O_DIRECT when open() I always got "Invalid arguments" when failed. So I thought it might be memory alignment problem, so I adjust them into a memaligned buffer like below: But it still failed. Is there anyway to solve this? You should try set the both iov_len to BLOCKSIZE, but the file size would not be strlen(str0) + strlen(str1). 
c-1-50	X	Empty char after copying from array to pointer EDIT: As pointed here, I need to allocate memory at the beginning. So I changed my code accordingly and I found a new problem. Say I have these lines: Hello world1 word3 word4 Hello world2 word5 word6 What I want to achieve is to copy first two words of each line: Did I miss something? Thanks and Merry Christmas! 
c-1-51	X	8 Byte Number as Hex in C I have given a number, for example n = 10, and I want to calculate its length in hex with big endian and save it in a 8 byte char pointer. In this example I would like to get the following string: "\x00\x00\x00\x00\x00\x00\x00\x50". How do I do that automatically in C with for example sprintf? I am not even able to get "\x50" in a char pointer: Version 1 and 2 don't work. Just do: This will give you (in length) the number of hexadecimal digits needed to represent i (without 0x of course). log(i) / log(base) is the log-base of i. The log16 of i gives you the exponent. To make clear what we're doing here: When rising 16 to the power of the found exponent, we get back i: 16^log16(i) = i. By rounding up this exponent using ceil(), you get the number of digits. I have given a number, for example n = 10, and I want to calculate its length in hex Repeatedly divide by 16 to find the number of hexadecimal digits. A do ... while insures the result is 1 when n==0. save it in a 8 byte char pointer. C cannot force your system to use 8-byte pointer. So if you system uses 4 byte char pointer, we are out of luck. Let us assume OP's system uses 8-byte pointer. Yet integers may be assigned to pointers. This may or may not result in valid pointer. In this example I would like to get the following string: "\x00\x00\x00\x00\x00\x00\x00\x50". In C, a string includes the various characters up to an including a null character. "\x00\x00\x00\x00\x00\x00\x00\x50" is not a valid C string, yet is a valid string literal. Code cannot construct string literals at run time, that is a part of source code. Further the relationship between n==10 and "\x00...\x00\x50" is unclear. Instead perhaps the goal is to store n into a 8-byte array (big endian). OP's code certainly will fail as it attempts to store a string which is too small. Further "\x%x" is not valid code as \x begins an invalid escape sequence. 
c-1-52	X	How do I read last n characters of a string in a single file? I want to read the last n characters of a line in the file "passwordhashes.txt". If "$1$$" is detected in a line, I want to print the last 26 characters of that line and if "$6$$" is detected instead, I want to print the last 90 characters of that line. The following code returns the first 26 characters if md5 is detected and first 90 characters if sha512 is detected but that is not what I want. A few lines in the passwordhashes.txt (there are a total of 219128 lines in this file so I will just list out a few): You need to use common patterns , in your case its ':'. By observing your passwordhash.txt , we can see that the only thing seperating the hash and the raw text is a ':' so we use it as a delimiter! Solution Output Valgrind Output Remove the line break from the line if you wish to use it as crucial data! 
c-1-53	X	CMake CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS Can't Export inline method This is my .h file code: I have marked CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS as True In addition to the inline function can not be exported, everything is normal, I wanted to set what parameters can be exported inline function? 
c-1-54	X	Same C pointer showing different values? I'm running this program: *pointChar and *(poinTer+1) should output same result but the output that I'm getting is different. *pointChar is not outputting any value: What's happening here? When you perform + 1 on a pointer, it does not necessarily increase the memory address by 1. It increases it by sizeof(*ptr). In this case, poinTer + 1 is equivalent to (char*)poinTer + sizeof(int). This actually makes dealing with arrays much easier. The good old fashioned ptr[i] is syntactic sugar for *(ptr + i). So, if you have an array of 10 integers, ptr[4] will point to the 5th element rather than 4 bytes away from the base address (since integers are generally 4 or 8 bytes). So what you've actually done is: Create an int (num) on the stack and gave it the value 1025 Created a int*(poinTer) on the stack and assigned it the memory address of num Incremented the pointer by sizeof(int) (which unintentionally points to a different memory address), then cast it to a char* and assigned it to a new pointer. Assigned the byte pointed to at this new memory address the value 65 ('A'). This is probably what you wanted to do: 
c-1-55	X	Implicit Declaration of Function sbrk( ) I am trying to create my own malloc function, and I did not finished yet. Here is related part of my code: mymalloc.h : mymalloc.c In the sbrk(sizeof(tmp)); part of mymalloc.c, I got "Implicit declaration of function sbrk()". What I wanted to do ise creating a place for metadata of new block and also a place for the required size. Where am I doing wrong? Add the line At the top of the file 'mymalloc.c' so that the function is declared 
c-1-56	X	Allocating memory with malloc getting error In the above code I get an error but when I comment the last line printf the program runs correctly. what is the problem?? (I want to give n number from user without using arrays) Pointer arithmetic of the form score + i is already done in multiples of sizeof(*score). So when you write score + i * sizeof(int) you doubly multiply by the size of the items. You reach way beyond the bounds of the buffer. Either write it simply as score + i, or if you insist on doing the multiplication yourself, be sure to cast to a character pointer type first: Oh, and don't cast the result of malloc. C doesn't require it, and it's somewhat unidiomatic. pointer arithmetic uses the pointer type, so here you are moving to sizeof(int)isizeof(int) bytes after score, instead just use scores+i. 
c-1-57	X	extern struct array error: array type has incomplete element type I have 3 files: main.c, def.c, def.h. Both .c files include def.h. All the files are in the same directory. My compiler is gcc version 4.9.2. In def.h: In def.c: And in main.c: When I build def.c as an object file and then build with main.c like: And I got an error message: array type has incomplete element type If I use typedef to define struct _info as INFO like: And replace struct _info with INFO in .c files. Compile ok then. But why and what does typedef do? 
c-1-58	X	Hardware interrupt with FreeRTOS binary semaphore I'm bassically trying to get a LED to light up after I push a button. Bellow is the snippet of the code that's supposed to handle this: The way I'm envisioning this is that task_ctrl gives the semaphore on button press. Task_player1 is blocked until it takes the semaphore after which it should turn on the LED. The problem is it never seems to take the semaphore. I'm running the printf statements to show me how far the program reaches and it never gets into the part where the LED lights up. But when I run xSemaphoreGive without the button press in task_ctrl the semaphore is taken. The weird part is that Semaphore given statement gets printed out on button click which should mean that the semaphore is given as well but never gets taken. The tasks work on their own, I've even managed to give the semaphore without the button press if-statement like I stated above. I'm guessing it's something with the button press code, which also works on it's own outside the tasks. So what am I doing wrong? Am I not using the FreeRTOS correctly? Edit: Including the task creation code Edit 2: Probably something I should've mentioned is that I'm using FreeRTOS 7.3 since Atmel Studio doesn't have any newer versions. So no yield functions are available as far as I can tell. task_ctrl never blocks - which will prevent any task of equal or lower priority from ever running. So if task_player is equal or lower priority the teh tarsk will never be scheduled even when the semaphore is given. It appearing to work without the button polling is harder to explain, but you have not shown that code so I cannot comment. You should do two things: Ensure that task_ctrl has lower priority that at least task_player1 (and lower than any task if it does not block - the idle task will never run in this case). Ensure that task_ctrl blocks - even if that is just a polling delay, so that it does not eat up all available CPU cycles. One possible problem with task_ctrl is that it will give the semaphore continuously and repeatedly while the button is held. Some sore of state change detection and switch de-bounce rather then level polling might be preferable. An alternative solution to a polling task is to use a hardware interrupt for teh button and have either the polling task block on an event from the ISR, or have the ISR give the semaphore directly - in either case you will have to deal with debounce. 
c-1-59	X	C program - how does a task access data section of other task? I am doing in software quality assurance field. I am trying to create an attack on the data section of a task from another task in an open source operating system. But I do not know how to implement this attack when tasks running. Does anyone have the experiment for this work? --UPDATE-- I am working on AUTOSAR OS memory protection specification. It has a requirement is that: "The Operating System module may prevent write access to the private data sections of a Task/Category 2 ISR of a non-trusted application from all other Tasks/ISRs in the same OS-Application." The structure of an AUTOSAR OS Application //One OS has many applications The OS implementation is SDVOS: http://www.sdvos.org/tutorials/examples/hello.html 
c-1-60	X	structs: just need some clarification hey guys so i thought i had structs down till i started studying and ran into a bit of confusion. i have this code given to me as a practice problem and all it says is fix the erroes in the code now from what i see in main() it's missing struct T as the declaration. Now whats throwing me off is the data->name, that's the only pieces that's causing problems in the code when i test out the code, but i dnt understand why. in the struct name is an array of characters, so wouldnt the data->name give me the base address of the array? You should probably set name to a pointer. I find it more of an easier way. Try this: data->name is equivalent to (*data).name, i.e. it gets the member called name from the struct that data points to. Therefore, your variable data needs to be a pointer to a struct. 
c-1-61	X	How to sort a 2D character array in lexicographical order in C? I want to sort a 2D array in lexicographical order. Suppose the given 2D array is Now after arranging it in lexicographical order the array 2D array will be Please provide me a logic so that I can get solve this problem. Provided number of rows and columns of the array will be same. store the first 26 primes. have a number m = 1 now for each letter in the matrix, multiply m by primes[letter]. Now go through the matrix in order, and divide m by the 1st prime, until it is no longer divisible by 2. (keep adding 'a' ), then keep adding 'b' until m is no longer divisible by 3, etc. You can define two compare function, the one is for horizon-compare, the other one is for vertical-compare: and sort the row first, then sort each row in loop, like this: Check the complete code here: https://ideone.com/b7rvQh You may be making this problem way harder than it needs to be. You have 5 arrays of 5 characters each. Simply call qsort once for each array of 5 chars and sort them, e.g. Example Use/Output Edit -- Per-Comment Horizontal & Vertical Sort Let's start with a nasty mixed up array: Now let's add one more qsort to sort it all out: Example Use/Output Full Lexical Sort if Multiple Occurrences of Characters Possible As was pointed out in a comment, if instead of each array of 5 characters containing a unique occurrence of a character, the arrays could contain duplicate character (either within the individual array, or between the rows), then the check of the first character alone is insufficient for the vertical sort. Adding a second compare that will examine each character and return based on the first mismatch or returning zero if all characters are identical between the rows being compared, you can fully lexigraphically sort the array, regardless of content. The following adds a cmpnchr function to accomplish the same. Consider the input array: A full sort would require: Example Use/Output If there are any more additions, they will have to wait until the morning :) 
c-1-62	X	segfault when accessing function in struct I am trying to implement sets on top of red-black trees. My trees are defined with the following struct: Whenever I try to access the compare function I get a segfault. e.g in the comparisons in the if statements in this helper function: This is the code that I am using to test and am getting the segfault from. Note that I have in set.h This code fails on the second insert, since it calls tree->compare. Using GDB to do a stack trace I get the following: Furthermore, this actually runs completely fine in valgrind. This is the first time I have used functions in structs in c. I have tried to lookup this issue elsewhere and have made little progress debugging it. Why would I get a segfault when I try to access the compare function in the tree struct? EDIT: New set is a wrapper for the following function which creates a new tree. EDIT 2: I resolved my problem. The functions which I was passing the pointers of to new_set were defined within the main function. When I moved them outside the the main function it stopped segfaulting. You've created a struct, "compare" is a pointer to function. But it's pointing nowhere. It should be set in your "new_set" function, but you didn't show it. In your "new_set" function you should do something like this: 
c-1-63	X	Qsort results in loss of memory My program involves merging two arrays of individuals (called a population) defined as: It also involves sorting each population using these functions: The issue is that after calling sort_population the program loses track of each individual in the population. The function in particular that is being affected replaces the worst of one population with the best of another. This is the function: I know the calls to sort_population is causing the issue because the program performs correctly and results in less loss of memory if the calls are commented out. Specifically, the valgrind detects many more memory leaks and the program outputs an incorrect result when the calls are not commented out. What is causing this? The link to the github is: https://github.com/dyingpie1/pony_gp_c Could you try to execute after changing a first argument of sort_population to a single pointer. Like the following. 
c-1-64	X	What does the 'tm' in `struct tm` stand for? Just curious. I've tended to name variables of the type struct tm something like time_bits or similar, since it contains the broken-down calendar time bits. Most of the documentation I've seen refers to this type as 'calendar time', as opposed to 'clock time' or 'epoch seconds' for time_t. It almost certainly just stands for "time". The ISO standard describes it as a thing: ... which holds the components of a calendar time, called the broken-down time. If it were named struct time, a lot of people would confuse it with this function: Although in C structure tags don't interfere with variable/function names, having different names for them reduces confusion. 
c-1-65	X	Measurement with structure and searching for least, largest and average temperature I have to write a program for recording the measured temperatures, into which new measurements can be entered, or display statistics calculated from previous measurements. In the case of printing statistics, it is necessary to find and display the lowest and highest recorded temperature and calculate the average temperature. In case 2, I commented line where I get an error. Can anyone give me any advice to fix this problem? |71|error: 'dayInMonth' undeclared (first use in this function) |71|error: too few arguments to function 'least_in_array' Since it is Christmas Eve, lets help out fellow man... who obviously is badly in need. For code that is supposed to pass an array to least_in_array, largest_in_array and average_array -- you have no array! That somewhat puts you behind the eight-ball from the word "Go!". Your thought to use a stuct to capture and coordinate dayInMonth, month and temperature is 100% correct. (but note: C-style generally avoids camelCase variable names in favor of all lowercase). Also, defining struct Data1 within main() prevents your functions above that point from knowing what struct Data1 is, so you need to move your struct definition to the top of the file. (or provide a forward declaration, but we will save that for later) For now, let's just move your Data1 to the top (I used a typedef to alleviate having to prefix each use with stuct and renamed Data1 data: Note the defined constant NDAYS. Since you are going to need an array, and since a dynamically allocated and reallocated approach seem well beyond your needs here, let's just define a constant, a maximum, for the number of elements we will have in our array. Now, before we go further, let's think about our array. If we are going to use a struct to hold the associated date and temperature measurement, then we are going to need an array of... what?? An array of struct. And with our constant NDAYS, we will declare a maximum of 365 elements in our array. So how would this work? We have our stuct typedeffed to data, so if we want an array of data we need: Note: the older initializer format initializing each field was used as it is unclear whether you could be using a C89 compiler. C99 and later added named initializers , e.g. {{.day = 0}} and any uninitialized elements are implicitly initialized to zero. Now we have an array of data and can capture measurements. Of course you are responsible for keeping track of the indexes you fill. A simple counter, incremented each time a successful measurement in entered is all you need (ndx is used below) How do we make least_in_array, largest_in_array and average_array work with an array of data? Recall, we moved the definition of the struct to the beginning of the source file, so now each function knows what data is. We simply need to pass our array of data as a parameter, e.g. (note, each of the quantities of least_in_array, largest_in_array and average_array refer to the temperature values and therefore need to return type float.) The remainder of putting together largest_in_array and average_array follows the same pattern. The crux of your remaining problems relate to handling user input, and the particular pitfalls associated with taking user input with scanf. It can be done, but you must always validate the return, and test for user cancellation of input by testing for EOF (the result of the user pressing Ctrl+d (or Ctrl+z on windoze)). You must validate that the number of expected conversions did in fact take place, or you must handle the error, and most importantly, you must account for any characters left in the input buffer (e.g. stdin), otherwise, if an invalid entry is made and you don't remove it from stdin, you will loop forever... (with scanf if a matching or input failure occurs -- no additional character are processed -- leaving them where? (oh, in stdin) You can make this fairly easy on yourself if you declare a few helper functions to empty stdin, and make the normal process of getting an integer or float from the user relatively safe. For example, to empty stdin, you simply read all remaining characters until a '\n' or EOF is encountered, e.g. To ask the user for an int or float, you simply validate the return, check the number of successful conversion (what scanf returns), check whether EOF was generated by the user, and finally handle the error if invalid input was given and empty_stdin as required. You generally want to loop until the user either provides valid input, or cancels. (an invalid input does you no good). For example, getting integer input can be handled as follows. (note: I put it in a function to keep from repeating this block of code for each input you take in the main body of your code... (taking input for a float works the same way). Lastly, you generally want to avoid using float in most cases, using double instead, just due to loss of precision and limitations for representing floating-point numbers with a 23-bit mantissa. However, here we are taking temperature, and float will suffice for this code. Putting it altogether, you could do something like the following. Note, I have left your functions before main() as you had them, and added the helper function definitions after main(), but provided declarations before main() so they are visible to main() : Note: how the array bounds are limited to 365 or less in your take measurement part of the code, and how a check is made that there is at least one measurement present before any statistics can be provided. You always need to validate each step of the process. Look for corner-cases, think about what could go wrong with input (what if a cat stepped on the keyboard), and then go provide validations and checks to handle each case. The validations above are just the bare minimum, there are always more you can add to more fully report and handle each error condition. Example Use/Output Look things over and let me know if you have any further questions (although given the evening, I won't be here much longer...) 
c-1-66	X	Incompatible pointer type during function call I have reduced my code to the following: I want to be able to change the main variable in the function. I thought that using & means sending the address rather than copying the data. But I get the following error when I compile: Can someone show me what I'm doing wrong, because I don't have a clue. Ty. Remove the &. data has type char[20], so a pointer to it has type char (*)[20]. An array will decay to a pointer type when it needs to do so, so simply passing data will pass it as char*. 
c-1-67	X	c tcp socket socks5 over tor - status: 0x06 TTL expired? I'm writting basic tcp socket over tor. 1. create & send the greeting message was ok 2. I'm stuck at recv() message back from client's connection request. The message keeps a little long to be sent back, and status code field is: 0x06 - TTL expired. I'm using tor in Windows, if I set the browser to proxy through tor (socks5), it works well. The output is: 
c-1-68	X	Does computer always follow 2's complement method to represent negative number? Please view the following code and help me to understand it Output is: So this says that 1=(00000001) when undergoes ~ produces (11111110) which is 2's complement of number 2 and hence -2 is the answer. So 100 will always be assumed to be -4 but not 4 ? You can only define two's complement numbers when you already have decided exactly how many bits hold the number. Do you have a three-bit signed integer type somewhere where you are storing the bits 100? If so, then 100 would be interpreted as -4. If you store it in a larger integer type, we would normally assume the other bits to the left of the 1 are all 0s (since otherwise you should have shown what they were) and the value would be positive 4. By the way, it would be very unusual nowadays to find a compiler that has a C or C++ int type that is only 8 bits long like the one in the question. (OK, "unusual" is an understatement--as a comment notes, the standard doesn't allow this, and as far as I know it has never been considered legitimate to have a plain int type as shown in the question that could be stored in fewer than 16 bits. You can declare a signed integer bit-field of just 3 bits within a struct, but the syntax for that is quite different from what the question shows.) So it is not really correct even to interpret int b=~1; as storing the bit pattern 11111110; the actual bit pattern would have at least 16 bits, and most of us in recent years have only seen it compiled as 32 bits. Does computer always follow 2's complement method to represent negative number? No. Some computers used 1's compliment (where ~1 == -0), some used "sign and magnitude" (where ~1 == -127), some use "bias" (where there signed value is "unsigned value - bias" and where ~1 == 127). For integers these are all relatively rare now. Something that isn't rare is standard (IEEE-754) floating point formats; which are a glorious combination of "sign and magnitude" (used for the significand) and "bias" (used for the exponent). 
c-1-69	X	Assigning a value to struct element changes the value of the variable before I have the following code: At the first printf the value of head.riff is "RIFF", but at the second printf the value of head.riff is something like "RIFFÃ„Â¡". Does anybody have an idea, why this is so? In my opinion, the assignment of head.overall_size shouldn't change anything to head.riff. Edit: Here is the struct: 
c-1-70	X	spiral pattern gets messy when input is above 12 IÂ´m trying to make a spiral pattern (just starting with C programming). I try to do it manually for the start from n=1 to n=15 but when the n=12 or more it starts to get messy. Maybe someone could give me a hint. Yes I know this is not a website for beginners/students/noobs but I couldnÂ´t find help elsewhere. For now I have this: Those are the examples of the outputs: For n=7 For n=9 But now when n=13 It becomes a mess. 
c-1-71	X	Can C code act like a keyboard? Would I be able to run a code that, synthetically, presses keys on my keyboard? (I am running Windows) Uses of this could be: Macros Making someones computer 'possessed' A virtual 'ease of access' keyboard 
c-1-72	X	Returning the program to main menu I want to create a program that has an option for the user to build the song (by having the user enter a duration and frequency into an array and then select option b, to play that frequency and duration). The problem I'm having is to make the program go back to the main menu correctly and have the user select an option. You have to put the code that you need to use again inside a loop. A while loop with a check variable (you already have that) is all you need. example: 
c-1-73	X	C Primer Plus 6th ed chapter 6 programming exercise 4 With the following code I was able to change the first letter of every row and have all the letters printed but not as required. Any help will be appreciated. Thank you in advance for your help. We beginners should help each other. Here you are. The program output might look like 
c-1-74	X	C90 - initializing arrays in global and in function scope I want to know the properties of initializing array once in global scope and once in the function scope. Let say: What will be the values in this array? What with this option: Is there any difference in the last case with this: Will the result change in different compiler? Thank In a well-mannered system, the file-scope array will be initialized to all zeros. The in-function array is less predictable; chances are high that it'll just inherit whatever scrud was on the stack at the time. In general, it's probably safe to assume that any modern tool chain compiling for a desktop system will be "well-mannered", but if it's for an embedded system you may want to check for yourself whether the bss section gets initialized to all zeros. That initialization is part of the processor (or sometimes board) specific support package, and you can't always trust that it's been done. 
c-1-75	X	Get number of bits in size_t at compile time I am trying to get the number of value bits in size_t to be used in the preprocessor directives. Perhaps there is a macro for this? In essence, I would like to achieve something akin to this code where SIZE_T_BITS is a hypothetical macro for the sake of demonstration. This will work for GCC, CLang and MSVC: size_t is some unsigned type. Compare the max value to common candidates. The max value is certainly some 2SIZE_T_BITS - 1. The smallest SIZE_MAX may be is 0xFFFF. Although size_t may have paddings bits (this is rare), the about method reflects the number of value bits in size_t. This could differ from the total bits. Note: SIZE_MAX is defined such that Each instance of these macros shall be replaced by a constant expression suitable for use in #if preprocessing directives, and this expression shall have the same type as would an expression that is an object of the corresponding type converted according to the integer promotions. C11 Â§7.20.3 2 
c-1-76	X	Solutions for implementing a concurrent TCP server? I am looking for solutions of implementing a concurrent TCP server that would host rooms for playing the Pheasant game. To clarify what would the concurrency mean in this case: the game in a room can start when there are 4 players connected to that room but the server has to create the possibility of allowing more than one game to be played in the same time. I have a few things which I don't know how to implement/design (the implementation has to be done in C language): How can I "simulate" a game room ? I was thinking about creating a child process in the server code for each of the rooms. So I am starting the implementation with one room and in the moment when the 5th player requests a connection, since up to this moment there is just one room and it's full (4 players), I would create another child process (another room for another 4 players) and so on. Could this approach be good for the job up to this point? Other solutions ? The second problem: How can I "force" the players to wait for their turn, so if there are 4 players, each one of them should say one word in their turn, something like 1,2,3,4,1,2,3,4,1,2,3,4 ... until 3 of them will be disconnected because of not valid words sent to the server? I was thinking of storing the descriptor returned by the accept() for each of the players in the room in an integer array and while there is more than one player in the room, each one of them should send one word to the server in the order in which they were connected to the server, the order will be checked by the server using the int array. In case one of the players would send a word to the server before his turn he would get a message from the server in which he is warned that he has to wait for his turn. (each room should have a distinct int array[4]) Doable ? Other solutions ? For the moment I am familiar just with using the fork primitive in order to obtain the concurrency (I didn't have time to learn threads or others, and I don't have for the moment, so I would appreciate solutions/ideas that would work using child processes, if it's possible). Good links related to the topic (concurrent TCP server) would be much appreciated ! I'm a beginner in C, network programming. 
c-1-77	X	Call if_get from JNI I'm developing a c enviroment to do stuffs with net interfaces. Recently i decided to write a Java porting using JNI interface. So i created classes with native methods and i generate the c header's files from which i wrote the implementation. I linked the shared library of native methods with the static library of my enviroment compiled with the -fPIC flag to produce a position indipendent library. Everything works instead that methods ( of the C library, the static one) that calls function that requires superuser priviliges. I executed that command to run my program My code fails only when functions like ioctl or if_get are called. So the question is how can reach the permission to run this kind of functions from java? Sorry for my English thanks to all 
c-1-78	X	C ISO 8601 time with microseconds windows I am trying to format my time stamp in ISO 8601 with microseconds in C. Like this 2014-11-06T10:34:47.123456Z, but I cant seem to get microseconds. Any help would be greatful. 
c-1-79	X	Assign an integer value to a string in C I have a small problem assigning a string variable in C. Let's say we have char string[100] and I want to assign a string with an integer to this variable like in here. What I tried was.. But I get an error Unresolved externals symbol message. Is there any other way that I could do it? What you've got to understand is that a construct like "The tile in %d,%d is occupied: ", row, col is not some "magic" construct of the C language that always applies with strings. The reason for why you might think that, is that most beginners guides and books don't care to mention, what a line like printf("You name is %s", name) actually does. It's not magic done by the C language, it's the how printf (and whole print, scanf family of function) were design in the first place. In C a string "Your name is Mike" and "Your name is %" are just two strings (a series of characters terminated with \0), the second one is no more special than the first one from the C perspective. The C language has also a special feature (some call it ellipses) that allow you to pass an undefined amount of arguments. Take a look at this: With this declaration, there is only one way to call foo: with too arguments. If however foo would be declared as then you can call foo so: Using va_list (Variable Argument Lists) foo can access the rest of the parameters passed to it that come after the last named arguments, in this case b. printf is a function that allows this flexibility, you can call printf with many arguments (always at least one). As you can see, all these function are declared that way. The basic way that printf work, is that it reads the first argument and parses it. When it encounters a substring like %d it knows that the user has passed an integer. It retrieves the integer using va_list and prints the value of the integer instead of %d. Then in continues until it reaches the end of the format-String, always replacing the %s with values retrieved using va_list. strcpy is declared as char *strcpy(char *dest, const char *src);, it doesn't use the "ellipse trick" as printf does, so your line is wrong and the compiler complains about it. There are other function that use similar strategies as printf, but the vast majority of function accepting strings do not implement this "trick". For those cases you can use sprintf. 
c-1-80	X	Invalid ELF Header error while using dlfcn.h library functions I am trying to create a little library with 3 functions in c. Here is my codes: mm_alloc.h: Inside of the three function above is empty for now mm_test.c My OS is Ubuntu. Here is how I compile the code: When I run the tmp, it gives "Invalid ELF Header". How can I solve this? dlopen() can only load shared library files (.so files), not C header files. You will need to implement these functions and compile them into a shared library to load. 
c-1-81	X	Memory lost while using a set data structure I have a library that includes "Set.h" and "Set.c" files that represents Set data structure. I want to build a ADT with the next struct: It represent a person with a telephone number and a pointer to a set of all of his friend's telephone numbers (The telephones should be of type "int"). In order to create struct like this I need to create 3 functions So I did: I need to create those 3 function because In order to create a Set I need to use: But when I ran a simple test of adding/removing a friends with a telephone number I have trouble with valgrind that says I have memory leaks. I think that the three function that I wrote above are not correct and I didn't use pointers in the right way. 
c-1-82	X	C Signal handler doesn't uninstall when installed from another function I'm experiencing what I believe to be some bizarre behavior with the below code snippet. When I call addHandler() to install a signal handler, the signal handler gets called every single time I press CTRL+C (send SIGINT) in the terminal, however if I replace the call to addHandler() with the contents of the addHandler() function (currently commented out), the handler is only called a single time (from what I know, this is the expected behavior), and subsequent SIGINT's will actually terminate the process since there is no installed user handler. Am I missing something basic here? Why is it that installing the handler via another function, seemingly permanently installs it? I'm sure it is more nuanced than that...but here's the code: Thanks! You don't clear the memory of struct sigaction actionStruct when you declare it. You set a single value. All the rest of the struct will contain values that were on the stack from a previous function. This is probably why you have different behavior from different functions. You need to declare it with struct sigaction actionStruct = {}; or use memset Am I missing something basic here? Yes. You did not properly initialize the struct sigaction actionStruct. Essentially, you provided random .sa_flags, which causes the issues OP observed. The recommended way to initialize it is to use memset() and sigemptyset(): memset() clears the entire structure to zeroes, including any padding. sigemptyset() clears the set of signals blocked while the signal handler itself is run; i.e., it initializes it to the empty set). &nbsp; You did not set the actionStruct.sa_flags member. Zero is a perfectly valid value for it, but setting it explicitly is important for us humans, because then we can read the intent. For example, if you only want the handler to run once, you can set actionStruct.sa_flags = SA_RESETHAND;. After the first signal is delivered, the SA_RESETHAND flag causes the handler to be reset to the default. For SIGINT, this is Term (terminate the process), as described in the man 7 signal man page.&nbsp; printf() is not an async-signal safe function (as listed in the man 7 signal-safety man page in newer systems, in the man 7 signal man page in older systems). Depending on the exact C library implementation (there are many POSIXy systems), it may work, it may garble output, or it may even crash the process. So, don't do that.&nbsp; In the hopes that you, dear reader, are really interested in writing robust, portable, POSIX signal handling C99 or later programs, let me show you an example. breakme.c: Compile and run it using e.g. Note that the four wr*() functions are async-signal safe functions that output a string (wrs()), the specified number of chars (wrn()), or a signed (long) integer (wri()) to the specified low-level descriptor; here, standard error (STDERR_FILENO). You should not mix these with <stdio.h> functions to the same. (Note that breakme.c uses fprintf(stderr, ..) only if (some of) the signal handlers cannot be installed, and immediately exits (with failure exit status). Sure, we could use three wrs() calls instead, first grabbing the error string into a temporary variable like const char *msg = strerror(errno); since the wr*() functions may modify errno, but I don't think going that far is really sensible. I believe it is enough for the program to try to report the exact problem, then exit as soon as possible. However, I would not use fprintf(stderr,) during the normal operation of the program, to avoid messing up the standard error output.) Pay particular attention to the install_done() function. It returns 0 if it successfully installs the handle_done function as the specified signal handler, and errno otherwise. I recommend you experiment with the program. For example, change the done = line to done++;, and the while (!done) to while (done < 3) for example, so that only the third signal caught will cause the program to exit. Finally, do note that standard POSIX signals like INT are not technically "reliable": their delivery is not guaranteed. In particular, the signals are not queued, so if you managed to send two INT signals before the first one is delivered, only one would be delivered. The OS/kernel does do its best to ensure the signals are delivered, but a developer should know the technical limitations. Note that POSIX realtime signals -- SIGRTMIN+0 to SIGRTMAX-0, inclusive; there being at least 8, or SIGRTMAX-SIGRTMIN+1 >= 8 -- are queued, although they are not perfectly reliable either. They too support passing one int or void pointer worth of payload, via the sigqueue() function. You need to use a signal handler with SA_SIGINFO to catch the payload, or sigwaitinfo()/sigtimedwait() to catch blocked signals in a loop. I believe it would be a fun, while very easy, exercise to modify the above program to detect and show the payload, and a second program (run separately by the user at the same time) to send a signal and an integer as a payload to the specified process; I recommend writing that program as taking exactly three parameters (process ID, signal number, and the payload integer). 
c-1-83	X	Return parameter values sent through pthread_create while calling another function Is it possible to pass parameters to the function called by pthread_create and also get some values returned from this function? For example: I am calling function_call but I want to pass multiple parameters to it except only one (numb1), and then I need the new updated values (updates done inside function_call) to be returned to main (where function_call is called). 
c-1-84	X	How to determine if screen is enabled on android in C? I am developing a daemon in C for Android that needs to get display state of a device to work correctly. I tried getting it through shell command with PIPE functionality: dumpsys locationpolicy is the only service query that works for my device and provides a screen state correctly (all other variants do not contain any information about screen), but on each attempt after the first 'state' contains corrupted data (first may contain "true" or "false", others look so: "@B"), though this command works perfectly when I try it from adb shell or directly from terminal emulator. Maybe it is because my program uses pthread multithreading, but it is important and I can't get rid of it. Is there a way to get screen state directly by Linux-way, or is it impossible? P.S.: Even when I try to call the query to Android and redirect it to file (through system()) to then read it directly from code, it then even does not create any file i write in my shell code... Example: 
c-1-85	X	Segmentation fault when printf %s is called There is a tiny part of my code in C. When I print buffer with %d format, it's working, but when I try to consider the buffer as a string, I get segmentation fault. SIGSEGV occurs even when I use strcmp or other functions like that. Here, buffer is the address of the start of your buffer. So, when you call the above function, you as passing in the address of your address. Thus, you can see why it segfaults, because the address passed in is not the actual address of the buffer. Replace that line with 
c-1-86	X	How should I handle file descriptor 'dependencies' when using epoll? I'm writing an HTTP/2 server in C, using epoll. Let's say a client asks for /index.html - I need to open a file descriptor pointing to that file and then send it back to the socket whenever I read a chunk of it. So I'd have an event loop that looks something like this: However this poses a problem. If the socket then closes (for whatever reason), the file descriptor for index.html will also get closed too. But it's possible that the index.html FD will have already been queued for reading (i.e, it's already in events, since you closed it between calls to epoll_wait), and as such when the for loop gets to processing the FD I'll now be accessing a 'dangling' FD. If this was a single threaded program I'd try and hack around the issue by looking at file descriptor numbers, but unfortunately I'm running the same epoll loop on multiple threads which means that I can't predict what FD numbers will be in use at a given moment. It's totally possible that by the time the invalid read on the file comes around, another thread will have claimed that FD, so the call to read won't explicitly fail but I'll probably get a use after free anyway for trying to send it on a socket that doesn't exist anymore. What's the best way of dealing with this issue? Maybe I should take an entirely different approach and not have file I/O on the same epoll loop at all. 
c-1-87	X	Two format specifiers but only one argument Ok it is understood that in place of %d ,value of j will be printed but why %c is replaced by Ã¶ ,i am unable to understand the output of this program , explain the printf statement. The short answer for this is that this is undefined behavior, the character that gets printed could be anything and the program may even crash. The longer answer is that old compilers did not check printf strings against the arguments passed, and so by default compilers to not treat this as an error. If you enable the correct warnings (-Wformat) it will complain about this at compile time, and with -Werror the warning will be escalated to an error. Because this is not checked at compile time, as many arguments as are needed are fetched from where they should be on the call stack. This means that first argument after the last specified argument probably has to do with the return address for the stack frame or something, but after that you start to push into unallocated memory. Either way, the behavior is undefined. If you're interested in more details, this stack overflow answer explains it well. You put doublequotes in a wrong place: you quoted the entire expression, rather than making your format string a conditional: Your j >= 65 ? ... : ... expression is part of the string literal. C compiler does not "see" it as anything related to j. Hence the format string contains two format specifiers, with a single printed item; that's undefined behavior. UB manifests itself in different ways; on your particular system a junk character 'Ã¶' gets printed. This, however, is not a guaranteed behavior - on other systems you may get a different output, or a crash. See this Q&A for an explanation of UB. This is enough I suppose for explaining whatever you have shown. And the behavior you see can be anything given that it is undefined. From standard The fprintf function writes output to the stream pointed to by stream, under control of the string pointed to by format that specifies how subsequent arguments are converted for output. If there are insufficient arguments for the format, the behavior is undefined. Emphasis mine. 
c-1-88	X	C Primer Plus chapter 6 programming exercise 1 I worked out this problem using what I learned from chapter 6 (current program). My original idea was to print and scan the values into the array with a loop and them print the values of the array, but I have not been able to make it work (commented section under main function). The program just prints newlines (the program prints the letter but I have to press enter to get the next letter). The commented section in the program within the main function is the idea of what I want to do. I included the program below and I thank you in advance for your help. The problem here is that When you enter the character and then you press enter, you input two characters. One is the alphabetic character you enter and the other is the \n. That's why you get what you see. Solution is to consume the white space charcaters ..which is done by putting the ' ' in the scanf. Why it works? Quoting the standard- 7.21.6.2 A directive composed of white-space character(s) is executed by reading input up to the first non-white-space character (which remains unread), or until no more characters can be read. The directive never fails. Example code: 
c-1-89	X	ncurses displays characters horizontally instead of vertically I am writing a simple game in console using ncurses on linux and I have a very odd problem and I cannot find out what's wrong in my code the problem is that when I run my program my screen should look like this which it does but after my draw() function runs more than 10 times i get something like this here is my code: and I'm using arch [n]curses keeps an internal map of what the screen is supposed to look like. It uses that map to do efficient updates when you call refresh(). This only works if the library is exclusively in control of the output to the terminal. When you do terminal output through some other method, like system("clear"), the library no longer has an accurate map of the state of the terminal. The next update sends the escape sequences and printable strings necessary to go from state A to state B, but the terminal is actually in state C, and you end up with something crazy. There is a curses erase() function which clears the screen, which you should use instead. It's equivalent to using a bunch of addch calls to write blanks in every position. There's also a clear() function, which does an erase() and a clearok(TRUE), which tells the library to throw away its internal map and redraw the whole screen. This can be used to recover from the situation when something bad has happened, corrupting the screen. So, ironically, you could have gotten away with system("clear") if you'd done a clear() afterward. 
c-1-90	X	Does the C compiler allocate memory for a variable? I was wondering that in which stage, memory gets allocated to the variable. Is it in the compilation stage or is it at the execution time? Yes, and yes, both. For a global variable (declared at file scope), the compiler reserves memory in the executable image. So this is compile-time. For an automatic variable (declared in a function), the compiler adds instructions to allocate the variable on the stack. So this is run-time Notes: The compiler has one (one set of) instructions to allocate all local variables of a function in one time. Generally, there is not overhead per variable (there can be exceptions I don't discuss now). These instructions are executed every time the function is called. The compiler does not allocate storage for your strings. This is an error beginners often make. Consider: There's a third kind of memory which is allocated dynamically by using malloc() and friends. This memory is taken from the so called heap. While automatic variables (you have in functions) is taken from the so called stack. Then, if you're having a variable with an initializer (e.g. int i = 5;) that never changes value, a compiler may figure that out and not allocate memory at all. Instead it would just use 5 wherever you use that variable in your code. It depends on the kind of variable/object. Globally and statically allocated variables are known at compile time and their offsets in the data segment are baked into the program. So in a way, they got allocated at compile time. Variables local to function scope are allocated on the stack. You could say that the compiler knew about them and the kind of storage their needed but obviously they got allocated (in the sense of came into existence) at run time, during a function call. Another interesting object is the heap allocated object, which can be created with malloc/calloc in C and new or related mechanisms in C++. They are allocated at run time in the heap section. 
c-1-91	X	C project help is needed I am new to coding and I am learning through a book called "The C Programming Language - 2nd Edition - Ritchie Kernighan" and there is this code: After typing the code in CodeBlocks I run it and when I type in a word and press enter nothing happens. The word is not being counted and printed. I am new to all of this but if anyone has an idea feel free to share it. Thank you very much ! The issue is that you never read the EOF (End Of File); this is the end of the input data coming from the console (where you type). Everything you type is either a letter, digit, special character, or newline, but never EOF. To generate an EOF you need to enter a special control-key combination. On Windows this is Ctrl+Z and on UNIX/Linux/macOS this is Ctrl+D. The book you're reading is great and written by the two creators of C. It one of my first programming books and I still have it; all worn-out. All the best and Merry Christmas! Small piece of advice: Always put your code blocks inside { } to avoid mistakes and create more visual clarity, use spaces consistently, and add empty lines. Your code would look like this: Why should it stop? Your expectations are wrong. getchar() will go on getting characters until it encounters EOF. How to pass that to getchar? For Windows Ctrl+Z will do the trick. And then press Enter. For Unix or Linux system it would be Ctrl+D Responsive output before entering EOF To get a more responsive output you can add this line, that will tell you the cumulative sum of \n found. Further Explanation of the added code The code segment provided above will provide you some output when you press enter. But the thing is until you enter EOF it will keep on waiting for more and more input. That's what also happened in the first case. So you have to press Ctrl+Z and press Enter. That will break the loop. And you will see the final output - the number of line count. 
c-1-92	X	undefined reference to `sqlite3_open' threadv1.c:(.text+0x6c): undefined reference to `sqlite3_errmsg' collect2: error: ld returned 1 exit status i am trying to develop a server application that get English word from client side than translate it to Turkish word. Server should use litesql during translation process. During this process, database should have at least following key value pairs: Key: Value one: bir two: iki three: uc four: dort five: bes six: alti seven: yedi eight: sekiz nine: dokuz ten: on i get this error code below whenever i try to compile this code: Code 
c-1-93	X	Notification for image load in os x kernel is there any way to receive a notification that a new image was loaded into a desired task? i know that in user mode I can use _dyld_register_func_for_add_image but is there any way to do that from kernel? I know that it seems pretty impossible since dyld is responsible for all the loading process and it's all in the user space. but maybe someone ever done that before? 
c-1-94	X	Why tentative definition concept in C not valid for local variables I went through the tentative definition from one of the stackoverflow articles, so I ran the following program, it went fine according to the definition: I also tried this concept for local variables through following C program: This gave error: redeclaration of symbol a. Please help me in understanding this. 
c-1-95	X	Basic C Windows TCP Socket Over TOR, recv() hangs? I set up tor on my local Windows machine, it's listening, and I could connect through it via my firefox browser. I try making a simple socket program in c (following socks5 rfc: https://en.wikipedia.org/wiki/SOCKS#SOCKS5), but the recv() hangs for a while, then I received nothing (number of bytes: 0, in my printf statement). The output of the program is as follow: The problem is with the send function, do not use strlen(). 
c-1-96	X	How to debug a C program which execute bash shell script with GDB? I build OpenSSL-1.0.2n with -g 386 shared --prefix=/usr option (to work with basic assembly version) to generate shared library libcrypto.so.1.0.0. Inside crypto/aes folder, aes-x86_64.s is generated. To perform AES encryption and decryption I used following commands in linux terminal. Using GDB, I am able to debug the execution of above command as follow From the above output of gdb debugging, it is verified that AES_cbc_encrypt function of aes-x86_64.s file is called. I need to verify, if I use a C program where system call is used to execute bash script to perform AES decryption, will the AES_cbc_encrypt function of aes-x86_64.s file still called ? Will I be wrong, if I say when I execute this C program, it indirectly call openssl library (libcrypto.so) and perform decryption. So it must call AES_cbc_encrypt function of aes-x86_64.o file. However, when I use GDB to debug this program it is not showing any call to AES_cbc_encrypt function of aes-x86_64.o file. It simply make some calls to /sysdeps/posix/system.c, /sysdeps/unix/sysv/linux/x86_64/sigaction.c etc. So, Here is my questions how to debug the above C code using gdb so that it will stop at breakpoint AES_cbc_encrypt of installed OpenSSL? Should I use other than system call in C program to run those bash command which will ensure indirectly calling AES_cbc_encrypt function of aes-x86_64.s file? Any help or link to solve this will be greatly appreciable. I am using Ubuntu 16.04 , gcc-7.0 with debugging symbol on in OpenSSL version-1.0.2n. However, when I use GDB to debug this program it is not showing any call to AES_cbc_encrypt function of aes-x86_64.o file. It simply make some calls to /sysdeps/posix/system.c By default GDB will only debug one process (the test program) and that process isn't calling AES_cbc_encrypt -- rather it creates a new process -- $SHELL, which in turn creates another process -- /usr/bin/openssl, and only that grandchild process calls AES_cbc_encrypt. Since you are debugging the grandparent of openssl, it is entirely expected that GDB does not observe AES_cbc_encrypt being linked into the process you are debugging, and that the breakpoint on AES_cbc_encrypt is never established, nor ever "fires". how to debug the above C code using gdb so that it will stop at breakpoint AES_cbc_encrypt of installed OpenSSL? There are a few ways: One way is to modify test such that it invokes gdb instead of invoking openssl: sprintf(cmd, "gdb --args /usr/bin/openssl enc -d -aes-128-cbc -in cipher.bin -out decrypt_cip2.txt"); system(cmd); If you can't or don't want to modify the test program, you could rename /usr/bin/openssh to /usr/bin/openssl.exe and place a shell wrapper into /usr/bin/openssl: #!/bin/sh exec gdb --args /usr/bin/openssl.exe "$@" If you don't want to do either of above, you could use GDB multiple inferior support. Documentation here and here. Update: I am little bit wondering how it will execute ..exe file UNIX systems don't care about file extensions (they look inside the file, i.e. at the file contents, to figure out how to run it). Thus you can rename an executable file to anything you want: openssl.foo, openssl.bar, openssl.exe, openssl.orig, etc. and it will still run correctly. 
c-1-97	X	C SSL Proxy "Sniffer"/ Decryptor I would like to re-program in C the program Burp (https://portswigger.net/burp), at least the part with the proxy. Burp starts on the computer a proxy over which then the clients in the network "log in" or "access" can. A CA certificate from Burp will be installed on the clients. From now on Burp can also read HTTPS traffic. I would like to re-program this principle in C. I do not know which libraries to use for - the proxy - decrypting the data with de certificate key Many people already wrote a proxy in C (for example, nginx). You can often look through their C code and discover what they did and which libraries they used. As for the network layer, I am biased since I'm the author of facil.io, which I love... But a quick search will offer libev, libuv and libevent as very common choices that support more platforms (such as Windows). 
c-1-98	X	this circular queue never gives me the queue is full, why? the program never gives me queue is full, why? whenever it compiles it keeps adding items to the queue even if it's full it gets overridden. despite being everything logic to me but whenever i compile never gives queue is full when reaching to tail=4 and head =0 which is 1 of the two conditions of the isfull() functions so why does the queue reset itself instead of giving me that it is full!!! You have two issues in your queue_is_full function. The following is the right version. Issues are the (tail + 1) % MAX_QUEUE_SIZE == head and head == 0 ( you gave only one =) 
c-1-99	X	C linker not behaving as expected I have two C files 9.c ,10.c. 9.c 10.c I did gcc 9.c 10.c but it gives following error: 10.c:3: error: 'b' undeclared (first use in this function) I was expecting that linker would resolve the definition of b, but why its not resolving. The line extern int b;, which you have at the end of 9.c, should be at the beginning of 10.c. This tells the compiler that the declaration of b is in another module. See How to correctly use the extern keyword in C. Updated In reply to your comment, and also to the comments above: When the others say this error is from the compiler, not the linker, they are referring specifically to the "compile" phase of the build process. In this phase, each source file is processed independently. So the fact that you have declared b in 9.c doesn't help the compiler recognize it in 10.c. If you want to delay resolution of this identifier to the linking phase, you need an extern declaration of the variable in 10.c because that's where the declaration is missing. Having the extern declaration in 9.c is pointless, since the actual declaration occurs earlier in the same file. I suspect you are thinking of extern as if it means "export", i.e. a command to tell the compiler to remember that b is declared in 9.c so that it can resolve references to it in other files. That's not what it means. It is a command to tell the compiler that this variable is defined externally to the current source file; so you include it in each source file where a variable declared elsewhere is referenced. (Or more typically, it is used in a header file that is included in such source files, such as stdio.h.) 
c-1-100	X	TTF_OpenFont() does't work i have a function that work with sdl and i try to open font and i cant my funtion: the error reported from SDL_GetError : i try to copy the fie FreeSans.ttf from my system folder of font to my project Dir and doesn't work and i try to use FreeSans.ttf also and many other fonts. and i try to download some fonts from net. and the owner is me as a user not root. 
c-2-1	X	How many elements in string array? I want to find how many names in names array. I know sizeof(names)/sizeof(names[0]) gives the right answer. But the problem is I can't just declare char *names[];. Because compiler gives me an error like this "Storage of names is unknown". To avoid this error, I must declare like this char *names[] = {"somename", "somename2"};. But the thing is I cannot assign the strings right after deceleration. I assign strings after some conditions and my problem is how many strings i have after that conditions. My example. An array size is fixed once the array is created. It cannot change. If fp can be read twice, read the file once for the word count. Now code knows the word[] array size needed and the maximum length. When done with words[], be sure to free the allocated memory. Better code would also check the return value of ftell(), fseek(), malloc() for errors and limit fscanf(fp, "%s", word). 
c-2-2	X	WebAssembly: (f32.const nan:0x200000) means 0x7fa00000 or 0x7fe00000 In C, strtof("nan(0x200000)", nullptr) represented as 0x7fe00000. But in WebAssembly spec interpreter tests: So, in WebAssembly nan(0x200000) (or nan:0x200000) should be represented as 0x7fa00000, or it's an error? Why in C it is implemented differently? Same question for f64.const. In C, strtof("nan(0x200000)", nullptr) represented as 0x7fe00000 This is not necessarily so. The behavior of the extra information for NaNs in C is implementation-defined. The difference between the values 0x7fa00000 and 0x7fe00000 is that the former is a signaling NaN, while the latter is a quiet NaN. It looks like your C implementation chose to represent NaNs as quiet NaNs, so the most-significant bit of the significand is set, while the given payload is used for the remaining bits. WebAssembly lets you specify all significand bits including the most-significant one. You can create an "arithmetic NaN" (which has the most-significant bit set like a quiet NaN) by using a constant value of at least canonN, which is 0x400000 for 32-bit floating point. So you can create a representation of 0x7fe00000 by specifying a payload of 0x600000. 
c-2-3	X	How to make an array containing function pointers? I have been under the requirement where I need to have an array of function pointers. I tried multiple approaches but didn't work. It gives the error: called object is not a function or function pointer 
c-2-4	X	How Golly HashTable & GC works I cannot really understand the GC in golly hash-life. it uses simple bucket hash but how it decides to store node and garbage collected from hash table. the comment in the script some what confusion to me. Can any one explain its working logic. Golly Hash-life Program 
c-2-5	X	Read from file and store in 2-D dynamically allocated array I implemented a function which aim is to read a simulation matrix from a file and create a new matrix, which elements are the same of the one read from the matrix in the file. My code doesn't seem to work because, once the new matrix itself is written on a file, the file is corrupted! Can anyone help me understand why? This is my code: The following is the code of the function which aim is saving the matrix to file: Note: the following code assumes that none of the characters in the matrix are '\n' nor '\0' Note: the use of appropriate horizontal and vertical spacing, consistent indenting, and separation of code blocks for ease of readability and understanding. The following proposed code implements writing the matrix to the file. the following proposed code implements reading the file into the matrix 
c-2-6	X	Reading a file from command line, name of the file as an argument i should open and read this file from passing the name of it as an argument of the command line when i run the program, but it keep going through the same error which is the open failure error i set in my program.The file is the correct folder and i also printed the arguments too see the one containing the name of the program wasn't well stored but it was, it's just the fopen function that fails.. Can anybody help me? Here's the code: here i leave the screenshots command line screenshot how i place the txt file its position the program working properly if not run from the cmd line Here's your problem: Since you passed just the filename to the program, it looks in its current working directory. And as we see from the ls command on the previous command line, there are only two files in the current working directory: main.c and prova. The file ex3.txt is not there. Based on the screenshots, it appears that the current working directory for these command lines was ~/documents/computer science xcode project/21:12/ex3/ex3, but the ex3.txt file is actually in the directory <something obscured by pulldown>/ex3-<something>/Build/Products/Debug. Apparently the IDE uses that Debug directory, not the ex3 directory, as its current working directory, since it manages to find ex3.txt there without requiring you to provide any directory path in front of the filename. 
c-2-7	X	Global symbols declaration I checked above snippet, it compiles fine in C but there are two definitions of variable a. It should give error as multiple definitions of symbol a Please help in triaging this. 
c-2-8	X	Why doesn't my function really initialize the array? I'm trying to write a function that initializes an array to zero: And I get this output: 0 0 0 0 0 0 268501009 0 4200656 The error is Then you pass the array with column field 20. For this reason the array is not initialized properly. That's where the problem lies. You should do this how can i do it if just know that the max size of the array it's can be 20x20, and the numOfrows, numOfcols are inputs from the user? Then you do this And the funcion would be 
c-2-9	X	How are u'123' or U'\n\t' or L'abc' integer constants in c? While making a compiler for C language, I was looking for its grammar. I stumbled upon ANSI C Grammar (Lex). There I found the following regular expression (RE): where CP and ES are as follows I understand that ES is RE for escape sequence. If I understand the regular expression correctly then, u'123' or U'\n\t' or L'abc' are valid I_CONSTANTs. I wrote the following small program to see what constant values they represent. This gave the following output. 51 9 99 I deciphered that they represent the ASCII value of the right-most character inside single quotes. However, what I fail to understand is the use and importance of this kind of integer constant. These are multicharacter literals, and their value is implementation-defined. From C11 6.4.4.4 p10-11: The value of an integer character constant containing more than one character (e.g., 'ab'), or containing a character or escape sequence that does not map to a single-byte execution character, is implementation-deï¬?ned. ... The value of a wide character constant containing more than one multibyte character or a single multibyte character that maps to multiple members of the extended execution character set, or containing a multibyte character or escape sequence not represented in the extended execution character set, is implementation-deï¬?ned. From your testing, it looks like GCC chooses to ignore all but the rightmost character on wide multicharacter literals. However, if you don't specify L, u, or U, GCC will combine the characters given as different bytes of the resulting integer, in an order depending on endianess. This behavior should not be relied on in portable code. 
c-2-10	X	Is it safe to access paddings in a structure or union? Consider this code. Existence of padding is guaranteed. With those static_asserts, it's sure there's padding in the middle or at the end. Is it safe to access them? As already mentioned in comments, this statement: s.c[1] = 0; does invoke undefined behaviour, because array object (designated by s.c) is accessed out of its bounds. In general, it is allowed to access an object by a pointer to character type (i.e. char, signed char, or unsigned char). The question is, does this violate a strict aliasing rule, when such a pointer is used to access a padding byte? In other words, is this code valid? The strict aliasing is defined by C11 6.5/7 Expressions: An object shall have its stored value accessed only by an lvalue expression that has one of the following types88: " (...) " a character type. 88) The intent of this list is to specify those circumstances in which an object may or may not be aliased The padding bytes count into the overall size of the struct object. That said, C11 6.2.6.1 General specifies that: Values stored in unsigned bit-fields and objects of type unsigned char shall be represented using a pure binary notation.49) Values stored in non-bit-field objects of any other object type consist of n Ã— CHAR_BIT bits, where n is the size of an object of that type, in bytes. A struct type is an aggregate type, which is a kind of object type. If I interpret this correctly, then padding bytes are part of the struct object's value, so they may accessed through a pointer to character type. 
c-2-11	X	QuickSort, crash with some arrays today I am getting crazy with an easy algorithm for quicksort and a partition with Hoare method. The code is: There is a cast to int because A is a float-pointer array (or a matrix allocated dynamically, btw) where the first column (index = 0) contains an int. This column is generated with values returned by (rand() % 60) and with a new seed initialized every time the code runs in order to not generate equal number every time. the matrix is allocated with this function and the function sort() is called with parameters sort(mat, 0, 9), the floatMatAlloc is called with mat = floatMatAlloc(10, 4). Using gdb I saw that with some matrix, j index usually became -1, and obviously it crashes, in fact if I put this while in partition() it works! and I don't know why with some matrix, the algorithm implemented by me works and with other matrix it doesn't! I tried with a classic int array (and not with a pseudo-matrix) and it works with classic while, that is the same while I found in other codes online 
c-2-12	X	How to access GPIO using virtual address in beaglebone black? Please help in understanding ,how to create a pte. Glowing a gpio-led from a virtual address.(beaglebone-black) ttbr0:- As Section base address is 12 bit, so i can add entries upto 4096. Each entry addresses 1MB memory hence total 4GB memory can be addressed. Led physical address : GPIO1_SETDATAOUT, 0x4804C194 How to write a page table entry ? Example: if i take put an array at address 0x40200000 does this means, i can use LED_ADDRESS as 0x0004c194 as the virtual address of the led ? 
c-2-13	X	Expected: } error recovery inserted identifier I am compiling C code with typedef enum. In this typedef enum elements this error is produced. p.s. : this code is standard library. What does this error mean? And how to fix it? 
c-2-14	X	Using BOOST_PP_SEQ_FOR_EACH to define macros In the example in boost's documentation about BOOST_PP_SEQ_FOR_EACH the show how to use BOOST_PP_SEQ_FOR_EACH and (w)(x)(y)(z) to expand to w_ x_ y_ z_. http://www.boost.org/doc/libs/1_61_0/libs/preprocessor/doc/ref/seq_for_each.html This is nice but I need it to expand to If I use #define MACRO_DEFINE(r, data, elem) #define elem data and BOOST_PP_SEQ_FOR_EACH(MACRO_DEFINE, _, SEQ) I get the following compilation error error: '#' is not followed by a macro parameter. Any idea how to do it? 
c-2-15	X	anagram using O(n) time using a dynamic array Can somebody please tell me how there are 256 characters(as given in the following code). Also please explain how does this count[] array works? Any reference to the same will also help. The code below is to check anagram of 2 strings in O(n) time. arent there 26 characters?? Thank you in advance 
c-2-16	X	mmap Mac: Segmentation fault The following on my Mac succeeds: However the below code is identical but fails when I try to write to *addr with segmentation fault: I.e. syscall successfully returns me a memory address, but when I try writing to it it fails. I compile it like this: If I run both versions with dtruss: then both version succeed and I see identical mmap call for both: Why does the syscall version give me segmentation fault, what am I missing? P.S. If I do something similar on Linux it works fine. So, as I understand the mmap function on Mac does not execute syscall(SYS_mmap, .... What does it do then? Can anyone please give me some links where I can see implementation. EDIT: It looks like syscall on Mac returns only first 4 bytes. Is there a 64-bit syscall version? DISASSEMBLED: mmap version: syscall version: Apparently Mac does not have a 64-bit syscall function, here a is simple implementation: And you use it on mac by shifting system call numbers by 0x2000000: You can find more here. 
c-2-17	X	double free or corruption after freeing a pointer on 6731st time The problem is that my code is not so small so I will post only fragments of it, let me know if more of it is needed for the question to be valid. The program uses library with various sorting algorithms (18 of them), and applies them to an unsorted array. User can select array size and how many arrays will be tested. If I select, for example, 100arrays of 1000 elements (18*100 = 1800 times algorithms sort the array), the code works. If it is the other way, ie 1000 arrays of say 10 elements, 1000 * 18 = 18 000 sortings, then it crashes with "double free or corruption". The question is not as much as where the problem lies, but firstly, how to debug it correctly. Here is the function which gets a function pointer (func) of sorting algorithm, sorts the elements, checks if sorted, adds appropriate data to "Iteration" struct, and then frees both "target" (array to be sorted) and "Iter" (Iterations struct). Here is the list of data structures: Here is the start of the program: Here is the running program: GDB output (I get a crash always on no=374): I've read many posts suggesting testing it with Valgrind, however, running with Valgrind, this crash does not arise. I know that I have posted very little info, please keep me updated to what more is needed. The main question is how to debug. How do I check if the pointer before freeing points to something valid, is the memory accessible, etc. These two lines from the function: First you make Algo->iterations[no - 1] point to the same memory that Iter is pointing two, so you have two pointers pointing to the same memory. Then you free the memory, making both pointers invalid. If you want to use the pointer later you can't free it. 
c-2-18	X	Variable types in C and who keeps track of it I am taking a MOOC course CS50 from Harvard. In one of the first lectures we learned about variables of different data types: int,char, etc. What I understand is that command (say, within main function) int a = 5 reserves a number of bytes (4 for the most part) of memory on the stack and puts there a sequence of zeros and ones which represent 5. The same sequence of zeros and ones also could mean a certain character. So somebody needs to keep track of the fact that the sequence of zeros and ones in the memory place reserved for a is to be read as an integer (and not as a character). The question is who does keep track of it? The computer's memory by sticking a tag to this place in memory saying "hey, whatever you find in these 4 bytes read as an integer"? Or the C compiler, which knows (looking at the type int of a) that when my code asks it to do something (more precisely, to produce a machine code doing something) with the value of a it needs to treat this value as an integer? I would really appreciate an answer tailored to a C beginner. For the main part it's the C compiler that keeps track. During the compilation process the compiler builds up a large data structure called the parse tree. It also keeps track of all variables, functions, types, ... everything with a name (i.e. identifier); this is called the symbol table. The nodes of both the parse tree and the symbol table have an entry in which the type is recorded. They keep track of all the types. With mainly these two data structures in hand, the compiler can check if your code does not violate type rules. It allows the compiler to warn you if you use incompatible values or variable names. C does allow implicit conversation between types. You can for example assign an int to a double. But in memory these are completely different bit patterns for the same value. In earlier (higher abstraction level) phases of the compilation process, the compiler does not deal with bit patterns yet (or too much), and makes conversions and checks at a higher level. But during the assembly code generating process, the compiler needs to finally figure it all out in bits. So for an int to double conversion: the compiler will generate code to make this conversion happen. In C however it's very easy to make mistakes and mess things up. This is because C is not a very strongly typed language and is rather flexible. So a programmer also needs to be aware. Because C does not keep track of types anymore after compilation, so when program is run, a program can often silently continue running with the wrong data after executing some of your mistakes. And if you're 'lucky' that the program crashes, the error message you is not (very) informative. You have a stack pointer which gives an absolute offset for the topmost stack frame in memory. For a given scope of execution, the compiler knows which variable is located relative to this stack pointer and emits access to these variables as on offset to the stack pointer. So it is primarily the compiler mapping the variables, but it's the processor which is applying this mapping. You can easily write programs which compute or remember a memory address which used to be valid, or is just outside of a valid region. The compiler doesn't stop you from doing so, only higher level languages with reference counting and strict boundary checks do at runtime. With the C language, it's the compiler. At run-time, there's only the 32 bits = 4 bytes on the stack. You ask "The computer's memory by sticking a tag to this place...": that's impossible (with current computer architectures - thanks for the hint from @Ivan). The memory itself is just 8 bits (being 0 or 1) ber byte. There is no place in memory that can tag a memory cell with whatever additional info. There are other languages (e.g. LISP, and to some degree also Java and C#) that store an integer as a combination of the 32 bits for the number plus a few bits or bytes that contain some bit-encoded tagging that here we have an integer. So they need e.g. 6 bytes for a 32-bit integer. But with C, that's not the case. You need knowledge from the source code to correctly interpret the bits found in memory - they don't explain themselves. And there have been special architectures that supported tagging in hardware. In C, memory is untyped; no information beyond its value is stored there. All type information is computed at compile time from the type of an expression (a variable name, a value computation, a pointer dereferencing etc.) This computation depends on the information the programmer provides through declarations (also in headers) or casts. If that information is wrong, e.g. because a function prototype's parameters are declared wrong, all bets are off. The compiler warns about or prevents mis-declarations in the same "translation unit" (file with headers), but between translation units there are no (or not many?) protections. That's one reason why C has headers: They share common type information between translation units. C++ keeps this idea but additionally offers run time type information (as opposed to compile time type information) for polymorphic types. It's obvious that every polymorphic object must carry extra information somewhere (not necessarily close to the data though). But that is C++, not C. 
c-2-19	X	where in memory are this variables stored on c? If I have code like this: Where in memory (stack, data, heap) are these variables stored(especially the local undefined variable e) ? undefined local variable e will have a garbage value ( where did it come from?) global variables -------> data static variables -------> data constant data types -----> code and/or data. Consider string literals for a situation when a constant itself would be stored in the data segment, and references to it would be embedded in the code local variables(declared and defined in functions) --------> stack variables declared and defined in main function -----> stack pointers(ex: char *arr, int *arr) -------> data or stack, depending on the context. C lets you declare a global or a static pointer, in which case the pointer itself would end up in the data segment. dynamically allocated space(using malloc, calloc, realloc) --------> heap It is worth mentioning that "stack" is officially called "automatic storage class". 
c-2-20	X	Selection Sort Counting comparisons i have a program with Selection Sort, which generates and sorts random numbers in ascending order and descending order. The problem is with the counting of comparisons. It gives correct number until 10 0000 numbers, but when i generate 100k numbers, it returns wrong value than the one from a formula. Here is my Selection Sort code. At first glance int *compare is capable of containing maximum value of 65536. Try long. https://en.wikipedia.org/wiki/C_data_types Well that's because for 100K there is actually 10^10 comparisons. An int on your system cant hold it. Try using long long to be safe. Also compare what you get with INT_MAX. You will get the idea. For n elements there are O(n^2)(n*(n-1)/2 to be precise) comparisons in case of selection sort. 
c-2-21	X	Illustration of Coccinelle using Hello world type of example I am new to Coccinelle tool, I read its slides and some pdf, but still not able to find some practical working of Coccinelle. I want to know how can one use this into Linux user-space programming and also in Linux kernel space. Please, someone, demonstrate me the Coccinelle with small codes like vulnerable hello world type. So, then I will get an idea about, how to write Semantic Patch Language (SmPL) in Coccinelle and how to use this tool to find out bugs. 
c-2-22	X	How to sort array of strings in ascending order in C Problem I have made sorting program which is similiar to other found at https://beginnersbook.com/2015/02/c-program-to-sort-set-of-strings-in-alphabetical-order/ but program which i made is not working. I think both are same but my program giving me waste output. Also i want to know in other program count is set to 5 for example and it should take 6 input starting from 0 but it is getting only 5,How? My Program I have this sample that I made: it should take 6 input starting from 0 but it is getting only 5,How? This loop execute for i being 0, 1, 2, 3, 4 so it loops 5 times. If you want 6 loops do or Also notice this line so that you reserve memory for 6 strings Use qsort(). Please don't use bubble sort. In C, you really do not have to write your own sorting algorithm outside of specialized needs. This is not an answer, but some criticism of the code you refer to: And the criticism: (1) scanf("%d",&count); reads a number into count, and returns after that. It does not consume the line break(!) (2) this loop does not print anything, just reads. However if you put in its place, you will suddenly see that it asks for names 0...5, just skips the 0 automatically. That is where the line break is consumed, it reads an empty string. You can also make it appear, if instead of putting 5 into the initial question, you put 5 anmoloo7. (3) in the printout the names appear below the title Order of Sorted Strings. But there is no linebreak in that printf. The thing is that the empty string is "smaller" than any other string, so it gets to the front of the list, and that is printed there first. If you do the 'trick' of appending a name after the initial number, the output will look different, there will be 6 names, and one of them appended directly to the title. Plus there is the thing what you probably get from your compiler too: gets is a deadly function, forget its existence and use fgets with stdin as appears in other answers. 
c-2-23	X	Making a binary file accessible from anywhere? am new to the Linux environment and am trying to write a simple project: so that its executable/binary file will be accessible from any directory. here is what i tried... mycode.c now i have comiled mycode.c like this gcc -o run_mycode mycode.c and i can run my code by ./run_mycode on the current directory. but what i want to do is, making the binary file(run_mycode) accessible from any where/from any directory. is there any possible way to do so? Read about the PATH variable. See also environ(7) and execvp(3). Use echo $PATH in a terminal to find out what is your PATH. It could be overridden, for bash interactive shells, in your $HOME/.bashrc file (that you can create or change with an editor). You should put your executable in a directory mentioned in your PATH. On some Linux distributions, your $HOME/bin/ directory is added into your $PATH if it exists. So you could put your binary (perhaps as a symlink) into $HOME/bin/ (as a rule of thumb, avoid having a too long $PATH; having dozens of directories there is not reasonable, even if possible) I have compiled mycode.c like this gcc -o run_mycode mycode.c Better change your bad habits quickly: you want to compile with all warnings and debug info, so use rather gcc -Wall -Wextra -g mycode.c -o mycode (order of arguments to gcc matters a lot!). Improve your code to get no warnings at all. Learn to use the gdb debugger (and also valgrind, at least to hunt memory leaks). Use once ln -sv $PWD/mycode $HOME/bin/mycode to add a symlink (see ln(1)) into your $HOME/bin/ Later, when writing programs in C (or in C++) with several translation units, you'll better use some build automation tool like GNU make or ninja. 
c-2-24	X	Flags in sub-Makefile.am I have a C project with the following structure with 1 target (binary final product) I am aware how to configure and compile my project with Autotools. In regard to my library of folder-1: i am often changing files in that library with different debug levels by defining a flag called DMYDEBUG. Compilation time for the whole project takes a while and by now, i am able to change the flag by (1) modifiying the top-level configure.in file: (2) running make clean (3) regenerating configure from the edited configure.in where i modify DMYDEBUG (3) running ./configure on top level (4) running make only this way the wished effect is taking places. Is there a better way to modify DMYDEBUG (which is only relevant to the static library in folder-1) without having to recompile the whole project each time? In the first place, it's terrible that you modify your configure.in to change the flag value. It would be much better to make configure recognize a custom argument that conveys the information, such as --with-debug-level=x. The AC_ARG_WITH() macro serves this purpose. However, if you have to reconfigure the project (re-run ./configure, with or without rebuilding it first) to change the flag, then changing the flag will always require a full rebuild. For more narrowly-scoped rebuilding, you need to rely on make detecting the flag modification and re-building the affected targets. make recognizes only file-level dependencies, so that strategy relies on you putting the macro definition in a header file, which the files that use it #include. Since you're using Automake, you can rely on your build system to recognize header dependencies automatically, but you may need to perform one clean build to bootstrap that. 
c-2-25	X	Clarification on how virtual memory manager in Windows fetches memory mapped file data Say, if I have a large file that I map into the virtual address space of my process as such: When does the kernel virtual memory manager read the actual data from the file on disk (or performs the I/O operation to fetch the data from the hard drive): A) When MapViewOfFile is called, or B) When I access it with pAddress[offset]? And a second question if the answer above is B -- when it fetches the data: C) Does it read the entire file, or D) Only the encompassing page (4K size, or so)? B and D when you call MapViewOfFile (ZwMapViewOfSection) kernel reserve range of virtual for view but not associate it with real physical pages (so not allocate physical pages at begin). when you first time access some address inside section view - because it yet not associated with physical page (PTE not valid ) - exception will be generated by cpu. while system handle this exception, it allocate already physical page, associate virtual address with this page, read data from file to it (if section backed by file) and continue execution from the instruction, which generate exception. so system not just read data from file, when you map it in memory, but wait until your first access it. and on first access - it read data not entire section range (section can begin not from file begin and end not at file end) but only accessed page (may be several pages) 
c-2-26	X	How can I delete a linked list with a random pointer? I want to free the list but I think I did it wrong because even after deletion I have reachable memory blocks. Assuming you are calling freeList with the pointer to the head of your list, your list is correctly freed. If src doesn't necessarily point to the first element in the list (but to a random element in the list), you can use m_Back to traverse back to the first element in the list, and then run your loop to free it. Regarding your observation ("I have reachable memory blocks."): The reason you think you have reachable memory blocks, is because freeing the memory allocated doesn't necessarily change the memory content itself; meaning, any data you stored on the list while it was allocated, can still be there after you free the memory (and naturally you can't rely on that). Your function is correct if (and only if) it is called with a pointer to the first element in the list. If you want a function to free the whole list when called with a pointer to an arbitrary element in the list you can do: 
c-2-27	X	Where is the bug in this search code for a binary search tree? I have written this code for strict Binary Search trees. (If every non-leaf node in a binary tree has nonempty left and right subtrees, the tree is termed a strictly binary tree. Or, to put it another way, all of the nodes in a strictly binary tree are of degree zero or two, never degree one. A strictly binary tree with N leaves always contains 2N "“ 1 nodes.) Unfortunately, it's not printing values correctly. I don't know what's the problem. I have seen other sites on the internet and the code is nearly same but still, I can't find a bug in my code. The major problem is you have used assignment in place of equality. does completely differently than what you expected it to be. It would be Same for the p->prev the check would be p->prev == NULL. So let's analyze the first case where you made the error. if( p->next = NULL ) first assigns NULL to the p->next and then we know the result of assignment statement is the value assigned. So the conditional would be So the if statement is never entered. So is else because then p->next = NULL. So it doesn't add the new node. Tree remains unchanged. It didn't stop here. As you lost the address of the newly allocated node - you have memory leak here. Then comes the solution Well when we reach a leaf level it would be equal to NULL and then you assign to it the address of newly allocated node. That solves the problem. Few things - Check the return value of malloc. In case it fails it would return NULL. 1 Free the dynamically allocated memory when you are done working with it. Enable compiler warnings -Wall -Werror. If you did that compiler would have clearly shown you the problem. Well another thing check the return value of scanf. As mentioned in comment by Jonathan Leffler, readablility will improve if you write the statement properly spaced. else if(newnode->data>p->data) is hard to read. Compared to that else if (newnode->data > p->data) is much more readable. The error would be readily visible to your eye when you write the statement if(p->next = NULL). The obvious one would be if(p->next == NULL). Freeing the tree is a bit tricky in that you will have to always perform post order traversal. You need to free the children first then you would go for freeing the parent. Otherwise there will be memory leak. 1. Earlier I mentioned fprintf(stderr,...) Basile Starynkevitch to use perror which is a good choice for printing diagnostic error messages. 
c-2-28	X	finding substring and replacing it in C Just some quick experimental code; I am just trying to replace the substring epl in str with "gard" but when I print it out there are no changes to the string buffer I am printing, meaning the first string im printing works where it gets all the letters into buffer before the substring occurs, but when I try to replace with substring it doesn't work. I've testing the individual pointers and they all seem correct...not sure what is happening, any insight? Thanks...fully runnable program. You are not appending remaining text "ace text..." after replacing "epl". Can you try code below I think the problem in your code arise because strlen does not include the terminating zero. I tried to fix your code but in the end I found it easier to re-write it anew (and using more sensible variable names). The following simple four steps work. The continuous use of strlen may be replaced by variables, but I left them for clarity. (Also, a good compiler may very well optimize this code by leaving the calls out.) 
c-2-29	X	C: why doesn't fgets function work? I'm writing a program to create a linked list node. After that, i add some functions (insert,search,update,and print). The linked list contains number, name, and quantity on hand. The main function prompts users to enter an operation code, then calls a function requested actions. All function work correctly. However, in the insert function, I use fgets statement to get the string input from the user. (NAME_LEN = 25) Unfortunately, this code doesn't work. The program shows that As you can see that, the name part was missed. Moreover, after inserting a new node, the program automatically shows the default case in the switch. Can you explain to me what happens, pls?. Well the thing is fgets is consuming the \n that is left in stdin from previous input. Easy way would be to use dummy getchar() or using fgets until you get a non-whitespace input. Do one thing, after scanf put a getchar(). To give you a more clear explanation suppose you enter iEnter Then i is stored into the variable code. But what about the \n. fgets() when starts reading input from stdin finds that \n and it stops. By using the getchar() you have consumed the \n. Now all non-whitespace characters will be consumed by fgets until it finds a \n or EOF or buffer gets full. The most portable and clean way to flush the stdin would be (To be correct the stdin must have atleast the \n character otherwise it will go on eating other charcaters as well (maybe your valid inputs)). This you can use whenever you encounter some garbage input or clear the stdin. Also to really understand whether fgets function works or not you need to check what it returns. Does it return NULL? If not then check it and then try to understand. Simply because you didn't see any output when printed the buffer doesn't mean fgets failed. Edit The question at first posted mentioned that there is fgets right after the scanf("%c",&code). Here it is clear on the edit that scanf("%d",&new_node->number); is there before fgets but that doesn't change the scenario. Now the \n after the entered number (you input 2ENTER) is still there and fgets consumes it. So we need to place dummy getchar() over there or stdin flushing technique shown above. 
c-2-30	X	u64 decimal to hex using C I have a titleID u64 array in which the first position consists of 16 decimal numbers. In this function: How can I replace the _ with the hex value of titleID[0]? The 0x000_LL parameter needs to have a u64 type as well. Example using the provided titleID: Hex is a text representation of a number. You don't want hex. You simpy want to pass the number. is the same as and They all pass the number one quadrillion, two hundred and sixty-six trillion, ... 
c-2-31	X	how to return Standard Class Object from Extension to PHP? I implemented it as below, but because of the lack of understanding of zval, it will be dropped segmentation fault. How do I return an object of Standard class? enviroment: php7.1.12 compiler GCC 
c-2-32	X	Segmentation Fault error gcc linux Why do gcc gives me segmentation fault when i try to access members of my structure with a normal global variable ? PS: I only get this error while running the program on virtualbox machine with ubuntu on windows, when i use MAC OS , there are no errors all run fine. 
c-2-33	X	What's the best way to commit only sections of a project in Visual Studio? I'm working on a game engine written in pure C. The idea is that game logic is as separated from the drawing, audio, and input as it can be, for easy porting to consoles such as Sega Saturn, PS1, 3DS, and more. I'm developing the PC version in Visual Studio 2017. Currently, 2 independent commercial projects and a personal project of mine are using the engine. There's an issue, however... The engine is fairly low level, so by effect that means all game-related things interact with the actual engine very closely. Engine things such as tile and graphics management, the animation system, and the math library are just a click away from the actual "Game" part of it. The folders in each of the projects are organized so that game things and engine things are separate from each other. The problem is that whenever I make changes to the core engine, I'm copying my changes between the 3 projects manually. That is bound to cause problems at some point. I'll be damned if they haven't already desynced even just a little bit So, what I'm trying to achieve is this... I need all of my engine-side things to be synced up online in some way. Saving an engine related file in Project 1 will be reflected in Project 3, or anything else uses the engine on an official level. I'd imagine this kind of functionality will be useful for when the engine is released publicly as well. I need this for the sake of organization, time, the developers, and my sanity. Problem is, at the moment, I'm not really aware of anything that can provide this kind of functionality out of the gate. Some fiddling may be required, sure, but I'm still not aware of anything. I've attempted to do a bit of research through the wonders of google, but it's hard to word my question in a way that doesn't suggest wanting to commit only a part or a section of a project, rather than trying to keep the engine synced between other projects. It's tough, since games made in this engine are an extension of the engine by nature. Since this is designed to run on many platforms as smoothly as possible, there's no fancy project files or anything. In fact, there couldn't be without writing my own stdio for each platform. I'm not really interested in that, at least not now... I'd also like to make it clear that the engine does work on multiple consoles, it's really neat! Any help, suggestions, or tips you can throw my way are greatly appreciated. 
c-2-34	X	linux server with select but client block I have wrote a programe server and I want to thousands of clients connect to it at a time , the code is bellow: In the code, I have set non-blocking when I accept a new socket, But when I test it with ab, it shows result below: And server shows: The result seem to mean client block, how to slove it or give some examples for me? You should bind your server to INADDR_ANY rather than a specific IP address, and you may have to take care of firewall rules and port forwarding as well. This is wrong: The first parameter to select() is not maxfd but nfds, the number of active fds, and it should have been set above to the largest valid i+1, so as to include the entry at fds[0] for the listening socket. The main problem in the code was that it did not send a http formatted answer. The answer has to contain http headers to be accepted by browsers. Another problem which would appear if your server answers a longer string is that write does not need to send the whole buffer at once. This can be solved by memorizing how many bytes of the answer string was sent to the given socket. In the following code I do it with the array fdsi. The final modification I'd do is to use normal blocking sockets for client's connections. This is a question of taste, but I think that select is sufficient to avoid blocking of your program. The resulting code with those minimal improvements is: At the core of your code there's an issue of design. Your purpose is to have thousands of concurrent connections and you're using select to achieve this. However, on many system select will be limited to a smaller number of clients (or max fd values). On Unix the limit was set (historically) at an fd==1023 (any greater value would break the select call in weird and unexpected ways) and Windows used to have a limit set at 63 fds per set. Many implementations still have these limits and special code is required to circumvent these issues (notice the BUGs section on Linux's man page for select). Also, select performs poorly on "thousands" of connections (which is what you're aiming for). You will have to look into OS specific approaches (epoll on Linux, kqueue on macOS/BSD, etc') in order to reach "thousands" of concurrent connections. There are libraries that abstract these system calls and allow you to write system independent code. These come in flavors and sizes, so you'll have to decide which one you prefer. 
c-2-35	X	Would you help me with MATLAB Coder? I wrote a function in MATLAB . I will use for microprocessor , but i don't know very good C , C++ language. Code Here : I think i use to MATLAB Coder , but there is a problem . I have a MATLAB 2017b but it is not orjinal it is crack license. Can someone with licensed MATLAB convert this code to C using MATLAB coder? summarize,, Matlab to C. note : M,nl and nr variable type will be unsigned char. Thank you 
c-2-36	X	How do I build a memory dependency graph in LLVM? Given some piece of LLVM bit code, I would like to build a graph of memory dependencies between instructions. I did find the MemoryDependenceAnalysis which seems to be the right start but the documentation is lacking so I'm not sure how to proceed from here. 
c-2-37	X	Use of the asterisk based operation in a printf statement in Embedded C Here is some context to explain my confusion. I came across this problem in a school test and I was confused by the use of the decrements operator between asterisk. I will explain below. Output What confuses me is the following line: printf("002 %s\n", *--* ++s +3); I do not understand the use of -- in the context of the mentioned command. Also I do not understand why we are not going inside the while loop. I am a beginner in this context and shall greatly appreciate some detailed explanation of the code. 
c-2-38	X	C socket Invalid range header I'm trying to make a program that serve a file for others to download. It listens on a port and accept any request and send files through socket. I'm not worrying about NAT yet. The problem I have is that Downloading that file with aria2c (or wget) gives me "Invalid range header error". However, downloading locally (download from 127.0.0.1) works fine. Knowing it might cause a problem, I disabled multi-threading download on aria2c by adding -x1 flag. What am I doing wrong? The error is: A bit of explanation on the code: findFilename just generate file name from file path serveFile opens a socket and listen on it to send anyone that connects to it the specified file My code : The error you attaches said it all, really. Your code assumes that every request made to the server is a request asking for the whole of the file. For many good reasons, this isn't always the case (see edit). Range requests (using the Range header) allow clients to request a part of the file, which allows breaking the download into chunks and resume downloads even after network failures. However, your code also sends the whole file, regardless of the request made. Moreover, your code is sending the Accept-Ranges header, indicating that Range requests will be respected (even though the aren't). In this case, the client is complaining about your code, indicating it requested a chunk and your code sent the whole thing. EDIT As pointed out by @RemyLebeau, the Range function is optional, though widely used. This is why you only receive the error sometimes... aria2c seems to require the range functionality to a degree, or it wouldn't be able to work as a download manager (managing downloads is the purpose of Range functionality, after all). Other downloading tools will not require (or leverage) this functionality. 
c-2-39	X	CMake: Linking Fortran against static C library fails Using CMake and GCC to build a very basic Fortran project with an iso_c_binding fails at linking stage. Compiling and linking manually just works fine: The minimal CMakeLists.txt: Building the project leads to the following linker error: The linker seems to search for a main() function, that Fortran does not feature. Trying to force the Fortran linker makes no difference: Help is appreciated. Example Code The linker error does not depend on the actual implementation. Anyway, a basic example would be: key.f08: And the getkey.c: Verbose Make Running make VERBOSE=1: As you can see from the verbose make output: You are not building with the Fortran code at all! This is because CMake doesn't recognize .f08 as a code extension. See here: cmake, fortran 2008, and .f08 file extension You may simply rename your .f08 file to .f (or .f90 as described in comments below). 
c-2-40	X	How do I find the memory dependencies in the body of a for loop? I'm writing an LLVM pass that needs to extract the following pieces of information from the body of every for loop in the program. The max dependence height of computations The max height of memory dependencies of computations The max height of control dependencies of computations The average dependence height of computations The minimum memory-to-memory loop carried dependence. The number of memory-to-memory dependencies. So far I've found the MemoryDependenceAnalysis but I'm not too sure how to use it to get the information I need, I was hoping someone would be able to point me in the right direction. 
c-2-41	X	File Process in C I wrote these codes for my project but I have error in these codes. This function's purpose is to add new client in this file. When I process it, it's okay but if I want to see my clients from file I process search function it gets to me more than my clients like that. I tried to work it by using fscanf but when I tried it, my addition function isn't working completely because it is not read 'kisiler.iz' (means registration track). Like that and these codes' purpose is update information of any client but it's not working because my feof loop isn't working or work forever. Therefore, I can't update my informations. If you understand my codes please help me I have no time to prepare it. The "eof" flag is only set once you try to read from beyond the end of the file. Your loop doesn't read anything from the file so it will never reach the end and will continue forever. And very much related, you should read Why is "while ( !feof (file) )"? always wrong?. 
c-2-42	X	Changing which libc.so gets linked? Im trying to cross compile for MIPSEL on my router. I got stuff working in assembly, but now Im moving to trying to compile basic C code. Currently just have simple hello world c code, and using the mipsel-linux-gnu-gcc compiler, which works for assembly. Compiler command: The libc.so.0 is extracted from the firmware for the router. The program compiles, however in readelf, the issue is that it links against libc.so.6 whereas pulling the busybox binary from the firmware and running readelf on it How do I get it to link against libc.so.0? It looks like you need to negate the standard glibc path, as the compiler checks this first. This can be done by compiling with -nostdinc. You'll then need to -I include the gcc headers and such, as discussed here. Figured it out. Had to build a uClibc toolchain using buildroot. 
c-2-43	X	What does the following mean to the compiler void FreePendedPacket( _Inout_ __drv_freesMem(Mem) TL_INSPECT_PENDED_PACKET* packet ) I ran across the following function (implementation) in a sample driver but could not make heads or tail of it. What does __drv_freesMem(Mem) actually do in this statement ? How does the compiler address this part of the function declaration ? 
c-2-44	X	How to understand the logic behind the assignment of variables? I am a beginner, how can I understand this error? Method 1 It displays an error: Method 2: My output is Is this due to return 0? Would someone please add examples for better understanding? Your error is on this line: C requires that a variable be declared before using it, here you try to use b before it is declared. For example, unlike the above the following is legal: because the assignment to b uses a variable that has already been declared. I'm going to show you some examples to assign values. Example 01 Example 02 The next code is the same you did. You can't assume they're always 0. C language won't initialize them automatically, so the variables have just garbage. Get an IDE Read a book. Google. Don't ask questions without researching for an existing solution. I know it's easy to ask, but researching can help you more than just getting your answer. Now to your answer. Perhaps, https://www.cprogramming.com/tutorial/c/lesson1.html Scroll down, read about variables. Variables are declared as: Variables can also be declared all in one line, You could also assign values to your variables when you declare them. Or, you could declare & assign them values all in one line: The "int" above, is a datatype. It tells the compiler what kind of variable you are declaring. There are various datatypes in C: int, float, char, double, etc. These are the fundamental data types. There also derived datatypes, etc, etc, etc. If you do not assign a value to a variable, and you just print it, it will print a junk value (in your case 0, it can be anything though). Try assigning values in your method #2 as I did above and you will see the difference. The return 0, is used to specify the exit code of your application. 0 means the application exited successfully. In case of failure, a value other than 0 is returned, but anyways. Good luck. Learn to use google. 
c-2-45	X	malloc vs array in C I am taking a MOOC course CS50 from Harvard. The last lecture I had was about memory allocation and pointers (two concepts which are absolutely new to me). What was taught is that malloc(10*sizeof(char)) allocates enough bytes on the heap to store 10 characters and returns a pointer to the first byte which can be saved in another variable as follows char *x = malloc(10*sizeof(char)). To free the memory one would use free(x). But there is another way to make a computer to reserve enough memory to store 10 characters i.e. char c[10]. Is in the code snippet above c also a pointer of type char*? Does char c[10] also reserve memory on the heap as malloc does? Are the ways to allocate memory equivalent? char c[3] = "aaa";free(c); returns a runtime error; so it seems I can not free the memory I have allocated with char c[3]. Why is that? I would really appreciate an answer tailored to somebody who just have learned about pointers. "char c[10];" reserves space either on the local stack or in a global data area that is created when the program is loaded, it is not heap memory as far as the program is concerned (to the OS it may be different). When used in an expression an array decays to a pointer to its first element (this is how something like the following works, for example): You cannot free an array declared with type var[size] syntax because it is either local to the current function or global to the entire program. Heap memory is not bound to any particular context in this way (the variables used to reference the heap memory are but not the pointed-to memory). Is in the code snippet above c also a pointer of type char*? No it is not. It is an array of ten char. However, the name of an array can, when used in a context where a pointer is expected, be converted to a pointer, and therefore effectively used as if it is a pointer. Does char c[10] also reserve memory on the heap as malloc does? No. Heap and stack are not completely accurate terms either, but I won't expand on that further. What malloc() does is called "dynamic memory allocation" according to the standard. The behaviour of char c[10]; depends on context. If it is inside a block scope (inside a pair of {}) it creates an array of automatic storage duration. That array ceases to exist, as far as your program is concerned, when the scope is exited (e.g. if the function returns). If it is at file scope (outside a function), then it creates an array of static storage duration. The array will be created once, and continue to exist until program termination. Are the ways to allocate memory equivalent? Nope. char c[3] = "aaa";free(c); returns a runtime error; so it seems I can not free the memory I have allocated with char c[3]. Why is that? Because free() only has defined behaviour when passed a pointer to dynamically allocated memory - i.e. returned by malloc(), calloc(), or realloc() or a NULL pointer (which cases free() to do nothing). c is an array of either static or automatic storage duration, depending on context, as I mentioned above. It is not dynamically allocated, so passing it to free() gives undefined behaviour. A common symptom of that is a runtime error, but not the only possible symptom. What was taught is that malloc(10*sizeof(char)) allocates enough bytes on the heap to store 10 characters and returns a pointer to the first byte which can be saved in another variable as follows char *x = malloc(10*sizeof(char)). To free the memory one would use free(x). "On the heap" is an implementation concept, not a C-language concept. The C language itself is not concerned with partitioning memory into separate areas with different characteristics, and in fact it is not necessarily the case that any given C implementation in fact does so. Even in an introductory course -- maybe especially in an introductory course -- it is better to use C language concepts than concepts native to a certain implementation style. The relevant C language concept in this case is storage duration: An object has a storage duration that determines its lifetime. There are four storage durations: static, thread, automatic, and allocated. (C2011, 6.2.4/1) The object allocated by your malloc() call, (in)to which your pointer x points, has "allocated" duration. That means its lifetime lasts until that object is freed by a call to free(). Note well the distinction here between variable x, a pointer with automatic storage duration, and the object to which x initially points, an untyped object the size of 10 chars. There is (much) more, but this point in your journey is early for delving deeply into the standard. Nevertheless, I find this characterization more useful for addressing questions such as those you pose. But there is another way to make a computer to reserve enough memory to store 10 characters i.e. char c[10]. Yes, that's true. Is in the code snippet above c also a pointer of type char*? No. Within the scope of that declaration, the identifier c refers to an array of 10 chars. There is a close relationship between arrays and pointers, but they are not at all the same thing. This is a crucially important point, and one over which many new C programmers stumble, so I repeat: arrays and pointers are not the same thing. The details would make for a whole other answer, however, and one which you can already find several times over here on SO. To put it another way, identifier c designates one kind of thing to which x's value could point, but remember that x's (pointer) value is distinct from the object to which it points. Does char c[10] also reserve memory on the heap as malloc does? If your declaration of c appears inside a function then it declares an array with automatic storage duration. This means that the array's lifetime lasts until identifier c goes out of scope. It is the implementation's concern where the storage for that array is located, but on an implementation that provides a heap / stack distinction, the storage would most likely be on the stack, not the heap. Are the ways to allocate memory equivalent? No. malloc() allocates an object with allocated storage duration, whose lifetime the program is responsible for managing explicitly. The other allocates an object with automatic storage duration, whose lifetime is determined by the identifier's scope. char c[3] = "aaa";free(c); returns a runtime error; so it seems I can not free the memory I have allocated with char c[3]. Why is that? Most directly, it is because the specifications for the free() function explicitly say [I]f the argument does not match a pointer earlier returned by a memory management function, or if the space has been deallocated by a call to free or realloc, the behavior is undefined. (C2011, 7.22.3.3/2) That is, the standard does not require a runtime error (or any particular other behavior) if you try to free a pointer to an object with automatic duration, but it explicitly disclaims any promise that you can free memory that way. But a more satisfying answer, I think, is that free() is how you mark the end of the lifetime of an object with allocated storage duration, not one with automatic (or other) duration. Where the storage for the object is located (e.g. stack vs. heap) is ancillary. Syntactical considerations: First of all, the types of cand x are different: The type of x is what you expect char*, while the type of c is char[10], which is an array of ten character elements. Thus, x and c cannot be fully equivalent: When you say x, the compiler simply thinks of a single address of a single char. However, when you say c the compiler thinks about the entire array object with all its ten char elements. Consequently, the code will print on a 64 bit machine. sizeof(x) gives the amount of bytes required to store an address, sizeof(*x) gives the amount of bytes the pointer x points to, and sizeof(c) gives the amount of bytes required to store a complete array of ten char elements. So, why can I use c pretty much anywhere where I can use x in C? The trick is called array-pointer decay: Whenever you use an array in a context where a pointer is expected, the compiler silently decays the array into a pointer to its first element. There are only two places in C, where you can actually use an array. The first is sizeof() (which is the reason why sizeof(x) != sizeof(c)), and the second is the address operator &. In all other cases, any use of c invokes the array-pointer decay. This includes stuff like c[3]. This expression is defined to be equivalent to *(c+3), so the compiler decays the array c into a pointer to its first element, then applies pointer arithmetic c+3, and then dereferences the resulting pointer. Sounds complicated, is mind-boggling, but has the desired effect of accessing the fourth element of the array. Anyway, with the syntactical considerations out of the way, lets look at the actual memory allocation: malloc() reserves a memory block of the given size, and that block remains valid until you call free() on the pointer that malloc() returned. This is independent of the control flow in your program: A function can return the result of malloc() to its caller and let the caller free it. Or it may pass the result of malloc() to some other function which frees it. Or it may return the result to its caller, and the caller passes it to some other function to free it. Or the result may be stored in some other memory object for some time. And so on, and so forth. The possibilities are as varied as the source code that's being written around the world. It must be stressed that it is a big error to use a pointer after freeing it. If you do that, it is possible that pink elephants appear and trample you to death, as far as the C standard is concerned. It is your job as the programmer to ensure that each malloc'ed pointer is free'd exactly once. If you fail to do so, well, all bets are off. If you say in file scope (outside of functions or struct definitions), you are declaring a global variable. This array will exist from before main() is called right unto the death of your process (either by returning from main(), or by executing exit()). If you say within a function, you are declaring a local variable. This array comes into existence when its declaration is executed, and ceases to exist at the end of the enclosing block (the part between a pair of braces {}). Thus, allocation and deallocation are strictly tied to your program's control flow. If you say within the definition of a struct, you are declaring a member variable. This array will exist as long as the enclosing object (the struct) exist. If the enclosing object is global, the arrays lifetime is that of a global, if the enclosing object is local, the arrays lifetime is that of a local, and if the enclosing object is a member of some other object, the arrays lifetime is that of the other object (this is recursive). 
c-2-46	X	Linking unistd.h when using CC compiler (Solaris) I need to link <unistd.h> in my program using CC compiler on Solaris. When I needed to link <math.h> or <curses.h> I just used Google to find -lm and -lcurses flags but this time Google didn't help. How to find out in which lib*something* is <unistd.h> located? For any given function, the man page tells you both what headers to include and what libraries to link. For example, the ceil function: Synopsis It tells you to #include <math.h> and to link with -lm. Most functions declared in <unistd.h> don't require any additional libraries to link in, but when in doubt check the man pages. 
c-2-47	X	Why is it that when I use a for loop in C, it is printing my text infinitely many times? (I am a beginner) I have created a series of for loops but for some reason, I keep on getting infinitely many #'s as my output. I'm not really sure why this is happening. I am a beginner to programming and I am a little confused. My code is: The output I'm trying to get is the following: If someone can help me, I would be extremely grateful :) Thanks This issue is that you don't change the value of your loop variables x and y, so they don't terminate normally. Your program keeps on executing the block of the second for-loop. Let's have a look at the first for: When this is executed, h and i are fixed and you also don't change them in the body of this for-loop. Let's say that h is 10; i is 0. This means that it starts with x being 0. It does not execute its block because x < 0 is false. Then the second for: If you work this out you'll find that after the first iteration y will always be 0 + 2 is 2. The loop condition the becomes: 2 < 10 + 1 (again assuming h is 10), which is always true. That means that your loop keeps on spinning forever. Try this: I think it has one or two OBOs (Out-By-One mistake), but I'm sure you'll fix that soon enough. In the third for loop you have for (int y = 0; y < h + 1; y = i + 2) the increment statement y = i + 2 resets the loop variable y after each run through the body to the same value, and if this value is smaller than h you get an infinite loop. You could try this: This produces: Edit: To shift the triangle of # 1 space to the left the second loop needs to be changed to The loop printing the spaces will never execute - you initialise x to 0, then loop while x < 0 which is immediately false. The loop printing '#' never exits because y is not modified in the loop y = i + 2 will not advance y - it will simply assign it the value 2 indefinitely. You in fact have a similar problem in the previous x loop, bit it never gets that far. The above can most easily be discovered by using a debugger and stepping the code rather than posting questions on SO. The pattern can in fact be generated using just a single inner-loop: Or perhaps less "clever": 
c-2-48	X	C - Max Number From Unknown Number Of Numbers Here i am again, asking for your help. I'll ask question below, here is my code: So, i have matrix and have some tasks to do, restriction for user to enter only positive numbers, sum of each of the rows, etc. Now i need to find the biggest number from sums of rows, i don't know how many number i will have, i need something that will work with any amount of numbers. Here is code output: I want to check all the sums of rows and print out the biggest one, for the example above, something like this should be added to this output: Waiting for your help. 
c-2-49	X	C code is not working in Linux compiler The code below is about file operations in C. First program reads to file and store it to array after that program ask to user which question do you want from the file. If user enter, "2" program takes 2nd question from file (takes all characters between 2 and 3 numbers in file) and prints to the screen. I wrote this code in DEV C++ compiler in Windows. It is working in Dev C++. But when I try this code in Linux terminal, the code asks the user an integer but it is not printing the result from file to the screen. It doesn't give any error and program closes. } Any suggestions? You need to convert your file 'poems.txt' with CR/LF line endings to Unix line endings. This could be done with 'tr' command. 
c-2-50	X	How fix Error of error of include files in TinyCCompiler(TCC)? Errors : include file 'tcclib.h' not found! include file 'stdlib.h' not found! ... No library can be used in tcc. guest@Base:~/Gits$ git clone https://github.com/LuaDist/tcc tcc1 guest@Base:~/Gits/tcc1$ mkdir _build && cd _build guest@Base:~/Gits/tcc1/_build$ cmake .. -DCMAKE_INSTALL_PREFIX=_install guest@Base:~/Gits/tcc1/_build$ cmake --build . --target install guest@Base:~/Gits/tcc1/_build/_install/bin$ cat test.c guest@Base:~/Gits/tcc1/_build/_install/bin$ ./tcc -run test.c More at https://pastebin.ubuntu.com/26241295/ #Questions like and related to this problem : How fix Error of error of crt1.o,crti.o in Build TinyCCompiler(TCC) from Source? Compile and run a file.c using Tiny C Compiler on Windows #Problems like and related to this problem : http://lists.nongnu.org/archive/html/tinycc-devel/2006-06/msg00013.html https://lists.gnu.org/archive/html/tinycc-devel/2016-10/msg00086.html https://lists.gnu.org/archive/html/tinycc-devel/2006-06/msg00020.html http://lists.nongnu.org/archive/html/tinycc-devel/2017-10/msg00031.html #Github Page : https://github.com/LuaDist/tcc How can fix Problem? 
c-2-51	X	Do I have to call 'longjmp' after a 'setjmp' In the manpage on longjmp and setjmp, there's this line: If the function which called setjmp() returns before longjmp() is called, the behaviour is undefined. Does that mean that I actually must call longjmp somewhere in the function that called setjmp or in a nested function? Or is it OK to not call it at all? You're reading wrong. If the function which called setjmp() returns before longjmp() is called, the behaviour is undefined. The behaviour of longjmp is undefined if you call it after you returned from the function which set the setjmp. But it's perfectly all right not to call longjmp at all. Wikipedia is clearer: If the function in which setjmp was called returns, it is no longer possible to safely use longjmp with the corresponding jmp_buf object. This is because the stack frame is invalidated when the function returns. Calling longjmp restores the stack pointer, which"because the function returned"would point to a non-existent and potentially overwritten or corrupted stack frame. Those functions are often used to handle exception mechanisms. If the exception doesn't occur, you don't want to call longjmp because there's no reason to "rewind" your program. 
c-2-52	X	How to start learning C programming? Hello I am thinking to start C language as my first language from http://www.cprogramming.in is it good source for learning C Programming? 
c-2-53	X	Display degree symbol in Arduino OLED To display degree symbol to plot on OLED you can use display.print((char)247); // degree symbol example: void loop(void){ The documentation says: Each filename starts with the face name ("FreeMono"?, "FreeSerif"?, etc.) followed by the style ("Bold"?, "Oblique"?, none, etc.), font size in points (currently 9, 12, 18 and 24 point sizes are provided) and "7b"? to indicate that these contain 7-bit characters (ASCII codes " "? through "~"?); 8-bit fonts (supporting symbols and/or international characters) are not yet provided but may come later. In other words, the degree symbol (U+00B0, Â°) is not supported by the fonts by default. Of course, nothing stops you from redefining one of them as the degree symbol in the .h file that corresponds to the font you wish to use -- in particular, to make a copy of the existing file, renaming the copy, and replace one of the ASCII characters you do not need with the degree symbol. I would suggest replacing ` (ASCII code 96), because it is very similar to the more commonly used apostrophe ' (ASCII code 39). An easier option is to just draw a small circle (say, radius 1, 2, or 3 pixels) at the correct position using display.drawCircle(xcenter, ycenter, radius, WHITE);. After all, the degree glyph is just a small circle -- consider the looks of e.g. 25Â°C or 77Â°F. For more complex glyphs, if you don't want to create your own font .h files, you can use the display.drawBitmap() interface. Examine and experiment with the Adafruit example for details. You can use the image2cpp web page at GitHub to generate the Arduino data array. It also supports font format, so you can use that to generate the data for your degree symbol glyph, just by "drawing" it on that page. 
c-2-54	X	i have double linked list but the head and tail pointers inside an array , any idea could help me? how could i create an array of head and tail pointers and associate it with linked list , i think i need two arrays ! this is an image of the equation Since you are programming in C++, I recommend using std::vector. You could use 2 vectors or one vector of a struct: However, I believe your diagram is representing a container of lists: If you need to use your own list, substitute instead of std::list. If you have a fixed quantity of lists, you could use: I guess you are using arrays because you need multiple linked lists, so, if the structure of the list has a pointers to head and tail, you can add a reference to the node in both arrays, you still need to make changes to the arrays every time you get a new head or tail 
c-2-55	X	Why write() terminate my thread? I created a thread with pthread_create() for the execution of a function, inside the function there is a write() function to send data via socket descriptor. If the write() function fails to send data (because the socket connection is lost), my thread is terminated. Can I keep a thread when write() fails? This is my code: If you try to write to a pipe or socket descriptor where the other end of the pipe or socket has been closed (so noone will ever read it), the system will send a SIGPIPE signal to your process, which by default will kill the process1. You can avoid this fate by ignoring SIGPIPE, generally early in the main function: once you do this, the write will no longer kill your thread or process; instead it will return an error (-1) with errno set to EPIPE. You need to make sure you are ALWAYS checking the return value of your write calls, and doing the appropriate thing when there is an error, otherwise your program might run on in background after you think it has stopped... 1Depending on how you've set things up it might kill just the thread and not the entire process, but for general safety and hygiene its supposed to kill the entire process 
c-2-56	X	global static variable not changeable within a function? (gcc-89, uclinux) I hope this is no duplicate but I had no idea what to search for. I have a strange behavieour with a c program and a static variable. About the program: I am configuring a serial port and change the serial file descriptor in a configure_tty(int *fd_ptr) function.The program is an application for an embedded linux running microblaze uclinux. I am programming and cross compiling under Ubuntu 14. I stripped it down to the following example: This gives me `before: 0` and then `after: 5` what is what I expected. I have to mention that my original program is cross-compiled with gcc -89 parameter and the compiler for microblaze uclinux. I found the problem thanks to gdbserver and gdb over TCP. Within the config_tty everything is fine but right after *fd_ptr = desc; fd didn't change. So I tried different things and now comes my question: Changing static int fd; to int fd; fixed it. Can anyone tell me what is the reason for this and why it is no problem in my example on Codelite for Windows? Is it compiler-specific? 
c-2-57	X	Defining preprocessor macro to line of macro definition Let's say I have the following macro definitions (line numbers included): How do I define MACRO1 so that, at compile-time, it resolves into a number that corresponds to the line number MACRO1 is defined on? (in this case 41) How do I define MACRO2 so that, at compile-time, it resolves into a concatenation of a predefined string (for example foo) and a number X where X is equal to the difference between the line number of MACRO2 (52) and the line number of MACRO1 (41)? Given the above, MACRO2 would resolve to foo11 since it is a concatenation between the predefined string 'foo' and the difference between the 2 lines numbers 52 and 41. Is this possible? You can't do what you want with the usual C preprocessor. Read documentation of cpp. However, remember that C (or C++, etc...) files could be generated (by some program or script). You could use some other preprocessor for that generation (e.g. m4 or GPP, or your own script or program). Then, you simply need to configure your build automation for that purpose. If you use GNU make, edit your Makefile; if you use ninja, edit your build.ninja file, etc.... Such basic metaprogramming techniques are quite common in practice; in many large programs, some of the C or C++ code is generated. Some generators (e.g. bison or rpcgen) are quite common, and appeared in the previous century. As an example, the GCC compiler (mostly coded in C++) has about a dozen of C++ code generators. Notice that modern operating systems enable plugins and their dynamic loading; so in some cases it even is worthwhile to generate some C or C++ code at runtime, compile it as a plugin, and load it (e.g. using dlopen(3) with dlsym(3) on Linux) to use it. Then beware of name mangling. Consider also using some JIT compiling library like GCCJIT or LLVM etc.... BTW, recent C++ compilers can be extended with plugins (e.g. GCC plugins) or used as a library (e.g. libclang). Many (academic, or domain specific) languages are compiled to C, and some are compiled to C++ (e.g. felix). 
c-2-58	X	C - Matrix > Only Positive Elements I need your help, code which i will show you is just a beginning, but i already have a problem as a beginner, so please help me, i don't think it will be hard for them who knows C. Here is my code : Nothing special, user enters number of rows and columns and later fills up this matrix with elements. Now the problem, right now user can enter any kind of integer, positive and negative, i just want to limit user so that he/she could enter only positive numbers. You wrote that you tried to use another variable and 'while' loop, so you can do it like this: Another huge pitfall you have fallen into is failure to check the return of scanf. scanf is notoriously problematic for new C programmers to handle appropriately because of the subtle differences in how the various format specifiers handle leading whitespace, and characters that remain in stdin after input is taken. At minimum, you must check the return and validate the number of conversion expected did in fact take place, that EOF was not returned indicating that the user canceled input by generating a manual EOF with Ctrl+d (or Ctrl+z on windoze). You must also empty any characters that remain in stdin following an error and following successful conversion if character input can follow (the trailing '\n' remains unread). Another style nit is to space your code a little more broadly. Young eyes may have no problems with all characters mushed together, but for the rest of the world, proper spacing makes code much more readable. Putting those pieces together, and putting the reading of an int and emptying stdin into functions so you avoid repeated blocks of code, you can do something similar to the following: Example Use/Output Look things over and let me know if you have further questions. 
c-2-59	X	Code for ultrasonic sensor I am trying to write a code for : When ultrasonic sends wave and recieves , thus by doing so we calculate distance , now if we repeat same after a very short time and get same distance, then a led should light up. So, what i try is define 2 variables distance 1 and distance 2 and then add a if condition for 2 distances equal.But i want to add a certain range for those distances to be and confused about else statement too. How can i do this? Is there any other better to compare distances , please do suggest me. 
c-2-60	X	Array of Structures in C with MPI I am having a relatively a problem,I have defined struct and I want the array of structure has this information (processor name and the computation time for the processor) this is part of my code : I have no result if I print it in if (process_id == 0) !!! the out put is and just the time printed if I printting in if (process_id > 0) In fact I don't know how can I use Structure with MPI can anyone give me advice how can I generate array of structure that has processor name and his time? Thank you in advance for your time. At this line: you start using the array variable processor_name without defining it anywhere. You're missing something like all_info[i]. in front of it. Like you have a bit lower: Then, for storing a string your processor_name needs memory. A single char is just one byte (i.e. one letter). So let's assume these names are never longer than 255, you'd get: There are so many basic things wrong in your code and your questions seem to indicate that you lack basic understanding of C programming. Therefore my advice would be to take more time studying this language. Good luck and Merry Christmas! The error occurs here because you have not defined any type processor name. If I understand what you're trying to correctly, it seems like you were trying to access the attribute of the structures. For doing that, you might need to use the . operator. For that you might need to define an array instead of 
c-2-61	X	ContactManagerSystem not doing anything Ok so i have to write a function for this assignmnet and the ContactManagerSystem has to do ""¢ ContactManagerSystem does not return a value and has no parameters. "¢ This function is the heart of the application and will run the whole program. "¢ This function starts by showing the menu for the system and receives the user's selection "¢ If the user enters 1, it displays: For selections between 1 and 6, the application should pause and then return to displaying the menu. "¢ If the user enters 0, prompt to exit the application. Display the following: Exit the program? (Y)es/(N)o: < Wait for the user to enter "Y"?, "?y"?, "N"? or "n"? (for Yes or No). If the user replies Yes ("Y"?,"?y"?), it will end the program displaying the following message: Contact Management System: terminated< (followed by a newline) Otherwise, if the user entered No ("N"?,"?n"?), the application continues to display the menu." Ill show a picture of my code and the output it gives, please help me figure out whats wrong with it.My code Outout 
c-2-62	X	Memory not released properly when trying to delete node from linked list I am trying to delete a node from a linked list while using mutexes. For some reason this works properly without mutexes, but if i add locks, it still keeps some data from the deleted node. Can anyone please advice? Here is my code: 
c-2-63	X	my makefile cannot compile the C program I have a makefile When I run it, I get an error: Could you help to find mistake? 
c-2-64	X	OpenGL GLSL Atlas Information I have a lot of atlas-related information that I would want to take care off on the GPU side of things, that means I have to send the atlas information to the GPU, I set it up in a way so that all the atlases are allocated in a big chunk of memory called a super-atlas. I'd like to send that to the shaders using the most optimal way. I thought of a one-channel texture where the few first pixels are offsets to each atlas. But I found out that there are numerous other ways to do so in OpenGL 3.3. So what is the best way to do so? 
c-2-65	X	Is fgetpos/fsetpos any faster than fseek? I know fgetpos/fsetpos are used for returning to a file position. But if I accessed that position with fseek to begin with, is it more efficient to use fgetpos/fsetpos to return later, or just the same fseek again? fsetpos is the same as fseek, it's just a different public interface for the exact same kernel syscall. Is fgetpos/fsetpos any faster than fseek? For general file positioning, fseek()/ftell() are limited to files sizes about LONG_MAX. fsetpos()/fgetpos() are designed to handle the file system's file sizes. For large files, fseek()/ftell() are not an option. @Thomas Padron-McCarthy When coding C99 onward, robust code uses fsetpos()/fgetpos() in lieu of a minor optimization that may of may not be present using the more limited fseek()/ftell(). 
c-2-66	X	C - how to use strcpy for a 2 dimensional array? I'm trying to build a 2 dimensional array by using str.cpy, but the program fails. The code receives 4 arrays add copies their content to their matching arrays. Well clearly the error is using strcpy wrongly. The correct way would be Also in the loop it should be Note that the idiomatic C loop is for (int i = 0; i < MAX; i++), using < and not <=. The signature of the strcpy function is Earlier you passed in place of s1 a char instead of char*. You must have got some warning (if enabled). If not then turn all compiler flags -Wall -Werror. But if you are initially checking an uninitilized value with \0. This will higly unlikely will turn out to be false. There is no gurantee that the char array which doesn't contain strings will be initialized with 0 automatically. So make sure you have initialized the char arrays in the callee function like this The loop is from 0 to MAX_STUDENTS. You are invoking an undefined behavior looping on array index out of bound if MAX_STUDENTS is greater than or equal to 50. Same goes for MAX_COURSES. More clearly the looping would be for (set = 0; set < (50); set++). Again there will be a lot better way to deal with it if you put the initialization and copy part seperate. Otherwise this will be uneasy to maintain. Seeing your use courses it is obvious that you want to declare it like this same goes for the grades array. Here you were trying to copy a string into into a 2d array. Compiler would complain about type incompatibility. Also in the function you didn't return anything meaningful. The correct way would be to return the index value on which new name or information is added. Here you are copying content of dynGrades and dynCourses to the array. So they will all contain the same values. Is this what you want? Because then what's the use of keeping 5 seperate char arrays - one could serve the purpose pretty well. 
c-2-67	X	C input with enter I have to write program in witch user inputs few lines of text, the first process reads those lanes, and then send them to 2nd process which counts number of characters in every lane. Heres my problem: how can I implement that input to easy share it through pipe? 
c-2-68	X	C: not able to open message queue I'm working on OpenSuse 42.3 Leap. This is my first touch with Unix message queues and I have some basic trouble with simple opening a new queue. My original issue was I wasn't able to open two queues but after few tries I got the problem reduced to this strange behaviour: If I compile and run this it works great with standard output: The queue is closed correctly and I can rerun it with no error. But if I uncomment the line it obviously still correctly compiles but when run it outputs If instead of simple 'Hello world! I try to print: then instead of Invalid argument the error is produced. Any idea why this simple printf crashes the queue opening? From the mq_open manual page: If O_CREAT is specified in oflag, then two additional arguments must be supplied. [...] You don't supply them, so you have undefined behaviour. What seems to happen is that the missing arguments are taken from somewhere in memory where they would have been, and what happens to be there is different depending on what your program did just before. 
c-2-69	X	Trying to Assign Pointer out of a struct to a two-dimensional array have an assignment where I should use the following struct: Now I have to assign that pointer to the following two-dimensional array of unsigned chars: Which I have tried doing like so: Variations of that newNatset.bits which I have tried include: However, the compiler either returns "Assignment from incompatible pointer type" or "Initialization from incompatible pointer type". How can I assign the bits pointer to this array correctly? You are trying to multiply newNatset.bits with the address of bArrayRoll, this is undefined behavior. This one here is trying to assign unsigned char (*)[byteNum] to unsigned char* which is again something about which compiler complained. Types are incompatible clearly. Correct one would be (correct one as per the compiler) wouldn't it have to be: newNatset.bits = bArrayRoll[0][0]? This is once again a type incompatible assignment. You are assigning unsigned char to unsigned char*. You can do this though, Trying to Assign Pointer out of a struct to a two-dimensional array? (The thing you wanted). Then you need to do this, but in the structure you have declared bits to be of type unsigned char* not of type unsigned char (*)[byteNum]. Well if you didn't understand what happened when we assigned in the last case and how did the types match - then here is the key idea. The 2d array decays into the pointer to the first element - which is a single dimensional array of byteNum unsigned characters. Now we are assigning it to p which is again 
c-2-70	X	What is the difference between PTHREAD_PRIO_INHERIT and PTHREAD_PRIO_PROTECT? In the following function: You can define the protocol for a mutex attribute. Following protocols are available: PTHREAD_PRIO_NONE PTHREAD_PRIO_INHERIT PTHREAD_PRIO_PROTECT I know when PTHREAD_PRIO_INHERIT is selected, the task which holds the lock get the highest priority of all tasks(process(if shared between processes) or thread) which you are blocking. This prevents against priority inversion. But PTHREAD_PRIO_PROTECT seems to do the same. So my question is, what is the difference between both protocols ? See the specification in POSIX. In short, the differences ares: With PTHREAD_PRIO_INHERIT, the thread holding the lock inherits the priority of the highest-priority thread currently contending for the lock (no elevated priority if no other threads are blocked trying to get the lock). With PTHREAD_PRIO_PROTECT, the thread holding the lock always runs with elevated priority determined not by other threads contending for the lock, but by a property of the lock (its priority ceiling) configured on a per-lock basis. You may also want to see the Wikipedia article on the topic to understand the motivations by which one or the other may be chosen. 
c-2-71	X	How to read a specific line from 2 text files I'd like to read specific lines from 2 files, shadow.txt which has 7 lines and is 570 bytes in size AND mytab2411.txt which has 212,129 lines and is 15,017,188 bytes in size. Below is the code that can only read specific lines from a single file (in this case, shadow.txt): How do I go about accepting mytab2411.txt without overflowing the buffer in this function or creating an identical function for this new file? How do I go about accepting mytab2411.txt without overflowing the buffer in this function or creating an identical function for this new file? have this kind of statement: f = fopen("shadow.txt", "rt"); in the calling function for reading each line from a file, use a function like: getline() then the code will not have to worry about how long the line in the file is. 
c-2-72	X	C Audio middleware libary for the Rasberypi Zero I want to code a lite game for the Raspberry Pi in C. There are some buttons connected to the pi and when you push one an audio File is played. Currently im struggling with the audio part, multiple audiofiles have to be played, mixed and looped with a short delay. I'm looking for a libary with does all this dirty audio stuff for me. What i have tried so far: Gstreamer: i have write a lite test application with a pipeline a 2 file sources and a sink. unfortunately it is not easy posible to independently seek audio sources in Gstreamer pipline. (see my posting on the Gstreamer mail list: http://gstreamer-devel.966125.n4.nabble.com/interdependently-seeking-of-multible-filesources-in-pipeline-td4685671.html). So GStreamer seems to be a death end for me. -lib Gorilla Audio: I really like that libary! it perfectly fits to my project. I have build a little test application that works on my X86 machine. unfortunately the lib depends on OpenAl with don't seems to work on the pi zero. (I alway get illegal instruction faults that i have traced back into the openAL lib, I have installed the libopenal-dev using apt-get. i have tried to investigate this problem and come to the conclusion: that i have installed a package for the armhf architecture but the pi zero need the armel architecture, with is not available) - this seems to me like a death end also? currenty im not sure what to do next. does sombody got Gorilla Audio/Open Al working on the pi zero? Are there any other good Audio libs(in the way of Gorilla Audio) out there? Start coding my own Audio lib seems to be a painful rocky road that i want to avoid :) any ideas ? Greets Richard 
c-2-73	X	MD5 different result in java then in C/C# After successfully porting the UPC KeyGen by Blasty from C to C# i was trying to do the same with java but i have the following problem. I am basically trying to hash the string "SAAP29038934" for example and i get "9861219141331562318913516593109149211141135" back from it when i print out the raw bytes using a for loop. Example Code h1 is a uint8_t array with 16 elements. The C# Code looks like this: The GetMd5Hash Function looks like this: This also gives the same raw bytes as the C Version. Now i am trying to implement it in Java but i do not get the "9861219141331562318913516593109149211141135" raw bytes but i do get "9861-3714-123-100-2589-121-9193109-107-45-115-121" as output. The code looks like this: h1 is also a byte[] array. My question is why I get different output for the same string "SAAP29038934" and why he first couple of bytes seem the same. Edit: Original Source code by Blasty can be found at https://haxx.in/upc_keys.c 
c-2-74	X	passing variables to a process from linux kernel I want to make a program that will gather information about the keystrokes of a user (keycode, press and release times) and will use them as a biometric for authenticating the user continuously. My approach is to gather the keystrokes using a kernel module (because you can't just kill a kernel module), than the kernel module will send the information to another process that will analyze the data gathered by the kernel module, it will save it to a database and will return an answer to the kernel (the user is authenticated or not) and the kernel will lock the computer if the user is not authenticated. the whole module will not be distributed. my questions are: 1. How can I call a process from the kernel and also send him the data? 2. how can I return a message to the kernel from the process? I want to make a program that will gather information about the keystrokes of a user That should go in practice into your display server, which you did not mention (Xorg, Wayland, MIR, ...?). Details matter a big lot! My approach is to gather the keystrokes using a kernel module I strongly believe this is a wrong approach, you don't need any kernel module. I want to make a program that gathers data about the user keystrokes Then use ordinary Unix machinery. The keyboard is some character device (and you could have several keyboards, or none, or some virtual one...) and you could read(2) from it. If you want to code a keylogger, please tell that explicitly. (be aware that a keylogger or any other cyberspying activity can be illegal when used without consent and without permission; in most countries, that could send you to jail: in France, Article 323-1 du Code PÃ©nal punishes that by at least 2 years of jail; and most other countries have similar laws) the kernel module will send the information to another process [....] it will save it to a database This is practically very difficult to get (and you look confused). Databases are in user-land (e.g. some RDBMS like PostGresSQL, or some library accessing files like sqlite). Notice that a kernel driver cannot (easily and reliably) even access to files. All application programs (and most daemons & servers) on Linux are started with execve(2) (e.g. by some unix shell process, or by some daemon, etc...), and I see no reason for you to make an exception. However, some programs (mostly init, but also a few others, e.g. /sbin/hotplug) are started by the kernel, but this is exceptional (and should be avoided, and you don't need that). How can I call a process from the kernel You should not do that. I see no reason for your program to avoid being started by execve from some other process (perhaps your init, e.g. systemd). and also send him the data? Your process, as all other processes, is interacting with the kernel thru system calls (listed in syscalls(2)). So your application program could use read(2), write(2), poll(2) etc.. Be aware of netlink(7). how can I return a message to the kernel from the process? You don't. Use system calls, initiated by application code. the kernel will lock the computer if the user is not authenticated. This does not have any sense. Screen locking is a GUI artefact (so is not done by kernel code, but by ad-hoc daemon processes). Of course some processes do continue to run when locking is enabled. And many processes are daemons or servers which don't belong to "the" user (and continue to run when "the computer is locked"). At heart, Linux & POSIX is a multi-user and multi-tasking operating system. Even on a desktop Linux system used by a single physical person, you have dozens of users (i.e. uid-s many of them specialized to a particular feature, look into your /etc/passwd file, see passwd(5)) and more than a hundred processes (each having its pid), use top(1) or ps(1) as ps auxw to list them. I believe you have the wrong approach. Take first several days or weeks to understand more about Linux from the application point of view. So read some book about Linux programming, e.g. ALP or something newer. Read also something like: Operating Systems: Three Easy Pieces Be aware that in practice, most Linux systems having a desktop environment are using some display server. So the (physical) keyboard is handled by the X11 or Wayland server. You need to read more about your display server (with X11, things like EWMH). Hence, you need to be much more specific. You are likely to need to interact with the display server, not the kernel directly. At last, a rule of thumb is to avoid bloating your kernel with extra and useless driver code. You very probably can do your thing in userland entirely. So, spend a week or more reading about OSes & Linux before coding a single line of code. Avoid kernel modules, they will bite you, and you probably don't need them (but you might need to hack your display server or simply your window manager; of course details are different with X11 and with Wayland). Read also about multiseat Linux systems. At last, most Linux distributions are made of free software, whose source code you can study. So take time to look into the source code of relevant software for your (ill-defined) goals. Use also strace(1) to understand the system calls dynamically done by commands and processes. @basile-starynkevitch 's answer and his arguments notwithstanding there is an approach you can take that is perfectly correct and technically allowed by the linux kernel. Register a keyboard notifier call back function using the kernel call register_keyboard_notifier() in your kernel module. As a matter of fact it's designed for exactly this! Your notifier call back function will look something like: See https://www.kernel.org/doc/Documentation/input/notifier.txt for starters. 
c-2-75	X	Pointer to pointer to struct causing segfault using getaddrinfo() I'm using the getaddrinfo() function that requires a struct addrinfo ** to populate with a linked list of results, but I'm getting a segfault when I try the following code... I'm passing the struct addrinfo **results to getaddinfo() which expects that type, how is a segfault being caused? If I change my code slightly to this... my code works fine. Whats the difference? getaddrinfo function will assign a value to pointer to which the passed argument points to. In the first case you are directly passing the value of uninitialized local variable results so it does not really point anywhere and dereferencing it leads to undefined behavior (which manifests itself into crash). In the second case you are passing a pointer to results local variable, which will point at the first addrinfo structure if function succeeds. The results will eventually point to a linked list of struct addrinfos, and you can go through this list to get all the addresses that match what you passed in with the third parameter. Function will make a pointer point to a linked list and that's why the address of a pointer is expected. When you pass a struct addrinfo* variable's address, it can be made point to the list. Dereference the passed vaiable will be alright, because the dereferenced value is that of the variable results. (This explains why struct addrinfo *results; and &results works). Why the error occured ? It makes point to the linked list. In the source of getaddrinfo from here In your case you provided an uninitialized value. Dereferencing it is undefined behavior. In your case it resulted in segmentation fault. To clarify further this would also work But well the example above is just for the illustration purpose that it is not the double pointer passed was the issue rather initializayion was. Just pass &result which is much more clear and readable. 
c-2-76	X	generating game tree of coins in line game Hello I am doing an ai for modification of this game coins in line on leetcode (in this version you can take two coins from either side or both,but only two and you can do that at most every two turns). The problem is I am stuck on generating the game tree for minmax. What I tried to do,since I can't change the array I am using pointers i and j to know which ones are active but I cant revert and generate more then one final state the way it's implemented now. How can I generate tree and store it for use in minamx ? My code thus far looks like this 
c-2-77	X	GCC store all strings in .rodata In my x86-64 kernel, I am trying to map the .rodata ELF section as readonly. But all the string literals, are stored in a file-specific section, e.g. .rodata.str1.8. Are there any option for GCC to store all strings in .rodata instead, or can I concatenate the .rodata.str.x into .rodata using ld, objdump or anything else? Compiler flags: Linker flags: In your linker file, use *(.rodata*) 
c-2-78	X	Kernel driver receives the struct, but it's still null I have a kernel driver for which I'm trying to get ReadFile working. This is my driver dispatch function: This is the struct I'm using: And my user mode app: The driver is receiving the request, but the struct is null for some reason. I'm new to kernel drivers and C in general, so feel free to correct me on anything Based on a bit of back-and-forth, this seems to be because the driver IO is set to direct rather than buffered. There is no system buffer with direct, since it's literally not buffered, so that field is expected to be NULL. The receiving code needs to work through an MDL instead. See https://docs.microsoft.com/en-us/windows-hardware/drivers/kernel/using-mdls for a jumping-off point. 
c-2-79	X	How to write text file faster than fprintf in c? I have to save some graph data(array of structs) into text file. I made working program using fprintf but for extra points I need to be faster. I have spend couple hours googling if there is anything faster and try to use fwrite (but I wasn't able to fwrite as a text) I cannot really find any other functions etc. This is my write function using fprintf: I would write a small function say print_graph(int int int) and call write directly in it or something like this with my_putchar being a write call I would try setting a write buffer on the stream, and experimenting with different sizes of buffer (e.g. 1K, 2K, 4K, 8K and so on). Notice that by default your file is already using a buffer of BUFSIZ value, and it might be already enough. The output file f is born with the default BUFSIZ cache, so it might benefit from a larger fully buffered write cache. Of course this assumes that you're writing to a relatively slow medium and that the time spent saving is relevant; otherwise, whatever is slowing you down is not here, and therefore increasing save performances won't help you appreciably. There are instrumentations like prof and gprof that can help you determine where your program is spending the most time. One, much more awkward, possibility is merging Kiwi's answer with a buffered write call to avoid the code in printf that verifies which format to use, since you already know this, and to use as few I/O calls as possible (even just one if BUFFERSIZE is larger than your destination file's length). You need now to flush the buffer before close: UPDATE By declaring the my_putchar function as inline and with a 4K buffer, the above code (modified with a mock of graph reading from an array of random integers) is around 6x faster than fprintf on About 2x of that seems to come from buffering. Andrew Henle made me notice an error in my code: I was comparing results to a baseline of unbuffered output, but fopen uses by default a BUFSIZ value and on my system BUFSIZ is 8192. So basically I've "discovered" just that: there is no advantage on a 8K buffer, 4K is enough my original suggestion of using _IOFBF is utterly worthless as the system already does it for you. This in turn means that Kiwi's answer is the most correct, for - as Andrew pointed out - avoids printf's checks and conversions. Also, the overall increase (google Amdahl's Law) depends on what fraction of processing time goes into saving. Clearly if one hour of elaboration requires one second of saving, doubling saving speed saves you half a second; while increasing elaboration speed by 1% saves you 36 seconds, or 72 times more. My own sample code was designed to be completely save-oriented with very large graphs; in this situation, any small improvement in writing speed reaps potentially huge rewards, which might be unrealistic in the real-world case. Also (in answer to a comment), while using a small enough buffer will slow saving, it is not at all certain that using a larger buffer will benefit. Say that the whole graph generates in its entirety 1.2Kb of output; then of course any buffer value above 1.2Kb will yield no improvements. Actually, allocating more memory might negatively impact performances. I had to be 1.3x faster than fprintf, here is code that worked for me. I have to say that I had to submit it multiple times, sometimes I passed only 1 out of 5 tests with the same code. In conclusion, it is faster than fprintf but not reliably 1.3times faster.. 
c-2-80	X	Mbed using nucleo-F429ZI using push-switches to swap between calendar and Sensor data I am trying to use push switches to swap between showing calendar and sensor data on the LCD screen (in my code below). In other words, if I press push-switch 1 it should display calendar on the LCD screen and if I press push-switch 2 it should clear the screen then display the sensor data. I have tried all means to make this work but I couldn't. 
c-2-81	X	How to change Basys mx3 timer from hex to dec i am using Basys mx3, and using the SSDDEMO which function as timer in Hex, I am trying to change the timer to decimal, with no success.. how do i do that :)? many thanks, this is the link to ssddemo: https://github.com/Digilent/Basys-MX3-library/blob/master/Demos/SSDDemo.X/ssd.c In the given library, SSD_WriteDigitsGrouped() displays the four hex digits of the val argument. By first converting your integer to binary-coded decimal (BCD) format where each hex nibble represents a decimal digit value 0 to 9, you can display decimal values. This can easily be done with a wrapper for SSD_WriteDigitsGrouped() that does the conversion. Implement the following function, and call it in place of SSD_WriteDigitsGrouped(): 
c-2-82	X	how can i organize my array with pointers, without using [] operator I need to organize my array to find the median number. I can't use _[] operator in my question and I can't see why my code doesn't work You got the idea but didn't use it correctly. You are comparing an address with an int variable. You don't want that. Changing a bit would yield, Now ask is it logically right? No. The algorithm is still wrong. It should be With this code you will organize the array correctly. Also if you are using gcc to compile the program add -Wall -Werror that will show you all the warnings. 
c-2-83	X	Can we find if 0 occurs odd number of times in an array using bit manipulation I know that, XORing all elements of an integer array which contains all of its elements except 1 element occuring even number of times gives the number that occurs odd number of times. Example { 1, 1, 2, 2, 3 } 1 ^ 1 ^ 2 ^ 2 ^ 3 = 3; ^ is XOR What if the number occuring odd number of times is 0? { 1, 1, 2, 2, 0 } How to confirm that 0 is occuring odd number of times PS : Prefer the answer code to be in C/C++ Let's call N, the number of elements in your array: If (N is even) AND (XORing all elements ==0) -> All the elements occur even number of times if (N is odd) AND (XORing all elements ==0) -> You single element is zero. This is how to check if an integer is even or odd in C / C++ 
c-2-84	X	how to access to Beaglebone black Led using specific virtual address, in a bare metal code? I am working on bare metal code. I am trying to access led in beaglebone black (ARMv7) using a virtual address, by configuring the mmu. After going through any documents. I found , ttbr0 will contain the translational table base address. translational table will contain the page table entries. I am confused looking at various docs and sample code of ptes. How to map it to a specific virtual address range. For example:- My gpio address is 0x4804C134, and i want to access using virtual address 0x002xxxx. how do i map it ? what should be the pte for this ? 
c-2-85	X	C - address of matrix as an argument in function I have this header: declaration in the main: this is also part of my main: my printMat function in the main: and the read_mat function (in another file): My purpose is to send an address of my matrix from array: mats, with array of float numbers, insert them, and print the matrix with another function. I have difficulties in sending the address. The read_mat function does "work", but with a copy of matrix(in the scope of the function), then obviously prints matrix with only zeros. I don't understand how to write the right types of arguments with pointers in declaration of function. Any other combination of * gives error. THANKS I guess few of the type information would help you. Here by saying this You are basically declaring And then type of m[0] is nothing but float [SIZE][SIZE] or matrix. So when I pass it's address to a function it would be You would declare and use it like this 
c-2-86	X	C program printing garbage values I am trying to create an array and assign values to it. While I am able to assign values correctly, I am unable to retrieve those values and I have no idea why. Here is a part of the code snippet. The output of the program is Why is my program able to accept values correctly, but is printing out garbage values when I try to retrieve them later? The thing is that you don't reset your arr pointer. Thus in your second loop you actually print the values after the initial array. You need to create a variable to traverse your array. And then use it to traverse the array. And again before the second loop. Moreover, do not cast the return value of a malloc function call (even when you are casting it to a void pointer which is the actual return type of malloc). EDIT: you actually don't change the value of arr. My bad. Turn warnings on. (arr+i) is not defined (you cannot add to a void pointer and you do the cast only after this addition). You see undefined behavior. You further allocate things the size of a pointer but treat it as int (more undefined behavior). Why not write: First of all, the thing with casting malloc to void and using sizeof void is totally pointeless. Assuming initial[]is another array, the fix would be: That part is already wrong, but would on most 32 or 64 bit compilers still work: sizeof(void *). Only because this this at least the size of an int on these platforms though. This is the actual problem. This did not access the next integer, it accessed the next address addressable by a void pointer, which is typically a single byte. Accessing the next integer would had been equivalent to this: Or easier to read: Remember, incrementing a pointer by an offset doesn't add to the raw memory address, but it depends on the pointer type. The point here is the arithmetic of pointers. When we're adding a value by 1, it wouldn't be the same for different type pointers. So let's check an example: In your example we know we're working with integers, so we need to tell the compiler to convert the generic pointer to the appropriate type before we do any operations with. Try to execute the following code to understand what I'm gonna talking about: I found some resources to help: https://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html https://www.viva64.com/en/t/0005/ 
c-2-87	X	Why I am facing error on the code? :) dictionary.c, dictionary.h, and Makefile exist :) speller compiles :( handles most basic words properly valgrind tests failed; rerun with --log for more information. :( handles min length (1-char) words valgrind tests failed; rerun with --log for more information. :( handles max length (45-char) words valgrind tests failed; rerun with --log for more information. :( handles words with apostrophes properly valgrind tests failed; rerun with --log for more information. :( spell-checking is case-insensitive valgrind tests failed; rerun with --log for more information. :( handles substrings properly valgrind tests failed; rerun with --log for more information. 
c-2-88	X	strlen is giving me a size too big So for some reason, strlen on the string that im getting from this function is giving me a 39 when it should be a 36 in size...here's the function that involves this: I've printed out the i variable in my dump function and it gives me 36, also the stringLength ive printed and its 35, and i've allocated it +1 so not a problem. However, again strlen is reading 3 more. I've tried printing them out but didnt get anything just a strange character. Anyone know the reason? I've tried printing them both out side by side and comparing but I don't see a difference... EDIT: Posting the main function and the constructors for tNode and buffer.. EDIT: including typedef for TB - typedef struct textbuffer *TB; 
c-2-89	X	Initialize only one of the nested structs in C Say there are a struct 'Contact' which has two different structures in it. Now, I'm going to initialize all two nested structures(Name, Numbers) only by Contact variable in int main(). Now, I'd like to initialize(remove) all the name of contact[0], but I'd like to KEEP numbers of contact[0]. This is the thing that I can't figure out. I can initialize each strings one by one, but I wanted to make every members in contact.name at one go. I can initialize like this. but if there are hundreds of members in Name construct, I can't do that like this way. For example, I tried this. Both occurs compile error. If I'd like to initialize ALL of the nested structures, I could use memset. But here I need to initialize only contact.name, not the contact.numbers. Please help me. You mix initialization with assignment. This is initialization: It is the combination of declaring a variable and giving it an initial value. This is assignment: It assigns a new value to a variable that has already been declared. With initialization of a structure you can specify the value of each member of the struct. With assignment you can only assign a value to one member at a time. See also the link provided by David, C11 Standard (draft n1570) - 6.7.9 Initialization Specifically Note 19 
c-2-90	X	interrupt handling in device driver & poll I'm going thorough some code that does roughly the following: Kernel driver handles an interrupt. There is 1 interrupt line, so when an interrupt happens, the handles read a 32-bit register which tells what is the reason for this interrupt. For each bit that is set it calls ack_irq() to clear the interrupt, and write the interrupt cause to a buffer in the driver for further read(). Next, it calls wake_up_interruptible(), to wake up a User-space process that is sleeping on select(). The corresponding poll() function does poll_wait(). Once select returns, the User-Space read() from the driver. While I understand the basic operation of only 1 bit, what will happen in the following case: Interrupt happens, and 1 bit is set. Handler calls wake_up_interruptible(). poll() returns. User space wakes up, start to read(). NOW, another interrupt happens -> kernel handles the interrupt and calls wake_up_interruptible(), but now no one is not waiting for this event. Does this means that the second interrupt will be missed? If so, what is the way to overcome this? The task of the interrupt handler is to handle the interrupt as fast as possible. To communicate with the rest of the system, the ISR uses a (circular) buffer in which it places your cause. It does this while in an interrupt disabled state. Once the interrupt has been serviced, the system continues. If the user process now wants to check the circular buffer for new events, it needs exclusive accesss to the buffer. Thereto it must disable interrupts (with a higher priority than the ISR). It disables interrupts, gets the next element of the buffer, updates buffer pointers or indexes and re-enables interrupts. Would a new interrupt have come in, then it will not have been handled until the user process has re-enabled interrupts (the IRQ line stays high, the chips registers have not been read). Needless to say that this buffer access must also be as fast as possible (as little instructions as possible). Upon re-enabling interrupts the new, pending interrupt will be serviced. Following getting this next item form the buffer, it hands it to the functional user process. Would there have been no items in the buffer, it will sleep. When an item has arrived, it will be woken-up, disables interrupts, gets the item, re-enables interrupts and returns to the user process. In this way, no interrupts can be missed. 
c-2-91	X	OpenGL Hooking -- Rendering to an arbitrarily-sized FBO So I'm trying to make an OpenGL application render at a higher resolution than it normally would. I've already created a shared library that hooks most of the relevant GLX/OpenGL functions. Here's my current approach (at a high-level): This approach doesn't seem to work for (most) applications. I suspect that is because some applications perform texture lookups (for screen-space operations) by dividing glFragCoord.xy by a uniform that represents their screen resolution (to convert from screen space to texture coordinates). If resizing the output isn't possible, I wonder if it is possible to obtain the contents drawn onto the default framebuffer (i.e both the color and the depth buffer) without using glReadPixels. Ideally there would be a way to access this data in the form of a texture (so it's already on the GPU). I've heard things about Pixel Buffer Objects -- would using one of these prevent a pipeline stall? 
c-2-92	X	The Code exits after the input and output statements After printing the 2nd printf the code exit and says Run Failed and says exit on level 2 ( whatever the input was ) You need to use dynamic memory allocation, malloc method. The matrix n_m_matrix dimension is dynamically decided based on user input. Allocate memory to n_m_matrix using malloc In for loop correct logical error test>testcase to test<testcase Put below code out of for loop printf("Enter the lines and length of the test cases "); scanf("%d%d",&n_lines,&m_length); You need to move the declaration of n_m_matrix into the loop so that it's after you input the variables that hold the dimensions. As others mentioned, you also have a typo in test > testcases, it should be <. And you should read an extra character after entering the dimensions, to read the newline. Otherwise it will leave the newline after the dimensions in the input buffer, and this will be read as the first %c input when reading the contents. You might also consider using fgets() to read each line, instead of doing it character by character. The way you've written it, if there are newlines at the end of each line, they will be inserted into the array. It's not clear whether that's wanted. If it is, make sure you include them in the line length input. To clear confusion among the serveral problem the first one which invokes Undefined behavior in the code is, using uninitialized variable as VLA's size. Also the for loop logic is wrong and character input might create some problem the way it is handled. (when entered with \n). Correct code would be (considering that you don't want the whitespaces inputted into the array. Because if you do then there are other better choices like fgets etc). Here if you need much larger array sizes than this go for dynamic memory allocation. That will satisfy larger memory requirement in array. 
c-2-93	X	What is the alignment of a packed structure in C? Take the following struct: C would add 7 bytes of padding between c and l, making the size of the struct 16 and the alignment of the struct 8. If I told the compiler to pack the struct, how is the alignment evaluated? Does it just give up and make the alignment 1 byte? EDIT: This question is not a duplicate of Struct Padding and Packing. I am asking how the alignment of a packed struct is evaluated. Not how padding is done or how the alignment of a regular struct is evaluated. If the above struct is padded, it has a size of 16 and an alignment of 8--the alignment of its largest member (the long). If it is packed, it has a size of 9 bytes and an alignment of ? bytes. 
c-2-94	X	C structures programming -segmentation fault Create a structure called Student. Write a program to get the details of n students and to display their details, sorted in ascending order based on name. I wrote the following code, but my compiler is always giving the issue of segmentation fault . Any ways i can resolve this issue? 
c-2-95	X	getchar() working in C getchar() inside while loop takes input after printing whole string. Can anyone explain how getchar() and putchar() works? I am including following code snippet and output. Also unable to understand behavior of this code Output The int getchar(void) function reads the next available character from the screen and returns it as an integer. This function reads only single character at a time. You can use this method in the loop in case you want to read more than one character from the screen. The int putchar(int c) function puts the passed character on the screen and returns the same character. This function puts only single character at a time. You can use this method in the loop in case you want to display more than one character on the screen. Check the following example âˆ’ When the above code is compiled and executed, it waits for you to input some text. When you enter a text and press enter, then the program proceeds and reads only a single character and displays it as follows âˆ’ reference : https://www.tutorialspoint.com/cprogramming/c_input_output.htm getchar is eventually being handled through to the console input management routines. These routines, in a default config (no ioctl or equivalent calls), will read and echo the entire line before returning the string to the program for processing. Once returned, getchar will be prepared to process the entire line before it goes back to the console input routines. 
c-2-96	X	Simple C program not showing output in eclipse A few days back I installed Eclipse ide and also the CDT plugin therein for C and C++ development. Also made the necessary settings. Also tried a simple C program of adding two integers. Surprisingly, no output was shown in the terminal, but when the program was terminated it showed a wrong output of 0. The program was this: This same program showed the correct output when it was ran using the command prompt: Have I made any mistake in the code? Can anyone suggest me what do I need to do to run it in Wclipse? 
c-2-97	X	Multhithread old legacy applications in modern CPUs I was explaining why volatile keyword is necessary to accessing a shared memory structure by different threads. My argument is suppose that CPU have two cores and two local caches inside them. Suppose that one thread is running in one core and other thread is running in next core. Then when 1st thread is writing that memory , and 2nd thread is reading it, the up-to date version would not be visible to the 2nd thread due to it's local cache yet not updated. But my friend come up with an argument, he argue what's happen before the 'volatile' keyword , the old multi-threaded application binaries brought and run in a modern processor, will they fail ? For a example a old 32-bit application brought back and run in multi-core CPU in windows 7? A application that written in era where CPU cores were not introduced so only single cache is there? Is my friends argument is correct. Or can it fail ? What is the time-frame that 'volatile' keyword was introduced to C/C++? As for your thinking in your first paragraph. Any program that uses multiple threads will use a mutex to only allow one thread to change a piece of memory at a time. The volatile keyword is usually not needed. It is used when something outside of the control of the program you are compiling might be messing with stuff you have in memory. If you run an old application on your computer, it will only use one processor, so you're never going to run into any issues. When used, the volatile keyword tells the compiler to be careful about how it optimizes the code. Not optimizing certain parts of the code is not going to break anything. For very tight loops a mutex might not be enough. I have seen code where the loop was such that the compiler never re-loaded the test variable, with or without a mutex (and yes, I now know that testing a mutex in such a loop is poor design anyway). If a mutex was present in that example it would dump the current register value to the stack and re-load from that after the mutex was acquired rather than re-loading from the original variable's location. In that case using volatile forced the re-load from the correct address. Without a mutex the loop was tight enough there wasn't any register spill and so without volatile there wasn't any re-load at all. 
c-2-98	X	Using the pow() function with integers in C I have the following code: The output is 99. But it should be 100. This incident happens when it takes n=3, 5 or 8. Why? Pow is a double function, not an integer. As such, it has small rounding errors, and probably calculates 99.999999996375 or so. When you assign it to an int, you lose all data behind the decimal point. Use doubles for your values, and print doubles ("?%lf"?), and it will work. 
c-2-99	X	ouput infinite character 'p' when using fscanf in C I made a program to count number in input.txt: input.txt main.c And the result is infinite character 'p' ??? I have figured out the problem. Each time I open my Project Test.dev in DEVC++ ( both main.c and text.txt are in Test.dev ) . When I compiling, DEVC++ run Test.exe (?) and it always output infinite 'p' like that. This works: Please note the following adjustments I made to your code. You did not do any error checking to see if "input.txt" exists or not. You should not write code, even for small programs, that assumes things like that. This program now prints an error message and returns 1 to the shell, if the input file doesn't exist. while (!feof(fptr)) is bad practice, and often doesn't work. To check if there is remaining data in the file, use the scanf() statement itself as the loop conditional. I made it a for loop for ease and efficiency. You did not perform fclose() on your file pointer. This is absolutely necessary, as you don't want a file pointer floating around in memory, and you want your system/shell to know that file is no longer in use. int main() should always return 0 on success. If you do it this way, I can think of no reason your compiler or binary would just print "pppppp" like that. If it continues doing that, there is something wrong with your compiler or work space. the following proposed code: cleans up after itself, in the current scenario by calling fclose() on the open file properly checks for errors when calling: fopen() and fscanf() properly uses the returned value from fscanf() for loop control documents why each header file is included ends the printf() format string with '\n' so the data is immediately passed to the terminal, rather than waiting for the program to exit. And now the proposed code: 
c-2-100	X	Reading words from a file and encrypting each of them line by line in C I am fairly new to the C programming language. I would like to seek guidance in encrypting words from a text file and displaying it. Here's what I have done so far. I would like to apologise in advance for the formatting as I'm rather new to stack-overflow. File-reader1.c is a program I intend to use to read from the text file. File-reader1.c Small_Wordlist is a file containing a list of words I would like to encrypt. Small_wordlist My output is as follows : As you can see. Only one instance of hashing has been done for both SHA 512 and MD5. However, I would like all four words to be hashed with both schemes. Would you be so kind as to walk me through the steps I need to do to accomplish it ? Thank you in advance :) At the top of your file, you've read small_wordlist into buf. Then you call crypt, passing buf as the data. This is why the encryption only happens once: buf is being treated as one big string, and all the words are being encrypted together. In order to change this behavior, you'll need to break buf apart into its composite words. A simple way to do this is to read through the buffer, replacing all whitespace characters with null terminators and saving the index of the start of each word. Then call crypt once for each word encountered, passing buf + i where i is the index of the beginning of the word. There are, of course, other ways to break buf apart, but the important thing is that you'll need multiple calls to crypt to perform multiple encryptions. Chuckling... What happens if you add a { after and a } before You are simply reading and outputting buf and only encrypting the final word in the word-list :) If it is unclear, you look like you intended to do the following: To avoid including the trailing '\n' (read and included by fgets) in your encryption, I would recommend removing it before calling crypt using something similar to the following: (note: don't use magic numbers in your code, e.g. 1000 scattered throughout, instead, if you need a constant, #define one (or more)) look things over and let me know if you have further questions. 
c-3-1	X	C: Problems with Reversing a linked list I'm writing a program to create a linked list(a node), then reverse it. The linked list contains data and the address of the next. Firstly, I create the linked list. After that, i create a function to print these data. (i called it PrintNode) Finally, a function created to reverse the linked list. It's my full program. After debugging lots of times, I know that these functions are fine. However, after the reverse function, the address of the next node of the head variable is NULL. Can you explain and give me some pieces of advice? The one line change that will solve your problem will be (you visualized it a bit wrong). in place of Your code will blowup for single element linked list. Add a proper check for that in the function Reversing(). In case there is single element first->next will be NULL. But you wrote first->next->next which will be undefined behavior in case first->next is NULL. In earlier case you were just creating a linked list in Reversing() with the links unchanged but head was pointing to the last node. So the next of it was NULL. Modify Reversing such that new nodes are appended at the end. When going through the list, you need to save the next node ahead of time (node *next = current->next) 
c-3-2	X	Adding two single linked list in C while data from the first will end up only in odd indexes I'm looking for a help with writing a function in C. Function must be able to sum two linked lists while the elements from the first list must end up only in odd indexes of the 3rd list, and the elements of the 2nd list must end up only in even indexes (obviously :D). Thanks in advance. So the code looks like this: This is the example of a main function: Output - merged list should look like: 
c-3-3	X	How to use darknet in my own project? I have installed Darknet and I can run it from the command line for various tasks, for example: This will train a classifier CIFAR data using the network architecture specified in cfg/cifar_small.cfg. OK, but how to use Darknet in my own C project? For example, I would like to call load_network(), train_network(), save_weights(), and network_predict() declared in darknet.h from within my own code. Can I use Darknet as a static or a shared library for this? I don't see any instructions on how to do this on the website. So far the only method I have is creating my own source file in the style of the examples in the examples folder, and modifying darknet.h, darknet.c and Makefile to give myself an entrypoint I can call from the commandline similar to the classifier example I posted above. But this doesn't feel ideal because I'd like to have my own project structure. OK, it appears that the Makefile supports generating both a shared and a static library, and these are made by default when running the installation: Afterwards libdarknet.a and libdarknet.so appeared in my darknet directiory. So I could #include darknet.h in my own project, and then compile via: 
c-3-4	X	strstr always returning null So basically tb is just a data structure that has a linked list where each node is a string basically, and I'm trying to analyze them for substrings and then replace them with another string. Unfortunately strstr is not working for me as I've printed stuff inside the null check and it seems to be hitting null for each line and can't figure out why. tmp is properly set to str1 when doing the search. Can anyone help? If you see any other things wrong please point it out as well. CHEERS EDIT: so basically tb contains nodes that i call tNode.. shown in these structs: str1 is the string that im trying to find in the curr->line after progressing through each node, and str2 is the replacement string. 
c-3-5	X	Named Pipe Dropping Data in C Program Using fgets in Linux I'm trying to pull data from a named pipe in a C program (gcc -std=c99) using fgets. I created the pipe at the command line and I can see that it exists in the file system and is parked with a p when using "ls -la" and the rights are set for anyone to use. I am sending data to the pipe with a simple script: The loop my program is trying to read from this pipe is: My syslog shows the following when I run the script as written above : The data alyays seems to be properly aligned with a 'C' at the start of the line. If, in my script, I enable local terminal echo to the screen then I drop fewer lines. If I enable the sleep 0.00000000000001 I am able to read all of the data. I really need this to run a full speed and hate to slow things down with a sleep. Am I simply over running a buffer and if so can the buffer size be increased? I'm really stumped. BTW, I'm using fgets rather than fscanf as I will eventually need to add in fastcgi and fsastcgi seems lacks support for fscanf (note in this test I am using the standard io libs, I am not linking in fastcgi and I am not including "fcgi/include/fcgi_stdio.h" in this test so there is no overwriting of the default libs). Any direction to make this be reliable and efficient would be greatly appreciated. FIFOs are funny (peculiar) files. A reading process blocks on open until there is a writer; a writing process blocks on open until there is a reader. If there are no writers, the reader will get EOF; at the point, it must close the FIFO and reopen it to allow more writers. If there are no readers or writers, the content of the FIFO is discarded. In your shell script, you are repeatedly opening and closing the FIFO. You would do better to move the >> $myPipe onto the done line of the loop, so the FIFO is opened once, then all the messages written, and then the FIFO is closed. Your code is peculiar. This line is problematic: I see two problems. The less serious is that you have a null statement after the empty loop body. This doesn't do anything harmful except show experienced readers that you're not confident in your C code. The {} would be sufficient; it is an empty loop body. A semicolon on the next line in lieu of the {} would be conventional. The more serious problem is that if you ever enter the loop, you are going to stay in it indefinitely. Once myStream reports EOF (by returning NULL from fgets(), it will continue to do so indefinitely (unless you're on Linux and the input device is actually a terminal " which is a separate sore point with me). It seems that the code in the question was hacked after it was asked and the freopen() line at the top of the loop was commented out, and this 'fixed' the problem. This is explicable. When the FIFO was closed for reopening, the content was discarded. Better code would probably look more like this. It passes the pipe name directly to the function (avoid global variables when you can). The function only returns if it fails to open the FIFO. There's no obvious need or benefit to the function returning NULL (written 0 " it's OK; I do that too), so it is now a void function. The function declaration should be in a header file and not written inline in the code. On the whole, I'd move most of the variables much closer to their point of first use " only messages would stay outside the infinite loop. There would be a header to declare the various functions 
c-3-6	X	Pointer to struct doesn't work properly? This is my code and this is the text file i'm reading from The problem is that when the function readFile() ends, the values from totalSphere[1] are lost as you can see here but the values from totalSphere[0] are ok. Why is this happening? You got lost in levels of indirection, apparently. The array of Sphere objects that you allocated inside readFile is supposed to be accessed as (*totalSphere)[i]. E.g Your original version is incorrect. The (*totalSphere)[i] syntax applies inside readFile, since totalSphere is Sphere ** there. In main you will access the received array the "regular" way - as totalSphere[i]. the following proposed code: corrects the problems listed in the comments to the question pays attention to the parameter types for functions like: malloc() properly checks for errors corrects several logic errors cleanly compiles separates the struct definition from the typedef for that struct properly cleans up before exiting due to errors passes the allocated memory to free() to avoid a memory leak documents why each header file is being included And now the proposed code: 
c-3-7	X	Assembly code of a hello world program in C Here is a sample code of hello world program: This is a disassembly of object file I've got: In the printf function, we have two more function calls: __acrt_iob_func and _vfprintf_l. What exactly does the first function do? How do we have the _vprintf_l function in the object file? A detailed explanation would be appreciated. Compiled with: cl /TC main.cpp Disassembled with: dumpbin /disasm main.obj PS: I removed assembly code partly so that I can post the question. The compiler uses built-in function, mostly in linux by libc. This internal versions are built to work on multiple platforms and also there are some optimizations. You can have a look on the source code of libc if you query google. You could also trace down the functions with a debugger and see exactly what it is doing. To sum it up, it is up to your implementation of compiler and library. Hello world could also be done shorter by hand. __acrt_iob_func is the internal C runtime (CRT) function in Microsoft Visual C. [They] are used internally to implement the standard C and C++ libraries Speculative use of __acrt_iob_func The _acrt_iob_func is probably used to set up the basic I/O e.g. assigning stdin stdout and stderr and some stuff that's really not visible to the vprintf printf(3) is typically a wrapper function around the vprintf(3) which takes va_list as a parameter VS2015 and later versions now contain part of the code for printf in header files (previously it was just a library based function). For C / C++, it's not an issue, but in my case for what would otherwise be assembly only project, I now include a small C source file in the project that calls printf, which generates the needed code so the assembly code can call printf without all the other stuff related to the header included code. What exactly does the first function do? __local_stdio_printf_options returns a pointer to a static integer, which is used as an input for __stdio_common_vfprintf. How do we have the _vprintf_l function in the object file? This is because part of printf code is now included in a header file, where previously all of printf was included in the standard C library. This is a snippet of what is being included for the now local instance of printf. I didn't extrapolate the two defines, but the end result can be seen in the assembly code below. This snippet of the assembly output from VS2015 makes it a bit clearer what is going on. Again, keep in mind that all of this is internal to printf, and could change with a later version of Visual Studio. Here is the assembly output from a prior version of VS, where printf is just a library function (__imp_printf): 
c-3-8	X	Malloc'd memory cannot be accessed - GDB I'm trying to call a library function to test something while debugging with GDB. (dlinfo()) It takes a reference to an int and the function writes the result to that address. I tried calling malloc so I could pass a reference into the function, but when I try and see if malloc worked, I can never access the memory. Am I doing something wrong? Thanks in advance 
c-3-9	X	C: Getting first 5 bits lets say i have this variable: It binary values is: 11010001110100 I want to get the first 5 bits (11010001110100) I tried to do this: What I am doing wrong? If I do on paper It should be 00000000010100 11111 is just eleven-thousand-hundred-and-eleven. Which is 10101101100111 in binary. So in binary you're doing 11010001110100 & 10101101100111, which is in binary 10000001100100. 
c-3-10	X	Understanding the BIND exploit code for CVE-1999-0009 I am doing research into the vulnerability CVE-1999-0009, and I've downloaded the iquery.c file I found on SecurityFocus. The vulnerability in question is a buffer overflow vulnerability found when making inverse queries to resolve IP addresses into host names. When exploited, the attacker could get a shell remotely. I have been reading through the exploit code attached below, and I have gathered some understanding of each function, but I was wondering if someone could verify my understanding is correct so far. My C is rusty, and I believe my knowledge of python is only causing more confusion for me. What I believe is going on in each function is written below. Any help is greatly appreciated. My first assumption is that this would need to be uploaded to a vulnerable machine and run on their system. main: Code runs and takes in what I believe to be the IP addresses that I would wish to resolve. target_type: Chooses the system types it is looking for resolve: This finds out what the hostname is from the IP address given send packet: This would create a packet and send it, but because of the order of the code, I'm failing to see what this packet contains, seeing as the buffer overflow code doesn't seem to have been added to this packet yet. attack: This runs the exploit causing a buffer overflow that allows a shell to be opened. I understand my explanation probably isn't worth much, but I'm struggling to figure out the order each function is run in and which sections of the code are doing the important parts. The Code 
c-3-11	X	What does i = * ( long * ) &y; do? I saw following code here. I don't understand following line. Generally, we use * and & with pointer, but here both used with variable. So, what does it do here? It means the address of y (making it a pointer) cast to a long pointer, dereferenced and assigned to i. The line is taking a float, looking at the memory holding that float, reinterpreting that memory as memory holding a long, and getting that long. Basically, it's reinterpreting the bit-pattern of a floating point number as that of an integer, in order to mess around with its bits. Unfortunately, that code is also wrong. You are not allowed to dereference that casted pointer, for reasons described here. In C, the one-and-only way of reinterpreting a bit pattern is through memcpy. (Depending on C variant and implementation, going through a union may be acceptable as well.) First, a disclaimer: This is technically undefined behavior because it violates the strict aliasing rule, but most compilers will do the below, and I don't know what the standards situation was when this was first written. When you look at the expression, there are four main parts:( y is the float variable we want to convert. Simple enough. & is the usual address-of operator, so &y is a pointer to y. (long *) is a cast to a pointer to long, so (long *) &y is a pointer-to-long pointing to the same location in memory as y is at. There is no real long there, just a float, but if both float and long are 32 bits (like the code assumes), this will give you a pointer to a long with the same bit pattern as a float. Finally, * dereferences the pointer. Thus, the full expression, * ( long * ) &y;, gives you a long with same bit pattern as y. Usually, a long with the same bit pattern as a float would be useless, because they store numbers in completely different ways. However, it's easier to do bit manipulation to a long, and the program later converts it back to a `float. 
c-3-12	X	Change directory doesn't work in C. "cd" and "setenv" both fails. I get "No child processes" Why? I am trying to implement cd command for my shell in C. I read "how to" online, but all suggestions seems like failing. Can anyone help please? After running first if statement I am getting new = 0 and res = 0. So, no obvious errors there. Getcwd returns correct path: the path after I changed directory. perror("cd"); behaves weird. I run run_command in the loop so I can run multiple commands without exiting my shell. When I first time do "cd", perror returns "Success". Afterwards every time I "cd" it returns "No child processes". Finally, getcwd() in the else if statement always returns initial path. Even after I change it in the first statement. Thank you very much for your help. 
c-3-13	X	How do I change the array Input Order in C I need to input five numbers and then a positive or negative. The order will be changed like the number. For example, if three (3) is the number then: 1 2 3 4 5 6 7 8 9 10 will become: 4 5 6 7 8 9 10 1 2 3 Please do not use pointers. I have made the following code and would like to be able to improve on it. Can I use a mathematical formula using the modulus operator % ? If so, how would I be able to do it. Thanks, this is my code. Something like this. I did not compile; any small mistakes are for you. 
c-3-14	X	error while storing the value on the manual location using pointers on gcc o/p showing me is what!! *p = 56 but *(&a+2) = same as &a+2... For p = &a+1 it's giving me a stack smashing... On *(*(&a+2)) giving me the desired result 56... Can anyone explain to me what the exact reason behind this is? You mean p=a+2;, not p=&a+2;. The latter forms a pointer to the array a (with &a) and then tries to form a pointer to a non-existent other array (which would be a row in a multidimensional array if it existed). Pointers to arrays are rarely used, which helps people confuse arrays and the pointers into which they decay. is functionally equivalent to because adding two to &a adds sizeof(a)*2 to &a, and sizeof(a)*2 is equal to sizeof(a[0])*3*2. Dereferencing the resulting pointer evokes undefined behaviour because it's beyond the end of the array. gives Can anyone explain to me what the exact reason behind this is? The reasoning is that you are invoking undefined behavior, so your compiler and thus your program is allowed to do whatever the hell it wants. That is pretty much the definition of "undefined behavior": the standard doesn't say what the correct thing to do is, so the program can do anything. Just because *(*(&a+2)) gives you the right answer doesn't mean that &a+2 is valid code. There are plenty of cases where undefined behavior can result in a working program, but there's no guarantee that such a program will continue to work or even continue to compile as you make further changes. The undefined behavior, as several people have already pointed out, is from p = &a+2 which assigns an uninitialized address to an incompatible pointer. 
c-3-15	X	Output open array as a formal argument in DPI-C I have C code (predictor model) that can generate an array of variable length as its result. It is unknown before calling the C code what the size of this array is, and there is some amount of randomization involved (noise modelling) I need to call this C predictor model from SystemVerilog, and get back the output result array. As a newbie to DPI-C, I ran into 3 limitations: The results array on the SV side needs to be allocated prior to calling the C code. Since I do not know what the size will be, I stand the chance of overallocating or underallocating. I cannot pass an open array from C -> SV in an export function. An export function cannot be used for class methods(!) To work around this, I created a hacky juggling between the 2 interfaces and global variables/tasks. I have posted my solution and it works fine, but I would like to know if anyone has a more elegant solution than this. I especially do not like having to use global variables. SV: C: Any better solutions are welcome. You can't pass an open array from C code because C code doesn't know how to allocate such a data structure. I guess this is because it would be problematic if the array allocated in the C code doesn't match the type of the array on the SV side. For example, imagine you have a 100 element fixed size array defined on the SV side and you try to pass it a 10 element array from C. It's also probably difficult to specify a function on the C side that can allocate an SV array data structure. The size and layout doesn't only depend on the number of elements, but on the type of the element as well. It's possible to pass an already allocated array as an output argument, though. You have to know how many elements to pre-allocate, though. As @NominaAnimal suggested, you have to pass the number of elements you will receive from C via a separate function call: On the C side you can use svGetArrElemPtr1(...) to obtain a pointer to each element of the passed in result array and update it accordingly. You can do this because the type is int and the representations are identical in both languages: 
c-3-16	X	How can I get the offset and data from the text section of a shared libray? I build OpenSSL-1.0.2n with -g 386 shared option (to work with basic assembly version) to generate shared library libcrypto.so.1.0.0. Inside crypto/aes folder, aes-x86_64.s is generated and it has different global functions/labels. The total numbers of lines in aes-x86_64.s is 2535 and various labels are present at different place (or line number in .s file). AES_cbc_encrypt is global function declared at line number 776 and label AES_cbc_encrypt is at line number 781. local label .LAES_Te and .LAES_Td are at line number 1750 and 2140 respectively where long data are stored. I am able to access global label AES_cbc_encrypt of assembly file from another C program by linking with shared library. There must be a way to find the offset of this data section (local label .LAES_Te and .LAES_Td) from global label AES_cbc_encrypt so that the data can be used in encryption/decryption. I have following questions. 1. How to find the offset from global label AES_cbc_encrypt to local label .LAES_Te and .LAES_Td so that based on that offset I can access data from another C program ? 2. Is there any other way to access those data of assembly file from C program ? 3. Is there any way to find the location in memory where those data is loaded and access those memory location to access data ? I am using gcc-5.4 Linux Ubuntu 16.04 . Any help or link will be highly appreciated. Thanks in advance. EDIT 1: readelf -a aes-x86_64.o produces following output. EDIT 2: nm aes-x86_64.o produces following output. Edit 3: nm -a gives following output If you hard-code an offset based on this version of the library, it could break with a different version that has any changes in aes-x86_64.s. So you should add a .globl foo and foo: label to the .s at the position of the data you want to access, and declare it in C as extern uint32_t foo[]. Then the normal code-gen mechanisms for accessing static data from a shared library will kick in. (i.e. load the address from the GOT if necessary). Also, unless you compile with -fno-plt, &AES_cbc_encrypt will be the address of the PLT stub / wrapper, not the actual function in the library. If you only need it to work with a specific build of the library: Then yes I think with -fno-plt, taking the address of a function in the library will compile/assemble to a load from the GOT, so you get the actual address after dynamic linking. -fno-plt is essential for this to work. It might be fairly far away if it's in another section (.rodata instead of .text probably) so your simple scan of 768 * 4 bytes may not find the table, though. A better way to find the offset from a symbol you can use & on in C: Use a debugger: single-step into a function that uses the data, and find what address it's loading from (gdb's built-in disassembly should work). Or disassemble the binary and look at the little-endian rel32 offset in a RIP-relative load or LEA of the table address. (That offset won't be fixed-up at run-time). Look at the asm source to find an instruction that references the hidden symbol you want, then find that instruction in the disassembly. That will give you the distance in bytes from the end of that instruction to the table. You can probably see the distance from that instruction to a symbol you can take the address of in C (like you're doing with the function pointer). Also, the disassembler will fill in absolute addresses (relative to some arbitrary base) for load addresses, and for symbols / instructions, so you can subtract those. 
c-3-17	X	C Programming- Scanf not working. Tried adding space, doesnt work I tried adding space before %d, but still didn't work. Any solutions for a newb? From standard 7.21.6.2 under the conversion specifiers and their meanings: s Matches a sequence of non-white-space characters.286) If no l length modifier is present, the corresponding argument shall be a pointer to the initial element of a character array large enough to accept the sequence and a terminating null character, which will be added automatically. Well as an alternative to scanf you can try looking at fgets. So the answer will be scanf("%s",user); or more correct use would be scanf("%49s",user). To get a more elanorate idea of why you should consider fgets over scanf read through this discussion. Also there is no need to put space before %d format specifier because as per standard 7.21.6.2 Input white-space characters (as specified by the isspace function) are skipped, unless the specification includes a [, c, or n specifier. Apart from the change mentioned above check the return value of scanf. In your case if you have given wrong input then this would fail and you will get the error message. You can use %d specifier in scanf like this, no need to provide ' '. Also in Dev-cpp try to add compiler flags -Wall -Wextra that will show you warnings. Go to Tools -> Compiler Options Now in general tab under Adds the following command when compiler is called and -Wall -Wextraand pressOK`,=. Compile it. You will get some error like this - [Warning] format %c expects argument of type char *, but argument 2 has type char (*)[20] [-Wformat=]` &user denotes an pointer to an array of chars containing 20 char. But as mentioned above you have to pass char* as second argument to scanf. Your problems stem from this statement: The %c conversion specifier only reads a single character from the input stream, not a string. If you entered a username like jbode, only the 'j' character is read from the input stream - the remaining characters will be read by the next scanf (or other input) call. Unfortunately, that next scanf call is expecting a sequence of decimal digits due to the %d conversion specifier; 'b' is not a decimal digit, so you get a matching failure - option is not updated, 'b' is not removed from the input stream, and scanf returns a 0 to indicate that no successful conversion occurred. The right answer is to not use scanf to read the username at all, but to use fgets instead: If you really want to use scanf, though, the right approach would be: You do not need to use the & operator when reading a string into an array of char. The expression user will implicitly be converted ("decay") from type char [50] to char *, and the resulting pointer value will be the address of the first element of the array. 
c-3-18	X	Why does C outputs gibberish results when operation on an integer greater than 10 digits? The code given below works fine up-to 10 digits with (int data-type) , but for numbers exceeding 10 digits it failed , so i tried unsigned long long int. But now my output is fixed to 15 , idk why? Consider me very new to C , i have mediocre python background though! I am using gcc (Ubuntu 5.4.0-6ubuntu1~16.04.1) 5.4.0 20160609 You have used wrong format specifier. it would be scanf("%llu",&num); Using the wrong format specifer in scanf is undefined behavior. Apart from what is being mentioned, your length finding logic is wrong in that it will fail for single digit numbers and also for multidigit one. For 1 it will return number of digits 2 and similarly for other numbers. (like for 12 it will return 3). For larger numbers you will have options of opting an library (big number processing) or write one of as you need. I would scan the numbers like this if( scanf("%llu",&num) != 1) { /* error */}. More clearly check the return value of scanf. Here's another implementation. This fixes a few issues: Main return type must be int. unsigned int is more than sufficient as get_len() return type. unsigned int and unsigned are the same. Also unsigned long long int can be stripped of int. 
c-3-19	X	C - split the string "mv <from> <to>" using strtok by delimiter " /" I get an input with a constant formation. in example: char* str = "mv /Folder1/folder 2/f1 /Folder1/folder 3" I need to split it so that i'll end up with two separated string, str1 == /Folder1/folder 2/f1 str2 == /Folder1/folder 3 I have tried using strtok(str, " /") but it won't work. It ignores the space in the delimiter and only using "/". Any ideas? Thank you very much! Here is a brief explanation of strtok. When you pass " /" you are telling strtok to split on either a "/" or a " ". In fact, strtok will probably not easily suit your needs since it will not use a pair of chars to split, but will use each char to split. You'll then have to provide logic to reassemble split items that go together but have a space in them. You might be able to do so by looking for the empty token caused by having back to back split chars in " /". That would tell you that you are at the start of a new path string. However, that solution won't be very robust since someone could put in double spaces after mv and break it. Most tools require you to use outer delimiters such as quotes or use "\ " for the space that is part of the filename and path. The second string you pass to strtok isn't a pattern it searches for--it's a set of characters, and it searches for any one item in that set. In this case, we need to search for a pattern, so we can do the searching with (for one possibility) strstr: 
c-3-20	X	C - Program crashes with no errors/warnings when trying to read from file with fscanf I'm writing a bit of code to read some integers from a text file. While calling fscanf on that file the program crashes but I've no idea why since there aren't any warnings or errors, also print debugging doesn't help because the program counter reaches the end of the function. All the arguments for this function have been declared in main. int*n is the size of the array. the text file is: At the end of the function call I'm expecting: n : 6 arr: {1,2,3,4,5,6} x1x2: {0, 6} y1y2: {21, 279} The question here really is, why is this program crashing? What I don't really understand about reading files is the internal "counter" for fscanf which points to each character in the file. Does it reset after each call of fscanf or does it reset only when i call fclose? Ok so if I allocate the memory for each array before the function call it works, but then again I'd be able to read the size of the array inside the function. Thanks for your responses 
c-3-21	X	wrapping header contents vs #include statement with #ifdef __cplusplus extern "C" I'm using a C-library in my C++ code so I have to use #ifdef __cplusplus extern "C" Instead of modifying each C-header, I'd like to do it like this: Are there cases where this will fail? 
c-3-22	X	Bison multiple nonterminals with attributes I'm using bison and flex to create (somewhere in the future) an abstract syntaxt tree (AST). For now, I want to have only an arithmetic expression (with + for instance), something like expression->expression '+' expression | constant, but I want the expression to have two attributes: the code (that is a string with the value of the first element in the right hand side of the rule (RHS), a + and the value of the second expression). I created the following structure: which will hold both of them as strings (for now, I just want to print them). The tokens and items along with the grammar are defined in the following way: In flex, I set the value (intval) of the CONST to the element itself (so the val of 4 will be 4). When the second rule is applied, the program prints the value correctly. However, when the first one is applied (when the whole thing is printed), both expressions have the same val. (That 1 was added just to test something, it's not part of the plan) I can't figure out why exactly. If I change the expr to be of type int it works correctly. What your code is doing is not too dissimilar to the follow: both str1 and str2 are pointing at the same point in memory so you'll get the output "world world". You need to allocate memory for each string so they have their own place in memory. And then in the "expr '+' expr" pattern, you'd free each string and create new ones to pass up the parse chain. 
c-3-23	X	What does xdata section do? I have a simple hello world program and after i dumpbin it with /headers flag, i get this output: What exactly xdata section do and what it contains? No info on msdn. The repeated sections are for things like c++ templates, the compiler will instantiate a template in any translation unit that needs it and then the linker will pick one of those instantiations (usually the first encountered). Less common are compiler-specific features like Microsoft's __declspec(selectany) that allow a variable to be defined more than once and again the linker will simply pick one of those definitions and discard the rest. gcc's ld scripts will take all the .text* sections to create the final .text of the linked executable. You can examine those scripts to get an idea of how the linker creates an executable out of object files. 
c-3-24	X	getche in C programming I need help about using getche. The problem is that I want to use an int and on that int I want to use getche, but for example if I did: but the problem is that even if I will choose 3 in the choice1 the program will think I meant some random note so it will print me hello no matter what I put. Can someone help me in making my getch an int? (Not using getche is not an option I have to use it.) thanks First: You made an assignment instead of condition, change the "choice = 3" to "choice == 3" Second: check for the ASCII value of '0' and subtract it, so: '3' - '0' = 3 and so on Can I ask why you're limited to the non-standard (and unusual) getche()? Why is that the requirement of your project? You ought to use the standard C getc() to get your character. The reason your program is printing "hello" every time, is because you are not comparing your choice1 to the character "3". A single equals sign = is for assignment. You only use the single-equals to assign variables. To compare two values for equality, you use two equals signs ==. Your code would also be comparing the result of getche() to the actual value 3, and not what you want, which is the ASCII character '3'. Please make sure to specify the ASCII character '3' and not the value of 3 itself, which translates to a non-visible symbol. 
c-3-25	X	When should I use function like macros? I know about function like macros (I don't really know how to use them though) and I was curious, when is it appropriate to use these? When should you use these over a function? 
c-3-26	X	c how to union let you treat data as one byte array I'm reading some code I'm reading a tutorial, located here tutorial that says that union lets us treat the data as either separate fields or a single byte array. Could somebody explain to me how a union lets you treat the data as a single byte array. My understanding of unions is that they enable you to store different data types in the same memory location but only one member can contain a value at any given time. Don't know where you got the idea that only one member can contain a value at any given time, but it's wrong. Take this example: If you assign a value to a, if you examine the contents of b you'll find that each of the 4 array elements corresponds to the 4 bytes of the int that is a. If you change one of them, you'll indirectly change the value of a. The normal use of a union is to store (and retrieve) only one value at a time. C is somewhat of a medium-level language. It both supports the use of types with various features (integer, floating-point, pointers, arrays, structures, unions, bit fields, combinations of these, and so on) but also allows access to the bytes that represent types. In C, you can convert a pointer to an object to a pointer to a character type and use that pointer to inspect the bytes of an object. You are also allowed to store a value to one member of a union and then read the contents using another member. When you do this, the bytes in the union will be reinterpreted as if they represented a value in the type of the member being used. Serious problems can arise with your program if you do this incorrectly. Inspecting or reinterpreting the bytes of an object should be done only for special purposes. For example, special-purpose math library code targeted for specific hardware may need to manipulate the bytes of floating-point objects. Some code for input/output may need to package objects as streams of bytes that are communicated to other systems or may need to receive streams of bytes and reinterpret them as other objects. For normal use of a union, you should only read the last member written. 
c-3-27	X	How do I create an array with undefined length? (In C) I'm trying to create a program which randomly decides how many cards you have, then randomly allocates a value to each of those cards. I have managed to randomise the amount of cards, and I know how to randomise their values using an array and a for loop, but the problem is that this method only works when I manually choose a value for the number of elements in the array, but I want the number of elements to be the random amount of cards. How do I go about this? Here's my code so far to show what I mean. And yes, I'm aware the code probably could be done better but this is my first C assignment and I'm a complete beginner. Thanks :) I believe you will want to use malloc or calloc for that with a pointer. Just make sure you free your allocation when done: C allows you to declare variable sized array. If you are not interested in using functions like malloc or calloc you can simply use variable to declare array as I've done here : This program runs correctly without any error. So your problem is solved here itself without using malloc or calloc. But just make sure you declare your array after scanning or giving value to your variable which will represent the size of your array(here : x is the variable) and in your case I guess : player1_amount. But still if you want to use malloc then here it goes : Both the codes will give you same output. A little explanation ... Malloc will take input parameter as the amount of memory you wish to allocate to given variable(like 'array' in our case) in bytes and will output the pointer to that block of memory. Since here we are working with integer array the return type is cast as : (int *), had it been a character array we would type cast it as : (char *). 
c-3-28	X	STM32 - FreeRTOS xQueue receiving incomplete array I'm having trouble to implement xQueue in FreeRTOS v8. The board is based on STM32F4, and I'm trying to send data from ISR (Serial) to main Thread. The only problem is that not all data is received on the main Thread. I checked the buffer before send and it's complete. On the main Thread, no matter how much chars I send, I always receive the first 5 values of the buffer. The struct of the buffer (I've tried with a buffer of [10], and the result is the same): The creation of the queue: On SerialPort Receive Handler: On main Task: I've tried send from a Task to other Task and not using ISR, and the result is the same! EDIT: Explaining CDC_Receive_FS (uint8_t *Buf, uint32_t *Len) : If I send from PC the string "abcdefg", *Buf will be: And *Len will be a uint8_t with value 7 So, the for(int i =0;i<100;i++) is there just to make sure that all 100 positions of the SerialBufferRec.Buffer will be overwritten. If its minor than the length of the buffer received, copy the buffer received, otherwise fill with zero. It also helps to empty the last message that was in the array. The SerialBufferRec just before calling xQueueSendFromISR will be: The SerialBufferRecived on receive Task arrives like this ('f' and 'g' missing): ...Previous content removed as not relevant in light of new information in original post. EDIT: based on new content to OP, and depending on how the following function works: Based on the example at FreeRTOS regarding usage of xQueueSendFromISR, it appears that instead of packaging 100 elements into the argument you pass out side of the loop, you should be passing only 1 element per iteration inside the loop: In (an abbreviated depiction of) your code then, this would translate to sending one byte at a time: (Note, I short cut the assignment of Buf[i] into SerialBufferRec.Buffer[i] for brevity) 
c-3-29	X	Segmentation fault in my Assembly implementation I am new to assembly language programing, and here I am trying to call C standard library function puts from my assembly code, but I am continuously getting segmentaion fault. Please help; Operating system : LINUX 16.04 Assembler : nasm Machine : intel x86 - 64bit 
c-3-30	X	C code after preprocessor This is an exercise taken by a book. The question is what is the output of this code. This code prints always "N is undefined", but I don't know why. The command "#undef N" is after the function f. Then, why the output is always "N is undefined"? Because the preprocessors instructions run in the "physycal" order, line after line. Think about it something is executed before actual compilation, in a such way your code be clear, only with plain C code for the compiler. The point of this exercise is to demonstrate that preprocessor's control flow is completely separate from the control flow of your program. #if/#undef directives are processed in the order that they appear in the text of your program. They are processed only once at compile time; the decision to define or undefine a preprocessor variable cannot be reconsidered at runtime. That's why the fact that f executes before #if/#undef line of the main is irrelevant. You can change the output of this program only by moving f to a position in file before main. If you run the compiler with the -E flag (for gcc at least) it'll show you what the code you're actually compiling is. You'll see that the preprocessor doesn't follow the code execution - it performs its actions in the order that they appear in the file. Then the compiler takes the resulting code and f just has the one call to printf in it that says N isn't defined. The C preprocessor goes through your code line by line. As such, it is wrong to assume the #undef happens after the function f() because of the function call. Instead, it happens before your definition of function f(). To understand this, you have to distinguish between the preprocessor (line by line) and the control flow (follows function calls). 
c-3-31	X	Best means to write a buffer overflow attack I was in a discussion with a friend about list of languages I want to learn, and I mentioned that I wanted to learn C mostly because it was an excellent language to write a buffer overflow. He told me to scrap it because you can write a buffer overflow in Python just as well. This made me curious, since C is at a lower level, can the exploit be written 'better'? Or can you essentially do the same thing Python EDIT: Ah I see I was pretty inarticulate, my apologies. When writing a program to exploit the buffer overflow vulnerability of another program, can you write a 'better' exploit using C due to it being 'lower level' language, or does Python do the trick just as well. There was a class that was teaching exploit writing and they were focusing on C. They mentioned exploiting buffer overflow vulnerabilities, so that is why I mentioned it above 
c-3-32	X	How to remove duplicate lines/set proper offset in Dot matrix lcd screen display? I'm doing a project in college and have come across something I haven't been able to solve for a few days. As you can see in these images, the characters are being duplicated under the lines below. I haven't found a way to fix this, so any help would be appreciated! Here's the datasheet to the chip in the display: https://www.newhavendisplay.com/app_notes/RA6963.pdf Also, I only have access to the MPU Interface. Thank you so much in advance and Merry Christmas! 
c-3-33	X	VS17 not initializing pointer My problem is that this code is not working in VS 2017 while in CLion it works. VS says: Severity Code Description Project File Line Suppression State Error (active) E0144 a value of type void * cannot be used to initialize an entity of type queue_t* therefor the program is not allocating the memory. Further every pointer like the example above is not working. Does somebody here know why that is the case, why VS thinks that this would be a void? You are compiling your program as a C++ program. In C++ there is no implicit conversion from the type void * to pointer of other object type. So you need to write using explicit casting like Or you should consider your program as indeed a C++ program and use the operator new instead of the C function malloc. 
c-3-34	X	gdbserver --> Reply contains invalid character I am trying to debug a cross-compiled application with gdbserver. Unfortunately I get the following error on my host: Reply contains invalid hex digit 59 Here's what I did: compiled my application "line-generator" (which is just a test program) with gcc -ggdb3 -std=gnu89 flags (using -g instead of -ggdb3 didn't make any difference) copy the executable to my embedded system. The exec can be executed there started gdbserver 192.168.10.20:54320 line-generator on the embedded system On the host I start gdb: gdb line-generator.gdb (gdb) target remote 192.168.10.102:54320 Got this response on host: Remote debugging using 192.168.10.102:54320 Reply contains invalid hex digit 59 On the server I got this: Remote debugging from host 192.168.10.20 readchar: Got EOF Remote side has terminated connection. GDBserver will reopen the connection. Listening on port 54320 I have never used gdb remotely so maybe I am running into a beginner's issue so every response might help. edit: My gdbserver was provided by the manufacturer of the embedded hardware. I found out that remote-debugging a cross-compiled executable needs gdb on the host computer to be compiled for this purpuse. In my case it means that I have to use this command instead of simple gdb line-generator.gdb Luckily the correct file was provided by the embedded board manufacturer! To be honest I don't fully understand the context so if someone has an explanation on this I'd be glad to hear this! cheers, Stefan 
c-3-35	X	cairographics glade gtk3 c programming I'm trying to develop an app using GTK3 + Glade and following examples and suggestions on internet I can obtain a first prototype of the application. Now I want to add some plots in the app. I found that, in this contest, the Cairo library is the right solution. For the Cairo library I found this tutorial http://zetcode.com/gfx/cairo/ I tried to merge GTK3, Glade and Cairo using the C language but I'm not sure to use this tools in the right way. Could you suggest me an example where using these tools is built an app that, e.g. pushing a button appear the plot of a curve? Thank you In Glade, you just need to add a GtkDrawingArea and you draw in it using cairo. Give a look at my gtk3-graph sample application that uses GTK+ 3 and cairo to plot a curve. 
c-3-36	X	Why is initialising a matrix whose size is a power of 2 slow? This has been puzzling me for a few weeks, and no one has been able to give some kind of answer. Take it as a Christmas treat, and please post any explanation you might have... I was happy to show my students that initializing an matrix (in C) was slower when done "column wise". is about 3 times slower than the usual version where you initialize M[i][j] in the loop. So far so good... Here is the first puzzling observation. If I replace by or the difference goes away. The second, more puzzling, puzzling observation is that in this case, it is not the usual initialisation that is less efficient. I would have filled that in the "powers of 2 are great". The slow reversed version of the initialisation goes as fast as the normal one! What's your take on that? Notes: I am running debian, the same thing happens with gcc (6.3) and clang (3.8) allocating in the heap or the stack doesn't seem to make a difference optimization options for gcc / clang do not make a difference (besides making both versions faster) apparently, the assembly generated doesn't do anything strange (says a colleague) on bigger sizes, the normal initialisation is faster. The strange fact that the reverse initialisation is slower (by 25% for SIZE of 4096) on powers of two than on other integers remains! Here is the full code I used while testing most of those things: 
c-3-37	X	Passing array of structs to function An exercise at the end of chapter 10 of "Programming in C" by Stephen Kochan says to write a function that sorts an array of structs in alphabetical order. The struct has the form which mimics a dictionary. An array of these structs would look like this The definition of struct entry is global, dictionary is in main. I wrote a function that is supposed to sort this dictionary alphabetically called dictionarySort with entries being the number of elements in dictionary. In main I declare the function and call it with Now I get the errors warning: passing argument 1 of "˜dictionarySort' discards "˜const' qualifier from pointer target type [-Wdiscarded-qualifiers] for the function call and note: expected "˜struct entry *' but argument is of type "˜const struct entry *' void dictionarySort(struct entry dictionary[], int entries) for the function header. I found Passing an array of structs in C and followed the accepted answer but it still does not work. Note that I have not learned about pointers as they have not been introduced in the book yet. juste drop the const in your array declaration. for the compiler const mean that the memory space allocated on the stack for this variable is read-only, so your function should not modify it. 
c-3-38	X	Merging Two Ordered Text Files Into Another Without Breaking The Order in C I have two text file as; and, As you can see they are ordered. I need to combine them into another text file which is ordered again. So, expected output is; However, the output shows up as; I think somehow I am losing last lines of both files and both fsort1 and fsort2 reach end of their files. How can I find a general solution? What am I doing wrong? My code is like that; Thank you. I think somehow I am losing last lines of both files and both fsort1 and fsort2 reach end of their files. Yes, you are. The comments already pointed out the wrong use of feof, but if your loop stops because only one of the file is ended, you are not continuing the read the other file. You can use somthing like this: 
c-3-39	X	Why code runner extension taking too much time to execute? I have made a very simple program to test the VS code Runner extension. My code is After running the code and waiting for many minutes it still shows No output is showing it only shows running. Please help me to solve this problem any help will be accepted. 
c-3-40	X	Program that distributes change to customers. (C) Goal: Implement a program that calculates the minimum number of coins required to give a user change. Issue: Program does not execute properly. I'm fairly sure that my issue is logical in nature, but could also be resultant from my inexperience with proper formatting. Extra information: I added a print function to the code to determine where the problem was. "test1" is broadcast, "test2" is not. I am using some functions local to the cs50.h library: get_float(); - gets a float value from the user and stores it. Please do not fix my code for me! I need to learn to do that myself. I just need help finding my logical error or formatting error. Yes, I know that it's not efficient. Examples of what I'm looking for: "Your issue is in line X, your values make it so that VARIABLE never reaches 0." "In C, you can't format '( x < 0 );' - you have to say '(x<0);'." Code walk-through: Program obtains 2 float values from user, 'amount' and 'cost'. 'amount' is how much money was given by customer, 'cost' is the cost of the item. Program finds 'amount - cost' to determine how much change is owed. This value is stored in 'diff'. Program subtracts 0.25 from 'diff' and adds 1 to variable 'quarter'. Program subtracts 0.10 from 'diff' and adds 1 to variable 'dime'. ... Program prints how many Quarters, Dimes, Nickels, Pennies need to be used to give the customer change in the most efficient manner possible. Assume that only coins can be used. Code: Expected result: Program works as previously described. Actual result: Program does not execute fully. 'test1' is broadcast, 'test2' is not. First of all, you need to check the accuracy for floating point arithmetic. That said, statements like does not do what you think they do. Chaining of relational operators are not possible using the approach you used in C. You need to couple them using && operator, like The trouble is with comparisons like 0.05 <= diff < .10 which are not the same as 0.05 <= diff && diff < .10 The latter does what you intend, the former compares 0 or 1 to .10. If diff is greater than 0.05, then '0.05 <= diff' evaluates to 1, which is then compared to .10. What you've written is the same as (0.05 <= diff) < .10. First of all, your loop is eternal. while (amount < cost); <-- Amount and cost never change. So... Second of all, you can not write conditions like (1 <= 2 < 3), it does not mean what you think it means. It seperately executes the operators, so you end up with something akin to (1 <= 2) < 3, the first being either a 1 (true) or a 0 (false). 
c-3-41	X	I am trying to make the for loop iterate once so it does not give me multiple errors just one in c but don't know how? So here is my code and the output is this when I give the number 10 Works but it gives multiple errors instead of one error Try this For C99 and later, you can declare found as bool type. There is a really obvious solution - just move the logic for printing that message outside of the for loop. Track whether you've found the value with a separate variable which starts off being set to 0 and only gets set to 1 when you have a match. You should also ensure that the loop definitely ends when it's finished searching it by adding a condition to check that i isn't more than the size of the array you've defined. 
c-3-42	X	Parsing AT command arguments I'm writing a parser to parse AT commands. My goal is to split all the arguments into a char array. I'm not allowed to use string or regex functions, as the arguments might contain binary data. Here's an example of what the parser should do: I'd like to post an example of code I've written but I was only capable of handling simple commands with no empty arguments, so I doubt it would add anything to the question. 
c-3-43	X	timer_create says invalid argument in solaris 10? I've a piece of code that sets a timer, its working in most of the os very fine except in solaris 10, here it is not able to schedule the function and failing to set timer_create with errno 22(EINVAL), I'm having no clue why this issue is happening , I tried checking the variable CLOCK_REALTIME, but of no use..my code as follows: 
c-3-44	X	C converting user entered real time to unix time I'm supposed to convert a date the user entered through stdin to unix time. We are only interested in the date, not the current time, that's why I set tm_hour, tm_min and tm_sec to zero. My code seems to work okay but it is missing 3600 seconds in order to be right. When I enter the date 1.1.1970 shouldn't it print out 0? So why do I have to add 3600 to get the right result? 
c-3-45	X	Adding C file in the package R I create a package and try to include C file. I downloaded already created a package from the internet and wrote system("R CMD build Poly") and system("R CMD check Poly_1.0.tar.gz") and everything works. But when I try to launch my own package I receive an error. I spent 3 days trying to find it and I'm in desperate. Please help, if you know what the problem is about. Thanks! Error: log 
c-3-46	X	Why do I get weird results when subtracting pointers to structure? I know that subtracting pointers of a specific data type should return the number of items (with this specific data type), which would accommodate as whole within the memory between pointers. I noticed that if the size of the structure is not the power of 2, the results of subtracting pointers are not what I expected. Could anyone explain to me why? Sample code: Output: The behaviour of your code is undefined. You can only subtract pointers if they point to elements within the same array, or one past the end of that array. (An object may be treated as an array of one element for the purpose of this rule.) (v*)1000 and (v*)1359 do not satisfy that condition, so you can't subtract them. Also, you should use %td as the format specifier for a ptrdiff_t type: which is the type of the result obtained when subtracting two pointers. Else you have more undefined behaviour. For commentary on converting an int type to a pointer type, see Cast int to pointer - why cast to long first? (as in p = (void*) 42; ) 
c-3-47	X	Rotating an array by 180&#176; with strides in C Following my more general previous question : How to rotate an array by &#177; 180&#176; in an efficient way? I would like to know how to use memory views or strides in C to rotate an MÃ—N array by 180Â° without copying it, just by indices transformations. The indices mapping is as follow : The rotated memory view is to be used later in a convolution product The short answer is there are no memory views or strides in C. The long answer. Problem is you basically have a flat chunk of memory. Imagine the following declaration int arr[3][6] this essentially means you have a chunk of memory capable to store 18 integer values, so whenever you do something like int a = arr[2][3] it is essentially the same as int a = ((int*)arr)[2*6 + 3]. So if you have int arr[M][N] you may change it inplace or copy to another array. What memory view does in python probably does it provides you with an implicit function to access your data: Which is probably no what you want since it forces you to stick to the specified dimensions and to keep an array "global". A more generic approach would be. Problem is this is not going to be fast with all this dispatching and stuff. You may combine the first and the second approach though. 
c-3-48	X	half empty array sorting method I have an array of strings. I know the traditional bubble sorting method. I'm looking for a better method to sort a half-empty array of string if it is possible to skip the empty addresses. For example: 
c-3-49	X	Implementing safe shift-left I would like to implement a shift-left function that would trigger a failure upon overflow. Here is my code: Please assume that I the assert function registers an error in my system. I would like to ensure that my method is bullet-proof (i.e., fails on every erroneous input and only on erroneous input). And I would also like to ask if you know of a more efficient way to implement this (assuming that it is indeed bullet-proof). Thank you very much!!! If x << y is undefined, all bets are off. The only safe way is to check that it's a valid shift before attempting it. Note that you need the condition "“ shifting unconditionally lets the compiler assume that y < 32 is true. Are you asking to assert if the shift would cause a carry? In which case it's a bit nasty in c++ without resorting to intrinsics or assembler. I think that's right. This might be better: In C, x << y if defined for uint32_t provided y < 32. From the n1570 draft for C11 in 6.5.7 Bitwise shift operators: If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined. The result in then required to be: x Ã— 2y, reduced modulo one more than the maximum value representable in the result type Let call that value z like it is in your proposed code. Like you use an unsigned type the value of z >> y is required to be the integral part of z/2y. That means that provided y < 32 if there is an overflow, the value of z >> y will be strictly less than x because of the modulo, and if there is non overflow, you get exactly x Full reference from 6.5.7 Bitwise shift operators: ...4 The result of E1 << E2 is E1 left-shifted E2 bit positions; vacated bits are filled with zeros. If E1 has an unsigned type, the value of the result is E1 Ã— 2E2, reduced modulo one more than the maximum value representable in the result type. If E1 has a signed type and nonnegative value, and E1 Ã— 2E2 is representable in the result type, then that is the resulting value; otherwise, the behavior is undefined. 5 The result of E1 >> E2 is E1 right-shifted E2 bit positions. If E1 has an unsigned type or if E1 has a signed type and a nonnegative value, the value of the result is the integral part of the quotient of E1 / 2E2. If E1 has a signed type and a negative value, the resulting value is implementation-defined. It is exactly the same in C++ from n4296 draft for C++14 in 5.8 Shift operators [expr.shift]: ...The behavior is undefined if the right operand is negative, or greater than or equal to the length in bits of the promoted left operand. 2 The value of E1 << E2 is E1 left-shifted E2 bit positions; vacated bits are zero-filled. If E1 has an unsigned type, the value of the result is E1 Ã— 2E2, reduced modulo one more than the maximum value representable in the result type. Otherwise, if E1 has a signed type and non-negative value, and E1Ã—2E2 is representable in the corresponding unsigned type of the result type, then that value, converted to the result type, is the resulting value; otherwise, the behavior is undefined. 3 The value of E1 >> E2 is E1 right-shifted E2 bit positions. If E1 has an unsigned type or if E1 has a signed type and a non-negative value, the value of the result is the integral part of the quotient of E1/2E2. If E1 has a signed type and a negative value, the resulting value is implementation-defined. So in both languages, and assuming that the assert function registers an error in [your] system, code should be: In order to write a safe function, you must first identify what isn't safe. If you don't do this, the task is nonsense. The kind of "overflow" you mention is actually well-defined. But the following cases of dangerous behavior exist: Left-shifting further than the size of the variable, including shifting data into the sign bit of a signed variable. (Undefined behavior) The the right operator is a negative number. (Undefined behavior) Right-shifting a negative number. (Impl.-defined behavior) Implicit integer promotion of the left operand causing it to silently change signedness and thereby invoking one of the above errors. To avoid this, you need to ensure that: The left operand must be unsigned. The right operand must be valid and in range of the type of the left operand. The left operand must not be a small integer type. 1) and 3) are solved by using uint32_t. There exist no system where uint32_t is smaller than int. 2) is solved by using an unsigned type and checking that it isn't too large. In addition, you seem to have a requirement that shifting out of bounds of the left operand should not be allowed. This is weird, but ok, lets implement that too. It can be done by checking if the MSB bit position plus the number of shifts are larger than 31. Note that this code can be further optimized. Step 1. If x == 0and any shift amount, the result is conceptually still 0 and is not a problem. Step 2. Do not attempt excessive shifts. If the value of the right operand is negative or greater than or equal to the width of the promoted left operand, the behavior is undefined. C11 Â§6.5.7 3 Step 3. Insure unsigned math while shifting. If int/unsigned is wider than uintN_t x, then x << y is done with int math. This is rare with N==32 yet possible. Signed math overflow is possible and leads to UB. By 1u*x or (0u+x), code can insure the shift uses the wider of unsigned and uintN_t math. Good compilers will still make optimal code. Step 4. Detect if a reduction occurred. If E1 has an unsigned type, the value of the result is E1 Ã— 2E2, reduced modulo one more than the maximum value representable in the result type Â§6.5.7 4 
c-3-50	X	visual studio 2015 error unresolved external symbol __imp___fmode referenced in function _cpdf_open i am getting below error on build after upgrading to visual studio 2015: Error LNK2019 unresolved external symbol __imp___fmode referenced in function _cpdf_open .....ClibPDF.lib(cpdfInit.obj) 1 Error LNK2019 unresolved external symbol __imp___iob referenced in function __cpdf_file_open ....ClibPDF.lib(cpdfInit.obj) 1 Error LNK2001 unresolved external symbol __imp___iob ReportGenerator .......ClibPDF.lib(cpdfMemBuf.obj) 1 Error LNK2001 unresolved external symbol __imp___iob ReportGenerator ........ClibPDF.lib(cpdfUtil.obj) 1 Please suggest how to remove the error 
c-3-51	X	Floating point rounding error moves reported result inside range I am working on a function to report test results together with lower and upper limit for that specific test result. These three values will be converted with a specified formula (aX + b)/c where X is testResult/lowerLimit/upperLimit and a,b and c are floating point numbers. If the reported test result is inside/outside the specified limits before the conversion it shall also be inside/outside the limit after the conversion in order to ensure the validity of the reported results. I have identified two cases where an invalid test result will move inside the range after the conversion but I have yet to find a case where the test result is inside the range before the conversion and will be outside the specified limits after conversion. Can this case even occur? I don't believe so? Can it? Below is some code that produces the two cases that I mentioned together with corrections to ensure the validity of the reported test result. TLDR: Can the ((TRUE == insideLimitBefore) && (FALSE == insideLimitAfter)) case in the code below happen? to find a case where the test result is inside the range before the conversion and will be outside the specified limits after conversion. Can this case even occur? No, given sane a,b,c, lowerLimit, testResult, upperLimit. Given 3 values lo,x,hi that are lo <= x <= hi before the linear conversion in LinearMapping() the lo_new <= x_new <= hi_new will maintain the same relationship as long as the conversion is (positively) linear (no division by 0, a,b, c are not Not-A-Numbers). No conversion of a float that is out of range of int32_t. The primary reason is on edge cases of x just inside or at the limit, [lo...hi] , the LinearMapping() may reduce the effective precision of all 3. The new x may now equal lo or hi and == favors "in range". So no change in lo <= x <= hi. OP originally found examples of "invalid test result will move inside the range after the conversion" because the x was just outside [lo...hi] and the effective precision reduction now made x equal to either lo or hi. Since == favors "in range", the move from outside to inside is seen. Note: if the LinearMapping() has a negative slope like -1, then lo <= x <= hi can easily be broken. as 1 <= 2 <= 3 --> -1 > -2 > -3. This makes lowerLimit > upperLimit which "in range" cannot be satisfied for any x. For reference, OP's code simplified: Output "¦ I have yet to find a case where the test result is inside the range before the conversion and will be outside the specified limits after conversion. Can this case even occur? I don't believe so? Can it? Yes, this can occur, in theory, although due to C behavior rather than due to the underlying floating-point operations. The C standard does not guarantee that IEEE-754 floating-point arithmetic is used or even that the same precision through evaluation of an expression, and this can cause identical inputs to an expression to have different results. Although LinearMapping is shown as a single routine, the compiler may inline it. That is, where the routine is called, the compiler may replace the call with the body of the routine. Furthermore, when it does this in different places, it may evaluate the expressions using different methods. So, in this code, LinearMapping may be evaluated using different floating-point operations in each call: This means that (a * testResult + b) / c might be evaluated using only 32-bit floating-point arithmetic, while (a * upperLimit + b) / c might be evaluated using 64-bit floating-point arithmetic, converted to 32-bit after the division. (I have merged your three assignment statements into one expression here for brevity. The issue applies either way.) One consequence of this is double rounding. When a result is calculated with one precision and then converted to another, two roundings occur, one in the initial calculation and a second in the conversion. Consider an exact mathematical result that looks like this: 1.xxxxx01011111111xxxx1xx ^ ^ Start of bits to be rounded in wider format. | Start of bits to be rounded in narrower format. If this were the result of a calculation in the narrower format, we would examine the bits 011111111xxxx1xx and round them down (they are less than Â½ at the position where we are rounding), so the final result would be 1.xxxxx01. However, if we do the calculation in the wider format first, the bits to be rounded away are 1xxxx1xx (more than Â½), and these are rounded up, making the intermediate result 1.xxxxx0110000000. When we convert to the narrower format, the bits to be rounded away are 10000000, which is exactly the midpoint (Â½), so the round-to-nearest-ties-to-even rule tells us to round up, which makes the final result 1.xxxxx10. Thus, even if testResult and upperLimit are equal, the results of applying LinearMapping to them may be unequal, and testResult may appear to be outside the interval. There may be some ways to avoid this problem: If your C implementation conforms to Annex F of the C standard (which essentially says that it uses IEEE-754 operations and binds them to C operators in expected ways) or at least conforms to certain parts of it, then double rounding should not occur with well written source code. The C standard says an implementation should define FLT_EVAL_METHOD in <float.h>. If FLT_EVAL_METHOD is 0, it means all floating-point operations and constants are evaluated with their nominal type. In this case, double rounding will not occur if you use a single floating-point type in your source code. If FLT_EVAL_METHOD is 1, float operations are evaluated with double. In this case, you could avoid double rounding by using double instead of float. If it is 2, operations are evaluated with long double, and you could avoid double rounding by using long double. If FLT_EVAL_METHOD is -1, the floating-point format used for evaluation is indeterminable, so double rounding is a concern. For specific values or intervals of values and/or known floating-point formats, it might be possible to prove that double rounding does not occur. E.g., given that your inputs are all int32_t, that the linear mapping parameters are certain values, and that only 32-bit or 64-bit IEEE-754 binary floating-point is in use, it might be possible to prove double rounding does not occur. Even if your implementation conforms to Annex F or defines FLT_EVAL_METHOD to be non-negative, you must still take care in your code not to use expressions that have type double which you then assign to objects of type float. This will cause double rounding because your source code explicitly requires it, rather than because C is lax about floating-point. As a specific example, consider (1.0 * 13546 + 1.0) / 2.3. If the floating-point constants are represented in 64-bit binary floating-point (53-bit significands) and the expression is evaluated in 64-bit binary, the result is 5890.0000000000009094947017729282379150390625. However, if the same constants are used (in 64-bit binary) but the expression is evaluated with Intel's 80-bit binary (64-bit significands) and then converted to 64-bit, the result is 5890. In this case, the exact mathematical quotient is: 1.01110000001000000000000000000000000000000000000000001000000000001011"¦ ^ Bits rounded away in double. If we round this in double, we can see the bits to be rounded away, 1000000000001011"¦, are greater than Â½ at the rounding position, so we round up. If we round it in long double, the bits to be rounded away are 01011"¦. These round down, leaving: 1.011100000010000000000000000000000000000000000000000010000000000 ^ Bits rounded away in double. Now, when we round to double, the bits to be rounded away are 10000000000, which is the midpoint. The rule says to round to make the low bit even, so the result is: 1.011100000010000000000000000000000000000000000000000010000000000 
c-3-52	X	Segmentation fault frexpl() in libm.so.6 I'm trying to install cifs-utils on a Buffalo NAS of mine. Therefore I need to install Talloc first. I managed to install gcc and python, but I'm getting a segmentation error when trying to install Talloc. I tried to debug with gdb and manually starting the waf-configuration(./buildtools/bin/waf configure --prefix=/usr), leading to this: I have no idea though how to debug further now, since I have no experience with this. Could anyone help me how to go on from here? Thank you! 
c-3-53	X	Aborted vs Segmentation fault I was wondering what are the differences between segmentationfault and Aborted. From my knowledge, we get segmentation fault when we try to access memory which is not there(not allocated), but why do we get Aborted(coredumped) error? TIA. 
c-3-54	X	Unknown directive .altmacro error happens when using android-ndk standalone toolchain I am using NDK standalone toolchain to build a dynamic library(.so) on Mac OS. I just migrate the C language compiler from GCC to clang.When using GCC the processes are all OK and so file is generated successfully. But when using clang,some errors happen when issue ./configure.The errors are as follows. The picture error logs: The text error logs,it is the same with the above picture error logs: The toolchain configurations in the configure file: The NDK version is r14b,and the clang version: I know that the error is not caused by the "gas-preprocessor",because GCC compiler also has this problem.The GCC logs with no errors: Anyone can give me some tips? 
c-3-55	X	Character type pointer memory allocation? In the main the input method 1 not working perfectly for the reverse of the string, but the method 2 works. The concept of mine is not clear with the memory representation of char pointer. Maybe I am not good to make the question correctly but Would someone please make me clear why the method 1 is not working. Thanks in advance for the help. "abcxyz" is actually a const char[7] type that can decay to a const char* in certain situations. It is not a char* type; the behaviour on attempting to modify the string is undefined. char s[ASIZE]; on the other hand is an array of char with automatic storage duration. You are free to modify any element of that as you please. 
c-3-56	X	Word Counting program not producing desired output I am referring K&R for learning C. I am not getting the desired output for the following code. I gave the following input The output I obtained was Kindly tell me what's wrong in the code. c=getchar()!= EOF is wrong. This will first call function getchar(). Then it will compare the return value with EOF. After that, the result of the comparison, which will be 1 or 0, will be assigned to c. To avoid this, use (c=getchar()) != EOF instad. Instead of the second if statement, use if(isspace(c)) (Thanks to Lundin for pointing it out) You should also specify that main should return an int to avoid warnings. 
c-3-57	X	MinGW's GDB does not show my stackframes on SegFault On MinGW's GDB (7.6.1) I sometimes run into the problem that a SegFault does not leave much useful information on the stacks (see transcript below). For the error in the transcript I know why it occured: I called fseeki64 with a bad value as file-pointer. The fseeki64 does appear in the stack-trace but I cant see which part of my program indirectly called it. I dont want to see the Microsoft symbols, I want to see the part of the stack that belongs to my program (which was compiled with -g). Since I dont run into SegFaults often, my current workaround is some manual labor: 'next' through main (spamming enter) to find out which top-level function was responsible, restart, 'step' (spamming enter) through that function until the segfault. 
c-3-58	X	How to resolve: undefined reference to `pthread_create' while running cmake command for cura-build I have an ubuntu machine to run cura-build from the following doc. Refer: https://github.com/Ultimaker/cura-build#ubuntulinux while running this command cmake .. I am getting the error description, In the CMakeError.log, CMakeFiles/cmTC_2f3cc.dir/CheckSymbolExists.c.o: In function main': CheckSymbolExists.c:(.text+0x16): undefined reference topthread_create' collect2: error: ld returned 1 exit status CMakeFiles/cmTC_2f3cc.dir/build.make:97: recipe for target 'cmTC_2f3cc' failed make[1]: * [cmTC_2f3cc] Error 1 make[1]: Leaving directory '/cura-build/CMakeFiles/CMakeTmp' Makefile:126: recipe for target 'cmTC_2f3cc/fast' failed make: * [cmTC_2f3cc/fast] Error 2 
c-3-59	X	Accessing an array of a structure I am making a small platformer in C using SDL2. I have a Map structure that save the tiles to be rendered from a spritesheet. This work fine. Now I need to add some coins(Donuts in the game) to the map. To do that I want to add an array of those donuts. I am having issues with accessing the values inside of the array, Here the important bits of code: //when creating the donuts I am getting 1 warning and 1 error The question would be, how to I access the values of the items stored in this array, 
c-3-60	X	Finding the path of the program that will execute from the script I need to execute an exe from a Script during installtion.This exe is generated using C program. I need to first find the path of sqlplus in the C program . In order to call sqlplus, we check first whether it exists in $ORACLE_HOME/bin or $ORACLE_HOME (in that order "“ if we find it in $ORACLE_HOME/bin, then we use that) Can any one let me know how.I tried using stat but it not working.THanks 
c-3-61	X	doxygen not generating description of files Hello stackoverflow members I have a little problem. When I try to doxygen my code via the doxygen wizard, only some file header-descriptions are getting produced. the headers of some files dont show up my header of "driveCtrl" looks like this: my source file looks like this: my odometry.h looks like this: my odometry.c module looks like this Where is the difference? why is my Doxygen not producing the description-text of the driveCtrl Module? what did i do wrong? What is wrong? Thank you very much for your help 
c-3-62	X	Adding multiple ip addresses using ioctl By using strace and ifconfig, I found that I can set the IP address this way: Now I want to add multiple ip addresses on eth1:0. eth1:0 is the 'fake' interface created to add more addresses. Man page of ioctl shows to set and get ip address but is it possible to add multiple ip addresses using ioctl? If so how can I add? 
c-3-63	X	How to map multiple same type loops under a function to the generated basic block in LLVM IR? If the loops are of the different type then I can easily identify them with the name but if there are multiple same type loops (say 5 while loops), how can I identify what basic block in the LLVM IR corresponds to which loop in the source code? Manually it is easy to identify as we visit the code and the LLVM IR sequentially but I am looking how we can identify the same programmatically. Example, I have the below source code in C: when I execute the comand clang -S -emit-llvm fileName.c I got fileName.ll create with the below content: Now there are two basic blocks created for the given source file as while.cond and while.cond1, how can I identify which basic block is for which while loop in the source code? Before I attempt to answer, I just want to note that depending on the selected optimization level or the manually selected pass with opt that information might not be there or might not be as accurate (e.g. because of inlining, cloning, etc). Now, the way to associate between low-level representations and source code is using debugging information (e.g. with the DWARF format). To produce debugging information you need to use the -g command-line flag during compilation. For LLVM IR, if you take a look at the Loop API there are relevant calls like getStartLoc. So you could do something like this: Moreover, for BasicBlock, you can also use the debug-related methods in Instruction (e.g. getDebugLoc) and combine it with calls to other Loop's methods such as getHeader, etc. Also, note that there is a getLoopID method that uses an internal unique ID for each loop, but that is not always there and it's subject to the potential elisions I mentioned at the start. Anyhow, if you need to manipulate it, look at examples in LLVM source following the setLoopID method (e.g. in lib/Transforms/Scalar/LoopRotation.cpp). 
c-3-64	X	Why does a recursive function call need to return a value to calling function? In the following recursive function, Why is the final return necessary? From what I understand, the base case will always stop the recursion and when control reaches the end of the function (after the recursive call) the function will transfer control to whomever called it without the return. My knowledge of stack frames and return addresses is weak, but the stack should receive a return address independent of the actual return keyword, no? Visual Studio 2015 throws a warning about control paths, which I understand. However, during a programming course a grader's IDE would not compile similar code and the professor commented the code was incorrect as opposed to just bad practice. I fixed the code at the time, but never understood why it was incorrect. The function definition says it will return an integer. If you do not put the last return the only the base case will return the value 0 and transfer the control to the previous (caller) function but no other return will be occur. You probably do not need the return value in this case, and so you may use void as return in the function definition, and get rid of all the return altogether, however in many case you will need the return. One such simple example is to calculate the sum of 1...n integers as follows: In your example it would work fine. However, the compiler will and should warn you if the function declaration is stating that the function should return the value and the return statement is conditional. The compiler does not know that it will work. However, it sound strange if the compiler threw an error. It is not strictly necessary with return statements at all just to achieve recursion either. Here is an example. Why does a recursive function call need to return a value to calling function? Short answer: A recursive function doesn't have to return a value All functions - recursive or not - have one or more return. The return may or may not include a value. It is for you to decide when you write the function. All explicit written return statements must return the correct type. However, it is legal (but bad practice) to leave out the return in the end of the function. But only if the return value is never used. So the code below is legal: However, the code below has undefined behavior because the return value is used and the function doesn't return a value in the end of the function: As you can see the same function can be used in a legal way but also in a way that causes undefined behavior. So even though it is legal, it is a real bad idea to omit the return statement for non-void functions. In other words - always include a return statement in non-void functions. BTW - always compile with a high warning level so that the compiler will tell you if you forgot a return statement. The failing compiler at your course was probably set to be strict about this and therefore warned you that your code was bad (but not illegal). A better way to write your function would be to make it a void function: Why is the final return necessary? From what I understand, the base case will always stop the recursion and when control reaches the end of the function (after the recursive call) the function will transfer control to whomever called it without the return. You designed subtractByOne to return an int (that's its signature), then you must return a value of type int on every call. My knowledge of stack frames and return addresses is weak, but the stack should receive a return address independent of the actual return keyword, no? Yes, return address is "automatically" managed on your behalf, this is why explicitly using return is not required to return to the caller, the rule is that is if you just let the instruction flow reach the end of the function block then a return to the caller is emitted. The return keyword is used either to return from another point or send back a value to the caller. practice. I fixed the code at the time, but never understood why it was incorrect. If you don't show us the incorrect code, then we are not able to explain why it is. Now, while correct is not very useful, because any call with a positive value will get 0 in return. 
c-3-65	X	evaluating segments of a byte in C I am trying to do disassembly of Intel 8080 without using disassembly tables. I read in bytes of memory and split them into sections of bits: (7, 6), (5, 4, 3), (2, 1, 0). I want to know what are the numerical values of these sections, here is an example: given this byte: bits 7 and 6 evaluate to: bits 5 through 3: bits 2 through 0: Now, I am very inexperienced with C and I'm having a hard time coming up with an elegant and simple solution to this problem. So far my idea was the following: Create 3 copies of the byte (1 per section) Clear all bits apart from the ones I'm interested in (bitwise AND mask) Shift the byte an appropriate number of bits Read the value would this do the job or is there a better way? If you think about what needs to be done, you only need be concerned about unary >> shift operator and the & operator. It also helps to come up with a bit mask to isolate only those wanted bits out of whatever intermediate calculation as may be required. (a bit mask is simply a variable holding a number whose 1 bits and 0 bits can by used in a bitwise operation to give you your desired result). Here, in all your separating of bits, you will only be concerned with the 2 or 3 lower bits after you shift to get your final result. In the case you are looking at (7,6), there are no further bits to mask leaving only the case where you are looking at the lower 3 bits that will require a mask. From a bit-mask (or what's the magic number) standpoint, you want a mask that will preserve the last 3-bits and discard all remaining higher bits. So for an 8-bit value you want 00000111, or simply the number 7. To begin, if you want to examine the highest 2 bits in an 8-bit number, then you simply need to shift your number by 6 to the right, e.g. given a byte b holding the total value 0x00110000 in your case, you need. There is no need to mask anything here since no higher bits remain. For bits (5,4,3) in your example, you need to shift to the right by 3, then you will need to & the intermediate result with your mask (7 or b00000111) to get rid of the two bits that remain (6,7), e.g. In the last part, your (2,1,0) bits, no shifting is required, you just need to wipe out all bits over bit 2, e.g. get rid of (7,6,5,4,3) using your mask, Putting that altogether, using exact width types, you can do something similar to the following. The program takes your byte value as its first argument (using 48, e.g. 0x0011000 by default if no argument is given) and outputs the results of the shifts and masks: Example Use/Output Look things over and let me know if you have further questions. Since the problem turned out to be of expansive nature, I had to generalise it and wrote this method: It will extract the value from a continuous segment of a byte. To parse out specific bits of a binary value, we use bit shifts and bit masks. Any segment of bits can be obtained in this manner, using the concept of: Where data is the raw data, n is the bit position where this data starts and mask is a bit mask of "all ones", corresponding to the length of the segment. The mask of "all ones" can be obtained from knowing the segment size: (1u << size) - 1. If a segment's size is for example 3 bits, then 1<<3 gives 1000b. 1000b - 1 = 111b, which is a "all ones" mask of 3 bits. So if we know the size in bits and the bit position (offset), we can get the data. Example: Advanced version with "X macro" to avoid code repetition: 
c-3-66	X	Why unsigned int stills signed? I create an unsigned int and unsigned char. Then I assign the -10 value, and the char remains unsigned and gives me a value of 246, but the unsigned int takes the -10 value. Compiling and executing I have this: I have no idea why the unsigned int stills signed, and why the char is unsigned. Reading the book "The C programming language 2nd edition" I can see char can be unsigned by default depending on the machine. (I'm running NetBSD as a operating system.) Why the int is signed while I'm declaring as unsigned int, and why the char is taking the value 246? Is this a compiler or system operating "feature" ? %d is the specifier used to print signed int, so it is not strange. Use %u instead. http://www.cplusplus.com/reference/cstdio/printf/ And when you assign a negative value to an unsigned variable you will get overflow. That's why you get strange values. printf("%d", a) means that will take the content of variable a and interpret it as a signed int. Oh, and btw. You are causing undefined behavior which implies that there's really no reason to ask why something happens. Undefined behavior will always be undefined. Avoid it at all costs. Note that the only thing that is undefined is the printf statement. Assigning a value that's out of range to an unsigned variable is a defined behavior. However, the opposite is not true. int a = UINT_MAX will cause undefined behavior. This is undefined behavior when you pass unsigned integers to %d. Wrong format specifier is UB. If you assign a negative value to an unsigned variable, it's fine and the value will be taken modulo UINT_MAX + 1 (or UCHAR_MAX + 1), so (-10) % (UCHAR_MAX + 1) = 256 - 10 = 246, and b is 4294967296 - 10 = 4294967286. Unsigned integral overflow is required to wrap-around. When printf is interpreting these numbers, it finds 246 is suitable for %d, the format specifier for signed int, and 4294967286 is reinterpreted as -10. That's all. When you assign -10 to an unsigned char variable, the value is reduced modulo UCHAR_MAX + 1, which results in 246 on your platform. Printing an unsigned char value using format %d is fine on most platforms. The value gets implicitly converted to int, which is the correct type for %d format. So, you see that 246 as you should. When you assign -10 to an unsigned int variable, the value is reduced modulo UINT_MAX + 1, which results in some large value (depends on the range of unsigned int on your platform). Printing such large unsigned int value (greater than INT_MAX) using format %d leads to undefined behavior. The output is meaningless. 
c-3-67	X	SDL2 - Reading pixels for collision detection I currently am trying to code a small game which involves moving a dot around a maze. Rather than building the maze with rectangles, I decided to simply create a PNG image of the maze and load it as a surface and I also got the dot to move around the screen as well. Now, I have been trying to make sure that the dot (which is more like a small box) to stay on a certain color and prevent it from moving into the walls. I am trying to read the pixel ahead of the movement and see whether it's black (a wall) or it's white (empty space). I have noticed the function SDL_RenderReadPixels, however I can't seem to make it work: I keep getting a segmentation fault. Now, I am not entirely sure if this would be the easiest method to achieve what I am trying to do. I can't seem to find an easier function within the SDL2 library that accomplishes this either, and I haven't found a solution searching around. Is there a reason why this is causing seg faults? Is there an easier and more efficient way for me to achieve this in SDL2? I would like some feedback on my approach. I am still a beginner. The code is in C. Thanks, SDL_RenderReadPixels saves result to fourth argument (pixels), which is uninitialised. SDL then writes pixels "somewhere", which luckly causes segmentation fault. You have to provide space for resulting pixels (static buffer, stack buffer, malloc, anything). Also note this operation is quite slow. 
c-3-68	X	How can I add GtkEventBox in scrolled windows layout? I have a GTK+2 program which combining GtkScrolledWindow and GtkLayout. It works fine. But, I found if I put a GtkEvent object to GtkLayout, it will not display properly. Anybody knows why ? Thanks. The picture if the eventbox is used. 
c-3-69	X	program intermittently stuck with main reporting a different thread id as opposed to the thread itself I am trying to figure out how multi-threading works, this is my code : For a thread count of 1, this code works sometimes, at other times it just hangs :( WORKING : #./thread_multijoin 1 Main created thread 0 with tid : 139835063281408 Thread 0 has worked hard and is now terminating Reaped thread 0 (numLive=0) HANG : #./thread_multijoin 1 Main created thread 0 with tid : 140301613573888 Thread 1 has worked hard and is now terminating ^C NOTICE here that Main says "Thread 0 was created" ; whereas the thread itself says "Thread 1" ... why is there a mismatch ?? It definitely gets stuck when I have multiple threads : #./thread_multijoin 1 2 2 1 Main created thread 0 with tid : 140259455936256 Main created thread 1 with tid : 140259447543552 Main created thread 2 with tid : 140259439150848 Main created thread 3 with tid : 140259430758144 Thread 4 has worked hard and is now terminating Thread 0 has worked hard and is now terminating Reaped thread 0 (numLive=3) Reaped thread 3 (numLive=2) Thread 3 has worked hard and is now terminating Reaped thread 2 (numLive=1) Thread 2 has worked hard and is now terminating ^C the only thing I am understanding from this is that the thread ID's reported by main and the thread itself are different, so I am guessing due to parallel scheduling there is something going on with the thread counter ... can you guys help me narrow this down please? Thanks in advance. ======================================== Thanks @mevets and @user3386109 for the answer :) I tried doing what @mevets suggested : i,e pthread_create(&thread[idx].tid, NULL, threadFunc, (void *)idx); and int idx = (int)arg ; but got this error when compiling : Upon researching further, found this thread : cast to pointer from integer of different size, pthread code which suggested the use of intptr_t : and That worked perfectly fine without errors . Thanks once again for your time, really appreciate it :) PS : to use intptr_t , you need to use _GNU_SOURCE : [ the thread id ]: You pass the address of idx into each thread, then dereference it to index the table. So each thread gets the same pointer argument. You probably wanted to: and int idx = (int)arg ; // since arg is of type void , we typecast it to * of type int and deref it ie; not deref it, just pass it in a "void *"? container. 
c-3-70	X	How to reserve a fixed flash section for data? I need to store some large chunks of data in flash memory, where it will be read often and occasionally be rewritten using SPM. I already figured out how to use pointers to __flash and pgm_read_byte to access it, how not to omit the const (despite my writing to it), how to actually access the array in a loop so that it doesn't get completely optimised away (after inlining), but I don't really understand how to declare my array. works about fine, except that I do not want to initialise it. When programming my device (an Arduino ATmega328P), I want this section to be keept so that it retains the data previously written by the application. The above does zero-initialise it, and my hex file contains zeroes that the programmer happily uses to overwrite my data. Using the __flash modifier instead of __attribute__(( section(""¦") )) does about the same here, except that it places the array elsewhere and I don't have any control about where it is put. It still does this when I use __flash and omit the initialisation (though I get a "uninitialized variable 'persistent_data' put into program memory area [-Wuninitialized]" warning). Now I am trying to omit the initialiser: and get rather unexpected results. The sections data from the .lss output shows This does put all the initialisation zeroes in the hex file at the load memory address 55E2 (instead of omitting them), while the virtual memory address (which the variable persistent_data points to) refers to 0480 - in the middle of the code from the text section! (I also tried to omit the const, and to omit the const and the initialiser, which both had the same effect as omitting only the initialiser). I am at a loss. Do I need to use extern maybe? (Any attempt at doing so ended up with a "undefined reference to persistent_data" error). Do I need to use a linker script? How do I make persistent_data refer to a location is program memory that is not used by any other data, and have the compiler not emit any initialisation data for that location in the hex file? You don't seem to realize that you actually need two versions of your hex file - one that is suitable for a "new" installation on a new (or worse: re-used, thus with random flash content) chip that initializes the flash section to make sure there is no arbitrary data in there that might be interpreted, and another one used to update a pre-programmed chip that misses this section in order to keep data already modified by your users. So, you are going to need the version that initializes this section anyhow. The simplest way to achieve this is like your first example, initialize the data to build the "naked chip" version of your code, and produce the "update" version by simply removing this initialized section from the object file with objcopy (assumed you use a GNU toolchain). See the -R option of this tool. Also, make sure this data section is located at a fixed address - you don't want it to move every time you change something in your code. I would rather try and use EEPROM if available than go through the hassle of reprogramming. 
c-3-71	X	C char Array appending Buffer overflow So I want to append a's to the char string Why is this causing a buffer problem And I can't use the strcat I have don't like this. Having a string initialized as prohibits it from being modified. In contrast, allows you to modify byte 0 (but not subsequent bytes) afterwards without getting an error. However, since the last byte in the string needs to be 0, it is not a good idea to overwrite it. More importantly, you are trying to give values up to 20th element - you need space for at least 21 elements. Also, be careful with the terminating character - you need the last element in the array to be 0 for it to be a string. Right now it seems that you are just trying to write characters into the array without terminating it properly. If you don't know the size of your array up front, you can use dynamic memory allocation: malloc, realloc (and don't forget to free at the end). 
c-3-72	X	Q: Generating MIDI-files in C I'm trying to generate MIDI files in C but I'm having bit trouble with the header chunk of the file. So the MIDI header is in form of: chunk type-length-format-ntrks-division The chunk type is the four ASCII characters 'MThd'; length is a 32-bit representation of the number 6 (high byte first). The rest are 16 bits. So I created a Struct for the Header which is the following: Then I'm creating the struct in the code: And then I write the file (also with additional stuff not presented here) with fwrite, I'll leave that part of the code out. But if I look at the binary/hex with xxd and compare it to a correct midi file created with let's say ableton I see that they are different and mine is incorrect. Correct midi header in hex: 4d54 6864 0000 0006 0000 0001 0060 My incorrect midi header in hex: 4d54 6864 0000 0000 0600 0000 0000 0000 0000 0100 6000 0000 What causes this? Is it an endianness issue or am I using wrong data types. I'm on 64bit os X 10.10.5. Because if I understood correctly 16 bit parts in the header should be ints and the length(32bit) long and so on. If it is an endianness thing how can I correct this. I read some endianness topics here but didn't really understand them. Here's a link to pdf for more information on MIDI: https://www.cs.cmu.edu/~music/cmsip/readings/Standard-MIDI-file-format-updated.pdf Thanks! MIDI files require that the values be written in big-endian byte order, aka "network order"; you may find htnol(3) and htons(3) to be useful: 
c-3-73	X	Why does clang produces wrong results for my c code compiled with -O1 but not with -O0? For input 0xffffffff, the following c code works fine with no optimization, but produces wrong results when compiled with -O1. Other compilation options are -g -m32 -Wall. The code is tested with clang-900.0.39.2 in macOS 10.13.2. Input: 0xffffffff Outputs with -O0: (expected) v1 = 0xeaaaaaaa v2 = 0x22222222 Outputs with -O1: (wrong) v1 = 0x2aaaaaaa v2 = 0x02222222 Below are disassembled instructions for the line "int v1 = count >> 2;" with -O0 and -O1. With -O0: sarl $0x2, %esi With -O1: shrl $0x2, %esi Below are disassembled instructions for the line "int v2 = v1 & mask2;" with -O0 and -O1. With -O0: andl -0x24(%ebp), %esi //-0x24(%ebp) stores 0x33333333 With -O1: andl $0x13333333, %esi //why does the optimization changes 0x33333333 to 0x13333333? In addition, if x is set to 0xffffffff locally instead of getting its value from arguments, the code will work as expected even with -O1. P.S: The code is an experimental piece based on my solution to the Data Lab from the CS:APP course @ CMU. The lab asks the student to implement a function that counts the number of 1 bit of an int variable without using any type other than int. As several commenters have pointed out, right-shifting signed values is not well defined. I changed the declaration and initialization of x to and got consistent results under -O0 and -O1. (But before making that change, I was able to reproduce your result under clang under MacOS.) this statement: results in a signed overflow, which is undefined behavior. (on my system, the result is: -1431655766 The resulting values tend to go downhill from there: The variable: v1 receives: -357913942 The variable: v2 receives: 572662306 the %x format specifier only works correctly with unsigned variables As you have discovered, you raise Implementation-defined Behavior in your attempt to store 0xffffffff (4294967295) in int x (where INT_MAX is 7fffffff, or 2147483647). C11 Standard Â§6.3.1.3 (draft n1570) - Signed and unsigned integers Whenever using strtoll (or strtoull) (both versions with 1-l would be fine) and attempting to store the value as an int, you must check the result against INT_MAX before making the assignment with a cast. (or if using exact width types, against INT32_MAX, or UINT32_MAX for unsigned) Further, in circumstance such as this where bit operations are involved, you can remove uncertainty and insure portability by using the exact width types provided in stdint.h and the associated format specifiers provided in inttypes.h. Here, there is no need for use of a signed int. It would make more sense to handle all values as unsigned (or uint32_t). For example, the following provides a default value for the input to avoid the Undefined Behavior invoked if your code is executed without argument (you can also simply test argc), replaces the use of strtoll with strtoul, validates the input fits within the associated variable before assignment handling the error if it does not, and then makes use of the unambiguous exact types, e.g. Example Use/Output Compiled with Look things over and let me know if you have further questions. 
c-3-74	X	program crashing with segmentation violation (SIGSEGV) we have to make a 2d array of contacts(but the user can only enter numbers). the user can be asked to list all contacts, add new contacts, be told when its empty or full, and search by type. Also i get some warnings like [Warning] assignment makes integer from pointer without a cast . It also has some notes like [Note] expected 'int (*)[3]' but argument is of type 'int' I recieved sigsegv error at (if (contacts[0][0]==0) first I fill the 2d array with 0 then i call the function from an if its all okay until it reaches the function full code 
c-3-75	X	glutPostRedisplay() not always being called? I have a program in which a coloured cube is displayed with OpenGL. I am using freeglut to display the OpenGL instance. The program is supposed to allow the user to rotate the cube with their mouse while they are holding their left mouse button down. After each mouse movement the cursor is supposed to be centered in the window then glutPostRedisplay(); is meant to be called only it gets called a few times then stops getting called until you release the left mouse button. my_cube.c glutWarpPointer() generates a new mouse motion callback; set a flag and ignore warp-generated motion callbacks: All together: 
c-3-76	X	How to process/interpret parsed GDB/MI output in C I am using libmigdb to communicate with a GDB child process. When I obtain GDB's output, I receive it as a parsing tree. The library provides functions that convert GDB's output to a parsing tree. In order to get my program's local variables, I have this code: gmi_stack_list_locals returns an object which has the following type: and, as far as I know, this structure would be used as a node within the parsing tree. GDB's output syntax described here: ftp://ftp.gnu.org/old-gnu/Manuals/gdb/html_node/gdb_214.html is ugly to parse, and I am afraid that I do not have enough knowledge to build a parser that allows me to get each of the fields that GDB returns (in this case: var name, value and type). Does anyone have any hints on how to do this in C, or any examples of already existing parsers? Thank you in advance 
c-3-77	X	Is there any case where it would be better to use inbuilt libraries rather than third party ones? Is any reason why it would be preferable to use sockets (or libraries packaged with the OS) rather than third party libraries such as libcurl. For example I have been following a few tutorials like this one on Winsock to try and access an http site and it seems it can do everything I need it to do but libcurl can do those things too. Is there any reason to use third part libraries rather than what the OS can supply (I am thinking of factors like execution speed, reliability ect). I know portability is an issue here and possibly ease of use but are there other factors that might make it preferable? HTTP is a complicated protocol, and so are most other important network protocols. If you try to implement it yourself using the native, low-level socket interfaces, you'll most likely miss some important details (e.g. chunked encoding). If there's a high-level library that implements it, you're almost always better off using that. It's unlikely that there will be a significant difference in performance. Networks are orders of magnitude slower than CPUs, so the bottleneck is in the data communications, not the processing code. 
c-3-78	X	Include a single header from a different directory I have a small build in which I want to include only a single header file (and source file) from a different directory. I know how to use the -I parameter, but do not want to include the entire directory, only the individual files. My makefile looks like this: When I try to make it complains that string.h is not found: How can I include this file without including the whole directory? I know how to use the -I parameter, but do not want to include the entire directory, only the individual files. -I doesn't "include a directory"?, it just puts the directory on the search path. It doesn't matter that the directory contains other files that you don't want. The only files that the compiler will read are the ones whose name is in an #include directive. So if you have a ../../shared/src/string.h then you can use the following compilation command: In the case of string., the header is in the same directory as the source file. This is where the compiler will look first, so you don't need -I at all. The only scenario in which adding -I options can hurt is if there are header files with the same name in different directories. For example, if all four of the following files exist: and you want to compile code containing then you can't do it with just -I directives. Either you put -I one first and #include "bar.h" will include one/bar.h, or you put -I two first and #include "foo.h" will include two/foo.h. The sane solution is to not run into this problem. Headers inside the same project should have unique names. If you're including headers from different projects then you should include the project name in the include directives. In principle you could copy one of the header files to a separate directory and include that, but in this situation, given typical naming conventions you're likely to run into name collisions between the projects. Note also that string.h is not a good name for a header because it's the name of a standard library header. The compiler won't confuse the two in your case: #include "string.h" looks for the header file in the current directory if there is one, whereas #include <string.h> only looks in directories specified with -I and falls back to the standard library. Collisions with headers installed system-wide can happen, and it works as long as you don't mistype a file name, but it's confusing for humans to use a very well-known header name that is used in most projects. 
c-3-79	X	How to prevent system hang before watchdog timer task kicks in We are using an ARM AM1808 based Embedded System with an rtos and a File System. We are using C language. We have a watchdog timer implemented inside the Application code. So, whenever something goes wrong in the Application code, the watchdog timer takes care of the system. However, we are experiencing an issue where the system hangs before the watchdog timer task starts. The system hangs because the File System code is badly coded with so many number of while loops. And sometimes due to a bad NAND(or atleast the File System code thinks it is bad) the code hangs in a while loop and never gets out of it. And what we get is a dead board. So, the point of giving all the information is to ask you guys whether there is any mechanism which could be implemented in the code that runs before the application code? Is there any hardware watchdog? What steps can be taken in order to make sure we don't get a dead board caused by some while loop. There is a hardware watchdog that could be run before the application runs. ARM AM1808 does have a timer that could be implemented as a watchdog, as per documentation: www.ti.com/lit/ds/symlink/am1808.pdf. So, you may wish to set it like that at least during the part of the program that runs through the critical and long section. You at wish to have a piece of booting code that first sets this watchdog, and after the correct initialization, goes to application. In fact, this is a very common approach. Professional embedded systems are designed like this: Pick a MCU with power-on-reset interrupt and on-chip watchdog. This is standard on all MCUs. Implement the below steps from inside the reset interrupt vector. If the MCU memory is simple to setup, such as just setting the stack pointer, then do so the first thing you do out of reset. This enables C programming. If the memory setup is complex - there is a MMU setup or similar - it will have to wait and you'll have to stick to assembler to prevent accidental stacking caused by C code. Setup the most fundamental registers, such as mode registers, watchdog and system clock. Setup the low-voltage detect hardware, if applicable. Hopefully the out-of-reset state for LVD on the MCU is a sound one. Application-specific, critical registers such as GPIO direction and internal pull resistor registers should be set from here. Many MCU have pins as inputs by default, making them vulnerable. If they are not meant to be inputs in the application, the time they are kept as such out of reset should be minimized, to avoid problems with noise, transients and ESD. Setup the MMU, if applicable. Everything else "CRT", such as initialization of .data and .bss. Call main(). Please note that pre-made startup code for your MCU is not necessarily made by professionals! It is fairly common that there's an amateur-level "CRT" delivered with your toolchain, which fails to setup the watchdog and clock early on. This is of course unacceptable since: This makes any program running on that platform a notable safety/poor quality hazard, in case the "CRT" will crash/hang for whatever reason. This makes the initialization of .data and .bss needlessly, painfully slow, as it is then typically executed with the clock running on the default on-chip RC oscillator or similar. Please note that even industry de facto startup code such as ARM CMSIS fails to do some of the MCU-specific hardware setups mentioned above. This may or may not be a problem. 
c-3-80	X	Cannot use file i\o when running mpi I have a problem in MPI, when I run my MPI program from wmpiexec I cannot make any file io. But when I run it in visual studio it works fine. I tried the usual see fopen() as well as the mpi APIs nothing works. (the file already exists) 
c-3-81	X	For loop not being executed C I am trying to scan any ports that are open and saving those which are in text file. The program displays the first loop ( checking whether or not the arguments are correct) but for some reason skips the entire for loop. I am a newbie in c so any help is much appreciated You are crashing on a segmentation fault when I run you code as follows: For starters, you are closing the socket on every iteration of the for loop. When you attempt to close it a second time, you are probably going to get undefined results: This line: I suspect you want to create a new socket on every iteration of the loop. Further, if the file fails to open, the fclose(file) call will crash as well. This line: Should be this: Three things: First, since you a separate connection on each iteration of the loop, you need to create the socket in the loop. So move the call to socket inside the second for loop, just before the call to connect. Second, take a look at where you're connecting: You connect to port 80 every time through the loop. If the connect fails the loop doesn't print anything, whether to the file or to the screen. So if port 80 is not open, you won't see anything get printed. Change this to connect to the port you want to scan: Third, you're not checking the proper return value for connect. It returns 0 on success and -1 on error. You're checking if the return value is greater than 0. This is always false. So change it to check for 0: 
c-3-82	X	C Windows DLL Injection Notepad crashes i have tryed a DLL Injection on the Programm Notepad.exe But if i start my Injector, notepad Crashes. Here is my Injector Code: And this is my Code for my DLL File: I compile this Code in my Linux machine with MinGW: (Injector) i686-w64-mingw32-gcc -o Injector.exe injector.c (DLL-File) i686-w64-mingw32-gcc -o Mydll.dll mydll.c I also written a Function for Setting Debug Privileges: And if i Run my Program in my Virtual Machine: Notepad.exe Crash Why is notepad crashing? If i inject my dll File with the Program it works: enter image description here And please do not come with me now "Then I use the program instead of writing a separate injector" !! That does not help me any further !! Its been a while since I did these things, so I may be off, but: You try to map LoadLibraryA method when you run remote thread. Most of modern apps use LoadLibraryW or just LoadLibrary that will use the default value based on compiler mode. You use gcc, why not use Microsoft compiler? There might be mapping issues between the compilers, that prevent you from linking the gcc generated code with (possibly) vcc compiler.... Hop it helps Firstly, you can use strlen/wcslen (first is for Ascii encoding, latter for Unicode encoding) instead for calculating the length of a buffer. It's more appropriate in my opinion. Here's a properly working variant of DLL injection via remote threads which I've written as a demonstration example for you. It is a quick example so don't expect too much, extremely simplistic. You can improve it by using shell-code injection and then utilise a manual map loader or LdrLoadDll. On that note, you may be interested in NtOpenProcess, NtAllocateVirtualMemory, NtWriteVirtualMemory, RtlCreateUserThread/NtCreateThreadEx and NtAdjustPrivilegesToken. As for CreateRemoteThread, it won't work with processes on other user accounts, whereas RtlCreateUserThread/NtCreateThreadEx both will (as long as you have debugging rights - SeDebugPrivilege). As a last pointer, make sure you compile with /MT so the run-time is statically linked (especially for the DLL you're injecting). If my example code does not help you, and you still cannot fix the issue, try using a debugger to diagnose the issue. You should already have tried doing this, debuggers are there for a reason! 
c-3-83	X	kbuild external module questions I am building an out-of-tree kernel module for a device driver. Overall, things are going well, but I had a few questions about using kbuild and the build system: I found this excellent post: Is it possible to set CFLAGS to a linux kernel module Makefile?, which shows how to modify the compiler flags. As a result, I am now setting my compiler flags as: ccflags-y := -O2 -Wall -Wextra -I $(DRIVER_INC_DIR), where $(DRIVER_INC_DIR) is various header files for my driver. Note that my driver is made up of several .o files that get merged into a single .ko. I want to show warnings generated by the compiler for my own code, but not code in Linux (e.g., linux/module.h). How can I accomplish that? I know in user space applications there is the -isystem option, but I'm wondering how that would apply here (if at all). Is there any difference between using modules_install versus just doing a copy of the .ko file after it has been compiled? The reason I ask is because I think its easier for me to follow doing a manual copy, since I also need to support a "make uninstall" target (and there is no modules_uninstall, just a clean, which does not appear to remove the .ko from where it was installed). Thanks in advance for the help. I have been able to answer #1. Basically, inside of kbuild, the LINUXINCLUDE variable is using -I to pull in all the source code from the Linux headers. As a result, I added this line to my Makefile: This replaces all the -I flags with -isystem and therefore, the warnings are ignored. 
c-3-84	X	Interaction between C program and local web server I am working on a project that has multiple items to it. I am pretty new to programming but I would like to understand what the architecture would look like to help guide me in my research. My project is an audio recorder. It runs on Linux, headless, and uses an RTL-SDR tuner to receive audio. It acts like an audio card. I have a piece of software in C for it, that runs through command line. I want to build a basic web interface for it that control some parameters in this command line (variables), for example the frequency of the tuner. Also, I would like the web interface to show a list of files/folders in a specific folder. I have my pieces of software running in C. I then need a web server; what would be a good choice to start with? Something light would be preferred, it won't be accessed much. How can I make my C software interact with my web server through the web interface? Thank you for your help! You could use an embedded http server like mongoose and have that serve your HTML and a small REST api that interfaces with the main part of your application. This example code could help you. It seems like you need a light-weight web server which will full-fill your project needs. For writing web application and also web server in C, I think to have a look at kore.io Kore is an easy to use web application framework for writing scalable web APIs in C. Its main goals are security, scalability and allowing rapid development and deployment of such APIs. After installation of kore in Linux: Then write a simple web application which will print "Hello world" browser 
c-3-85	X	"CMakeLists.txt" seems to be missing I was trying to build SFML in order to start developing 2d-games in c++. I put the source-code directory inside C: (the directory itself is called 'SFML'). while trying to generate .cbp files using CMake, I ran into an error: "The source directory "C:/SFML" does not appear to contain CMakeLists.txt" It seems like there is a missing file that CMake didn't create. I am using Cmake 3.10.1, the installation file can be found in https://cmake.org/download/ under the title:"Windows win32-x86 Installer". I tried to build SFML 2.4.2, using the generator of Codeblocks - MinGW makefiles. The version of codeblocks used is: codeblocks-16.01mingw-setup.exe, found in http://www.codeblocks.org/downloads/26 Did someone encounter the same problem before and knows how to overcome it? If not - Is there an already-built, ready to use, libray of this version? (2.4.2) If not.. do you know about a version of SFML that is usable in visual studio 2017? And another question (That is the last one, I promise...) - maybe you can recommend me about another library for c++, that is usable to develop 2d-games? edt: note: I am completely new to all this building thing the containments of SFML: maybe it's the binary version? lib contains some static libraries, bin contains some .dll s You probably downloaded something wrong or potentially extracted the SFML source into a sub folder or something like that. Since you've mentioned Visual Studio: SFML is 100% compatible with Visual Studio and you can build it from source any time without having to worry about dependencies (everything included in the repository). The steps to compile are pretty easy. I'd recommend you install Git to clone the latest source from the SFML repository. In addition you'll need CMake, which you obviously got already. Open a Command Prompt and change your directory to C:\SFML. Clone the official repository using Git: git clone https://github.com/SFML/SFML.git source (note the trailing .) Wait for the source to be checked out to the source sub directory. Create a new directory called build: md build && cd build Now invoke CMake, pointing to the source directory and also defining your install path: cmake -DCMAKE_INSTALL_PREFIX=C:/SFML ../source Build and install a debug build of SFML: cmake --build . --target install --config debug Build and install a release build of SFML: cmake --build . --target install --config release Alternatively you can just open the generated Visual Studio solution and build the INSTALL project on your own. (You shouldn't have to define a build tool or anything; CMake should notice Visual Studio being installed and pick it up automatically.) 
c-3-86	X	How to cast one parameter in function as void pointer parameter to an integer I am having this function fun, where I am passing the nums structure as a parameter. The thing is that I need to convert this field into an integer inside the function. How can I do this without changing the way I am passing the structure in the function? Here is what i am trying to do: Also, how can I do the casting for the head node? Can anyone please advice? Since a struct numbers * is being passed to fun, you need to assign the parameter to a variable of this type. Then you can use the struct. There's also a problem with how you populate the struct: You're not allocating enough space for new_a. You only allocate 1 byte, but an int on most systems is 4 bytes. When you subsequently read and write from this memory location, you read/write past the end of the memory that was allocated. This invokes undefined behavior which in this case manifests as a crash.. You can fix this by allocating the proper amount of space: However, you don't need to use dynamic memory allocation for this field at all. Just declare new_a as int and write to it directly: You also don't need to take the address of args. It's a pointer, so pass it to pthread_create directly: 
c-3-87	X	C - How do I see a constants value by opening a header? I'm reading C How to Program 8th Edition and in chapter 3 as I'm being explained the constants INT_MAX and INT_MIN in relation to arithmetic overflow it says "You can see your platform's values for these constants by opening the header limits.h in a text editor." How would I do this on Windows? Not every platform places those files in the name location, but you can try running something like this: which will produce a list of files with that name. On my machine the output begins with... Try looking at /usr/include/limits.h 
c-3-88	X	Difficulties when swapping 2 arrays in C I wrote a code that arrays different names and I want to order alphabetically, so far I managed to swap just the first name: i.e: 1st name Nicu Bogdan 2nd name Andrei Dan 3rd name Martin Adrian After running the code I get Andrei Bogdan Martin Dan Nicu Adrian Is it possible to use pointers to solve this issue? The comments are suggesting that if you use a struct array rather than string arrays, along with an extra temporary storage instance of the same struct, the sorting can be a little simpler. The following is basically your code, with a few changes. Look at the comments for suggestions and explanations. Edit: qsort works as well. For example: Is it possible to use pointers to solve this issue? To answer this question explicitly, yes. In fact, you are already using pointers in your code, and it would be very impractical to avoid using pointers, as that'd mean you can't use any arrays or functions meaningfully. See the annotations of one of your lines of code below for further details. If you wanted to express these implicit, subtle conversions explicitly, this is possible, for example by declaration: This way you could use the pointer to strcpy named compare to invoke strcpy, rather than strcpy directly: cmp = compare(Name[j].nume, Name[j+1].nume); 
c-3-89	X	C language: how to return string array from function So i have this user input: And i want to split this line by space and populate my array. So i have this array: And this function: Usage: And my array is still empty although i can see that my function parseuserinput insert elements into my array. You are storing a pointer value in a variable of type char. Then you are pointing to parts of the string. A possible solution would be to use char* arguments[2] and then use strdup() to duplicate strings and store the address of the duplicated string in those char *[]. Here, we have duplicated each of the tokenized string pointed by pch and stored it. Array of char* being decayed into a pointer to the first elements of the array enables us to make changes to it, which in turn lets us realize returning value from the function. And how many positions of the char*[] have been filled. You are incrementing i and this i inturn denotes the number of elements of the char* array correctly filled. You can return it from the function to give an idea to the callee function regarding the number of elements correctly filled. strdup - check it's return value and free it when you are done working with it. 
c-3-90	X	C programming , pointers run time error I coded something like the following code,and I was able to assign a value to the new address after increasing it but was not able to print this value run time error, Also after assigning a value to the location this pointer pointing to, pointer value changed to be 14. Anyone has an idea of what's going on ? Why the pointer value itself changed to 14 after assigning value to the location itself ? I did not get any error after increasing the pointer value too ! This is undefined behavior. When you incremented the pointer variable then it was pointing to one past the variable x (4 Bytes past in your system). But then you dereference it. First of all the memory you made change to is not allocated by you. And also it is not a location that is already allocated (like part of an array etc). It is Undefined behavior to access it. And again you can assign it to any possible address. But dereferencing it would be undefined behavior in case the memory address it points to is invalid. From standard 6.3.2.3 The unary * operator denotes indirection. If the operand points to a function, the result is a function designator; if it points to an object, the result is an lvalue designating the object. If the operand has type ''pointer to type'', the result has type type. If an invalid value has been assigned to the pointer, the behavior of the unary * operator is undefined When you do ptr++, it points "one element" past x. This is allowed, because x in this case is treated as an array of size 1, and a pointer is allowed to point one element past the end of an array. You can also subsequently print the value of that pointer with no problem. What you can't do however is dereference a pointer to one element past the end. That invokes undefined behavior. In this case that behavior manifested as the pointer having an unexpected value and a subsequent crash. That being said, here's what probably happened. ptr was most likely placed right after x in memory, so after doing ptr++, ptr was pointing to itself. So *ptr = 20; had the effect of of setting ptr to 20. The value 14 that was printed is in hex, which is the same as 20 decimal. This explains the value that was printed. Then you tried to print *ptr, which in this case says "print the int value at address 0x14". That is most likely not a valid address, so attempting to read it caused a crash. You can't however depend on this behavior. You could add an extra printf or compile with different optimization settings and the observed behavior would change. 
c-3-91	X	Understanding behavior of memcpy() with some error examples I'm trying to write implementation of memcpy. Here how it looks: It works mostly as string.h memcpy, except some error cases: original memcpy returns NULL, my version segfault Here's original memcpy ends with zsh: abort, my version works ok. This cases invoke undefined behavior, but on one system/compiler I guess it should be the same, but it doesn't. Can anybody explain why it differs this way? When you invoke undefined behavior, you can't predict how the program will behave. It may crash, it may output strange results, or it may appear to work properly. Also, a seeming unrelated change such as adding an unused variable or a call to printf for debugging can change the way undefined behavior manifests itself. In the case of test_memcpy, memcpy will write past the end of byte_array since the size you give it is too large. The same will happen if ft_memcpy is called. Both are undefined behavior, and they need not manifest in the same way. The same goes for passing a NULL pointer for the first two arguments. ft_memcpy invokes undefined behavior since it attempt to dereference both pointers. As for memcpy, the implementation may or may not check for NULL before doing anything. Even if it doesn't, there's no guarantee it will crash. 
c-3-92	X	Is fprintf() thread safe? I'm writing a C solution to some variable of the dining savages problem. Now, I create threads which every thread gets a FILE* to the same debug file; inside the thread I'm doing some printing using fprintf(). The printed statements are not protected by any kind of mutex etc.. I don't observe any interleaving behavior in the debug file; it seems that it is thread safe although nowhere online I found a definitive statement that this is the case. What I did see is the following: in Unix the fprintf is thread safe using the c++11 compiler the fprintf needs to be thread safe The reason I'm asking that is because this is a university assignment that works, but I still have the doubt that in another windows based computer the program can cause a problem due to the uncertainty discussed above. I'll attach the thread code so you will see that the prinintg is not protected: just reinforming, this runs on windows using visual 2015 will appreciate some help!!! **in case you will need some more code i will add, although the rest are not that informative to the question asked C2011 -- the first version of the standard to acknowledge the existence of threads in the first place -- places no limitation on how fprintf() calls in different threads may or do interact. In that sense, fprintf() is not thread-safe. POSIX, however, does specify that fprintf() calls from different threads of the same process do not interfere with each other, and if that if they both specify the same target file, their output will not be intermingled. POSIX-conforming fprintf() is thus thread-safe in that sense. I cannot speak to whether standard C++ places requirements that have the effect of requiring fprintf() to be thread safe. I would find that surprising, but it could be true. To be sure, it is safe to write to an iostream object from multiple threads, but that does not imply that the same is true of fprintf(). But none of that really matters if you're asking about Windows C or C++, however, which (the C in particular) are well known to be non-conforming. If you want to know about Windows's fprintf() in particular, then that has already been answered here (yes). 
c-3-93	X	TCP SYN ACK manual construction? Im trying to manually create a TCP syn ack to a received ack packet. The spoofed synack however is being dropped by the source. The syn ack checksum shows as erroneous when observed from wireshark. below is the code i use for constructing the packet built with the help of some online sources. what seems to be the problem here? 
c-3-94	X	create 2D array and pointer to &array-1 For a display driver in an arm project, I want to access the buffer as 2D array to access it like this: To write the buffer out to the display via I2C I want to write the whole buffer out, but need to prepend it with 0x40. Is there a way to declare display_buffer[4][128] so that it has one byte before it and a pointer that points to it? I tried but of course the compiler thought that this was not a good idea ('invalid initializer') You need to define _display_buffer as an array large enough to hold your 2D array plus 1 byte, and display_buffer as a pointer to an array (which you can index as a 2D array) instead of a 2D array: 
c-3-95	X	Reader-Writer: one reader at a time, and writer priority How to implement the Reader Writer problem, where only one reader is allowed at a time, and only if no writer wants to modify the shared structure? Does this solution make any sense? Thread priorities are your friend here, plus if you're being strict about it the PREEMPT_RT kernel patch set too. Make the writer a higher priority than the readers. I'm presuming you have two semaphores to a) guard access to the structure (mutex), and b) flag that the structure has been updated (w). In which case you don't need to wait for w in the writer, and you don't need to signal w in the reader. The reader should wait for w, and then wait for mutex, read, then post mutex. The writer should wait for mutex, write, and then signal mutex and w. The the priority of the writer thread and the PREEMPT_RT kernel (which resolves priority inversions) means that the writer will be given mutex ASAP, no matter what the reader is doing (in fact the priority of reader will be temporarily bumped upwards to ensure that it gets to the point of signalling mutex as quickly as possible). 
c-3-96	X	C - if statement being skipped I want to find IDs of each vertex in graph structure.ID of vertex is the adding place of that vertex.For example: If i added "CSE10" first, then it's ID is = 0. For this problem i wrote a function like this. And call this function like this int from_id = findID(graph, from); and the from is "CSE10". And graph->vertex[0].name is equal to "CSE10". But in any case, my program run the if statement. It does not print here string. Normally in the first run of the for loop, graph->vertex[i].name == name2 satisfies the if statement. It returns i = 4 which is equal to graph->vertex_count PS: All string are const char * format. And i can easily write the all vertices of graph. So there is no problem in graph->vertex[i].name 
c-3-97	X	Zero-length array inside nested structure causing StackGuard runtime crash I'm working on a project which uses a structure to represent various different flavours of event. The structure has some common fields shared by all events (e.g. event type); and then has some event-specific fields which are represented by a union; something like this: (This is of course a simplified example: in real life, we have other structures in the union d which represent different events). In use this structure is dynamically allocated with sufficient space to hold sizeof(struct nested_event) plus a variable-length string which is copied into .d.event1.string. I've recently discovered that this construct causes runtime crashes when compiling at -O1 or above due to StackGuard checking when copying data into the string member of the array using strcpy. Here's a full test program illustrating the crash. Use of struct nested_event triggers the crash, while use of struct flat_event avoids it: Compiled using gcc 4.8.4 on Ubuntu 14.04 as follows: The test program then crashes when passed a string with an upper-case first letter: Passing a string with a lower-case first letter triggers use of the flat event structure, and that doesn't trigger a crash: This crash is similar to the one described by this question, although not exactly the same since the code in the linked question doesn't have a zero-length array in the structure. The use of a zero-length array as the last member of a structure is not atypical in C code (although I understand the usage has changed through the versions of the C standard), and is supported by GCC as an extension, in particular: A structure containing a flexible array member, or a union containing such a structure (possibly recursively), may not be a member of a structure or an element of an array. (However, these uses are permitted by GCC as extensions.) So on the face of it, this use is reasonable. But clearly something about it is off from StackGuard's perspective! If I build without optimisation, I don't hit this crash (and valgrind doesn't complain about out-of-bounds access). If I build with clang I can use various different optimisation levels with no problems. I can of course work around this problem by tweaking compiler options, or by refactoring the code using the nested event structure. However, I'd like to better understand the root cause of the issue before doing so. Our project is Linux-specific, and will usually be built using gcc, although I'd prefer not to be tied to a specific toolchain. Is the definition of struct nested_event valid C? By adding the nested structure, are we accessing beyond the end of the object when writing to .d.event1.string and thereby causing undefined behaviour? Or alternatively, is this crash just a GCC oddity which we can work around and ignore? 
c-3-98	X	WSASendTo Periodically Fails With 10014 I have created a UDP socket, and am trying to send some data over it using WSASendTo. This works sometimes, but fails sporadically (with WSAEFAULT) and I can't seem to track it down. First, I setup Winsock2 and create my UDP socket: Then I get the addr structure setup with my IP and port: Finally, I send my data using WSASendTo: At this point ret equals -1 and a call to WSAGetLastError returns either 997 (WSA_IO_PENDING, which I would expect) or, about half the time, 10014 (WSAEFAULT). According to the documentation, this means that: The lpBuffers, lpTo, lpOverlapped, lpNumberOfBytesSent, or lpCompletionRoutine parameters are not part of the user address space, or the lpTo parameter is too small. I've gone through and verified that these things appear to be correct. That is, the addresses seem to be reasonable and the size of things like lpTo are correct. Any idea why this would sometimes fail? 
c-3-99	X	after getch() the program ignores the if even after putting 1-6. I have a problem with my code. It always ignoring the if(userDigit<=6 && userDigit>=1).. Can someone tell me what is wrong here? getch() returns a int representing the encoded value of the input character, not the digit itself. Fortunately the C standard allows you to write to transform to the actual numerical value of the digit. Any non-digit input will be outside the range (0 - 9). (For the avoidance of doubt '0' is an int type in C.) Naturally that will break your putch function (crudely you could transform back by adding '0'), but I suspect you have it there for debugging purposes and you can safely remove it. Change to That will work because '0', '1', ... symbols have consequential ASCII codes so the comparisons are valid. 
c-3-100	X	Number of Characters in a pointer of unsigned chars in C I have a function that concatenates characters in a pointer and I need to return its size, but I can not get the total of characters, this is the function: This is how I occupy it: The problem is that buffer_len is always zero and i expect to be 16. When you get to the strlen call, dest is pointing to one element past the null byte at the end of the string. This invokes undefined behavior since that byte and the ones after were never initialized. You need to keep track of the original value of dest and subtract: The behaviour of your code is undefined. You are modifying the input pointer dest that you've passed as a parameter. At the point of calling strlen((char*) dest), dest points to one past the NUL that you added. You cannot then predict the behaviour of strlen as it will be reading uninitialised elements of buffer. The simplest fix is to take a copy of dest when you enter the function, and subract that original value from the final value of dest. That will be the string length. 
c-4-1	X	Manual HMACSHA1 calculation differs from openssl results I am trying to implement HMACSHA1 by Hand, to check if our serviceprovider or we calculate a wrong HMAC for a Support-Ticket (a SOAP call, hence the xml content). The problem is, I stick to NIST Specification for HMACs and get a different result by Hand and when using openssl HMAC functions. The following code prints: while the result by openssl is the same we get in our application - so I assume, on the basis that openssl is so commonly used, that my result is wrong - but where is my error? This is the spec I refer to: http://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.198-1.pdf here is my code: The bug is simple. The ipad and opad need to be (input) block size in length, not the length of the digest output. I.e. they must be 512 bits (64 bytes) for SHA-1, not 20. I.e. and then change the DIGESTSIZE to INPUT_BLOCK_SIZE for wherever the length of ipad, opad is needed. Result: From Wikipedia K' is another secret key, derived from the original key K (by padding K to the right with extra zeroes to the input block size of the hash function, or by hashing K if it is longer than that block size) (emphasis mine). P.S. It would be better to use the SHA1_Init/Update/Final, as then lots of copying would be skipped. You can also avoid allocating memory for the ipad and opad separately by first calculating ipad and after it has been used, then xorring in place by 0x6a to get the opad. 
c-4-2	X	C++ Linux code breaks the Windows build because missing headers means the functions are undefined I am developing a piece of software in C++ using Visual Studio on Windows. From the beginning, I would like to have it run on both Windows and Linux. Obviously, I won't compile the Linux binary on a Windows machine, but I still want to use Visual Studio to write the code. When it comes to headers, I am selecting while file to use based on pre-processor definitions. A very rudimentary and simple example: For the header it works just fine. But the .cpp-file for the Linux implementation breaks the build on Windows. That's because the Linux .cpp-file will get compiled no matter what, even on Windows. And because the Windows machine is missing Linux-headers, the function it uses will be undefined. Question 1: What is the "industry standard" to deal with this? Question 2: Is it reasonable to wrap both the .h and .cpp-files in "#ifdef PLATFORM" so that the code will only be enabled on the correct OS? Any code specific to one operating system needs to have the proper #ifdef's set up, whether in header files or source files. But the .cpp-file for the Linux implementation breaks the build on Windows. That's because the Linux .cpp-file will get compiled no matter what, even on Windows. Why are you compiling the Linux-specific file for a Windows build? Question 1: What is the "industry standard" to deal with this? If you're going to create separate source files for Windows-specific and Linux-specific code, then the whole point would be that you use only the appropriate one for the current platform when you build. An alternative approach would be to have both implementations in the same source file, using conditional compilation to choose which parts to use. That's pretty conventional, too, especially where the parts that vary are smaller than whole functions. Question 2: Is it reasonable to wrap both the .h and .cpp-files in "#ifdef PLATFORM" so that the code will only be enabled on the correct OS? It would be strange to go to the trouble of creating separate, platform-specific source files and then use conditional compilation to include them all in every build. It could work, but it would not fall within my personal definition of "reasonable". 
c-4-3	X	Valgrind invalid free, memory leak I get invalid free, and memory leak. Here is my code: Invalid free at points: and: My program in action: Valgrind output (with the same "user" input): Correct me whether I should have pasted not the whole program, but the main parts of it, or some kind of working prototype. However, the main details here are lines containing keywords "malloc" and "free". UPDATE: Appending two functions from the library, that are used here: "get_pos_num" and "get_word": Well the obvious problem is here: you allocate memory for freq->word and the overwrite it with words[i]. You later on free the words and then free the many freq you've assigned into the histogram structures. If you want to copy words[i] you should either use or Also noticed you do the same thing here too both will cause you to leak memory as you're losing track of the allocated memory. And another thing (I seem to be Columbo today) is that you have sizeof(MAX_STRING * sizeof(char)) in the malloc above which should be just MAX_STRING * sizeof(char). Not sure entirely what result you'd get, but it'd be either 4 or 8 bytes. 
c-4-4	X	How C Program do Increment Multiplication? I need some explanation for the following code. Why The output is 49 42 instead of 42(6*7) 36(6*6) 
c-4-5	X	How to return two arrays modified from a function with memcpy? I try to copy two arrays thanks to a function and memcpy. Test function has to return two arrays modified. The first array is correctly copied but when I try to do the same thing with memcpy to the second, there is a Segmentation fault (core dumped). Example code: What is the problem ? I don't understand this error. I try to copy two arrays What is the problem ? The problem is that there are no "two arrays" in your program. There's just one array, tab that is local to the test function. Your program uses the values of tab1 and tab2 pointers without initializing them. Therefore the behaviour of the program is undefined. I don't understand this error. The error means that your program tried to access memory segment that it wasn't supposed to, and the operating system killed the process as a result. It is a way of the OS to prevent arbitrary behaviour of the program. This sometimes happens when the program has undefined behaviour. Perhaps the simplest way to fix your program is to declare tab1 and tab2 as arrays, rather than as uninitialized pointers: Changing the sample code a bit shows both error and solution When run this gives tab2 is an undefined variable and starts as value 0. The memcpy tries to copy data to memory location 0 and this is the segmentation violation. When the pointers are pointed towards some storage locations with Malloc the memcopy s work. In the subroutine 'tab' is an array of 2 ints but tab1 and tab2 are single pointer locations in the body of the code. Memcpy uses the size of the local structure tab[2] and assumes the destination payload (which is the address of a pair of int) is big enough. This could become a classic buffer overrun error. HINT1 Best not to use the same name 'tab' for two very different structures. HINT2 memcpy src and destination sizes need to be the same or checked for overruns. 
c-4-6	X	Remove all occurences of an element in a one-way linked list I have spent several hours writing a function that - given a linked list one-way list, will remove all of the occurrences of a given element. This is the function I have managed to write: In my example, I am using a simple list which looks like this: 2->1->1 and the output of my program after I run remove_by_value(&head, 1): Which is a far cry from the desired effect. The problem is that I don't understand where my mistake is. This is the algorithm that I wanted to apply: Check if the head of this list has the desired value. If so, move the head to the right and remove the first node. Repeat it until the value of the new head is different than the argument of this function Check if the value of the next node equals the desired value. If yes, delete this node and link the current node with the node after the one that has been deleted. I know that my algorithm is not perfect - for example it does not handle the case when the node does not point to anything. But the kernel of the matter is that I don't understand why my program behaves like this. Could you give me some suggestions? Is there a better way to write this algorithm? EDIT: I thought it might be important and so I have decided to include my print function as it could cause some potential memory leaks in light of my previous function: I think this should work, too complicated to verify though. Will delete the post if it doesn't. Explanation (thanks to comments below): The Original code tests whether iterator->next should be deleted but mistakenly deleted iterator it self. e.g. 2->1->1, the 2 will be deleted because the next node is 1 but it is actually the 1 that should be deleted. When deleting an element in an linked list, it is not enough to free the node that should be deleted. It is also necessary to set the previous node's "next" variable to the node after the deleted element. e.g. 2->1->3 OP's code: 2->Null Nothing->3; Correct: 2->3 P.S. There are problems with my answer, but it seems that I can't delete my accepted answers. Better answer from below: https://stackoverflow.com/users/2877241/vlad-from-moscow Your function is too complicated and has a bug because in the second while loop there is no check whether head is equal to NULL and the loop changes the local variable iterator instead of changing nodes themselves. The function can be implemented simpler. For example Here is a demonstrative program Its output is So the first loop of your removal function is OK, but a little clunky. This bit of code is pretty redundant as whatever value next is, you're assigning it to *head But all it's doing is removing the first node whilst it matches the value you're looking for, which isn't particularly useful. It's the next loop that is the problem as it's not updating your list properly. Imagine your list is 1 -> 2 -> 3 and you're removing 2. You iterate over your list until you get to the middle node. You take a temporary copy of the current node, point yourself at the next one and then free it. Which leaves your list like 1 -> 2??? 3 as you haven't updated the previous node to point to the next node. You can do the whole thing though with just one loop. You use head as a way of tracking whatever was pointing at the current node. So at the start of the loop it points at the start of the list. If the node doesn't match, you have it point at whatever the current node's next is pointing at. If it does match, you again take a temporary copy of the current node, but this time you update *head to point to the next node. So it'll maintain the previous connection or start of the list. Your function is too complicated and has a bug because in the second while loop there is no check whether head is equal to NULL and the loop changes the local variable iterator instead of changing nodes themselves. The function can be implemented simpler. For example Here is a demonstrative program Its output is There was a time when programmers had to do this sort of thing a lot, and after you do it enough times your code gets really efficient. To help keep that ancient art alive, here is what a function like this should look like: 
c-4-7	X	Dodging the inaccuracy of a floating point number I totally understand the problems associated with floating points, but I have seen a very interesting behavior that I can't explain. The output is: x = 1028.254761 z = 1028.254780 Now if floating numbers failed to represent that specific random value (1028.25478) when I assigned that to variable x. Why isn't it the same in case of variable z? P.S. I'm using pellesC IDE to test the code (C11 compiler). I am pretty sure that what happens here is that the latter floating point variable is elided and instead kept in a double-precision register; and then passed as is as an argument to printf. Then the compiler will believe that it is safe to pass this number at double precision after default argument promotions. I managed to produce a similar result using GCC 7.2.0, with these switches: The output is The number is slightly different there^. The description for -fexcess-precision=fast says: -fexcess-precision=style This option allows further control over excess precision on machines where floating-point operations occur in a format with more precision or range than the IEEE standard and interchange floating-point types. By default, -fexcess-precision=fast is in effect; this means that operations may be carried out in a wider precision than the types specified in the source if that would result in faster code, and it is unpredictable when rounding to the types specified in the source code takes place. When compiling C, if -fexcess-precision=standard is specified then excess precision follows the rules specified in ISO C99; in particular, both casts and assignments cause values to be rounded to their semantic types (whereas -ffloat-store only affects assignments). This option [-fexcess-precision=standard] is enabled by default for C if a strict conformance option such as -std=c99 is used. -ffast-math enables -fexcess-precision=fast by default regardless of whether a strict conformance option is used. This behaviour isn't C11-compliant Restricting this to IEEE754 strict floating point, the answers should be the same. 1028.25478 is actually 1028.2547607421875. That accounts for x. In the evaluation of y / (float)100000.0;, y is converted to a float, by C's rules of argument promotion. The closest float to 102825478 is 102825480. IEEE754 requires the returning of the the best result of a division, which should be 1028.2547607421875 (the value of z): the closest number to 1028.25480. So my answer is at odds with your observed behaviour. I put that down to your compiler not implementing floating point strictly; or perhaps not implementing IEEE754. Code acts as if z was a double and y/(float)100000.0 is y/100000.0. An important consideration is FLT_EVAL_METHOD. This allows select floating point code to evaluate at higher precision. Except for assignment and cast ..., the values yielded by operators with floating operands and values subject to the usual arithmetic conversions and of floating constants are evaluated to a format whose range and precision may be greater than required by the type. The use of evaluation formats is characterized by the implementation-defined value of FLT_EVAL_METHOD. -1 indeterminable; 0 evaluate all operations and constants just to the range and precision of the type; 1 evaluate ... type float and double to the range and precision of the double type, evaluate long double ... to the range and precision of the long double type; 2 evaluate all ... to the range and precision of the long double type. Yet this does not apply as z with float z = y/(float)100000.0; should lose all higher precision on the assignment. I agree with @Antti Haapala that code is using a speed optimization that has less adherence to the expected rules of floating point math. 
c-4-8	X	Why does coverity complain when using calloc with unsigned int I have the following: which functionally works as expected but coverity complains with: Parse warning (PW.INCOMPATIBLE_ASSIGNMENT_OPERANDS) 1. incompatible_assignment_operands: a value of type "int" cannot be assigned to an entity of type "unsigned int *" and I don't entirely understand why The error message suggests that Coverity thinks that calloc returns an int, which can happen if you haven't included stdlib.h (for calloc) in the older C. But this is not allowed in modern C (i.e., no implicit declarations allowed in C99 and above). "... which functionally works as expected" No, this code cannot compile on any version of C, new or old. In older versions of C called C90, you could forget about including stdlib.h and the compiler would then treat calloc as a function returning int, rather than void*. This is what the static analyser is on about. But the code should not even compile, because it would have resulted in a diagnostic even on a C90 compiler - you cannot assign int to an unsigned int*. It has never been valid C. In standard C, the code wouldn't even get that far, because the compiler would tell you it has no idea what the identifier calloc is. All of this suggests that your compiler is 1) old and 2) non-compliant. 
c-4-9	X	scanf from child scans whatever parent had already scanned My program, along with its two child processes all read input from stdin in an orderly fashion. The problem I found was that this: Given this input: Parent process reads 32, that means the 1st child process needs to read 2 more numbers. The parent process then sends 1 byte through pipe to signal the 1st process it needs to read two numbers. When the child process picks up the signal and starts reading those numbers, instead of 51453a and 140 the child reads 32 51453a. I've been struggling with understanding why this happens, how I can fix it or better yet, how I can avoid it. I'm running on Mac OSX Edit: this issue only occurs when the input is being redirected from a file (running ./polygon < in.txt). When running from console directly it does not happen. Also added more code to provide a better picture. It's called buffering. When you fork the child is an almost complete copy of the parent process, including things like input buffers. The best solution (IMO) is to not read from standard input in the child. Instead have the parent process do all input, and then send it all over the pipe to the child. @Someprogrammerdude already explained why this happens. If indeed you cannot avoid parent and child (or multiple children) reading from the standard input, then you have the alternative of setting it to unbuffered via the setvbuf() function. If you do this, you should do it first thing, before anything at all is read from stdin: Do note that this has performance implications. 
c-4-10	X	Is it possible to count all paths in a grid using a set of specific movements with memoization? The problem to solve is the following: How many paths are possible for one to take in a grid, starting at position (1,1) which is left bottom and ending up at (h,m) which is right upper corner given that one cannot pass in the same cell twice? (meaning a path can't self-cross) This is very easy to do with memoization if the allowed movements are only right, up and diagonally, but here the rules are different. The allowed movements are: up (y+1,x) with a cost of 0 right (y,x+1) with a cost of 0 diagonally (y+1,x+1) with a cost of 0 left (y,x-1) with a cost of 1 down (y-1,x) with a cost of 1 horse jump (y+1,x+2) with a cost of 2 the maximum cost allowed is 10. I have wrote this backtracking algorithm the variable count and sum are just two ways of giving the same result. In the 3D array C I am generating mxh tables for each cost, since the cost limit is 10, I generate 11 tables. And the to get the result I just sum the value in the (h,m) cell in each of these 11 tables. The fact that I can generate one table for each cost makes me think it it is possible to generate each and every one of these tables in a polynomial time, instead of exponential, which is the case here. Thus I think that it might be possible to use memoization. The output for a 3x3 grid is the following: So, as you can see, the count variable that is incremented whenever it hits the right upper corner cell is just the same as the sum of the value of that cell in each of these tables (59 = 13+16+10+4+8+4+1+2+1+0+0). It's really easy to generate the cost 0 table using memoization and thus in polynomial time, since each cell is given by the sum of the cell on the left, above and in the diagonal, but what about the others? I don't see any pattern there. Thanks for your suggestions! 
c-4-11	X	Any attempt to put a string to the screen in Protected Mode causes reboot I have just recently gone into Protected Mode when developing an OS from scratch. I have managed to get into C and make functions to print characters to the screen (thanks Michael Petch for helping me reach this stage). Anyway, whenever I try to make a routine that loops through a string literal and prints every character in it, well, there's a bit of a problem. QEMU just goes into a boot loop, restarts again and again, and I am never able to see my beautiful green-on-black video mode. If I move this out of a routine and print it character-by-character in the kmain() function (that part of which I have removed), everything works fine and dandy. Here's the file where I try to implement a string printing function: vga.c - I read my kernel into memory with this bootloader code: I have an assembly stub at the start of my kernel that enters protected mode, zeroes the BSS section, issues a CLD and calls into my C code: I have a specialized linker script that places the bootloader at 0x7c00 and the kernel at 0x7e00. What's the problem and how can I fix it? I've made my git repo available if more information is needed. TL;DR : You haven't read your entire kernel into memory with your bootloader in start.asm. Missing code and/or data is causing your kernel to crash with a triple fault which results in a reboot. You will need to read more sectors as your kernel grows. I noticed that your generated lunaos.img is larger than 1024 bytes. The bootloader is 512 bytes, and the kernel after it is slightly more than 512 bytes. That means the kernel now spans multiple sectors. In your kernel.asm you load a single 512-byte sector with this code: In particular: This is at the heart of your problem. Since you are booting as a floppy I'd recommend generating a 1.44MiB file and placing your bootloader and kernel in it with: The first command makes a 1.44MiB file filled with zeros. The second uses conv=notrunc to tell DD not truncate the file after writing. seek=0 tells DD to start writing at the first logical sector in the file. The result would be that os.bin is placed inside of a 1.44MiB image starting at logical sector 0 without truncating the original file when finished. A properly sized disk image of a known floppy disk size makes it easier to use in some emulators. A 1.44MiB floppy has 36 sectors per track (18 sectors per head, 2 heads per track). If you run your code on real hardware, some BIOSes may not load across a track boundary. You're likely safe reading 35 sectors with your disk read. The first sector was read by the BIOS off track 0 head 0. There are 35 more sectors on the first track. I'd amend the line above to be: This would allow your kernel to be 35*512 bytes long = 17920 bytes with minimum hassles even on real hardware. Any larger than that you will have to consider modifying your bootloader with a loop that attempts to read more than one track. To complicate matters you'd have to concern yourself that larger kernels will eventually exceed the 64k segment limit. The disk reads would probably have to be modified to use a segment (ES) that isn't 0. If your kernel gets that large your bootloader can be fixed at that time. Debugging Since you are in protected mode and using QEMU, I highly suggest you consider using a debugger. QEMU supprots remote debugging with GDB. It's not difficult to set up and since you have generated a ELF executable of your kernel you also can use symbolic debugging. You will want to add -Fdwarf to your NASM assembly commands right after -felf32 to enable debug information. Add the -g option to your GCC commands to enable debug information. The command below should start up your bootloader/kernel; automatically break on kmain; use os.elffor debug symbols; and display the source code and registers in the terminal. There are many tutorials on using GDB if you search with Google. There is a cheat sheet that describes most of the basic commands and their syntax. If you ever find yourself in the future having troubles with Interrupts, GDT or paging I recommend using Bochs for debugging those aspects of an operating system. Although Bochs doesn't have a symbolic debugger it makes up for in being able to identify low level problems more easily than QEMU. Debugging real mode code like bootloaders is easier in Bochs given that it understands 20 bit segment:offset addressing unlike QEMU 
c-4-12	X	C float or double in printf format specifier and pow function First printf() gives output 0.000000 but second printf() gives output 1.000000. Why? Using Codeblocks on Windows 7 64 bit. Using gcc command to compile give me an .exe that outputs 1.000000 for both statements. If I compile pressing F9 on Codeblocks, I get 0.000000 for the first statement and 1.000000 for the second. Finally, if I remove #include <stdio.h> from source code in Codeblocks, all give me 1.000000 (no warnings or errors). Your code should print the same value for both lines on a C99 or C11 compiler. All float arguments to printf are always converted to double, and %lf and %f both do the same thing (print a double). In the C89 standard, the %lf specifier is undefined behavior and doubles should only be printed with %f. So perhaps you're using an old compiler which doesn't support the C99 standard. Relevant sections of the standards regarding %lf: C99, 7.19.6.1/7: l (ell) [...] has no effect on a following a, A, e, E, f, F, g,or G conversion speciï¬?er. C89, 4.9.6.1: [...] an optional l (ell) specifying that a following d , i , o , u , x , or X conversion specifier applies to a long int or unsigned long int argument; an optional l specifying that a following n conversion specifier applies to a pointer to a long int argument; [...] If an h , l , or L appears with any other conversion specifier, the behavior is undefined. 
c-4-13	X	Equality of array to a dIfferent type of variable This is a program to reverse a string. I don't understand why the program still works if I define temp as an int instead of char in function reverse(). Since the elements of the array v[] are char type how do the computations work? There will be truncation, and you will get warnings from the compiler. Since characters are small integers too, assigning to/from integers of a different size is conceptually not so complicated, but in practice of course you can drop bits due to the differences in precision. There's of course no point in having temp be an integer, and I'd instead go for a const char. An int can store all possible values that a char can store, plus more. So assigning a char value to an int preserves that value, and assigning back to a char also preserves the value since the value came from a char. You're fine in this instance, since any char instance is guaranteed to fit into an int. (Note that a literal like 'j' in C is an int type with a guarantee that it can fit into a char). 
c-4-14	X	C Warning : Function was used with no prototype before its definition I'm facing a warning while compiling a C project: myFunct was used with no prototype before its definition. I do not understand this warning since the prototype is indeed before the call of the function. Here is my code (simplified): In C, void myFunct(); is a function declaration, that does not include a prototype. It is an obsolescent feature dated back to K&R (pre-standard) C, where function calls and declarations were not checked. Replace the declaration with: Your code provides a forward declaration for function myFunct(), but that declaration is not a prototype because it does not declare the types of the (zero) function parameters (see below). The declaration you provide declares the function to return nothing and to accept a fixed but unspecified number of parameters,* which you will appreciate is insufficient for the compiler to fully verify the function call. An actual prototype for that function would be this: Your code is nevertheless completely valid. K&R-style function declarations are still allowed, and they satisfy C's declaration-before requirements. They're just not good style. Details: C2011 6.2.1/2 says, A function prototype is a declaration of a function that declares the types of its parameters. C2011 6.7.6/1 distinguishes between a "parameter type list", used in the ANSI declaration style and in particular for function prototypes, and an "identifier list", used in K&R-style declarations. Neither can be empty, but (only) the latter can be omitted altogether, so a function declaration with empty parentheses is a K&R-style declaration, which does not provide a prototype. *C++ differs from C on this. 
c-4-15	X	In C, is single & and single | valid so as to avoid short circuit? Also please give some examples of utility of same in C# && is logical AND and || is Logical OR In C#, for example, Now for && only if both the conditions are true, then the if block gets executed, else else block gets executed. So for input 2 conditions num>=0 and num<=10 are both true. So condition num>=0&&num<=10 is true and if statement gets executed. get output Hi. For input -2 condition num<=10 is true but condition num>=0 is false. Since both the conditions should be true, condition num>=0 && num<=10 is false so instead of for statement else statement gets executed. So the output is Hello. For input 12 condition num>=0 is true but condition num<=10 is false. Since both the conditions should be true, condition num>=0 && num<=10 is false so instead of for statement else statement gets executed. So the output is Hello. Now, in this case if the first condition num>=0 comes out to be flase compiler does not check the second condition num<=10, since in case of && if both the conditions are true, only then num>=0&&num<=10 is true. Now consider the following program - Here instead of &&, & is given The output will be same as the truth table for && and & are same. But here, during evaluation of the condition num>=0&num=<10, if the input is -2, then first condition num>=0 is false. But unlike && even after first condition is false second condition num<=10 is evaluated, and then the control passes on to the next statement. Similarly for logical OR; consider the following C# example - If input is -2, first condition num<=0 is true and second condition num>=10 is false. Since in || num<=0||num>=10 is true if either of the two statements are true, so if block gets executed and the ouput is Hi. If input is 12 first condition num<=0 is false but second condition num>=10 is true. For || num<=0||num>=10 is true if either condition is true, so if block gets executed and the output is Hi. If input is 2 first condition num<=0 is false. Also second condition num>=10 is false. Since both the conditions are false num<=0||num>=10 is flase and else block gets executed. So output is Hello. Now consider the following program - Here instead of || | is used. Both the programs generate same output as truth tables of || and | are same. But when || is used and if input is -2, first condition num<=0 is true. Since for num<=0||num>=10 to be true either conditions needs to be true and first condition num<=0 is already true, compiler doesn't check the second condition num>=10 But when | is used and here also the input is -2, even after evaluating the first condition num<=0 to be true, compiler checks the second condition num>=10 Concept of ""Short Circuit" in C Let us consider the following example - Expected output: Real output: It is because in the statement c = ++a && ++b; when the value of a is incremented by 1 it's new value is 0. 0 is evaluated to be false. In && the whole condition is false if either the first condition or second condition is false. So here as ++a is evaluated to be false the condition ++b is never checked by the compiler. So b is never incremented and its value stays 0 Now consider the following example - Expected output: Real output: Here in the statement ++a is 1 and 1 is evaluated as true. In || the whole condition is true if either the first condition or second condition is true. Here since first condition ++a is true, second condition ++b is never checked by the compiler. So the value of b is never incremented and stays 10. Now, my question - Is & and | valid in C so that short circuit can be avoided? In C# bool can only be true, false or null. Unlike C 0 is not false and all non-zero value is not true. So short circuit can never take place in C#. So in C# what is the utility of & and |? The single-character operators & and | are bitwise AND and OR, respecitvely. They have nothing to do with boolean tests, for which the short-circuiting && and || are used. I don't quite see the point of your questions: They are "valid", they are C operators, but their use is not for boolean logic, they are for computing binary results. In C# they seem to serve dual purposes, described as "Integer bitwise AND, Boolean logical AND" in the operators documentation. But I don't use C#. & and | are not logical operators. Using them as logical operators takes advantage of the C language feature that zero is false and non-zero is true (which is not fully type safe). C# is a fully type safe language, so logical expressions must be boolean. This means that logical operators will only work on booleans (&&, ||) whereas bitwise operations only work on integral types (&, |, ^) Basically, the purpose of the &, | and ^ operators is not to do logical tests in C, its just that the language is type-unsafe enough to allow this as a side-effect. EDIT: I stand corrected, (&, |) are also apparently valid logical operators in C# (just shorthand for &&, ||) Here are the answers to your questions: Is & and | valid in C so that short circuit can be avoided? No. The & and | operators in C mean different things compared to their C# logical counterparts. In C, & and | are bitwise operators. They will evaluate both the sides and combine the bits of the resulting values according to the operator. Afterwards, if the resulting value is used in a logical context it will be processed as 0=false, everything else=true. This is not the same as short-circuit logical operators as C# have. In C# bool can only be true, false or null. Unlike C 0 is not false and all non-zero value is not true. So short circuit can never take place in C#. So in C# what is the utility of & and |? The purpose of & and | as logical operators in C# is to support non-short-circuit evaluation. Take this example: Here, if s is indeed null, the value of the first operand is false, hence the whole expression can never be true and thus the second operand, s.Length > 0 is not evaluated. Contrast to this: Observe that I switched to the non-short-circuit & operator here. Here, if s is null, both operands will still be evaluated and the code will throw a NullReferenceException. In some situations, it may be beneficial and required that you evaluate both sides even if you know the result will never be false regardless of what the second operand says. In those situations, you would use the non-short-circuit operators. In C, the operators mean this: | = bitwise OR operator & = bitwise AND operator || = logical OR operator that short circuits && = logical AND operator that short circuits In C#, the operators mean this: | = bitwise OR operator if applied to integers, logical non-short-circuit OR operator if applied to bools & = bitwise AND operator if applied to integers, logical non-short-circuit AND operator if applied to bools || = logical OR operator that short circuits && = logical AND operator that short circuits 
c-4-16	X	What is the difference in assignment between C and Python? running 5 times: the values of B in Python will be 1, 1, 2, 3, 5. the values of B in C will be 1, 1, 1, 1, 1. Would anyone explain this to me? 
c-4-17	X	How to increment the value of a structure with multiple thread in C i want to increment the value of a counter stored in a structure. 3 threads are coming into the fonction tattoo_shop to increment the number of people but for some reasons the value of number_of_people remain the same. I tried to reproduce the case sequentially and it's working. Is there something special to do as i'm working with threads ? Thank you :) Output : Your code is nonsense since Queue the_queue; is a local variable, not a shared one. But had it been allocated at file scope, or as static, the code is mostly fine. Pedantically, you should not read the shared object outside mutex guards, because writes to the object from elsewhere are not guaranteed to be atomic. Slight adjustment to fix this: 
c-4-18	X	Make word lowercase in C with function I'm not sure what the problem is. The function seems to be working well, but in the main function, when testing with a printf, it doesn't show the result. You've never allocated space for the pointer motf in function MotMiniscule: This is undefined behavior because the address in motf is indeterminate. You should give it some space to point to: The full code should be: As pointed out by John Bode, the use of motm is totally redundant. You can safely remove it. Besides, the size of the dymanical allocation should rely on the length of mod. So a refined version of the code is this. 
c-4-19	X	How can I use keys from OpenSSL for ECDSA (prime256v1) with easy-ecc? I am trying to use OpenSSL generated keys with Kenneth MacKay's easy-ecc library but I am struggling. To test, I've generated keys and dumped them: Imported them into a small harness based on a test in the pr using curve secp256r1, but this never passes. I am not sure if I am doing something silly while importing the keys, or something else but this is not passing. Any ideas as to what I am doing wrong? I guess I should have waited an hour before posting that question. easy-ecc works with compressed points. I dumped a compressed public key and used that with success. There is also a fork by arekinath that supports uncompressed points. Now if only I could get my micro-ecc code working... 
c-4-20	X	C: How to insert string inside a grid of characters I am trying to make a search word puzzle where the program chooses at random 4 words for the user to find. So far I have created the grid with random characters and made a list of random words that are printed below the grid. I've tried using strcpy to insert the words inside the grid but have not managed to succeed. Any help would be appreciated. This is my code: 
c-4-21	X	Initialize multi-dimensional array I have this matrix that holds a 4x4 array of double: And here I declare my mat And i want to initialize my mat with zeros: And got this error: expression must be a modifiable lvalue And: '=': left operand must be l-value I also tried this: EDIT: Another question is how to initiate mat ? i want to initiate my mat with zeros: Then you could simply code: or (and {} instead of {0} would also practically work, even if non-standard) and you could even use memset to clear the zone (with <string.h> standard header): or BTW, optimizing compilers like GCC (invoked as gcc -O2 -march=native) are likely to generate in practice the same machine code in all cases, if m1 or data is an automatic variable (on your call stack). However, assignments of arrays (m1.data = data;) is illegal (because arrays decay into pointers). And your title is wrong: C has no multi-dimensional arrays, only (mono-dimensional) arrays (perhaps arrays of arrays, arrays of structures, etc...). Your best shot would be to try double data[4][4] = {0} or {{0}} (depending on your compiler) Let me know if this works! The problem is not in your initialization of the array data, but in the following assignment: In order to copy an array you need to copy the elements of the array individually: You could explicitly initialize the array as follows. The problem is that you cannot assign an array to a struct, nor an array to an array. The C syntax does not allow it. And if you want to initialize a variable, you should not use assignment. These are different things; MAT_A.data = data; is assignment. This is initialization: As for assignment, what you can do is assign a struct to a struct, for example by using a compound literal: 
c-4-22	X	My c program runs well in codeblocks v16.01 but not in the IDE that codechef uses link of the problem: https://www.codechef.com/problems/GIT01 The problem: The cherries are of two colors red and green.cherry of one color must be adjacent to only cherries of the other color, two cherries are adjacent if they share a side. You can replace any cherry of given color with the other color. But there is a cost for each replacement: if you replace a red cherry with a green one, the cost is 5 units and if you replace a green cherry with a red one, the cost is 3 units. Help your friend Chef by making the cake special with minimum cost. My solution: i checked the given input with 2 patterns: RGRGR.... GRGRG.... RGRGR.... ......... and GRGRG.... RGRGR.... RGRGR.... ......... and found out the cost to both of them and storing the minimum in an array. } 
c-4-23	X	Casting inside a function in C The problem is simple , I'm trying to learn the divide and conquor algorithm but I have a problem in the function max (it finds the max of a number) and I need to divide the array two sides , one has 2log(N)-1 and the other has N-2log(N)-1 but I can't cast the m in the function (the program doesn't run because of it so is the casting wrong ? and I hope I have an explanation about the problem. Here is the error message (comment by Antti Haapala below): ==15539==ERROR: AddressSanitizer: stack-overflow on address 0x7ffc3e08cf78 (pc 0x7f24d60f5653 bp 0x7ffc3e08d6a0 sp 0x7ffc3e08cf50 T0) 
c-4-24	X	How could I get Code::Blocks to show errors as I type for C programs? I would have thought this would be on by default, don't we pretty much all want that in an IDE.. I've checked all over it's settings for this. If you could suggest a plugin for Sublime Text to have this ability too, that would be great. My guess is it's all pretty language specific, I know there is Ensime for Scala developers. First, your second question: ...a plugin for Sublime Text to have this ability too. There is a discussion HERE about that. The closest thing to IntelliSense for Code::Blocks (that I am aware of) is a feature called Code Completion. It provides a symbols browser for your projects and code-completion inside the editor. During code-completion, a system of symbols is used to identify the type associated with tokens. It works with C & C++. If your version of Code::Blocks is reasonable recent, this feature is already installed. Settings->Editor... will popup a dialog. On the left slide menu, you will see the glyph for Code Completion: Once there, these options are available for you to select: Note, there are other items in this same slide menu that may be of interest to you, such as Occurrences Highlighting, SpellChecker, etc. 
c-4-25	X	Program stop its execution printing a matrix in C Hi i created a program to print an n*m matrix in C. Code::Blocks compile it well, without any error, but when i lunch the .exe program it goes on error and stop execution. This is my code: Any idea on how to solve? The same version on a mono-dimensional array works fine, but i don't know why the program stops during printing 
c-4-26	X	Raw Sockets Vs Libpcap in sending performance I'm currently attempting to get the best sending performance for an 802.11 frame, I am using libpcap but I wondered if I could speed it up using raw sockets (or any other possible method). Consider this simple example code for libpcap with a device handle already created previously: This code segment is done on a thread for each separate CPU core. Is there any faster way to do this for raw 802.11 frame/packets containing Radiotap headers that are stored in an array? Looking at pcap's source code for pcap_inject (the same function but different return value), it doesn't seem to be using raw sockets to send packets? No clue. I don't care about capturing performance, as a lot of the other questions have answered that. Is raw sockets even for sending layer 2 packets/frames? 
c-4-27	X	GTK not rendering all user interfaces I am using gtk+ with c . I have created menu bar and now want to attach a table with some buttons. I have written all essential API routines but, problem I am facing is, if I first create menu bar then table is not rendered to window and it I render table first menu bar is not seen at its place.. .I don't know why. here is the code The problem is that you are trying to add more than child to the same container, GtkWindow, which only can hold one child. You did create a vbox but after you did not add the GtkTable, which by the way its deprecated since Gtk+ 3.4, to the GtkBox. Also note that you are adding the GtkTable to the window before creation and GtkWindow will complain about that. So, your initTable function should be: In order to compile we had to define true, false and bool (due to the includes, not sure of which framework you are using). Full source code is: Compiled with: 
c-4-28	X	In C11, string literals as char[], unsigned char[], char* and unsigned char* Usually string literals is type of const char[]. But when I treat it as other type I got strange result. With this compiler throw warning saying "pointer targets in initialization differ in signedness", which is quite reasonable since sign information can be discarded. But with following There's no warning at all. I think there should be a warning for the same reason above. How can this be possible? FYI, I use GCC version 4.8.4. The type of string literals in C is char[], which decays to char*. Note that C is different from C++, where they are of type const char[]. In the first example, you try to assign a char* to an unsigned char*. These are not compatible types, so you get a compiler diagnostic message. In the second example, the following applies, C11 6.7.9/14: An array of character type may be initialized by a character string literal or UTFâˆ’8 string literal, optionally enclosed in braces. Successive bytes of the string literal (including the terminating null character if there is room or if the array is of unknown size) initialize the elements of the array. Meaning that the code is identical to this: This may yield warnings too, but is valid code. C has lax type safety when it comes to assignment1 between different integer types, but much stricter when it comes to assignment between pointer types. For the same reason as we can write unsigned int x=1; instead of unsigned int x=1u;. As a side note, I have no idea what you wish to achieve with an octal escape sequence of value 355. Perhaps you meant to write "\35" "5\1\23"? 1 The type rules of initialization are the same as for assignment. 6.5.16.1 "Simple assignment" applies. The first is the initialization of a pointer, the target types of pointers must agree on signedness. The second is the initialization of an array. The special rules for initialization with string literals have it that the value of each character of the literal is taken to initialize the individual elements of the array. BTW, other than you state, string literals are not const qualified in C. You don't have the right to modify them, but this is not reflected in the type. 
c-4-29	X	Printing an array yields garbage values instead When I run the above code it prints garbage values Eg: You want this: Modifying a pointer that has been allocated (aptr here) is a bad idea, because you loose the original pointer. At the end of the first for loop in your program, aptr points after the allocated memory. Therefore in the second loop you are reading the memory that comes after the values you have stored. Reading memory you don't own yields in undefined behaviour (google that). If you really want to do it with a pointer like in your attempt you could do this: Here we use a temporary pointer tempptr that we modify, but we keep the original pointer returned by calloc in aptr. 
c-4-30	X	How to enforce memory ordering with gcc on x86 I want to share a data struct between threads (gcc, Linux, x86). Let's say I have the following code in thread A: Thread B is a periodic task that checks that struct first for the enable flag. I think that the compiler can reorder the writes in thread A, so thread B can see inconsistent data. I am familiar with memory barriers on ARM, but how do I ensure write ordering on x86? Is there a better way than volatile? I just want to set a consistent state in the struct, "flush" everything to memory and set an enable flag at the end. You really should use a mutex (since you mention Pthread), so add a pthread_mutex_lock mtx; field inside shared_struct (don't forget to initialize it with pthread_mutex_init) then and similarily in any other code accessing that shared data. You might also look into atomic operations (but in your case, you'll better use a mutex like shown above). Read some pthread tutorial. Avoid race conditions and undefined behavior. how do I ensure write ordering You don't do that, unless you are implementing a thread library (and some parts of it should then be coded in assembler and use futex(7)), like nptl(7) implementation of pthreads(7) in GNU glibc (or musl-libc). You should use mutexes and you don't want to lose your time implementing a thread library (so use the existing ones). Notice that most C standard libraries on Linux (including glibc & musl-libc) are free software, so you can study their source code (if you are curious to understand how Pthread mutexes are implemented, etc). the compiler can reorder the writes It is not mostly (and certainly not only) the compiler, but the hardware. Read about cache coherence. And the OS may also be involved (futex(2) sometimes called by pthread mutex routines). If you only need to be able to set enable = true, then stdatomic.h with release / acquire ordering gives you exactly what you're asking for. (In x86 asm, normal stores/loads have release/acquire semantics, so yes blocking compile-time reordering is sort of sufficient. But the right way to do that is with atomic, not volatile.) But if you want to be able to set enable = false to "lock out" readers again while you modify it, then you need a more complicated update pattern. Either re-invent a mutex manually with atomics (bad idea; use an standard library mutex instead of that), or do something that allows wait-free read-only access by multiple readers when no writer is in the middle of an update. Either RCU a or seqlock could be good here. For a seqlock, instead of an enable = true/false flag, you have a sequence number. A reader can detect a "torn" write by checking the sequence number before and then again after reading the other members. (But then all the member have to be atomic, using at least mo_relaxed, otherwise it's data race undefined behaviour just from reading them in C, even if you discard the value. You also need sufficient ordering on the loads that check the counter. e.g. probably acquire on the first one, then acquire on the shared_struct->b load to make sure the 2nd load of the sequence number is ordered after it. (acquire is only a one-way barrier: an acquire load after a relaxed load wouldn't give you what you need.) RCU makes the readers always completely wait-free; they just dereference a pointer to the currently-valid struct. Updates are as simple as atomically replacing a pointer. Recycling old structs is where it gets complicated: you have to be sure every reader thread is done reading a block of memory before you reuse it. Simply setting enable = false before changing the other struct members doesn't stop a reader from seeing enable == true and then seeing inconsistent / partially-updated values for the other members while a writer is modifying them. If you don't need to do that, but only ever release new objects for access by other threads, then the sequence you describe is fine with atomic_store_explicit(&foo->enable, true, memory_order_release). 
c-4-31	X	fread() parameters 2 and 3 What is the difference between: and Parameters 2 and 3 are size_t size, size_t nmemb described as "fread() reads nmemb items of data, each size bytes long". I think the final number of bytes read must be size * nmemb but for some reason only second syntax (with size=1) is working for me. The difference is in the following two: The return value is the number of elements which were actually read (zero up to nmemb). This is different in your two statement, if they succeed. In the first case: You will get all or nothing; fread cannot read something that is smaller than sizeof(buf) in case file is smaller. In the second case: You allow fread to read as much bytes as possible, even if less than sizeof(buf) are available in the file. The number of elements (bytes in this case) actually read will be returned. Second parameter specifies the size of element to be read. Third parameter specifies how many elements you want to read. So in first case you want to read 1 element of size = sizeof(buf). In second case you want to read sizeof(buf) number of elements where each element is 1 byte. The second one can be used to read content of entire file as in this How to set/get unsigned char * to and from std::shared_ptr<uint8_t>? question. 
c-4-32	X	String duplicates when printed to text file I'm trying to write a sentence string to a text file, but it duplicates or something when I do so. Why is this, and how do I get it to only print once? Program excerpt: Output in text file when I run the above (reg.name input is Test Name): M0001Test Name Test Name This: is a buffer overflow, strpcy() will write the 0-termination character at the end, overflowing the Ã¬d array. You're getting undefined behavior. To fix it make the ID string shorter, or increase the size of the array of course. In your code is off-by-one. you cannot store a string like "M0001" (5 chars and a null-terminator) in an array of 5 chars using strcpy(). You're accessing beyond the allocated memory, this causes undefined behavior. Quoting C11, chapter Â§7.24.2.3 The strcpy function copies the string pointed to by s2 (including the terminating null character) into the array pointed to by s1. [...] So, it's implied, that the destination must be able to hold the source string, including the null terminator. You're running short of memory here, it's proved. :) You need to have the memory to store the null terminator also, if you plan to use a char array as a string. In this case, you can increase the member id dimension to hold the terminating null, like Every C string needs to be terminated by some NUL byte (i.e. (char)0). So "M0001" takes six (not 5!) bytes. And your char id[5] field is not wide enough. You get a buffer overflow, an instance of undefined behavior. You should have declared at least as a field in Member. I actually recommend making it bigger, perhaps char id[8]; 
c-4-33	X	String copy using Pointer gives Issue Here two prgrams present. Program 1 and program 2. Input to both programs: {(0,0),(25,25)} Output is : (0,0),(25,25) The program -1 is working fine, giving out put as expected. Program 2 is not giving out put as expected bot no errors. Suspecting problem at *str2 = *token in program -2.But what the problem is not identified exactly. can any one explain me Program --1 Program: 2 In your program 2 you do not end the string with \0, your while loop ends when token[i] == '\0' You could use calloc instead to initialize the memory to 0 
c-4-34	X	Editing struct variable in another function | libxbee3 I'm curious and frustrated about how I can set a struct variable in another function it has been declared to. I must warn you that it is also possible that I'm not understanding the structure of the code I have edited and been trying to use. The library I am using is: Github: Libxbee3 To summarize: I would like to change the cluster id variable as I do in main right after the addresses have been set (address.addr64[0] = 0x00; for example). If I by any means missed something or not explained myself clearly, please do not hesitate to let me know. I have already contacted the author of the library, but after the second message, he stopped replying. I have attached the code in a snippet below here: Is this what you're looking for? I'm not familiar with this library so my answer might be no help at all. I skimmed over xbee.h on the GitHub project, and saw this. EDIT: In main(), you are declaring a new object of type struct xbee_conAddress. You can access this object (address) with the period operator, like you do on this line. This works because address is of type xbee_conAddress and not of xbee_con. Since xbee_con types have a xbee_conAddress inside of them, you want to dereference the pointer with -> and then get the cluster_id from the address with the period operator. Like so: The variable cluster_id is inside the xbee_conAddress, which is inside the xbee_con being passed to the function. 
c-4-35	X	More readable way to compare variable to list of values in if statement? How can I compare a variable to a list of values of the same type in an if statement and make it readable and clean? For example, I have the following, but there are a lot of values, and I want to make it more readable. Easiest way to handle this using the strchr function: More information about strchr can be found. Returns a pointer to the first occurrence of character in the C string str. Either use a lookup table, or use the switch statement: 
c-4-36	X	How can I load so library in cpp wrapper android I have a .so library and I need to access the APIs which is in that library. How can I load the .so library in my native .cpp file and access those APIs. Actually I tried with dlopen function in my native .cpp file. It got compiled successfully, but the so library was not loaded. It is got failed and exits. I get this error while I am running the Application: dlopen failed: library "" not found What should I do now, can any one give me the exact solution to load the .so library. 
c-4-37	X	Maze-like backtracking So, I'm trying to make a maze solver with given (X, Y) coordinates of start and end positions, but I have a condition: everytime it goes from one point to another it should check if the new position is lower than the previous (a[x][y] <= some_height_variabile). Here is my code so far: So, for start_x = 0, start_y = 0, end_x = 1, end_y = 3 it should bring the 35 -> 13 -> 12 -> 11 -> 3 and the 35 -> 13 -> 12-> 11 -> 10 -> 8 -> 3 solutions. Without that condition the algorithm is working fine, it's just that I don't know where to update the h variable. I think you are on the right track. However the variable h seems redundant. Instead you need two more things: 1) Have you visited a particular cell before or not. 2) The value of your previous move, so when as you move to the next cell or consider moving to the next cell you verify if its a valid move. Your modified code is as follows: During the call to back notice how I pass the value of the current cell, which is passed to the isValid function to make sure if the move is valid or not. int visited[N][N]; ensures that you dont visit the same cell over and over again. 
c-4-38	X	There is an error when compiling a c file used a nested function I have known nested functions are supported as an extension in gcc, but I compile a c file used nested function with an error. Error massage is like this: test.cpp:6:40: error: function definition is not allowed here double And nested function is like this: My operation system is Mac Os, and version is 10.12.6 When I enter gcc -v in iTerm2, the response is this: You're actually using using Clang, not gcc. Notice this Apple LLVM version 9.0.0 (clang-900.0.38) From the clang website, Clang vs GCC (GNU Compiler Collection) GCC supports many language extensions, some of which are not implemented by Clang. For instance, in C mode, GCC supports nested functions and has an extension allowing VLAs in structs. 
c-4-39	X	How to fill 2D array with spaces I want to fill the 2D array 25X25 with spaces, the program compiles but when i run it, it crushes. can someone please give me a hand and explain me wha'ts wrong with my code? thank you. I tried using instead ' ' the ASCII code of space ('32') but it still got stuck. even when i try inserting other numbers it won't work... 
c-4-40	X	GNU Lightning example doesn't work I'm trying to run GNU Lightning example. It's a library for working with JIT on C language. The problem is I can't run simple program from the guide. The example contains following code: Essentially, the guide doesn't describe how I can run the program. There is only a paragraph Configuring and installing GNU lightning. First, I download the latest version lightning-2.1.2.tar.gz and extracted files. Then I did the following: But what do I do next? I tried run this as usual: And got errors: I think I need to add some flag for gcc command or maybe use another command to run this code. Any ideas? Update I solved it. You need to add flag -llightning to gcc command. If you try to run ./example you'll get an error. You need to change LD_LIBRARY_PATH. Now try to run 
c-4-41	X	C syntax has side effect A side effect refers simply to the modification like changing the value of a variable. In wikibooks: Consider two functions f() and g(). In C and C++, the + operator is not associated with a sequence point, and therefore in the expression f()+g() it is possible that either f() or g() will be executed first. The comma operator introduces a sequence point, and therefore in the code f(), g() the order of evaluation is defined: first f() is called, and then g() is called. Is it right to say this program have side effect due to (the output can be): Or: Since it change the value of a and it is different from first calling (It is changing the global variable). So, 100% this function has a side effect! And to avoid the side effect in this code we must rewrite a function f3() like: Output : a= f1()+a+f2() =9 +14 + 2 = 25 Is this the way to avoid side effect !? 
c-4-42	X	Using function parameter as variable Is it bad or good practice or maybe undefined behavior to re-assign function parameter inside function? Let me explain what I'm trying to do with an example, here the function: Alternative: I checked assembly output and it seems same, we don't need to declare a variable in second one. You may ask what if parameter type changed but same condition would be same for first one, because it also need to be updated. EDIT: Parameters are pass-by-value, and my intention is not edit pointer itself EDIT2: What about recursive functions? What would happen if gkUpdateTransforms2 was recursive? I'm confused because function will call itself but I think in every call, parameters will be different stack This is well defined and a perfectly good way to implement this behaviour. The reason you might see it as an issue is the common mistake of doing the following: But in your case, you expect to make a copy of the pointer. As long as it's passed by value, it can be safely treated as any other local variable. Not a bad practice in this scenario, and not undefined behaviour either. I have no idea why you think this would be undefined behavior - it is not. Mostly it is a matter of coding style, there's no obvious right or wrong. Generally, it is good practice to regard parameters as immutable objects. It is useful to preserve an untouched copy of the input to the function. For that reason, it may be a good idea to use a local variable which is just a copy of the parameter. As you can see, this does not affect performance the slightest - the compiler will optimize the code. However, it is not a big deal if you write to the parameters either. This is common practice too. Calling it bad practice to do so would be very pedantic. Some pedantic coding styles make all function parameters const if they shouldn't be modified, but I personally think that's just obfuscation, which makes the code harder to read. In your case such pedantic style would be void gkUpdateTransforms(GkNode*const node). Not to be confused with const correctness, which is an universally good thing and not just a style matter. However, there is something in your code which is definitely considered bad practice, and that is assignment inside conditions. Avoid this whenever possible, it is dangerous and makes the code harder to read. Most often there is no benefit. The danger of mixing up = and == was noted early on in the history of C. To counter this, in the 1980s people came up with brain-damaged things like the "yoda conditions". Then around 1989 came Borland Turbo C which had a fancy warning feature "possible incorrect assignment". That was the death of the Yoda conditions, and compilers since then have warned against assignment in conditions. Make sure that your current compiler gives a warning for this. That is, make sure not to use a worse compiler than Borland Turbo from 1989. Yes, there are worse compilers on the market. (gcc gives "warning: suggest parentheses around assignment used as truth value") I would write the code as This is mostly stylistic changes to make the code more readable. It does not improve performance much. IMHO it is not exactly "bad" practice but it is worthwile to question oneself if there isn't a better way. About your analyzing the assembler output: it may serve as an interesting and educational look behind the curtain but you are ill advised to use this as an justification for optimization or worse, laziness in the source code. The next compiler or the next architecture may just render your musings completely invalid - my recommendation is to stay with Knuth here: "Instead of imagining that our main task is to instruct a computer what to do, let us concentrate rather on explaining to human beings what we want a computer to do.". In your code I think the decision is 50:50 with no clear winner. I would deem the node-iterator a concept of its own, justifying a separate programming construct (which in our case is just a variable) but then again the function is so simple that we don't win much in terms of clarity for the next programmer looking at your code, so we can very well live with the second version. If your function starts to mutate and grow over time, this premise may become invalid and we were better off the first version. That said, I would code the first version like this: 
c-4-43	X	reverse string in c incorrect output I was writing a program to reverse an entered string in C and my code is : well this program is giving an weird output for string sizes 8,9 and 10 for size 8 the reversed string is being printed followed by a space and 2 garbage characters,for size 9 the reversed string is being printed followed by 2 garbage characters and for size 10 the reversed string is being printed by a garbage character and for other string sizes the program is running properly. why is this happening? 
c-4-44	X	How to simplify this long for loop I'm going to solve the eight queen problem by using the method of poverty, this is the for loop, and I want to know how to simplify it, it's too long, I want to simplify these regular cycles, just using very little for loops.This long for loop looks like it desperately wants to be done in a recursive way. 
c-4-45	X	file size exceeds buffer size I want to compare 2 files for identical lines: mytab2411.txt(15,017,210 bytes in size) and shadow.txt (569 bytes in size) but when I compiled this code and ran the program, I get a segmentation fault. I know that it's because the "mytab2411.txt" file exceeds the size of "char buf" but how do I go about solving this problem without overflowing the buffer? Your method assumes that each line in the file is 1024 bytes long. In practice the lines can be up to 1024 bytes, but most lines are much shorter. Use strdup or malloc to allocate memory for each line based on line's length. Store the lines in dynamically allocated arrays. This is about 15 MB of data and it should not be a problem unless there are resource limitations. 
c-4-46	X	Is memory in same section always allocated contiguously? Here in the above program, I have declared some variables, all in bss section of the code. Considering that I have kept in mind the alignment issues, can I be sure that the memory allocated for those 3 variables will always be contiguous? Considering that I have kept in mind the alignment issues, can I be sure that the memory allocated for those 3 variables will always be contiguous? Certainly not. Read the C11 standard n1570, and you won't find any guarantee about that. Different compilers are likely to order variables differently, in particular when they are optimizing. Some variables might even stay in a register, and not even have any memory location. In practice some compilers are following the order of the source, others are using some different order. And you practically could customize (perhaps with some pain) your GCC or your Clang compiler to change that order. And this does happen in practice. For example, recent versions of the GCC kernel might be configured with some GCC plugin which could reorder variables. With GCC or Clang you might also add some variable attribute to alter that order. BTW, if you need some specific order, you could pack the fields in some struct e.g. code: BTW, some old versions of GCC had an optional optimization pass which reordered (in some cases) fields in struct-s (but recent GCC removed that optimization pass). In a comment (which should go into your question) you mention hunting some bug. Consider using the gdb debugger and its watchpoints (and/or valgrind). Don't forget to enable all warnings and debug info when compiling (so gcc -Wall -Wextra -g with GCC). Maybe you want also instrumentation options like -fsanitize=address etc... Beware of undefined behavior. 
c-4-47	X	Linked list inside shared memory I am trying to push a struct with its respective nodes inside a shared memory where another program will be reading the node content to do some validation(just reading, no modification). Each node of the linked list contains several variables, and a lot of nodes as well My Struct: This struct is using the function list_insert_front to get data from an XML file and populate the list. This linked list is now to be stored inside a shared memory for faster processing and easy read-ups for other programs. However, I am unable to do so (because of pointer mistakes). I am able to send an integer data to my client which is easily readable, but when I try the same with the list, BAM Segmentation fault occurs. Main.c I realise that I might have made a lot of silly mistakes, like in the while loop maybe, and the way by which I am trying to insert the struct in the shared memory segment, but that is what I ask all of you. To help me build a better logic for the same. All suggestions are welcome. You cannot use pointers in your shared memory segment because they are only valid within your process. This is likely the reason for segfaults you getting. You could use offsets in the shared memory segment. What you show is not really an MCVE. You have 13 char * members in the structure; 3 would be plenty for an MCVE. You are also using XML parsing functions which are basically tangential to the problem; you could simplify things a lot. You don't show any of the other processes that will be using the list in shared memory; it would be helpful to have one of them (it need only attach to the shared memory and traverse the list, printing the results). Basic obervation: If you're going to store a list in shared memory, every user of the list needs to be able to see the data, which must all be in shared memory. You're signally failing to ensure that all the data is in shared memory. Your assignments like: are bogus on at least four counts. First, aaron.polname is a pointer in this process's per-process (unshared) memory. So the pointer assignment is giving other processes a bogus address to work with. It points to some random location in that other processes address space " or, if you're lucky, to some location outside their address space so they crash quickly rather than slowly. Second, you haven't copied the string; you've simply assigned a pointer. That's a problem. Third, you're making all the pointers in shared memory point to the same locations, so that multiple entries point at the same data. Fourth, you should use dlist->polname notation. Yes, what you've got works; it doesn't work well. It is easier to check (write, think of) dlist->next->next than (*(*dlist).next).next. (I can't even write that without doing it incrementally. And I'm not claiming that this is a good expression in this context; I'm just pointing out that chained access is a lot easier with the arrow ptr->member notation than the star-dot (*ptr).member.) You have to ensure that the pointers in the shared structure point into shared memory. You also have to ensure that all the processes load the shared memory segment at the same address. If you can't do that, then you can't reliably use pointers at all; you have to use offsets from the base address (the start address of the shared memory segment). The link pointer also needs to be handled carefully. You are not creating a big enough chunk of shared memory. You are using: That creates enough space for a set of pointers, but no space for the pointers to point at. You also seem to want to create a linked list, but you're only allocating enough space for a single element. This has to be reworked. The shared memory must be big enough to contain all the shared data " the structures and the strings that the structures point at. So, you need to: Allocate more shared memory. Ensure that all processes load the shared memory at the same address. Ensure that all the data references from the structures in shared memory are to memory locations also in shared memory. Copy strings out of process local memory into shared memory. Ensure that read/write access is properly synchronized between processes. Use dlist->polname and not (*dlist).polname unless you wish to be taken to be a neophyte programmer. 
c-4-48	X	Transmitting structures among controllers I want to send a structure having many structures in it to another controller(not the same make of the controller,having a different Architecture). Im required to develop a sort of serialisation to send data across without using invented serialisation methods available. How do i find out where padded bytes are added so that I can remove them out before sending it to the other controller? How can i implement a metadata so that the other controller can reconstruct every member of the structure from the transmitted bytes of data? Any other points that may be required also would be welcome. Consider using TLV type of encoding scheme, It's normally termed as Type Length Value. Normally an element looks like This is pretty standard for a lot of encoding and decoding streams and you can extend it to any types of structure. A lot of open source code has this implemented, so there is no dearth of sample implementations. Fully portable serialization/de-serialization is quite manual. You just go through ever member of the struct and copy it. You could use offsetof to spot padding, but that's mostly meaningless practice, since it means you would need to do some "manual coding" per struct member anyway. #pragma pack(1) and similar isn't ideal. Structs are packed for a reason, and there are no portable means to disable padding. It may be feasible on some smaller CPUs like 8 or 16 bit, but not for fully portable code. What's important is to have a well-defined network protocol, that states how data is stored, including endianess. That is, the sender, the protocol and the receiver all have endianess and they are not necessarily the same. (Traditionally, data protocols often used big endian since that is the only thing that makes sense for implementing hardware CRC checks with XOR gates, but that's mostly a non-issue nowadays. Some MCUs even have CRC check hardware built-in.) 
c-4-49	X	Why is it said that accessing a variable through pointers is fast I have read a book that claims that accessing a variable through a pointer is faster than accessing the variable by reference. Example: In the first statement: the compiler reserves 4 bytes of memory, and puts a value of 10 in it, and names this as variable. In the second statement: the compiler reserves 4 (or 8) bytes of memory, and puts the address of variable in it, and names this as ptr_variable. In the first case, if we need to access the value of variable, we can access it by referring to variable directly. In the second case, we have to refer to ptr_variable which gives the address of variable and put a * to it. Question Isn't the second approach more complex than the first approach? 
c-4-50	X	Getting context on initialization from incompatible pointer type When compiling, I've run into this error quite a few times: The documentation for fuse tends to be inconsistent and sparse, so I'm left looking up other file system implementations on GitHub to find the proper method signature. In this case, my problem was: Should have been My question is: When I see this warning, is there an easy way to know what the pointer type is supposed to be? I spent quite a bit of time tracking down a proper implementation in sshfs, but I feel like there is an easier way. This is more or less an MCVE (Minimal, Complete, Verifiable Example) that reproduces the error message you show: When the file fuse37.c containing the code shown is compiled with GCC 7.2.0 (on a Mac running macOS High Sierra 10.13.2), I get: The auxilliary information in the 'note' line tells you that you need to look for the definition of the write member (of the structure type struct whatever). When you pass incorrect type arguments to a function call, you get better messages: Now you can see that the note is explicit about the type expected and the type received. I'm not sure whether the absence of the extra information in the initialization (as opposed to function call) is deliberate or an oversight. Since the one diagnosis is possible, the other should be too. It might be worth enquiring of the GCC maintenance team whether this could be upgraded. 
c-4-51	X	c malloc assertion failed when allocating memory So I had print statements around my code where I malloced in dumpTB and it seems to throw a sysmalloc assertion failure there and abort my program. Can't for the life of my figure out why...I printed out the number totalsLength and its 36, which was the length of the string in textBuffer, which I verified is correct. Can anyone tell me what the problem is? EDIT: New code requested EDIT: adding main Okay, so text has stringLength + 1 accessible bytes. This is legal if, and only if, i is less than or equal to stringLength. So lets add some code before it: Now let's compile and run it: 30 ACCESS OUT OF BOUNDS: i=30 stringLength=29 31 ACCESS OUT OF BOUNDS: i=31 stringLength=29 32 ACCESS OUT OF BOUNDS: i=32 stringLength=29 33 ACCESS OUT OF BOUNDS: i=33 stringLength=29 ... Houston, we have a problem. 
c-4-52	X	Eclipse debugging C/C++ Project Can't find a source file i have a problem with debugging a C/C++ project on eclipse. just for example i want to debug the "Hello World" program but it always shows me this error: ---Can't find a source file at "/build/glibc-9tT8Do/glibc-2.23/string/../sysdeps/x86_64/strlen.S" Locate the file or edit the source lookup path to include its location.--- Code: other programs the same error. Operating system: Linux. Someone know how i can solve this problem ? 
c-4-53	X	what does asm suffix mean in given code? I was learning how xv6 operating system works through MIT's 6.828 course, where in sources I came accross the following line: Can anyone please explain what the following line does? It is a special case of an asm label. It instructs the compiler to emit %gs:0 instead of the usual symbol name if you reference the cpu variable. Presumably %gs has been previously set up as a per-cpu storage area, with a struct cpu pointer at offset zero. The purpose is to allow each cpu to access its own data. 
c-4-54	X	MATLAB Mex: retrieving a logical from a struct in MATLAB I have a struct created in this way: testStruct = struct; testStruct.tf = true. And I want to pass this struct into my c++ code through mex, this is a snapshot of what I did: Whether I set testStruct.tf to true or false, it prints tf: 1. I also tested it with an if condition and the if condition gets executed regardless of what logical I put in. I tried bool tf = mxGetLogicals(mxValue), but that wasn't useful. Can I get a pointer on this? Can I get a pointer on this? ... That is kind of the problem ... mxGetLogical returns a Pointer to the first logical element in the mxArray. see documentation. So try this (compiled as mexTest): Running it gives me these resutls: 
c-4-55	X	Preventing memory leak in dependent functions First of all, I don't even know how to adress this issue nor how to google a solution to it so if you have a better title that describes better my issue, that would be great. Intro: I'm currently developing C code for a project in school, the project is not really ambitious but I would like to it the right way. The project is a about a Hardware password manager. One of the parts of the project is the feature of the device locking itself if no input is recieved in X seconds. I'm planning to achieve this through timers and interruptions (since I'm working on a microchip) but this has little to do with the real question here. My initial design was, in the main() function call the function lock() so the device boots locked, once the correct PIN is provided, the function MainMenu() is called (inside the lock() scope). However, the MainMenu() has a while(1) { some code } which never returns anything because it doesn't need to. However, the next time the user is AFK, a interruption will trigger and lock() will be called, effectively saving the Program Counter of the MainMenu(). Once the user inputs the correct PIN, lock() will call MainMenu(). In other words, function A will call function B which will again call A and so on. See the problem? I will be eternally saving local variables that will never be used (PC at the least). I have solved the problemwith some tweaks in the design. However, the question persists. Is there a way to call a function without saving the current envirionment on which I am? Is having a cyclic model of functions a real problem or can be solved by designing a good one and then implementing it? If so, what kind of solutions do developers use? Edit1: One comment suggested break. This is not what I want because the problem is not inside a loop, but in 2 functions calling each other. Another comment suggested setjmp() and longjmp(). I think this functions are useful if you want to save the environment on which you are currently running. However, in my case, it's precisely the opposite, I do not want to save the environment on which I'm. A state machine sounds nice and sophisticated. The following design is a bit simpler. This is how I would do it: Notes: Please, consider this as sketch (not as MCVE). As the questioner didn't expose code or specific details of the intended platform, I tried to answer this "generically". lockScreen() could use keyInput() as well. Thereby, keys could be collected until they form a complete password (which might be correct or wrong). The timeout could be used to reset an incomplete password. 
c-4-56	X	Display all element when added to the stack I have the code below but i am trying to display all element when added to the stack. I have also created a struct display for this purpose but i am stuck right there in getting the elements to display in the array all other request selected from the menu is working as should. I can't seem to figure it out help please. Are you talking about looping through all elements of the stack? you just need to use a pointer in a following manner: 
c-4-57	X	I'm little bit confused that whether automatic memory allocation takes place during run time or compile time I know that the memory is allocated at compile time to auto variables like int a; and are stored in stack but in case of a variable array whose input is taken from the user, for eg the memory is allocated at run time. So my question is, is the automatic allocation is case dependent or not. THANKS In your example, it is unclear where "a" is defined. So, I'll take a stab at answering this by making assumptions on that. If the array is declared as a global array, it resides in the bss segment, and memory is allocated as the segments are loaded into memory. If the array is on the stack, and the size of the array is known at compile-time, the stack pointer is moved to allocate space for the array. You can see this if you disassemble the code. If the array is on the stack, but space is allocated based on an argument to the function you have a VLA(variable length array). These are commonly converted to "alloca" calls by the compiler. In this case the stack pointer is just moved to allocated "n" bytes on the stack. If the array is on the heap, the allocations are performed by the heap allocator in use. The code that handles the automatic allocation is created at compile-time. The actual allocation takes place in run-time. You'll have machine code such as "push variable on stack" or "put variable in register", but this code is of course doing nothing until the program is executed. All stack allocations are done in run-time. They may or may not be of a deterministic nature. In the case of a VLA, the instruction "move stack pointer n steps" is created at compile time, but the variable n is set in run-time and the stack pointer is then moved accordingly, to allocate memory. The only kind of allocation that takes place at compile-time is allocation of objects with static storage duration - meaning allocation of file scope variables and static variables. Room for these are reserved in the data segments usually named .data and .bss on most systems. Examples can be found here. 
c-4-58	X	Can't pass values between main() and a function (lists) I'm "working" in a school project that needs to use linked lists with chars* and some other variables. The thing is: I'm using a sub-function to open, read and store the data in a List but can't access to the string on it, I mean, can see other infos just dont that one... The sub-funtion The struct "Mensagem" The function "CriaKW" The function "insertKW" There are two problems due to the line: pv->c = linha; It's saving a pointer to a local variable in the structure that it's returning. That variable is destroyed when the function returns, so the pointer is no longer valid. You're using the same linha variable for every line that you read. So even if the variable weren't destroyed, all the Palavra structures would have the last line of the file. You need to make a copy of the line to save it. Change that line to: strdup() is a POSIX function, not standard C. If that's a restriction on your code, it should be simple for you to write it yourself using malloc() and strcpy(). BTW, this line is not needed: Since strlen() works by finding the position of the \0 character, this is just setting that character to what it already has. Change the if that contains this to: The array linha is a local object of the function and has the automatic storage duration, After exiting the function it will not be alive and can be either overwritten by other objects of the program or even inaccessible. In any case the pointer pv->c of each node initialized this way will have an invalid value after exiting the function. You should dynamically allocate memory pointed to by this pointer and copy the original string to the allocated memory. For example Also you need to remember to free the memory allocated for the string when a node of the list is deleted. Take into account that it is better instead of the type long int to use the type size_t for data member tam because in general it is not necessary that the type size_t is equivalent to the type long int though the standard function strlen and other string functions use the type size_t.. Thanks to everyone, I'm new here but you all tried to help! Thanks a lot! Did this code: pv->c = strdup(linha); 
c-4-59	X	Error in generating a four letter character array The major portion of the code is to create a set of single, double, triple and four letter strings and then check their crypted hashes across the hashed code which is passed as input The hashing is done by the crypt function provided with c And to check the error in my original program I used that printf line And the output which I expected was But the output was: Many of the people told me to use the printf line in the inner most loop but then too it would not change the original error that my program will not be able to produce the set of single, double an triple characters. It will only be able to create a four character string. Most likely you are getting leftovers from the inner loops. So when the outer loop gets to b, a[1]..a[3] still have the 'z' character in them. Simple solution would be to do something like: But I would simplify the loops altogether and do it that way: Not the most elegant solution, but should work. I'll leave you to fill out the rest. Good luck. Bonus edit: made the code easier to configure by adding the const up top. 
c-4-60	X	Stack around variable was corrupted - C i searched alot with google and spend about 2 hours fixing this error. I get the following Error: "Run-Time Check Failure #2 - Stack around the variable 'buffer' was corrupted." I know it has to do something with my pointers, my sprintf_s functions or similar. This simple program is supposed to just replace ',' with '-'. I hope someone can give me a hint to solve this. I know a lot of those questions exist but none of them helped me fix this error. WHen you call sprintf_s(), you're starting from the middle of buffer. So you need to reduce the available space by that index. It should be: 
c-4-61	X	OR notation and bit shift why = sign why 1 I am new to C. Can someone tell me what is happening with these instructions which are from sample code setting up timer interrupts in an Atmel in an Arduino Thanks. TCCR2A is a register. Something like 00100001. WGM21 is a number. For example 3. (1 << WGM21) this shifts a 1 for 3(WGM21) positions left. So this results is 00000100. So now we have: TCCR2A |= 00000100; which results in: TCCR2A = TCCR2A | 00000100; if the actual state of TCCR2A is 00100001 it looks like this: TCCR2A = 00100001 | 00000100; Now the answer is TCCR2A = 00100101; 
c-4-62	X	linker always picking system libsasldb.so rather than one provided by LD_LIBRARY_PATH I am running in a heroku based environment, so installing packages in system space is not allowed. To work around this they are installed into /app/.apt and LD_LIBRARY_PATH is updated to reflect this. I am trying to use cyrus-sasl2 so install it there and see it is installed, but when I try to use this library I see that it isn't able to pick up gssapiv2 which is also installed in the same location. Running the code with LD_DEBUG=all I see something interesting Normally I see libraries do a search, but this is always picking up system and not performing the search. I was expecting something as follows but I don't see that in the case of libsasldb.so. My question is, why would the linker not search but instead always use the system version? In the above example, turns out that cyrus-sasl uses a compile time flag to define plugin directories and will load from that path. I recompiled the project to change the plugin directory to be the heroku location and see the following syscalls In short, it controls the linking itself which is why the linker never searches for additional libs. 
c-4-63	X	Convert char hex to char dec in C I want to convert a value stored in a variable type unsigned char as a decimal in this way: And I want to convert hexValue into a new unsigned char in "dec" format like this: I tried sprintf() and strtol() but without good results. Sometimes it can get confusing understanding the difference between value and representation. So, consider this code: See live code It expresses the notion of ten as a hexadecimal in the first assignment statement. When hexVal is assigned to variable dec what is assigned is the value ten which is stored in a binary format. Since dec is already a variable, no need for sprintf() here. You may then use the format specifier to express the value of ten as a decimal or in another base. In this case. The value is a expressed as a decimal. 
c-4-64	X	ODBC SQLTables function doesn't return any value I'm trying to get started with interactions between C and database servers on Ubuntu. After I did a little bit of research I found out that ODBC is a good place to start from. I installed unixODBC, Oracle Database Express Edition 11g Release 2 and the ODBC Oracle driver. I configured the odbc.ini and odbcinst.ini in the following way: /etc/odbc.ini: /etc/odbcinst.ini: ODBCSYSINI and ODBCINI are set properly. Started writing some C code, compiled it and managed to connect to the database, but the problem I have now is that I can't fetch any data because SQLTables doesn't return anything. Here's the code sample: The executable never reaches the printf("Calling SQLNumResultCols ...\n"). Also I compile the source file with gcc source.c -o source -lodbc. 
c-4-65	X	Difference in printing of character array This code works fine and does the same i.e give the output of the array from a to z but when I use nested for loops and use the same code Now the output comes as Why is that? How can I fix it ? Please help me fast... The original code is this which I wanted to create a set of strings ranging from a single letter to a set of four characters Your array got initialized to some 'z' values in a second case. You have to initialize all values at the very beginning to whatever you want, and the problem will be resolved. However, it would be better to use just a character and to avoid usage of string for this purpose: Strings and character with printf 
c-4-66	X	Porting C Code to C# / dereferencing a pointer How would I port this piece of C Code to C#? It is a UPC Key Recovery Tool. hv is a uint32_t array with 4 elements. h1 is a uint8_t array with 16 elements While this is valid C code I cannot seem to port this to C# without it giving me errors. Does anybody have an idea what I could do? I've tried declaring hv as a uint array and h1 as a byte array. Break it down. What are we doing? Work from the semantic level, not from the level of pointers. We have a byte array with some number of bytes. We take two bytes at a time and alias them as 16-bit unsigned integers We extract the 16-bit unsigned integer, convert it to a 32-bit unsigned integer, and assign that to an array element. Now we have a specification. Write a method for each interesting operation. The only interesting operation is turning two bytes into one ushort; everything else is done for you by the compiler. Great. Now we have a tool we can use. What bytes do we want? The bytes at i*2 and i*2+1. So: And we're done. Don't try to translate pointer manipulation code to C#; you can do it but it will not be good C# code. Write code that has the same effect but uses the conventions of C#. A technique that might help is to rewrite the code so that it is less awful C code; this is terrible. If you rewrote the original code into C like this first: I daresay that it would have been a lot easier to understand conceptually what was going on here. Essentially: Although I wonder if a blit might be more appropriate. Note that you can also use unsafe C# code to have essentially the same code as the C code (via fixed), and in the upcoming bits: this would be a good fit for Span<T> which allows for simple thunks between different T. 
c-4-67	X	C: Wrong parameter in called function General question: In main I call function dd_draw_string() with parameters as seen below. The problem is that the parameter length isn't handed over the right way. So when I call the function with length = 6 and look up the handed over with breakpoint in called function and now the parameter has the value length = 4294967296 (0xffff ffff). It's not the full code, but it should be enough to show my issue. font.h: Main: font.c By the way, I'm programming with TM4C1294NCPDT, but I think it's a general C issue. 
c-4-68	X	Should I include a header file multiple times in different files? Say, for example, that I have header files foo.h and bar.h, which both want to include hello.h, and use macros declared in hello.h. foo.h also already includes bar.h. Should I include hello.h in both foo.h and bar.h, or just in bar.h? I know it doesn't matter functionally, but I'm not sure what the "standard" is for readability. Edit: I know how header guards work. I'm not asking from a dependency perspective; I'm asking from a readability perspective. You can wrap the header into preprocessor-ifs. So the compiler will handle it if you include them to often. 
c-4-69	X	How to find all options with repetition? I'm looking at a problem I can't really still figure out. I need all (now what's the right math term) permutations? tuples? combinations? with repetition made out of 4 given elements. I've got the elements A, B, C, D. There is four of them, the amount is fixed. For a given n, I need to be able to get all possible options from these four elements. For example: n = 1; Possible options: A B C D n = 2; Possible options: AA AB AC AD BA BB BC BD ... DC DD n = 4; Possible options: AAAA AAAB AAAC ... DDDC DDDD Would anyone be able to kind of direct me somewhere? There are some following conditions, but I should be able to filter them on the go. Of course I tried searching for the answer, but no topics seem to be the same issue I'm trying to solve. Big thanks to anyone who would at least try to pinch me in the right direction a bit. You can not do it using nested loops because you need n for loops and n is not determined at first (and it is ridiculous to use n nested for loops). One approach to solving the problem is to use recursive functions. The recursive function should return the basic list consisting of 4 letters for n=1 and for n>1 it should call itself with parameter (n-1) and then append each one of the four letters to each returned string from the recursive call. I suggest you to try to implement it yourself before reading the following pseudo code! 
c-4-70	X	How do I use Monte Carlo method for integrals (C)? I have to write a code that can calculate a definite integral. I guess I should use a function inside another function but I don't really understand how. The integral function usually requires an int generator but my program should ask the user to pick a number. Also using the equation inside the integral function isn't really clear to me. This is the code I wrote, that (obv) doesn't work since it's not finished yet. 
c-4-71	X	Unsigned short int operation with Intel Intrinsics I want to do some operation using the Intel intrinsics (vector of unsigned int of 16 bit) and the operations are the following : load or set from an array of unsigned short int. Div and Mod operations with unsigned short int. Multiplication operation with unsigned short int. Store operation of unsigned short int into an array. I looked into the Intrinsics guide but it looks like there are only intrinsics for short integers and not the unsigned ones. Could someone have any trick that could help me with this ? In fact I'm trying to store an image of a specific raster format in an array with a specific ordering. So I have to calculate the index where each pixel value is going to be stored: If you only want the low half of the result, multiplication is the same binary operation for signed or unsigned. So you can use pmullw on either. There are separate high-half multiply instructions for signed and unsigned short, though: _mm_mulhi_epu16 (pmulhuw) vs. _mm_mulhi_epi16 (pmuluw) Similarly, you don't need an _mm_set_epu16 because it's the same operation: on x86 casting to signed doesn't change the bit-pattern, so Intel only bothered to provide _mm_set_epi16, but you can use it with args like 0xFFFFu instead of -1 with no problems. (Using Intel intrinsics automatically means your code only has to be portable to x86 32 and 64 bit.) Load / store intrinsics don't change the data at all. SSE/AVX doesn't have integer division or mod instructions. If you have compile-time-constant divisors, do it yourself with a multiply/shift. You can look at compiler output to get the magic constant and shift counts (Why does GCC use multiplication by a strange number in implementing integer division?), or even let gcc auto-vectorize something for you. Or even use GNU C native vector syntax to divide: compiles to this asm with gcc and clang (Godbolt compiler explorer): If you have runtime-variable divisors, it's going to be slower, but you can use http://libdivide.com/. It's not too bad if you reuse the same divisor repeatedly, so you only have to calculate a fixed-point inverse for it once, but code to use an arbitrary inverse needs a variable shift count which is less efficient with SSE (well also for integer), and potentially more instructions because some divisors require a more complicated sequence than others. 
c-4-72	X	Consumer-Producer having racing condition with pthreads I am implementing a consumer-producer problem with using pthreads in ubuntu 16.04 on a virtual machine with 2 processers. We have n number of producers and a single consumer that reads data from each producer through buffers. Each producer has its own buffer. The problem is that at some point my code deadlocks and could not find out why. May be i am messing up with the condition variables and mutex locks. This the buffer struct for the data transfer between consumer and producers. This is the producer, reads data from a file given and fills up the buffer and when the file ends the producer thread will exit. The consumer reads buffers from each producer and when all done consumer exit the loop and terminates the thread. Any help appreciated. The deadlock is because producer finishes reading with just one flag set: So, if at that time consumer is waiting for producer 1 condition: The condition will never fire. The consumer has no progress, so everything is just stalls. The solution might be to fire the can_consume after isDone is set. 
c-4-73	X	how to use character arrays in strcmp() functions I initialized a character array with a size of four When I input any character to the character array as The output shows me The character array is But then I change a little bit The output shows me The first character of the array is z Why is that ? How can I use my character arrays such as if I want them to be compared using strcmp() functions. Please help me.... In the first piece of code, you only set one element of the array. The other three elements are uninitialized. So when you call printf and pass in a it reads those uninitialized bytes. Doing so invokes undefined behavior, which in this case manifests as nothing being printed. What probably happened in this particular case is that the first element of the array, i.e. the one with index 0, was probably 0. This value is used to terminate strings, so a was viewed as an empty string. Also: The first character of the array is z No it is not. Arrays in C start with index 0, not index 1. If you want to copy a string into an array, use strcpy: In this code snippet the array does not contain a string (a sequence of characters terminated with a zero character). However you are trying to output it as a string using the conversion specifier %s. Instead you should write In this code snippet again the array does not contain a string. However you are outputting separate characters. So there is no problem. If you want to store a string in the array you should append it with zero character. For example The standard C string function strcmp deals with strings. So arrays that you are going to use with this function shall contain strings. Otherewise you can use another standard function memcmp. 
c-4-74	X	Displaying text like a man page I want to display text from a file named list.txt, and I want it to look like a man page display in Linux using pure c. Text can be scroll up and down, at the bottom there is a line that stays there when the text in the scroll. I do not know what it is called. What methods can I use to create this with C? A terminal is (on Linux and other POSIX systems) quite a complex thing. Read the tty demystified and termios(3) and tty(4). BTW, terminals are unknown to the C11 standard (you should simply consider POSIX; on Windows, things could be even more complex). You probably should consider using some library like ncurses. BTW, man is often from man-db and that is a free software whose source code you can study. Or you could just run -perhaps using system(3) or popen(3)- some pager, e.g. less(1) 
c-4-75	X	In Ð¡, malloc causes a read exception I am writing a function for my school project. malloc suddenly decided to stop working. Whenever I try to allocate memory for my outputFormType pointer, it causes an exception which roughly translates to: Triggered an exception on address 0x77AD2D6A (ntdll.dll) in project name: 0xC0000005: access rights violation while reading on address 0xBFF00000 Maybe I don't know something, but I believe malloc isn't supposed to read memory, but write it instead. The question is simple: how do I fix this, using only stdlib.h, stdio.h and string.h? Function: The struct itself is quite simple: And yes, I know my code is garbage. Unfortunately, that happens when you're in extreme hurry. 
c-4-76	X	How can I add quotes to a char? I need to add quotes in begging and ending of a char. My result is h and my desired result is 'h'. Just add them in the format string. For single quotes, you can just put them in there: For double quotes, you'll have to escape them: 
c-4-77	X	My C program creates files of 4Gb on a raspberri pi when they should have a size of 8 bytes I have a C code compiled with GCC in Ubuntu 14.04 that among other things, creates a file, write 8 bytes, and then closes it. The code works fine in my i7 64 bits pc. The problem is that when I compile and execute my code on a 32 bits architecture (raspberry pi 2 with raspbian) this operation creates a file of size 4294967304 bytes. I don't know what's wrong. The strange thing is that my program creates 3 files in the same way that should be empty but their size is 4 Gb each, and my available memory is only 8 Gb. This leads me to believe that I'm breaking the file system (ext4) but I don't know why. The code is this one: When I open the created file with ghex I only see 8 bytes, but when I use hexdiff there are many empty bytes at the beginning and my written 8 bytes at the end. The cause of the strange error is the lack of correct headers, specifically <unistd.h>. This causes the parameters to write() to be of incorrect types, especially the count parameter. Try this corrected version of your program: Always, always enable warnings when compiling code. With GCC, I use gcc -Wall -O2 (for both warnings and compiler-optimized results). I warmly recommend you do the same. If you save the above as fixed.c, then compile it using and run it using If you need to compile against e.g. the math library, include the options just before the -o flag; i.e. gcc -Wall -O2 fixed.c -lm -o fixed-example for the above program. The order of options do matter for GCC. 
c-4-78	X	Deleting node from linked list doesn't work properly I have one problem while trying to delete a node from a linked list in C. I totally have no idea where i am missing this, but somehow, wrong nodes are deleted than the expected ones, also the last one is gone and when i do free() it is actually not working, it still keeps and prints some data. Can anyone please help me? Here is my code: Well there are places in your code which may lead to accessing NULL value leading in to invoking Undefined Behavior. For writing methods like this, try to use the pointers. Here global variables are not required. Earlier your code had some redundant assignment statements which was not doing anything meaningful. A full example would be something like 
c-4-79	X	Recognizing ARM Software Interrupt (SWI) functions by Visual C++ compiler Because I prefer Visual Studio editor instead of Keil and IAR editors, I tried to compile ARM based projects using VS 2017. A project includes RTL.h header of RealView Run-Time Library which declares Software Interrupt (SWI) functions. As I understand Visual C++ compiler supports SWI intrinsic function but I'm getting compile errors. Also I tried this in a main-only application compiling using default compiler and Clang compiler too - both of Visual Studio: The errors generated by default Visual C++ compiler are: Line 1 Error C2182 '__swi': illegal use of type 'void' Error C2146 syntax error: missing ';' before identifier 'test1' Error C4430 missing type specifier - int assumed. Note: C++ does not support default-int Line 2 Error C2182 '__swi_2': illegal use of type 'void' Error C2146 syntax error: missing ';' before identifier 'test2' Error C4430 missing type specifier - int assumed. Note: C++ does not support default-int Line 4 Error C3646 '__swi': unknown override specifier Error C2059 syntax error: '(' Line 5 Error C3646 '__swi_4': unknown override specifier Line 7 Error C4430 missing type specifier - int assumed. Note: C++ does not support default-int Error C2374 '__swi': redefinition; multiple initialization Error C2146 syntax error: missing ';' before identifier 'test5' Line 8 Error C2144 syntax error: 'void' should be preceded by ';' Error C4430 missing type specifier - int assumed. Note: C++ does not support default-int Is Visual C++ compiler capable to recognize these declarations? If yes, what should be changed? From the docs you linked, both compilers have an __swi keyword or intrinsic, but it has a very different meaning in the two language extensions. So it doesn't appear to be possible to do what you want, unless you can set up VS2017 to use ARM's compiler instead of the MS compiler that comes with that IDE. This is the price of using language extensions that are only provided by a single compiler, especially a non-free compiler, assuming that's really the case. The details: According to the MS doc you linked, __swi() is an intrinsic for the SVC instruction, for generating software interrupts, not for writing handlers for them. __swi not an attribute you can use as part of declaring another function, it's a function of its own, with prototype unsigned int __swi(unsigned int, ...). You can use it from inside another function to make a system call like this: void __swi(1) test1(); is the same kind of syntax error as void sqrt(2.0) test1();. Similarly __swi_2 is just another unrecognized identifier. Whatever you were trying to do, __swi() is not the right way in Visual Studio. In ARM's compiler, __swi(8) is a function attribute meaning that callers should invoke it with swi 8 instead of BL function_name (the normal call instruction). It apparently also sets up the interrupt table to point to the functions defined with that attribute. This is a totally different meaning and language-syntax usage from how MSVC defines it. 
c-4-80	X	strange seg fault, likely with realloc So I manage to print out the first 12 letters of my string using the print statements but for some reason it gives me a seg fault shortly after printing the 12th letter 'l', and based on the print statements it seems to occur around the realloc...can anyone tell me what I did wrong? I tried fixed the index errors, a really long looking sysmalloc assertion thing which aborts the program. You probably want getline(3), so use it if you have it. As explained by AnT's answer, you have undefined behavior (UB) because of a buffer overflow. Fix that as soon as possible. Be very scared of UB and take more time to read about it (it is tricky). Also, remember that both malloc(3) and realloc(3) are somehow expensive calls (for some suitable notion of expensive; actually, they are quite fast - often less than a microsecond on a desktop for reasonable use), and they could fail (by giving NULL) and you should check that. In practice, you'll better use realloc less often. As a rule of thumb, you want to keep both the used length and the allocated size somewhere (e.g. in additional local variables), and you might use some geometrical progression (e.g. newsize = 4*oldsize/3 + 10....) to avoid too frequent realloc-s. Doing a realloc for each additional byte is ugly. Compile your code with all warnings and debug info, e.g. gcc -Wall -Wextra -g with GCC. Improve the code to get no warnings. Use the debugger gdb and valgrind to hunt memory leaks and other trouble. 
c-4-81	X	Trouble understanding structs in unions I'm not a novice C player, nor am I an expert in that matter. So here's my problem. I have a union declared as this: And there is a function that goes like this: Now here's my quesiton. I would like to make an object of EXAMPLE_DATA so that when it is passed to the SendData function, that my data would be of data9bit type. I'm really confused and I honestly don't know the answer. Thanks. The type EXAMPLE_TYPE will always be 2 bytes (i.e. 16 bits) in size because only complete bytes can be stored and addressed. You're free to interpret the value as a 9-bit value, but the size will always be a whole number of bytes. This is complicated by the fact that two of your union's members are anonymous structures, but the fact remains that, in principle, an object of type EXAMPLE_DATA contains a value for only one member -- the last one written to -- at any given time. That member is perforce either __data or one of the two anonymous structures. The structures serve merely as containers for bitfields, one each, and because they are anonymous, their members can be accessed inside the union via the syntax for accessing a member of type EXAMPLE_DATA itself. Thus, if you want the member that an EXAMPLE_DATA currently contains to be the data9bit of the corresponding structure, then you might do this: Do note that, the anonymous structures may have representations larger than 16 bits the location of the relevant bits of each bitfield within the representation of their structures is largely at the discretion of the implementation, and in particular, it is not necessarily within the first 16 bits (where they would overlap the representation of __data) your union provides no built-in mechanism by which one can determine which member currently contains a value, so users need either to assume or to have such information conveyed to them separately. 
c-4-82	X	printf function on multi thread program hi I'm writing a simple program in c, the program has two threads and two global's var, but the printf function not working, I know that printf is not thread safe and also if I well add \n in the print it will work, but I wont to understand why it's not working without that? I'm adding the code, printf is somehow thread safe* (see discussion in unlocked_stdio(3)..., and consider flockfile(3)) but stdio is buffered, and you should call fflush(3) in your routines. (printf is perhaps thread safe because two concurrent printf might not intermix their output, but nothing is told about flushing buffers) So code instead (then you'll see some output) BTW, I recommend ending most of your printf format control strings with a newline \n.... You could also add some delay by doing some nanosleep(2) or usleep(3) in your runi & runj routines. It is the buffering which explains that you are disappointed. And stdout should be buffered for efficiency reasons (see setvbuf(3)...). Be aware that system calls (listed in syscalls(2) for Linux) such as write(2) are quite expensive operations. On Linux use strace(1) to understand what system calls are done. If you want to understand the implementation of printf on Linux, study the source code of your C standard library - which is free software. It probably is GNU glibc, but could be something else like musl-libc, etc. BTW, your threads are never ending (since runi and runj never return), and you pthread_join them. That call is blocking indefinitely. Use ltrace(1) to observe that. You could also consider adding some sleep(2); fflush(stdout); in your main before the first pthread_join; you'll then observe some output. At last, for such experiments, I recommend some periodic printing. Replace the i==1000 condition by i%10000 == 0 .... You never explicitly flush your stdout so its gets flushed when its buffer (perhaps 8Kbytes) is full, or at end of your main (which is not reached in your case). Jonathan Leffler cleverly commented that you might need to wait an hour for that (buffer full condition) to happen. Beware of race conditions and of undefined behavior. 
c-4-83	X	C: Trouble understanding pointers in the while loop of this code I'm using a debugger to read through this code, and I'm a little confused by while ((*d++ = *s2++)); - in the debugger variables, d seems to shorten after each loop (goes from 'Hello hello' to 'ello hello' while s1 changes to 'cello hello'). What is the while loop looping through (shouldn't it be while(condition); do(something))? Why aren't the variable values of d and s1 the same (isn't d is a pointer to s1)? And when they return to the main function, is curdst = the pointer of dst? This is a rather typical didactic implementation of strcpy(). It works like this: my_strcpy() takes two arguments. The first argument is a pointer to the first element of a destination character array. The second argument is a pointer to the first element of a source character string, that is, a character array terminated by a NUL (aka \0) character. The function copies the characters from the source string to the destination buffer, including the NUL terminator, and returns a pointer to the first element of the destination buffer. First things first, make a copy of the first argument, because we need to return it after the copying is done. Then, copy the characters; this is done in a tight loop, working like this: Copy the current character * s2 to the place pointed to by d, as if executing * d = * s2; then Increment d to point to the next place in the destination buffer as if executing d++ and increment s2 to point to the next character to be copied as if executing s2++; and Exit the loop if the last character which was copied was NUL. This is written in a very concise manner: * s2++ means "take the character pointed to by s2 then increment s2". Similarily, * d++ as a left-hand value means "use the variable pointed to by d then increment d". The order of precedence of operators helps dispense with parentheses because ++ has higher priority than * which has higher priority than =. The value of the assignment is the assigned value, so the loop ends when the assigned character has the value 0. Finally, return s1, which was not changed by the function. 
c-4-84	X	Why bitwise complement of a 1-byte variable returns a 4-byte value? Let's take for example the following two 1-byte variables: When printing the bitwise complement, the result is a 4-byte variable: I know this can be "solved" using casting or masking: But why the non-intuitive behavior in the first place? When you apply the ~ operator to x1 and x2, the values are first subject to integer promotions because uint8_t is smaller than an int. The operator is then applied to the promoted value. So ~x1 is really ~0x00000000 (i.e. 0xFFFFFFFF) and ~x2 is really ~0x000000FF (i.e. FFFFFF00). That's why you get the values you're getting. Also, the %x format specifier expects an unsigned int which it prints as such. You need to use %hhx for the format specifier. That signifies an unsigned char argument. Many computer processors have a "word"? size for most of their operations. E.g., on a 32-bit machine, there may be an instruction that loads 32 bits, an instruction that stores 32 bits, an instruction that adds one 32-bit number to another, and so on. On these processors, it may be a nuisance to work with other sizes. There may be no instruction for multiplying a 16-bit number by another 16-bit number. C grew up on these machines. It was designed so that int (or unsigned int) was "whatever size is good for the machine you are running on"? and char or short were fine for storing things in memory, but, once they were loaded from memory into processor registers, C worked with them like they were int. This simplified the development of early C compilers. The compiler did not have to implement your complement by doing a 32-bit complement instruction followed by an AND instruction to remove the unwanted high bits. It only did a plain 32-bit complement. We could develop languages differently today, but C is burdened with this legacy. 
c-4-85	X	Avoiding repeating lines by using infinite loop, is it good or bad? I'm studying C with K.N. King's C: A Modern Approach and there is a problem (Ch.06 - Prog. Project #4) which asks the reader to write a program that calculates broker's commission according to a trade until the amount of trade is 0. Here is the writer's implementation: But I thought rather than writing the printf and scanf lines twice, it'd be better to use an infinite for loop, like this: My question is, is taking account the number of lines and avoiding the repetition a good and necessary habit or is this a bad way in means of algorithm design? Thanks in advance! Using an infinite loop to accomplish this task technically works. However, the suggested code is cleaner, as the condition to break out of the loop is inherent in the loop type. The different loop types allow you to accomplish different tasks more efficiently. The "for" loop can increase or decrease the value of a variable without needing to write the code for this within the loop. A while loop simply runs a check, which is what you're doing. One rule is Don't Repeat Yourself. As with any rule, there can be exceptions, but you should pay attention to it if you have no strong reason to go another way. The rationale behind it is not really typing lazyness, but more that if you have to change code, you will have to take care of not forgetting one single occurence of repeated code. For that reason, and even if in your example it is not far from a matter of taste, I definitely prefere the second version where code is not duplicated. A specific reason here is that you really should test the return value of scanf (what if the user erroneously types an alpha of symbol?). If the second version you have to fix the problem only once. In the first version, if you do that long time after writing it first, or even worse if someone else has to fix it, there is a risk forgetting one instance. You should heed the advice of the other responders about not using float for money. That said, here's a way to avoid using an infinite loop (still uses your float nomenclature, but you should change it as appropriate): Don't repeat yourself. DRY vs. WET. Consider that the code needs re-work Would a maintainer of the code like to update this in 1 or 2 places? User I/O often benefits with a helper function and makes for a clear non-repetitive coded loop condition. The whole if(), else if(), ... could use re-work too. Perhaps struct is too new for OP, yet the point is that code evolves and coding for ease of maintenance is a very worthy goal. 
c-4-86	X	Linux Pseudo Terminal: function isatty returns true in child I am trying to control tar via a pseudo terminal in a C program I have designed. The tar command I am using is: tar -cpzf - What I am trying to do is to create a pseudo terminal, run tar with output directed to stdout. My plan was to read the data stream produced by tar in my C program. The problem I am experiencing is that tar prints an error code and exits. tar: "Refusing to write archive contents to terminal" I looked in the latest tar source code and I see that it includes a terminal type check. Tar bails out if isatty returns true. What control flag(s) must I set on the pseudo terminal to make function isatty return false in the child process? 
c-4-87	X	How "a<b<c" or "a>b>c" are evaluated in C I found this question in many interviews and my teacher asked me the same the main doubt was that if I include <stdbool.h> in C99 standard will that evaluate this as (true)<c or (false)>c. Need a more clear answer than the linked post --> Usage of greater than, less than operators . How a<b<c or a>b>c are evaluated in C for example in the following code. thank you in advance. From standard itself (Relational operators footnotes) The expression a<b<c is not interpreted as in ordinary mathematics. As the syntax indicates, it means (a<b)<c; in other words, if a is less than b, compare 1 to c; otherwise, compare 0 to c. Operator associativity dictates that a<b<c is equivalent to (a<b)<c (as opposed to a<(b<c)). If a is less than b, a<b evaluates to 1. Otherwise, 0. If the value returned by a<b (1 or 0) is less than c, the whole evaluates to 1. Otherwise, 0. From the spec Each of the operators < (less than), > (greater than), <= (less than or equal to), and >= (greater than or equal to) shall yield 1 if the specified relation is true and 0 if it is false.) The result has type int. 
c-4-88	X	macOS app cannot open file that exists I have a C module in a Xcode app (macOS) that opens a file. Here is the code: The file exists and I can read it in Terminal. But running this app in Xcode is giving The file has the following permissions: I understand that Xcode has a working directory but would that affect the above absolute path? Modern macOS apps employ sandboxing, that only allow updates to files in the sandbox. See File System Programming Guide: The Library Directory Stores App-Specific Files. Also see About App Sandbox. I would not suggest using a hard coded path like that. I'd suggest getting the library folder from the NSFileManager That returns: /Users/{username}/Library/Containers/{com.domain.app}/Data/Library You can then pass that to your C function. BTW, Apple explicitly advises that we should not create files in Preferences subfolder. They warn us: This directory contains app-specific preference files. You should not create files in this directory yourself. Instead, use the NSUserDefaults class or CFPreferences API to get and set preference values for your app. 
c-4-89	X	glDrawArrays throws GL_INVALID_VALUE on GLESv2 I'm trying to port an OpenGL program to GLESv2. The program uses the following code a texture to the default framebuffer (it also fails if I render it to an fbo which also works on OpenGL). This works fine with OpenGL but it fails on glDrawArrays() under GLESv2. I read this question: glDrawElements throw GL_INVALID_VALUE"‹ error which is very similar to my problem but I can't figure out how to apply the solution to my code since I'm not using VertexArray and I'm very new to GL. inst->texture is a texture uploaded with glTexImage2D(). I created the vertex_buffer right after initializing EGL and compiling the shaders: Edit: You can look at the whole source file here: https://github.com/fernando-rodriguez/mediabox/blob/bc4135d9568b2c5b4e8f39ac63ded2cb66023bcd/src/lib/ui/video-opengl.c. The file is a video "driver" for a compositor, all it does is creates 2D surfaces and render them to the screen. If there is anything wrong with the question or am missing something please post a comment so I can fix it. Thanks. I figured it out. I was calling eglBindAPI() after eglCreateContext() so I think I was actually creating a GLES1 context. 
c-4-90	X	2D interpolation of arrays in C I have a data file where I have computed luminosity of stars as function of energy and mass. So for a given mass I have energy ranges from 0.1-10 keV and then I have mass ranges from 10-100. Now I want a function which f(M,E) which can give me the interpolated values of luminosity for any mass M and energy E. I know how to do it in Python but I am having trouble to do it in C. I know how to do it for one variable in gsl. In oythone I just used scipy.interp where I could just pass the arrays and it will return me the interpolated values. But I was wondering what is the best way to do it in C. Here is what you need to do: in the main() function: 1- Open your data file, read it line by line and store the information in arrays or multidimensional arrays then close the data file. 2- Compute the equation of the line passing through your cloud of dots. 3- ask for user input on the console, something like Type in the mass and when you get the answer, ask for more user input something like Type in the Energy. Store these answers and echo the result of calling your luminosity function with these answers as params. Then, outside of main() create a new function called luminosity that accept 2 params and output the interpolated luminosity. 
c-4-91	X	C - why iminor always returns null? I'm writing a character device driver in linux kernel space and at some point I need to get the minor number of the file. I used the command: and I also tried using: in both cases I get null, any idea what could be the problem? 
c-4-92	X	Convert Swift String array to c char** I'm calling a C library from Swift 4 and I have troubles converting a [String] to const char *[]. The C API defines this method: which is exposed in Swift as The Swift wrapper I'm trying to write is the following but the error I get is Cannot convert value of type 'UnsafeMutablePointer<UnsafePointer<Int8>>' to expected argument type 'UnsafeMutablePointer<UnsafePointer<Int8>?>!' what am I missing? getDREFSs expects a pointer to an array of optional Int8 pointers. Also the second argument must be converted to UInt8. So this would compile: But a quick test shows that is does not work if called with multiple strings. The reason is that the arrays returned by dref.cString(using: .utf8) can already be deallocated (and the pointer invalid) when the C function is called. Here is a working version, a slight modification of Convert a Swift Array of String to a to a C string array pointer for this particular case: 
c-4-93	X	Create makefile which iterate through directory Hello, I would like to create a makefile for this project, which does these commands: Step 1 in SHARED FOLDER: Step 2 in tipoA FOLDER: Step 3 in tipoB FOLDER: Step 4 in gestore FOLDER: This is my makefile but it doesn't works: EDIT: @HardcoreHenry This is my makefile now, but it gives the error: ***** Missing separator.** SOLVED (even if the first rule does not execute the file): The following line would give you those errors: First, you are outputting to ./tipoA/tipoA instead of ./tipoA/tipoA.o as @Nonyme pointed out. This would not cause your compile failure though. What would cause a failure is that it is trying to use ./shared/funzioni as an input -- that file does not exist. (notice the makefile target depends on ./shared/funzioni.o, which must be built before this recipe is invoked, but it does not generate shared/funzioni (without the .o) You need to add the .o's to the target and sources of your cc commands. I would also suggest using $(CC), and lookup automatic variables -- specifically $@ and $^ for your recipes. Much neater and less error prone that way. 
c-4-94	X	Undefined Reference to function - But the header is included Ok Peeps. I'm struggling with the basics here. the file structure is: ./libxml2-2.0.0/parser.h: ./libxml2-2.0.0/parser.c: part of my code is: main.c: Makefile: ERROR: So the library is included, other libxml and parser.h elements are being used fine, but xmlParseDoc I can't use. How to solve it? 
c-4-95	X	C Double Literal NaN with Payload I am using NaNs with payloads (so that the mantissa contains important information but is still treated as a NaN). For example one such value may be represented using IEEE-754-1985 in hex as FFF8000055550001 which has a sign bit of 1, the exponent of 7FF for a NaN/infinity, the quiet NaN bit set (at least on most architectures), and a payload of 0x55550001. However this has a few problems. First, this cannot be created easily as a literal in C/C++ since the common methods all cannot be used to initialize literals: hex-literal notation for doubles (the best option, see here) but only seems to support finite values and not infinities or NaNs non-NaN values (I can get infs by using p1024 and p-1024 but the mantissa is ignored in this case) memcpy is nice as it avoids aliasing but requires a function call reinterpret_cast is C++ only (which is okay) but requires the operand to be a variable or pointer and not a literal union-type-punning but I don't think this can be used to initialize a static-time constant Is there any method to setup the static constant for a NaN with a payload? It may be assumed that the system is IEEE-754-1985 compliant and that longs and doubles have the same endian-ness. memcpy does not need to be implemented with a function call. A good compiler will inline it and otherwise optimize it. Constant union objects with static storage duration can be initialized. You can do this with a compound literal, which you can then take the address of and cast: Here, we have a anonymous literal union containing an array of unsigned char of size 8 and a double. We initialize the array field of the literal and read the double part to initialize the variable. Output: We can clean this up a bit with a macro, and also take care of the endianness: Then we can use it like this: Note that the endianness check is system dependent. The above is how it is typically implemented on Linux. One possibility is GCC's (non-portable) __builtin_nan extension, which can be used to produce compile-time NaN constant with the payload. Referring to its documentation: This function, if given a string literal all of which would have been consumed by strtol, is evaluated early enough that it is considered a compile-time constant. Example: Result: 
c-4-96	X	Taking elements in decreasing order from an array in shared memory I have a program with two types of processes: A and B. All B processes need to read an array in shared memory containing information about every A. Then, B-type process needs to contact an A with the highest score. A can accept or reject the message, if it accepts, both processes die. If A rejects, then B should find the second highest and try again, and so on. I can only think about this solution : Also, contacted array needs to be emptied after a B tried to contact everyone, so it can start over. This solution seems bad to me, what could be a better one? Note: In complete code there are semaphores that control access to shared memory. 
c-4-97	X	x86 interrupt handler gets blocked when using infinite loop I'm trying to learn x86 assembly and c language. And now I've finished a simple timer and keyboard interrupts. The firs one can print a line every several ticks and the second can print what you've pressed on keyboard.The code is just like: Timer.c: keyboard.c: main.c: these two handlers are in the IDT. So when an interrupt occurs, the IF flag is cleared. The CPU will ignore other interrupts. After initialized all the configurations in my main function, I finished it with a infinite loop, which is like : while(1). Ok, this is good, I can see on the screen that those two handlers work. However, when I want to make it a nested interrupt, I did the following thing: Timer.c: keyboard.c: main.c: what happened next really consused me: using Bochs, I can see that my program just do the while loop in timer.c. At this moment, I checked the flags, it showed that IF flag had been set, but when I try to type something to test the other interrut, it failed. It just seemed that all the interrupts were blocked or ignored. The question is, what's the difference between those two loops, one is just in an interrupt handler, also, I dont konw how to solve this problem. I double checked my code in my vmware and virtualbox, but the result was same. I know this problem must have happened before I met it, however, I can't find anything related to this problem. By enabling interrupts inside interrupt handler you don't enable only "others" interrupts, but all interrupts. Including the timer interrupt. (this is too general, payne points out in comment, on x86 there may be different sources of IRQ signals, and particular PIC/APIC chips can be configured to prioritize one over other ... doesn't change anything about the principle of re-entrant IRQ handling, but you can fine-tune which IRQs have priority, which may mean you don't need re-entry lock at all in the end, if your configuration prevents it) Your code doesn't look like re-entrant-aware handler, so if that is how your handler code is done, then your timer keeps firing up new timer interrupts as configured, and because you have sti there, they keep re-entering the handler code, filling up slowly stack space until it will overflow (or wrap around, I'm not sure if you are in real or protected mode, and how your stack is set up). Only the last one is of course running, rest is dormant (forever, if the last one doesn't return). A long-duration interrupt handlers are usually sign of bad code architecture (aim for shortest + fastest possible interrupt handlers, often just filling up some queue with data, which is processed in async way outside of interrupt handler). But if you really need one, and you can't leave other interrupts disabled, you must write the handler as re-entrant one. addendum: one more remark, probably "obvious" one, but just to make sure it's clear. Single CPU core can run at the same moment only single "thread" of instructions, i.e. it is either executing your infinite loop inside main, or it is executing one of the interrupt handlers. When new IRQ signal comes to CPU and interrupts are enabled, the current CPU state is stored in stack (whether it was in main, or timer or keyboard, doesn't matter), and CPU will switch to the desired interrupt handler. So if you emit IRQs faster than your handlers do finish and return to previous code, you will slowly choke the stack memory with the stored CPU states, and it will never return to the original thread at bottom (the infinite loop inside main). Timer interrupts (IRQ0) have priority over keyboard interrupts (IRQ1). So even though you're enabling interrupts generally (with an sti instruction) in your timer interrupt handler, the primary interrupt controller (PIC) is only going to enable higher priority interrupts until your timer/IRQ0 service routine is complete. For some additional explanation, see: https://groups.google.com/forum/#!topic/comp.lang.asm.x86/7coo0px-BU4 Right, that is what happens. The interrupt controller (the primary one, in this case) which signalled the timer interrupt to the CPU will not allow any equal or lower priority interrupts through until the CPU has told it that the timer interrupt has finished, through the EOI instruction (outportb(0x20, 0x20) for the primary interrupt controller). You could technically issue an EOI instruction to the PIC to tell it that handling of IRQ0 is done, but you will potentially set yourself up for some very messy scenarios and race conditions. It would be much cleaner to let the interrupt handlers just handle their specific interrupts and save associated state. Then, have your main program watch for the sequence you need (e.g. timer, then keyboard) 
c-4-98	X	SIDT opcode return address to malformed IDT structure My goal is to access the IDT from a MacOS kernel module. I'm running macOS 10.13.2 under VMFusion 10.0.1, and it seems like the sidt assembly command points to corrupted table structure. This opcode should return the address to "Interrupt Descriptor Table" which holds the descriptors for each interrupt. Each interrupt contain pointer for callback function that should be called when a specific interrupt is called. For example, here are 2 interrupt descriptor that points to valid callbacks from kernel __TEXT section in previous older versions. int3 points to idt64_int3 int80 points to idt64_unix_scall etc... For some reason, starting from high Sierra 10.13.2, the sidt return memory range that doesn't contain valid pointers (all are outside the boundary of the kernel __TEXT section). perhaps there's another way of getting the table pointer ? here's my source code for finding the idt pointer: 
c-4-99	X	Run-Time Check Failure #2 - Stack around the variable 'uni' was corrupted I am getting this error while ending the program .The program does whatever the user inputs (a,b,c,d,e,f) f ends the loop, a should always be used first(it scans input from a text file)-b,c,d prints out a list called output and e prints the students that failed to submit a min of 3 laps. Thanks. Input file : Code: 
c-4-100	X	Reading and Writing Using DMA Character Device Driver I am using this character device driver https://github.com/ikwzm/udmabuf to do DMA. In the documentation, the author says to access the driver you can open the device file like this I have two questions. The first is the type of buf, which I am assuming is char* rather than char[N], but I just want to be sure. The second question is how to actually perform the reading and writing. Could I write by simply changing the characters to which buf is pointing, assuming it is a pointer? If that is the case, will buf continue to change as the memory buf is mapped to is changing? 
c-5-1	X	Check CS50 does not compile a correct program I am currently working on the pset 4 on the program recover. We have to recover 50 jpegs of a deleted file. I wrote the program, and it works and compiles perfectly. But when uploading my program into check CS50 it does not compile anymore. They tell me that when compiling the program exits with 1 instead of 0. What am I doing wrong? please help me! here is my code: 
c-5-2	X	Need Help about searching a word in 2d character array or words puzzle in c I want to make a program that searches the given words in a given Word Puzzle. I created a 50x50 2-d character array with the help of srand function and printed it. The thing I have to do is, finding the given words in this puzzle and capitalizing them. Can someone help me about the program that searches the given words in 8 possible direction orientation ,capitalizing them and printing the puzzle at the end. FOR EXAMPLE: sdhajshdcarskdjalsd kdkajsdlkyergfjÄŸÄŸqw sdjkfhdjspjhfsjdfhd aasdhkfksdohsÄ±Ä±qpqp nasfgdfcvbcvojaÄ±wea ddkjspqwÄŸÃ¼zÅŸclsdfdf sdhajshdCARskdjalsd kdkajsdlkYERGfjÄŸÄŸqw SdjkfhdjsPjhfsjdfhd AasdhkfksOhsÄ±Ä±qpqp NasfgdfcvbcvOjaÄ±wea DdkjspqwÄŸÃ¼zÅŸcLsdfdf im a first year of Ä±t student. i need them to learn. sorry about my attitude. i didnt mean for free service. HERE'S MY CODE; 
c-5-3	X	Segmentation fault while implementing chaining in hash table after collisions occur I am trying to implement chaining (collision resolution technique in hash table). My program works fine for most of the test cases. Here is my program (it's quite big, but I know where it is failing. So you can skip this part if you want.): The program gives SIGSEGV for this test case: Enter elements to be stored 5 Enter the elements in array 21 32 565 784 445 Enter the element you want to search for 565 TEMP = 35383520 temp->data=445 TEMP = 35383456 temp->data=565 Segmentation fault (core dumped) After debugging I found that it's throwing seg fault at line number 56, i.e.: This line is written in this code snippet: As you can see in the failing test above that, the while loop is executing 3 times (it was supposed to be executed only twice, because the temp should point to null for the third time). And while it is executing 3rd time, it's throwing segfault at the line if (key == temp->data). It means that temp is not NULL, and it even doesn't has data field. So there might be the problem in the insertion (i.e. while inserting the next field of the newNode might not be made NULL, but I am properly taking care of that thing.) If there would be the problem in insertion then my code should fail of other test cases too. But the code is just failing for the specified test case above. For example, the code passes this test case: [aupadhyay@localhost c]$ ./a.out Enter elements to be stored 7 Enter the elements in array 21 32 565 784 445 655 84 Enter the element you want to search for 565 TEMP = 8063248 temp->data=655 TEMP = 8063216 temp->data=445 TEMP = 8063152 temp->data=565 565 is found I am just unable to figure it out, why does it fail the mentioned test case. The problem with your code in many places, is that you don't ensure that when indexing into hashTable that you remain within the bounds that you allocate initially. In your example, the number 565 would generate a hashedValue of 5. You've only allocated 5 elements in hashTable which covers you for the range of 0 to 4 though. Inserting into hashTable[5] enters the realm of undefined behaviour and your code crashes. You don't get the same problem when you enter in 7 numbers because all 7 numbers generate hashedValues that are within the range 0 to 6. Since your hashFunction will only return numbers between 0 and 9, you could either declare a new variable that tracks the size of hashTable and expands it as numbers are entered or alternatively pre-allocate it for the maximum size. In the long term the other option would make more sense as it will adapt if you ever change hashFunction. You problem is here: you do not correctly initialize the hash table. You wrote: Since your hashtable has 10 buckets, it should be i < 10. When n == 5, hashTable[5] is not initialzed and has garbage. When 545 gets hashed, it gets that garbage as it's next pointer, not NULL. 
c-5-4	X	C - how to free a linked list that has a linked list in its nodes? As part of a program that I'm writing in kernel space, I have created a linked list that has another linked list in its nodes. The nodes can be two types, either channel which only has an int value and a char* value, or a device file which has an int value and a linked list of channels. but I'm getting NULL pointer reference in my freeList function. The error that I get is: unable to handle kernel NULL pointer dereference Any idea how to fix this? If you declare the tmp var outside the loop-while? struct node *curr, *tmp; for example. 
c-5-5	X	Direction Finding Using C program NEED TO FIND THE TOTAL DISTANCE TRAVELED AND FINAL DIRECTION I don't know what is wrong in the code. Input: direction , speed and time output: total distance traveled and current direction. Eg: A car runs towards North at 30kmph for 30min and towards East at 40kmph for 30 min. input: N 30 30 | E 40 30 distance of 2 direction change(north and east): (30*(30/60))+(40*(30/60)) =35 output: total_dist=35 and direction: NE Direction Graph In my black console screen I Don't know why the output is like this. Not getting the prompt for input of direction (variable dir) but jumps to the next line of code. Anonymous output! 
c-5-6	X	How to ensure Code immediatly after a call to sched_setaffinity() run on the specified thread before waiting for next turn at the cpu queue? I have written a code to make 7 process in addition to the parent, so the sum is 8 ... I managed to make each process tied to a different thread .. ie I have intel core-i7 ..which have 4 cores X 2 threads/core = 8 threads ... now my problem how could I ensure that after a call to sched_setaffinity() the process will continue running on the specified processor and will not wait till it's next turn in the specified cpu's queue ?? could we have some thing like get_me_out_of_the_current_queue_ so_that_the_sched_puts_me_in_the_ specified_queue_next_time() my code is : I know that the while() loops at the beginning of each process specific code (inside if branch) may guarantee that, but i guess that is due to the delay of time , which is not a robust solution ... please tell me what's the correct way to solve that ... second point I'd like to ask about : each process of the 8 processes will run on different core , but during interprocess communication like when i continue and create pipes so that the processes communicate through the parent like the middle point "like a star topology" what happens if a child say child a wants to communicate-during it's session- to parent-when it's still in it's cpu queue not currently running like the childA ... is that the role of the OS to make all eight process feel as if each one is currently having the cpu alone ? In short -- you can't, because whatever core you've asked for might already be busy doing something else. All that setting affinity does is tell the OS you only want the process scheduled on that particular CPU. As a result it is actually more likely to get your task delayed where the default affinity (any CPU) would schedule it on the first available. You could raise the process priority (i.e. realtime scheduling), which would cause the process to preempt anything already running on the CPU, which might be more in line with what you were looking to do. That being said, you risk locking up your system entirely, if the "while" loops never end they will be stuck in a tight loop and nothing else will get scheduled (not even your shell) so you won't be able to stop them. my problem how could I ensure that after a call to sched_setaffinity() the process will continue running on the specified processor and will not wait till it's next turn in the specified cpu's queue ? The docs do say, in part: If the process specified by pid is not currently running on one of the CPUs specified in mask, then that process is migrated to one of the CPUs specified in mask. That does not promise that such a migration will happen before that process's current time slice (if it has one) expires, nor that it will immediately start running on one of the specified CPUs, but that's moot, because how would you be able to tell? what happens if a child say child a wants to communicate-during it's session- to parent-when it's still in it's cpu queue not currently running like the childA ... is that the role of the OS to make all eight process feel as if each one is currently having the cpu alone ? Obviously, a process cannot do anything at all while it is not currently scheduled on a CPU. In fact, it cannot even conceive (metaphorically) a want to do anything. But overall, yes, it is the OS's role to mediate time sharing and IPC. This hasn't anything in particular to do with CPU affinity or the number of physical execution units in the system. All of it works fine on a single-core machine (though setting CPU affinity is pointless on such a machine). 
c-5-7	X	Some elements were not calculated in a vector addition on cuda Here is the code: Basically, I was trying to add two vectors element-wise, on a grid with 3x2 layout, each block in the grid having a 3x2 layout of threads. Here is the result when I run the compiled binary: Apparently some blocks are just ignored. I've also tried to play around with how the tid is calculated in the kernel function add, but there are always some blocks missing. Any suggestions? The only problem is with your tid calculation as you have already surmised. There are many ways to perform the mapping and also to create the arithmetic. For general purpose 2D grids, I find it convenient (i.e. an easy-to-remember methodology) to create 2D indices in x and y, and then use the grid width (in x) multiplied by the y index, plus the x index, to create a thread-unique 1-D index: gridDim.x*blockDim.x is the grid width in x, expressed in units of threads. When we use this general-purpose 2D indexing scheme in your code, it seems to work correctly for me: The above should provide the correct result. With respect to performance, this may not be the most efficient mapping for this toy problem. This problem has threadblock sizes that are not multiples of 32, which is generally not recommended for efficient CUDA programming. Rather than try and come up with the optimal mapping (in terms of performance/efficiency) for this case, my suggestion would be to reorganize your threadblocks to provide at least a multiple of 32 threads per block, and I would also recommend considering at least 16 or 32 threads in the x-dimension of the block, to making indexing easy to understand as well as yielding approximately optimal memory access performance. 
c-5-8	X	Export C library to Windows dll So I have source code written in C for the LibIdn2 library. I am looking to port it into C# but running in to some issues along the way and would appreciate some help. Installed Cygwin along with Make and GCC G++ packages Successfully able to run the./configure command on the source directory After this, running the "make" command produces an .exe file. I have been trying to get a .dll file created but cannot seem to do so using gcc compiler. The command I am running is: but it complains that it cant find the header files referenced in the idn2.c source file. I have checked that in the idn2.h file, dll_Export is defined. Any ideas how should I proceed? I need to get a dll. 
c-5-9	X	BOOLEAN algebra NOT and DWORDs - suggest a fix I've found some legacy code that goes wrong, setting file attributes. It looks something like this - Any suggestions for a fix? The ! operator is a logical NOT. The result of this operator is either 0 or 1. What you want is the bitwise NOT operator ~: You can use | when specifying flags, |= to add flags and ~ to remove them. If you do this, you can easily update the flags without having to keep using & ~. Much simpler for readability. In the above example, MyFlags is assigned PROCESS_VM_OPERATION and PROCESS_VM_READ flags (so 24 total value for me), after updating the flags to remove PROCESS_VM_READ, it became 8 for the value because we removed PROCESS_VM_READ and are left only with PROCESS_VM_OPERATION. To check for presence of flags: 
c-5-10	X	K+R 2.4: bus error when assigning (Mac OS) I'm currently trying to solve exercise 2.4 of the K+R book and came across an odd error I can't really reproduce elsewhere. I'm using: The code is: GDB says: The error originally occurred at s1[j++] = s1[i], but I inserted s1[0] = s1[0] to test it independent of the variables and it occurred there as well. Obviously, I'm missing something here. I'm compiling with clang -O0 -g -Weverything exercise2-4.c -o exercise2-4 if that's of any relevance. Thank you very much for your time and sorry if this question's been answered before, I haven't found any question where the error occurs at such an odd place. You may not change a string literal. Any attempt to change a string literal results in undefined behavior. From the C Standard (6.4.5 String literals) 7 It is unspecified whether these arrays are distinct provided their elements have the appropriate values. If the program attempts to modify such an array, the behavior is undefined. Instead of the array of pointers to string literals you should declare a two dimensional character array. For example Also you have to reserve enough space for each element of the array if you are going to append new characters to it. 
c-5-11	X	Has a trick been missed in C syntax, by not allowing enum members to be used with their tags, to allow a containerized method? slightly different question as posted here: Using enum members with enum name in C in that, why does C not support a membership syntaxt for enums, similar to structs? Most IDE tooltips provide the member list of an enum when typing its tag then '.' but wouldnt create something that could be compiled (eg a typedef enum called teCOLORS with a member RED could be used as teCOLORS.RED). I know the usual workarounds and better naming (_en etc) but where in the history did this never get implemented, has the question never been asked or proposal made to include this syntax? 
c-5-12	X	How can i calculate the line of number in this triangular? Given this triangular: 1 2,3 4,5,6 7,8,9,10 ........................ Someone know if exist function in Math library that calculate the line on "n" in this triangular? 
c-5-13	X	Is there any function or method like subprocess.getoutput() in c or c++? Python: Can I get output like Thatâ¬† in c by doing this?: C: A function getsystemoutput() could look like follows: This version returns an empty string in case of error and uses a static buffer for output, which makes it easy to use in a printf() but for general purpose I would suggest to return NULL on errors and pass output + it's size as arguments. You might also want to check for the result of pclose() to determine the exit status of the command called. And be aware that without a loop, it will only return the first line of output. Standard C has no function to run an external process, collect its standard output and standard error, and return that as a string. In fact, as a matter of policy, standard C does not provide functions that return dynamically-allocated memory, which such a function would need to do, other than its functions than have allocating memory as their express purpose. In a POSIX environment, you can rely on popen() to provide a FILE * by which you can read the standard output of a shell command: You'll then have to handle reading the output yourself; perhaps via fgets(): You can print the result: Remember that a file opened with popen() must be closed with pclose(): Note, by the way, that if you want to capture the stderr as well as the standard output, as your Python version does, then your best bet is to accommodate that via I/O redirection in the command, such as: 
c-5-14	X	what will be atan2 output for both x and y as 0 The output of this statement is 0, but it is a 0/0 form , so how its output can be 0, even wikipedia says that it should be undefined , please explain why compiler gives 0 as output for this statement. what will be atan2 output for both x and y as 0 C has 2 relevant specifications. @Oliver Charlesworth @Jonathan Leffler The atan2 functions ... A domain error may occur if both arguments are zero. C11dr Â§7.12.4.4 2 Treatment of error conditions ...For all functions, a domain error occurs if an input argument is outside the domain over which the mathematical function is defined. ...; On a domain error, the function returns an implementation-defined value;... Â§7.12.1 3 atan2(0,0) may lead to 0.0, 1.0, INF, NAN, etc. It is not specified other than something is returned. 0 is certainly a reasonable choice yet these is no clear mathematically correct result - it is not defined. For compatibility with IEC-60559 (which is not required by C although many implementation strive to adhere), the following results are mandated. Note the differences due to Â±0. A note on Ï€. Ï€ being an irrational number and all finite double are rational, a return value of machine pi (the closest representable double to Ï€) is expected with atan2(+0, -0). "what will be atan2 output for both x and y as 0" Zero. "how its output can be 0, even wikipedia says that it should be undefined" Wikipedia does not define C nor various math library specifications - it is a reference - not a specification. "why compiler gives 0" That is the specified response from the floating point standard IEC-60559/IEEE 754 often used by various C implementations. 
c-5-15	X	0xC0000005: Access violation in BFS code I've written this code for BFS, but after showing the result it crashes. I don't find anything wrong with my code. Here's the code I think this is pointer related problem, because I got the same problem because I did not allocate memeory. Visual studio debugger shows there's a problem in this function. Any help will be much appreciated. This is my full code. DFS is working, its BFS that causing problems. 
c-5-16	X	Pi-calculator program gives different output each time it's run This is a program to calculate the value of Pi using the fact that "The probability of any two integers being co-prime is 6/&pi;2." This program compiled successfully but when I try to run it, it gives the error: I tried to change the condition statement in for-loop to i < 9999. By doing this, the program gives an output which varies(when run each time) between 3.000000, 3.162278 and Segmentation fault (core dumped). I want to calculate the value of &pi; only by using the property mentioned above. Please help. Also, help me choose a better function that generates random numbers and suggest me some code improvements. Thank you. OP's gcd() recurses too deep and causes a stack overflow. @OldProgrammer Consider a replacement recursive function that is more efficient Use FP math when doing the division Output 
c-5-17	X	why strchr returns not a NULL when the second argument is a string into a single quotation marks ('text') I tried to write implementation of the strchr(). It works similar in most of cases except this one: strchr returns while me version ft_strchr returns NULL I'm curious why strchr behaves which way. ' up' converted to unsigned char is 'p' (as int 538998128). Also I found here different implementation and it behave as strchr even with this data. Also my version is different I guess they should work similar but they don't. I really interested why? Thanks in advance. In this expression: The term *s, which is of type char, has a range of either -128 to 127 or 0 to 255, depending on whether or not char is signed or unsigned. The value 538998128 of c is outside of this range, so the comparison will never be true. At the start of the function, you have this line: But this does nothing. It casts the value of c to an unsigned char and does nothing with the resulting value. It does not change the value of c. The other implementation you show casts c to unsigned char and then compares that casted value with *s. That's why the other implementation gives the expected result. 
c-5-18	X	GTK C segv: Adding new signal causes segv I am getting a sigsegv fault with the introduction of a new switch signal into an existing test gui. The UI has 3 possible sources of events, two event boxes and one switch. When the event boxes are clicked, they behave normally, however if the switch is toggled, then clicking on one of the event boxes results in a segv (behaviour 1). In addition, if run from new, toggling the switch first and then clicking on the event box also results in a segv (behaviour 2). The segv for both occurs always at the same place (if using one of the event boxes as an example) as follows: The simplest manifestation I could come up with in terms of code is as follows (excuse the includes): And the gdb bt is: Please and thank you in advance for any assistance on this. Edit: Added the glade file as requested - it is simplified for testing purposes: The problem resides in this two lines: When you use this function the user_data passed to connect the signal will be applied to all signal handlers. If you choose this path then your user data should contain all the relevant data and handlers must address it accordingly. Problem is that your signal handlers expect different things but you give them the same data. From the gtk_builder_connect_signals: user_data user data to pass back with all signals So what can you do? If you want to keep the same approach, then, e.g., let's create a structure that contains all the relevant data which will then be passed to the callback/signal handlers: Then initialize the contents: Remove the redundant gtk_builder_connect_signals and replace one with our new structure: Now, all of the callbacks can use the data they need: Your code with the suggested changes should be something like this: It should compile and not segfault like before! 
c-5-19	X	undeclared variable. [ probem with headers ] I know its the simplest mistake but i cannot find a solution. I have header : Then file.c I got an error : 'ticks' undeclared ( first use in this function ) Note: in the following code example, I stripped all the unrelated statements 1) do not declare variables in a header file. if necessary, use the 'extern' modifier in the header file. 2) Declare the variable in a source file, like main.c 3) any symbol name beginning with underscore+capital letter Or two underscores are 'reserved' for the system. Therefore strongly suggest replacing all instances of __IRQ_HANDLER__ with the (typical) INTERRUPT_H an example code: file: interrupt.h file: interruptHandler.c There needs to be a third file that declares the variable: ticks and if declared in the file global space, it will automatically be initialized to 0 It is necessary to also treat the code in the third file that accesses the ticks variable as a 'critical section. Probably by: disable the interrupts copying ticks to a local variable enable the interrupts 
c-5-20	X	How can I view the stack traces of a native compiled C program in android? I have compiled a c program for arm v7 using arm-linux-gnueabi-gcc -static -fno-stack-protector -fno-pie -march=armv7-a hello.c -o hello and pushed the binary to /data/local/hello inside the root of android device. I'm able to run the program using adb shell. But my question is how can I debug the program i.e., how can I see the Program Counter and such info? Try to use gdb in remote mode: https://source.android.com/devices/tech/debug/gdb probably it works already (had problems with it in past). Also you can try to use Google Breakpad: https://github.com/google/breakpad/blob/master/README.ANDROID it works sometimes :) 
c-5-21	X	How to connect esp8266 with Atmega I want to connect esp8266 to mega8. There seems to be a problem in the program of atmega8. I think my mega sends messages like AT+CWMODE=3%C, but it could not get a response. Any help would be appreciated. 
c-5-22	X	Cross-compiling with GCC I am having a bit of an issue compiling inline ARM assembly instructions in C: How do I compile a program for ARM while using an Intel host system? You need to compile with one or more switches specifying your target system or architecture. The compiler does not automatically know what your intended target is. Once you tell it, it will use the appropriate assembler (if it is installed). If you do not have the necessary cross-compilation tools installed, there is some information here. Specific instructions depend on your environment, particularly the host operating system, so you will have to provide more information if you want a more specific answer. 
c-5-23	X	Error Output(Pointer) I am a basic level programmer. I wrote a function in a c program returning an array (through a pointer,link of program attached) but there is some error. The output should be 12 but the output is 10. Can someone help me identify the mistake(if there is a concept error) Within the function pointer the array A is a local object of the function that will not be alive after exiting the function. The memory occupied by this array can be overwritten by other objects created in the program. So returning pointer to a local object with the automatic storage duration of a function results in undefined behavior. You could make the program valid the following way The program output is Another approach is to declare a local array within the function but with the static storage duration. For example In this case the array will be alive even after exiting the function. Take into account that according to the C Standard the function main without parameters shall be declared like also the function pointer without parameters shall be also declared (when it is defined) like 
c-5-24	X	Get parent process status in Linux Trying to get the process status of a given process P from one of its childs P'. I know about the function waitpid(), but in the doc, it said that it's used to check the status of a child process. So is there any other way to ? There is no standard function by which a process can wait for its parent to terminate or obtain its parent's exit status. The process tree just doesn't work that way -- children notify their parents when they exit, not the other way around. Therefore, if you want child processes to learn of their parents' demise, you must arrange for the parent to actively notify them. This seems like a job for signaling. If you need only to inform children that the parent exited cleanly (i.e. by returning from main() or calling exit()) then that's probably enough by itself. Choose a signal -- maybe SIGUSR1 or SIGUSR2 -- and have the parent register an atexit() handler that sends that signal to the children. That might or might not require the parent to keep track of its children. Inasmuch as you mention getting the parent's exit status, however, you probably want a bit more. You can get coarse-grained information to the children by choosing which of two (or more) signals to send to them, but for more detailed information you need an IPC mechanism. You might write an exit status to shared memory or to a pipe (or to several of them), send a message to a socket or message queue, write a status to an ordinary file, or perhaps something else I haven't thought of. You should also consider that the existing model works pretty well, and has done for 40-ish years. It may indeed not meet your needs, but I urge you to think about whether the design you have in mind could be improved to fit more cleanly into the Unix model. 
c-5-25	X	Convert glib C method with string array as parameter to Go I am trying to add some methods to the gotk3/glib Go repository, but I am having troubles converting the method g_settings_set_strv to Go; the C signature is this: And this is what I have in Go (adapted copy paste, I am not a C guy, only Java, Python, etc.): But build fails with this message: I am stuck in this... 
c-5-26	X	Generate sine signal in C without using the standard function I want to generate a sine signal in C without using the standard function sin() in order to trigger sine shaped changes in the brightness of a LED. My basic idea was to use a lookup table with 40 points and interpolation. Here's my first approach: Unfortunately, this function sometimes returns values far bigger than 1. Furthermore, the interpolation doesn't seem to be good (I used this to create sine shaped brightness changes of a LED, but these are very unsmoooth). Does anybody have a better idea to implement a sine generator in C? ...a better idea to implement a sine generator in C? The CORDIC ( COordinate Rotation DIgital Computer ) algorithm is very suitable for use on simple uP, and FPGA implementations as it computes the sine and cosine of a value using only basic arithmetic (addition, subtraction and shifts). More about CORDIC, and how to use it to produce sine/cosine of an angle are provided here. There are also several sites that provide algorithm implementation examples. Simple CORDIC is one that includes detailed explanations on how to generate a table that can then be pre-compiled for use on your target device, as well as code to test the output of the following function (which uses fixed point math): (See documentation of following, and other functions in link) Edit: I found the documentation for using the examples at the Simple CORDIC site very easy to follow. However, one small thing I ran into was when compiling the file cordic-test.c the error: use of undeclared identifier 'M_PI' occurred. It appears that when executing the compiled gentable.c file (which generates the cordic-test.c file) the line: although included in its own declarations, was not included in the printf statements used to produce the file cordic-test.c. Once this was remedied, everything worked as advertised. As documented, the range of data produced generates 1/4 of a complete sine cycle (-Ï€/2 - Ï€/2 ). The following illustration contains a representation of the actual data produced between the light blue dots. The remainder of the sine signal is fabricated via mirroring and transposing the original data section. OP's main problem is in generating the index for the table look-up. OP's code attempts access outside array sine_table[40] leading to undefined behavior. Fix that at least. Suggested change There exists much better approaches, yet to focus on OP's method see below. Output Better code would not pass the values i,x1,x2,y as global variables, but as function parameters or function variables. Perhaps that is an artifact of OP's debugging. Does anybody have a better idea to implement a sine generator in C? This is quite broad. Better as in speed, precision, code space, portability, or maintainability? sine() functions are easy to make. High quality ones take more effort. Although fuzzy, OP's use of a small look up table is a good beginning - although I see it can be done without any floating point math. I recommend for OP to construct a tested and working solution and post it in Code Review for improvement ideas. Have you considered modelling the portion of the sine curve from [0..PI] as a parabola? If the brightness of the LED is only intended to be observed by a human eye, the shapes of the curves ought to be similar enough so that little difference would be detected. You would just need to figure out the appropriate equation to describe it. Hmmm, ... Vertex at (PI/2, 1) X-axis intersections at (0, 0) and (PI, 0) Where K would be ... The classic hack to draw a circle (and hence generate a sine wave too) is Hakmem #149 by Marvin Minsky. E.g.,: It will be slightly eccentric, not a perfect circle, and you may get some values slightly over 1, but you could adjust by dividing by the maximum or rounding. Also, integer arithmetic can be used, and you can eliminate multiplication/division by using a negative power of two for e, so shift can be used instead. For a LED, you could probably just do with 16 or so steps without even interpolating. That said, I can see at least two odd things in your sin1() function: 1) You have 40 data points in sine_table, but you're taking the index x1 modulo 41 of the input. That doesn't seem the right way to handle the periodicity, and lets x1 point past the last index of the array. 2) You're then adding +1, so x2 can be even more over the limits of the array. 3) You're using i in the function, but it's only set in the main program. I can't tell what it's supposed to do, but using a global like that in a simple calculation function seems dirty at minimum. Maybe it's supposed to provide the fractional part for the interpolation, but shouldn't you use phase for that. Here's a simple interpolator, which seems to work. Adjust to taste. Some arbitrary sample outputs: (I'll leave it to the interested reader to replace all occurrences of 3 with a properly defined symbolic constant, to generalize the function further, and to implement calculating the negative phase too.) Generating an accurate sine function requires an amount of resource (CPU cycles and memory) that is unwarranted in this application. Your aim to generate a "smooth" sine curve is failing to consider the requirements of the application. While when you draw the curve you may observe imperfections, when you apply that curve to an LED PWM drive, the human eye will not perceive those imperfections at all. Neither is the human eye likely to perceive the difference in brightness between adjacent values in even a 40-step curve, so interpolation is not necessary. It will be more efficient in general if you generate a sine function that generates the appropriate PWM drive values directly without floating point. In fact rather than a sine function a scaled raised cosine would be more appropriate, so that an input of zero results in an output of zero, and an input of half the number of values in the cycle results in the maximum value for your PWM drive. The following function generates a raised cosine curve for an 8-bit FSD PWM from a 16 value (and 16 bytes) lookup generating a 59-step cycle. So it is both memory and performance efficient compared to your 40 step floating point implementation. For an input of 0 <= theta < PWM_THETA_MAX the curve looks like this: Which is I suggest plenty smooth enough for illumination. In practice you might use it thus: If your PWM range is not 0 to 255, simply scale the output of the function; 8-bit resolution is more than enough for the task. I would go with Bhaskara I's approximation of a sine function. Using degrees, from 0 to 180, you can approximate the value like so if you want to account for any angle, you'd add If you want to do it in radians, you'd add Here is a graph showing the points calculated with this approximation and also points calculated with the sine function. You can barely see the approximation points peeking out from under the actual sine points. Unless your application calls for real precision, don't kill yourself coming up with an algorithm for a 40 point sine or cosine wave. Also, the values in your table should match the range of your LED's pwm input. That said, I took a look at your code and it's output and figured you weren't interpolating between points. With a little modification, I fixed it, and the error between a excel's sign function and yours is off by a max of about 0.0032 or thereabouts. The change is pretty easy to implement and has been tested using tcc, my personal go-to for C algorithm testing. First off, I added one more point to your sine array. The last point is set to the same value as the first element in the sine array. This fixes the math in your sine function, in particular when you set x1 to (int)phase%40, and x2 to x1+1. Adding the extra point isn't necessary, as you could set x2 to (x1+1)%40, but I chose the first approach. I'm just pointing out different ways you could accomplish this. I also added the calculation of a remainder (Basically phase - (int)phase). I'm using the remainder for the interpolation. I also added a temporary sine value holder and a delta variable. The results look pretty good. Comparing the linear approximation vs the system's floating point sine function gave me the error plot shown below. You could use the first few terms of the Taylor series expansion of sin. You can use as few terms as needed to reach your intended level of precision - a few more terms than the below example should start to bump up against the limits of a 32-bit float. Example: Example output: As you can see there is still some room for improvement in precision. I am not a genius with floating point arithmetic so probably some of it has to do with the floor/fmod implementations or the specific order the mathematical operations are performed in. Since you try to generate a signal, i think use a differential equation should not be a bad idea ! it give something like that Still set the amplitude and frequency of the signal is a pain in the neck :/ It would help if you explain why you don't want the built-in function, but as others have said, the Taylor series is one way to estimate the value. However, the other answers seem to actually be using the Maclaurin series, not Taylor. You should have a lookup table of both sine and cosine. Then find x0, the closest x value in your lookup table to the x you want, and find d = x-x0. Then sin(x) =sin(x0)+cos(x0)*d-sin(x0)*d2/2-cos(x0)*d3/6 + ... If your lookup table is such that d<.01, then you'll be getting more than two digits of precision per term. Another method is to use the fact that if x = x0+d, then sin(x) = sin(x0)*cos(d)+cos(x0)*sin(d) You can use a lookup table to get sin(x0) and cos(x0), and then use Maclaurin series to get cos(d) and sin(d). 
c-5-27	X	I need syntax to access the union members through the array of structure pointer . union is one of the member of structure For the below code i need a syntax to access the union member u32reg I have tried with below syntax to load some value into u32reg but it doesn't work so i need a proper syntax to access , below you can find the code snippets 
c-5-28	X	C Printing same array produces different results using two methods I'm experimenting with C void functions and strings. I've tried this program: It prints for me the first a A ï¿½ then segmentation fault. But after changing *test[i] to *(*test+i) which is pretty much the same thing it works for me as expected. Is there any subtle difference *test[i] and *(*test+i) if not, why my code works in second examples meanwhile it doesn't in the first ? test is a char**. As Some programmer dude commented, the [] takes precedence over the * so your for loop is executed like this: *test[0] == *(test[0]) == 'a' *test[1] == *(test[1]) == *(some other address that is saved in memory after &test) => UB Either use one indirection in the whole program (i.e. *, not ** and &test), or use (*test)[i] 
c-5-29	X	How to use signals to kill parent process TREE PROCESS: P1 ----P2 --------P4 ----P3 --------P5 I create the tree process, i need to kill the process like a domino. I mean: P1 sends a signal to kill P2 and P3, P2 sends a signal to kill P4 (then he dies), P3 sends a signal to kill P5 (then he dies) I hope you undertand what I mean. Thanks Use kill() to send the signals, and signal() to register signal handlers that kill the childs and then exit. 
c-5-30	X	what is the difference between putch() and putchar() functions There are 2 functions i can't understand what is the difference between them. What is the difference between putch() and putchar() functions on C rogramming? Thanks. 
c-5-31	X	Changing value of an int array with a signed char pointer I want to create a function to change the value of a void array index to the specified value. I'm testing with a simple function that changes the value of the certain index using a char copy from the array (char is 1 byte). I use char because I can add one to the copy to point to the next index and alter the value. The function is: The problem comes when I try to change the value to a -1. I think the problem is because when assigning char to int the -1 is converted to a 255, so I added to the assignment the conversion to a signed char. But still with no results. The main function is: The output: The problem is that you're not sign extending the value. Live demo. In other words, setting the value of an int to -1 requires modifying all of its bytes. But note that to do so you'd be relying on two implementation-defined behaviours, making this code non-portable: The platform endianness. The representation of negative values. 
c-5-32	X	Segmentation fault appears when I use shared memory only from statically build program When I built a program with --static option and it calls shm_open() function I get Segmentation fault. Without -static option all works like a charm. Does anybody know why? Below I have cited a debug info and a part of truncated source code from a big project. You can comment/uncomment string from Makefile to reproduce the bug. $ gdb --args ./debug/example sample017 Strace for statically linked $strace ./debug/example sample017 Strace for dynamically linked: $ strace ./debug/example sample017 Compiler: Linux: $cat main.c $cat Makefile By the way, is is works well on the older platform: Linux: Compiler: You've uncovered a bug in how the static librt.a and libpthread.a interact. (librt.a:shm_open() calls it, and it is defined in libpthread.a. Their dynamic versions link it just fine.) Specifically, libpthread.a does implement const char *__shm_directory(size_t *len);, but for whatever reason, it gets mislinked somehow, causing a segfault. I suspect some kind of weak symbol shadowing, but haven't investigated it much further. The fix is to implement the function yourself. It is a simple function, that returns the path to the directory, including a final slash, where the shared memory files are to be created in. On Linux systems, this should always be a tmpfs mount at /dev/shm/. I would suggest creating a new C source file, maybe shm_open_fix.c: and compile and link it into your final binary. This should take care of the segfault. Also, the resulting binary no longer depends on libpthread.a at all, unless you use the pthread functions elsewhere in your code. 
c-5-33	X	Crosstool-NG ARM cross compile , cannot link .so file After I've installed SQLite3 library files in the Crosstool-NG arm-cortex_a8-linux-gnueabihf toolchain , I'm trying to cross compile simple SQLite code (sqlite-test.c) The compilation works without any errors but I try to run it on my host machine Linux x86_64 (Ubuntu) I get this error message: I tried to link the file at runtime: with the same result. What is the problem ? Thank you 
c-5-34	X	How to pass a two-dimensional array to a function in C? My function prototype is where arr is the two dimensional array, row and col is the number of row and columns of the 2D array respectively, fl is a flag variable. If the value of fl is 0 then the array will be rotated right, if fl is 1 then the array will be rotated left. I have called the function as follows: But I got one warning and one note A pointer to a pointer is different from a pointer to an array. Array-to-pointer decaying can only happen on the left-most side (e.g. int [3][20] to int (*)[20]). Change your function declaration to or more obviously, Note you have to fix the size at compile-time. From the example, I assume that you are using a static definition of arr. The Pointer to pointer is not the same as a 2D array. Change to Note that the no of columns will have to be defined before compilation. If your compiler supports variable length arrays then the function declaration can look the following way or In this case you can use arrays with different sizes. Here is a demonstrative program Its output is Otherwise if within the function you are going to create new arrays then the function can look as it is shown in the following demonstrative program. Its output is 
c-5-35	X	Syntax issues while writing to LCD display in C I've been trying to implement code from a microcontroller book in order to write to an LCD display. While the book itself did have some syntax issues (I don't know why they were there), I have been able to solve most of the issues except a few. The one's I've debugged as well as the ones I'm having problems with now were similar but I can't figure out the proper syntax(?) for these ones. I'm getting error: use of undeclared identifier 'SSI2' and error: use of undeclared identifier 'SCB' Below is my relevant code for SSI2 and and SCB (note: this is the only time SCB is mentioned) I originally had the issue in an example here: Which I solved with this syntax: If anyone can help me out here that'd be great! 
c-5-36	X	Unable to acccess dimensions of svOpenArrayHandle I have a multidimensional dynamic unpacked array in my SystemVerilog testbench and am passing this into C code as an argument using DPI-C. I am using Questasim 10.4b. Following the flow of Questa, I ran -dpiheader to generate the header file and included it in my C code. SystemVerilog: This is my C code: The printout that I get: I don't understand how to possibly get the dimensions of my subarrays? The strange part is, I can use svGetArrElemPtr2 to access elements of my entire array. I just dont know what the dimensions are. At this point, my workaround is to pass another int array into the C code that contains the dimensions of the subarray. Your 2-dimensional array is built of arrays of (potentially) different lengths. If you want to get the second dimension, you have to do it element-wise. Something like: I've used 0 for an initial value of i instead of svLeft(data, 1), because dynamic arrays always start at 0 and containt size elements. The code doesn't seem to work for me, because sub_array is always NULL. It looks just like an example from the LRM and I don't see anything wrong with it, so it could be due to a tool bug. Maybe it can get you started and you'll have better luck. 
c-5-37	X	Verify if argv[1] is bigger than argv[2] I'm trying to verify if argv[1] it's bigger than argv[2]. I noticed I can't directly do it since argv is a char. But no ideea about how I could transform it into a int. There you have my code. Thanks in advance! 
c-5-38	X	white space in format string of scanf() Here if I use scanf(), as in my code then the compiler expects the user to enter three values, I am unable to understand this , when i use scanf() without any white space then it asks for only two inputs as expected , so i am confused whats the difference between these two , plz explain ... Take a look at this. You can use a space between the %d's. That will require from the user to input something like: 12 32 (with the spaces). If you don't want that, you should use a loop with the scanf. Good luck. If you give a space after your numbers, scanf must determine the end of the whitespaces to be matched: Here the space means read and discard all whitespaces. A non-whitespace character (or EOF) must appear for scanf to make it clear what all is so they can be properly read and discarded. Consider this input stream (dots are character indicators): If you call scanf("%d"), then after calling, the leftover stream is ... where the whitespaces will be discarded at next read. Note the leading spaces are automatically discarded when reading the number. If you call scanf("%d ") instead, the leftover stream is You see the whitespaces are gone immediately. 
c-5-39	X	get a float number from a void* I'm trying to re-program the printf function (college project) but the %f is causing me problems. I use function pointers like so : when the right flag is used, one of these function is called. A typical printfd will recieves a void* variable as parameter and will do so : The thing is, for some odd reason, when i did the same for printff, it didn't work I get the message error: pointer value used where a floating point value was expected float nbr = (float)var I also tried to to something like this. If i have Then i call the function printff() which should do : So i'd have normally nbr1 = 12 and nbr2 = 34 i would then display both with in between a '.' But it still doesn't work and i get the message : error: invalid operands to binary * (have "˜void *' and "˜int') int nbr1 = (int)(var*1) I'm out of ideer so if you have any clue, tell me. Also, i cannot use commands like printf() or something, that's the rule of this exercise so don't tell me the solution hides here. If I understood your problem correctly, when you are entirely sure of the caller part, in the called function, considering you receive the argument in var, you can do For int For float/ double and so on. Please note, there exist no float type for variadic functions, because, for those functions, due to default argument promotion, float types get promoted to double. To elaborate, you do not cast / assign the incoming pointer to the required type (that is both invalid [type mismatch] and unwanted). Rather, you cast the void * parameter to the appropriate caller argument type, (based on flag, you mentioned) and then, dereference that to obtain the value. This analogy is based on the property mentioned in C11, chapter Â§6.3.2.3 A pointer to void may be converted to or from a pointer to any object type. A pointer to any object type may be converted to a pointer to void and back again; the result shall compare equal to the original pointer. It is called punning. Pointer punning is the UB. The safest way is to memcpy the data from the void pointer to the float variable. float x; memcpy (&x, voidptr, sizeof(float)); You're not calling va_args correctly. The second parameter has to be the data type you're expecting to read from the variable parameters because va_args needs the correct size to know where to get the next parameter from. Whilst your use of an array to store all the possibly functions might appear to be clever, you're actually making things harder for yourself when there is an easier and much more readable way to do it. It's probably also a lot more expandable too. Try using converts void pointer var to an integer/float pointer and then fetches the value stored in that memory address and stores the value in to the variables instead of int nbr = (int)var; float nbr = (float)var; converts the address stored in var to int/float. Here you are just converting the address and not the value stored in that address. Instead of trying to extract arguments from args and passing the result to fct[i], pass args to fct[i] directly and let them do the extraction. The only caveat is that you must not pass by value. In each of the printf* helper functions do something like: Note float is not a valid type for printf because float gets promoted to double in varargs calls. 
c-5-40	X	GTK Glade C - pass variables to function including treeview It's only possible to pass one variable in a callback function. So we have to built structures. I'm okay with this but how to do with Treeview and Treemodel/Liststore ? I want to avoid global variables. This test program should get the content of the selected row displayed in the EntryBoxes. I don't know if i'm wrong making the struct including the Treeview or if there's something wrong inside the function. I get segfault. What would be the correct way to deal with that ? Here's the glade file: First thing, you cannot use gtk_builder_connect_signals(builder, NULL); and then expect the callback handlers to receive user data. You should have passed the widgets structure: Second thing, you over complicated the selection callback. The GtkTreeSelection instance will give you the model when you call gtk_tree_selection_get_selected. Then you must understand that this last function will "not work if you use selection GTK_SELECTION_MULTIPLE". Also notice that gtk_tree_model_get should take pointers to char/gchar which will then point to newly allocated copies of the model content (means they must be freed afterwards). So, your code should be something like this: 
c-5-41	X	How to respond to TLS heartbeat in openssl I am writing a TLS server that responds to a incoming TLS heartbeat request. I am using OpenSSL 1.0.2g . Following is my server code (modifed from openssl/demos/ssl) My client code I see that my client is sending the TLS hearbeat but the server is not reponding to it via the wireshark capture. I could not see examples on how to respond to a TLS heartbeat (I was naively hoping that this is autoatically done by openssl, from a light code reading here t1_lib.c tls1_process_heartbeat, it even seesm so). So can anyone please help me understand what should the server do to respond to a TLS hearbeat ? PS:Yes, I know that using TLS heartbeats is probably not a good idea (it is even removed in the later versions of OpesSSL), TCP keep alive could be a better option, but I do not have a choice in the matter at the moment. Thanks, Keshava. 
c-5-42	X	multi threading scanf from thread while pther thread printf in c programming For my game project dots , i use multi threading for displaying time passed for the user but while user input The cursor overlap the user input before he finish his input So i want to fix a thread to the console with out affecting user input What you need is something like this, which is in my notes taken from Linux System Programming book: Manual File Locking The function flockfile() waits until stream is no longer locked, bumps the lock count, and then acquires the lock, becoming the owning thread of the stream, and returns: #include <stdio.h> void flockfile (FILE *stream); The function funlockfile() decrements the lock count associated with stream: Hope that helps. 
c-5-43	X	C - Counting words, characters and lines in file. Character count I have to write a code in C, which outputs the number of characters, lines and words in a given file. The task seems to be simple, but I'm really not sure what went wrong at this point. So, here's the code: The idea of the task is that the output should be the same, as the output of command wc in Linux. But I've got absolutely no idea, why my loop is skipping some of the characters. The way I've written the code should be proper to count EVERY SINGLE character, even those whitespace. Why then my program shows sample file contains 65 characters, when wc shows 68? I've thought that maybe there are some characters, which are skipped by fgetc, but it's impossible as I've used the function before when I was writing a program to copy content of one text file to another and everything worked properly. By the way, is my solution for word count correct? The condition after loop should make sure that last word before EOF is counted. I've used isspace to make sure that there aren't just some blank spaces in the ending. Thanks! "My program shows sample file contains 65 characters, when wc shows 68" Are you working on Windows, and does your file have just three lines? If so, the problem is that Windows maps CRLF line endings to newlines, so 3 CRLF pairs are mapped to 3 newlines (LF-only) endings, accounting for the discrepancy. To fix this problem, open the file in binary mode. Without having run your code, I think your code for counting words is OK. You could instead use an 'in-word' flag initially set to 0 (false) and switch to true and count a new word when you detect something that's not white space while you're not in a word. Both work; they're slightly different. Also, remember that fgetc() and relatives return an int, not a char. You cannot reliably detect EOF if you save the return value in a char, though the nature of the problem depends on whether plain char is signed or unsigned and the code set in use. If plain char is an unsigned type, you can never detect EOF (because EOF is mapped to 0xFF, and when that is converted to int for comparison with EOF, it is positive). If plain char is signed, if the input contains code 0xFF (in ISO 8859-1 and related code sets, that's Ã¿ " LATIN SMALL LETTER Y WITH DIAERESIS in Unicode terminology), you detect EOF early. However, valid UTF-8 can never contain a byte 0xFF (nor 0xC0, 0xC1, nor 0xF5..0xFF), so you shouldn't run into that misinterpretation problem " but then your code is byte counting and not character counting too. You could do it like this 
c-5-44	X	How to send GtkWidgets to the back or front? I wonder if there is a way to "Send to back" or "Bring to front" a GtkWidget dynamically. ( I know, it can be done by changing the creating order of GtkWidget ) example : (GTK+ 2.0, Cent OS 7.0, C) Are there some commands that can make the "B Button" be in front of "A Button". ( look likes this following picture --> the second picture ) No, there aren't "functions" like those in a GtkFixed. From the Gtk 2 documentation: Description The GtkFixed widget is a container which can place child widgets at fixed positions and with fixed sizes, given in pixels. GtkFixed performs no automatic layout management. For most applications, you should not use this container! It keeps you from having to learn about the other GTK+ containers, but it results in broken applications. With GtkFixed, the following things will result in truncated text, overlapping widgets, and other display bugs: Themes, which may change widget sizes. Fonts other than the one you used to write the app will of course change the size of widgets containing text; keep in mind that users may use a larger font because of difficulty reading the default, or they may be using Windows or the framebuffer port of GTK+, where different fonts are available. Translation of text into other languages changes its size. Also, display of non-English text will use a different font in many cases. In addition, the fixed widget can't properly be mirrored in right-to-left languages such as Hebrew and Arabic. i.e. normally GTK+ will flip the interface to put labels to the right of the thing they label, but it can't do that with GtkFixed. So your application will not be usable in right-to-left languages. Finally, fixed positioning makes it kind of annoying to add/remove GUI elements, since you have to reposition all the other elements. This is a long-term maintenance problem for your application. If you know none of these things are an issue for your application, and prefer the simplicity of GtkFixed, by all means use the widget. But you should be aware of the tradeoffs. The order by which they are added is the order they will keep in the virtual Z axis. You can control this by removing and readding them or other similar approaches. 
c-5-45	X	C - kernel space - unable to handle kernel NULL pointer dereference I'm creating a character device file which is called message slot, through which processes communicate using multiple message channels. A character device driver manages the message slots, each message slot may have several channels which can store one message. I have implemented a linked list of message slots, which include a linked list of channels. However when I run my code I get the error : And only the first statement in the device_open gets printed. Any idea how to fix this? Message_slot.h : Message sender from user space: Message reader from user space: I create a new file using mknod manually, then I call after compiling message_sender, and I get the NULL pointer error. 
c-5-46	X	How to tell apart imported function vs imported global variable in a DLL's PE header? I'm writing a small tool that should be able to inspect an arbitrary process of interest and check if any of its statically linked functions were trampolined. (An example of a trampoline could be what Microsoft Detours does to a process.) For that I parse the PE header of the target process and retrieve all of its imported DLLs with all imported functions in them. Then I can compare the following between DLLs on disk and the DLLs loaded in the target process memory: A. Entries in the Import Address Table for each imported function. B. First N bytes of each function's machine code. And if any of the above do not match, this will most certainly mean that a trampoline was applied to a particular function (or WinAPI.) This works well, except of one situation when a target process can import a global variable instead of a function. For example _acmdln is such global variable. You can still find it in msvcrt.dll and use it as such: So, what this means for my trampoline checking tool is that I need to differentiate between an imported function (WinAPI) and a global variable. Any idea how? PS. If I don't do that, my algorithm that I described above will compare a global variable's "code bytes" as if it was a function, which is just a pointer to a command line that will most certainly be different, and then flag it as a trampolined function. PS2. Not exactly my code, but a similar way to parse PE header can be found here. (Search for DumpImports function for extracting DLL imports.) 
c-5-47	X	Is it well-defined to use a pointer pointing to one-past-malloc? In C, it is perfectly well to make a pointer that points to one past the last element of an array and use it in pointer arithmetics, as long as you don't dereference it: However, these are UBs: Now I have a question: Does this apply to dynamically allocated memory? Assume I'm only using a pointer pointing to one-past-the-last in pointer arithmetics, without dereferencing it, and malloc() succeeds. The draft n4296 for C11 is explicit that pointing one past an array is perfecly defined: 6.5.6 Language / Expressions / Additive operators: Â§ 8 When an expression that has integer type is added to or subtracted from a pointer, the result has the type of the pointer operand. ... Moreover, if the expression P points to the last element of an array object, the expression (P)+1 points one past the last element of the array object, and if the expression Q points one past the last element of an array object, the expression (Q)-1 points to the last element of the array object... If the result points one past the last element of the array object, it shall not be used as the operand of a unary * operator that is evaluated. As the type of the memory is never precised in the sub clause, it applies to any type of memory including allocated one. That clearly means that after: both are perfectly defined and as the usual pointer arithmetic rules apply, diff shall receive the value 5. Is it well-defined to use a pointer pointing to one-past-malloc? It is well defined if p is pointing to one past the allocated memory and it is not dereferenced. n1570 - Â§6.5.6 (p8): [...] If the result points one past the last element of the array object, it shall not be used as the operand of a unary * operator that is evaluated. Subtracting two pointers are valid only when they point to elements of the same array object or one past the last element of the array object, otherwise it will result in undefined behavior. (p9): When two pointers are subtracted, both shall point to elements of the same array object, or one past the last element of the array object [...] The above quotes are well applicable for both dynamically and statically allocated memory. Another reason that this is valid for dynamically allocated memory, as pointed by Jonathan Leffler in a comment is: Â§7.22.3 (p1): The order and contiguity of storage allocated by successive calls to the aligned_alloc, calloc, malloc, and realloc functions is unspecified. The pointer returned if the allocation succeeds is suitably aligned so that it may be assigned to a pointer to any type of object with a fundamental alignment requirement and then used to access such an object or an array of such objects in the space allocated (until the space is explicitly deallocated). The pointer returned by malloc in the above snippet is assigned to d and the memory allocated is an array of 5 int objects. Yes, the same rules apply to variables with dynamic and automatic storage duration. It even applies to a malloc request for a single element (a scalar is equivalent to a one-element array in this respect). Pointer arithmetic is only valid within arrays, including one past the end of an array. On dereferencing, it's important to note one consideration: with respect to the initialisation int a[5] = {0};, the compiler must not attempt to dereference a[5] in the expression int* p = &a[5]; it must compile this as int* p = a + 5; Again, the same thing applies to dynamic storage. Is it well-defined to use a pointer pointing to one-past-malloc? Yes, yet a corner case exists where this is not well defined: Memory management functions ... If the size of the space requested is zero, the behavior is implementation-defined: either a null pointer is returned, or the behavior is as if the size were some nonzero value, except that the returned pointer shall not be used to access an object. C11dr Â§7.22.3 1 foo(0) --> malloc(0) may return a NULL or non-NULL. In the first implementation a return of NULL is not an "Memory allocation failure". This means code is attempting int *p = NULL + 0; with int *p = a+n; which fails the guarantees about pointer math - or at least brings such code into question. Portable code benefits by avoiding 0 size allocations. I have found that in C in Windows on an Intel X86 chip, I can have an invalid value in a pointer and not cause a GPF as long as I don't dereference the pointer. In C in Unix on a HP 68000 processor, a program would core dump if a pointer had an invalid value even if it wasn't dereferenced. (Although I do admit, that was in the 1990's). I have since had the habit of not allowing a pointer to go past the end of an array. Also, I often make arrays a little too big by a few elements to avoid having my program blow up or worse cause a buffer overrun security hole. It's easy to be off by one element somewhere. Don't let that mistake be a mistake that crashes your program (or gets your company in the news) for the sake of saving a few bytes. Since the answer is somewhat processor dependent, I recommend not doing it. Update: After reading a few comments, I did some research and two mechanisms that causes a program to crash on an invalid pointer fallen off the edge of an array cliff even if you did not dereference the invalid pointer is speculative execution and branch prediction. Basically, the CPU (even a modern CPU) is sometimes trying to process two instructions at once, occasionally discarding the results of the second instruction because of the results of the first instruction. In the case of a loop, the first instruction of the loop is executed again even though the last instruction of the loop was a branch that decided not to loop again, disregarding the results of the first instruction of the loop. I don't know if this happens any more because I stopped programming like that years ago. If you're determined to program that way, you might want to also read Eager Evaluation and some compiler instruction reordering optimizations. If you're looking for something in the standards to allow this, I would hope that a compiler doesn't add a bunch of extra bytes at the end of every array I allocate. If you're trying to find some C standards legalese for this, it's the CPU that will give your program the speeding ticket. 
c-5-48	X	Using C11's _Generic to emulate default value of argument I have two functions with following signatures: and (Size is a typedef for size_t) In implementation, memInitRelease simply calls memInitDebug with the value of base as 0. Is there any way to use _Generic to emulate default value of arguments so that I can have a single function/macro memInit that selects the appropriate function based on the number of arguments? (Currently, I am using Clang's overloadable attribute to achieve this but I'd rather not use compiler extensions). 
c-5-49	X	Why didn't the value of pointer variable passed to pointer argument change after exiting this function? According to my current knowledge of how C works, if I use the function List_int_add(linklist, 50) in this way without having to assign linklist = List_int_add(linklist, 50), the value of linklist would've been updated to the return value of List_int_add(linklist, 50), since in place of linklist is the argument Node_int * head, and the function returns head. Since the argument is a pointer, shouldn't List_int_add(linklist, 50) be sufficient to update linklist? When using List_int_add(linklist, 50), the output of List_int_print(linklist) would start at 100, and not 50. But it works fine if I assign to linklist=List_int_add(linklist, 50). (please ignore the typecasting at return, it is due to how I write the code previously, and I am in the midst of editing the code, I know it's not necessary) Thanks in advance. In main.c: In linkedlist.c: in linkedlist.h: To make sure nothing is misunderstood I'm going to state a few things that I think you already know, but it's just for the sake of the clarity of the answer. Everything in C is pass-by-value. This means that whenever an argument is given to a function, what is really given is a copy of this argument (an automatic variable having the value of the argument). To be able to modify the value of a variable x using a function without affecting the return value to x (eg. x=modify_x_please(x)), we would pass the reference of x. This way, the function receives a copy of the address of x, which enables it to modifyxdirectly by dereferencing it. For example : which will be used this way: So all of the above you already know but let's imagine one last example: usage: And here, it's becoming more related to your question: if you want to modify a pointer, you pass a reference to the pointer. This means changing your functions signature to Node_int * List_int_add(Node_int ** head, int val), and using (*head) instead of head etc... You can even have a typedef Node_int * Linked_List_int_t, so the idea becomes clearer. This way you can think: If I want to modify a list, I pass the address of this list. The fact that the list is just an address to a node is a completely different matter. But I know that there are arguments against "overusing" typedef too, so I think you should think about the downsides of using the typedef I proposed if it interests you. One last thing, if the add and remove functions get the good references and modify them well, you probably won't even need to have a return. You could just make their return type void. Your notes are not wrong, but they do not apply the linked list implementation you have shown. At the end of this answer (after discussion) you find a slightly changed one, for which your notes do apply. You observe that the output of the shown code starts with 100. This is because of the List_int_remove(linklist,50);. For a discussion of why the 50 is not visible, focussing on the use of pointers as arguments, note that the starts at 50 if that line is deleted. Deleting all but the first linklist = still starts at 50. The first is needed because of Node_int * linklist = NULL; and the fact that the list does not use an unprinted dummy element as anchor. That method of implementing a linked list is what your notes apply to, see below. If that first one is also removed the output is empty. It is possible to use a linked list according to your notes, i.e. consistently only use without linklist =, if you change it to using an anchor. With the slightly different implementation below (changes labeled "// Note this change!"). Note that I kept the return values, they are actually not needed, except for Node_int_construct(...). If the return values are strictly ignored, the use of NULL as a linklist parameter is an error condition, which I handledd simply by returning directly after an error message. I put everything into one file, as a convenient MCVE. 
c-5-50	X	How can I open and modify XML file in C I have to open and modify an XML file using C; more precisely I want to create tables; sort and insert lines and columns. Can I do that? if yes how? what function I have to use? 
c-5-51	X	Is this a bad way to check if a string represents a floating point number? Looking around online I didn't find a solution that satisfied me, so I tried it myself. But now in a lecture it was also said that calling functions and waiting for returns might cause the stack to overflow, so is this a bad idea? I use this function to check whether argv[1] is a float or not. Would a loop be better? or is there something way more intuitive? there must be exactly one point and it has to be followed by atleast one digit right? For 999 digits and one point, there are 1000 recursive calls with each return address, and three parameters on the stack. I would find that okay. However a non-recursive iterative solution does away with the state parameters, and is easier to read (in this case only). Mind: the recursive solution is subject to a malicious stack overflow. @MatteoItalia rightly indicated that there is only tail recursion (nothing is done with the result), so any mature C/C++ compiler would transform the recursion to jumps (iteration). Here his disassembly (see link in comment too). check if a string represents a floating point number? The C standard library provides a simple robust solution using strtof(), strtod(), or strtold() Are leading spaces are OK? Is trailing junk after the numeric text OK? If overflow a concern? If underflow a concern? Then more code is needed. Adjust as needed. 
c-5-52	X	Assign selector to C function in Objective-C without callback I am attempting a method swizzle in Obj-C but I would like to pass it a pure C function. This means I need to somehow assign a selector and/or manually build an objc_method struct. Maybe somehow leverage NSInvocation? My understanding is that due to the fact that Obj-C is a strict superset of C and therefor fully compatible. What I have going now: main.m : I have tried putting the C function inside @implementation (which I would like to avoid) and even then it did not work. You can't swizzle a C function per se; swizzling is based on method lookup which goes through method descriptions (which are represented by the Method type by the runtime functions) and C functions do not have a method description. However the implementation of a method is just a C function. Such a C function must take a minimum of two arguments, being the object the method is invoked on (the Objective-C implicit parameter self) and the selector (the Objective-C implicit parameter _cmd). When you swizzle a method the replacement implementation, a C function, must have exactly the same type as the original "“ complete with the two implicit arguments "“ so your strRet() would not be suitable as is, you would need to change it to: So you have three main choices: The easiest way is to define a method whose body is your "pure" C function, then swizzle the recommended way (taking care to handle inheritance correctly, see this answer). If you really want to write a C function and that C function does not need to call the original implementation of the method then: (a) You need to convert your C function into one which can be used as a method implementation. You can: If you are writing/have the source of the C function you simply define it to take the two implicit arguments as above. Take the address of this function and cast it to IMP, which is just a typedef for a C function pointer of the appropriate type, for use below. If you are using a C function whose definition you cannot change then you can do one of: Write a C wrapper function which takes the extra arguments, ignores them and calls your target C function. Take the address of this wrapper function and cast it to IMP for use below. Wrap the call to your C function in a block and use imp_implementationWithBlock() to produce an IMP value from it. You can read this article for a description of using imp_implementationWithBlock(). (b) use method_setImplementation() to set the implementation to the IMP value you produced in (a). If you really want to write a C function and that C function does need to call the original implementation of the method then you will need to add a method to your class whose implementation is your C function "“Â modified/wrapped as in (2), then swizzle your added method with your original method as under (1) so that the original implementation is still available as a method. To add a method you use class_addMethod() HTH The key here is finding a mechanism that maps between the function pointer and your context. The simplest way to do that is by generating a new function pointer. You can use imp_implementationWithBlock(), MABlockClosure, or roll your own. The simplest mechanism to create a new function pointer I've found is to remap the entire function to a new address space. The new resulting address can be used as a key to the required data. Note that page_count should be large enough to contain all of your original function. Also, remember to handle pages that aren't required anymore and note that it takes a lot more memory per invocation than MABlockClosure. (Tested on iOS) 
c-5-53	X	How to get C/C++ function name from Perforce diff between two version I am trying to extract diff between to perforce revision files. But my requirement is to extract function names which got modified. Is there a way to find changed functions. Do p4 diff2 and grep with a regex that matches function names: Regex to pull out C function prototype declarations? 
c-5-54	X	incompatible pointer type errors when adding * to user defined type I keep getting errors when assigning things like "curr = curr->next", and the first error I get is: expected '=', ',', ';','asm' or 'attribute' before token '*' in the line where I declare my static function newTN. Please tell me what the problem is...thanks...so confused In definition of typedef struct textNode you have declared struct textNode** next i.e. next is pointer-to-pointes or double pointer. But in function static tNode* newTN(char* string, int sLength, tNode* next); you have declared next as single-pointer. So, in line t->next = next; of function static tNode* newTN(char* string, int sLength, tNode* next); you can not assign single-pointer to double pointer. To solve this issue, declared struct textNode** next in typedef struct textNode as struct textNode* next i.e. as single-pointer. Updated: Definition of struct textbuffer is not terminating with ;. 
c-5-55	X	Counting semaphore vs Condition object Single Producer/Consumer problem using 2 Counting semaphore and one mutex semaphore Single Producer/Consumer problem using 2 condition objects and one mutex lock In the above code, condition object takes single producer/consumer thread for sleep. 1) In above two approaches, from performance aspect, which is the best approach? Which approach takes less number of CPU cycles? 2) For multiple producer/consumer problem, using condition objects is a proposed solution? Can counting semaphore approach be applied? 
c-5-56	X	How to declare the predefined struct CLIENT in <rpc/clnt.h> when using python cffi? Struct CLIENT is defined in rpc/clnt.h, but how can instantiate it when using python cffi? For example,I have a c header file like this: And I have the *.so file for the header file. Function my_init returns a CLIENT, how can I get its return value in python using cffi? I tried this, but it came out an error: Error: 
c-5-57	X	New pointer (by malloc) is same as one of the freed/old pointers I am trying to track use-after-free errors in C. And my question is that, if I have the code like this: Just wondering if the use of aliasA is a UAF error? If it is, what is going wrong here? To clear the question, I think it is better to add a small example: And the output is: (I checked ptr and new_ptr in S2E: http://s2e.systems/ and these two pointers actually point to the same address. After freeing ptr, the same address is allocated to new_ptr.) From the output above, it seems like the use of ptr2 gives the same output as new_ptr. When I wrote my solution to detect UAF error, I record the information of pointers. The pointers' values are stored as uint64_t and a boolean type flag is to declare whether the pointer is alive. Therefore, I guess a problem occurs when the new_ptr and ptr point to same address because once malloc() is called the flag for new_ptr will turn true. After that, when I use ptr, I can not detect this UAF error because this address is marked alive. Thanks in advance! The aliasA is UAF error, it may hold the same value as ptrA but it's not guaranteed and it's recommended to re-assign the freed pointer (both aliasA and ptrA) to NULL to avoid dangling pointer. In your case, it's better to assign NULL after you free: This is a UAF error. In practice, it is very unlikely that the second malloc() call returns the same address as aliasA, as the behavior is not guaranteed. You should not rely on it. You may ask: Can I compare them to make sure they have the same address? Well, no. Comparing may make some sense to you, but it is undefined behavior, because pointer equality comparison is valid only if the two pointers point to different elements in the same array. In this case the two allocated blocks surely aren't the same array, so comparison between those pointers isn't well-defined. At last, you shouldn't rely on the address returned by malloc(). All you can do is use it within the amount of memory requested when calling. In practice, Thiru Shetty's answer is a good way to pursue. If you don't dereference the pointer aliasA, it depends on the definition of "use after free" whether this constitutes "use after free". For example CWE-416 doesn't talk about just using the pointer value, but about referencing it. However, the C standard says that even using the pointer value (Appendix J.2): The value of a pointer that refers to space deallocated by a call to the free or realloc function is used (7.22.3). This is because the value of the pointer becomes indeterminate: The value of a pointer becomes indeterminate when the object it points to (or just past) reaches the end of its lifetime. Therefore the following code has undefined behaviour: The comparison there is meaningless and the compiler is given the freedom to do whatever it pleases with its optimization, as aliasA doesn't need to contain a valid value any more. It is totally OK for a compiler to even to set a trap into aliasA which would cause your program to abort at the if statement with a diagnostics message. Or it can be that these could seem to point to the same address even though they were given distinct addresses of memory, or vice versa. 
c-5-58	X	Why is my thread function not working? I'm creating a server-client game on linux based on inter-communication between processes through named pipes. On the server side, I created one thread for each enemy on the maze so they can follow the player (Or at least I tried to do it :D ). Function to calculate the distance between 2 points : Thread function to control the AI(enemies) : resp is a RESPONSE type structs : Why my thread function doesn't work? 
c-5-59	X	Pthread using pthread_cond_wait inside signal handle blocked I want to write a program which can stop (hang up) all other pthreads without main thread, I use pthread_kill to send a signal to the target thread to call its signal handler, which can block itself. But I got stuck. Here's the code below: In fact, I think there is really no need to create a mutex (is this true?)... I'm a newbie on linux programming. How can I fix this problem? Thank you. You do need to lock the mutex before calling pthread_cond_wait; it expects it to be locked, it unlocks it, waits for the condition variable to be asserted, and then re-locks it before returning to you. From pthread_cond_wait(3p): The pthread_cond_timedwait() and pthread_cond_wait() functions shall block on a condition variable. The application shall ensure that these functions are called with mutex locked by the calling thread; otherwise, an error (for PTHREAD_MUTEX_ERRORCHECK and robust mutexes) or undefined behavior (for other mutexes) results. 
c-5-60	X	Eclipse for C/C++ Oxygen version sometimes doesn't react on hyperlink (Ctrl+click) I'm a fresh software engineer and I really enjoy eclipse CDT. I have been curious about this for a long time. I know from my experience that if I create my project in eclipse, then the hyperlink feature is pretty much always functioning. i.e. I can press F3 or ctrl + left click to navigate. However, if I open up a project that is not created in eclipse, most likely this hyperlink feature will not work. I know eclipse generate some files and folders to allow users to use these "smart" features. I wonder if my problem is related to this kind of thing? Essentially, I'm facing a problem that if I'm looking at a private class member in the middle of nowhere and this class is defined in a seperate file. What is the best way to jump directly to the definition? Any trick or better IDE? 
c-5-61	X	trying to compile lua im trying to compile Lua 5.30 so I can get the following files auxlib.h, lua.h, lua.hpp, luaconf.h and lualib.h, lua.lib for another project but I get the following errors Severity Code Description Project File Line Suppression State Error LNK1169 one or more multiply defined symbols found Project5 C:\Users\User\source\Project5\Debug\Project5.exe 1 Error LNK2005 _main already defined in lua.obj Project5 C:\Users\User\source\repos\Project5\Project5\luac.obj 1 second question if I compile on Linux can i use the generated files on windows to? 
c-5-62	X	Singly Linked-List (How to properly remove/free an entity?) Background I have the following code Notes Basically, when I am creating a new entry in the linked list. I will allocate a new memory block of the given structure size and set it to the end of the list, finding a block the same way as I do in this _Remove function. However, when I am trying to remove an entity. I free the entity from the list as seen above, and set the current entity to the next entry in the list. The problem is, it appears that the LocalFree call doesn't actual set the allocated memory back to an unallocated block of memory. When I look at the linked-list the current entity simply has all of its entries set to NULL (0). Assume the FileDesc that I am passing to FD_Remove is the last entry of the list. FD_Remove(FDescList, 0x00000005); So we can assume that the memory that has the 0x00000005 entity is now freed. Now I call FD_Add(FDescList, FileDesc, 'whatever'); I would only assume that these values would appear in the previously freed entity in the Linked-list. Problem The problem is that entity is set to NULL instead of freed memory, and the function adds the FileDesc and 'whatever' data to the entity after the NULL memory block instead of inside of it. Question What am I doing wrong in my FD_Remove function that is causing this, and how can I improve my function to fix this problem? Removing an element from a linked list simply involves updating the surrounding element pointers to the element being removed, and then freeing the element. You don't need to allocate or copy anything. Try this instead: But, watch out if the element being removed is the head of your linked list. If so, you need to update that pointer too, which the above function can't do directly. You would have to do something more like this instead: 
c-5-63	X	Please explain the C language data structure The result of the values "‹of A and B is as follows. I wonder why A and B are different. Please give us a basic knowledge of data structure. In the first case, the type of the expression on the right-hand side is int, and the value is -121. In the second case, the type is uint32_t, and the value is uint32_t(-121) == 4294967175. The latter cannot be precisely represented in a float, so it gets rounded. 
c-5-64	X	How to fix yacc warning attribute is untyped with fatal error unexpected end of file I want to code the calculate of moy in Yacc so I do this code but once i compiled it i have gotten those warnings: Compiling... mo.y I noticed that once I delete this two lines: Untyped error disappear. I searched a lot but i did not reach to fix the problem. What should I do ? You need to fix the type errors. As noted by @JeffMercado, the premature EOF is caused by the excess first brace on And This is not right. The commas should be spaces. 
c-5-65	X	C UDP read and recv are breaking my code So I'm working with UDP sockets and poll(), trying to be able to wait for connections and read input at the same time, but I'm coming up with the weirdest error and I have no idea how to handle it. Here's the part of my code that's causing issues. So here's where it gets strange. When I run this code, it prints out loop1, but does not print loop2, even though I explicitly set n=1 at the beginning. I changed the loop1 print statement to "printf("now n is %d\n", n);" to see what was going on, and then it didn't print anything at all. To add to this mystery, this happens regardless of if I use read or recv, but when I comment out both of those my code enters both loops just fine. So, somehow both read and recv are preventing my program from running the way it should, before those lines are even reached. I have no clue what could be going on, and my best guess would be that it's some obscure C thing that I just don't know about. Does anyone know what's going wrong? If it matters, I think I'm using Linux. 
c-5-66	X	Inconsistency in the parent process id after fork call? I am creating a small process tree and printing process id, parent process id, process group id and process session id (g,s) : (process group id, process session id) Problem: In process C, the output of parent process id changes, it should display ppid as pid of process A but its not. Also something it prints the correct output. Why this inconsistency in the output ? Code: Output: I took your code and only replaced int main(int argc, char **argv) with int main(void) (since my default compiling options complain about unused variables and stop code compiling), and it then compiled cleanly (well done; I usually have to do more work than that to get code to compile cleanly for me). And, when I ran it (it was called pgid37), I got the result: Note that the parent PID (PPID) of C is 1, not 27489. Since the A process doesn't wait for either B or C to exit, this is not surprising to me. I don't have a good (or even a bad) explanation for the PPID of 3321 that you saw on one occasion. Here's a modified version of your code where the parent waits for the children " the source was in pgid11.c and the program was called pgid11: One sample run gave me: This time, both children report PPID equal to the first process, 27527, which is very much what would be expected. 
c-5-67	X	Can't pass typedef struct to function by reference I'm trying to pass a custom type object to a function by reference, and I can't figure out what I could be doing wrong. I read How do you pass a typedef struct to a function? as well as other references and could swear I'm already doing exactly that. I cleared out everything else I'm doing and even this spartan code throws 5 errors. Help me, Stackexchange; You're my only hope! The goal is simply to be able to alter the values in the array in the object. When I attempt to run this I get this error and 4 similar: test2.c:10:3: error: request for member "˜byte' in something not a structure or union a.byte[0] = value; a is a pointer type, so you need to de-reference it to use it. Typically that's done with the arrow operator: Since this is just an array of bytes you can also quickly "zero" it: Though given how important 10 is in your code you should codify that in a constant or a #define. When you pass a value by reference you need to use asterisk to access al fields of the structure, for example: Happily you have -> as a shortcut, so this will be: Also do not forget to call the & (address of) operator when you call simpleInit. 
c-5-68	X	Z3: solving ite example using C API I am a newcomer in Z3 solver, and using Windows 10, VS2013 command prompt. I am trying to use C and I have tried to solve the below simple problem using Z3 solver. problem set: what is the possible value of a that satisfies (b = 1) condition for below if-then-else statement, (Here, we are looking for the solution of (a = 1)) So I made below C code, based on the C code example of Z3, (but the code is not working because it does not make sense at all using Z3, and I sincerely apologize for that) But it seems that the code is not working (generating error code as below) I am so sorry for asking you so much elementary problem. Any idea on how to solve this problem will be very appreciated. (the revised ite_example code will be very much appreciated!) Thank you very much. Sincerely, Lee. 
c-5-69	X	Custom (musl) Build of GCC Cannot Find LD I followed this 'tutorial' to create a static GCC, libc, and libstdc++ built against MUSL. Build directory: /home/user/musl_gcc/ When I attempt to create a simple test C program, and compile it with no arguments, I get the following error: The linker does NOT point to the custom built one, nor would I expect it to. This can be rather easily circumvented by compiling and linking in separate steps: However. this is of little use to me. I'd eventually like to get it to work with C++ applications that use CMake as a build environment, but this has been a tedious cat-and-mouse game of "find the library." How do I specify the linker to use? I thought it was though the LD environment variable, but that proved fruitless. 
c-5-70	X	Scanf a pointer reference I have a stack with references to objects. The objects have numbers. I want to scan a reference and print the number of this object. Example: In the stack is the object with the reference 0x34 now I need to call scanf. If the user enters 0x34, I print 0x34.objRef.data; in data is the number. 
c-5-71	X	Using ROS to control a CMM (Coordinate Measuring machine) i'm a senior, i really desperate to find answers here. i am building a robotic arm with bunch of low-cost sensors , motors and other actuators. i'm using PI 3 as my Microcontroller. I need helping to build the software by giving answers to my questions: Is it efficient to us ROS with low-cost projects? if not what are my other alternatives? also is it possible to use another microcontrollers (Arduino's or PI's) in between so everyone of them can deal with a specific collection of sensors and actuators ? is it possible to control stepper motors through Arduino/PI using ROS? This would be the easiest way to describe my project: Master (PI 3) ---> Receiving results from 4 microcontrollers ---> each one controls a joint (encoders, sensors, steppermotors) I'm open to suggestions from any kind i'm still in the start i have 4-6 months period to finish it, i don't know if i'm asking in the right place or not but i don't know much about blogs. 
c-5-72	X	Stepper Motor won't stop rotating I'm trying to get my 28BYJ-48 Stepper Motor to rotate one quarter of a revolution and then stop, but I'm having trouble implementing that in code. What I find is no matter how small I make the numbers in my code or even alter it in ways that make me think it'd work properly, I can't get it to stop rotating. Below is the helpful part of the code. Stepper_Seek gets called here... I thought it could have been that it kept resetting its position and starting again after it reset but even after commenting out the line it wouldn't fix. Thank you everyone in advance! Your wrap-around logic is backward in both Stepper_CW() and Stepper_CCW(). Take the former as the example. Suppose you're trying to reach 198, and Pos is initially 1: On the first call, Pos is decremented to 0. This is unequal to 198, so the function is called again. On the second call, Pos is decremented to 199. This is unequal to 198, so the function is called again. On the third call, the wrap-around case is triggered, and Pos is set to 0. This is unequal to 198 .... The state after step (3) is the same as the state after step (1) -- infinite loop. 
c-5-73	X	FUSE lib passthrough.c example. Where is it mirrors my / exactly? I'm new to FUSE and c and FSs and I'm messing with passthrough FS example which is given in the libfuse package. Can anyone give a hint where in the code it is commanded that FUSE mirror my root dir, please? Cause I found the two base functions - *xmp_init() and main() - pretty laconic. Here they are: And other functions are just, like, implementations of libfuse interface...stuff. I need to make my own crippled FS, I need to modify passthrough.c so that mounted FS would be a white sheet and I could make use of implemented functions and manage files and stuff. Thanks in advance! 
c-5-74	X	Reading from file into linked list in C I have to read from a text file which has a format : This is my code for writing into linked list and then printing it: But I get really wierd output of incomplete strings. strtok(line, "<SEP>"); will look for character delimiters which include <, S, E, P, > Use strstr if you need to search for "<SEP>" string Otherwise change the delimiter to ; and define the data as follows: Your linked list is repeating the same code. You can simplify as follows and add error handling: In addition, when printing the code walk through the list and print every valid element as follows: This code does not free any of the memory allocated. You can do that for the next step. 
c-5-75	X	Can somebody explain this code and what it does in operating systems What does this code do. I don't understand. If anybody can explain me every line it would be owsome 
c-5-76	X	Initializing strings in C in Visual Studio I try to learn the XOR algorithm using C. I have found a great example on KyleBank's GitHub: The above works well under Linux and gcc. However, it does not compile in Visual Studio under Windows. I am using build tools included in Visual Studio 2017. What am I doing wrong? Microsoft's compiler does not support C99 VLAs (see the note here). Array sizes must be a constant expression. The code is also broken because it fails accommodate and place a nul terminator in the output. In this case, decrypted and encrypted might be declared thus: And encryptDecrypt() modified thus: Finally the signed mismatch warning may be cleaned up by declaring i as type size_t. On Windows of course you could always use MinGW/GCC if you want more modern C support. Or you could use C++ and std::string or std::vector containers if you want to stick with Microsoft's compiler. Use malloc for dynamic memory allocation. Requires #include <stdlib.h> As mentioned before, you have to add 1 for the null-terminated character at the end. The char* pointer is one piece of information, it shows where the string begins. But where does it end? strlen and other C functions have no idea where the string ends, so they go through all the characters until a '\0' character is encountered. For efficiency, take strlen(input) out of the loop and calculate it only once: The function int main should return zero. Note that this method cannot be described as "encryption" by modern standards. You can call it "obfuscation". 
c-5-77	X	What is the implementation of getpppid() in c? I want to implement a function in C that finds the pid of the grandFather of the current process, any suggestions? 
c-5-78	X	execute command grep in language C and return result code not work, is only a example. WORK PERFECT! thanks Guy Avraham!! Obrigado, quando estiver no brazil, vamos beber uma cerveja! =D Venha visitar sÃ£o paulo. 
c-5-79	X	How to exit while loop when read() blocks In a problem given by university we have to pipe from a parent process(P1) to its child P2, and afterwards P2 must pipe to another child of P1, the other child is P3. Both P2 and P3 are to be written in c and made into executable files. They will then by execed by child processes in P1. P1 writes the numbers 1 to 10000 to stdout, P2 reads them through its stdin, removes the numbers divisible by 2, and writes the result to its stdout. P3 reads those numbers through its stdin, filters out the results that are divisible by 3, and writes everything to a file. I have managed to implement absolutely everything, but my child processes do not end. The reason for this, I believe, is that I have used the following method to read the input in each child: The problem here, as I understand it, is that read blocks when it doesn't get any bytes. As P1 writes the 10000 numbers using: Neither child process ever has any reason to believe that no more data is coming its way. Therefore, each read simply blocks waiting for a byte that will never come. Can anyone suggest a way to overcome this roadblock? The code of each process is as follows: Parent: P2 (includes excluded) P3 Thanks guys. Except in case of error, exec never returns. So when you write: you are wrong to expect the file descriptor to be closed. Close them before you exec. They are getting left open. Although in your particular case the problem is that the parent never closes fd 1. The parent has two file descriptors that are writing into the pipe ( fd[1] and 1), and you need to close them both before the child reading the pipe will finish. 
c-5-80	X	Need hel with this exercise in C I have tried to do this exercise in C# but I have errors. The teacher told me that I have to use Malloc, but I do not know how to implement it: The user will be asked to indicate the number of students in a class. Next, a memory will be requested for the students that the user has indicated. Next, the user will be asked to indicate which student number he wants to enter. You must check that the value is valid (but look a little below). Then, you will ask the user to enter the data referring to that student. When the user does not want to introduce more students, he will say that he wants to introduce the student -1. Then, you will show the data referring to the users that the student has entered. Â  It is mandatory that you create a specific function to introduce a student. That is, when the user wants to enter the data of a student, it must be done through a function. What data do you have to keep from a student? Name, both surnames, day, month and year of birth. Optionally, you can save the extra information that you consider necessary. For this exercise you will have to use structures, pointers, loops and if statement. And functions, of course. Remember to put #include at the beginning of the program so you can use the function printf and scanf. This is my code for now: 
c-5-81	X	Install GCC on Mac OS high sierra I've already visited the following answer but my question is different. Install GNU GCC on mac Mac OS ships with Clang and somehow /usr/bin/gcc is linked to Clang tool I assume because of this line. clang: error: no input files Any idea on how can I install https://gcc.gnu.org/ standalone on my system? Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.13.sdk/usr/include/c++/4.2.1 Apple LLVM version 9.0.0 (clang-900.0.38) Target: x86_64-apple-darwin17.2.0 Thread model: posix InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin Any idea on how can I install https://gcc.gnu.org/ standalone on my system? Generally speaking: Don't. That isn't a standard configuration; Clang is the recommended compiler for current macOS systems. If you have a very good reason, you can use Homebrew to install GCC (brew install gcc). Keep in mind that it cannot be used to build native macOS applications. 
c-5-82	X	Why there is no .bss segment in COFF object file? A simple hello world program: After dumpbin it with /HEADERS flag, i get those segments: If compile the program with /TC, so that it's a C program, i get those segments after the same use of a dumpbin: point is: How do i get this similar kind of output: 
c-5-83	X	How to emit debug information through LLVMs C bindings? I'm currently toying around with a simple LLVM frontend written in Rust. I'm now trying to emit debug information. How can I emit this debug information (source locations and variables) through the C bindings? Is it even possible? Do I need to write a C++ wrapper? There seems to be a function for inserting source locations (LLVMSetCurrentDebugLocation; LLVM; Rust), but I don't know how to construct a proper LLVMValue containing this information. I guess it needs some kind of metadata. 
c-5-84	X	C programming: writing directory file names into an array, strange symbols appear I'm trying to put the names of each of the files in a directory into an array. The code seems to work well up until I print the array itself. The filesList prints, but at the end of the print out, it adds another line with these symbols: )â”€Ã¬D$Ã¢â””â”´Î¦â”´Î±Ã«Eâ•¨Î˜Ã¯ I would like to remove these symbols from the array. However, since I don't know what they are or where they are coming from, I have no idea where to even start. I am very new to C, so I apologize if this is a beginner question. I would like to clarify that the program is recognizing these symbols as a file name, even though there is no file by that name in the directory. The index is increased as if it were a file. The line will copy the name WITHOUT the terminating NUL, so when you later print it, you'll see extra garbage on the end of the string. Use strcpy instead. Better yet, use strdup to allocate and copy the string in one step. Append a terminating null character at the end. You can use strdup() to avoid this. After declare char *filesList[n]; init last pointer to NULL filesList[n] = NULL; then change your loop to this You have that garbage because you try to access pointer that point to some part of memory that you not initialize. For example you have directory Music/ with four files in it, file1, file2, file3, file4. So your initialization would be similar to this: Then you in loop print filesList[4] and it show garbage. Also in statements like this it would be better to use continue not empty body: And also you can replace strncpy() with snprintf() It also always includes the null terminator '\0', unless the buffer size is 0 but you can check it or just add '\0' manually Don't use magic numbers in your code: If you need a constant, define one, or if an appropriate constant is already provided for the specific application, use that instead, e.g. You can't be absolutely sure where the origin of any of your problems are because you fail to VALIDATE any of the required returns. All functions except void provide a return that can be used to indicate success or failure -- use them, e.g. This is an absolute must for User Input. Your filled array indexes are between 0 and n-1, so your indexing of for (i = 0; i <= n; i++) invokes Undefined Behavior by reading beyond the bounds of your VLA. Use for (i = 0; i < n; i++) Instead of making two passes over your directory, (the first to count the number of files, rewind, and the second to read the filenames), just allocate some reasonable number of pointers to char initially, keep track of the number you fill, and realloc when you reach the current limit. The following code does just that (as well as cleaning up your user input -- which should be simplified and made more robust by using fgets instead of scanf), e.g. Example Use/Output Memory Use/Error Check In any code you write that dynamically allocates memory, you have 2 responsibilities regarding any block of memory allocated: (1) always preserve a pointer to the starting address for the block of memory so, (2) it can be freed when it is no longer needed. For Linux valgrind is the normal choice. There are similar memory checkers for every platform. They are all simple to use, just run your program through it. Always confirm that you have freed all memory you have allocated and that there are no memory errors. Using fgets is the recommended way to take user input. scanf if full of pitfall that trap new C programmers. fgets requires no more than you check the return and then overwrite the trailing '\n' included in the buffer with a nul-terminating character. You could remove the entire for loop that loops until valid input is received using scanf with the following simplified code using fgets: Look things over and let me know if you have further questions. 
c-5-85	X	i have written this code and but it's not working properly I am writing a code that accepts a string of length as much a user want and displays it.so this is what I have written but it's not entering into the loop and accepts any input. can you tell me what's going wrong? THANKS You are not entering the loop because you allocated a with calloc, so a[0] is 0. It will fail the initial a[i]!=0 test of both of your for loops. 
c-5-86	X	Runtime Error Message: Line 17: index -3 out of bounds for type 'int [256]' I need help to understand an issue with my C code. I am trying to find longest substring within a given string without character repetition. When run on the leetcode platform, the code below gives me an error for the String "amqpcsrumjjufpu": Runtime Error Message: Line 17: index -3 out of bounds for type 'int [256]' However, the same code works fine when I run it from my computer or any online editor. Please help me to understand this behaviour difference. It seems you are trying to write a function that finds the length of the longest substring of unique characters. For starters the function should be declared like These declarations in the outer scope of the function are redundant. The variables are not used in the function. The type char can behave either as the type signed char or the type unsigned char. So in expressions like this A[h[j]] you have to cast explicitly the character used as index to the type unsigned char as for example The inner loop will not execute for strings that contain only one character. So it does not make sense as it is written. This if statement needs to be placed outside the inner loop. The algorithm used by you can be implemented the following way The program output is Your code crashed because you read data out of range, suppose your input string is amqpcsrumjjufpu its length is 15, in outer loop for i = 13 you do assigment and in inner loop for first iteration, you read this element (j == i == 13) so, you try to read this element A[*(h+j)], but h indicates to 13th element of s, and now you try to add 13 to this value, you want to read 26th position of s, you are out of range of s string. Thanks Everyone for responses. While Vlad's code worked for all the test cases, here is my code that also passed all the test cases after changes suggested by Vlad and rafix. 
c-5-87	X	C - fclose() triggers a breakpoint I'm writing a function (*rwObjects()) that will read a formatted file and save it's strings, one object at a time. Unfortunately, it's for my studies which have a restriction - stdio.h, stdlib.h and string.h is practically all I can use. Here's the problem: whenever I run the code, when it gets to the fclose(input), VS17 says my project's triggered a breakpoint, and then opens a tab that says "wntdll.pdb not loaded" or something. The question is: how do I not trigger the breakpoint and close the file properly? Or, if the problem isn't in the file, where is it? Code (C): This is one confusing program, but I've found no other way to conform the bloody rules, so let's put the coding style aside, shall we? Also, I know that should it run successfully, nothing would happen - that is by design. It's not finished yet. EDIT: Don't worry about validity of input data. All the input data formatting is explicitly stated in the task, ergo no checks are reqired. Still, for the curious, here it is: objects.txt: EDIT 2: The moment I stopped using malloc, everything was fine. The question is - why exactly was it such a problem, and how would I create an array of the exact size I need, instead of creating max size evey time, if not with malloc? First problem: The malloc function allocates a given number of bytes. So if you have 5 objects, you only allocate 5 bytes. That's not enough for your structs. This results in you writing past the end of allocated memory which invokes undefined behavior. If you want it to allocate space for a specific number of objects, you need to multiply by the object size: Also, don't cast the return value of malloc. You also assign currentObject to the same value as objectList but then overwrite it with a separate memory allocation. So get rid of the second malloc. Second problem: Your copyInputStr and writeObject function expect a char *, but you pass in the address of the strBuf array which has type char (*)[30]. Get rid of the address-of operator here: Third problem: When you copy the characters in strMod, you're not adding a null byte at the end. A string in C is a null-terminated array of characters, so what you end up with is not a string but just an array of characters. When you later call strcpy on this array, the function doesn't find a null byte so it keeps reading until it does. This causes the function to read uninitialized bytes and/or read past the end of the array, which again invokes undefined behavior. Add the null terminating byte after the loop. Also, the result of the toupper function isn't assigned to anything, so it does nothing. You need to assign it back to *strMod: 
c-5-88	X	How to get the starting address of each PE section in C? Is it possible to write a C code that retrieve its PE sections addresses after compiling it to .exe ? Did you mean you want to access each section of exe ? If yes, then find below way to do so: 
c-5-89	X	Array of struct Error Here is my code: When I tried to do this in the main It showed me: [Error] 'struct Node' has no member named 'nd' How I can fix it? Change this: To this: Or, if you've already assigned something to current, then do this: It seems you mean the following. 
c-5-90	X	How do i take and view complex type input in c on this program? In this code complex datatype is taken in c++ and while converting on c i dont know to take input and give output of complex data type. Can someone help me convert it from c++ to c. Will someone help me to take input and view complex data type in c on this program. //c++ program original My try to convert c++ to c although it doesn't work. "and i know that %f and %d is for float and integer but i was trying on this code." 
c-5-91	X	error in linked list in C The program takes input before asking for it. The problem starts after we input the value for first node. This is a simple program which takes input from user and stores it in a linked list and then displays the data stored. you can peroform all linked list operations like this comments can be removed to perform that operation. The problem is the \n in your scanf format specification, which contains (with my emphasis): There are rarely constants (i.e. characters that are not formatting placeholders) in a format string, mainly because a program is usually not designed to read known data. The exception is one or more whitespace characters, which discards all whitespace characters in the input. So your \n means that the new-line that you input after each number is ignored, and the next scanf() doesn't complete until you have typed another new-line (you correctly omit it from the first node count input). All you need to do is to remove the \n from the format strings and your code will work as you expect: Note that you can input on the same line as the prompt by omitting the \n from the printf() format strings and calling fflush(stdout) before calling scanf(), eg: This will give you a more natural dialogue. 
c-5-92	X	C - Using "&variable" in printf() I am running this program with two command line arguments: 10 and test. It works as intended when I use: but not when I use: and I can't understand why. As I see it there are several problems in your code and in order to fix it you will need to change it alot. I don't believe that someone will do this for you, and I won't as well because everybody need to learn. Google is your best friend! Before asking question in Stack Overflow check how to do what you want to do online. For example, here you can find a great answer about how to properly get command line parameters. And here you can see the difference between with or without '&' and what does it mean. Good luck I changed to the code below and seems to be working. I changed char C = '\0' to char C[10] so C is a string and not a character and removed ampersand (&) operator from printf("C = %s\n\n", &C). 
c-5-93	X	Passing a Struct Containing a Vector to a CUDA Kernel I have a large code that I need to pass a struct to a CUDA kernel that has a larger number of ints for parameters and a vector. I can't figure out how to pass the struct to the CUDA kernel. I've copied it to the device, but get the following error when trying to compile: Attached is a small almost working example of the code, any ideas? Items from C++ standard libraries aren't generally/normally usable in CUDA device code. The documentation support for this is here. For this particular case, it means you may have trouble with either std::vector or std::string. One possible workaround is to replace these with ordinary C-style arrays: This will of course necessitate changes elsewhere in your code. 
c-5-94	X	gcc mips signed arithmetic on bytes I have fed this simple code to gcc Volatile has been added just to avoid gcc optimization (set to -O0 anyway). Resulting mips code was: For (y= x+3) gcc loads the byte as unsigned and then sign extend it and then or it with 0xff? why not simply load it using lb (which is supposed to sign extend it)? GCC does the same for signed half words (using 0xffff of course). I'm not particularly adept at reading MIPS assembly, but do note that you have compiled with -O0, which is supposed to generate unoptimized code. That more or less means code that implements the exact semantics of the C abstract machine. In particular, 0x31 is a constant of type int the assignment x = 0x31 includes an implicit conversion (in this case) of the right-hand int operand to the type of the left-hand operand (signed char) 3 is also a constant of type int evaluating x + 3 involves performing the integer promotions on the arguments, and in particular, converting the signed char value of x to (signed) int, then performing the addition assigning the result to y involves another implicit conversion from int to signed char In principle, all of those conversions and promotions that are implicit in the C code need to be performed explicitly by the unoptimized assembly program, and that appears roughly to be what you are seeing. Overall, it's not very useful to ask why the assembly output of a non-optimizing compilation is not as efficient as you think it could be. If you want more efficient code, enable optimization. gcc -march=native -O3 gives the following code on an Intel machine: There's nothing wrong with your code. gcc/MIPS just isn't very good at code generation, which is not too surprising since it receives a lot less care and attention than gcc/Intel. In my experience clang usually generates better MIPS code than gcc does. 
c-5-95	X	How to store multiple data in an array of structure in C? i'm quiet new with programming and i'm stuck with a problem. I want to store values in an array of structure. I initialized a structure containing char and created an array which is in my main. The main goal is to store an alias and it's initial command so i though about a structure. When i create alias and run alias_searching to find them i however only see the first value. The other values are not stored. Thinking the the problem come from array++, i also tried to do something like : array[i].alias_replacing and changing the i everytime an alias is created, but this also didn't work. Do you guys have any recommandations/advises ? Thank you very much for your support. Maxime 
c-5-96	X	How to use CGO for header file with conditionally inline function? IÂ´m currently writing a Go wrapper for C api which contains header with this ifdef: Unfortunately, I cannot change header since it's a third-party code. The code compiles fine if I pass -Wl,--allow-multiple-definition to linker, but I think it's a bad practice. So, I'm interested is there any flag I can pass to CGO or trick to satisfy #ifdef __cplusplus condition? Compilation exception: main.go: lib.h: lib.c: It is possible to pass some additional info to cgo via special comments. In this case // #cgo CFLAGS: -D__cplusplus More info here 
c-5-97	X	Why printing a string show junk Hello I am new to C and I am trying to print a string that i set by my self but it prints junk. I know id[4] is '\0' so i did not set it. I know id[4] is '\0' Well, you're wrong. id being an automatic local variable, unless initialized explicitly, it contains indeterminate value. So, you cannot be sure of any value, let alone '\0'. Quoting C11, Â§6.7.9 If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate. [....] However, if you initialize it like then, by rule of initialization, all the elements are 0-initialized and you can then rely on the null-termination. 
c-5-98	X	Why does Qt's version of libstdc++-6.dll work, but not MinGW? I'm very new to C, Netbeans, Qt, and any linking more complicated than import antigravity. I'm getting confused trying to setup Netbeans for Qt. I'm on Windows 7. I installed MinGW, and then separately installed the Qt SDK. When I installed the latter, I opted out of MinGW, since I already had that. I think I have all the paths set up correctly in Netbeans - I can build a basic Qt app. When I try to run the app, I get this error: * I have two copies of that DLL on my PATH: the one that came with MinGW, and the one that came with Qt. When I copy paste the MinGW one into the app folder and run the app, I get the above error. When I copy paste the Qt one into the folder, no errors. So there's a difference between the Qt DLL and the MinGW one. This is very unsetlling to me. What is this DLL, why is it in my Qt install if I chose not to include MinGW, and why is it different from the one in my MinGW install? Should I just rip MinGW and Qt out of my system and reinstall a fresh Qt SDK with the included MinGW? I want to do other kinds of C programming than just Qt, so it felt "right" to me to have separate MinGW install. What's happening: It's finding the DLL but cannot find the requested object within that DLL. The mingw library probably has different content than the stdlib library. You have a mismatch between different sets of code. My suggestion: Use the Mingw packaged with Qt. They've done the work validating it works with Qt. Why not take advantage of it? When I did this last year I did have to search for the right version of make. It wasn't provided at the time. 
c-5-99	X	Prefix Increment operator used in function calls being multiplied in a printf statement Note the answer is MINUS 4 PLUS 5 400 I would have expect the usually rules while evaluating inside the print (Right to Left) and using that logic I would have expected the two functions to return 25 and 36 respectively as I would have expected the ++a to have been evaluated first and then the --a (Right to Left), This is what happens for the following code We get the output --> PLUS 6 MINUS 5 25 36 Can you please explain a systematic explanation of why the first program evaluates to 400 with clear enunciation of the logic in terms of the individual steps. 
c-5-100	X	auto memory management for RedisModule_Alloc() in Redis Inside a Redis module, we can let the Redis manages memory automatically. Redis document says this When automatic memory management is enabled: You don't need to close open keys. You don't need to free replies. You don't need to free RedisModuleString objects. Apart from these, Does Redis free the memory allocated using RedisModule_Alloc() also? Or Does the developer have to free them manually? Memory allocated by RedisModule_Alloc(), RedisModule_Calloc() and RedisModule_Realloc() needs to be explicitly freed by the module via a call to RedisModule_Free(). For reference, look at the native type's example callback for freeing the type - https://redis.io/topics/modules-native-types#free-method 
c-6-1	X	Generate random string in c In this code I'm generate random number in specific range, but I want the out put of array must be I mean adding the word "host" to every number that is generate randomly, how can do this please? this is code In your code, ais an integer array, so it cannot hold a string value anyway. In case, you just want to only print the value, use host in the format string in printf() itself, like In case, you want the value to be generated and used, in some way, take a buffer and use snprint() to populate the content. the above will put values like host101, host103 etc. in the buf, as a string. Remember, buf has to be large enough to hold the supplied size (8, in this case.) Note: Never use magic numbers like 8 in above code, that's just for illustration, use a MACRO definition, at least. 
c-6-2	X	Building a books library in C I have to make a project in C that takes care of books in a library. I have to incorporate the title, name of the author, price and number of pages. For that I have to read that data from a file in a data structure vector with those fields. Is it okay if I use a matrix or something else? I have troubles reading the data from the file into the matrix and I could use some help. Could anyone help me with the code? This is what I have done: 
c-6-3	X	How to insert binary data into MongoDB (generated using fwrite() in C) and (received via STDIN in python) using python? Scenario: I have a continuous flow of data (some value in the format of x y) generated by a sensor. Now, using fwrite() in C, I converted output in binary format and then pipe it to another C code which will compress the data with some algorithm and again compress the compressed data with another algorithm and then again I used fwrite() to convert it to binary data. Now, I have a setup of MongoDB at server end which will receive and store the compressed binary data directly without decompression. But, at client end, I used Python (sys.stdin.read(1024))to receive binary data from C via a pipe (|) and starts sending 1024 bytes binary data in each request, that I already received from fwrite() in C after compression process. Now, the thing is I don't know how to insert (already have) binary data to MongoDB @server end. I tried bson.binary.Binary in Python. But, for that, I need to first encode data in binary then send it to MongoDB. But, the thing is I already have binary data and even I tried to insert some data into MongoDB, but it says that data-type of inserted content is string. And, now I think, I am confused. So, please, at least help me or give me some hint in my scenario. 
c-6-4	X	c - errors in linux kernel linked list I'm using the linux kernel linked list in order to create a linked list of message slots that are distinguished using a minor number, each slot has a linked list of channels that are distingushed using a channel ID. I used linux/list.h linked list. When I compile my code I get the following errors: Any idea how to fix it? 
c-6-5	X	Dereferencing a NULL pointer in embedded I am using Renesas V850 series microcontroller in my project. My product uses a Non-Volatile memory blocks(NVRam blocks) location which is separate from the main program section. During runtime, these NVRam blocks are monitored to verify that they are not corrupted. This check is done with a code similar to given below: Logic 1 The problem with this code is , if pointer "pBlock_One_Pointer" somehow gets corrupted with value "NULL" , the Block_ID check(2nd portion of "if" statement is not done). One way to avoid this situation is to remove the first part of "if" condition where it checks the Block_ID irrespective of pointer is "NULL" or not as given below Logic 2 But if "pBlock_One_Pointer" points to NULL, will it cause a exception ? So basically I have 2 questions: Is there a chance that pointer becomes NULL pointer due to some corruption during runtime? If so , will Logic 2 help me to overcome it? But if "pBlock_One_Pointer" points to NULL, will it cause a exception ? It causes undefined behavior. Per 6.5.3.2 Address and indirection operators of the C standard: The unary * operator denotes indirection. If the operand points to a function, the result is a function designator; if it points to an object, the result is an lvalue designating the object. If the operand has type "˜"˜pointer to type '', the result has type "˜"˜ type ''. If an invalid value has been assigned to the pointer, the behavior of the unary * operator is undefined. So: Is there a chance that pointer becomes NULL pointer due to some corruption during runtime? Yes. It's possible. If so , will Logic 2 help me to overcome it? No. How could it? The location of the memory you want to check for corruption is lost. Is there a chance that pointer becomes NULL pointer due to some corruption during runtime? Yes, there are several things that could cause this. Software issues such as pointer bugs, runaway code, stack overflow etc. And in addition, failing memory hardware because of data retention, EMI (nowadays less likely) or ambient radiation/cosmic rays. If so , will Logic 2 help me to overcome it? No. There are ways to detect corrupt RAM, most commonly CRC checksums. To detect failing memory hardware, there are other ways like "walking patterns" where you cycle cells by writing 1 and 0 to them at regular intervals. In modern embedded systems however, memory with built-in ECC is used, so that the software need not bother about memory hardware integrity. 
c-6-6	X	UDP multi-client server Problem is to make UDP server send data to an array of clients, that already make a connection to a server. All clients IPs are stored on the server side linkedlist, but for some reason, i am able to send response only, and only to the last made connection from the client. So basic description of what I want to achieve is: few clients made a connection and i can see their messages every client's IP is stored in linkedlist if there is more than 1 client stored in linkedlist, program will go through every IP in its storage, and if IP of current client is DIFFERENT from what is stored in linkedlist -> server is sending to this IP last message from current client on the server side, if message was typed, program will go through every IP stored in LinkedList and send this message to every client server.c server.h linkedList.h linkedList.c client.h client.c const.h main.c encrypt.c and encrypt.h are just two functions char* encrypt(char*) and char* decrypt(char*) that did nothing with a string --> WIP 
c-6-7	X	how can i load array to the function via pointers and use them for calculations in that function I am trying to make my code more professional by using pointers. I am using C . My goal is to use pointers as much as it is efficient . I have function which shifts filtered signal values. there are 4 filtering steps and each od them hold 3 values. filta ,filtb,filtc, filtd and there is new coming data which also needs to be shifted. here is my working code . Very bulky indeed and here what i image to be correct way of it. Because of operator precedence the expression *xfilt1a+1 is equal to (*xfilt1a)+1. That is, it takes the value pointed to by xfilt1a (which is the very first value) and adds 1 to that. You want to use *(xfilt1a+1) instead. Which is exactly equal to xfilt1a[1]. 
c-6-8	X	force that part of a c++ compiled as C I want to define a struct in a c++ source code that should be a POD (so it should be compiled based on C standard and not C++) for example assume that I have the following code inside a c++ file: if I compile this code, struct is POD and should be compiled as POD. So the placement of member variables follow the C standard which is well defined. But assume that a user may mistakenly, change the code to this code: now the struct is not POD and compiler is free on how it would place the member variables in memory. How can I force the compiler to make sure that a struct is always compiled based on C standard? Please note that I can not place the code inside a *.c code as I am developing a header only code which can be included into a *.cpp source code. You can't force the translator to treat it "as C". But you can add an assertion that it is compatible with C code. 
c-6-9	X	Pre-allocating a large file quickly in Linux with fallocate() On Windows, seeking past EOF and truncating the file (via SetEndOfFile()) allows pre-allocating a large file without actually writing the extra zeroes to the disk if, afterwards, I write into the file sequentially (which I do). How can I achieve the same effect in Linux? Seems like ftruncate() creates a sparse file which is not what I want because it doesn't decrease disk free space. That leaves me to fallocate() but which filesystems support this function exactly (natively, not emulated by glibc), or better yet: Which mainstream filesystems do not support fallocate()? The operation is supported on at least the following filesystems: XFS (since Linux 2.6.38) ext4 (since Linux 3.0) Btrfs (since Linux 3.7) tmpfs(5) (since Linux 3.5) 
c-6-10	X	libcurl : output of network upload download speed is not accurate I have used libcurl libraries to calculate my network upload download speed. I am using the following codes. But the rate of upload and download is not accurate compared to original network speed. (my output is around 1.3 KBps, 370KBps compared to original 500KBps for upload and 1MBps for download) It will be very helpful if anyone can tell the reasons for this and what modification should I do to get the proper upload download speed. New procedures to calculate the rates are also welcome. There is no perfect solution to your problem. You cannot accurately measure your provider's network speed by transferring an image to/from Wikipedia, because this involves also Wikipedia's own network, and the Internet backbone between you and Wikipedia. You are not the only user of the Internet, so your bandwidth is shared with many others. So when you transfer an image to/from Wikipedia, the speed you get is just an instantenous measurement of the network conditions between you and Wikipedia, and if you repeat it one minute later you will likely get different results. The PNG you are accessing is not very big, at 1 megabyte/second it only takes one fifth of a second to transfer. However, before the actual download starts your computer has to perform a DNS lookup for upload.wikimedia.org, then create a TCP connection to Wikipedia's servers, set up encryption using TLS, send the request for the image, and only then will you the actual transfer of the image start. It is likely that some time spent setting up the connection is also counted against the transfer speed as measured by Curl. You will get better results by using bigger files, but if you are going to run this speed test often, be aware that Wikipedia might not like you wasting their bandwidth. There are dedicated sites to help you measure your provider's speed. Just search for "http speed test" and you will find several. 
c-6-11	X	how to measure the time taken to bubble sort 10 numbers I am trying to measure the time it takes to bubble sort 10 large numbers. I put the numbers in an array of size 10. Then, I am bubble sorting the numbers 10 times and printing out the time taken for each time. The problem is that all im getting is zeros for some reason! Here is what i have in the main: and here is the function of bubble sort: Use %e format specifier to print the seconds. What is most likely happening is that the number is so small that %f just prints 0. Anyway regardless of how you print it, the results are pretty much useless, as such a small time will not be relevant for measuring your algorithm, other noise in the OS will dominate. Measuring the sort time of 10 numbers will never yield any significant value. Try with thousands and millions of numbers. And don't forget to compile with optimizations enabled. That the result is zero is probaby because the resolution of clock() is too low. There are CLOCKS_PER_SEC ticks, and CLOCKS_PER_SEC is 1000. Your example probably runs in less than 1000th of a second (less than 1 millisecond). 
c-6-12	X	what is the meaning of 'int (*enqueue)(struct , struct)' all. I am reading the source code of linux kernel and find one line which I do not understand: file: /net/sched/sch_generic.c location: the definition of struct Qdisc: .... what is the meaning of int (*enqueue)(struct sk_buff *skb, struct Qdisc *dev) (first line)? Is enqueue a pointer? enqueue is a pointer to a function that returns intand takes a pointer to struct sk_buff and a pointer to struct Qdisc. enqueue is a pointer to a function taking (struct sk_buff *skb, struct Qdisc *dev) and returning int. 
c-6-13	X	C FILE creation not working I am writing the function to insert the book. The function is inslivros();. Here is the code: When categoria == 1, the folder and file are not being created. Where did I go wrong? When categoria == 1, the folder and file are not being created. Where did I go wrong? fopen doesn't create folders/directories for you - it only create files. So if C:\Livros doesn't exist when running the program, the program will fail. To create the folder/directory look at mkdir the following proposed code: implements most of the comments to the question avoids recursion separates the decision to continue adding entries from the actual adding of a new entry. cleanly compiles documents why each header file is being included caveat: most items are properly error checked; however, the calls to fputs() should also be error checked I'll leave it to you to use mkdir to create any missing directories. Remember to check if the call to mkdir was successful, or not where the first time the program is run it may or may not be successful. All following runs of the program should see mkdir fail. And now the proposed code: 
c-6-14	X	Forming a pack for structure containing integer array,string list in python In C we have Like this i am making one structure in python: When i am trying like this python 2.7 giving error I have to send the python structure as and array of integer and as an array of strings.Is there any way we can do by sending arrays without using ctypes ? char *a[2][10]; is a 2D array of 2x10 pointers. You probably meant to do either char a[2][10]; which is an array of 2 C strings, each 9+1 characters long. Or perhaps char* a[2], which is two pointers to characters (possibly arrays). If you want to pack the equivalent of the C struct you will use the format "10I10s10s" where 10I stands for 10 4-byte unsigned integers in native order, and each 10s represents a byte string of size 10. In Python3, you could write: it would give (on a little endian ASCII platform): which is compatible with the C temp struct on a 32 bits little endian system. 
c-6-15	X	Program Works only debug mode but not in normal exe (using c lion)? SO i created a program that converts from infix to post fix and prefix which works just fine. The thing is that I am using C-LION which has its own debugger that allows me to go step by step and I do that the program works fine and outputs the expected results BUT then when I run it normally IT DOES NOT WORK AND GIVES ME A "main.c not working " ERROR. This the main function that has the menu: OK Now after much trials I am starting to think that the problem is in the conversion itself. This is one of the functions i am using for me it looks fine. If anyone has another opinion help is greatly appropriated. } This is the answer to your question "So your saying I should define them outside the switch statement?" which reflects correctly one of the problems in your code. Either: You can define them outside to solve the issue. Or: You can introduce appropriate block scopes to solve the issue. As the former is trivial, I will elaborate the latter: 1. Scope and Variables The life-time of a local variable starts at its declaration and ends with surrounding block scope. Example: 2. switch and case In opposition to other languages (like e.g. Pascal), the C switch statement is rather a "goto depending on expression" than a multiway branching with multiple alternatives. (This does not mean that switch cannot be used for the latter but it can be used different as well.) (Please, see Wikipedia: Control Flow: 5.2 Case and switch statements to understand what I mean.) Imagine the following (wrong) code: The goto L1; skips the declaration of int i = 1; but after L1: it is used in printf() &ndash; ouch! Out of curiosity, I tried it in ideone.com &ndash; it compiled and ran without complaints. Output was 0 although it could have been as well 1, 2, or any other number which can be stored as int. This is the same in the following (wrong) sample: Again, I compiled and tested in ideone.com. Output was case 2: 0. Ouch again! Solution To mimic multi-branching correctly, the following things are necessary: End each case with a break. Start a scope after each colon of a case. End this scope before the corresponding break. Example again: Compiled in ideone: As the scope of variable i is limited to the range from the possible entrance (case 0: case 1:) until the possible exit (break) &ndash; no other possible code path may access it. 
c-6-16	X	Something wrong in there I have to get true class average and write how many people gets A B C D F in the exams please help me? Something wrong in there I have to get true class average and write how many people gets A B C D F in the exams. There are two problems, as I see it. sum is not initilaized, so it's initial value is indeterminate. To elaborate, sum is an automatic-storage local variable and unless initialized explicitly, it contains indeterminate value. Now, seeing the usage here, sum += grade; invokes undefined behavior as per chapter Â§6.3.2.1, C11 [....] If the lvalue designates an object of automatic storage duration that could have been declared with the register storage class (never had its address taken), and that object is uninitialized (not declared with an initializer and no assignment to it has been performed prior to use), the behavior is undefined. The addition sum += grade; must be inside the loop. Otherwise, it will not be able to accumulate the entries from the loops. That said, always check the return value of scanf() and family to ensure the success of the operation. Otherwise, you may end up with unspecified behaviour. in this part of the code you don't use grade at all. you need to delete the , grade part or to add "%d" inside the format. 
c-6-17	X	Cast void pointer to struct and move it given size I got a binary file that contains 3 different structs which I'm suppose to read to my program. After I have read the first struct I store its size, and then I'm suppose to convert my void pointer + the first structs length to a struct ip_hdr * (which is the second struct) and then read all it's values. But the problems is I don't understand how you move a void pointer. I have understood that the void pointers don't have the same arithmetic rules as like a int pointer. I want to do something like this: But that doesn't work instead I get following error message: Expression must be a pointer to a complete object type Here is my code: I now it's broken but I'm not done with it. Just need help with the pointers for now. This should work, assuming the structure is compatible with whatever is in the file (in general saving structs "raw" to disk is a bad idea, the exact layout of a struct in memory is compiler-dependent and not stable enough to use as a file format): This adds "1" to a pointer of type ethernet_hdr, which will advance the actual pointer value by whatever size the Ethernet header structure has. The result is then cast to struct ip_hdr *. I think this is what you wanted to do. You can do it by adding bytes to a char *, but what's the point? You can't add directly to the void pointer, since pointer arithmetic is always in units of whatever is pointed at, and void has no size. Here's an example of moving along an array of structures using a pointer to void. The compiler doesn't know the type of object pointed to by a void* pointer. So you have two choices. One is to convert it to a pointer to the 'correct' type and then add the number of elements you want to move. The other is to add the number of bytes you want to an unsigned char* (or similar). The action happens on the lines marked [1] and [2] below. Typical output: The actual values may vary. Caveat If I understand the question, the requirement is to move through a number of different structs read together. That may be problematic because of alignment. It's beyond the scope of this question to go into detail but C may place or require padding between members or objects of different type to ensure they are aligned on the architecture. It's very common for example for 4 byte integers to lie on memory addresses that numerically divide by 4. That simplifies hardware and improves performance. It's not clear from the fragment provided that the objects read in will be aligned and further copying of data and shuffling may be required. That may have been taken into account but that can't be seen from the information provided. What may help is the often overlooked offsetof(,) macro defined in stddef.h. That returns the offset of a member within a type (taking internal padding into consideration). For example there is in general no guarantee (above) that: 
c-6-18	X	Windows object file/static library compiler compatability I have produced a static library (.lib) file using the mingw win32 cross-build toolchain on linux. A colleague wishing to link their application to this library have failed with many error LNK2001: unresolved external symbol type errors. They were using MSVS2008. They tried using my .lib file and also creating their own static lib using lib.exe and the set of object (.o) files that I produced. Both approaches produced the same errors. I successfully linked to the .lib file to make an executable that ran on windows10 with no issue. Obviously using the same compiler though, i.e. mingw rather that MSVS2008. Is it incorrect to assume that you can link an application to a static library using disparate compilers? We haven't had any problems linking using shared libraries (.dlls) across compilers. 
c-6-19	X	#ifdef not accepting enum definition I'm currently developing a project which involves 7 files: main.cpp, GpioInterface.h, GpioInterface.cpp, Utility.h and Utility.cpp. Basically in the main.cpp file I declare the board type using #define BOARD_TYPE WHATEVER and then in GpioInterface.h I define some values if this macro has been defined. It looks something like this: main.cpp: GpioInterface.h: Utility.cpp: When compiling, the GpioInterface.h file is giving me the following error 'GPIO_PIN_STATE_HIGH' was not declared in this scope. Any idea how to make the enums defined in GpioInterface.h visible to Utility.cpp? Thanks! main.cpp is compiled correctly due to at the beginning. In Utility.cpp you don't have that define so include of "GpioInterface.h" doesn't define enums. Ideally, such definition should be moved to a compile-time option e.g. if you're using gcc, it should look like gcc -D__USE_BOARD_=WHATEVER , See: https://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html Similar option exists for g++ , and for MSVC(++) also, See: https://docs.microsoft.com/en-us/cpp/build/reference/d-preprocessor-definitions The advantages are that these are compile-time configurations for a given platform, no need to change the code for each platform and to figure out (like in your case) where the macros are defined. Unless your GpioInterface.h file, or one of the files it includes, has a macro definition for __USE_BOARD_ then there won't be one, and the #ifdef __USE_BOARD_ will evaluate to false and the enums won't be defined. When the compiler compiles Utility.cpp it won't have a definition for GPIO_PIN_STATE_HIGH and you'll get an error. The easiest way would be to simply remove the #ifdef around your enums. Alternatively you could pass __USE_BOARD_ via compiler argument like amritanshu mentioned in his answer or (preferably) declare it in your build configuration settings (of an IDE for example). If you don't want/can use any IDE or build tool for some reason i'd recommend creating an additional header for global defines and include it everywhere it is needed. This, however, isn't really clean and i always would prefer using build configurations. 
c-6-20	X	Number of Possible Paths in C So, I am currently trying to solve this problem where I have a rectangular field and I can move in 6 ways: Up Right Diagonal (Right/Up) Left (with cost 1) Down (with cost 1) 2 Right and 1 Up, I called it Horse like in chess (cost 2) The cost will stop the code if it reaches or exceeds 10. Here is my code: I do think it will reach a solution, but it is taking too much time, even for small fields... How Can I improve my code? Should I take another approach to this problem? I see two rather simple ways to improve your code. Change: to Since you can only go left and down at a cost of one, you can add that to the cost-check to end the recursion a bit earlier. Something like: 
c-6-21	X	simplest way to run c source code by c# I want to make a c# program that runs c source code from string, and return the result. What is the simplest way to do this? 
c-6-22	X	Does array subscription count as taking address of object? This question is inspired by answers to this question. Following code has potential for undefined behaviour: C standard specifies that uninitialized variable with automatic storage duration has indeterminate value, which is either unspecified or trap representation. It also specifies that uintN_t types have no padding bits, and size and range of values are well defined; so trap representation for uint64_t is not possible. So I conclude that uninitialized value itself is not undefined behavior. What about reading it? 6.3.2.1 Lvalues, arrays, and function designators ... Except when it is the operand of the sizeof operator, the _Alignof operator, the unary & operator, the ++ operator, the -- operator, or the left operand of the. operator or an assignment operator, an lvalue that does not have array type is converted to the value stored in the designated object (and is no longer an lvalue); this is called lvalue conversion. ... ... If the lvalue designates an object of automatic storage duration that could have been declared with the register storage class (never had its address taken), and that object is uninitialized (not declared with an initializer and no assignment to it has been performed prior to use), the behavior is undefined. Except when it is the operand of the sizeof operator, the _Alignof operator, or the unary & operator, or is a string literal used to initialize an array, an expression that has type "˜"˜array of type'' is converted to an expression with type "˜"˜pointer to type'' that points to the initial element of the array object and is not an lvalue. If the array object has register storage class, the behavior is undefined. Question: Does subscripting array count as taking the address of an object? Following text seems to imply that subscripting array requires conversion to a pointer, which seems impossible to do without taking address: 6.5.2.1 Array subscripting Constraints One of the expressions shall have type "˜"˜pointer to complete object type'', the other expression shall have integer type, and the result has type "˜"˜type''. Semantics A postfix expression followed by an expression in square brackets [] is a subscripted designation of an element of an array object. The definition of the subscript operator [] is that E1[E2] is identical to (*((E1)+(E2))). Because of the conversion rules that apply to the binary + operator, if E1 is an array object (equivalently, a pointer to the initial element of an array object) and E2 is an integer, E1[E2] designates the E2- the element of E1 (counting from zero). This makes Â§6.3.2.1 paragraph 3 seem weird. How could array have register storage class at all, if subscription requires conversion to a pointer? Yes, array subscripting counts as taking the address, as per the part you quoted in 6.5.2.1. The expression E1 must have its address taken. Therefore the special case of UB in 6.3.2.1 does not apply to array indexing. If array indices are used, it is not relevant if the array could be stored with register storage duration or not (a variable having its address taken cannot use register storage duration). You are correct in assuming that reading an uninitialized stdint.h type with indeterminate value, which has its address taken, does not invoke undefined behavior (guaranteed by C11 7.20.1.1), but merely unspecified behavior. The value could be anything and it can be non-deterministic between several reads, but it cannot be a trap. "Reading an uninitalized variable is always UB" is a wide-spread but incorrect myth. Further information with normative sources in this answer. The lvalues discussed in 6.3.2.1 paragraph 2 can never be elements of an array declared with register, so the question of what it means to take their addresses never arises. Per paragraph 3, using an array declared with register other than as the operand of sizeof, _Alignof, or & has undefined behavior. But the only way to get an lvalue for an array element is to use an array in a way other than these, as in arr[0]. Therefore, it can never occur (with defined behavior), that the lvalue discussed in paragraph 2 designates an array element that could have been declared with register storage class. In this light, the parenthetical comment "never had its address taken"? is clear. It applies only to objects that are not array elements, and the only way to produce the address of such an object is to apply &.1 Taking the address means applying &. Whether evaluating arr[0] or arr + 2 or even simply arr (as in arr;, not as an operand of sizeof or anything else) constitutes taking the address of an element of the array is irrelevant. It has no effect on what 6.3.2.1 2 means. Regarding your question about how an array could have register storage class, note 121 (in clause 6.7.1) says "Thus, the only operators that can be applied to an array declared with storage-class specifier register are sizeof and _Alignof."? (While this is legal, it does not seem useful, as you can apply sizeof and _Alignof without using register, so including register in the declaration does not seem to provide any useful property.) Footnote 1 An exception is that clause 6.7.2.1 paragraph 15 says that a pointer to a structure may be converted to a pointer to its first member, and paragraph 16 says a pointer to a union may be converted to a pointer to any of its members. However, this requires having a pointer to the aggregate (the structure or the union), which means the aggregate itself cannot have register storage class, and members inside the aggregate cannot be declared with a storage class. 
c-6-23	X	Waiting for serial transmission to complete in Win32 I seem to be having a bit of trouble in waiting for the completion of serial data transmissions. My interpretation of the relevant MSDN article is the EV_TXEMPTY event is the correct signal and which indicates that: EV_TXEMPTY - The last character in the output buffer was sent. However in my tests the event always fires immediately as soon as the data has been submitted to the buffer and long before the final has actually reached the wire. See the repro code below where the period is always zero. Have I made an error in the implementation, am I misunderstanding the purpose of the flag, or is this feature simply not supported by modern drivers? In the latter case is there a viable workaround, say some form of synchronous line state request? For the record the tests were conducted with FTDI USB-RS485 and TTL-232R devices in a Windows 10 system, a USB-SERIAL CH340 interface on a Windows 7 system, as well as the on-board serial interface of a 2005-vintage Windows XP machine. In the FTDI case sniffing the USB bus reveals only bulk out transactions and no obvious interrupt notification of the completion. The background is that this is part of a Modbus RTU protocol test suite where I am attempting to inject >3.5 character idle delays between characters on the wire to validate device response. Admittedly, an embedded realtime system would have been more far suitable for the task but for various reasons I would prefer to stick to a Windows environment while controlling the timing as best as possible. According to the comments by @Hans Passant and @RbMm the output buffer being referred in the EV_TXEMPTY documentation is an intermediate buffer and the event indicates that data has been forwarded to the driver. No equivalent notification event is defined which encompasses the full chain down to the final device buffers. No general workaround is presently clear to me short of a manual delay based upon the bitrate and adding a significant worst-case margin for any remaining buffer layers to be traversed, inter-character gaps, clock skew, etc. I would therefore very much appreciate answers with better alternate solutions. Nevertheless, for my specific application I have implemented a viable workaround. The target hardware is a half-duplex bus with a FTDI RS485 interface. This particular device offers an optional local-echo mode in which data actively transmitted onto the bus is not actively filtered from the reception. After each transmission I am therefore able to wait for the expected echo to appear as a round-trip confirmation. In addition, this serves to detect certain faults such as a short-circuited bus. 
c-6-24	X	Where are expressions and constants stored if not in memory? From C Programming Language by Brian W. Kernighan & operator only applies to objects in memory: variables and array elements. It cannot be applied to expressions, constants or register variables. Where are expressions and constants stored if not in memory? What does that quote mean? E.g: &(2 + 3) Why can't we take its address? Where is it stored? Will the answer be same for C++ also since C has been its parent? This linked question explains that such expressions are rvalue objects and all rvalue objects do not have addresses. My question is where are these expressions stored such that their addresses can't be retrieved? It does not really make sense to take the address to an expression. The closest thing you can do is a function pointer. Expressions are not stored in the same sense as variables and objects. Expressions are stored in the actual machine code. Of course you could find the address where the expression is evaluated, but it just don't make sense to do it. Read a bit about assembly. Expressions are stored in the text segment, while variables are stored in other segments, such as data or stack. https://en.wikipedia.org/wiki/Data_segment Another way to explain it is that expressions are cpu instructions, while variables are pure data. One more thing to consider: The compiler often optimizes away things. Consider this code: This code will probobly be optimized to: So what would the address to (x+=1) mean in this case? It is not even present in the machine code, so it has - by definition - no address at all. Such expressions end up part of the machine code. An expression 2 + 3 likely gets translated to the machine code instruction "load 5 into register A". CPU registers don't have addresses. Consider the following function: Now, let's play the compiler game and try to compile this by hand. I'm going to assume you're using x86 because that's what most desktop computers use. (x86 is the instruction set for Intel compatible CPUs.) Let's go through a simple (unoptimized) version of how this routine could look like when compiled: Now, as you can see, the constants in the code (0, 2, 1) actually show up as part of the CPU instructions! In fact, 1 doesn't show up at all; the compiler (in this case, just me) already calculates ~1 and uses the result in the code. While you can take the address of a CPU instruction, it often makes no sense to take the address of a part of it (in x86 you sometimes can, but in many other CPUs you simply cannot do this at all), and code addresses are fundamentally different from data addresses (which is why you cannot treat a function pointer (a code address) as a regular pointer (a data address)). In some CPU architectures, code addresses and data addresses are completely incompatible (although this is not the case of x86 in the way most modern OSes use it). Do notice that while (number) is equivalent to while (number != 0). That 0 doesn't show up in the compiled code at all! It's implied by the jnz instruction (jump if not zero). This is another reason why you cannot take the address of that 0 " it doesn't have one, it's literally nowhere. I hope this makes it clearer for you. where are these expressions stored such that there addresses can't be retrieved? Your question is not well-formed. Conceptually It's like asking why people can discuss ownership of nouns but not verbs. Nouns refer to things that may (potentially) be owned, and verbs refer to actions that are performed. You can't own an action or perform a thing. In terms of language specification Expressions are not stored in the first place, they are evaluated. They may be evaluated by the compiler, at compile time, or they may be evaluated by the processor, at run time. In terms of language implementation Consider the statement This does two things: first, it declares an integer variable a. This is defined to be something whose address you can take. It's up to the compiler to do whatever makes sense on a given platform, to allow you to take the address of a. Secondly, it sets that variable's value to zero. This does not mean an integer with value zero exists somewhere in your compiled program. It might commonly be implemented as which is to say, XOR (exclusive-or) the eax register with itself. This always results in zero, whatever was there before. However, there is no fixed object of value 0 in the compiled code to match the integer literal 0 you wrote in the source. As an aside, when I say that a above is something whose address you can take - it's worth pointing out that it may not really have an address unless you take it. For example, the eax register used in that example doesn't have an address. If the compiler can prove the program is still correct, a can live its whole life in that register and never exist in main memory. Conversely, if you use the expression &a somewhere, the compiler will take care to create some addressable space to store a's value in. Note for comparison that I can easily choose a different language where I can take the address of an expression. It'll probably be interpreted, because compilation usually discards these structures once the machine-executable output replaces them. For example Python has runtime introspection and code objects. Or I can start from LISP and extend it to provide some kind of addressof operation on S-expressions. The key thing they both have in common is that they are not C, which as a matter of design and definition does not provide those mechanisms. The answers are too complicated. What your initial statement really means is it applies to values in either stack memory or heap memory, that is memory you can actually write to. The expressions and constants, which are the program itself, actually are stored in memory but you cannot write to this memory. Therefore it makes no sense to be able to refer to that memory; you'll get a segfault if you try. Where are expressions and constants stored if not in memory In some (actually many) cases, a constant expression is not stored at all. In particular, think about optimizing compilers, and see CppCon 2017: Matt Godbolt's talk "What Has My Compiler Done for Me Lately? Unbolting the Compiler's Lid"? In your particular case of some C code having 2 + 3, most optimizing compilers would have constant folded that into 5, and that 5 constant might be just inside some machine code instruction (as some bitfield) of your code segment and not even have a well defined memory location. If that constant 5 was a loop limit, some compilers could have done loop unrolling, and that constant won't appear anymore in the binary code. See also this answer, etc... Be aware that C11 is a specification written in English. Read its n1570 standard. Read also the much bigger specification of C++11 (or later). Taking the address of a constant is forbidden by the semantics of C (and of C++). 
c-6-25	X	Compiling C/C++/Visual C program by Command Line I wrote a program in C # - windows-forms Which receives input from the source code in C / C ++ And I have to compile it and run, and show the user output according to his plan. The use of Microsoft's codedom compiling classes is not successful, after long Internet surfing, because the above-mentioned functions for C language are not being implemented. I created a program that opens the command line and sends commands to it, and reads the output back. Using Visual Studio's built-in command line was not successful because it closed immediately after a few seconds after it was opened and I could not find a solution to this even after a long search on the Internet. You can see here my view something works, But I get an error like this: fatal error C1034: winsdkver.h: no include path set although i call the "vcvars32.bat" command, to load all environment variables. you can see it in the image. Thank you all for any help!! i'm using WIN32 CreateProcess to achieve same results. 0) read always the docs: https://msdn.microsoft.com/en-us/library/fwkeyyhe.aspx 1) winsdkver.h is a file comprised in the Windows Sdk.have you got the WSDK? 2) do you need to pause the cmd execution? add a line after cl.exe with 'pause' command. 3) add some include dir with /I in the cl.exe parameter string to inlude other headers. 4) you can also create a batch file: 'cl.exe %* > output.txt' this permits you to pass the arguments to cl.exe and then prints the result in a text file 
c-6-26	X	structures. the output is wrong It is supposed to ask for input after first statement i.e Enter the first name but it does not take input but prints the next statement i.e Enter the last name and then asks for input. 
c-6-27	X	SDL + Mac OS X issue (window not responsive to keystrokes in certain situations) I was trying to play around a bit with SDL on macOS (High Sierra 10.13.2) and I stumbled on what seems to be a rather incomprehensible mistake involving SDL windows not responding to keystrokes. I tried to construct two minimally different examples demarcating when this problem occurs: in fact, the examples do differ so minimally that it seems bizarre that their behaviour differs at all. I have version 1.2.15 of the SDL libraries installed, and they were installed using the 'brew install sdl' command. The first example (the one that does work correctly) is as follows: The other example is almost identical, but is spread over two files. With the second file being: As you can see, these programs are close to identical, with the only real difference being the fact that one of them is spread out over two files. Now, I compile these files with the commands and I get two differences in the resulting behaviour. First of all, the first example does not give any warnings whatsoever, whereas the second example gives the following warning: The second difference is more problematic, however. Whereas the first example (the one who does give a compiler warning) behaves as it should, with a window appearing on screen, which correctly responds to the pressing of the ESC key before quitting, the second example simply does not respond to keystrokes at all, even after clicking on the window to make it active. This result is obtained by executing the binary resulting from the compilation directly from the terminal. 
c-6-28	X	JNIEnv can NOT call method in other c files? I have two files : MyJni.cpp is the jni file. And MyObject.c is a normal c file. Here is the MyJni.cpp file's code : MyObject.c file is: I saved the JNIEnv to MyObject (maybe should not do this). And in MyObject , I want to call Jni methods, but it can't . While I callback to the MyJni file, it works fine. Why? I can't find out any difference.... How can I make it work in MyObject ?? Thanks for any help! I found out why: JNIEnv is a C++ class, can't be used in C file . In C file can use _JNIEnv. And Yes, should NOT save JniEnv value. Thanks for all of you. 
c-6-29	X	incompatible types when assigning to type 'atomic_int' from type 'int' I compile ffmpeg for android. whether the problem is my environment configure or source code? I think it is source code problem. I change it as below: sl->er.error_count = 0; atomic_store(&sl->er.error_count, 0); h->slice_ctx[0].er.error_count += h->slice_ctx[i].er.error_count; atomic_fetch_add(&h->slice_ctx[0].er.error_count, atomic_load(&h->slice_ctx[i].er.error_count)); 
c-6-30	X	How to receive SNMP Traps using C I wrote the code for generating SNMP Traps using C. Here is my code: I Want to write the code for Receiving Traps. I looked through the many websites, but all are about commands type only. Please help! 
c-6-31	X	Sorting 1st k elements of an array in increasing order and rest in decreasing order in C This is the code for arranging the array in increasing order: This is the code for arranging the array in decreasing order: Both parts are working fine individually on the whole array. But when the code is placed one after another ,then the second part of the code is not working. These two fragments are in sort_array(). That's called from a main function like this: The problem is in the limit on the second (sort decreasing) loop when k is neither 0 nor n. This code takes the material in the question and creates an instrumented version of the code. The bug fix is clearly marked. I tested with a random number generator but using a fixed seed, on a set of 20 double-digit values between 10 and 99. Buggy trace Fixed trace Note how judicious printing made it easy to spot the problem, and that the fix was working. Extreme cases (k = 0, k = 20) Both the fixed and the unfixed versions produced the same output on the extreme cases where k = 0 and k = 20 (aka n). 
c-6-32	X	LD_PRELOAD in every log in to server I need to logging all terminal commands in Linux. I have found correctly working library in C, but it works only when I run LD_PRELOAD=/usr/local/bin/bashpreload.so /bin/bash: If I log in again in the system after this, I will not see the lib with ldd: And one more trouble: if I use this library, my current PID is changing: So, I need two things: Find the way to do LD_PRELOAD quietly for each logging in user; Know why after this I'm working in the child /bin/bash process. Thanks! Find the way to do LD_PRELOAD quietly for each logging in user You need to set somewhere common for all users such as /etc/profile or /etc/environment. See How to set environment variable for everyone under my linux system? for more options/details. Know why after this I'm working in the child /bin/bash process. That's straight-forward - whenever you create a process, its PID is different from its parent :) When you run /bin/bash, you obviously creates another shell and that's why $$ is different. This has nothing to do with LD_PRELOAD. If you run /bin/bash without LD_PRELOAD, you'll observe exactly the same behaviour. This is a classic XY problem. You need to log user actions, have decided on a solution, and are asking questions about that solution. Even though the solution won't work. Because using an LD_PRELOAD library is not a reliable way to log user commands. The user can just unset the LD_PRELOAD environment variable. And no, marking it readonly doesn't work. Because it's just a variable in the memory of a process the user controls. You're setting LD_PRELOAD to a 64-bit shared object. Every 32-bit program will now fail to run. However your preloaded library logs data, it does so with the user's permissions/access rights. Thus the user can spoof the data recorded. If you need to log user's actions, use a system designed to do that securely: auditing. If someone will needs the same as me: You can add environment variable before user log in via SSH in /etc/security/pam_env.conf, syntax like: 
c-6-33	X	Is there a list of C functions that allocate memory? I'm coming from Java to pure C and I'm struggling with the hell of pointers. I'm kind of confused when it comes to free the result of some functions. Is there a list of functions of the C library, that allocate memory internally and thus you have to free the result? Or is it there some convention that allows you to know how to handle the function? (Like the 'n' in some functions: strncpy, strncmp, etc. that tells you to inform the size.) 
c-6-34	X	Linux c process synchronization only signals and message queues I'm looking for help with synchronization of 3 child processes and their parent. I have 3 child processes, 1st is reading from file lines and sending them via pipe to 2nd, 2nd process receives it, counts how many characters it is and that number sends via second pipe to 3rd process which one prints it to console. Now I have to use signals and message queues to handle SIGTERM, SIGCONT and SIGTSTP. The scenario looks like this: Only 3rd process reacts to signals send from console. After receiving he 'informs' parent. Parent saves signal to message queue and 'informs' 1st child. 1st child reads, saves, informs 2nd and 2nd same for 3rd. I have already made all of it with sigaction() siginfo_t etc., but what I can't figure out is how to make process to wait for another. I read about wait(),waitid(),waitpid(), but all of them seems to be used only for child process. I need tool which can stop process till another process specified by ID do something. I hope i understood the question, but i guess you need something like this: Can a child process wait for the parent process to terminate in Linux programming in C? 
c-6-35	X	vfork() usage with pipe() What I understood from man page is that vfork() child process uses the same resources that of parent. As per my understanding The above code lines together in child process should result in error no 13 SIGPIPE as we are closing the pipe read end fd[0]. But this is not happening insted the output is Received string: Hello, world! Can anyone explain me the reason ? The vfork() function was part of POSIX 2004, but is not part of POSIX 2008, which is the current edition (aka POSIX 2016). What you can do with vfork() is very, very limited. The manual says: The vfork() function shall be equivalent to fork(), except that the behavior is undefined if the process created by vfork() either modifies any data other than a variable of type pid_t used to store the return value from vfork(), or returns from the function in which vfork() was called, or calls any other function before successfully calling _exit() or one of the exec family of functions. You can't call close() from the child; you can't call write(). TL;DR " Don't use vfork(). If you're brave and happy with the complexity of the interface, you could investigate the posix_spawn() function and its support crew of 20+ functions starting posix_spawn_. OTOH, the "fork() and then do the operations in the child" paradigm from classic Unix has a lot of merits; it is a lot easier to understand than the posix_spawn functions, and ultimately more flexible too. Not all platforms necessarily implement posix_spawn(), either. 
c-6-36	X	Last element of 2D array of strings overwriting previous array elements Above code is displaying last element of str2D overwriting all of the previous array contents. I need to copy sChar to 2-D array of strings. Short Answer: You are not copying the content into the memory location pointed to by str2D[row][col], you're just making the pointer point to sChar. Thus, whatever is the latest content of the sChar, is being shown. Long answer: You have other issues. First, {{ "NULL" }}; is not the same as {{ NULL }}; You are creating a 2-D array of pointers. Before you can store anything in those memory locations pointed to by the pointers, you need to make sure that they point to some valid locations. 
c-6-37	X	How do I strip symbols only from dependent libraries? I'd like to ship libfoo.a, which is composed of foo.o--which in turn depends on libVendorBar.a and libVendorZoo.a. When I link and generate my libfoo.a I notice that symbols in libVendor*.a are still public and visible for potential client applications to link against. Due to many reasons outside of my control, I absolutely do not want 3rd party clients to be able to directly link against the vendor libraries. How do I force gcc to resolve all libVendor symbols for libfoo and discard them, so that only symbols from libfoo are visible? I'm not using any LD_FLAGS currently and everything is statically linked. Unfortunately static libraries do not have equivalent of -fvisibility=hidden used for shared libraries. You can achieve what you need with more work though: first link all necessary code into foo.o: This would allow you can to ship libfoo.a without vendor libs (vendor symbols are still present in it). Unfortunately you can't simply remove vendor symbols from library symtab (e.g. via objcopy -L and strip --strip-symbol) because linker will need them for relocation processing during final executable link. But you can at least rename them to something unreadable: Note however that this wouldn't stop motivated user from reverse engineering vendor's code. 
c-6-38	X	Function pointer in struct in C I have tried to implement class-like ideas in C using a struct. My test code: It's working but I need 1 more thing. I want function func do not need struct test_struct * as a parameter, just call test.func() How can I do it? I think we can use #define to replace test.func(&test) to test.FUNC() but I don't know how to do it. There is another question this pointer in C, not C++ that reads similarly, but it is actually different. I know there is no this pointer in C. My question is just: is there any "trick" to do it? Like using #define or something else. Using a global variable is not a good answer because I will have many objects in my program. In C++ - which you are trying to emulate - there is a implicit this pointer as argument to each method. If you do not have such a similar pointer in your struct you will have to access global data when your method is called which is a bad idea. Your function Has that argument, but it relies on that you supply the argument when you call the function. If you were to remove it Then the function would need to operate on global data since there is no explicit relation between the function and the contents of the struct. I would suggest - as other already have done to try out C++ instead of reinventing the wheel. As noted in comments while the question was marked as a duplicate, you can play with the preprocessor and get fairly close to what you want. It isn't exactly the notation you specify, but C is not C++. You can approach the problem with macros: In all these macros, the m argument is the 'member function' to be called. The S-macros are for when the s argument is an actual structure; the P-macros are for when the p argument is a pointer to the structure. The 0-macros are for when the member function only takes the this pointer; the n-macros are for when the member function takes one or more other arguments. You might write, for example: You might be able to use just one of the two sets of macros by applying the address-of operator to actual structures, such as: You might be willing to use a GCC-specific extension to the standard behaviour for variadic macros to avoid needing the 0-vs-n distinction: Thus, the PCALL macro could be the only macro you need if you accept the reduced portability and the need to apply & to structures"¦and if you accept the macro notation to call member functions. It ain't the same as the C++ member function invocation, but C ain't C++. Example code: Sample output: You could create and use an SCALL macro, but it is probably better to use the PCALL macro instead. 
c-6-39	X	Storing an address into a function pointer I was watching this video about calling the bootloader using software by assigning the address of the beginning of the system memory into a function pointer and then calling it, the expression for storing the address : "sysMemBootJump" is the function pointer. But what I don't understand is, why did he dereference the address of the memory before casting it to void(*)(void) ? Because the 'real' entry point is stored at that address. Think of it as being a pointer-to-pointer-to-function, by dereferencing you get just the pointer-to-function. This is equivalent to: this is fetching a word located at address 0x1fff0004 then So 0x1fff0004 is the address of a word containing the routine's address. And notice that the code is very unportable. A more portable integral type castable to/from addresses is uintptr_t from <stdint.h> .... You can typedef function signatures, like here, to write more readable code. 
c-6-40	X	((void(*)(void))0)() is Exit function? I was trying to write my own boot loader on Atmel AVR Microcontroller. I have referred one of the code base from github. I would like to thank for the code base to ZEVERO At primary level I understand the code base. but at line 224 I found a line Reference to the code I understand the if condition part but when I was trying to understand the true statement part i.e. **((void(*)(void))0)();** code writer has given explanation to this is //EXIT BOOTLOADER My first Question is what is the meaning of this complex declaration **((void(*)(void))0)();** And Second Question is, does it Exit the execution of the code in Microcontroller. It will simply call the address 0 as if it was a function returning void and taking no arguments. Or... less simply the address that is the bit pattern of the null pointer. Or even less simply, the behaviour is undefined so it might do anything unexpected. This is undefined behavior because it's an access violation (trying to access memory at null address) Let's first take the expression apart: The inner part void(*)(void) is the type of a function pointer, taking no arguments and returning nothing. (type)0 is type cast in C, so the underlined part is "null pointer converted to a function pointer". The last pair of empty parentheses is a function call, calling the function at address 0. This is undefined behavior, so the program crashes. Because it's UB, crashing is a very good result as anything worse could have happened. As @iBug pointed out, ((void(*)(void))0)(); invokes a function call on a NULL function pointer. In effect, that transfers program control to memory address 0. Now, on a workstation, that would be colossal UB, most likely resulting in a segfault. However, since the code in question is for a hardware bootloader, it's not UB, it (apparently) just exits the bootloader. At the hardware level, almost everything is implementation dependent, and almost nothing is portable. You can't expect C code targeted at a specific hardware platform to be in any way representative of generally-accepted C patterns and practices. ((void(*)(void))0)(); tries to call a NULL function pointer. User programs (not bootloaders) for AVR microcontrollers usually start execution at address 0. AVR-GCC's ABI uses an all-0-bit representation of NULL function pointers, so this call will (among other things) transfer execution to the user program. Essentially, it works as a slower version of __asm__ __volatile__("jmp 0");, and assumes that the user program's startup code will reinitialize the stack pointer anyway. Calling through a NULL function pointer is undefined behavior, so there's no guarantee that this trick will work with other compilers, later versions of GCC, or even different optimization settings. The if (pgm_read_word(0) != 0xFFFF) check before the call is probably to determine if a user program is present: program memory words that have been erased but not written will read as 0xFFFF, while most programs start with a JMP instruction to skip over the rest of the interrupt vector table, and the first word of a JMP instruction is never 0xFFFF. As has been pointed out before, calling this function simply results in a jump to address 0. As the code at this address is typically not defined by your own program, but rather by the specific environment, behavior totally depends on this environment. Your question is tagged as AVM/Atmel: on AVRs, jumping to address 0 simply results in a restart (nearly same behavior as a hardware reset, but beware, the MCU will keep the interrupt enabled/disabled state as opposed to a "real" reset). A "cleaner" program might probably want to use the watchdog timer for a "real" reset (wdt_reset() et al). 
c-6-41	X	Retrieving php stream errors in PHP extension I have a PHP extension that write files, The code above sometimes fail with Permission Denied error, and I need to notify end users about that. So far I could use the REPORT_ERRORS flag that let PHP print errors in the stream functions directly, Since Functions like perror / GetLastError does not seem to exist in PHP, I can't just do a snprintf and build a custom error message So how can I merge those two messages into a single one? (which is more meaningful) 
c-6-42	X	How to programmatically map integers to const strings? I have a bunch of error codes (0,1,10,11,20,30,40,...) that I need to map to their corresponding error messages. Since the error codes cannot conveniently be used as indeces into an array (it would be sparse and wasteful), I am thinking that this could somehow be accomplished with macros and/or enums. I am basically trying to create a function const char *my_strerror(int errorcode). Surely there is a more elegant way to do this? One solution would be to create an error message structure that contains an int field for the error code, and a char * field for the error message. Then an array of error message structs can be initialized with error codes and messages. This approach makes it easy to update the code with new error messages, and if the final struct in the array of error messages is used as a sentinel with a null pointer in the .msg field, functions which iterate over the array will not need to know how many elements it contains. Here is an example. The get_error() function loops over the array, breaking out of the loop when the desired error code is encountered. If the sentinel value is reached and no match has been found, an "Unrecognized error code" message is returned. Note that there is no need to modify the get_error() function as new error messages are added to the error_codes[] array. OP has specified int error codes, but also mentioned enums. Here is a modification using an enum. One advantage of using an enum here is increased readablility. A disadvantage is that now code must be modified in two places when error messages change. Program output: 
c-6-43	X	MISRA C 2012 Rule 9.1 Reading uninitialized value I am facing scenario where rule 9.1 getting violated. I want to read an auto variable(having garbage value while declaring) before initialization and to assign null if it is not null. If it is null, then with different value. Sample code: Violation is for the line if (var1[reg_num] != VAR_NULL) where var1[reg_num] is reading before initialization. Is there any way to write the same code without violating 9.1 The tool is correct to report the error. Quoting C11, chapter Â§6.7.9 If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate. [....] To avoid this, you can initialize the array to some value, say, 0 while defining. This way, you have a predictable value present in each of the elements. To add, it makes no sense of the logic stated above (i.e., checking a value of an uninitilized variable, in general), at best, it will invoke undefined behavior. Don't do it. All you have to do is initialize your variables. This is practically rule #2 when learning C -- very, very basic material. The MISRA rule is just telling you to follow the basic rules in C. With the initialized variable, the array initialization code is simplified as a matter of course. In case you missed it, the point is to initialize variables when you define them. Although some of MISRA's rules are bordering on whimsical idiosyncratic dogmatic pedantry, this one about reading uninitialised variables is directly lifted from the language itself: with a few exceptions the behaviour on reading an uninitialised variable is undefined. Don't do it: MISRA or no MISRA. In your case you can write uint64_t var1[NUM] = {0}; 
c-6-44	X	I want to cross-compile Python to arm-linuxï¼Œbut I want to use Python2.7.3 in my arm-Linux. When I xcompile fined and I have found that the elf needs dynamic file(ld-linux.so.3) on /lib, but my arm-linux does not have /lib folder, and I have no permision to create it. How can I config and change the dynamic-linker in python xcompile.ths? Also, I used command arm-linux-gcc hello.c -o hello.out -Wl.dynamic-linker=/system/lib I can change the hello.out dynamic linker..but I don't know how to do it in python configure. 
c-6-45	X	realloc() memory allocation function returning NULL In the code given below, realloc() is returning NULL (0x00000000) value. I have checked with various variations but still I am getting NULL value. I even checked calling the GetLastError() function which is returning error code 87. inPtr is unsigned char * pointer. Here mallocFailed is a global variable. What could be the possible reason for this result. 
c-6-46	X	Memory Allocation error identified by valgrind My program compiles and works exactly as specified for a problem I'm working on however i'm failing the valgrind test at the beginning of the if statement below. Valgrind Test returns "Invalid read of size 8." I'm hoping the code I provided below is enough to clarify where I'm insulting the system's memory. Also below is the structure of my trie node: and also here is how i free my malloc memory: The line if( current->children[cha] == NULL && (cha >= 0 && cha <=26) ) executes index boundary check only after accessing array, it should be rewritten to verify that index is valid before accessing array at that position. It is also a good idea to get rid of magic numbers: 
c-6-47	X	Is there a permanent solution to the fgets Please tell me how to use fgets right every time I take the input in a loop. As my for loop only works once and then the program breaks. I have tried using buffer and getc too but nothing seems to work. Still you are not guarding the functions enough so that if any of them fails you can catch it. I would say checking the return value of the functions and few checks regarding the parameters that you use in the functions. 
c-6-48	X	Checking for Newline in C I've been trying to write a simple program that checks for a newline and then returns that answer as true or false. Here's what I have: However, when I run the program and simply hit enter, it returns '0'. The only way for it to return '1' is if I hit the space bar first. Can anybody tell me what I'm missing? Thanks. 
c-6-49	X	strcpy causing Thread 1: signal SIGABRT I'm just doing some practice code but I can't figure out this stubborn Thread 1: signal SIGABRT error. strlen("whatever") > strlen("vegan") = undefined behavior. Why do you think you need to copy the strings around. You could just do: You need to allocate more memory to solve this; you cannot store 9 bytes in 6 bytes space " that causes an error. Solution 
c-6-50	X	Is it possible to put GtkLayouts inside GtkLayout? I want to put 2 GtkLayouts into GtkLayout. But, it seems to not be working. Anyone knows why ? or, there are some restrictions using gtk components. I found the answer. If the container is appended into another container, it should be treated as a widget. Therefore, uses gtk_widget_set_size_request instead of gtk_layout_set_size will solve this problem. 
c-6-51	X	Explaining read, write system calls behavior with STDOUT_FILENO, STDIN_FILENO, and \n I know there are many questions here that talk about write, read system calls and file descriptors in C. I tried searching a bit but I really couldn't find what I'm looking for so... EOF on new line when reading from STDIN_FILENO? Let's say I have this code in test.c: with header files included and all. Why do I have this behavior when executing the file test? In the first execution I use a new line (enter) while in the second execution I use ctrl+d to put an eof. Why does a new line character act like an eof in this case? I mean read should try to read 8 characters. Shouldn't it have waited in the first execution? what if I wanted to type '1\n2\n3' in the buffer? How to make my program work? I've got two ideas but I don't know how to verify them: Is this behavior related in any way to how processes read from a pipe? The idea of reading only what's in there even if more could be coming? If so: how to make the read call a blocking system call? (I hope I'm not misusing the term). Could the terminal be putting an EOF character when a new line character is typed? I don't think it's true but if I type 123456789+enter while executing test stops taking input after the enter key, uses characters from 1 to 8 and the terminal executes 9 as command (which means it takes the 9 and the newline character). I just don't get it. Why is the program still working if STDIN_FILENO and STDOUT_FILENO are switched by mistake? So now I have another code, test2.c: And I have the same behavior in both cases. Why don't read and write fail with EBADF ? Could this be some subtle tty-shell interaction thing I'm not aware of? Thanks!! N.B: If you have any suggestions on how to improve this question or the title please let me know. Spinning a bunch of comments typed on an iPhone into the semblance of an answer. Program 1 The newline acts like end of line and sends the data to the program(s) reading from the terminal. You get EOF when read() returns 0. It only returns -1 if there is an error. So why does the read system call return? Why doesn't it wait for an EOF? If I use read to read from a file it doesn't return if it encounters an end of line right? Why is the stdin treated differently? It isn't standard input that's treated differently; it is terminals that are treated differently. (See also Canonical vs non-canonical terminal input.) Normally (in canonical mode), the terminal driver makes input available when you type newline, or when you type Control-D. In neither case are you getting EOF. In the first, there are two characters to read; in the second, one. Read returns what is available up to the limit. It does not wait for the buffer to be filled. If you type newline (and the program reads it) and then Control-D, there are no characters waiting to be read, so read() returns 0, indicating EOF. A program can ignore that and try reading again; depending on the file type, it might or might not get another EOF indication immediately. When you type 1 and Control-D, then there is one character available, so read() reports that there was one character available. To get EOF (in a looping program), you'd have to type Control-D a second time, which would report 0 bytes available, or EOF. Note that even a disk file doesn't wait to fill the buffer if there aren't that many bytes left in the file; short reads are completely normal, but even more common with terminals than with disk files. Pipes, FIFOs, sockets all have slightly different rules; special devices (like /dev/null, /dev/zero, /dev/random, and so on) have different rules too. And, fundamentally, terminals are treated differently from disk files and pipes because sensible behaviour requires that. Think about it. One part of the terminal is the keyboard; another part is the screen. It's very different from a disk file. Also, it would be a nuisance to have to guess how many (and which) characters to type because the terminal input was not available until the buffer could be filled. Program 2 As to swapped channels, the classic mechanism for opening terminals is to open it for read-write and make each of the standard I/O descriptors refer to it. If there are no file descriptors open (and there aren't when you get a getty/login process), then the lowest unopened file descriptor will be returned by open() or dup(). Standard code runs along the lines of: So now file descriptors 0, 1, 2 all refer to the terminal named in tty_name. This means you can often read either standard output or standard error, and write to standard input. It ain't guaranteed (it won't work if standard input is piped from one program and standard output is piped to another), but it is commonly an option for programs run with the terminal as standard input and standard output (and standard error). 
c-6-52	X	Freeing the stack So I know that a call free() on a variable allocated in the stack would cause an invalid pointer error. In a malloced pointer, malloc() allocates 8 bytes before the actual pointer to leave information about its size. So I was wondering if I had made a long before a struct and then called free on that struct if it would be possible to free the struct (of course this is going off the assumption that the allocation of those 8 bytes is the only thing extra that malloc does). I guess my final question would be if there is any real difference between stack variable allocation and heap allocation (in terms of the backend calls to the kernel). Some C implementations might use data before the allocated space to help them manage the space. Some do not. Some do that for allocations of certain sizes and not others. If they do it, it might be eight bytes, or it might be some other amount. You should not rely on any behavior in this regard. When you declare a long object and a struct of some sort in a block, the compiler might or might not put them next to each other on the stack. It might put the long before the struct or vice-versa, or, because it optimizes your program, it might keep the long in a register and never put it on the stack at all, and it might do other things. In some C implementations, a long is eight bytes. In some, it is not. There is no good way for you to ensure two separate objects are put in adjacent memory. (You can make them not separate by putting them in a larger struct.) Even if you are able to cobble together a long followed by a struct, how would you know what value to put into the long? Did the C implementation put the length of the allocation in there? Or is it a pointer to another block? Or to some other part of the database the C implementation uses to track allocated memory? If malloc and free are using memory just before the allocated space, that memory is not empty. It needs to have some value in it, and you do not know what that is. If you get lucky, passing the address of the struct to free might not crash your program right away. But then you have freed a part of the stack, in some sense. When you call malloc again, the pointer you get back might be for that memory, and then your program presumably will write to that space. Then what happens when your program calls other routines, causing the stack to grow into that space? You will have overlapping uses of the same memory. Some of your data will be stomping over other data, and your program will not work. Yes, there are differences between memory allocated on the stack and memory allocated from the heap. This is outside of the model that C presents to your program. However, in systems where processes have stack and heap, they are generally in different places in the memory of your process. In particular, the stack memory must remain available for use as the stack grows and shrinks. You cannot mix it with the heap without breaking things. It is good to ask questions about what happens when you try various things. However, modern implementations of malloc and free are quite complicated, and you pretty much have to accept them as a service that you cannot peer into easily. Instead, to help you learn, you might think about this: How would you write your own malloc and free? Write some code that allocates a large amount of memory using malloc, say a megabyte, and write two routines called MyMalloc and MyFree that work like malloc and free, except they use the memory you allocated. When MyMalloc is called, it will carve out a chunk of the memory. When MyFree is called, it will return the chunk to make it available again. Write some experimental code that somewhat randomly calls MyMalloc with various sizes and MyFree, in somewhat random orders. How can you make all of this work? How do you divide the megabyte into chunks? How do you remember which chunks are allocated and which are free? When somebody calls MyFree, how do you know how much they are giving back? When neighboring chunks are returned with MyFree, how do you put them back together into bigger pieces again? I think your real question is how does the stack work. The stack is one big memory block allocated when your program starts. There is a pointer to the top of the stack. The name is suggestive: think of a stack of magazines. When a function is called, the parameters are placed on top of the stack. The function itself then places its local variables on top of that. When the function exits, the stack pointer is simply moved back to where it was before the function was called. This frees all the local variables and input arguments used by the function. The heap manager has nothing to do with this block of memory. Tricking free to put some of the stack in the heap manager's memory is going to wreak havoc on your program. The memory would likely be used again as you call other functions, and used simultaneously if you malloc memory, leading to data corruption at best, and stack corruption (read crash) at worst. When you speak of memory being allocated on the stack, you have to understand that in most implementations, the stack is allocted in a block -- variables are not allocated individually or separately. Each function call is allocated its own stack frame, with the required size to hold the return value (if necessary), the instruction pointer of the return address, and all of the local variables and function arguments. So while memory for the stack frame is allocated, it's not allocated with respect to any individual variable -- only in regard to the sum of the individual sizes. 
c-6-53	X	C user can insert more than array size I am new to C and while reading some tutorials from a university they put this example as an example that you cannot declare a variable, setting that equal to the constant and then using that variable . as in the example: but when I run it on Code Blocks it works fine, so is there any updating for C standards or i didn't understand well. Also when I insert values to (line) variable, I can insert more than 10 characters, so what is the need to declare 10 ? and what to do if i just want the user to insert only 10 characters. 
c-6-54	X	when use ncurses in multi-threaded , the terminal garbled When I use ncurses write a library management system, terminals garbled when multi-threadedï¼Œmy layout has three windows. 1.My code named ncurses.c 2.Three threads for three windows, thread_func_xxx() is pthread_create() third parameter. 3.Compile and Run then, I get terminal garbled. ps: 1.I have changed -lncurses to -lncursesw, but no effect. 2.if you don not have installed ncurses, you can follow this. short: the example won't work because the lower-level functions used to update the screen share data which isn't mutex'd. If you compile ncurses with the pthread option, that improves the re-entrancy of the higher-level functions and adds some mutexes, it's possible to use multiple threads. 
c-6-55	X	Why are function bodies in C/C++ placed in separate source code files instead of headers? For instance, when I define a class file in C++ I've always put the function bodies in the class header files(.h) along with the class definition. The source code file(.cpp) is the one with the main() function. Now is this commonly done among pro c++ programmers or do they follow the convention of separate header/source code files. As for Native C, I do notice then done in GCC(and of course for the headers in Visual Studio for Windows). So is this just a convention? Or is there a reason for this? Function bodies are placed into .cpp files to achieve the following: To make the compiler parse and compile them only once, as opposed to forcing it to compile them again, again and again everywhere the header file is included. Additionally, in case of header implementation linker will later have to detect and eliminate identical external-linkage functions arriving in different object files. Header pre-compilation facilities implemented by many modern compilers might significantly reduce the wasted effort required for repetitive recompilation of the same header file, but they don't entirely eliminate the issue. To hide the implementations of these functions from the future users of the module or library. Implementation hiding techniques help to enforce certain programming discipline, which reduces parasitic inter-dependencies between modules and thus leads to cleaner code and faster compilation times. I'd even say that even if users have access to full source code of the library (i.e. nothing is really "hidden" from them), clean separation between what is supposed to be visible through header files and what is not supposed to be visible is beneficial to library's self-documenting properties (although such separation is achievable in header-only libraries as well). To make some functions "invisible" to the outside world (i.e. internal linkage, not immediately relevant to your example with class methods). Non-inline functions residing in a specific translation unit can be subjected to certain context-dependent optimizations. For example, two different functions with identical tail portions can end up "sharing" the machine code implementing these identical tails. Functions declared as inline in header files are compiled multiple times in different translation units (i.e. in different contexts) and have to be eliminated by the linker later, which makes it more difficult (if at all possible) to take advantage of such optimization opportunities. Other reasons I might have missed. It is a convention but it also depends on the specific needs. For example if you are writing a library that you want the functionality to be fast (inline) and you are designing the library for others to use to be a simple header only library, then you can write all of your code within the header file(s) itself. On the other hand; if you are writing a library that will be linked either statically or dynamically and you are trying to encapsulate internal object data from the user. Your functions - class member functions etc. would be written in a manner that they do what they are supposed to do so as to where the user of your library code shouldn't have to worry about the actual implementation details for that part is hidden. All they would need to know about your functions and classes are their interfaces. It would be in this manner that you would have both header files and implementation files. If you place your function definitions in the header files along with their declarations, they will be inline and should run faster however your executable will be larger and they will have to be compiled every time. The implementation details are also exposed to the user. If you place your function definitions in the header's related code file they will not be inline, your code will be smaller, it may run a little slower, but you should only have to compile them once. The implementation details are hidden and abstracted away from the user. There is absolutely no reason to put function bodies in header files in 'c'. If the header file is included in multiple 'c' files, this would force the compiler to define the function multiple times. If the function is 'static', there will be multiple copies of it in the program, if it is global, the linker will complain. Similar reasoning is for c++. The exception is for 'inline' members of the class and some template implementations. If you define a temporary class in your 'cpp' file, it is perfectly ok to define it there and have function bodies defined inside the class. 
c-6-56	X	Return multiple values in one function in C with pointers I've searched the internet for my problem but it won't get solved. I have the following function: the program should return both values from the function solve but everytime I start the program I have a warning that says "missing return value". Where is my fault? By the way struct is not an option cause of restrictions from my professor and it need to be all done in one function. You should return an int value in solve function, as your functions signature is: int solve(double a, double b, double c, double *x1, double *x2),so just add "return 0;" at the end of solve function. So, there's some misunderstanding here. From what I can understand from the template code, your solve function is supposed to be returning the number of (real) solutions for a quadratic equation, and there's currently no logic for that. You should implement logic that returns the number of solutions based on the input. For a quadratic equation, you look at the discriminant. This is b^2 - 4*a*c. If it is less than 0, there are no solutions, one solution if it's equal to 0, and two solutions otherwise. Additionally, since there is no (real) square root of a negative number, you should not even run the calculations if the discriminant is less than 0. If you run your function with a*c > b^2, x1 and x2 would be Not a Number. You are performing the "return" of values using pointers correctly. However, since your function is defined as int solve, it is expecting you use return <some value>; inside the function. In fact, theoretically int main should be breaking it as well because you don't return anything (usually just return 0), but that's a special exception in the language to drop it for main. You have to design if condition in solve function so it will calculate the x2 value. And if you want to reduce size you can also use char data type for count variable. 
c-6-57	X	Xcode uses variable values of the same global array I work on a connect 4 game through Xcode (Mac). I scanned values into a global array (2 places) of the board's sizes and printed a game board with these sizes. after that part, the values inside the global array return to be {0,0}, as I initialized them, while they are supposed to remain the scanned values. I tried running the program through code blocks on windows and it does not have this problem. how can I fix it? this is the initializing and printing the board sizes values part in the main: this is the print_initial function with the opening messages and the board printing: this is the function that prints the board: and this is what the program prints: thank you! 
c-6-58	X	Iterate Through a File and Add Information to String Array - C I'm trying to iterate through a couple files and put the information on each line into a dynamically allocated string array. I allocated the arrays like this: Which seems to work completely fine. Then I went through the file until reaching the end of the file and wanted to put the names of users into tha string array. One of the files looked like this: Where the first number is the number of users in the file, in this case 4. My code for the file scanning is this: I also did a print statement in the while loop and it printed out normally, ie it would print But after the while loop and closing the file, it prints out user4 all 4 times. Why is the array basically changing itself from the time it's in the while loop and then once it's outside it? I'll just give you another example of reading a file line by line and maybe it will help you with your current code. Afterward your going to need to free each element and the entire array 
c-6-59	X	Threads in C, How to create 2 threads that will recieve messages by IPC I've created 2 threads, one of them should summarize random numbers and display average of them, second must multiply them and display them too. After compiling and running it only making something like this:image, can someone help, how to do this? Thread1 is function that summarize and display average of random numbers, Thread2 is function that multiplies random numbers 
c-6-60	X	strtol() causing garbage to be printed out after reading through all the lines of a file I have this code in one of my functions that takes in a string (char line[]), divides it into tokens, and converts them to integers. "isInt" is a function I wrote to detect whether the whole string is an integer or not. It returns 1 if it is and 0 otherwise. However, when do this, at the end of going through all the lines, it's printing garbage characters. And I know that it's specifically the strtol part that's causing it because if I comment it out, it's fine. I don't know why it's doing that and how can I fix this? Output Examples: . . . 12815KMCO MCO2000013123570457 NP 0.00 30.090 30.094 30.088 47 43 12815KMCO MCO2000013123580458 NP 0.00 30.091 30.095 30.089 47 43 12815KMCO MCO2000013123590459 NP 0.00 30.092 30.095 30.090 47 43 â”€â•’`(this is the garbage) ^ When I just try to print the original lines (that have all the tokens obviously) in the main function, with the strtol statement in its own function (which gets called each time the original line is printed), that garbage at the end gets printed. The goal of the strtol function is to get the last two integers (the temperature and the dew point for that minute) that you see on each line (the 47 and the 43 in this example). I have some extra if-statements in the original code (the range of the integers and the length of the token) to get those, but I am sure that it's the strtol statement that is causing that garbage to get printed out at the end. The garbage is not printed out with the exclusion of the strtol statement. 
c-6-61	X	How fix Error of error of crt1.o,crti.o in Build TinyCCompiler(TCC) from Source? How fix Error of crt1.o,crti.o in Build TinyCCompiler(TCC) from Source? https://github.com/LuaDist/tcc i'm test this at my Desktop system(ubuntu) and also test on server(centos). at both OS , show error. Error : Details : guest@Base:~/Gits/tcc-compiler$ ./configure --prefix=build guest@Base:~/Gits/tcc-compiler$ sudo make guest@Base:~/Gits/tcc-compiler$ sudo make install guest@Base:~/Gits/tcc-compiler$ cat test2.c Error : guest@Base:~/Gits/tcc-compiler$ build/bin/tcc test2.c $ find /usr/ -name crti* $ find /usr/ -name crt1* (Full Commands available at https://pastebin.ubuntu.com/26211506/) how can fix error? i'm can install tcc using sudo apt install tcc.(without bug and error) but i want install tcc from source.(this have error) New Update in tcc.h file : i'm change /usr/lib to /usr/lib/x86_64-linux-gnu. $ build/bin/tcc test.c -run $ /build/bin/tcc test.c New Update guest@Base:~/Gits/tcc-try/_build/_install/bin$ ./tcc test.c How fix error of include files not found?! Related Question : How fix Error of error of include files in TinyCCompiler(TCC)? The LuaDist project aims to build a complete Lua ecosystem using CMake. So you should use the CMake build system instead of the original makefiles. Typically you would do the following CMake invocation. After this you should have working tcc in _install/bin 
c-6-62	X	Xcode does not initialize global array in c I work on a connect 4 code through Xcode (Mac) and I tried initializing the global array of the game board to spaces in all of the places, but it initializes only the first place. this is the initializing part in the main: this is the print_initial function: this is the function that prints the game board: and this is what the program prints: thank you! 
c-6-63	X	PIC16F18855 ADC registers aren't behaving the way I expect them to (C, CCS compiler) I'm using a PIC16F18855 micro with CCS as the compiler, and I'm trying to get the ADC to work. Starting with the functions supplied by CCS, I wrote: This was behaving strangely, with the readings that were completely independent of the actual voltage on the pin (randomly between 9 and 18 for a 10 bit reading). A coworker looked through the assembly that the C compiled to, and tells me that the compiler is writing to the wrong register when it tries to read the adc using the built in read_adc() function. Specifically, when it should be writing the ADGO bit to start conversion it writes to the register before ADCON0 which doesn't exist. To work around this, I tried to implement my own functions for setting up and reading the ADC: There are two major problems with my code: If I call fprintf(HOST, "0x%x", ADC_CON_0); immediately after calling adc_setup(); I get 0x80 when I expected 0x84. That means that the 10 bit adc value is left aligned within the 2 8 bit registers, rather than right aligned. I have no idea why it doesn't write correctly. Every other register I've checked (ADCON1-3 and ADCLK) is correct. When I call read_adc_custom_implementation(); it waits forever on the while loop, indicating that the ADGO bit is never reset as the datasheet indicates it should be. Does anyone know why my implementations of adc_setup and read_adc_custom_implementation aren't working? Alternatively, if anyone knows why the supplied functions from CCS weren't working I'd be happy if I could use those instead. PIC16F18855 datasheet, ADCON0 is on page 357. 
c-6-64	X	why does "strtok" need string.h? In a small test, strtok seems to break without including "string.h". This program runs fine in the below version. However, if I comment out the string.h line like this, the compilation has warnings now, and also the programs core dumps. Why is this? 
c-6-65	X	Why function from .so library return random value? I wrote small library on C for calculating function. This is fragment of this library: And bind this library to small python program: But the program sometimes outputs the correct values of the function (image 1), sometimes displays one random number (image 2). Why is this happening? You never initialized result.value, so result.value += element; is adding to an uninitialized variable. 
c-6-66	X	I'm trying to make an array print itself in c I'm trying to make an array that stores 0 to table[0], 1 to table [1] and so forth and then prints it's own value. Right now the code outputs 0's. You have your assignment backwards - you need to assign i to table[i], not the other way round like you currently have: 
c-6-67	X	What is the good solution for a bit masking issue? The Problem I would like to change a bit combination to an other combination without affecting other bits. In this combination some bits must be unset or set Question: what is the best masking solution. Especially for the unset masking.I An example: changing bits[3:0] -> 0b1011 (data) purpose bits[3:0] -> 0b0110 Let me share what I tried: Created an unset mask: 1's complement of 0b1001 --> [1111]0110 (to change the don't cared bits to 1) Created the mask: 0b0110 And with this two masks I could use the bitwise operations. The simple answer is yes, you use 1 mask to clear the bits you want to clear, and another to set the ones you want set. But, occasionally, there are hidden hardware level things you need to be aware of, depending on how the masks and data are used and what they represent. If you just want to set your 4 bits to a value: You are technically clearing some extra bits, but this allows you to use just one generic mask on clearing. You can also clear the exact bits as you do, but this may not be necessary. Often you can just assign the whole value and save a step if you are setting all fields at once in a memory unit size supported by your CPU. (u8/u16/u32/u64/etc.) Now, the "fun" part. If these bits represent actual hardware registers, you may not be able to set entire fields like this as it can cause exciting behavior. Perhaps this is an interrupt enable register. If so, clearing and resetting bits that don't need clearing and setting will cause unintended side effects. Also, registers are often read or write only, where again you need to be careful on how you mask and may even be forced to set or clear individual bits one at a time. In short, yes, you usually need at least 2 values to clear and set bits. The first not and mask can generally be allowed to clear all bits you care about so that you don't need 2 special masks. 
c-6-68	X	How to add string elements successively in C? I want to add string elements successively, for example st[]="morty", and I want to repeat its elements for example seven times. It should be st[]="mortymo". I wrote a function which is at below. (The length function is strlen). In your repeat function, you allocated ptr to hold the repeated string, but you didn't return or assign it to st. You can modify your repeat function as follows: Such that you are storing the result of the repeated string in st after. If I have understood the assignment correctly then you need a function like that one shown in the demonstrative program. The program output is Pay attention to that the function is designed such a way that if the original string is empty then the resulted string is also empty because there is nothing to repeat. As for your function then it has at least a memory leak because the memory allocated in the function is not freed. Also as the original string is not changed then the corresponding parameter should be qualified with the const specifier. And the second parameter should have type size_t because at least the function strlen has the return type size_t. So the function should be declared as it is shown in the demonstrative program. The program below repeats characters from the original string. Comments in the code: OUTPUT: Since you don't intend to modify the contents of st, go ahead and declare it as const. Since you intend to allocate a new string in your function, you should return it to the caller. k is unnecessary for your problem. Call the standard functions. Don't cast the result of malloc, as this can mask a fatal error in C. sizeof(char) is always 1. Check the result of the malloc call for success. Access arrays idiomatically with []. Note that k increments whenever i does, but you are applying a modulo operation of k. However, C has a modulo operator, which you can use directly on i. Make sure the new string is NUL terminated. Your function is declared to return a result, but your implementation fails to do so. C has many functions you can call to do the copying for you rather than the byte by byte loop you have written. There is simplicity in your implementation, but below is an alternative, that also includes additional error checking that is lacking in your solution. (Some may balk at the use of sprintf, but it is being used correctly.) Try it online! 
c-6-69	X	Compiling SystemC Project Undefined Reference I am compiling a SystemC project. I have made all modules into object files including the Top module which includes the sc_main function. I am getting linker errors it looks like. I will provide the makefile, the main module and the errors. Makefile zynq_demo.cc Build errors g++ -o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/bin/zynq_demo -I/home/epi/jfrye_xilinx/Cosimulation/SystemC/Xilinx/include -I/home/epi/jfrye_xilinx/SystemC/systemc-2.3.2/include -L/home/epi/jfrye_xilinx/SystemC/systemc-2.3.2/lib-linux64 -lsystemc /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/zynq_demo.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/safeio.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/remote-port-proto.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/remote-port-sk.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/remote-port-tlm.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/remote-port-tlm-memory-master.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/remote-port-tlm-memory-slave.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/remote-port-tlm-wires.o /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/zynq_demo.o: In function sc_main': zynq_demo.cc:(.text+0x175): undefined reference totrace(sc_core::sc_trace_file*, sc_core::sc_module const&, char const*)' /home/epi/jfrye_xilinx/Cosimulation/Adder_PL/obj/zynq_demo.o: In function Top::Top(sc_core::sc_module_name, char const*, sc_core::sc_time)': zynq_demo.cc:(.text._ZN3TopC2EN7sc_core14sc_module_nameEPKcNS0_7sc_timeE[_ZN3TopC5EN7sc_core14sc_module_nameEPKcNS0_7sc_timeE]+0x8d): undefined reference to xilinx_zynq::xilinx_zynq(sc_core::sc_module_name, char const*)' zynq_demo.cc:(.text._ZN3TopC2EN7sc_core14sc_module_nameEPKcNS0_7sc_timeE[_ZN3TopC5EN7sc_core14sc_module_nameEPKcNS0_7sc_timeE]+0x174): undefined reference to `debugdev::debugdev(sc_core::sc_module_name)' Providing the C++ build process does not serve the answer the question but merely facilitate learning. Thanks. UPDATE: Since this question was improperly marked as a duplicate I will provide an answer here as an edit. I made a very basic syntactical mistake on line 15 of the Makefile. In an attempt to start an appending to the OBJS variable, I added a "+ =" rather than initializing the variable with an "=" then appending later. 
c-6-70	X	Interfacing NCN5130 with a cortex MO processor I need to interface NCN5130 with a EFM32 Zero Gecko 32-bit microcontroller, the industry's most energy-friendly MCU based on the ARMÂ® CortexÂ®-M0+ processor. I am having difficulty finding the .c and .h files for this NCN5130. Any help is appreciated. Thank you. 
c-6-71	X	Can I manage the AUX port in C? I'd see information in input and in output through the AUX port, can I? Like managing bits or frames. I tried to do some system calls (Both Linux and Windows, without results)... I'd do this because I have an AUX button (for Android), and when you press it, it launches the camera. I'd do this too on PC (and to learn how too) Thank you :) --EDIT-- How can I view information in that port? That for headphones 
c-6-72	X	Listen on a UDP socket while also receiving input from stdin with C So I'm trying to make a program in C that can receive packets from another computer via UDP, while also being able to stop listening when someone enters "quit" in the command line. My issue is that both fgets and recvfrom wait until something has happened to move on, so if I'm currently executing fgets my program will ignore incoming messages, and if I'm currently waiting for a message it will ignore input to the terminal. Is there any way I can do both of these at the same time? Relevant Code: If you switch to using low-level IO (read from fd 0 instead of fread from stdin) you can then use the select() function to be notified of when data is ready on either the fd or socket. 
c-6-73	X	Why does accessing integer variables using character pointers in C causes truncation to one byte only? For the following piece of C code: The output is: The binary of 317 is 00000001 00111101 And that for 61 is 00000000 00111101 It seems like the the pointer in this code is accessing only one byte instead of two.But,if I am not wrong,sizes of both char and int pointers are the same. Why does this happen? Size of a char and int pointer might be same, but size of char and int are not same!! So, when you use a pointer to character type to access any other object type, it points to the lowest addressed byte of the object. Next, when you dereference it, all you got the value of that byte. Quoting C11, chapter Â§6.3.2.3 [...] When a pointer to an object is converted to a pointer to a character type, the result points to the lowest addressed byte of the object. Successive increments of the result, up to the size of the object, yield pointers to the remaining bytes of the object. That said, to add more context, regarding Address and indirection operators Â§6.5.3.2 The unary * operator denotes indirection. If the operand points to a function, the result is a function designator; if it points to an object, the result is an lvalue designating the object. [....] and, for an "object" of type char, from chapter Â§6.5.3.4 The sizeof operator yields the size (in bytes) of its operand, which may be an expression or the parenthesized name of a type. The size is determined from the type of the operand. [....] and When sizeof is applied to an operand that has type char, unsigned char, or signed char, (or a qualified version thereof) the result is 1. [...] So, the size of a char type is defined to be 1 (1 byte) in C, and hence, the dereference takes place accordingly. A pointer basically "points" to a memory address, and the type of the pointer (e.g. char* or int*) defines how to interpret the content at this memory address. So the size of the pointer itself is the same, regardless of whether it points to an integer or to a character. But when accessing the content to which the pointer points to (i.e. when dereferencing the pointer), the respective value is read according to the type of the pointer (i.e. one byte for char, and probably 4 bytes for int). ptr will point to the begin of the memory where your object represented by a is stored. Whether the result in your case is 61 or 0 depends on whether your system has a big endian or a little endian architecture. 
c-6-74	X	compile a C program that can run as admin without manual settings okay~ i have searched for this question ,but the ans always solved C++ or C# i want to fopen ("C:\\myfile.txt","w"); it will permission denied . how can i compile a C program can run as admin without any manual setting? i'm using wxDEV-C++ 7.4.2. any ideas ? This is simply not possible without being a hacker and utilizing weaknesses in the OS. The whole point of permission handling is that a program should not be able to decide that it should be run as admin. If you want your program to run as admin without needing to do the right click and select run as administrator you will need to embed a manifest that tells the OS to run your program with administrator credentials. This will still pop up the UAC window asking the user if they want to allow the program to run. You can read about the application manifest format at https://msdn.microsoft.com/en-us/library/aa374191(v=vs.85).aspx 
c-6-75	X	Making a referential struct I'm quite new to structs and I'm trying to make a webshop for an exercise. I have a struct which contains a product, an id, a price and a pointer to the next one. I'm asked to make a create function as given below: so I thought of creating a new struct called data with pointers referring to the product struct: But when I use the create function like I did below I get errors: Edit: I see now that I was quite unclear though. And I do understand how to manually allocate memory and stuff. But the point is that the data variable actually consists of the price and the product. And that is where I'm stuck since I don't know what and what not to allocate for memory. Does anyone know what I'm doing wrong? I hope if I've been clear enough, if not let me know. Thanks in advance :) Start with something like this: To do: Add checks to make sure that data is not NULL. Add code for for a linked-list of products. You may need to add casts, but the compiler will tell/warn you. ... Groetjes en succes! I guess that you really wanted to do the following: 
c-6-76	X	How turn glif path into line segments I need converter any glif (char) into line segments in C language. Freetype2 and svg font have bezier curve. Is possible automatic convert shapes with holes into lines? If this is trouble svg path to line segments. 
c-6-77	X	Writing a list of integers to a file using write() As part of a question where I have to pipe processes together, I have to have one process simply send the sequence of integers 1, 2 .....10000 out of standard output. The problem I have is that I can not get it to work decently in any way shape or form. I have been writing a (very) simple program to try out different methods. When I write to the stdout directly, I get a formless list of 10000 numbers. When I try to write the string of numbers to a file, the text editor freezes when I attempt to open it. The program is as follows: I have no idea why that happens and would very much appreciate some help. Thank you. You may have a permissions issue. By default open() creates a file with permissions that would cause you some issues when viewing the file. Look at the changes I made to the open() call. You will need to delete the file each time. Also using sizeof() is incorrect. You should use the length of the string that you wrote using sprintf(). I prefer to take the output from sprintf(), but I believe strlen() will give you the same number. After changing this I was able to open the file in a text editor. I also added an error check to ensure your file is open. Also close your file. 
c-6-78	X	Unable to free the value of a pointer (which holds a pointer) I have a database which stores pointers as data. I want to withdraw this value from the database and free the memory location to which this value(pointer) points. However the compiler won't allow me to do this with the following error: error: incompatible type for argument 1 of ×’â‚¬Ëœfree×’â‚¬â„¢` since it is sure I'm mistakenly freeing the value of the pointer (but this is exactly what I'm trying to do, since this value is a pointer). Remove value from database function: Add value to database: How can I free the pointer without compiler errors? You pass the pointer itself to the free(), not the value pointed to by the pointer. It really does not matter what does the pointer points to. In this regard, (as long as the pointer was earlier returned by a memory allocator function), the type of the pointee (?), does not matter. At first look, it may seem confusing that you are passing the address of the pointer to the called function (ipv4_ifindex_get_ptr(key, &adjP);), but that is because, the memory allocation happens from the called function. As we know, function arguments are passed using call-by-value in C, in case the called function is responsible for allocating memory and the argument in the caller should be able to reflect the memory, you'll be needing a pointer-to-that type. Provided, a pointer returned by the memory allocator function is stored into the pointer variable, you just need to pass the pointer itself to free() (and get done with it). 
c-6-79	X	Replacing JNI Crashes by Exceptions on Android I have developed an Android application that uses a native C library. I could successfully compile the whole thing using JNI, and everything works smoothly. However, every now and then the native C library crashes (most frequently with a SIGSEGV). This, in turn, causes my application to crash without any meaningful notice for the user. What I would like to achieve is the following: Catch the signal in the native code using a signal handler (sigaction) to prevent random crashes Throw an exception in the C library that Java can catch Catch the exception in Java, generate a meaningful warning message for the user and keep the app running In case that this is of any use for you - the JNI code runs in a separate thread (to be more precise inside an AsyncTask). I already checked http://blog.httrack.com/blog/2013/08/23/catching-posix-signals-on-android/ and https://github.com/xroche/coffeecatch but I cannot get it to compile. Following the suggestions from Best way to throw exceptions in JNI code? and How to catch JNI Crashes as exceptions using Signal handling based mechanism in Java and https://www.developer.com/java/data/exception-handling-in-jni.html I carried out the following steps: In my native code I added the following function that (to my understanding) sets up a signal handler: My function that handles these signals looks like this: My critical JNI function begins by configuring the signal handler: When a SIGILL occurs in my native C code the following happens: 1) On my debug terminal I get the following four messages Sighandler: 4 (that corresponds to SIGILL) Throwing exception Sighandler: 4 Sighandler: 11 2) The app window closes but I do not get the Android message "Unfortunately ... was closed" that usually appears when an app crashes I do not really understand why I get the third and fourth signal message as I would assume that the exception is thrown. In addition, I think that the exception is never really thrown (to Java). I am lost and any help is greatly appreciated. 
c-6-80	X	C - Sometimes Segmentation Fault, Sometimes Bus Error, Sometimes it's Fine Sometimes my program runs fine, sometimes it crashes with a Seg Fault, sometimes it crashes with a Bus Error. This program is massive, so snippets will be hard to share. My question is one of your general experiences. If I'm already pretty confident that I haven't freed something twice or written to something bogus, what else can account for this odd behavior? When it claims to Seg Fault, the routines in which it crashes do not make sense: I am neither writing to nor referencing memory out of bounds at that break point. A note on my general style may be relevant. Throughout the code I am trying to keep allocations minimal, meaning that my code reallocates exactly as much space as needed rather than allocating larger-than-necessary chunks. This is a chess program, so generating a list of moves works by iterating over all pieces on a team and resizing an array for the moves available to each piece. Consider the opening board's moves for white. Iterating left-to-right and bottom-up from square A1 we add 2 moves for the queen's knight, 2 for the king's knight, then 2 moves per pawn times 8 pawns. By the end of this loop, we've called malloc once for the first move available to the queen's knight and realloc nineteen times for all subsequent moves. This seemed sensible to me, but I use this method for all dynamic allocations, including strings. When my program outputs its transposition table, for instance, I cannot predict in advance how long that (massive) string will be, so it gets reallocated for each addition. Is this method contributing to my errors? Am I filling allocated memory with little holes? Would it be better to request more memory than I anticipate and to (re)allocate fewer times? That seems sloppy to me... but I've been wrong before. Thanks to all! -G 
c-6-81	X	USB HID Multitouch Serial Reporting I am creating an Arduino device that connects to a Windows computer, and simulates a touchscreen on the computer. The screen does not belong to the Arduino, but rather the Arduino relays HID touch messages to the Windows 10 computer via USB. The first thing I did was to relay AbsoluteMouse events instead of Digitizer events. This worked fine for me. However, as my device supports multiple touches, I would like to use multi-touch HID messages instead of AbsoluteMouse. As a proof of concept, I am starting with relaying only one finger's data. (I plan to add more fingers after I get this to work). I am taking the SerialReport approach, as it seems to be the easiest to implement: https://docs.microsoft.com/en-us/windows-hardware/design/component-guidelines/sample-report-descriptor--serial-reporting-mode- https://docs.microsoft.com/en-us/windows-hardware/design/component-guidelines/selecting-packet-reporting-modes-in-multitouch-drivers I have found many examples of using AbsoluteMouse, so basically I didn't have to do much more than copy-paste the HID reports. However, with touchscreens it is very hard to come by code samples. (I have only found the synaptic touchpad sample which is not a touchscreen). As such I have tried to implement my own code to report touch messages. But this fail. I think I understand how to interpret the HID descriptor, but this is my first time, so I am not sure... Is there anything wrong with my message structure? This is my implementation of said message: The test code is supposed to draw a diagonal line from top left to bottom right on MSPaint. When I test this with an AbsoluteMouse descriptor/Message everything works. So I presume the problem is in my definition of HID_SerialTouchReport. Some things that have grabbed my attention: Why does "PHYSICAL_MAXIMUM (0)" come while still defining "USAGE (Y)". Is it somehow relevant to Y and not X? And why is it "0"? What is the significance of "Ary" in "INPUT (Cnst, Ary, Abs)" for height and width? I am sort of "fudging" things with: "report.TipSwitchLsb4Bits_InRange_Confidence_Empty2Bits=0xff;". However this seems alright to me because I think all the non-padded bits need to be set to "1" anyway. I am not sure what I should set report.MaximumCount to be. I have tried experimenting with different Count & Id values, but all had no effect. My Arduino does show up as a "composite device" in the device manager so I figure not all is wrong. In the article I linked "Serial Packet" mode is for Legacy Windows 7, and I am using Windows 10. But I figure this should not be a problem. While I did copy the HID descriptor directly from the microsoft site, I am not sure I properly constructed the message structure. (Did I forget a few bits?) Or is it something entirely other which is causing my code to fail? It's hard to say for sure but it looks like the HID report descriptor does not match your HID_SerialTouchReport structure. The following is how I decoded your descriptor: When I set the correct report count for Width and Height and remove the (unnecessary?) pad byte, the unnecessary UNIT and PHYSICAL_MAXIMUM, and redundant GLOBAL items, and change the contact identifier REPORT_COUNT from 2 to 1, it looks better to me: These HID report descriptors are so tricky to handcraft that I'm not surprised that even Microsoft gets it wrong from time to time. If only some programming whiz (i.e way better than me) could come up with some decent software to create them I think the world would be a better place :) Disclosure: I decoded your report descriptor using some free software I wrote called hidrdd. I've been meaning to port it to Python but haven't got around to learning Python yet. BTW, the difference between var and ary can be best understood as the difference between C declarations: The maximumcount thing appears to be the "Contact Count Maximum" usage - i.e. the maximum number of fingers pressed concurrently and is part of a feature report (that can be sent or received from the device). The report descriptor indicates that it can have a value of between 0 fingers and 8 fingers concurrently pressed. 
c-6-82	X	Inserting another linked list at the front of one without changing the head of the list I'm trying to add a linked list in the front of one without changing the head of it. So list2 will fall into the int position and the rest of the list1 will come after the last node of list2. For example The problem is that I can't change the head of the linked list; so L1's head will always be the position at 'a' and print out: I've tried copying the contents over: E.g changing the value of a to 1 and just inserting which results in me losing a node which results in 6 nodes instead of 7. I've also tried circular linked lists but it still requires me to change the value and delete a node. Any help is much appreciated! :) EDIT: the return value is the head of L1. 
c-6-83	X	Z3: finding all possible solutions using C API I am a newcomer in Z3 solver, and using Windows 10, VS2013 command prompt. I am trying to use C and I have tried to solve the below problem using Z3 solver. problem set: what is the possible combination of a, b, c that satisfies a + 2b + 3*c = 7? So I made below C code, based on the C code example of Z3, In result, I got the below result (after building and running 'c_example.exe') ==================================== ==================================== But I want to ask how to revise my c code to get all possible combination of a, b, c? (e.g., a= 1, b = 0, c = 2, a = 0, b = 2, c = 1/ and so on) I would be very appreciated if you can provide an example C code which solves the above problem. Thank you very much for your time. Best, Lee. Referring to this answer: Z3: finding all satisfying models Replace your and with an or, then it should generate the other models. new_constraint_and = Z3_mk_and(ctx, 3, new_constraint); The reason it's stopping is you've asserted: model for: a + 2*b + 3*c = 7 (loop: 0) b -> 0 c -> 0 a -> 7 And(a!=7,b!=0,c!=0) model for: a + 2*b + 3*c = 7 (loop: 1) b -> 2 a -> 0 c -> 1 And(a!=0,b!=2,c!=1) So, e.g., a=1,b=0,c=2 is unsat since b cannot be 0 from the first and. 
c-6-84	X	Using different compiler flags for C and C++ files in a python extension For my python extension, I have both C (from an embedded library) and C++ files and they are compiled and linked together. Only the C++ part interfaces with Python (via SWIG). This works both in windows with VS2015 and gcc under linux. However, with gcc, the C++ files need a different set of compiler flags (eg. -std=c++11, -Wno-reorder) than the C files, to avoid warnings concerning the improper flags in C. Is there a way in setuptools / distutils to change compiler flags for each file seperatly, eg. based on the file extension? I use already a custom build step from https://stackoverflow.com/a/36293331/3032680. Update: The main problem is, that distutils.ccompiler does not check the file extension for C or C++ and is running everything with $CC. Even defining CXXFLAGS does not help. I will stand the warnings, neither with export nor a definition using os.eniviron in the setup.py file. Extension has parameter extra_compile_args " a list of strings to pass to compiler. See also Tweaking compiler/linker flags using Setup file. 
c-6-85	X	C sorting algorithm error - segmentation fault (core dumped) I'm learning sorting algorithms, and C at the same time. When I run this program that uses Bubble Sort, theres an error: segmentation fault (core dumped). What the error is about, and how can I change the code for the program to work? 
c-6-86	X	How to do Switching Between Two Diffrent Swich Statement using C ? I have written a c code for switching between two different switch statement but I looking for more generic solution means without using state variable and while loop. or jump from one switch statement to another switch statement. I want some suggestion or key input from you !!! thank you and please apologize for my poor English !!! 
c-6-87	X	gcc 7.2: warning: left shift count >= width of type Even though I cast every right operand to unsigned long long, the warning persists. Shouldn't uint8_t << uint64_t have an implicit cast like this: (uint64_t) uint8_t << uint64_t? This answer suggests that I can promote either of the operands and the whole expression will cast to unsigned long long, but it might be wrong. This answer suggests that I can promote either of the operands and the whole expression will cast to unsigned long long, but it might be wrong. It is. The standard says: 6.5.7 Bitwise shift operators The integer promotions are performed on each of the operands. The type of the result is that of the promoted left operand. If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined Which means that you need to cast the left operand, casting the right one doesn't change anything here. Shouldn't uint8_t << uint64_t have an implicit cast like this: (uint64_t) uint8_t << uint64_t? TL;DR - No, shift operators are special. Full answer The behaviour you're describing (essentially, matching operand types) is known as the usual arithmetic conversions in the C standard.1 We see that the standard mandates this for many operators (e.g. for additive operators): [6.5.6] If both operands have arithmetic type, the usual arithmetic conversions are performed on them. However, we see no such phrase in the equivalent section for bitwise shift operators. The closest we have is: [6.5.7] The integer promotions are performed on each of the operands. The type of the result is that of the promoted left operand. However, the integer promotions are a different thing - they say (essentially) that any type smaller than [unsigned] int is converted to an [unsigned] int. So the compiler is correct to warn here. (And as I'm sure you can guess, the solution is to perform an explicit cast on the left-hand operand ;) 1. For the purposes of this answer, I'm considering C11 (specifically N1570) canonical. The behaviour is the same at least as far back as C99. The result of the left and right shift operators has the same type as the left operand. So the type of the right operand won't affect the type of the result. You need to cast the left operand to unsigned long long to get the desired result. The answer you linked is misleading. It seems to suggest that you can widen either operand and it will trigger automatic conversion of the other operand to the common (wider) type. That is true for most binary operators in C. However, that is not true for shift operators. The shift operators in C are actually special in that regard. They behave asymmetrically. Changing the type of the right operand to a wider type does not trigger the conversion of the left operand to the type of the right operand, and does not affect the resultant type. The resultant type is always defined by the (possibly promoted) type of the left operand. In your case you specifically have to convert the left operand to unsigned long long type. Even though I cast every right operand to unsigned long long, the warning persists. Shouldn't uint8_t << uint64_t have an implicit cast like this: (uint64_t) uint8_t << uint64_t? No. This answer suggests that I can promote either of the operands and the whole expression will cast to unsigned long long, but it might be wrong. I see why you think the linked answer says that, but it demonstrates using a constant of type unsigned long long as the left operand. That part is correct. To the extent that the answer suggests that the same could have been achieved by using a wider type on the right, it is misleading. The standard specifies: The integer promotions are performed on each of the operands. The type of the result is that of the promoted left operand. If the value of the right operand is negative or is greater than or equal to the width of the promoted left operand, the behavior is undefined. (C2011, 6.5.7/3) Note well that the type of the result expression is determined by the type of the left operand only, and that it is the value of the right operand relative to the (promoted) type of the left operand that can trigger this particular undefinedness provision. You are left-shifting a uint8_t. The integer promotions will be performed on the left operand, resulting in a value of type int. Supposing that your ints are 32 bits wide, the left shifts by 32 or more bits produce undefined behavior, and in some cases you might get additional undefined behavior arising from the fact that it is signed, not unsigned int. Correct this by casting the left operand. For example, (uint64_t) u[7] << 56. 
c-6-88	X	Why ethernet packet is not received on destination interface? I am running the ethersend.c program at http://hacked10bits.blogspot.co.uk/2011/12/sending-raw-ethernet-frames-in-6-easy.html on Ubuntu 17.04 installed on VirtualBox. The VM has two interfaces with MAC addresses as mentioned below: I am sending the frame from enp0s3 to destination 08:00:27:1e:7f:5c, that is, to enp0s8. When I listen on enp0s3 using tcpdump I can see the packet: However, when I listen on enp0s8 using tcpdump (where the packet should reach) I can see no output in tcpdump. Why is the packet not reaching enp0s8? Edit: enp0s3 was a NAT adapter and enp0s8 was a host-only adapter. Possibly that was causing the problem. Now I added another host-only adapter called enp0s9 and now the communication works intermittently. Why does it not work always? 
c-6-89	X	Contiki - How can I measure the time a led connected to a Zolertia REmote is on? In the following code, which is for a Zolertia REmote, I would like to measure for how long the led is on, how long is off and how long it dims. while(1) { } I am guessing that this can be done either with a timer (an rtimer perhaps) or maybe by using the function clock_time, but beside this general idea, I have no clue about how it can be truly done. Can anyone please help me? Thank you in advance! 
c-6-90	X	Why I am not getting any value back from the function? Could you please tell me why I am not getting any value back from the function below? // reverse function supposed to return back a reversed string but it does not in reverse you're assigning a local VLA to your return value, thus hiding the "return local array" warning (bad luck) that you would have got if you had returned the array directly. So you lose the value as soon as the function returns because it goes out of scope, and the memory is reused by the program (undefined behaviour). So you should copy the data so the memory is globally allocated with that.data = strdup(myc); or even better: don't create a VLA but allocate directly, which saves a copy, and you can safely assign myc now: (and free it when not needed anymore) The code is NOT fine, I believe the issue is that you are compiling using g++ as you have the "this" keyword. Compile with GCC and then "this" will not be a keyword but an identifier. C++ is OOP which is why "this" is a keyword. However other comments mention one problem and that is with the "this.data= myc". The array "myc" is declared on the scope not the heap so it has undefined behavior and could point to something completely different when the stack changes. Create the array on the heap instead or in the global scope. 
c-6-91	X	How do I pass and return an integer array in a function I have a function that requires an array as the argument and returns the same array after modifying it. The compiling is giving me an error where I pass the argument and call the function. Why is this so? For starters arrays do not have the assignment operator. Array designators are non-modifiable lvalues. From the C Standard (6.3.2.1 Lvalues, arrays, and function designators) ... A modifiable lvalue is an lvalue that does not have array type, does not have an incomplete type, does not have a const qualified type, and if it is a structure or union, does not have any member (including, recursively, any member or element of all contained aggregates or unions) with a const qualified type. Secondly parameters declared like arrays are adjusted to pointers to their element types. From the C Standard (6.7.6.3 Function declarators (including prototypes)) 7 A declaration of a parameter as "˜"˜array of type'' shall be adjusted to "˜"˜qualified pointer to type'', where the type qualifiers (if any) are those specified within the [ and ] of the array type derivation... For example this function declaration is adjusted to Thirdly functions may not have arrays as the return type. But they may return pointers. From the C Standard (6.9.1 Function definitions) 3 The return type of a function shall be void or a complete object type other than array type. So for example the function solve can be declared like And if the function changes elements of the array in any case it does not make sense to write You can just write or Here is a demonstrative program Its output is To simplify the function declaration you could introduce a typedef name. For example Or even like this 
c-6-92	X	Calculate checksum bitcoin on lost bitcoin private key This is my story: Several years ago I splitted my bitcoin private key to keep it safe in different places. I lost one part and think I lost my mined bitcoin forever. Suddenly (I think you understand why) I decided to start searching for any parts and I found 3 of 6!!!! So for now I have the start(Lets say "5Lagt") and the end("Bh3u2YHU2ntQAFTruAYGhJ1xacPJXr3l6k") so I need to find just 10 alfanumeric chars between. I am pretty new to programming, but have some basics in Python and C from university. I have read that the last symbols in WIF compressed private key is a checksum. So as I understand in pseudo code I need to do following stuff Decode the private key to hex format (this 08+..........+checksum) exclude 08 and the checksum generate the lost part (encode or decode it somehow??) compare the first bytes (what bytes?) with the checksum I partly understand it theoretically but not practically. I would love to give 10% of bitcoins on the wallet if I get it back! Take that quick sketch of checksum checking, hope it'll guide you in a right direction: In general python is too slow for that kind of task as I can tell. 
c-6-93	X	How does the unlink() in linux works? We call unlink() on file on USB disk. Will the place it was using become available for reuse (which conditions must be satisfied)? unlink() deletes a name from the filesystem. If that name was the last link to a file and no processes have the file open, the file is deleted and the space it was using is made available for reuse. If the name was the last link to a file but any processes still have the file open, the file will remain in existence until the last file descriptor referring to it is closed. If the name referred to a symbolic link, the link is removed. If the name referred to a socket, FIFO, or device, the name for it is removed but processes which have the object open may continue to use it. http://man7.org/linux/man-pages/man2/unlink.2.html 
c-6-94	X	Saving matrix to a file (.txt format) in C I'm having some issues trying to write a quick program which purpose is, given a matrix (bidimensional array allocated dinamically), saving it to a file. When checking the resulting output file I'm given at the end of each line of the file the following simbols, in bold and red, "\00". This is my code: Is the issue lying in the way I'm writing on the file? If that's the case, can anybody help me to fix it? The first problem with your code is the range in the for loops. If you have n rows the loop must go from 0 to n-1 (both included). So these lines: shall be The second problem is that you check for f being NULL after you have used f. That is a bad idea and it may/will cause a program crash if f is NULL. Instead do the check as the first thing in the function: The third problem is the way you access the matrix. If your matrix is a 2D array (as you write in the text without posting the code), you can't access it correctly as a char**. The char** can be used when you have an array of char-pointers that points to arrays of chars. But not for a 2D array. Below is an example of how the function could look for a matrix based on a 2D array. Output: Notice: The above function prints to stdout instead of a file but that can be easily changed by using fprintf 
c-6-95	X	Do the x264 encoder and image colorspace types need to be the same? Do the i_csp fields in x264_image_t and x264_param_t have to be the same? What happens if they aren't the same? They don't need to be exactly the same but they should be of the same subsampling (4:2:0/4:2:2/4:4:4). That is because libx264 wouldn't make real colorspace conversions but only change memory layout internally to NV12/NV16/I444. So if you set x264_param_t.i_csp to X264_CSP_I420 you can set x264_image_t.i_csp to any from X264_CSP_I420, X264_CSP_YV12, X264_CSP_NV12, X264_CSP_NV21. And if you set x264_param_t.i_csp to X264_CSP_I444 you can set x264_image_t.i_csp to any from X264_CSP_I444, X264_CSP_YV24 and even X264_CSP_BGR, X264_CSP_BGRA, X264_CSP_RGB but than you will need to correctly set i_colmatrix/b_fullrange yourself or better use X264_CSP_BGR for x264_param_t.i_csp. 
c-6-96	X	How to read numbers from a file and measure the time it takes? I have a text file called 10.text that contains 10 large numbers. I want to read those numbers and store them in an array of size 10. Then i want to print out these nmbers and the time it takes to read the file. Here is my attempt: the problem is that when i run it i get zeros for all thr numbers and a zero for the time. This code is part of a project i am working on and i cannot continue if i dont get it right! Reading 10 numbers can be below the definition of clock. On my BSD system on a virtual machine, I had to loop more than 1000 times to begin to see something. With a loop of 1000000 times (read 10 integers, rewind file) I get (more or less 2.5 micro sec for the operation. If I include the fopen/fclose in the loop, I end at 24 micro sec. I think (but I must acknowledge that I am not sure of it), that a rewind on a small FILE* only resets the file pointer but does not read again any sector from the disk. On the other hand, reading 10 integers (one single disk operation) should be short behind opening and closing a file. So my conclusion is (on my system): file access: more or less 20 micro seconds decoding 10 integer: more of less 2 micro seconds. I have a not too fast disk and the overhead on running a VirtualBox machine, so on high speed computers, times could even be smaller. So on one single iteration it is no surprise that end == start. 
c-6-97	X	Retriving Char array from SQLite Database In callback fnc, my global char array should get the argv[0] But this doesnt work. when I print it I got different things everytime. I also tried sprintf but it did not worked neither. I am executing Select command in Sqlite. I dont think but is it wrong? 
c-6-98	X	How to control yes command in pipe I need to implement pipe for my system programming class. Everything seems clear except the way to control yes commmand. So my question is how does Bash run yes|head command for example? How does it understand that it's 10 lines sended already to stop executing? How does Bash run yes|head? The bash forks two processes where one executes yes one executes head. The bash connects standard output of yes to standard input of head via pipe. The Wikipedia article about yes says quite clearly: By itself, the yes command outputs 'y' or whatever is specified as an argument, followed by a newline repeatedly until stopped by the user or otherwise killed; when piped into a command, it will continue until the pipe breaks (i.e., the program completes its execution). In the case of head it is even simpler: It prints what is read from file or standard input until n newlines are received, then it exits. n is configurable per command line option &ndash; the default is 10. Summarized: yes does not know when to stop printing ys. It simply does until the standard output is closed due to broken pipe. The pipe in turn breaks when head closes standard input due to exit. How does it understand that it's 10 lines sended already to stop executing? head is the only "player" in this "game" which "understands" to stop executing after 10 lines. 
c-6-99	X	Find number of n-character strings matching a regex? I have a length n, an alphabet A, and a regular expression r. Is it possible to efficiently (faster than enumerating all possible strings) find the number of strings, consisting of n characters from A, that match r? If so, how? C is preferred, but any language is fine! 
c-6-100	X	my code not working as needed c programming The input is a sequence of numbers. The code needs to find which subsequence is the same if you read it from the finish to the begining. For example, given the input 1 2 -17 15 1 15 -17 3 4 0 it should print -17 15 1 15 -17 I spent a lot of time on it but can't find where the problem is. Here is the code: 
c-7-1	X	Generate C code using C# I've got this task that requires me to generate some basic C code using a software written in C#. The generated code should be based on some input files I provide to my software, we'll call it btOS for easy of communication. So when starting btOS I give it as input file1, config.xml. When I hit run it should output a file.c that contains some basic structures and/or methods based on what the input files contain. Is there any elegant way to do this ? Maybe some already generated templates or methods or stuff like that ? The only way I could think of handling this was creating specific strings in C# and outputting them to a C file. L.E.: It seems that somehow my question was not clear enough. I assume the fault of including C++ in the title, I have remove it but I don't see how that is relevant because the question was very simple. Anyway, to make it more clear. All i need to do is read some config files (their content is irrelevant, all they contain are some variables that will be used to generate some function templates, which will mostly impact the name of the function) - and write an output file with the extension .C (as in Main.c) that will contain those templates I generated. So, again, the question: Are there any "elegant" and maybe somehow "professional" ways to do this other than using custom generated strings within the code that I will write to the file ? Right now the only way I see fit to do this without too much hassle is using some template text files with a naming convention defined by me(e.g. function_variableName{...}) where I just change the [variableName] text with whatever I need to to be there and "Abracadabra" I have a function that I will write to the file. Now as Soonts suggested please try and be helpful, read multiple times if you don't clearly understand or maybe even don't bother - let somebody who is interested in this topic, tries to help or gain some new knowledge before flagging it. Double Cheers. 
c-7-2	X	Why variable y is 0, is not 2? I'm wondering the output is 0. Why the output is not 2? Because of how C deals with the logical operators: Since x==1 returns "false", there is no need to check the RHS in order to conclude that the end result of the operator && is false. Hence, RHS is not evaluated and y stays at its previous value. 
c-7-3	X	operations on character pointers I came across a code as in below Output How does the calculation of a+6[a]-2[a] happens in printf? Why giving just 6[a] in printf doesn't work? Well, a statement like can be re-written as which is simply, use the value of a[6] (type, int) as the index in the first case use the value of a[2] (type int) as the RHS. The result, is a pointer, is passed to printf() as an argument to %s conversion specification. 
c-7-4	X	What is the difference between kmeans and cvKMeans2 algorithms in OpenCV? I want to find dominant N colors on the picture. For this purpose I decided to use KMeans algorithm. My project written on C, that is way I used cvKMeans2 algorithm. But it gives me very strange results. Then I decided to try kmeans algorithm on OpenCV C++. It gives me more accurate results. So, where is my fault? Could someone explain it to me? 1. I used this image for test. 2. Implementation on C. 3. Implementation on C++. 4. Result of code on C. 5. Result of code on C++. I found my mistake. It is related to IplImage's widthStep field. As I read here widthStep gets padded up to a multiple of 4 for performance reasons. If widthStep is equal to 30 it will padded up to 32. With pointers 
c-7-5	X	unable to input string into a struct I have a header file structs.h as follows: In the file structs.c, The scanf statement gives an error since it says %s is of type char* but argument is of type char**. Removing the & gives a segmentation fault. How else would I write this? It is a array within an array of struct variables but it should be able to take input... 
c-7-6	X	foo(x++, y) :: Does the x always incremented after to be send as argument? Is the increment in case of an expression involving x++ always made after the variable to be copy to a function ? The call : The function : Is that a undefined behavior for all compilers? Let's see the official descriptions here to get a deeper understanding. For the postfix operator, quoting C11, chapter Â§6.5.2.3 The result of the postfix ++ operator is the value of the operand. As a side effect, the value of the operand object is incremented (that is, the value 1 of the appropriate type is added to it). [...] The value computation of the result is sequenced before the side effect of updating the stored value of the operand. and, regarding the function call, chapter Â§6.5.2.3 There is a sequence point after the evaluations of the function designator and the actual arguments but before the actual call. Every evaluation in the calling function (including other function calls) that is not otherwise specifically sequenced before or after the execution of the body of the called function is indeterminately sequenced with respect to the execution of the called function. So, as per above description, there's nothing problematic in your code as shown above. The old value of x is passed and then, the value is increased. However, please note the last part of the second quote, you need to maintain the sanity of the code. For example, you need to make sure, there's no change in value without having a sequence point in between. Something like will be a problem as, you're trying to changing the same variable (x) more than once. Whenever post increment is used, the original value of the variable will be sent to the function. And after that, the value of x will be incremented. Consider the following program Its output is Thus as it is seen the value of the expression x++ is the value of the operand before incrementing However the side effect was applied before the function gets the control The program is well-formed and there is no undefined behavior. 
c-7-7	X	PMPI and otf2: linking C code in CPP program I have a CPP program which is generated by wrap.py. wrap.py is used to produce wrapper for MPI program. It redirects any normal MPI call to PMPI call for intercepting purposes in order to do e.g. performance analysis. Pls download the generated code here. I use otf2 to trace MPI program. To explain the code: I am going to compile the code into an .so file. So when it's imported the constructor would be called; when the .so gets detached, the destructor is called. According to the official doc of otf2here, I compile the program: If you extend the upper command line, you would get: The intercepted MPI program is from here. Do interception: So it looks like mixing C and CPP causes problem. The linker couldn't correctly generate symbols for C function that is OTF2_Archive_Open and OTF2_Archive_Close. I add 2 declarations to tell linker those are C functions(Download the modified programhere): But the problem above stays. And advice? UPDATE1: OTF2 provides .a file, not .so file. Weird is, I don't see any libotf2.a in the output of ldd. But if you try out the standard example of otf2 mpi writer from their website, it works out. And the output of ldd for the standard example of otf2 mpi writer doesn't contain libotf2.a either. You could find the example here. The order of linking matters. You must have your own library in front of the libraries you link, e.g. The linker resolves unknown symbols from left to right. For more details see this answer. That will probably still not work if otf2.a isn't built with -fPIC. I would recommend to configure otf2 with --enable-shared and use the .so instead. 
c-7-8	X	verify Eight Queens solution via sums of diagonal elements in a 2D array I'm working on an assignment concerning the Eight Queen Puzzle in chess. The exercise is as follows: Given an arrangement of the 8 queens on the chessboard, write a C program which will evaluate the arrangement and inform the user if this arrangement is a solution of the puzzle. Now, because there are 92 possible solutions, it's not practical to compare the user input with a solution list, so I'm solving the problem like this: I consider an 8x8 array. Representing an empty square with 0 and a square with a queen with 1, all I need to check in order for the solution to be correct is: The sum of each row, column and possible diagonal line must not exceed 1. And here is my problem: I've covered the rows and columns, but I can' t find a method to add the diagonals. For clarification: Sums Every diagonal line represents the squares that must be summed every time. The result of each line will be stored in an array. This happens for both directions. Code so far: Any help would be greatly appreciated. EDIT: Solved it. Many thanks to @Yunnosch for pointing me to the right direction! FYI about the final solution: You can find it here, with comments for clarification: Solution EDIT-2: You can find the whole code here, also commented. @Yunnosch: It might not be elegant or even efficient, but it works well. Quick question: Was this method the one you had in mind or is this an innovation? :P Since this is a assignment, I follow the compromise for handling homework questions. I.e. I will not provide a solution. Instead here is a first hint at how you should approach the problem. Hint1: There are 15 diagonals of each direction. Their length is from 1 to 8. All lengths exist twice, except the length 8. Hint2: You have an array with counts for columns and one array with counts for rows, both are of size 8, because there are 8 rows and 8 columns. You are lacking an array with counts for / diagonals and an array with counts for \ diagonals. Introduce them and fill them with counts, similarily to how you fill the row and column arrays. Counting has to keep the varying lengths of diagonals in mind. Let me know how much that helps. I might hint the next step. (policy is described here: How do I ask and answer homework questions? ) 
c-7-9	X	Compatability of cross-built COFF files and MSVS I have cross-built a win32 static library using i686-w64-mingw32-gccon a linux box. I have inspected the resulting .lib file with nm on the linux side and see: I have also inspected the .lib file with dumpbin /symbols on the windows side and see: A colleague is attempting to build an exe using the lib using MSVS2008 and is seeing errors like: Do the nm and dumpbin outputs look sensible. If the symbols are there in the static library why would the link errors be occuring. Could it be that somehow the cross-built lib is not binary compatible with MSVS 2008? 
c-7-10	X	Contiki - How can I trigger an event? I am trying to write a program in Contiki for Zolertia REmote, that will read a value from a sensor, and depending on this value and whether the user button on the remote is pushed for an extended duration, a led will be turned on, dimmed or will remain off. Part of the code that I have so far is this: while(1) { } My problem is when the ldr value goes from, let's say, below 6600 to above 16500, and therefore the led should have been dimming no matter what. In fact, however, it does not dim unless I press the User Button, even for a second. Then as long as the ldr value remains above 16500 everything works well - while I am pressing the button the led is full on and when I release it the led dims. When however the ldr changes and goes from above 16500 to [6600,16500), and the led should be off while the button is not pressed, it actually dims until I press the User Button again even for a second. As I see it, the problem is that even though the ldr value changes, it is not been read unless I press the user button. And I think that this has to do with the use of the command PROCESS_YIELD();, which tells the program to wait until an event happens. If I remove this command though, the led does not turn on or dim at all. So, my guess is that I have to trigger an event so that the ldr value is read. Does anyone has an idea about how to do this? Thank you in advance! 
c-7-11	X	Optimising this small function which will run a huge number of times in C Here is the worst case scenario for each part of the function: The while loop runs 53,402 times when size is equal to 9. This means that each call of find_square() calls find_square() itself 53,402 times, until row == size, which in this case is 9. So the total number of calls to find_square() is thus (53,402) ^ 10 = 188 quattuordecillion. This isn't even the entirety of the final function, but if it's this slow already, I'm wanting to fix that first. Obviously this is a ludicrous amount of calls, but I can't really see a way around it. I'm open to any ideas, and any help here would be great, thank you! Your comment about creating "word squares"? implies you want to print or otherwise report 9â¨‰9 squares in which each row and column is a word in grouped_dict. In this case, you ought to at least return from find_square when the characters filled so far contain a partial row or column that is impossible to complete with a word. One approach is to add code in find_square after the call to fill_row that checks the columns. After fill_row, each column is at least partially filled. For each column, check that there is at least one word in grouped_dict that matches the column so far. If there is not, return from find_square without attempting to fill any more. This will speed up your program tremendously, but other optimizations may be possible. Things you should consider include: Sort grouped_dict so that search for matches in it is fast. Index grouped_dict in sophisticated ways to search for matches even faster. Alternately filling rows and columns to attempt to increase conflicts that may reveal impossible-to-complete states sooner. Use the partial matches found by examining grouped_dict to limit the possibilities attempted when filling the next row or column. Focus on infrequent letters in grouped_dict as key points. 
c-7-12	X	How do I add the basic Cygwin compiler directories to the path on Windows 10 to enable Netbeans IDE to find the tools collection? I'm trying to learn C as new to programming. I have a Windows 10 machine and have installed NetBeans 8.2 C/C++ version. I am trying to add the correct Cygwin compiler directory to the right path so everything will run smoothly. I have completed everything below but point 4 in bold. The instructions below are from :https://netbeans.org/community/releases/80/cpp-setup-instructions.html#compilers_windows which teaches you how to install the basic Cygwin GNU gcc and g++ compilers, make and the gdb debugger.I won't be needing anything more than that to learn basic C. My Environmental Variables look like: enter image description here When I click paths on Environmental Variables I have a whole list of paths and I don't know how to 'Add the path to the cygwin-directory\bin directory to the Path variable' in point 4 below. Please, how do I do this and to which path or am I adding a whole new path? Any help is most appreciated. My list of path looks like: enter image description here ' To install the GNU gcc and g++ compilers, make, and gdb debugger from cygwin.com: 1.Refer to the Cygwin User's Guide for complete information about installing and using Cygwin. 2.Download the Cygwin setup-x86.exe (32-bit installation) or setup-x86_64.exe (64-bit installation) program by clicking Install Cygwin in the left navigation bar, or by clicking the direct setup-x86.exe or setup-x86_64.exe link. Note: The bitness of Windows OS, Java, and NetBeans IDE installed on your machine must match. For example, if you are running the 64-bit version of Windows operating system, 64-bit Java and 64-bit Cygwin (that is setup-x86_64.exe) are required to be installed. See issue 234221 for details. Run the downloaded Cygwin installer. Accept the defaults until you reach the Select Your Internet Connection page. Select the option on this page that is best for you. Click Next. On the Choose Download Site page, choose a download site you think might be relatively close to you. Click Next. On the Select Packages page you select the packages to download. Click the + next to Devel to expand the development tools category. You may want to resize the window so you can see more of it at one time. Select each package you want to download by clicking the Skip label next to it, which reveals the version number of the package to download. At a minimum, select "¢gcc-core: C compiler "¢gcc-g++: C++ compiler "¢gdb: The GNU Debugger "¢make: the GNU version of the 'make' utility Packages that are required by the packages you select are automatically selected as well. 7.Click Next to connect to the download site and download the packages you selected, and click Finish when the installation is complete. Now add the Cygwin compiler directory to your path to enable NetBeans IDE to find the tools collection: 1.Open the Control Panel: - On Windows XP select Start > Settings > Control Panel and double-click System. - On Windows 7, type var in the Start menu's search box to quickly find a link to Edit the system environment variables. 2.Select the Advanced tab and click Environment Variables. 3.In the System Variables panel of the Environment Variables dialog, select the Path variable and click Edit. **4.**Add the path to the cygwin-directory\bin directory to the Path variable, and click OK. By default, cygwin-directory is C:\cygwin (for 32 bit Cygwin distribution) or C:\cygwin64 (for 64 bit Cygwin distribution). Directory names must be separated with a semicolon. Your edited path should look something like %SystemRoot%\system32;%SystemRoot%;C:\Program Files\QuickTime\QTSystem;C:\cygwin\bin 5.Click OK in the Environment Variables dialog and the System Properties dialog. 6.See Verifying the Installation to verify that the tools were installed correctly for the NetBeans IDE.' 
c-7-13	X	is it mandatory that in assigning we should mention array size while writing program In let us C it is mentioned that "while assigning an array we have to commit to the size of the array at the time of writing the programs". But in the code below I'm giving the size at the time of execution still it's working so which is correct ? code : First of all, I think you meant declaration instead of assignment. That said, this is called variable length array or VLA. It's a C99 onwards addition. Quoting C11, chapter Â§6.7.6.2/P4 If the size is an integer constant expression and the element type has a known constant size, the array type is not a variable length array type; otherwise, the array type is a variable length array type. That's a variable-length array and is perfectly valid in C (since the C99 standard). You should probably update your books. Here's a list of good ones. 
c-7-14	X	CPLEX MIP current node LP relaxation During a MIP optimization with CPLEX C APIs is it possible to retrieve the linear relaxation (dual variables, reduced costs, etc ...) of the current node (i.e. every n nodes)? I've registered a callback function (CPXsetsolvecallbackfunc) in order to be notified each time a new node is available. In the callback I use CPXgetcallbackinfo to retrieve the node information and CPXgetcallbacknodelp to retrieve the linear relaxation but unfortunately the procedure CPXsolution returns that no solution exists and the MIP optimization exits. Here is a sample code realized starting from an IBM example where environment and problem are assumed to be properly initialized. where the usersolve procedure is I found out the problem, the callback is called before the subproblem has been solved so CPXsolution returns that no solution exists. 
c-7-15	X	__STDC_LIB_EXT1__ availability in gcc and clang Since a quick Google search did not find anything, I will try to ask here (since many people involved in gcc/clang hang around here) - What is the status of __STDC_LIB_EXT1__ in gcc/clang? We are developing a cross platform applicataion and I wanted to use some of the safe bounds checking functions from <stdio.h> (which by miracle are available on Visual Studio 2017), but could not compile the code with Xcode 9.2. I assumed maybe the clang version Xcode uses is outdated, but gcc 6.3.0 on Ubuntu behaves the same. I am trying to use tmpnam_s with the following sample: But the compilation fails with the macro not being defined: Am I doing something wrong or this function set is simply poorly supported? 
c-7-16	X	Weird mode and results in fopen I just get a C file at work needed for a part of my today's task, actually I just need to execute that and get the file it output. I just compiled that file, (currently on windows btw), and execute it. The programm stopped and I got a pop up saying that my programm has ceased functioning. No error output on the command line. I found an executable of this code on my company network and it has produced the same effect. I slightly modified the code with some printf to see what was the issue and in fact it was that line : I solved the previous error by switching 'wr' to 'w' as I don't understand why it should need r to write it. Also, if it's important in this case, Tbt.txt didn't exist after the first executable success. My questions are : Why previous developpers used 'wr' ? Is the 'r' really needed ? Is someone able to tell me why my program was shutting down when reaching that line ? Thanks for your time. EDIT : As some would like to see an extract of the code : SOME MORE EDIT : Actually, the question is not really about how to make that work but more, what can be the use of wr in fopen and why it should not work. Given some of the comment, it seems that this is caused by the invalid parameter handler because "wr" is not a valid mode and it's specific to Microsoft C. 
c-7-17	X	using array to insert all objects that are already declared I have school assignment which consists in creating a program that does math operation with Matrix. In this program, I have to create Matrix using typedef. This typedef should hold 4 x 4 Matrix with double type. So for this here is my implementation: In main, I need to define several mat objects this way: And this user should type its input for example: add_mat mat_a,mat_b,mat_c, this operation will add 2 Matrix mat_a and mat_b into mat_c. So after that this user input and split it with Comma\Tab, I want to write simple function that gets a char which is the required mat and returns the relevant mat: For example: For this, I insert all my mat objects into array: But I get this error for all my mat objects: uninitialized local variable 'MAT_A' used Any suggestions on how to fix it or maybe find another way to read the input? The way you write it, mats would contain copies of MAT_A etc. This is not what you want. Your getmatrix function also returns a copy of a matrix. You don't really need it (and copying structs that contain pointers is dangerous; but see below). You probably want to return the matrix by pointer, and also accept matrix parameters in all functions by pointer. I suggest getting rid of MAT_A and friends as you don't really need them. Use only mats[i]. You need to specify the number of elements in mats: Don't forget to initialise mats properly. If for some ungodly reason you are required to define 10 or so different variables of type mat, you need to change mats to be an array of pointers (yes the common theme here is pointers, you have to use them everywhere). Change getmatrix accordingly. Another thing to consider: if your matrix dimension is fixed, you are using pointers with no reason. Declaring double data[4][4] will simplify things considerably. Same thing about name, consider making it a fixed-size character array. 
c-7-18	X	Why is MPI's remote execution so slow, if it works at all I'm implementing a simple ping-like application using MPI messages. The idea is simply to measure the time it takes to send and receive an MPI message of increasing size. This is the full code, which is as minimal as it gets since it's just pinging between nodes: Compiled with mpicc -o mping mping.c, when run locally using time mpirun -n 2 mping I get: If, however, I use a virtual machine (hosted in the main machine) to hold one of the two nodes using the --hostfile option then the result is something like this: Aside from the 16 byte message taking way too long, the execution takes 2 minutes for no apparent reason!! Of course, I mean to run this locally using way more attempts and bigger MPI messages, but if I increase them it either takes too long or starts complaining about an unexisting firewall and stops working altogether. I've also tried running this remotely for real, but it's even worse than using the VM. I'm using OpenMPI 2.1.1 in an antergos host system (with a decent laptop i7 cpu) and a manjaro VM connected to the network via a bridged adapter. Both use the ip addresses provided by the dhcp on the network and can ping (real ping command) each other in sub-millisecond latencies. So why would this be happening? 
c-7-19	X	MIPS Cross Compilation on Travis How would one setup a .travis.yml to do cross compilation for MIPS target ? For PowerPC, this is trivial: addons: apt: packages: - gcc-powerpc-linux-gnu Since I have access to the package directly. For MIPS I cannot find a compiler for it in Ubuntu Trusty: Software Packages in "trusty", Subsection devel It seems I would need an updated Ubuntu image (not possible on Travis): GNU C compiler for the mips architecture The alternate solution would be to use some pre-build MIPS compiler, eg: Sourcery CodeBench Lite 2013.11-36 for MIPS GNU/Linux But documentation rather explicitely says not to cache those things: Caching Dependencies and Directories#Things not to cache Large files that are quick to install but slow to download do not benefit from caching, as they take as long to download from the cache as from the original source: Android SDKs Debian packages JDK packages Compiled binaries Docker images How would you install a mips cross compiler on the default Ubuntu Travis image ? 
c-7-20	X	Visual Studio 2015 execution I just started using Visual Studio 2015 and I can't run my C code. I wrote this basic hello world code: When i execute it, cmd window opens, displays "hello world" for fraction of a second and the window closes. 
c-7-21	X	How to go From Assembler instruction to C code I have an assignment where, among other things, I need to look in an .asm file to find a certain instruction and "reverse engineer" (find out) what part of the C code causes it to be executed on an assembler level. (Example below the text) What would be the fastest (easiest) way to do this. Or better to say, what other commands / instructions / labels that are around it in the .asm file should/could I pay attention to, that would guide me to the right C code? I have next to zero experience with assembler code and it is tough to figure out what exact lines of C code cause a particular instruction to happen. The architecture, if that makes any difference, is TriCore. Example: I managed to figure out what C code causes an insert in the asm file, by following where the variables are used that led me to the following C code: I'm supposed to patch an existing Instruction Set Test, that doesn't test all the used instructions. So I need to look at the asm file of one level of code and find out what C code causes the instruction to happen so I can use it in my patch. Your goal is insane, and the first half of your question is backwards / only loosely related to your real problem. There might be a way to convince your compiler to use each specific instruction you want it to, but it will be specific to your compiler version, options, and all the surrounding code including potentially constants in header files. If you want to test all the instructions in an ISA, hoping that you can convince a C compiler to generate them somehow is totally the wrong approach. You want your test to keep testing the same thing in the future, so you should . If you need specific asm, write in asm. This is the same question asked a couple weeks ago for ARM: How to force IAR to use desired Cortex-M0+ instructions (optimization will be disabled for this func.) except that you say you're going to build with optimization enabled (which may make it easier to get a wider range of instruction generated: some may only be used as peephole optimizations over the simple normal code-gen). Also, starting with asm and reversing that into equivalent C is no guarantee that the compiler will choose that instruction when compiling, so the question title is only loosely related to your real problem. If you do still want to hand-hold a compiler into generating specific asm, to create brittle source code that may only do what you want with very specific compiler / version / options, the first step would be to think "when would this instruction be part of an optimized way of doing something?". Usually this line of thinking is more useful for optimizing by tweaking the source to compile more efficiently. First you think about an efficient asm implementation of function you're writing. Then you write your C or C++ source the same way, i.e. using the same temporaries you hope the compiler will use. For an example, see What is the efficient way to count set bits at a position or lower? where I was able to hand-hold gcc into using a more efficient sequence of instructions, like clang was doing for my first attempt. Sometimes this can work well; for your purposes it's simple when the instruction-set only has one really good way to do something. e.g. ld.bu looks like a byte-load with zero extension (u for unsigned) into a full register. unsigned foo(unsigned char*p) {return *p;} should compile to that, and you can use a noinline attribute to stop it from optimizing away. But insert, if that's inserting a zero-bit into a bitfield, could just as easily have been an and with ~1 (0xFE), assuming TriCore has and-immediate. If insert has a non-immediate form, that is probably the most efficient option for single-bit bitfield = rand() (or any value that's still not a compile-time constant after optimization with constant-propagation). For TriCores' packed arithmetic (SIMD) instructions, you're going to need the compiler to auto-vectorize, or use an intrinsic. There might well be some instructions in the ISA that your compiler will never emit. Although I think you're only trying to test the instructions that the compiler does emit in other parts of your code? You say "all the used instructions", not "all the instructions", so that at least guarantees that the task is possible. A non-inline function with an arg is an excellent way to force code-gen for run-time variables. Those of use who look at compiler-generated asm frequently write small functions that take args and return a value (or store to a global or volatile) to force the compile to generate code for something without discarding the result, and without constant-propagation turning the whole function into return 42;, i.e. a mov-immediate / ret. See How to remove "noise" from GCC/clang assembly output? for more about that, and also Matt Godbolt's CppCon2017 talk: "What Has My Compiler Done for Me Lately? Unbolting the Compiler's Lid"? for some great beginner intro to reading compiler-generated asm, and what kind of stuff modern optimizing compilers do for small functions. Assigning to a volatile and then reading that variable would be another way to defeat constant-propagation even for a test that needs to run without external inputs, if that's easier than using noinline functions. (Compilers have re-load from a volatile for every separate time it's read in the C source, i.e. they have to assume it can be asynchronously modified.) [...] It's optimized The compiler output you show definitely doesn't look optimized. It looks like load / set a bit / store, then load / clear a bit / store, which should have optimized down to just load / clear the bit / store. Unless those asm blocks weren't really contiguous, and you're showing code from two different blocks pasted together. Also, InsertStruct.SomeMember = 0x0u; is an incomplete description: it obviously depends on the struct definition; I assume you used an int SomeMember :1; single-bit bitfield member? According to this TriCore ISA ref manual I found, insert copies a range of bits from one register to another, at a specified insert position, and comes in register and immediate source form. Replacing a whole byte could just be a store instead of a read/modify/write. So the key here is the struct definition, not just the statement that compiled to the instruction. The architecture is TriCore (if that makes any difference). Of course. Assembler code is always architecture specific. ... what part of the C code causes it to be executed on an assembler level. When using a highly optimizing compiler you nearly have no chance: The Tasking compiler for TriCore for example sometimes even generates one fragment of assembly code (stored only once in memory!) for two different lines of C code in two different C files! However the code in your example is not optimized (unless the structure you named InsertStruct is volatile). In this case you could compile your code with debugging information switched on and extract the debugging information: From an ELF format file you can use tools like addr2line (freeware from the GNU compiler suite) to check which line of C code corresponds to an instruction at a certain address. (Note: The addr2line tool is architecture independent as long as both architectures have same width (32-bit), the same endianness and both use the ELF file format; you could use addr2line for ARM to get the information from a TriCore file.) If you really have to understand a fragment of assembler code I myself typically do the following: I start a text editor and paste in the assembler code: Then I replace each instruction by the pseudo-code equivalent: In the next step I try to simplify this code: Then: Then: Then: In the end I try to replace jump instructions: ... becomes: ... and finally (maybe): In the end you have C code in the text editor. Unfortunately this takes much time - but I don't know any faster method. 
c-7-22	X	How do pointers interact with pre-defined structures? So I have a structure like this: In a few functions I used this as an argument, for example: I call these in a function, where I define s as being from state: However when compiling I still get the error message: expected declaration specifiers or "˜...' before "˜&' token, but I don't understand why. I've defined the variable s as being part of the structure state and then by using the &s, this gives it the address to follow right? void new_state(&s, is wrong. In C it should read You must distinguish between a function definition and a function call. When defining a function with parameters, you must provide the data type of each parameter, unless it is the variable argument list ... . When calling the function, however, you should pass a constant or a variable of a compatible type. this in your code is the function definition. struct state is a data type. s is just a variable of the type struct state. Also &s (in the scope in which s is defined) refers to the address of s in the memory. what you really wanna do here is make a function that takes a pointer to any variable of type struct state. the correct syntax for that would be now, in the function call, (that's when you use a function in the main or elsewhere). you kinda put something you have already made to use. the declaration is general(to be used for any inputs). the call, however is specific (or particular). here you specify the parameters(or arguments) that you are passing to the function. this is what the call would look like 
c-7-23	X	Animating GTK+ Windows I am trying to create a smoothly animated window in GTK+ Here is the code I came up with: This works and when I applied it to the notification window the effect was like on this gif: But the window is not smooth as I would like it to be, you can notice that at the end the window almost jumps 50px from left to right. 
c-7-24	X	How to give many inputs in c program I am using many printf and scanf to get the inputs from the user , but I am not getting the output. If this is my problem statement how to write the code then . 
c-7-25	X	define switch statement in micro (c programming) and return the value I would like to return a value from a define macro (value should be register state), ex now i want to use switch statement like option 1 : or option 2 : i am using MPLAB and xc16 compiler. above both option not showing any error/warning. but i am not sure about it. Is it correct to way to define ? any one help me.. 
c-7-26	X	type conversion in embedded C x is a variable, and its type is int, and I need to convert the type of x from int to long or float. But a simple typecasting (long) x; is not working. Only the following line is working: ((long) &(x)); (I copy it from another parts of the code.) I know what (long) x; means, but... Could you please describe in detail what *((long*) &(x)); mean exactly? How does it work? Why it is working and why the simple version not? It is an embedded code, and I am new in embedded system developing. int x; is a declaration of a variable; you reserve storage space for it. Your other lines are not declarations. They are expressions. These expressions can only be used in another expression or in the assignment to another variable, for example: The type of variables is fixed when they are declared. Type conversion doesn't affect that. So doesn't change the type of x. It converts the value of x to a long. So, if y is of type long. converts the value of x to a value of type long, and stores the result of that conversion in y. To understand what *((long*) &(x)) does .... Firstly &(x) computes the address of x (the () are unnecessary). That address is of type int *, since x is of type int. The (long *) then converts that pointer to be a pointer to long (i.e. a long *) The * around ((long*) &(x)) then dereferences that long *. This effectively tells the compiler to act as if that memory location which contains an int actually contains a long. If you then use that, for example; or then the result in both cases is formally undefined behaviour. The C standard does not describe any constraints on what happens. The first treats the memory occupied by x as if it contains a long. The problem is that a long may occupy more memory than an int. A typical symptom in such a case is a garbage value stored in y. The second writes the value 42L to the memory occupied by x, treating that memory AS IF it contains a long. If long is larger than an int, two common results are program crashes (the program modifying memory past x and the operating system therefore terminating the program) or data poisoning (an unrelated variable in your program, that happens to be located in memory just after x, has its value changed). If it "seems to work" (however you define "work") with your testing then you are getting lucky - for example, long and int happen to be the same size and same representation WITH YOUR PARTICULAR COMPILER. However, the behaviour is still undefined, anything can actually happen - such as code working with one compiler, but crashing when built with another. Compile with warnings enabled. The reason for failure must be that you're using an obsolete compiler that supports implicit function declarations that were forbidden by C99, i.e. 18 years ago , and C thinks that it is int GetSum() and since the function actually returns float, your code just has undefined behaviour. Your function would "work" with the latter, i.e. if you changed the return type to int. Please just stop writing code that uses conventions that belong to Dark Middle Ages. If you use gcc, compile with -std=c99 or -std=c11 or similar, and with -pedantic-errors. The year is 2017 (for a few more days). 
c-7-27	X	What is the easiest way to do inter process communication between c# and c? I have one C# application and C application and I want the C# application to send 2 integers to the other 1(c) What's the easiest way to do this? (It doesn't have to be the most elegant one) My C# application is hosted on a Ubuntu operating system. Any help would be greatly appreciated. If the purpose is only to send the parameters or values to a C function, I can suggest that you consider using P/Invoke. Then you talk about Ubuntu operating system, which suggests you either would be using Mono or .NET Core; consider reading this Native Interoperability &mdash; in case of Mono, this would help. COM and other interops would require that you write C programs in a way that they can expose themselves out to the .NET framework. If writing the libraries as exposed, is not possible (such as precompiled libraries), then you would be able to have this done using named pipes. They are the pipes, which are used for communication within processes. 
c-7-28	X	C: Undefined reference to function I have a problem with my program: I have a main.c where I call the function show() This function is declared in a seperate file called "show.c" and it uses the header "show.h". When I try to build it, I get the error: Undefined reference to 'show'. The show function should print the Array h[] from 0-10 and the array d[] from 0-20. When I import show.c then I was able to compile it with no problem. I can not find my problem: Main.c:` show.h: show.c: Show is defined as: show is called as: You are maybe compiling as C++ and the compiler/linker cannot find a version of show that has 3 parameters. Were you are compiling as C, this would be accepted because a function without a parameter specification (i.e. the ()) means it can accept any number of parameters of any type and so the linker will find show (though maybe that is not allowed anymore in the latest standard). Note: in your makefile you must of course include show.o in the list of objects to link. 
c-7-29	X	printf function limited size? I'm just starting to try and learn C and am very confused by what's happening. I'm following the tutorial here https://www.programiz.com/c-programming/examples/print-sentence and I took the code: and get no output in command line. There aren't any errors when I build, and if I replace the text in quotes with something 16 characters and longer, or shorter than 8 characters I get an output with the text like I'd expect. I can also get the output "Hello World" by using the code: Why is this? Did I do something wrong when setting up my compiler/ide (I'm using MinGW and Code::Blocks)? edit: Adding \n to the printf function does nothing. I get an empty line in the output as before (same as if I were to just build and run a program which just returns 0). From Jean's comment I have the code as: Trying to troubleshoot, I tried having the inside variously be "Hello World!\n", "Hello World\n" "HelloWorld\n" and "helloworld/n", and none give any output. Additionally, on suggestion of a friend I messaged, I tried printf("Hello World\n", "%s", "Hello World\n") and I just get one Hello world and then a new line. Second edit: Adding fflush(stdout) or setbuf(stdout, NULL) as in the duplicate question solves the problem. Just for the sake of my learning, would someone mind explaining why it is that adding the newline doesn't help but flushing the buffer explicitly does? And why it is that example pieces of code I was following didn't have to do that? 
c-7-30	X	How to update a GTK GUI on file creation? I am trying to create a simple GTK application. I would like to write things on the GUI as soon as certain files are created by different processes. I guess I cannot do a while(true) in the parent process, because that would freeze the GUI. Instead, I am trying to fork, check if files are present and manipulate the GUI, but it does not seem to work, my clumsy code is the following: When you want to perform I/O operations, give a loot to gio, which is integrated to GLib. So you should use a GFileMonitor which uses inotify to be notified of filesystem changes. The "Description" section GFileMonitor presents the functions to use. 
c-7-31	X	I am trying to implement malloc() with sbrk() in linux following code makes segmentation fault.. and I cannot figure out where is wrong. I have never used doubly linked list so It is hard to configure. Please give me a hint!! finding metadata here.. malloc() implemented with sbrk() And this is how structure looks like. please don't say "just use malloc" since I want to implement malloc with handling memory space manually. and this editor keeps telling me to describe more about my code and I have nothing to explain.. most of them are just linking each other.. :< 
c-7-32	X	Linked list of strings has the same strings for each node I'm trying to make a linked list, where each node stores a string, but I'm having a problem where each node ends up storing the same exact string in every single node. At the end of main(), I print out the word stored in each node, and it always just repeats the last string entered for the entire list. I don't have any clue what is happening, because if I make it a string of characters it works perfectly fine, where each character is stored in the correct node. char * aword is not initialized and located. It should be: (100 is just a number, size of array. You can replace it with any number what you want) There are many problems in the code. Some of them are already mentioned. The code will be something like this. Explanation at the end of the code. You wanted to store some string (nul terminated char array) and then you wanted to add them in the list. Also from your example implementation you were trying to add it in the list at the tail. To sum up - scanf demands a pointer to some memory where it can store inputted data. But yours were uninitialized. secondly the way you were copying strings, it was just a shallow copy (you were making it point to some already existing memory). You need copy it either using strdup or malloc - memcpy or malloc-strcpy. In case POSIX strdup() is not available, you can use what Jonathan Leffler mentioned. Here you can see that we have freed the allocated memory using freeList() function. When you are done working with the memory you allocated- free the memory. Don't cast the return value of malloc. Also check whether the malloc is successful checking it's return value. You have used the list head as the global variable. It is not needed here. You have not allocated memory for the string. As a result aword would contain garbage value and passing this to scanf is a undefined behavior. Lets say aword has 0x7fffe4e0cdf0 and your scanf stores the string at the address 0x7fffe4e0cdf0 and pass this address to the addword function and your structure member word is also updated with the same value. The next scanf also stores the new value in the same memory pointed by aword and passes to the function. As a result word in all the linked lists are pointing to the same memory location. The ideal solution is to allocate memory for each string being scanned and pass it to the '`addword' function. 
c-7-33	X	copy_to_user returns an error in a char device read function I've implemented a char device for my kernel module and implemented a read function for it. The read function calls copy_to_user to return data to the caller. I've originally implemented the read function in a blocking manner (with wait_event_interruptible) but the problem reproduces even when I implement read in a non-blocking manner. My code is running on a MIPS procesor. The user space program opens the char device and reads into a buffer allocated on the stack. What I've found is that occasionally copy_to_user will fail to copy any bytes. Moreover, even if I replace copy_to_user with a call to memcpy (only for the purposes of checking... I know this isn't the right thing to do), and print out the destination buffer immediately afterwards, I see that memcpy has failed to copy any bytes. I'm not really sure how to further debug this - how can I determine why memory is not being copied? Is it possible that the process context is wrong? EDIT: Here's some pseudo-code outlining what the code currently looks like: User mode (runs repeatedly): Kernel mode: 
c-7-34	X	using MAKEFILE to copy files before compilation and delete them after I am trying to copy files befoe compilation (I have two source files with same name so I copy the files to a files with a different name) and delete them at the end of the MAKEFILE. I am trying to do the folliwng but probably there is mismatch in the execution order. How can I do it correctly? Thanks The purpose of $(shell) is to produce an output which Make reads. The recipe lines should not have this construct at all. So, all the $(shell ...) stuff in your attempt gets evaluated when the Makefile is read, but before any actual target is executed. 
c-7-35	X	New Data Overwriting Old Data In Pointer For homework for my C class, we've been asked to read data from stdin, put the words into a binary tree along with their positions (line and offset), modify the binary tree, and print the binary tree in a file based on positions. I'm halfway there (I hope), but I've run into the problem where my new data keeps overwriting my old data - specifically, the new Insert struct keeps overwriting my old Insert struct when I put it into the Insert array, meaning that I have several identical entries in my array. I'm not quite sure how to stop it from doing that or even why it's happening, though I think it might be because I'm writing the data into the same pointer without clearing it. Fair warning: we've mostly been left to fend for ourselves this semester, and my code looks so wrong that I'm surprised it works. The input was requested, so here's one of the ten files we were given. input.1 output.out RL 1 RL 7 R they R Center END That's a slight uptick from a year ago, when a CNN poll found that 53 percent said they were dreading having to carry on such a conversation, with 43 percent saying they looked forward to such a dialogue. "There's a sense of dread. It suggests some indigestion may be part of Thanksgiving dinner if politics come up," said Lee Miringoff, director of the Marist Institute for Public Opinion. "People you work with and go out with socially tend to share political views, but when you get to family, if politics is in the recipe, it may not taste very well." That trepidation about broaching politics isn't coming from just one political party, but almost two-thirds of Democrats said they are, while only about half of Republicans were. (Fifty-six percent of independents also said so.) President Trump is, unsurprisingly, a polarizing topic of potential dinner conversation. Forty-seven percent of people in the poll said they find it "stressful and frustrating" when talking with people who have a different opinion about the president than they do. (A Pew Research Center poll from June found 59 percent saying the same thing.) I was able to fix the above issue by moving my initialization of ic1, rwc1, rpc1, pos, and tpos into the loops in which they were used. 
c-7-36	X	openssl X509 reading signature Hash algorithm using C unix I'm trying to convert my root certificate to Pem files using C unix. In my current code I'm using the openssl function to make the digest as SHA1, but now I want to modify the code to support sha256 and sha512. From the current openssl.h I found that X509->signature gives Signature Algorithm what my root certificate is holding. But is there a way to find what is the Signature Hash Algorithm that my root certificate is holding? Found a similar one in C#: How to retrieve the Signature hash algorithm friendly name using c# cryptography? But I need a similar one in C. Also is there any ppt which talks about the unix openssl.h in detail? 
c-7-37	X	Why mount after setns I read such following C codes in iproute2-4.14.1/lib/namespace.c After calling setns(), the process shall join the new network namespace. But why mount("", "/", "none", MS_SLAVE | MS_REC, NULL)), especially the source in mount() is an empty string? 
c-7-38	X	Looking for ways to improve this code or if there is anything I shouldn't do Trying to learn C so I made this short program to try and mimic classes. Is there anything with this code that I should not do with C or any ways that I can improve it at all like best practices or anything? structs.h main.c It's just a matter of preference, but when I've used structs for things like that I've always done typedef to give myself a new data type. It makes writing the code easier, and helps me better comprehend what it is happening. So instead of declaring a function like You would do it like this It simulates the process of working with classes much better, IMO. Also, whoever told you to use void main() is horribly out of touch. Don't ever use that unless you're writing a kernel or a microcontroller or something. It's int main(void) for pretty much every programming environment. Make sure you return 0; if your program has finished running successfully. Well there are few points:- In case the structure is not too big you can do it in this way. It is perfectly correct. malloc is computationally more costlier than copying variables on return from a function. In case the structure size is bigger then you should malloc it. That way you won't end up using a huge amount of memory in stack. You should try to think of making the code reusable. You can keep a function which will print a structure. Something like (the same reason you kept a seperate function for getting an instance of struct). That way any time you try to print it - you would just call it. This saves you from repeating the same code of printing multiple times. Another thing is, you can typedef the struct player to something more readable. In this case player is itself readable but in some cases typedef helps. But well that's debatable. Also the main() should be (the OS expects an integer back) You can move the declaration of the function printPlayer or new_player to the header itself. That makes much more sense. One another thing is using suitable names. structs.h is not a good name for a header file. In this project there won't be any struct header file? Keep the name Player.h or Game.h. That is much more readable. Use header guards 
c-7-39	X	When using GET request WiFi module limiting data length up to 79 Characters I am working with WK122x(GT1216) WifFi module.I am using this device as station(client) to send data to server.I have gone through the Data sheet several times but its not mentioned any data length limit for GET request.I can send a data of 79 characters(including URL).The excess data that means 80th character will be missing.Here are the details... Terminal v1.9b is the console used for UART communication AT commands are follows URL-https://api.thingspeak.com/update?api_key=NGPJUTPEO96T6JUV&field1= Data-1216000000000000000000000000003,3,2017-11-24,04:38:21 
c-7-40	X	C: scanf input single character and validation I've encountered a problem when validating a single-char scanf input in C and I cannot find an existing solution that works... The scenario is: a method is taking a single letter 'char' type input and then validating this input, if the criteria is not met, then pops an error message and re-enter, otherwise return this character value. my code is: however, i got the infinite loop of error message no matter what input I type in. I read some other posts and guess it's the problem that %c specifier does no automatically get rid of the newline when I hit enter, and so far I have tried: putting a white space before/after %c like: write a separate method or include in this GetStuff method to clean the newline like: Can anyone help me with this problem please? Thank you in advance. Inside loop you are taking input in dtChar but your loop condition checks variable c which is not updated in the loop, that is causing infinite loop Also you would change your condition to If you want user to enter either 'A' or 'P' You are using while (c != 'A' || c != 'P') as your loop conditional, but this will always return true. What you meant to use is the && "and" operator, instead of the || "or" operator. Also, call getchar() after your scanf statements, to capture the newline. This should work the way you want it to. try this, I hope this works, some time because of not given proper bracket it is stuck in the loop. Please consider the following snippet: Note the points: condition while(c != 'A' || c != 'P') will be always true (just because one character cannot be 'A' and 'P' at the same time), so use while(c != 'A' && c != 'P') instead No need for two scanf if you use do..while loop After entering a char with scanf it is recommended to clean all characters from buffer, e.g. with while(getchar()!='\n'); (this will clean all input including incorrect and redundant characters) use toupper to avoid making 4 comparison (actually single c=toupper(c) inside loop can minimize your while as while(c != 'A' && c != 'P') ) UPDATE: To add message "Invalid input" and adding some other useful improvement subjected befor... new code is as: Note: function will return 'A' or 'P' in uppercase, so if this is not needed change the code as in example before update (use two toupper and do not change c after scanf). Also you can use tolower as an option (of course with comparing to 'a' and 'p'). Another possible solution. As others mentioned the condition was to be done with &&. Anyway the big problem is how to remove what's left on the console input line. Since the console works by lines, we remove everything up to the next '\n'. If the user already left something on the input line before calling GetStuff(), it would be useful to add a call to SkipRestOfTheLine() before the while loop. In general I suggest to start with a while(1) loop, before making it nicer (such as in the cleanBuffer() you posted). 
c-7-41	X	Sending signal in C from child to Parents. "User defined signal 1: 30" I'm beginner to signal and practicing by writing a function kill_parent_process that will be used as a signal handler. This func will asks parents to exit() (either sending SIGKILL or other methods). The way I did is let child sending a signal to parents and the handler exit(). But I do feel this is where the problem because when I exit, I might just exit in child process. However, it looks like the handler never been called. Here is my code I receive a message User defined signal 1: 30 when I ran the program and kill_parent_process never been called. What is the problem with this code? the following proposed code: performs the desired functionality cleanly compiles documents why most of the header files are being included does not invoke any signal handlers, etc, rather uses the default action properly checks for and handles errors and now the proposed code: the (typical) output of the proposed code is: 
c-7-42	X	C programming - Buffer overflow Buffer overflow ? I cant seem to fix it. The print statement asks the user to if he wants to enter an apartment no ? and then it calls the yes/no function. but before i even say y or n . it automatically gives me an error , which should show if the user enters anything other than Y or N This is the address function: YES function: This is how im supposed to test it : 
c-7-43	X	what is difference between the interrupt rx and tx? I am so confuse on this question. what is difference between the interrupt rx and tx ? (Configure the RXS and TXC interrupt for SERCOM 3 UART. And how can I discern between the RXS and TXC interrupts in the interrupt handler.) 
c-7-44	X	how to use perf_event_open to counting tx-abort event and get virtual address of instruaction lead to TSX abort I want to use perf_event_open to counting tx-abort event. But after reading man page of perf_event_open, I still confused with this because of too few examples code. And I final target is to get virtual address of instruction lead to TSX abort. How can I achieve this by perf_event_open? 
c-7-45	X	No function name in stack trace, GDB, but appears in LLDB I'm currently trying to test out a Vector class implementation, and am trying to use GDB to see where the error happens. When I compile with the following gcc -ggdb Vector.c TestVector.c, and subsequently run it in GDB, I get the following as output (after crashing and attempting to print the stack trace): which is not particularly helpful in figuring out where the error is due to the backtrace only showing the absolute memory locations of my function's execution. When I perform the same task in LLDB, the output is a bit clearer: My question is, why does gdb not give me accurate information and lldb does (despite me not changing compilation settings between the two debugging sessions), and how can I fix this? If it's of any help, I am using Mac OS X, High Sierra as my operating system. The gdb you're using doesn't recognize the shared libraries being loaded into the process by dyld. Notice at the top of your gdb output it says "unhandled dyld version (15)". It looks like the gdb you're using needs to be updated to work correctly on macOS. I'm not sure how actively maintained the macOS port of gdb is these days. 
c-7-46	X	how to add space in string using scanf? in this example i tried to concatenate "same" with "is the best player in his team" using scanf("%[^\n]s",string) to allow scaf to detect the spaces but it didn't work in this code as i have scanf before it and the compiler considers the "enter" after the first entry of the first scanf and it doesn't even go throw this line scanf("%[^\n]s",string) i can't find alternative to make the compiler consider the spaces in this case. 
c-7-47	X	how to see memory distribution section of a c program that have text, data , .bss etc? I have written this code and want to see its memory allocation, so can someone tell me how to see it? some said to use size command but I don't know how? you can also get an idea from this link SIZE command in UNIX 
c-7-48	X	C Threaded Sockets - tcp with TLS, Can't get ip/ether packet headers thanks for reading this question. Have been working for a while on C sockets - specifically c threaded tcp sockets with tls. Using the Openssl API. I have been facing an issue for some time now where I can get the source IP and Port - e.g printf("Connection: %s:%d\n",inet_ntoa(d->addr.sin_addr), ntohs(d->addr.sin_port));. The problem is that I need all the data - Ethernet and IP where I can look at source and destination IP's, MAC addresses, Protocol, TTL and the list goes on. Tried multiple examples from the web like this from Binary tides But I keep on getting "Junk Data". Basically the IP's and other fields are strange and random like. SSL_read() puts the data into a buffer (the https request basically) so at that point I'm already too late? I tried reading the socket before attempting SSL_Accept(), so reading from an unencrypted socket, I still get the junk data. Basically any help with: 1) c examples 2) do I need to use BIO? 3) what process do I follow to capture that data in my main I just loop e.g here is a snippet of the threaded function: In this code here: the sock_raw is a hint. You need something called a "raw socket", which gives you access to the underlying packets at some level (depending on your platform, that might include the ethernet packet level, or just IP). References: Linux, Windows. 
c-7-49	X	Comparing strings inside 2d array, inside a function I'm building a student database as an assignment from my university in C, and came across a problem I can't seem to fix. Here is my code: Basically, what I'm trying to do is to compare 2 strings in the function by their index (2d array of strings), and if the the return value is > 0 then do the swap function which replaces their names. However, I get an exception warning. Can you give me a hint what is the problem? I got the basic idea of pointers, although I'd rather not use it here, because after I swap the names I need to swap their grades, last names, etc. Most probably "strcmp" is culprit/misused. If both names completely fills char array assigned for name, strcmp would try to access memory range beyond array. Consider using strncmp instead. May not be cause of your problem but first if condition seems redundant. Intialization of j in second loop should be I+1 and end condition j < counter - 1. This appears as selection sort used on strings. 
c-7-50	X	C - A line of code is changing the address of a struct I have a major issue that is happening to my code, that I've been trying to fix for hours now. The code below is the one relevant to the issue that I am having... The method addBucket: The declared structs that are used: ...And the method expandHashspace(); : Here's also the initHashmap() method: What I am doing here is initialising the hashmap, adding three buckets, expanding the hashmap, then adding three more buckets. Here's the order in more simple terms: However, on that last part, as soon as I run addBucket once, I get a SIGSEGV error. Checking through debugging, I realised something that was off. Do you see the variables *prevadd and *aftadd? I added them while debugging to see what was happening to the address of hashmap[0]. Here is a picture of my results: As you can see there, the address of hashmap[0] varied wildly during those two char * lines. Specifically, the change of address happens on the char *value line. Please go easy on me, as I've just started learning C 3 months ago, and I am still incredibly unaccustomed to memory allocation. If the error is obvious, please point it out, and if I have some problem with the way that I am allocating memory, or freeing it, I am more than happy to hear them (my code has a pretty major heisenbug that I cannot fix for the life of me, but that's beside the point). Thank you in advance... Sorry for all the recent questions. update : forgot to add varString();... This is not an answer, but it needed more formatting than would fit in a comment: Note that you are writing "Value No. 1" Note the value of aftadd is 0x756c6156 In memory, assuming a little-endian machine, the layout of the number in aftadd would be: In ASCII these would be: Hint hint. 
c-7-51	X	Write in a file from other .c files I am trying to write in a text file from other .c files. Specifically i have split my code into a .c which contains the main and another one which contains the functions. I tried to define the pointer as extern in order to be able to use it from all the files within the project but does not work. The last option would be to open and close the file doing append on it, but i dont think is programatically correct. Can anyone please explain to me how this can work? 
c-7-52	X	Can someone help me with "unknown type name 'treeElement'" error? Can someone help me how to solve this problem? When you are declaring your struct, your typedef is not already effective (the typedef is usable at the end of the structure declaration (ie : after } treeElement;) You need to use the complet notation to reference your structure so struct tree_element* parent If you absolutly want to use your define inside your structure declaration, you can set your typedef before like that : But it's seems a bit weird to typedef a struct that's not yet declare at my opinion. 
c-7-53	X	C Language: void *x = &x compiles and runs without declaring x beforehand The mistake in this snippet, defining a void pointer and initializing it by dereferencing taking the address of the void pointer variable, caused wrong values to be returned, but it compiles and runs without any errors. bbb and aaa were not declared beforehand. Is there like a switch that can expose this type error? It's a logical error, not a syntactic error, and consequently the compiler cannot expose it. bbb is a variable that contains a pointer to void. This variable has an address. You can get this address by &bbb. This address (a void ** value) implicitly converts to void*, and can be assigned to the variable bbb. Address of the variable is known during the compile time. So there is no problem to assign it the pointer with the address of itself. Two cases: global or static pointer - the actual address is calculated during the linking. local variables - the address is known as the offset from the stack pointer. 
c-7-54	X	C - Parent receiving message from children while alarm function running For an uni assignment I need to be able to send a message to the parent from a child through a message queue that contains some info about his made tasks. The problem about this is that I call an alarm function in the parent since he needs to do specific tasks every 5 seconds, and when I want the parent to receive this messages it only happens if I put the receiving side of the code inside the alarm function. Since the children send messages frequently, what I would like to do is to be able to let the parent read the messages from his child anytime and not every 5 seconds like it is now. Here is a simplification of my code of the parent: Maybe my issue is that I don't place the function in the right position, I tried putting it behind the timer but it doesn't even come to that point. I could appreciate if you could point me to the right direction. Thanks for you help. 
c-7-55	X	Issues with a random number generator upon pushing a button and telling if number is even or odd The issue is that I push the button, the console gives me a number. I push the button again, and THEN it tells me if its even or odd, and immediately spits out yet another random number. I want the random number and even/odd to happen within the same time of pressing the button. 
c-7-56	X	C program wrong output for reading a file Hello guys so I write this program which purpose is to open a file and read how many characters has in it and print the line with the most and the least characters.I've made it into two functions one for the biggest line and one for the smallest.The "biggest line" function works just fine but I get wrong output for the smallest one.Here is the code: move this check to when you go to the next line your placement is wrong because currCount is at the first iteration is still 1 or 0 depending on what is first character on the line, so it is the smallest and this is for every new line you read I fixed my program thank you.:) 
c-7-57	X	Initialize char pointer array in C Is it safe to initialize some of the elements in the array like this? Can I rely on the other elements of the array being properly initialized? Yes, it's quite safe. See N1570 section 6.7.9. Paragraph 19, discussing initializer lists: ... all subobjects that are not initialized explicitly shall be initialized implicitly the same as objects that have static storage duration. Paragraph 10: If an object that has automatic storage duration is not initialized explicitly, its value is indeterminate. If an object that has static or thread storage duration is not initialized explicitly, then: if it has pointer type, it is initialized to a null pointer; if it has arithmetic type, it is initialized to (positive or unsigned) zero; " if it is an aggregate, every member is initialized (recursively) according to these rules, and any padding is initialized to zero bits; if it is a union, the first named member is initialized (recursively) according to these rules, and any padding is initialized to zero bits; The initialization shown in the question is safe, and the elements not specifically initialized with a designated initializer are (in this context) initialized to NULL. In general, the uninitialized elements are initialized the same as a static variable of the same type would be initialized, which is some variation on the theme of 'zero'. The relevant section of the C standard (ISO/IEC 9899:2011) is Â§6.7.9 Initialization, and specifically Â¶19: The initialization shall occur in initializer list order, each initializer provided for a particular subobject overriding any previously listed initializer for the same subobject;151) all subobjects that are not initialized explicitly shall be initialized implicitly the same as objects that have static storage duration. 151) Any initializer for the subobject which is overridden and so not used to initialize that subobject might not be evaluated at all. There was a rejoinder in the comments: What if I want other elements to set to same default value? Unfortunately, you have to choose NULL (in this case; zero in the general case) as the default value. You don't have any other alternatives in standard C (unlike sophisticated modern languages such as, oh, I dunno " let's think of Fortran 66). There's no way in standard C to repeat an initializer other than by writing it many times. GCC has an extension that allows you to do that (which is documented in the GCC manual in a section with the title Designated Initializers that documents both standard behaviour and non-standard behaviour). Using the GNU extension, you could write: Note that it is OK to specify two initializers for a cell (such as 10, 24, 45 " the other is via the repeated initializer); the last one mentioned wins. Also note the space separating the ... from the 1 (and 45); that is crucial because of the 'maximal munch rule' which means that [1...45] would be tokenized as [, 1., ., .45, ], where the floating point numbers are not what's wanted. 
c-7-58	X	Why don't I get the output that I expect? I'm finding the approximate square root of the number 25. I expect b to be around 5 after the loop, can someone explain why it's showing 0? When I write this code in Python it works correctly: Yeah, abs() doesn't do what you think it does (hint: it operates on integers). Instead, use fabsf() from math.h: https://ideone.com/4HphCr 
c-7-59	X	Programming printing after looping I am trying to make hexagons tiles. I have the shape but I am doing something wrong while printing them. Here is my code and what I tried: I need them horizontal and not vertical. I know what I did wrong, which is printing the hex-shape "m,n+1" below the hex-shape "m,n", instead of on its right side. But I don't know how to fix it. Thanks! Fixed! Update: Results now are More explanation and art of what I need: Also I am curious how to add numbers ("Let's say 1 as a second digit in all of the hexagon grids") Example: Current art: Expecting: ( Overall as the final result ) Thanks! You want to make rows of two (probably more) hex shapes each. For that you must not print newlines after a sub-row of one hex shape. Instead print the sub-rows of all (two) hex shapes, wiht appropriate whitespace to align them. For that, going away from tabs is probably helpful. So basically you should change from to Note 1, I did not fine-tune the whitespace between the hex shapes in one row. You will have to do that yourself. So the output below might not satisfy you directly, but it should be visible that the core problem is solved. Note 2, even this way you will get a square grid of hex-shapes. If you actually want a hex-grid of hex-shapes, you have to change the position of the | in every second hex row. Output: I played around, attempting to make something of a hex grid, according to Note2. I also provide an attempt at ascii art of your pixel picture, in the second hex-grid version, based on Jonathan Lefflers proposal to turn the hexes by 90 degrees. Output vertical hexes: Output horizontal hexes: I am sure that you will not like the parts on the edges and the position of the digits, but that is for yourself to tune to your taste. Maybe try this: The results would be: Simple programme I just created with this thing using C: 
c-7-60	X	Trying to receive a vector with MPI_Recv I'm implementing the Chan and Dehne sorting algorithm using MPI and the CGM realistic parallel model. So far each process receives N/p numbers from the original vector, each process then order their numbers sequentially using quick sort, each process then creates a sample from it's local vector (the sample has size p), each process then sends their sample over to P0; P0 should receive all samples in a bigger vector of size p*p so it can accommodate data from all processors. This is where I'm stuck, it seems to be working but for some reason after P0 receives all the data it exits with Signal: Segmentation fault (11). Thank you. Here is the relevant part of the code: What is funny is that every process reachs the command printf("P%d got here\n", my_rank); and therefor prints to the terminal. Also global_sample_receiver does contain the data it is supposed to contain at the end, but the program still finished with a segmentation fault. Here is the output: Edit: I found the problem, turns out local_sample also needed a malloc. The issue is you overwrite global_sample_receiver (which is a pointer) with local_sample (which is an other pointer) on rank zero. If you want to set the first comm_sz elements of global_sample_receiver with the first comm_sz elements from local_sample, then you have to copy the data (e.g. not the pointer) manually. That being said, the natural MPI way of doing this is via MPI_Gather(). Here is what step 3 would look like : 
c-7-61	X	C - Fast way of checking if array contains string I have a large dictionary array of words. I'm wanting to check if a word is in this array, however it takes too long. I'm currently just iterating through the array. Are there any more efficient ways to do this? I'm needing it to be as fast as possible. 
c-7-62	X	Porting CRC lookup tables between platforms? I have a C++ compile-at-run-time script written for a VxWorks derived PowerPC platform, which calculates checksums for files on the embedded OS. It uses a pair of lookup tables to compute the checksum (see my code below). I'm trying to port this script to use on Windows, because the platform dictates that I must hardcode a new script for every single file I wish to calculate the checksum for, and with what I'm trying to do that will take many hours. I need to change a bunch of files on the platform file system and provide their checksums to the system or it will refuse to load them. I've got the code running, having changed all of the UI/output and file input stuff to work with Windows, but I'm getting the wrong checksum. On my test file, I should be getting 404f and I'm actually getting 5fb4. Having done some research I believe I may need to convert or regenerate the lookup tables, but I have no idea how to go about this and would be grateful for any input. Thanks! This code is labeled as CCITT Standard CRC16 non-reflected CRC using the polynomial 0x1021. Would produced that type of table. Try this: 
c-7-63	X	Alternate way of "Accessing array of structure using pointer" This code accepts an array of struct Student and then displays it, using a pointer. The code uses not so common approach. The common approach is shown in single-line comments within this code itself. However, there seems some problem with this approach because the correct value of "percentage" is not displayed. Can anyone tell me what is the cause of this problem? You are not using the pointers correctly. The best way is to index it by [i] and access struct members via . operator. That way you will will get a cleaner code. Going inside the structure, the way you do it, is not recommended because of padding holes. OUTPUT: You are trying to pass the individual component address of the struct object to scanf. The way you did it is wrong. It won't be right because (Excerpt from C A reference manual Book). holes or padding may appear between any two consecutive components or after the last component in the layout of a structure if necessary to allow proper alignment of components in memory. The bit patterns appearing in such holes are unpredictable and may differ from structure to structure or over time within a single structure. Being said that it is always cleaner, readable and much more easier to read in struct the way we normally do (&p[i].grade..). Keep simple things simple. 
c-7-64	X	How Fork Works? How many Time the word "PROCESS" will be printed when executing the following program ? Option (A) : 8 Option (B) : 4 Option (C) : 6 Option (D) : 7 
c-7-65	X	while loop keep printing and repeating, what is wrong with my getch? i am trying to make the loop stop after typing y/n, but it just returning printing and asking for a char. what is wrong here? code: Note your while condition; One of the two conditions is always true, therefore the while condition is always true. Change it to: 
c-7-66	X	C Macro for type safe callbacks I'm trying to create a very simple event system in c. My interface looks like this: Everything works correctly, but in order to register an event listener, I need to provide a function pointer that takes a void *. Is there any way, using a macro or otherwise, to allow users of EventEmitters to provide a typed callback? Something like: instead of: I ended up solving this by simply casting to and from void (*cb)(void *) as needed in wrapper functions: If you know what your types are, you can use C11 generic selection to find out the type of the argument, and provide it as an enum value. Then from the enum value you will know how you'd need to cast the function again: If it is _INT_CB it must be recast as INT_CALLBACK before calling; _VOIDP_CB as VOIDP_CALLBACK and so on. See this answer on Software Engineering SE. Given your API: if you modify it to define the subscription macro on that API instead of putting off on the client code, like this: Then subscribers can call it with the type that they have in hand. As with all API macros, make sure you document the expected arguements completely, so consumers know what to provide and what to expect. 
c-7-67	X	While loop doesn't seem to finish after EOF I am trying to write a while-loop that terminates at the end of file. I have used while(!feof(stdin)) in the code bellow, but the loop doesn't seem to terminate even if EOF is reached (I am reading from file). When executed in terminal, the program does all that is supposed to, but then keeps going for several seconds before "program.exe stopped working" window opens. I have googled for almost several hours, tried different versions (variations for while (1) followed by int check = scanf("%d", &from); if (check == EOF) break;) and nothing worked for me. The possibly problematic part of code: The entire code: Does anyone have any tip for what might be wrong? I will really appreciate any help! 
c-7-68	X	Bus error in C program in linux I have a problem after running: Bus error (core dumped) It seems, that something happens before function find_date. Maybe, it does not enter the function... What should I do? I read about wrong pointers but can not find it. My task: I have to print file names with today's date of access and print the name and size after every second interraption. 
c-7-69	X	How to divide string in two parts? I need to write a program where the user inputs 3 items and their relative prices, on three separates strings. Then I have to check whether the last item and price are the same as one of the other two. If that is the case I have to print the item and the total price (the price of that item multiplied by 2). The problem is that apparently when I call a function to divide the name of the item from the price (I would ideally save them as two separate strings, and then convert the float string of the price to a normal float variable), but it doesn't work. This is the function } I made sure it is properly defined in the main and before the main. The input string should be something like this: Apple 4.99\n Therefore I first search for a letter, if I find one I start to save the word in the string product, then as soon as I find a space I exit from "inword" and I search for a digit (the price doesn't have â‚¬ Â£ or $). Ideally the outcome of the two strings would be: product = Apple price = 4.99 But if I try to print the price it's empty... Can you help me? The side question is how do I search for Â£ $ â‚¬ in the string? If I write 'â‚¬' it gives me an error sign... Thank you for your help You could do like this 
c-7-70	X	Calling Saucy (an executable C program) from R I have an executable C program (./saucy) that I get from running the makefile of Saucy( source code here) Running ./saucy graphfile Gets me as output (0 2)(3 4) (0 1)(2 4) How can I call this from an R script? I'm scratching my head even after reading this post. I've only got the saucy command line wrapped into an R function of the same name and have only tested it on macOS and Ubuntu but it tracks with your sample output. By "wrapped" I mean it does not call a binary, it's a C function called from R. It wasn't to difficult to strip away the cmdline cruft. The authors did a pretty decent job. First example file: Second example file: shatter is wrapped as well. I can also make it take real graph structures at some point vs read serialized ones, but I don't know how popular this library/tools is so can't commit to a time-frame. 
c-7-71	X	How can I generate a dynamic array in a function and reverse it in another function and return it back to screen? I know a bit of C++ but I need to do this in C which seems to be far more complicated. As you can probably see from my code I try to have a function that generates an array and then a different function that will reverse the order of this array. The function to generate the array is just a dummy function that will be replaced by input from a different programming language (which will be done through a function that will map the values to something recognisable in C). The reverse function, even tough I know how to do it I do not know how to pass the values from my generateArray back to main and into the reverseArray (it needs to happen in this orderI cannot call reverseArray from within the generateArray). Also, I get an error in my code right now which says: reverse.c: In function "˜main': reverse.c:19:5: warning: assignment makes pointer from integer without a cast [-Wint-conversion] p = generateArray(m); reverse.c: In function "˜generateArray': reverse.c:42:8: warning: return makes integer from pointer without a cast [-Wint-conversion] return a; you are returning a which is pointer from generateArray function but catching with int variable. Modify the function prototype as and function definition as And malloc() need not to typecast. **The reverse function,I do not know how to pass the values from my generateArray back to main and into the reverseArray ?? you can pass the same p to reverseArray() and do modification and return back. I hope it clears your doubt. 
c-7-72	X	Why C is creating an empty text file I'm trying to write my results to a text file so I can use MATLAB for plotting and etc. and the code has no problem (i tried with just showing the results with fprint), but now that i'm trying to save the resutls to a text file, C creates the file names amiir.txt, but it is empty. Even if I use relative directories, the text file will be empty. I tried to create a text file and then run the code again, but it is empty! whats wrong? I am using mac os and i tried both XCode and CodeLight! thanks. P.S.: Here is a piece of my code: anf after some calculations: You need to use fprintf instead of printf. The printf function just prints to the console, not to a file. Note that your compiler should be complaining (perhaps with a warning?) about your use of printf. The printf function does not take a function pointer as the first argument. You may need to turn up your compiler warning level to see this warning. 
c-7-73	X	Using the function strcmp to compare a pointer and a string Here is my code: For some reason when I input 'end', it doesn't print "END". What is the problem here that is causing the loop condition to fail? strcmp(input, "end\0") == 0 Should return 0 when the input pointer is equal to "end\0"? I've also tried strcmp(input, "end") == 0 and this doesn't work either. How can I fix this? fgets includes the newline. Use strcmp(input, "end\n") From the documentation: Reads characters from stream and stores them as a C string into str until (num-1) characters have been read or either a newline or the end-of-file is reached, whichever happens first. A newline character makes fgets stop reading, but it is considered a valid character by the function and included in the string copied to str. And as mentioned in comments, you do not need to include \0 when using string literals. The nulltermination will be added automatically. You could strip newline characters \r and \n before comparing the string: This code should be universal for windows linux and mac. Next, I've used unsafe functions like strlen and strcmp in my example, there's also strncmp that compares only specified number of bytes. 
c-7-74	X	How do i calculate tilt angle from mpu6050? I am building a self balancing robot and I have managed to configure gyroscope mpu6050 and I now have six readings Ax,Ay,Az and Gx,Gy,Gz. My question is how do I calculate tilt angle from both Ax,Ay,Az and Gx,Gy,Gz. Here is what I know so far. Kindly correct me if I am wrong. I can calculate the force of Gravity in g's measured in horizontal position as Ax=Ay=0 and Az=1. I use this to find tilt angle as angle_accel = arctg( Ay / sqrt( Ax^2 + Az^2 ) ). But I am not sure if my tilt is in Ay direction or not? I can get the Gyro angle through integration. My gyro is read (Gx) 590 times in a 1 second period. float angle; //gyro angle angle = angle + Gx; //sum 590 times i.e angle += Gx*590; //END when 1 second is complete Will this give me correct angle? Does the self balancing robot tilt in Gx direction? I know these may be simple questions but I really appreciate any help to remove my confusion. Thank You. In a perfect world, you could integrate twice the angular acceleration. But it practice, there is an important drift: it's not working properly. The only working solution is merging data from accelerometer, gyroscope and magnetometer. This is what we call AHRS. There is two working solutions : Kalman filter: hard to understand but reliable when implemented properly Madgwick's algorithm: easier to implement, but less reliable On this page, you will find an implementation (source code and example) with an MPU-9250 which is the big brother of your MPU-6050 
c-7-75	X	How to delete a word from tree dictionnary in C? I've implemented a dictionnary in C using tree, this tree stores a word and its definition as followed: As you can see, some words are sharing same letters. But now i'd like to implement a delete function but don't know how to proceed ... I know that I should begin to delete the end of the word ... Here is my code, thank you for your future help ! I can give you an idea on how to solve it, but sorry I didn't write the code. So from your code, I can see that you have findWord function, if that works perfectly then use it inside your delete go find the word at this stage you're pointing to it now you have to think of three possibilities. If the word that will be deleted doesn't have any child then delete it with no more complication. If the word that will be deleted has a single child then make the parent of the word point to the word's child. If the word that will be deleted has more than one child then replace the word with one of the children and then delete it. I hope this will help you 
c-7-76	X	How can I add sound to my C program I need to add music to my c program but i dont know how. im using notepad++ to write my code and using cmd to run it. my compiler is MinGW. please if someone can give me easy code to write to play sound in cmd. thanks You could try the SDL (Simple DirectMedia Layer). Here is some code that can get you started on playing .wav files using this library. 
c-7-77	X	is this use of realloc inside a function correct? (and the use of free() in case of failure) I found some questions similar to this but there are some differences. here is my code: student.h: student.c: main.c: currentTotal is an external int variable. Is the use of realloc correct? And the use of free? I always mix up whether I should use * or ** inside the function, once I send the address of a pointer to another function. (i.e. having a pointer like *studentClass and then sending &studentClass to another function). if this is indeed correct then what happens to the original data that *studentClass pointed before the line "*studentClass = temp;" (in student.c) ? does it need to be freed? edit: Please don't be confused that initially *studentClass is NULL, it's only like that at the start, addStudent() is meant to be called in a loop, so after the first time, *studentClass is no longer NULL. addStudent() increase the size of *studentClass after each call. Thanks. It's "save" in the sense that it does not introduce undefined behaviour and it does not leak memory. You take care that if realloc fails, the original data is not freed (so you do it), and you store the result of realloc in a temp variable in order not to loose the pointer to the original data. So far everything is OK. It contains, however, a pitfall for the caller of addStudent if realloc fails. In this case, you free the original memory block without providing a new one, but you do not reset the pointer to NULL. So the variable passed to addStudent still points to some memory, but this memory has been freed. A caller might attempt to free this memory a second time (yielding undefined behaviour then). In case of realloc having failed, I'd suggest to do either of two options depending on who shall be responsible for freeing student's array memory: a. addStudent is responsible: Free the original memory AND set the pointer to NULL, such that no one outside can attempt to free memory twice. So you'd add a *studentClass=NULL after the free. b. the caller is responsible: Don't free original memory in case of realloc failure; return - as you do - a failure code and let the caller do the rest. So you'd remove the free. This is all fine. Because *studentClass is NULL, realloc(3) behaves just like malloc(3). In the case that realloc(3) fails, it does not modify the passed pointer, meaning that *studentClass is still NULL. Calling free(3) on a NULL pointer is perfectly valid, but nothing will happen (a no-op). Then the function returns, and *studentClass is still NULL. You just need to check its value after the call to addStudent: if it's NULL the addition of a student failed, otherwise it succeeded. Your use of double-pointers is also valid. One way to reason about this is like so. Pointers allow modification of the data at the pointed-to location. If one wants to pass an integer to a function to be modified, one can pass it as an int*. Inside the function, one dereferences it to modify it, such as *my_int = 0;. So if one wants to modify a student* inside a function, it must be passed as a student** and then dereferenced whenever one wants to change its contents. In addition to the fact mentioned by Stephan Lechner that code should either leave the allocation alone or null out the pointer to it (as opposed to freeing the memory without nulling out the pointer) there are a couple of other issues I see: If a caller isn't expected to recover from out-of-memory conditions, allocation functions shouldn't return when they occur. Instead they should signal the fault (perhaps by raising a signal) and then exit (if signalling the fault didn't already force an exit). Having a function guarantee that it will never return unsuccessfully can greatly simplify client code. If the function is going to use a global variable to hold the size of the allocation, it should use a global pointer to the allocation. If it is going to use an object-pointer identified by a passed-in address, it should use an object count that is also identified by a passed-in address. I can see four good approaches to fixing that second issue: Pass in a double-indirect pointer as you do now, but also pass a pointer to an integer-type object holding the number of students. Pass in a pointer to a structure which holds a student pointer and the number of students. Define a structure which holds a count and a flexible array member of the student type, and keep a pointer to that rather than to the first student. As above, but keep a pointer to the first student (as opposed to the start of the allocated region). This would require that any code that uses malloc/realloc/free be adjusted to offset the pointers exchanged with such functions. Approaches #3 and #4 could have a slight advantage if the number of students can grow instead of shrink. If the size of the allocated region shrinks to zero, there would be no way to determine whether a request to realloc a region's size to zero bytes succeeds (if the region previously had a zero size, the Standard would allow realloc(prevPtr,0) to return null after having successfully released the previous allocation, but the Standard would also allow the realloc to fail (and return null) without having released the previous allocation. 
c-7-78	X	Make file in C giving fatal error I am trying to create a makefile in C but i am facing some issues. I have my main .c, one .c which keeps the functions implementations and one .h which keeps the functions declarations. When i try to run the makefile, i get a fatal error. here is my makefile: The error i get is this: Can anyone please help me with this? What you are trying to do by using this prog_fun.o: prog_fun.c header.h It should be only Modify your make file as next run it I hope it will work now and make sure indention is correct(not manual spaces, it should be tab key) 
c-7-79	X	Stop signal propagation in child process making exec I'm currently making a shell and i encounter trouble when it come to launch a processus that need to work in background, and when i press CTRL-C after the launch. Basically all is working fine, but if i press CTRL-C while my forked-execvp process is running, even if i've handle the signal, CTRL-C is propaged to my child. I understand the reason of the propagation (signal send to all child related to the terminal if I have understood right) The problem is as i saw in a previous topic related to my question, we can't handle a signal when we do an exec just after. So I'm asking to the community if there is anyway to handle this ctrl-c in my child (basically doing nothing) because i need to ask a confirmation in my father process before killing every background process. Hope it's clear, don't hesitate to ask more information if there is any misunderstanding (sorry english isn't my native language). Thanks 
c-7-80	X	What will be the time complexity of the following nested loopin Big O notation? Was wondering what is the time complexity of the following code: In my opinion, the time complexity will be n*(3^n). What will it be in Big-O notation, what do you guys think ? Yes it isÂ O((3^n)*n).Outer loop iteratesÂ 3^nÂ times, each time, the inner loop doesÂ O(n)Â work. 
c-7-81	X	Why is there an unrecognized rule in my flex code? My Problems are my rules This code must detect an URL from a file in this form: ftp://[<user>[:<password>]@]<host>[:<port>]/<path>[;<ftptype>]. I already updated homebrew and flex. I was compiling using "flex example.flex", and trying to execute using "./a.out file.txt" My Rules: The first one is because of: You can't combine user-classes (not sure if that's the official name) with |, it has to be: Just as a starting point: "{" "}" are not being used correctly -- it should be {id} to expand a user-class id REGEXP{number} or REXEXP{number,number} for numeric quantification When you wrote: it should be CAR ("_"|"$") or CAR [_$] should be: 
c-7-82	X	Keep characters in an array I want to do a program that ask to the user to give one character, then enter... until he wants to stop by pressing enter and no caracters. Then, the program will say: "you gave the caracters ...." for example: result: You gave the caracters: kl My code doesnet work because when i just press enter, nothing happen. Here is the code: As stated in this answer scanf will not return until you give it a string, i.e. it skips whitespace. As suggested in the answer and in general, using fgets is the better option. Edit: A way to accomplish what you want would look like this: In the fgets you use the number 3 because pressing enter gives both a newline character [/n] and a return carriage [/r]. You can do it with c = getchar(); or c = fgetc(stdin) function: OUTPUT: Or you can use your original scanf("%s", &str1); OUTPUT: 
c-7-83	X	C programming style - Constructor functions taking each member in a struct or none? Say I have a struct. If I have a create or init function or whatever, is it more popular to have an argument in the function for each member in the struct that might need initializing, or to leave out these arguments where you might not want to immediately set them (or they will be empty or null by default). Or should you have different functions so you can choose the right one whenever you need it. Obviously in c++ or something you would just overload the constructor with everything you need. How is this commonly done in C? 
c-7-84	X	Can&#180;t read the length of a binary file C So, I have an assignment in which I'm required to read and store a binary file. I started to create a side program to test things out and it was working fine, it was reading the length of the file and storing into the array (I printed the array, just to check if it was storing correctly) Here is the test program: So this one is working ok. I then decided to adapt to the assignment and put this code in my headers, so it looks like this: Main Function: When I execute everything in main(), it returns fileLength as 0, which should not happen, since in my test program it works, with the same file. Now I understand that the fseek()/ftell() combo is not the best solution for binary files. Could someone show me a better way to do this, or at least say what I'm doing wrong here? 
c-7-85	X	bit fields in c programming Here in this code the output is 5 please explain how did 5 come Seems you are using Turbo C(windows). In TurboC compiler by default integer is short integer which is of 2 bytes(16 bits). Next come to sizeof, you are trying to print sizeof structure, which is nothing sum of sizeof all data member. first member of struct bits is unsigned b : 5, when compiler will see first see unsigned it allocates 2 bytes or 16 bits for this, out of 16 bits you are using only 5 bits i.e still you can store 11 bits. Next member is unsigned b:5 this will be served in same previous memory, so still size is 2 bytes. till now memory allocation will be looks like if you analyse above figure, first 5 bits for a, next 5 bits for b, now how many pending out of 16 bits ? 6 bits right ? can you store a char(8 bit) in remaining 6 bits, answer is No. So remaining 6 bits will be holes in structure(I shown is p which is padding) So next for char c it will again allocate separate 1 bytes, so till now 2+1 = 3 bytes. Next member of structure is d which is again integer, so for this 2 bytes will be allocated. So total 2+1+ 2 = 5 bytes will be allocated for whole structure. I hope you got it. 
c-7-86	X	Call C from C#: How to marshall that one 2D array of doubles when the others go so well? I call a C routine from C#, with some doubles, ints, a large string and some arrays as argument. Some arrays return correctly, with the correct values, only one array does not.The array is corrupted on returning to C#, NOT during execution of the C-routine. C#-side: now, all arguments come back OK, except MemberEndforces. Also when I swap the order of Reactions and MemberEndforces on the caller AND callee-side, Reactions come back from Cr OK, but not MemberEndforces. I get "Unable to read memory" for MemberEndforces, in the VS watch pannel . Also, if I do NOT fill MemberEndforces C-side, so do nothing with it, it makes no difference: Still the same error message And C-side: The question, of course, is: What do I do wrong (and why, maybe?)? There seem to be some concept issues here. As to why the last parameter might be corrupted. You define it as a two-dimensional array (c#), then use it as a one dimensional array in C. In C an array is a pointer to a block of memory, of some particular type (example double). Typically, you allocated it as *typeof(double) * arraysize*. A two dimensional array is a pointer to a block of memory of pointers to some type. To create a 2D array you have to first allocate the array of pointers, then set each pointer to an array. You might look at something like this: Multidimensional array initialization in C C# has different options here, see: What are the differences between a multidimensional array and an array of arrays in C#? Plus, C# is a managed memory system, so passing pointers out of C# (to say C) is a problem, because at any moment the GC (Garbage Collector) might kick in and change the memory address of a variable (pulling the rug out from under your C running C code). C# has a way to fix memory (using 'unsafe' code), which allows you to 'lock' and address (prevent the GC from moving it) for a period of time (like during your call to unmanaged code). In the end you are just using addresses to blocks of memory. Makes sure those blocks don't move during calls and make sure the format of the blocks interpreted the same way in both coding languages. It was the eigenfrequencies/f array and the nrModes argument that caused the trouble. The problem was 100% C-side. The calling/receiving was OK. I just handled eigenfrequencies wrong inside the C function Cr, overwriting stuff. Thnx for thinking with me. 
c-7-87	X	What is the meaning of the _YYOPTIM #define in lex/flex generated code? I am maintaining some very old flex (or maybe even lex) files that I believe were converted to .c at least 1.5 decades ago (and then checked into version control, so we still use them). Within the generated .c file I can see a #define called prefix_YYOPTIM (where "prefix" is the usual application-specific prefix specified for all variables) which is #define'd to be 1; this then causes a block of code later in the parser to be enabled. I have searched the web and in the flex documentation but cannot find any explanation of what this is supposed to do. Is it to enable optimization? Is anyone aware of documentation that explains what it does (the block of code that it enables is somewhat hard to comprehend)? I ask because I believe there might be a bug in the block of code that it enables. Unfortunately I cannot post any code here. Thanks in advance! 
c-7-88	X	C - Warning [pe069] integer conversion resulted in truncation I know that this question has been asked several times, anyway I didn't find and answer to my specific case: IAR Embedded Workbench returs this warning on compiling: "Warning [pe069] integer conversion resulted in truncation" on the line: where DVC_CTR2 is and SPI2_Tx definition is How can I resolve this warning? Thanks in advance! This is because you cannot transmit a two-byte value through SPI routine that transmits a single byte. You should be able to do it with two separate calls: If you must transmit 16 bits at once, look up a different routine that takes uint16_t. 
c-7-89	X	Why do I have to use rcu_read_lock/rcu_read_unlock when I read something from fdtable in linux kernel module? Could you explain me please, is this necessary to use rcu_read_lock()/rcu_read_unlock() in this code ? I can not understand why does it exist at all in linux kernel ? 
c-7-90	X	Scanf within a loop is being skipped I'm trying to ensure that the user has definitely entered an integer. However no matter what I type in, it doesn't seem to work. Sometimes the scanf is completely ignored and the loop just prints out everything loads of times. When I checked what the input was that the code took in, it was wrong as well. Any ideas or help would be appreciated! 
c-7-91	X	CreateThread x3000 returns stdout handle I have problem creating thousands of threads and closing it. Look at this code: It should proceed this output: like this. But actually it will print nothing. Why? Because one of the created threads had a conflict with stdout handle. I realized it using this code: and it worked like this: Where is the problem? Why there is a conflict between created handles and existing standard handles? The thread handle is returned by the function! The last parameter receives the thread id, not the handle. On my machine this prints 
c-7-92	X	"union is a structure in which all members have offset zero from the base", what does it mean? The sentence is from p.148 in K&R. I don't understand what this sentence means. what kind of base and offset structure or unions have ? 
c-7-93	X	C error - dereferencing pointer to incomplete type I am trying to get information from Tree field I made, and I am getting the error in the title: dereferencing pointer to incomplete type 'struct List_t' Tree Source File: Tree Header File: App Source file: what should I do? what am I doing wrong? thanks! The declaration of struct List_t needs to be in the header file. Along with a declaration of createTree. You have provided three pieces of code, and identified them as: Tree Source File: Tree Header File: App Source file: Let's call these files tree.c, tree.h and app.c When you are compiling C source files, generally you have a single .c file that may contain lines like: inside it. That is how the compiler knows to go and look inside another file for a definition. If your app.c file contains the lines above, then the code inside app.c may only make use of information provided by stdio.h and tree.h. In particular, if you have provided information inside tree.c, that information is not visible to app.c because there is no #include directive that references it. The solution is (as others have said) to move your struct definitions and typedef statements and any other parts of the public interface to be located in the tree.h file. Alternatively, if you wish for the members of the structure to be private, you can provide a function that returns the data. Of course, the declaration of that function will be part of the public interface so it will have to be in the tree.h file as well (the definition of the function can be in tree.c, but the declaration will be public). 
c-7-94	X	Writing and reading from binary Here is my code: cat .bin returns SQUAREIgnasKubilius+37065555555Ku@Ku.lt. Instead of a number I'm getting a square. Where is the problem? The problem is that you're using fwrite, which writes binary data. Thus, when you write an integer using fwrite, it does not format it as a string - instead, it writes the raw bytes that make up the integer. In this case, you're storing the number 1, which, as a sequence of bytes (assuming 4-byte little-endian ints), is (in hex) 01 00 00 00. When you cat the file, it "automatically" removes the null bytes (more accurately, the terminal/console ignores them), but the 01 byte is printed as an unknown character, giving you the square you see. There is no inherent "problem" with how you're writing the data, but you can't just use cat to display the data, since it works with text files, not binary. 
c-7-95	X	How do I access all the strings from my input file and print each of them? First of all, here is my code. Here, my code is simply printing everything that is present in my input file. But what I want to do is to access each string and print it in a new line. I know that there is a problem but I can't figure it out.(By the way, I have have started learning coding in c recently.) If you can help me out, I would appreciate. Thanks. My input file is like this- Line that i write to compile in my terminal is- This code shouldn't compile, but I'll try to explain anyway, when you say buf = *ptr_file, you basically assign buf to a File struct (which again, shouldn't compile). This is not what you want. What you want is to read the data from the file into the buffer. There are many ways of doing that. My recommendation is to use fgets if you want to read line by line. It's a pretty simple program - Note that the string will contain the newline if the line ended with one. Learn more using man fgets If you want to, let's say, read the whole file, it's possible too- Note that in most cases you can omit the sizeof(char) part because it's usually 1 in all but the most exotic systems. 
c-7-96	X	How to dynamically allocate struct fields based on data read from binary file? I have a structure that looks like this : What I want to do is to read data from a binary file and dynamically allocate memory for the first_name and last_name fields. I successfully completed this task when reading from a normal .txt file. Here is the code: It was simple because fscanf can read data individually and has type specifiers, like the following : %s last name / %s first name / %f grade. I don't know how to use fread to read single pieces of data like I did with fscanf. Here is what I've tried so far, but it doesn't work: Also, the Print_Students function looks like this: The input.txt file looks like this: I loaded the data from this file in my vector of Students, and then I wrote the input.bin file using based on the data from my vector. I've used the following code to write to binary: You need to know the format of the file. I assume the following: the file starts with a four-byte integer that holds the number of students in the file. The data about each student is in the order First name, Last name, grade. The strings first and last name are terminated with a null byte. the float is a 4 byte float. Followng the 4 byte float follows the next student (there is no record demarcation). Now you can read the data. The only thing is how to determine the length of the strings as you have to allocate memory for them. There are two ways: use a buffer of reasonable size (say buf[256]) and read character by character until you see the null cahracter (you may want to skip characters that would let the buffer overflow, so another part of the file format specification is that strings cannot be longer than 255). After reading and terminating the buffer with \0 call strlen and then allocate the string with malloc, or remember the current position, read character by character, counting them until you see the \0, allocate the memory, seek backwards and read the string. I did a similar job in a recent project. I implemented a binary file format on my own, and it's structure is So you can pit an extra 4 bytes (or an integer) indicating the length of what to read, and read according to that number. Advantages of this implementation are: You don't need another buffer to read first, which may add an extra limitation on lengths of records. When the content format changes, you don't have to worry about reading lengths. No single character needs to be used as "terminator" because the length is pre-determined. 
c-7-97	X	Pointers in C - int array VS char array I know similar questions have been asked, but this one is specific to arrays. I can do this: and then: So why does this not work?: Thanks "John", "¦ are of type char *. 11, "¦ are of type int (without indirection). So it is: This question is explained here. In the first example each name is an array and you have an array of arrays. In the second example with int you have a simple array and using *var[] = **var but you don't have such ting in memory. String literals have types of character arrays. For example the string literal "John" has type char[5] (string literals include the terminating zero). Used in expressions arrays with rare exceptions are converted to pointers to their first elements. You can imagine this declaration like Thus the array names is initialized by valid addresses of first characters of the string literals. As for this declaration then the array numbers is initialized by invalid addresses values like 11, 12 and so on that do not point to actual objects. You could write for example and then In this case the array would be initialized by valid addresses. As for the printf calls then the function is designed such a way that when the conversion specifier s is encountered the function considers the corresponding argument as an address of a zero-terminating string and tries to output this string. While the conversion specifier d serves to output objects of the type int. So for example if you want to output the integer pointed to by numbers[0] then you should write 
c-7-98	X	how to use fgets to get a number AND CLEAN the stdin afterward, nothing else helped I am trying to get a single digit number from stdin. Using scanf("%d",&choice); is not good because if something like 3fjios or fjaifdj is entered then it keeps everything after the digit (if there is one), so if later I have scanf("%s",name); it takes the other chars and messing up. And also using scanf is bad (or so it seems from Google). After a lot of digging I understand that we should use fgets, to read input into a string and then parse through it. But! Nowhere is explained how to properly clear the buffer afterwards. So if I do something like: this works only if I enter a string longer than 2 chars. When I enter a single char for fgets then the scanf actually waits for another input... which is bad. The other big problem is if I enter more than 2 chars (a digit and '\n') then the first 2 chars go into choice, the rest are stuck in the buffer. All the approaches to clearing it seems like they require one to build a nuclear power plant first... Also, what happens if the user enters an infinitely (a really long) long string? Can you please show a simple way that will allow the user to enter some string of some (unknown) length, and then to properly check if it contains exactly a single digit at the start, followed by '\n'? Any other input should loop back to get a new input from the user again. please don't use complex solutions, only standard simple C please. I can't believe I wasted 6 hours on this supposedly simple technical thing, just getting an input from the user. Solving the actual problem was easier... Do not use scanf. It is making things overly complicated. Just use getchar to read and discard the line. eg: 
c-7-99	X	Pointer in C. Filling a block I am new in programming in C. I need to write this program: Write a program, and in it a function that: "¢ gets a positive integer n as an argument "¢ reserves the n block of double variables in memory "¢ fills this block with random values in the range <0.0, 1.0> "¢ returns a pointer to the beginning of the reserved block. Display the data contained in the returned block. I wrote a part of this program, and I dont know how to do the third point of this exercise. This is a simple program matching your description with comments in the code: 
c-7-100	X	C: Creating a 2 dimensional array with unique numbers I want to create a multidimensional array in C using random numbers, but with unique numbers for each row. How do i do this ? This is the code: Simply one way to go about would be to assign numbers from 1 to 84 in the 1d array and then apply Fisher Yates algorithm to shuffle it. Uniqueness among the initial set of numbers ensures one of the criteria you mentioned. Assign numbers from 1d array to 2d array. This generates a random sequence of numbers in the 2d array. You can also change it to work for 2d array Create a stack with randmon numbers and then put the stack into a 2d array: Another and more efficient soulution is to generate a consecutive array. then foreach element pick another random item form array and swap them. This method is not so random but it works. It depends on your needs. The presented solution generates a unique random number for every cell in the array. Every cell will get a random number from a moving range. Once the array has unique random numbers if can be farther shuffled. OUTPUT: 
c-8-1	X	Intentionally returning an invalid value or type As a suggested exercise from Stephen Kochan's "Programming in C" (3rd ed.) I want to add some functionality to the strToInt function which turns a string into an integer. The function has a return type int which is is fine, if the passed string literal is valid (like "123" or "13"). But if the string contains any non-numerical values (e.g. "12x3", "foo") an error message should be printed and and the function exited. Since the return type is int, an integer needs to be returned, but in this case this might be misleading. So my question is, what should be returned in such a case so that the returned value / type is unambiguous about the fact, that an invalid string literal has been passed and cannot be confused with a valid return value? Well do what strto* functions do - they return the converted number (if any) and then resets the pointer to the beginning of the part that it can't make out. With this same tone it does many things - you can get a clear idea of it if you go through the standard. So in case of the example given 12x3 your function may return 12 and then make the pointer point to the appropriate position in the string. This is providing the error information by the pointer passed and then returning as much as it could parse from the input. In case of strtol ([long int strtol(const char *nptr, char **endptr, int base);])from man page we can see that when endptr is set to the end of the string then that means whole string i sparsed successfully. In case of partial conversion that endptr will not point to middle of the string. Same way imitating the strto* function we can see that it sets the errno to appropriate number to denote different problems ( ERANGE etc) - so along with that you can set it to give user a precise error report. // what should be returned here? Nothing you can return here that won't look like a valid result. The way this is commonly solved is by moving the result to an output parameter. Thus freeing the return value for a status that indicates the success of the operation. For instance: You may of course return any type and not just a bool. Many software systems return one of several integral values that may indicate any of several ways the operation can fail. So the error handling can be more exact and sophisticated. This is an interesting question in software engineering and there is no "best answer" to it. In some cases, assigning a specific value of a range might work. For example, in the standard C library, some character manipulation functions, such as getc, have their return type set to int rather than char. This is to be able to return -1 as an error code. Other functions, such as strtod simply return 0 if there was no possible conversion from string to double (this can be argued whether is a good or not approach). If something wrong happens, they return a special value (still a valid double) and set errno, Errno seems to be the standard approach in the unix world to error reporting. At the core, it is basically a global variable that stores the error code of the last error. Most system calls return a specific value when something occurs, and then you are supposed to check the error code in errno to see what happened. 
c-8-2	X	C language: is double parse exist? So i have this string: And this function that split my string with comma and tab and print my numbers: So in case i have non number for example e, any chance to check it and in case this is not number print error ? Is C Language have double parse or something like that ? You can use strtod to convert form string to double. As per the documentation, it ignores whitespace characters and, if the string is not a valid floating point number, returns 0. You should be able to easily check if the first non-whitespace character of the string is zero or not, to be able to detect if there has been an error or not. However, note that if the string is something like 1.23xer43, you will get 1.23 (i.e. it converts the first characters). 
c-8-3	X	Multiplying 2D arrays using multithreading in C I am creating program to multiply two 2D boolean arrays using multithreading, but i have problem with segmentation fault in my program. Initialized threads after couting one row will skip to next available row. I am new to C and it's difficult for me spot what is wrong with threads or malloc. Also can i use pthread_mutex for global variable? There i declared 3 arrays , 2 to multiply and third for result. Array1 is size of a x b Array2 is size of b x c Array3 is size of a x c Program starts with 4 variables. First 3 are matrixs size(a x b, b x c) and fourth amount of threads to initialize. 
c-8-4	X	C Programming - Pointer, Struct Allocation - Crash Error I am very new to C programming and I am doing an exercise that involves pointer, struct allocation and more. This time, I tried to create an array of struct by using memory allocation, includes malloc function. Things go well until I tried to declare the values of struct's elements. There is no error when compiling source code running-time error instead. Here are the codes: In the above code, I removed the part that frees the memory after being allocated. I think they are not related to the issues. On my last test, the second loops will end when it reaches 10000 iterations. This number is not a constant. I don't know why? Update: I know my issue, thank you so much! I think you are forgetting to allocate memory for the actual structures. Your line: reserves space for MAX_LINE pointers, but not for the structures. The only possible reason can be that you are running out of memory. To check that check the return value of malloc.Otherwise everything is fine ( I mean yes logically there is flaw in your code) but no error as such. return 0 to denote the successful execution of main(). Here you are only writing to the first allocated struct under each struct pointer, you don't use others. More prominently your this much memory allocation seems suspicious. You have allocated roughly MAXLINE *MAX_CHAR amounf ot struct Person. Check if this print's anything on the stderr. Do the same for PersonArray too. In my system it does, for your case also it is very likely that it will at some point fail to allocate memory. The crash occurs for a completely different reason. The thing is malloc failed silently. And on failure it returns NULL. Now in the second loop you dereference it (0x000000...0) And then your process is not permitted to write there. So it fails. Trying to access gives rise to undefined behavior - in your case that boils down to crash. From the comment it seems that OP wants to have 1 million person. For that this is suffiecient and not over complicating things. You have now 1 million elements. Free the dynamically allocated memory when you are done working with it. 
c-8-5	X	Clone bits by range by bitwise ops on C How i can clone range of bits from one variable to another? For example, i have How can i clone 6 LSB bits from variable dec2 to dec? After this operation I need to clone next 4 bits from dec2 to dec but in a start of 2nd byte? (from 9th least significant bit) (dec is like a "mask"). The desired behavior is: You can visualize bitwise operations if you replace example bit values by letters: First, extract the needed bits from dec2, and replace all the rest with zeros: Here I am using a binary literal with 0b prefix; if your compiler doesn't support it, use an equivalent hexadecimal literal (like 0x3f). Then replace the target bits with zeros: Finally, do a bitwise OR: This is a widely used property of the bitwise-OR operation - if one of its inputs is zero, it copies the other to the output. For your second operation, you will need a bitwise shift. Without getting into the details of which bits you need, you can still use the visualization technique with the letters: Here I used a dot . to represent a zero bit. 
c-8-6	X	Reducing code duplication in a tic-tac-toe implementation I'm making a tic-tac-toe game in C and my function checkwinner() has a lot of code duplication in the form of if-statements. The array called square[] contains either the character 'X' or 'O'. So the function compares the rows, columns and diagonals and check if the characters match. Is there a way to reduce the code-duplication to make the code more compact? you can write function like this and then you can move printresult into match function and then have something like if your function has nothing else to do Like Angen said, it is good with a match function: However, I would also consider rewriting this like this. I assume your square is a char array, but it works with int too. Also, note that you need to check empty cells. After that, you could check for three cases separately. Maybe this is overkill for a small tic tac toe, but I show it anyway. The idea translates well to bigger applications. And then you could write checkwinner like this: And the then I'd add a new function that takes over responsibilities from the previous checkWinner: Maybe this will not make the code more compact when counting total lines, but it is definitely better design and each individual functionality is more compact. Also, as you may notice, I separate functionality so that a function does not both print and handle the logic about how to calculate a winner. I added camelCase to your functions. That makes code easier to read. 
c-8-7	X	MATLAB code to C not working I converted a MATLAB code into C but it doesn't work. The MATLAB Code: The C Code: What did I do wrong and how to fix it? I suspect the error to be in one of the four for loops in the "Step the boundary condition" section but I'm not sure. 
c-8-8	X	C - Scanf with only read/write I'm trying to write my own scanf function in C using only read/write (no libary functions, no va_args etc.). I came up with this code (only for decimal integers for now): } For some reason the address of *k is different from pointer I pass as an argument. I tried different ways, but I sill don't know how to get the right address. 
c-8-9	X	Is it possible to allow to use linux kernel module only for one process ? I have linux kernel module, which get some info from user space application via device file and return some other data. when user space application reads from device file, driver executes function dev_read. I was thinking, that it is possible situation, that two or more processes use this driver and bad things can happen, for example: 1) first process pass data via device file and function dev_write generated and filled array g_GlobalVariable 2) first process read from device file, dev_read invoked and it works with g_GlobalVariable 3) second process writes into the same device file and g_GlobalVariable contains after that other information. 4) first process in dev_read get the wrong data, or read memory, which already doesn't exist. How can I fix this situation ? 
c-8-10	X	What's wrong with this code?(driver program) May someone say what's wrong with this code? I run it three month ago and everything was normall. Now i have three bugs: 1.utyuty.c:(.text+0x3b): undefined reference to `EnumDeviceDrivers@12' 2.utyuty.c:(.text+0xa3): undefined reference to `GetDeviceDriverBaseNameA@12' 3.[Error] ld returned 1 exit status 
c-8-11	X	How to comparing *argv[] to the array of data from text file? I am working on assignment and get stuck at comparing the command-line argument with the 1.000.000 mil of data of people in a text file. How can we use strcmp() to compare those together? I intend to compare the argv[1] from command line with the string of user1 in the array that I have created when read a text file. The command-line argument would be like this: c:>assign2>program.exe John 25 30.3. My code blocks is in a picture below and details of problem. Can someone give me a hint to compare it? Thank you! enter image description here enter image description here 
c-8-12	X	Bits mask - bitwise operations in C Example: I have this binary representation of integer 0000010010001110 How i can mask this bits by this 110..... 0....... ? i need to save zeros in mask and save all active bits in following integer 110010001110 i'm newbie in bitwise ops so give me some ideas or advice,please,thanks. upd. i'm need to mask wchar_t and output that in unicode (UTF-8) representation Read the UTF-8 specs for more detail, but at a high level: Code points 0 "“ 007F are stored as regular, single-byte ASCII. Code points 0080 and above are converted to binary and stored (encoded) in a series of bytes. The first "count"? byte indicates the number of bytes for the codepoint, including the count byte. These bytes start with 11..0: 110xxxxx (The leading "11"? is indicates 2 bytes in sequence, including the "count"? byte) 1110xxxx (1110 -> 3 bytes in sequence) 11110xxx (11110 -> 4 bytes in sequence) Bytes starting with 10"¦ are "data"? bytes and contain information for the codepoint. A 2-byte example looks like this 110xxxxx 10xxxxxx It is not clear what you need exactly,but in case you need to "recognize" the types of "count"? byte and "data"? byte,for the given example: 1100000110100000(11000001 10100000) to "recognize" "count" byte you can use: and then use operator & to check if bit is set,a counter to count how many bits are set,and a << operator,to shift left(8 times maximum). In case a bit which is not set appeared,break. You can then use the final value of count to identify the type. Output for that given example would be 2 i'm need to mask wchar_t and output that in unicode (UTF-8) representation Have you read the official specification of UTF-8 in the Unicode standard (Section 3.9 - Unicode Encoded Forms), or RFC 3629, or even the UTF-8 documentation on Wikipedia yet? They describe the algorithm needed to split a 21-bit codepoint number into an encoded byte sequence. Note that wchar_t is 16-bit (UTF-16) on Windows but is 32-bit (UTF-32) on most other platforms. Converting between UTFs is fairly straight forward, but you do have to take into account what the UTFs actually are, as converting UTF-16 to UTF-8 is a bit different than converting UTF-32 to UTF-8. In a nutshell, you need something like this: Which can be simplified to something like this: In your example, 0000010010001110 is decimal 1166, hex 0x48E. Codepoint U+048E is encoded in UTF-8 as bytes 0xD2 0x8E, eg: 0000010010001110b -> 010010b 001110b 0xC0 or 010010b -> 0xD2 0x80 or 001110b -> 0x8E 
c-8-13	X	duplicate string file, size is 77536 I want to duplicate a string file with size 77536. when use strdup, it overleak, maybe I wrong but I read that I have a limititaon string of 65535, is that right? so I have left strdup, and did manulaly duplicate, I reached 209712 and then it crashed I cannot understand why ? Why did it reach 209712, giving a buffer of size 77536? Why did the while loop not terminate on null? Edited The error seems to be that you missed to check the character that is pointed by buffer. Here you are checking the address or comparing the address with \0 :- Here as you were comparing the \0 with the address you never actually will make the condition false. Because the address will never be equal to \0 and as a result you went past the memory allocated. And inside the loop you dereferenced it. This is the undefined behavior. In your case it crashed. Another thing would be to null terminate the copied string, so add this line after the loop otherwise you will still run into undefined behavior when you access the memory pointed by temp2 as a string. \0 ensures that it is null terminated char array making it possible to work with string functions on it. As an added note: Check the return value of malloc. In case it fails you will not run into Undefined behavior in case you check it. Don't cast the return value of malloc. that is unnecessary. you can read it here in more details. There is one possibility that there is no \0 present inside the buffer variable. Try I believe that this will resolve your issue. You are comparing the buffer pointer with zero: While you should rather derefference it (Notice the asterisk.): 
c-8-14	X	Is the following pattern valid for both odd or even rows? or is it valid only for odd number of rows? I saw this pattern on a website:- Is this pattern valid only for odd number of rows? If the pattern is valid for even number of rows, how will the pattern behave? if the user is asked to enter the number of rows, should i notify the user while writing the code to enter the number of rows in odd numbers? 
c-8-15	X	More memory-efficient struct representation in Python? I have the equivalent of a classic Point struct that I'm trying to create. However, I'll only need limited functionality (access by attribute name) and none of the extra overhead of namedtuples (e.g. length, index access, __contains__ etc.) Moreover, my use case also has fixed types for Point.x and Point.y so maybe there's a further hack that relies on the static typing guarantees. Is there something with even less memory overhead? Perhaps a ctypes or Cython solution? I guess, creating a Cython extension will be the easiest way to reduce memory impact. Attributes of Cython extension types are stored directly in the object's C struct and the set of attributes is fixed at compile time (much like Python's __slots__). 
c-8-16	X	error with strcpy and strcmp and the argument of the printf and scanf } it will change the name and the position but for the salary it will show access of violation. i want to change the salary and store the new one.but it cannot store the new one the compiler execute until the line comfirm to modify ? and then stop execute. Staff P represent all of the P[i] in the modify function Like I said in my Comments: The strcpy() and strncpy() functions return a pointer to the destination string dest. The strcmp() and strncmp() functions return an integer less than, equal to, or greater than zero if s1 (or the first n bytes thereof) is found, respectively, to be less than, to match, or be greater than s2. The following program should explain the use of both Functions: Output: 
c-8-17	X	Friends Pair Algorithm Recursive solution in C Given n friends, each one can remain single or can be paired up with some other friend. Each friend can be paired only once. Find out the total number of ways in which friends can remain single or can be paired up. Examples: Input : n = 3 Output : 4 Explanation: [{1}, {2}, {3} : all single ] [{1}, {2,3}] : 2 and 3 paired but 1 is single] similarly [{1,2}, {3}] [{1,3}, {2}] finally answer 4 here I'm stuck to construct the recursion For further reference : http://www.geeksforgeeks.org/friends-pairing-problem/ you are missing return statement and as code from link says, there is and you are missing i == 2 in your code for example this recursion works, I do not know what do you need to know more: 
c-8-18	X	Got 'nan' when using ctypes in python3 where a float is expected This is my bmi.c which i'm compiling like that: then this is my getbmi.py when I run getbmi.py I only got a output: nan I'm confused You return an int with getbmi() so your res is cast to int so 1.6002 / 75 / 75 = 0.00028448, so the cast produce a 0. But you tell to python that the return type is float so python interpret int as float. 
c-8-19	X	How to make c programe as daemon in ubuntu? Hi I am new to the linux environment. I am trying to create daemon process. I want to create daemon process of it. May i know how can do this? Any help would be appreciated. Thank you. Instead of writing the code to make the C program a daemon I would go with an already mature tool like supervisor: http://supervisord.org/ A daemon generally doesn't use its standard input and output streams, so it is unclear how your program could be run as a daemon. And a daemon program usually don't have any terminal, so it cannot use clrscr. Read also the tty demystified page, and also daemon(7). I recommend reading some good introduction to Linux programming, like the old freely downloadable ALP (or something newer). We can't explain all of it here, and you need to read an entire book. See also intro(2) and syscalls(2). I also recommend reading more about OSes, e.g. the freely available Operating Systems: Three Easy Pieces textbook. You could use the daemon(3) function in your C program to run it as a daemon (but then, you are likely to not have any input and output). You may want to log messages using syslog(3). You might consider job control facilities of your shell. You could run your program in the background (e.g. type myprog myarg & in your interactive shell). You could use the batch command. However neither background processes nor batch jobs are technically daemons. Perhaps you want to code some ONC-RPC or JSONRPC or Web API server and client. You'll find libraries for that. See also pipe(7), socket(7) (take several days or several weeks to read much more) I think this below will work You can also try First find what are the properties of daemon process, as of my knowledge a daemon process have these properties: Should not have any parent (it itself should be parent) Process itself is a session leader. Environment change to root. File mode creating mask should be zero. No controlling terminal. All terminal should be removed Should not be un-mounted . Implement the code by considering above properties which is or you can go through man page of daemon() I hope it helps. 
c-8-20	X	MINIX: Changing the chmod system call, printing acces rights As part of a homework on minix operating system(version 3.2.1) I'm tasked with changing the chmod system call in the way that it prints the name and access rights right after I call it. For example the following command : should have a printed message right after it like this : I figured that I'll need to add/change code in the do_chmod function located in usr/src/servers/vfs/protect.c I add the source code for this function below along with my changes: Now I've done a similar task in the mkdir system call where the objective was somewhat similar and these modifications worked. However during the compiling of the code it popped as an error that it couldn't recognize the bits variable. I don't know why's that an error since the file has included the sys/stat.h library. Any ideas? 
c-8-21	X	Function to calculate float to power of float in c This code only calculates an integer or float to power of an int but not float. how should i write a function to calculate float or int to the power of float. 
c-8-22	X	Is there any way to get shared variables or create a similar functionality in parallel programming in C using MPI libraries? I am trying to implement a map where keys are numbers mapping into unique numbers. In other words, each process holds a set of numbers in an array that map into another set of numbers in another array held by the same process. The mappings need to be unique across all the process. I passed around a struct with the mappings to create mappings for each of the processes. However, this is not parallel, as I sequentially send information through processes. I request help from all of you wonderful programmers of the internet for how all processes can look at a specific variable at the same time? The following is the code I am currently working with. Thanks in advance and for all the support I have received till now. } 
c-8-23	X	What happens if I pass more values than declared in an array? I cannot understand how can this array store more than its defined size. 
c-8-24	X	Binary Search Recursion Not Functioning Correctly I coded a simple binary search to print out the position of what was searched. It correctly recognizes when a searched element isn't in the array and prints out "error". However, when a searched element is actually in the array, the value is printed, rather than the position. Could you please let me know what i'm missing? Thanks in advance Apart from the return middle; (in place of return search) change you should also change the Otherwise you will always miss the 0-th element even if found. (By miss I mean the result won't be printed). Binary search will work as intended. One another thing to notice is while calculating mid to avoid overflow use this Finally, the use of recursion is purely wasteful. 
c-8-25	X	accept() call is not working as intended in simple Echo server I am making concurrent server using fork() in C using Socket Programming, here is the problem I am facing 1 | 2 | 3 | Address which I am using is 127.0.0.1 and Port is 50000. What I want is that one client could send numerous request to server and same goes for multiple client. I have already checked some past stackoverflow questions and I have tried like every thing, say fflush( stdout ); accept( server_fd, (struct sockaddr *)0, (socklen_t*)0); int len = sizeof( struct sockaddr_in); accept( server_fd, (struct sockaddr *)&c_sockaddr_in, (socklen_t*)&len); Please let me know what I am doing wrong, as I think if it is going to work for nc localhost 50000 then it will also work with Client.c program but in case if you want to check out my Client.c then here it is- Please help me out by pointing where I am making the mistake, Thanks in advance!!! 
c-8-26	X	Initialization of variables In the following code, are the variables x,y,z initialized during run time when memory is allocated to them or at compile time ? As the comments have stated, it is not defined whether variables are initialised at runtime, even with the information you gave in comments that they are inside the scope of a function. Only the behaviour is like a virtual machine doing initialisation one time or another. It is however possible to be sure that they are not initialised at compile time. Specified by standard or not, there is no way any real machine could do that. (I will happily edit my answer and remove this statement if anybody comes up with an example of how this would be possible. Software emulators and anything not based on a compiler, like a C-interpreter, do not count.) At compile time, only the value can be determined with which these variables will be initialised. For the cases in your example that value determination does happen, because the value is not available from anywhere else but the digits in program text. The initialisation (i.e. the "arrrival" of those values in the memory piece represented by the identifiers) can happen at different times, but never at compile time. Because at compile time no such memory piece has been selected yet. In case of cross-compilation it might not even exist yet (the chip to run it on not having been produced yet). The following initialisation times are possible (not saying "usually done" for all of them...): runtime necessary for non-static variables in local scope of a function which gets executed for the second time and has changed non-static variables in the first run load time (in case of dynamic execution contexts, e.g. windows PCs etc.) or memory setup time (in case of static execution contexts, e.g. embedded execute-in-place environments) for global variables, static local variables, non-static const local variables (possible but unlikely for stack using concepts), non-static non-const local variables which happen to never get changed (unlikely for stacks, too) never for anything which completely gets optimised away for not being used anyway interpretion time picking up a valid input from Antti Haapala, C can be interpreted (this is however still not compile time, at least if you allow me to make a difference there and consider compilers the applicable scope for this question ;-) For your examples, inside scope of main(), either of those options might apply. So again, it is not known. Notes: I make a difference between load time and memory setup time here, because memory setup time is usually associated with power-on or reset situations, which are somewhat exceptional, while loading a program to execute is perceived as a normal situation. Both could however be considered the same thing from point of view of the C-program being executed, as being "before main()". I also make a difference between runtime (as being controlled by the program as defined by C-code you wrote) and load/setup time, which are part of the C runtime environment preparation code. C-runtime might be prepared via OS or (e.g. for embedded environments) via machine code (not based on C) linked from reset vector. The question does not have a clear answer. Initialization is something that happens in the abstract machine the C standard uses to describe how a program must behave, and the only requirements in implementing that machine are that the observable behavior described by the standard must be produced. The initial value of an object may be produced at compile time (even if calculating that initial value requires a complex calculation) or at run time (even if the initial value is a simple constant) or not at all (as long as the observable behavior of the program is produced in some way). Furthermore, the initial value might appear in immediate values encoded into instructions, in memory described by the object file, in memory when written during program start-up, in memory when written while executing a function, in a register, or elsewhere. An object might be held in different places at different times, and it might share storage with other objects or with other instances of itself (as when a function executes recursively), even simultaneously. A more useful question to ask is: What are the costs and effects of various object initializations? Again, this is not defined by the C standard, but it has real-world consequences. Initialization of many objects or large objects can have a noticeable drag on performance and can affect product quality. The rest of this answer assumes one is using a compiler of good quality and is requesting optimization (as with the -O3 or -Os switch using Clang or GCC). A declaration such as int x = 5 at block scope is likely to result in 5 being hard-coded into an instruction, if it is needed at all. The initial value might not be needed because the compiler optimizes further work with x so that the initial value is incorporated into the first expression(s) that use x. (In the code shown in the question, x is not needed at all since it is never used, so the compiler will remove it from the program entirely.) A declaration such as static int y = 5 is likely to result in 5 being written into a data section in the object file (and, when the object file is linked to make an executable file, the data section will be copied or merged into the executable file). Again, this can be subject to optimization. If int x = 5 were declared at file scope, it is an external definition, and the compiler must make it available to other translation units (compilations of other source files), so it has to be stored in memory (unless the compiler and other developer tools are capable of optimization across translation units). In this case, the compiler is likely to write 5 into a data section of the object file. With small objects and simple initial values such as these, there is almost never any reason to be concerned with when or how they are initialized, because the costs are so cheap and because no improvements are available. With int z[] = { 1, 2, 3, 4 }; at block scope, the array is small enough that the compiler might handle it in the same way as the single int x above, depending on circumstances. In the situation where the array is larger, this situation might be handled: The values 1, 2, 3, and 4 are written to a constant data section in the object file. When execution effectively reaches the declaration, the compiler allocates storage for z, likely on the stack, and copies the data from the constant data section into z. (It may be hard to say when execution reaches the declaration, since the abstract machine model means the C implementation is free to rearrange many things. Execution of statements before and after the declaration may be rearranged and mixed together.) However, suppose you have code like this: In this case, the compiler can see that no member of z is changed before its initial value is passed to f. When implementing this, the compiler might skip the step above of copying 1, 2, 3, and 4 into the storage allocated for z. Instead, it may implement the loop by reading from the constant data, passing each value to f, and writing the result to the storage allocated for z. In this case, was z ever initialized? The program had the initial values stored in the constant data section, but it never wrote them to the storage particularly allocated for z. It only wrote derived values later on. However, again, the real question is what are the costs of this? We had to store data in the constant data section, and we had to call f repeatedly. Suppose z had thousands of elements instead of four. Could we reduce those costs? If f is a pure function (depends only on its arguments, not any global state), then there is no point in storing 1, 2, 3, and 4. We ought to store f(1), f(2), f(3), and f(4) and skip the execution of f at run-time. If you have a good compiler and the source code of f is visible while the compiler is compiling this code, the compiler might do that"it might store the results of calling f rather than just the explicit initial values. (Even if f is not visible, the compiler might do this for known functions, such as cos or log.) If you are working on a project for which this is important, you should get to know your compiler and how well it does with things like this. There is no uniform answer, particularly as technology continues to develop. If an initialization like this is important for your application, an alternative is to write a program that computes the initial values (f(1), f(2), and so on) and writes those into a new source file. At compile time, you would execute that program and then compile the resulting source code. In C, initialization costs are not often a problem except when you have a lot of data that can be preprocessed with an auxiliary program as described above. It is more of a problem in C++ where constructors for classes can be quite extensive. The compiler's job is to do what it's told. You have issued it with the program The C standard permits a compiler to produce compiled code that replicates exactly the observable behaviour of your program. To that end, any decent C compiler with optimisations turned up to maximum will produce compiled code that is equivalent to If you want to know how your specific compiler has dealt with your source code, then check the generated output. 
c-8-27	X	Getting incompatible pointer type errors when using blocks with qsort in Clang I want to dynamic declare the function pointer and sort it But I am getting Error below: error: passing 'int (^)()' to parameter of incompatible type 'int (* _Nonnull)(const void *, const void *)' qsort(values, 5, sizeof(int), /ERROR/comp); Note: passing argument to parameter '__compar' here int (* _Nonnull __compar)(const void *, const void *)); Well, a block isn't a function pointer, and you can't really even wrap a block into a function pointer, so you might as well give up with that. Instead use the function qsort_b which is meant to be used with a block. int (^comp)() = ^int(const void *a, const void *b) { return ( (int)a - (int)b ); }; qsort_b(values, 5, sizeof(int), comp); But then, here you don't even need a closure, so you can use an ordinary function and a pointer to it: You can have several comparator functions to choose from, just assign the desired comparator to a function pointer variable: However if you need to have some state within the actual comparison routine, naturally this doesn't work well. 
c-8-28	X	How to texture mapping on opengl? I'm making the Solar System by OpenGL (only use gl, glu) So I have to texture mapping on my sphere. However, I don't know how to do texture mapping. What functions need when performing a texture mapping in OpenGL? I think I can't use the function AUX_RGBImageRec 
c-8-29	X	Difference in behaviour of rand() function in C I am trying to implement multiply-shift algorithm for hashing and need to generate a new random number every time. I used a function to do the same as follows- Here u and k are global variables. If I call this function in a loop as follows- I get the following output- 15 528638629 15 528638629 15 528638629 15 528638629 15 528638629 However, if I use srand before a for loop as follows- The output changes as follows- 638629 290058 512341 826358 80629 Why is this difference in behaviour? If I keep srand() inside the for loop in the last example, it again starts printing same values again and again. I apologise in advance if this is a stupid question. Also, I'm using GCC on Ubuntu, if it makes a difference. Here's the implementation of srand() and rand() in MSVC. Implementations on other platforms may differ, but they're essentially the same (calculating the next number from the current number). So calling srand() with the same seed is guaranteed to generate the exactly same sequence. You can mix some stuff up to get a better seed: 
c-8-30	X	writing array of structures to bin file Hello I have an array of structures that I am trying to write to a bin file. However I can only get the 'name' data to show. correctly.the rest comes out as illegible garbage . Here is my savebin function to save to the bin file. 
c-8-31	X	"undefined reference to" error when compiling a C programm i am getting this output for a simple stack problem please anyone solve this.. what is undefined reference to top ?? except this error everything is just working fine. on compiling the program, the shell displays the following error: output : /tmp/ccnL2ANB.o: In function main': main.c:(.text+0x84): undefined reference totop' collect2: error: ld returned 1 exit status 
c-8-32	X	Trying to sort input by names with a struct, but the program crashes on this function This keeps crashing my program, I feel likes it missing something above statement is wrong, I think there is typo mistake as you are comparing e[j+1].name>0 which is incorrect, it should be your complete code as You have two primary problems. (1) your bubble sort invokes Undefined Behavior by indexing j+1 which allow a read beyond the bounds of e in sort, and (2) your closing parenthesis for strcmp is incorrectly placed after the >0. There are two fundamental things you can do to protect against just this type of coding error, (1) always compile with compiler warnings enabled, e.g. that means adding -Wall -Wextra to your gcc compiler string, or adding -Weverything to your clang compiler string, or adding /Wall to your VS (cl.exe) compiler sting and do not accept code until it compiles without warning, (2) space your code a bit more adequately to help you clearly see where the funciton parameter lists end. This is more a matter of choice, but can greatly improve the readability of your code, e.g. (note: using a typedef for your employee struct can make the syntax a bit easier by eliminating the need to prefix each use of the employee_t with struct) Example Use/Output Look things over and let me know if you have further questions. 
c-8-33	X	Embedded C operators ... Varying responses on different machines I have varying responses for this. I had this question in one of my exams and would just like to know if I am missing something. Can someone predict what the answer is so that I can tally it with my answer? I don't want to give the answer now because it will influence the responses that I get. 
c-8-34	X	Converting string to uint8_t in c I am accepting string input, I need to convert this data into uint8_t array For example, I accept string "encrypt" I convert this to byte array and store it into uint8_t in[7] = { 0x89,0xE2 ,0xBC,0x01,0xE1,0x10,0x08 }; warning: dereferencing 'void *' pointer returnbytes=(uint8_t)bytes[i]; ^ error: invalid use of void expression returnbytes=(uint8_t)bytes[i]; Please let me know how to solve this. Plz note the input is char array[20] for void *. 
c-8-35	X	Different results when data type is specified as int or float or double When compiling and running this program why is it that we get "Greater" instead of "Equal"? I checked, when we specify data type as int we get "Less" and when specified as double we get "Equal". What is the reason? It's because int truncates the value, meaning it strips off the decimal part without rounding so turning 9.8 to int by (int) 9.8 gives 9. When g is type double it returns equal because by default decimal numbers are double. When g is a float then you have a comparison between a float and a double which is not good since double has more precision points than float meaning it could result in mismatch. The values used in an expression are considered as double (double precision floating point format) unless a "˜f' is specified at the end. So the expression "g==9.8"? has a double on right side and float which are stored in a single precision floating point format on left side. In such situations float is promoted to double. The double precision format uses more bits for precision than single precision format. More here. But, if you did this you would get equal: 
c-8-36	X	distributed algorithm in C I am a beginner in C. I have to create a distributed architecture with the library MPI. The following code is: I use the command in the terminal: mpicc .c -o my_file to compile the program Then mpirun -np 101 my_file_c to start the program with 101 threads But the problem is I have the following error int the terminal: It seems that I have a problem with the master but i don't know why... Any idea ??? Thank you :) This behavior is very likely the result of a memory corruption. You cannot depending on what you want to achieve, you can try instead or 
c-8-37	X	Getchar not stopping on comparison Above is my code from K&R C book for example 1.5.2 but I changed the code so getchar() is checking for -1. However when typing in negative one (-1) the code does not stop reading in getchar(). How do I get the code to stop and why is it not stopping? The getchar() function reads a single byte from stdin, and returns the value of that byte. For example, on an ASCII based system, the byte value 32 represents a space, the value 33 represents an exclamation point (!), the value 34 represents a double quote ("), and so on. In particular, the characters - and 1 (which make up the string "-1") have the byte values 45 and 48 respectively. The number -1 does not correspond to any actual character, but rather to the special value EOF (an acronym for end of file) that getchar() will return when there are no more bytes to be read from stdin. (Actually, the EOF value is not guaranteed by the C standard to be equal to -1, although on most systems it is. It is guaranteed to be less than zero, though.) So your loop, as written, will continue to run until there's no more input to be read. If you're running your code from a terminal, that basically means it will keep running until you type Ctrl+D (on Unixish systems) or Ctrl+Z (on Windows). Alternatively, you could run your program with its input coming from a file (e.g. with my_program < some_file.txt), which would cause the loop to run until it has read the entire file byte by byte. If you instead want to read a number from stdin, and loop until the number equals -1, you should use scanf() instead. 
c-8-38	X	morse to english i have tried everything This decoder doesn't work , I've tried with strtok too can some on please help. This is my project for the first semester. 
c-8-39	X	A thread call a function multiple time Say there is this integer A. Each time func() runs, increases A by 1. And I call this function with 2 threads. Example: If the user give an input 5, each thread run 5 times, which makes A = 10. This is what I have in Main Thread: My way is that, if the user wants each thread runs 5 times. I will make a loop and each time it create "new" thread, which is actually overwritting. I think we can say that I called 10 threads or I used pthread_create() 10 times. But I was told that this is wrong. It should be that I created 2 threads only, and each thread run 5 times. But then I don't understand, how can I call the function 5 times with each thread. I must use pthread_create() each time if I want to threading a function, right? Is there anyway that without looping pthread_create() 5 times, I can still call func() 5 times with threading? No, there is no way you can run one run thread more than one time because for n number of thread creation, you have to declare that many no of threads and threads shares the address space of the process in which they are running and have their own stack to run the thread function once return status is collected using pthread_join(), thread_1 is completed, can't run again. thread1. So only solution is either create 5 pthread_t variable or create array of pthread_t. Solution-1 : Solution 2 : As pointed by others Since you defined only one handler func for 5 thread, all threads are accessing same thread handler(func), it may yields in unexpected result as all threads try to access/modify same variables inside func. Is there anyway that without looping pthread_create() 5 times, I can still call func() 5 times with threading? I think intention may be that not to call func() from main thread 5 times that's not possible instead run main thread only once and from func() you can do switching between different thread_handler using mutex. 
c-8-40	X	CLion writing units tests for c If anyone can please fix and re-share attached CLion library project (C language) with unit tests passing, it'd help a lot, although I'm using googletest but running into problems. It says. Can't resolve type 'ASSERT_EQ' I've uploaded this minimalistic example project for download. arithmetic.h arithmetic.c tests.c 
c-8-41	X	C Programming, Function created and program does not exit and expects input I am currently new to c. I am supposed to create a function that is a decompression for a string. For example: I finished writing my code and when compiling, the terminal expects me to write input and doesn't exit as it is supposed to. I am new to functions and asserts and this is my first time to work with them so your help is highly appreciated :) I know I have messed up my code somewhere but i am not sure where exactly. :/ Thanks once again! 
c-8-42	X	Contiguous Memory Allocation in C and Memory Access Latency I am reading this paper. http://www.ece.cmu.edu/~ece447/s13/lib/exe/fetch.php?media=moscibroda.pdf In it, the current method of memory access used for most architectures with multiple cores is discussed. The paper provides examples of the limitations of the current method when dealing with concurrent threads where on is accessing memory in sequential instructions that is contiguous and the other discontinuous memory locations in sequential instructions. According to the paper threads that are accessing contiguous memory in sequential instructions will be serviced first by the memory controller. I certainly do not doubt this but the author provides two codes to illustrate an application where contiguous memory is being accessed sequentially and one where contiguous memory is not being accessed sequentially. Here are the codes. Contiguous memory access Non-contiguous memory access My question is if you were to implement this code in C and compile it for x86 or ARM, then run it on some operating system, say Linux, would you have any guarantee that the memory locations of the original buffers you are allocating are physically contiguous? Would they not be only virtual contiguous memory (unless a Linux method like kmalloc() was used)? *Note: The author specifies that the code provided is pseudo-code, so perhaps my quandary with implementation is unfounded. My question is if you were to implement this code in C and compile it for x86 or ARM, then run it on some operating system, say Linux, would you have any guarantee that the memory locations of the original buffers you are allocating are physically contiguous? Answer: yes The code is not pseudo code, it is actual C (missing only % N, the modulo operator, required to limit the return of rand() from 0-(N-1)). The key to the contiguous guarantee is that arrays are used. Arrays in C (as opposed to pointer to pointer to type). That guarantee sequential memory locations for all elements in virtual memory (which is normally the only kind of memory handed out by modern memory managers). In the Contiguous memory access code, you are simply iterating over the contiguous elements in-order, where as the non-contiguous example iterates over random indexes in the array. Your quandary is not unfounded, as there are many instances where collections of objects do not guarantee adjacent elements will be sequential in memory, but the author specified the use of arrays in the example which guarantee all elements are sequential (by definition). Access in the non-contiguous example is made non-contiguous by the use of rand() (which is pseudo in the since it is missing the % N, but not in syntax) (e.g. index[j] = rand() % N; would limit the assignment to 0-N, but not guarantee all indexes were covered) From my read the intent of the example was to emphasize the direct sequential access within a contiguous block and the non-contiguous example was simply provided as a contra-example where the author illustrates randomly accessing different elements within a sequential block. 
c-8-43	X	Stream audio to python server through socket in C So basically I am trying to stream the audio that is coming from my C program to a server that I built in Python over a socket in real time. The problem that I'm having is that since my sample rate is 44100, my server is falling behind and loosing some of the data. I am trying to send the audio buffer through the socket as soon as I get it. This is a program for an embedded system so I don't have that much memory to work with. I am recording the audio using PortAudio. The code below is the callback that gets called every time there is new audio to be handled. Also, how can I save the data that my python server receives as a 'wav' file? Here is the C code to send the audio to stream the audio to my Python server through a socket: 
c-8-44	X	Should I reset termios settings on SIGINT/SIGKILL? I was playing around with termios and I figured out quickly that if I change the terminal settings and exit, my changes will persist and screw up my environment. So I setup my program to save the initial settings with tcgetattr and reset them before exiting. I predicted, however, that if I hit Ctrl-C to send SIGINT while my program was running that it would cause the terminal to still have my modified settings since my program wouldn't have executed the code to reset them back to the old settings. But that didn't happen. In both Ubuntu and macOS Sierra, my terminal settings were reverted as if I had reset them in the program. So the question is: Is this behavior something I can count on in general? Or does it make sense to register signal handlers to catch SIGINT/SIGKILL/SIGHUP and revert terminal settings before exiting? (Although SIGHUP means that the terminal session ends, so maybe that doesn't matter, but I'm sure you get my point.) Code Answering this question probably doesn't require looking at code, but here is my example, in case you're curious: I was a bit surprised to see that in my Arch Linux terminal settings also "were reverted". But in fact they remained the same. When I changed your code I managed to track some anomaly. So here if you don't press any button the output is -1. If you hit Ctrl-C, recompile and launch the original program (from the same terminal), it will also print -1, so there is no automatic reset. I don't know why ECHO is "hidden" and I'd like to know, but I suggest you to manually revert all terminal settings. 
c-8-45	X	What's with all the junk information in my exe file? I made a very simple program using dev c++ v5.11 (in c language), and I wanted to take a look at the compiled code in HxD to see how it compares to the original code. The problem is that around 95% of the compiled information looks like junk information, and it seems to have taken a 9 line code and stretched it out to a 127 kb file, with many null spaces, error handling strings, and a section with many type declarations, in string format. My question is, why is this a thing, and what other program could I use to just compile the code to be as long as it needs to be? Original code: Compiled code is too large to be put in the body Any complete answer will be specific to your compiler, and the manner in which you have built your program, and the host system. I'll focus on the generic concerns. Compiling with debugging information and without optimisation (often the default settings of a compiler) will result in a lot of extra information in your executable. And, there are also link options, such as related static versus dynamic linking, which control how much information from a library is copied into the executable (with trade-offs of executable size, reliance on libraries being accessible at run time, etc, etc). There may also be utilities on your system (e.g. strip under unix) to remove some unneeded information from an executable. You might find this article interesting, which attempts to get the smallest possible executable size, for a Linux executable: http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html I imagine the majority of your executable is taken up with code from the stdio.h include. You also might be interested in the looking at the assembly output, rather than looking at it in HxD, which you can get with the /fa switch in visual studio. You can find this setting under Project->Properties->Configuration Properties->C/C++->Output Files. 
c-8-46	X	strcmp is not working correctly? I create my shell when the program begins to run, then I get the buffer input to call other programs in the same directory and its working fine. The thing is that when I type exit I want to close my shell and continue to the command prompt e.g. C:\ I compare the buffer with the check[] strings with strcmp and its always not equals and not working correctly. 
c-8-47	X	Different results when running the function multiple times - C I've written a function and when I'm running it once it works perfectly, but when I'm running it multiple times with different inputs something goes wrong. The purpose of the function, is to sum all the numbers within the string. When I'm running the function once with this main (for example), it works perfectly; But when the main runs the function multiple times with different inputs, the output is completely wrong. The output from this main; Is; One issue is that you do not terminate your temp-string with a '\0'-character before passing it to atoi. You could write: Note that passing character sequence that is not correctly terminated with '\0' to a function that expects a (terminated) string yields undefined behaviour; that's probably what you observe then. Second, if the last character of your input string is a digit, you increment i twice and thereby miss the string terminating character of the input. This again leads to undefined behaviour. To overcome this, you could check if you are at the end of the string before incrementing i: In addition to not terminating temp[j], you also skip the terminating character in str by incrementing i both in the inner loop and outer loop. When you skip the termination, it starts processing the next string [ or depending upon your compiler/OS, any old crap ]. btw, while (isdigit(str[i])) is not only more readable, portable and efficient than yours, it also makes the comment unnecessary. Correctly running program: I'd like to congratulate Lior Gingihashvili on using the test code shown in the question. That is, IMO, an excellent way of working. This code doesn't attempt to fix the original code " that's already been done by the accepted answer. This code shows a whole different way of approaching the problem. It uses a different set of library functions " strcspn() and strtol() " and it avoids any copying of the source string (so it doesn't run into problems with null terminating strings). When run, the code produces: (Yes: I did get !!FAIL!! lines when I had a bug in the code.) 
c-8-48	X	Why can "X" be the last character of output? I was studying this program and I found out "ZYYX" can be the output. I don't quite understand why. In my understanding, there are four process in total, parent->parent, parent->child, child->parent, child->parent. And there is no doubt child->child prints Z. And child->parent prints Y after child->child prints Z. And parent->parent should wait until parent->child prints X. So why it is possible that X is printed as the last character of the output? I realized that waitpid waits for any child process, so if ZY has been printed out, then Y can be printed out immediately since it has waited for "Y". Thus, X can be printed as the last character. I don't think I've seen if (fork() == fork()) used in code before " congratulations! I'm not wholly convinced by your tracking; I'd want to see the PID of each process included in any printing it did, and I'd want a newline at the end of each output. Also, there's at least one process not waited for in the original code. Here's a rewrite which reports the PID of the process doing each print operation. Some of the processes exit with non-zero statuses, mainly to make it a little more interesting in the output. The code tracks the corpses detected and reports on their status. It also introduces a loop to clean up dead children. The original process has a child that is not cleaned up otherwise. Sample output: As you note, there will be 4 process, based on the two forks, and each will print one letter: The graph on the left shows the parent/child relationships -- / is the first fork and \ is the second fork(s). So CC prints Z because both forks return 0, while PC prints X. The other two both wait for a child to exit, then print Y. In the cas of CP, there's only one child, so that Y will always be after the Z, but PP has two childre, so that Y might be after the ZY or after the X. Either is possible. So you can get any of 
c-8-49	X	Size of structure with data padding I am trying to find size of the following structures in C on my 64 bit machine. 1) 2) 3) 4) My question: is there any difference between question 1 and question 2 as well as question 3 and question 4. After manually solving those questions, I got the following answers: Question 1: sizeof(vs1) = 12 bytes Question 2: sizeof(vs2) = 8 bytes Question 3: sizeof(vs3) = 12 bytes Question 4: sizeof(vs4) = 16 bytes 
c-8-50	X	To merge n number of arrays into one using functions and pointers in C i have tried doing it with functions and arrays but have failed in-order to do it with pointers. I want to do it with the help of pointers instead of arrays, but i am having problem with passing and calling the values of arrays using pointers. below is the code. I guess this should solve your problem.Let me know if it's correct. 
c-8-51	X	Why error 1400 Invalid window handle? Why does it return 1400 invalid handles when you create a window? Shouldn't it?There's no window handle in the create window function, okay? How could it be an invalid handle? I've been searching through the search engine for a long time, but still can't solve this problem? Why does CreateWindowExW() return 1400? Code in line 44. Here you haven't tested if there has actually been an error. You need to test the handle you get back from CreateWindowEx before you call GetLastError. Otherwise it will return some previous, unrelated error, or some random value. Only call GetLastError after a failed CreateWindow (that is, if CreateWindow returns NULL). the last error value is unspecified after the vast majority of successful windows API calls, you must check the return value before calling GetLastError. You're using WindowHandle in the window procedure before it's been set to the return value of CreateWindowEx. Part of that CreateWindowEx call is calling the window procedure with WM_NCCREATE and WM_CREATE. Your window procedure calls DefWindowProc with a null handle at that point. The simple solution here is to use the _windowHandle parameter instead of your WindowHandle global. Also note that in order for your window to be visible, you'll need a call to ShowWindow. In addition, the quit message you post isn't specific to that window, so your GetMessage call will not retrieve it and the application won't end. 
c-8-52	X	SCIP compile error: Undefined symbols for architecture x86_64 I am trying to install SCIP, the MILP optimization software using cmake. First, I downloaded the SCIP Optimization Suite from here, then following the instructions, I started by using cmake to build SoPlex (which it indicates that SCIP depends on). I pointed it to the appropriate directory then attempted to build SCIP. Cmake did not throw any errors, but when it came time to "make" it, it got ~60% of the way through then threw the following error: I did some googling around to diagnose this, but everything I found seemed to be regarding XCode, which I am not using? *I am on a mac running 10.11.3 **I apologize for the--what I am sure is--flagrant abuse of terminology, but I am not at all familiar with all of this compiling stuff. 
c-8-53	X	Put multiple pragma directives into one preprocessor define I need to push/pop several gcc diagnostics in my code. If that was needed in a single file I would do the following: But I need this in multiple locations. So I want to have a #define or something similar. I thought about the following but c preprocessor does not allow #pragmas in #define. Is there a way of achieving this? Yes, there is a way to do this. C99 introduced the _Pragma operator (also available in C++ since C++11). A pragma such as can also be written as The latter is not a # preprocessor directive, so it can be generated from macros: 
c-8-54	X	Convert BST to DLL in pre-order (base) I have a BST, and I have to make it into a two-way linked list on pre-order base. The function should change the pointers of each node in the tree so that the left pointer points to the previous member in the list, and the right pointer points to the next one. (The previous(left) of the root is NULL; likewise next of the last node(right) is NULL.) I should return the head of the created DLL to print the list. Obstacles: You can not use auxiliary functions and you have to change the pointers of the tree itself and not create a new list. The implementation is in C. Here is my code; I hope someone would help me here. Here's some code that seems to work. The conversion function is quite simple in concept, but requires some care in handling the details. For this problem, it seems to me that when you are processing any given node, you need to get three elements: the current node (root) the list for the left-child (which is generated recursively) the list for the right-child (which is also generated recursively) And the resulting list needs to be: current node, followed by the list for the left-child, followed by the list for the right-child. Given the tree from the question: The final result is: node 4, followed by the list from node 2, followed by the list from node 6. Of course, the list from node 2 is: node 2, followed by the list from node 1, followed by the list from node 3. And the lists from node 1 and node 3 are trivial, so the result is: node 2, node 1, node 3 And similarly the list from node 6 is: node 6, followed by the list from node 5, followed by the list from node 7. And the lists from node 5 and node 7 are trivial, so the result is: node 6, node 5, node 7 And hence the final result is: node 4, node 2, node 1, node 3, node 6, node 5, node 7 The lists are doubly-linked and null-terminated. That means that on return to the invocation processing node 4, the left list has the organization: The trivial cases return a list with null next and previous pointers. The right list has a similar organization for Nodes 6, 5, 7 in sequence. Assembling the final result requires setting the left pointer of Node 4 to null, setting the right pointer of Node 4 to the head of the left list, setting the left pointer of the head of the left list to Node 4, finding the end of the list starting from Node 4's right pointer, and then adding the right list after that and setting the left pointer of head of the right list to the right pointer of the node pointing at the right list. Either the left list or the right list or both can be empty; these require a modicum of care. This is the resulting code, complete with a trio of test cases. The pointer to pointer to node technique for traversing lists is rather powerful and worth learning. You can find other SO questions for the technique, such as: What is the double-pointer technique for simplifying the traversal of linked lists? An interesting linked list idiom The print_node() function is tuned to running on a Mac (in 64-bit), where memory addresses typically have leading zeroes in the first 4 nybbles, so 12 hex digits is sufficient to print them. Sample output: The first test case corresponds to the sample tree from the question. Given the construction of the tree, the nodes are presented in the same order in both the BST print and the list print. However, the pointers are quite different. That test case is a little too simple for comfort. It doesn't test the cases where a given node in the BST has either an empty left tree or an empty right tree (but not both " that would be a leaf node). 
c-8-55	X	Finding unused memory in process memory I'm looking for a reliable way to find unused memory in a C program's process since I need to "inject" some data into somewhere without it corrupting anything. Whenever I find an area with only zeros in it, that's a good sign. However, no guarantees: It can still crash. All the non-zero memory is most likely being used for sure so it cannot be overwritten reliably (most memory has some kind of data in it). I understand that you can't really know (without having the application's source code for instance) but are there any heuristics that make sense such as choosing certain segments or memory looking a certain way? Since the data can be 200KB this is rather large and finding an appropriate address range can be difficult/tedious. Allocating memory via OS functions doesn't work in this context. Without deep knowledge of a remote process you cannot know that any memory that is actually allocated to that process is 'unused'. Just finding writable memory (regardless of current contents) is asking to crash the process or worse. Asking the OS to allocate some more memory in the other process is the way to go, that way you know the memory is not used by the process and the process won't receive that address through an allocation of its own. 
c-8-56	X	Recursion process My questions is regarding recursion, and i am little stuck to understand one point. I debugged a small piece of code, and i know how the flow is working , but question why and how? I will explain my doubt. I know it might be a stupid one to ask , but clear me on this one. Check the code -: When I give a user input of 2 , flow goes to if condition -> Valiadte -> goes inside -> call first sum (2-1) -> goes up again -> validate -> call first sum (1-1) -> gets out of if -> calls second sum (1-1) -> goes out of if -> calls add function -> calls sum again now (2-1) -> validate if -> calls first sum (1-1) -> goes out -> call second sum again(1-1) -> calls add -> exit. Recursion definition says -: When a function calls itself it's a recursive,The recursion continues until some condition is met to prevent it. My question is why is second sum called 2 or more times?? I mean if you see it mets the condition (1-1) on first call, so it should exit out and just call add, but instead after calling add it again goes for (2-1). Is the second Sum getting called in reverse order?? Is it like if first is called 123 then second have to go 321 even after it mets the condition ??Is that how recursion process actually works? Can anyone explain the concept? A little update to my question. I removed second inner function call , and now left with one inner recursive function. Check updated code -: Input = sum(2). Now when sum goessum(1-1) or sum(0) -> exit if . I see the call didn't end out of function . The value of num is again traversed back to 2 going(0->1>2) -> goes inside if (num==2) -> print on console -> exit function. What does that indicates ? If i make a guess is it like -: The inner call works as pass by value and not reference? So even inner recursive function is updating value of num it is not changing value at that memory address which is still 2 . So is the flow something like this - : sum(2) actual memory address value -> sum(1) copied value -> sum(0) copied value . Ok now I can go out of if . But wait!! I am not able to go out of function , num have to go back and update with actual memory address value -: num = 0 , num=1 , num=2(That's what I was looking for ) . Great!! out of function. Is that what's happening ?? I am still little stuck. Adding some simple printf statements and keeping track of the "call depth" in a global depth variable provides a nice representation of what's going on: With input 2: You can also print at the end of sum, to see when the function is being exited: live example on wandbox As you have it sum is never going to terminate (it would if you got rid of the second recursive call) with an input of 2 the call sequence is: call sum with 2 the if evaluates true so the first sum is called with argument of 1 the if is again true so the first sum is called now with argument of 0 the if evaluates false so now the second sum is called with argument of -1 the first if evaluates true so the first sum is called with argument of -2 the first if evaluates true so the first sum is called with -3.. . I really do not understand why you have the second call to sum. It is because you don't modify the value When you call sum(2): the function call sum(1) at [a] and because 1 is not 0 it calls sum(0) at [a] again, recursively you do not modify number and this is why sum(0) at [b] is called again then is add(1) called, when it returns, you have just finished sum(1) at [a] call and now you call sum(1) at [b] because variable num is still 2 and it was not modified by the previous call and so on 
c-8-57	X	I keep on getting "lvalue required as left operand of assignment" and I don't know how to solve it Basically I need to give the number of vowels in an array of characters ( last Subroutine, but I keep on getting this error saying that "lvalue required as left operand of assignment" I tried searching a bit on my own for what it meant (and there was answers) but as it wasn't exactly the same thing that I was doing I still didn't really get it. can someone explain to me what I need to do ? https://pastebin.com/gN3zCWJJ The main issue here is located in the function Anzahl2, here you are iterating over the array named kette. In the if statement you have 2 issues. Instead of comparing the actual cell of the array you are in fact assigning a new value int to the cell. Use == (equals operator) instead of the = (assignment operator). Every comparison in the if statement should be separated by || (logical or) insted of | (binary or). The error is here. You have tried to assign to it , you should use ==. And also you have to use logical or || not the bitwise or |. So the corrected comparison would be Also will be Also you can use strchr() whether the character is one of "aeiouyAEIOUY". Something like this You are not checking the return value of fgets. You should check it to know whether the call to fgets() was successful or not. 
c-8-58	X	C - AddEdge Function in Graph I'm trying to create vertices that have lecture names.My aim is to connect the lectures if the lectures belong same student.But for start i make a prototype to create graph and vertices.But i cannot connect them with edges.I connect them but no output given.Program says test.exe stop working Here is my code I just couldn't understand why you are using array because it makes no sense to use that pointer. If you don't want to get rid of that array pointer you can use something like that. Program says test.exe stop working I would like to point out that you have a serious memory problem. You use a global and local *graph; in the main which you initialize. Yet, in the function you have global *graph which has been not initialized! Therefore your program will not work properly. You have two options to correct the problem. Fast but not recommended by me 1) Drop the declaration of the local *graph,to newAdjListNode(char name[10]) and use the global *graph; 2) Drop the declaration of the global struct Graph *graph; and pass local *graph to your newAdjListNode(char *name, struct Graph* graph); This version of the program is presented below: You also shadow globals *desti, *source, *temp, *pCrawl; in and global struct AdjList *array; is dandling unused. Clean your usage of globals. globals are bad programming practice. The program logic still has to be improved but at least you have a proper memory allocation. While you may have a running program, your data structure design is broken. How would you add more than one edge from a given vertex? An adjacency list representation of a graph has two parts: A set of vertices. A map: vertex -> list of vertices. // These are the adjacencies In C it's convenient to put the vertices in an array. Then you can use indices into the vertex array as "handles" to the vertex info itself. This allows the map to also be an array: an array of lists. With this, life gets much simpler: Now you can initialize the graph: Adding a vertex is just copying its data into a fresh location in the vertex array. We return its handle for future use. Now we can add an edge from any vertex to any other given their ids by pushing a new adjacency onto the head of the "from" vertex's adjacency list. The node contains the ID of the "to" vertex. Another capability you might want is to look up a vertex by name. 
c-8-59	X	Unit Testing a Function Macro I'm writing unit tests for some function macros, which are just wrappers around some function calls, with a little housekeeping thrown in. I've been writing tests all morning and I'm starting to get tedium of the brainpan, so this might just be a case of tunnel vision, but: Is there a valid case to be made for unit testing for macro expansion? By that I mean checking that the correct function behavior is produced for the various source code forms of the function macro's arguments. For example, function arguments can take the form, in source code of a: literal variable operator expression struct member access pointer-to-struct member access pointer dereference array index function call macro expansion (feel free to point out any that I've missed) If the macro doesn't expand properly, then the code usually won't even compile. So then, is there even any sensible point in a different unit test if the argument was a float literal or a float variable, or the result of a function call? Should the expansion be part of the unit test? As I noted in a comment: Using expressions such as value & 1 could reveal that the macros are careless, but code inspections can do that too. I think going through the full panoply of tests is overkill; the tedium is giving you a relevant warning. There is an additional mode of checking that might be relevant, namely side-effects such as: x++ + ++y as an argument. If the argument to the macro is evaluated more than once, the side-effects will probably be scrambled, or at least repeated. An I/O function (getchar(), or printf("Hello World\n")) as the argument might also reveal mismanagement of arguments. It also depends in part on the rules you want to apply to the macros. However, if they're supposed to look like and behave like function calls, they should only evaluate arguments once (but they should evaluate each argument " if the macro doesn't evaluate an argument at all, then the side-effects won't occur that should occur (that would occur if the macro was really a function). Also, don't underestimate the value of inline functions. 
c-8-60	X	GtkLabel doesn't display newlines from file I would like to update a GtkLabel with data imported from a text file, but it doesn't evaluate \n as a newline character, as it should normally do. The file contains (for example): How do I get this \n understood by GtkLabelÂ ? This is my complete code: The key is converting the literal \n to \n. There are two ways to do this I can come up with (I leave out the file reading part): Text in test file: That's\na\ntest,\nfolks! 1. 2. Note that you have to escape twice: first for C, then for the regex engine, so that the latter sees: replace \\n with \n. You have to escape both backslashes of \\n for C, that's why you get four backslashes in the string that has to be replaced. Result for both: Both ways need a newly-allocated string to store the converted text, so you have to free the memory after usage. 
c-8-61	X	how to convert LF texts to CRLF in C rather new to c coding and Linux but for an assignment i have to write a program completely in c that converts LF text files to CRLF been googling like crazy but just cant find an answer hopefully someone can help me out. 
c-8-62	X	Ncurses window zoom Im using ncurses to create a game on c, but the window i created based on the game settings (LINES AND COLS) is too small and its hard to see what's happening on the game. Is there any way to increase the size of the window(Without changing the LINES and COLS) to make the window more visible and allow users to see what's going on the game ? Code : You could use video highlights such as bold, or reverse (or even other colors) for the text drawn using these calls: That last parameter is more than a character, it can have flags combined with it, e.g., 
c-8-63	X	How do you read all arguments in a function without using macro and libraries in C? Like in topic, i can't use library functions and macros (va_start, va_arg, va_end). I need to do something like this: EDIT: I need one more tip, how to use function write() with these arguments? 
c-8-64	X	Replace second line Array, in File text I want to Replace data in line of text and column of score. Example in this image. I want to replace score the name of "Budi". Screenshot Analogy: I using array but I got error in strcmp. 
c-8-65	X	knin game which based n some rules and specifications the game is played on a w x h (w width h height) board which into 1 x 1 squares.players starting from player,place in turn a piece in one square.player pieces are distinguishable.in every n x n square for(n>2) there can be at most n-1 pieces. example i need to insert a board 3 3 then fill it like 1.1...1.1 so i need to print each 3 on a line to be like 1.1 ... 1.1 and to be more extend to other nxn 
c-8-66	X	Unsigned int not giving expected value I'm reading 2 bytes from a file and trying to use the unsigned int as an ID for my SVG output. If the file has 2 values 126 and 128 which are 0x007E and 0x0080 (buffer[0]=0x7E and buffer[1]=0x00), then, if I print out to my SVG file <g id=%u d=%s></g>",character_name_1, pathdata);, then I get the id correctly recorded as 'id="126"'. However, the second value is problematic:<g id=%u d=%s></g>",character_name_2, pathdata); gives me the following entry: 'id="65408"' The next value, which has the 2 bytes 0xA0 and 0x00, which I am expecting to be 160 is written as 65440. 0xA1 and 0x00 should be 161, but I'm getting 65441. I hope this is clear. buffer is declared with char or signed char. Change it to unsigned char. Because the elements in your buffer are signed, you are getting negative values in your expressions. Your definition of buffer is probably a signed type (char). This causes the value 0xA1 to be interepeted as a negative number and automatic sign extension is invoked (0xA1 -> 0xFFA1), to make sure the sum (buffer[3]<<8 + buffer[2]) is handled correctly. So you get the value of 0xFFA1, which is 65441. Changing buffer to unsigned char will solve your issue. Not much clear from your question, assuming buffer is array of character or character pointer. I think following change should work: 
c-8-67	X	Error when creating a list and printing its elements I want to create a list with some additional functions (inserting an additional element at the end, finding a given a element, removing element). Finding a removing works fine, however I have a problem with the list itself (and with the input). This is my actual code. I have removed a few functions to make it more readable to you. http://codepad.org/dTGjtYRx When more elements are created at the beginning of the program or during inserting additional elements the program crashes and gives an error Thread 1: EXCBADACCESS (code=EXCI386GPFLT) What is more sometimes when the list is printed 'name' is printed as a weird combination of letters/digits for example -> \360-`. this should change to that: also all your arrays should be of size [51] to keep the string terminator character. 
c-8-68	X	Static and multiple functions with same name in different headers I have two header files which define two functions with same name and different parameters. I know c doesn't support function overloading, but I thought adding static to a function declaration would allow me to declare two functions with the same name with a caveat that I could only access them in a same source file. Anyway it is not working and I'm not sure why not? Is my understanding wrong? Example: file1.h has following function: file2.h has following function: main.cpp has both headers included: Example error: Thanks in advance. bool do_something(int a); is a prototype. It tells the compiler that function do_something requires a parameter of type int and returns a value of type bool. When you call this function, the compiler can now check that you pass a correct argument and assign the return value to a variable of the correct type. As C does not have function overloading, you will understand that there can only be one definition of the function in any one compilation unit. A compilation unit is a .c source file with all .h files included. So the above description has no influence on linking whatsoever. If the function is not called, the prototype is not needed; if there is a prototype, it will not require the function to exist. And if the function is called, it may exist in any of the source files or libraries that are linked into the executable. The keyword static for a function definition indicates that the function will only be visible to other functions in the compilation unit (and so must exist in source in the compilation unit). Inlcuding the static keyword in a .h file makes no sense as it will tell each source file in which the .h file is included that the function, if used, exists in that source file. This description does have influence on the linking process, in the sense that if the function is used, it must be present in the current source file. In your case, you must decide which of the two protoypes is correct and fix the .h file accordingly - or declare a second, different function, that takes the other parameter e.g. do_something_else. 
c-8-69	X	How to share user defined functions among .c files? I am learning to share the 'functions' among a couple of files in C programming. So in order to share/access a user defined function which is created in one file (say one.c), being in from another file (two.c), we need to create a separate header file named after the file One, as one.h and should declare the specified function in one.h. Done. And then I have included the header file (one.h) in both the files one.c and two.c by #include "one.h". Now when I call the function (of the file one.c), that will find the area of the circle from two.c. I am getting a compilation error as C:\Users\Lenovo\AppData\Local\Temp\cceCxXJH.o:two.c:(.text+0x36): undefined reference to `area_circle' Name of my funtion is area_circle. Please help me whether the way I did is right to share functions among files. File one.c: File one.h File two.c I used gcc two.c -o two && two to compile and run the program. Kindly help me with this. The function needs to exist in the final executable, so you should compile both files together: Or more explicitly, link them together: As a side note, you should put variable declaration in a header file, and put its definition in one .c file, so it can be correctly linked. 
c-8-70	X	I am new to C. Second for loop is never ending why is it so This code is for printing the binary equivalent of a decimal number without using arrays As @kiner_shah stated in a comment on your question, you have an incorrect variable being decremented in your second loop. should be Using more distinct / descriptive variable names to avoid single character mistakes is a good habit to get into. 
c-8-71	X	cc2530 Texas Instrument stdbool.h I'm trying to compile SimpliciTI for cc2530 device but i get the error: warning C318: can't open file 'stdbool.h' I am using Keil Ide. Any suggestions? 
c-8-72	X	C stack usage is too close to the limit I am getting this error while doing hardly anything: I am just working through Richard Cotton's book "Testing R Code".I have looked at all the other questions on Stackoverflow that refer to this problem but those cases involved large datasets or deep recursion. I am not doing those things here at all. I am trying to run the following code: } The console output is: Cstack_info() The sessionInfo is: R version 3.4.3 (2017-11-30) Platform: x86_64-apple-darwin15.6.0 (64-bit) Running under: macOS High Sierra 10.13.1 Matrix products: default BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib locale: [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8 attached base packages: [1] stats graphics grDevices utils datasets methods base other attached packages: [1] testthat_2.0.0 assertive_0.3-5 
c-8-73	X	Where did this value come from? I am learning conversion specifier part of the C language. I know that %d works for printing value behind commas but, I don't understand why printf prints something when there are no values behind comma. There are also no compile errors. result : 13242433 Can anyone tell me why this randomly numeral appears when I run this code? This is undefined behavior. When %d is used in printf then it expects an argument of type int. What is it? Undefined behavior.(Check ref-1, ref-2) Why is it so? From standard 7.21.6.1 The fprintf function writes output to the stream pointed to by stream, under control of the string pointed to by format that specifies how subsequent arguments are converted for output.If there are insufficient arguments for the format, the behavior is undefined How to avoid? Also when compiled with gives the error (due to -Werror) This was clear enough to tell you what is going wrong. But you didn't check. then what is that the fetched value? is that just garbage value? it is most likely that the printf when sees the %d specifier tries to read one int variable's value from memory. But alas that memory don't contain anything meaningful to you. (Even accessing that memory might not be permitted.) And yes it's just some value - garbage value. Don't even think that everytime you will get some garbage value - don't rely on it or anything similar. It's undefined behavior. Next time it may crash your program or simply print my contact number.1,2 1. This last part of the answer explains the possible reason for that garbage print. 2. print my contact number - is simply pointing out that it is just a garbage value which you shouldn't care about. Moreover it's undefined behavior - seeing even a garbage value is not something that is guaranteed to happen every single time. Well, gcc shows a warning when compiling your code: I'm not sure but If you used Visual Studio, there might be some bug. In that case you should post your problem here. 
c-8-74	X	why there is no check to see if the subscript used for an array exceeds the size of array in c language? I have written this code and I am not getting any error, so I came to know that it's entirely programmer's botheration to keep a check bounds check. but I am confused by the fact that in static memory allocation the int a[10] has allocated i.e. 40 bytes during compile time so how come it can allocate more memory to it during runtime, because it's also printing the same. Nope, this is undefined behavior. And well that's why it may work and it may not. (Depends on the moon). You should avoid it. Don't think that this is making your program work by allocating more memory - it doesn't. If you write this, you are writing in some part of your program's memory which will in turn result in errorneous result or if it is trying to write to some memory which is non-modifiable, you will get error. In either way you are invoking undefined behavior - anything may happen from crashing your code to a correct execution. Don't rely on that. so if it's not allocating memory so where he is storing the elements. I just want to know what is happening internally in the system?? Well it is writing to the memory out of the bound of the array where it is not supposed to write. That is what is happening. That is why this is not what you should be doing. You are basically changing part of memory that program is being assigned and moreover which you are not supposed to change. 
c-8-75	X	int_fast32_t and int_fast16_t are typedefs of int. How is it supposed to be used? stdint.h defines: int32_t, int_least32_t, int_fast16_t and int_fast32_t as just int data type How exactly they are different and how is it useful? I'm ecpecially confused with the part of "int_fast16_t and int_fast32_t". 16 and 32 bits are implemented under the default int. How is it supposed to work? Well the header implementation mentions the reasons clearly To accommodate targets that are missing types that are exactly 8, 16, 32, or 64 bits wide, this implementation takes an approach of cascading redefintions, redefining __int_leastN_t to successively smaller exact-width types. Further more checking the section of this description (Minimum-width integer types) is helpful:- The standard mandates that these have widths greater than or equal to N, and that no smaller type with the same signedness has N or more bits. For example, if a system provided only a uint32_t and uint64_t, uint_least16_t must be equivalent to uint32_t. int16_t is an integer which takes exactly 16 bits. intfast16_t is a platform dependent implementation. On a 32 bit architecture, int16_t is misaligned and inefficient, as it has to first realigned in 32bit registers during load. intfast16_t is 32 bit memory aligned and takes more memory, but more efficient. intleast16_t is also a platform dependent implementation. It is a packed implementation which is memory efficient, but inefficient when considering performance. Similar is the case of int32_t, intfast32_t and intleast32_t. Your's may be a 32bit architecture. That is why intfast16_t, int32_t, intfast32_t and intleast32_t are all defined as int, all are 32bit aligned. intfast16_t takes 32 bit, that is it. 
c-8-76	X	how perf record get the virtual memory address of instruction of the target process and what data struct does perf use to store it I'm reading source code of perf and try to make sense of how perf record get the the virtual memory address of an Instruction of the target process that trigger perf to count(for example the virtual address of call test,which is assembly code watched by perf report's annotation). And what data structure does perf use to store the virtual address of the instruction that make perf-event happen and trigger counter? In order to get the instruction pointers for samples, you must include PERF_SAMPLE_IP in perf_attr.sample_type for the perf_event_open call. This will include the ip field in the struct for PERF_RECORD_SAMPLE events that you can read from the mmap ringbuffer. See the manpage for details. 
c-8-77	X	Passing a string through a function cuts the first few characters I have to make a code that takes in an expression in infix notation, and outputs the correct answer. The sample input is like this: The first input is an integer that says how many expressions will follow. To solve this, I created a function result() which takes in a string that contains the expression. This function works but only for the first iteration of the loop. From this error, I suspect that there's something off with how I take the input, so I placed a print statement in my main function to see if I get the correct input from STDIN: This is my output: So, from here, I know that STDIN does get the correct input. Next, in my result function, I placed a print statement that checks the value of the string that is inputted into the function. Now, if I un-comment the line in main that calls the function result, and put in the same input, I get a different output. Why does this happen? This error also happens even if I remove the print statement in the function. It happens as long as I call the function result() Input from STDIN when I called the function: I suspect it has something to do with whitespace, but I can't figure out where that error would occur? I've taken care of getting the newline already? Full Code: Well I guess I found the bug. You can see what happened here 12 charcaters got missing. Check the previous line There are 12 spaces. So this is what causes the error. Change the logic of your code. Hope this helps. 
c-8-78	X	I want to insert a string and split every 3 elements on a new line in C language I enter in my code some numbers along with dots, so I need to scan these elements and put every 3 elements on a newline for example 1.1.1.2.1..2.1. in order for it to become like a matrix Here's my code: Please help! 
c-8-79	X	Function that always return a "0" something weird It is always returning a 0. The input is a pointer to a string like "sam johnson:". So you're trying to read and verify a list which contains a name(list of char). My suggestion is to use other condition in while, instead of ' ', use '0' , because last term in a char is /0 , maybe that works. Your code looks right, Try this main function: 
c-8-80	X	Include doesn't work in a resource file Visual Studio I'm learning the WinAPI for now... 3 days ? and I'm already facing a problem. Indeed, in order to create a DialogBox, we need to write its template in a resource file ( resource.rc for example ). Here is my resource.rc: The thing is that #include seems not to be working as it should. I got resource.rc(6): error RC2108: expected numerical dialog constant when compiling, as if windows.h was not included and that the compiler didn't know what CW_USEDEFAULT is. When I define CW_USEDEFAULT on my own with a simple #define CW_USEDEFAULT 1, it works, no problem, but it would be getting round the problem. How could I get this to work ? Thanks error RC2108: expected numerical dialog constant This means you must use a reasonable number (probably 0). CW_USEDEFAULT (which is (int)0x80000000L) is only meaningful for CreateWindow() / CreateWindowEx() WinAPI functions. As the resource compiler neither supports type casts, nor allows negative dialog coordinates, it results in a syntax error. Also the style WS_OVERLAPPEDWINDOW should not be used with dialogs. Consider using WS_POPUP-based style instead. When you include windows.h from resource compiler it is specially handled by conditional compilation, because resource compiler can't parse more advanced features of C/C++ language. windows.h fragment: CW_USEDEFAULT is defined as: but it is skipped. When you put this definition directly in resource script, it can't be compiled because resource compiler doesn't handle casts. You can define but coordinate fields in dialog template are limited to 16 bits (short type), so 0x80000000 doesn't fit and it would be truncated to 0 in resource data (without any error from resource compiler). You should use real coordinates (expessed in dialog units) or reposition your dialog when handling WM_INITDIALOG message. 
c-8-81	X	GCC ignoring __attribute__((section(xxx))) I've been compiling same code for a while until I added few more code files and header files, then out of sudden GCC just ignoring the __attribute__((section(xxx))) and throw all my functions under .text section. Has anyone ever encountered such bizarre behavior of GCC? __early is a macro: After compiling to object file, I use objdump to verify the sections have been created: The output contains only the .text section, no ".early" and no ".earlydata". I've tried the -D switch and the results don't contain the 2 section mentioned here. Does this happen? 
c-8-82	X	Is there a way to have a 2D array in C, which has both integers and characters? I am writing a code which asks for a 2D array, and in that array there are names of toys and their costs. So I was wondering if there is a way that that was possible, because I tried it and it didn't really work. I am not sure if your code asks for 2d arrays. I imagine an array of structs more logical: Arrays are data structures that contains data of same object type. So the answer to your question is No. You can rather use structures for this purpose. Towards the solution... Well this is why there is a thing called structure. You put the name and their price-s in a structure and then all those structure variables are put in an array. (Here a simple demonstration is made which didn't use a 2d array rather 1d array of structs is used). Example (Illustration only) And then you will do something like (to get input) Arrays are too strict... Also as you were having confusion about array type Â§6.2.5 An array type describes a contiguously allocated nonempty set of objects with a particular member object type, called the element type.1 The element type shall be complete whenever the array type is specified. Array types are characterized by their element type and by the number of elements in the array. An array type is said to be derived from its element type, and if its element type is T , the array type is sometimes called ''array of T ''. The construction of an array type from an element type is called ''array type derivation''. 1Emphasis mine Way of using array (on the light of your question). That should be a particular member object type, not a mixture of types or anything like what you were thinking. We can get ahead of this stringent type similarity by using constructs like structure etc, which provide us with exactly what you want. Then also the array is of similar struct type but as the struct can contain different types inside of it, it provides us with what you need. My understanding of your question (its title) is that you want an array of things which are either names or numbers You conceptually want a sum type, also known as a tagged union. You should reason with abstract data types in mind (so document first all the operations of your ADT). SICP is a freely available book explaining that notion (but it does not use C) and is a good introduction to programming in general. C don't have sum types natively but provide you with raw union types, which can be used to build a sum type. See this example. Perhaps you simply want an array of things having both names and numbers.... Then: If you just want a product type (i.e. array of things which have both a name and a cost), use a struct But arrays in C are made of components all having the same type. They are always mono-dimensional, but you could fake 2D arrays with arrays of arrays. In particular, matrixes (of varying dimension) don't exist in C, but you can quite easily mimic them (e.g. by building your own abstract data type for them). Pointers are also very important in C. I won't dare explaining here why. You need to read some good C programming book (explaining C dynamic heap allocation and why and when arrays decay into pointers). The notions of virtual address space and of pointer aliasing are practically important. Perhaps you don't need a huge array of mostly empty entries. In some cases, you should consider more complex data structures. Read some Introduction to Algorithms. Maybe you need some hash table. C doesn't provide these natively, but gives you enough basic building blocks to implement them (in your library). My feeling is that you don't really need 2D arrays, but I don't know your overall problem and I could be wrong. Consider also studying the source code some existing free software programs (e.g. on github or elsewhere). They could inspire you (in particular since coding conventions are very important in practice). BTW, the C11 specification is downloadable as n1570 (but it is not an introduction to C programming). Don't forget to compile with all warnings and debug info, with GCC that is gcc -Wall -Wextra -g. Improve your code to get no warnings. Then use the debugger gdb. Every C array has exactly one element type, but that type can be a structure or union type, or a pointer type that points to an object of one of those kinds. For example, But I wonder whether what you really want is an one-dimensional array of structures: 
c-8-83	X	Tell eclipse where to search for source code when debugging a process I have a very big c++ project with multiple processes (main() functions). When I make the project it creates an executable file for any of the processes. I want to debug one of the processes with eclipse, so I create a debug configuration giving the path to process's executable file in "c/c++ Application" field. but when I start debugging, eclipse cannot find the source code for the executed process so it doesn't stop on my breakpoints. How can I tell eclipse the location of the source code corresponding to the running application? 
c-8-84	X	program exits unexpectedly after writing messages to pipe(using child process) i am writing a C program which has a main_process, and 3 child_processes: 1. Writer_process 2. Reader32_process 3. Reader64_process - the Writer_process is a simple one that use exec to run a program which outputs all its input to a file given by argv(default file is std_out). this process(Writer_process) input comes from a pipe between it and the main_process. - the Reader32/64 processes are reading input flags(EOT or ACK) from main_process(Reader32 through pipe2, and Reader64 through pipe3), and if they get ACK flag they will read from the std_input 2 32bits long words, or 1 64bits long word.the Reader32/64 manipulate the input into a single (unsigned long long), and will return it to main_process with another pipe (which is used both by Reader32 and Reader64, let call this one pipe4). if they get EOT flag they will close their pipes and exit. in the main_process I get all condition inputs(which file send to Writer_process, and decide which Reader_process to use). until that point it works well, but when i put values to give to each of the process Reader32/64 the program ends. does anyone has an idea how to deal with this problem? adding code below: main_process:(within a main function) } Reader32: } Reader64: adding pictures of output: 
c-8-85	X	errors on implemetation of a minishell with C Hi there I'm a student and i'm into a project. I'm trying to implement a mini shell with redirection i get errors that i don't know how to fix them can anyone help? I'm stuck there knowing that i have to implement the pipe also. 
c-8-86	X	What is Best way for generate final-executable file in Compiler and How? I hope you have a good day. I am a programmer and developer. (No ASM) And I'm pretty familiar with the compiler and interpreter steps. And I also have experience in making scripting/interpreter languages. And also after the experience in making the interpreter... , I started to make a generation code.(example : a input to another language with Lexer,Parser,AST,VM,Generate Code like C,...) And I've been upset by problems and questions about Compiler. I've worked with Flex/Bison and other lexer/parser generator. and also im do not know the assembly language programming language. My Goal : change my sample interpreter/code generator to a self-hosting compiler (mini cross System programming language) , like Go/C/Rust. Question : Help in generate a final-executable file! - How can a compiler without another compiler and ASM , generate a final-executable file? (may show me a sample/source/tutorial?) Performance is important for me. Compile speed with LLVM/IR , How is that? (Performance) http://llvm.org/docs/tutorial/ How can generate executable file without LLVM/ASM? go compiler : https://go.googlesource.com/go/+/go1.4.2/src/cmd/6c/ go linker : https://go.googlesource.com/go/+/go1.4.2/src/cmd/6l/ Why Compilers like GO not use LLVM? example : google team in rust use LLVM. and in go not use LLVM. and performance of rust is better of go. New Update example : https://github.com/renan061/aria , this is use LLVM. test.aria file: and also need $ llc to generate asm code.(this is bad) test push 5 aria aria.bc aria.s $ time ./aria ../tests/parser/input/test.aria -r Performance of aria is bad. if i'm use LLVM-IR , will for use my compiler , no need install any tools/llvm lib/compiler on targets users system?! 
c-8-87	X	Is the size I get from Bitmap file correct? Not matching properties I am trying to modify a bitmap file and in order to do this, I need its size. I am pretty sure I read the headers properly, I used these structs(btw, using C) : At the end of the day I am getting a buggy result, and I think it's because the bfSize doesn't match the properties of the file. (right click properties differs from printf bfSize. From what I understand from this link (https://en.wikipedia.org/wiki/BMP_file_format#Example_1 ), the bfSize should contain the whole size, including the padding. Is it okay if the bfSize differs from properties? I just got an idea, do you think that my buggy result is because I read the structs using pragma pack, then I continue reading from the file, as if I read from where the pixels' array starts? I am using something like I read those structs. I calculate the number of octets stored inside the pixels' array. Then I read those octets continuing from pf's location, which should be, according to my logic, exactly where the array starts. Thanks for reading. edit: ps: those differences are something like: bfSize says 3645 and on the properties it displays 3702, which is a pretty big difference. The bfSize number is always less than the properties number, when it differs. bfSize is the size of the file, including the headers. biSizeImage is the size of the pixel data, in bytes. The data starts at imageDataOffset (more commonly called bfOffBits). It is correct to define the headers with #pragma pack(1). After defining them, you should restore the packing but for the reading it doesn't matter. If you want to change the size of the image, You need to calculate the new heigth times the size of the new scanline. A scanline is rounded up to the nearest word using: which you call like: with bih the bitmap info header struct read from the file. See also pointer file randomly changes value in middle of reading raw bitmap data on how to read a bitmap. 
c-8-88	X	Longest Increasing Subset in C Given N numbers, the program must print the longest increasing subset from the end. If multiple subsets are present with the same longest length print the first occurring subset. Input: There are two subsets which are of increasing values and of length 3 from the end - 4 11 17 and 6 11 18. As 4 11 17 appears first (from the end) it is printed as the output. I made it using python but is unable to do that with C. In python I used logic : 
c-8-89	X	SDL clears the window screen when clicking on the window of another software in Linux My program is about drawing the Mandelbrot set. I discovered that when I click another window in the operating system (eg. Chrome, or text editor ...) my program clears the screen to black but continues drawing where it finished. It is during drawing. If the drawing is finished and I click another window then nothing clearing happens. Is there a solution to fix this (eg. switching something on or off in SDL) without tracking all the pixels onto the screen and print the entire pixel matrix all the times? Minimal code: (Note: I haven't got any window event handling in the program.) I think you need to put SDL_RenderClear(Renderer) at the top of the while loop. If you do like that, window will be never cleared after rendering. For example if you don't clear the window, a moving dot will leave his traces.. I work woth SDL too, and i always do this 
c-8-90	X	How to specify default global variable alignment for gcc? How do I get rid of alignment (.align 4 below) for all global variables by default with GCC, without having to specify __attribute__((aligned(1))) for each variable? I know that what I ask for is a bad idea to apply universally, becuase on some architectures an alignment of 1 wouldn't work, because e.g. the CPU is not able to dereference an unaligned pointer. Bit in my case I'm writing an i386 bootloader, and unaligned pointers are fine (but slower) there. Source code (a.c): Compiled with: gcc -m32 -Os -S a.c Assembly output (a.s): The flag gcc -fpack-struct=1 changes the alignment of all struct members and structs to 1. For example, with that flag compiles to no alignment for variables x' andz', but it still has an .align 4 for the variable i (of type int). I need a solution which also makes int i = 42; unaligned, without having to specify something extra for each such variable. IMO packing variables to save the space using the packed struct is the easiest and safest way. example: https://ideone.com/bY1soH Most probably gcc doesn't have such a flag which can change the default alignment of global variables. gcc -fpack-struct=1 can be a workaround, but only for global variables which happen to be of struct type. Also post-processing the .s output of gcc and removing (some of) the .align lines could work as a workaround. 
c-8-91	X	How to improve my code to fill an array from a text table? I'm a research assistant at a mental health clinic, and I'm trying to write a C program which will convert raw scores (on four subtests) into T scores. C, for better or for worse, is the language I'm most familiar with, but it's been a while since I've written anything, so please excuse my ignorance. Each raw score on each subtest only corresponds to one T score. However, the converse doesn't hold: Each T score can correspond to multiple raw scores (especially at either extreme of the scale), and some T scores don't correspond to any raw scores. My solution to the problem of representing this data in a text file is to represent the data in eight columns, every odd column (indices [0], [2], [4], and [6]) representing the T score and every even column representing the raw score that corresponds to it, which seems to solve this for now. If a T score doesn't have a corresponding raw score, I've inserted -1 to keep fscanf happy. However, I was hoping that maybe you can help me work out a more intelligent solution. I'm also wondering if there's a better data structure that will allow me to intelligently represent and manipulate the asymmetric relationship between T scores and raw scores, maybe so that there would be one entry for each T score and a range of possible values for the subtests that could yield that T score? The file looks like this: You can see what I have so far below. It does the following: Using a for loop and a two-dimensional integer array, it retrieves the data from the file and enters it into the array. The table has 83 rows, so I capped the loop at 83 iterations, but I'm sure there must be a better way to do this so I won't have to hard-code it into the program (I was thinking maybe a while loop that stops when a certain number, like -2, is detected?). The -1 trick seems to work for now, but I'm also hoping there's a better way to process the table input so that I can use it as is. But I don't really understand the syntax for fscanf well enough to implement something better. Could you give me any pointers on that? Using further for loops, it runs through the raw score rows and checks for identity between the score the user has entered and its place in the table. I was wondering if there's a clever way to nest these operations into a superordinate for loop? When the numbers match up, a T score is assigned and the results are printed. Here's the code: Uhmm.. i didn't get that code very well. As i can see, if A score is 5, t_v is 20 (either if a score was 0). I don't see you loaded the values in the file to the tab matrix. So tab is unitialized too. Anothed thing if you want to improve your code. You made 5 loops.. when you can simply merge all these into one. Aforloop with at the top there's fscanf and after it all your conditions. Instead of constant 83, tried with different method, so you can vary the number of lines Also instead of 4 loops, tried to fit in single for loop Error Handling To start, the posted code lacks error-checking. The user may fail to provide a file name, or may provide a non-existent file name. The file may fail to open. The user may enter non-numeric input. The input values may not be found in the table. Failure to provide a file name can be caught by checking argc at the beginning of the program. Failure to open the file can be handled by checking the value returned from fopen() and exiting with a message when a null pointer is returned. If an input value is not found in the table, no value is stored in the associated variable. One way of handling this problem is to initialize the associated variable to a sentinel value which is not expected in the table. I have chosen -1 in the code below. To handle user input, a get_integer() function could be added which takes an input prompt message as an argument and returns the input number. If the user enters malformed input, the function continues to prompt for the input until correct input is given. This function can also validate that input is a non-negative integer, to guard against assigning a value based on a user input value of -1. One refinement might be to place an upper limit on how many times a user may provide bad input before exiting the program with a message. Data Structure Instead of storing the table as a 2d array and accessing the individual fields of the table through indices, I would suggest creating a structure for the lines of the table, and a table[] array of these structs. This would allow for descriptive field names and make the code much more clear. Reading the File I would suggest using fgets() to fetch lines from the file. This function returns a null pointer when end-of-file has been reached, allowing control with a while loop. The sscanf() function can be used to parse each line and to store values in the appropriate locations. As with all functions which return meaningful values, the value returned from sscanf() should be checked to be sure that input is as expected. If not, the situation can be handled, perhaps by exiting the program with an error message. I would also consider constructing the table from the file before asking for more user input. As each line is successfully added to the table, a line counter can be incremented to keep track of the number of rows in the table[] array. Searching the Table Only one loop is needed here. The line counter can be used to establish the upper bound on the number of rows to be checked. As OP has suggested that each search value is unique, once it has been found and stored the associated variable will not be changed again. If a search value is not found in the table, the associated variable continues to hold the initial value (-1). A refinement would be to add a flag to indicate when all search values have been found, and to break out of the loop early when this occurs. Here is an example program: And here is an example interaction using the posted input file: 
c-8-92	X	Its about printing alphabet patter in C Here is the code I wrote which prints a BC def GHIJ Now the problem is I was asked to print this using loop and flags, basic stuff a Bc dEf GhIj So could anybody tell me what should I do? I'm not sure how to use flag or something! Flags are used to use the corresponding conditional statements 
c-8-93	X	Comparison (>,>=,<,<=) of pointers from unrelated blocks I was looking at the GNU implementation of obstacks, and I noticed the obstack_free subroutine is using pointer comparison to the beginnings and ends of the previous links of the linked list to find what block the pointer-to-be freed belongs to. https://code.woboq.org/userspace/glibc/malloc/obstack.c.html Such comparison appears to be undefined as per http://port70.net/~nsz/c/c11/n1570.html#6.5.8p5: When two pointers are compared, the result depends on the relative locations in the address space of the objects pointed to. If two pointers to object types both point to the same object, or both point one past the last element of the same array object, they compare equal. If the objects pointed to are members of the same aggregate object, pointers to structure members declared later compare greater than pointers to members declared earlier in the structure, and pointers to array elements with larger subscript values compare greater than pointers to elements of the same array with lower subscript values. All pointers to members of the same union object compare equal. If the expression P points to an element of an array object and the expression Q points to the last element of the same array object, the pointer expression Q+1 compares greater than P. In all other cases, the behavior is undefined. Is there a fully standard compliant way to implement obstacks. If not, what platforms could such comparison practically break on? I am not a language-lawyer, so I don't know how to answer OP's question, except that a plain reading of the standard does not describe the entire picture. While the standard says that comparing unrelated pointers yields undefined results, the behaviour of a standards-compliant C compiler is much more restricted. The first sentence in the section concerning pointer comparison is When two pointers are compared, the result depends on the relative locations in the address space of the objects pointed to. and for a very good reason. If we examine the possibilities how the pointer comparison code may be used, we find that unless the compiler can determine which objects the compared pointers belong to at compile time, all pointers in the same address space must compare arithmetically, according to the addresses they refer to. (If we prove that a standards-compliant C compiler is required by the standard to provide specific results when a plain reading of the C standard itself says the results are undefined, is such code standards-compliant or not? I don't know. I only know such code works in practice.) A literal interpretation of the standard may lead to one believing that there is absolutely no way of determining whether a pointer refers to an array element or not. In particular, observing a standards compliant C compiler could decide that because comparison between unrelated pointers is undefined, it is justified in optimizing the above function into which returns 1 for pointers within array const char arr[len], and zero at the element just past the end of the array, just like the standard requires; and 1 for all undefined cases. The problem in that line of thinking arises when a caller, in a separate compilation unit, does e.g. Obviously, if the is_within() function was declared static (or static inline), the compiler could examine all call chains that end up in is_within(), and produce correct code. However, when is_within() is in a separate compilation unit compared to its callers, the compiler can no longer make such assumptions: it simply does not, and cannot know, the object boundaries beforehand. Instead, the only way it can be implemented by a standards-compliant C compiler, is to rely on the addresses the pointers refer to, blindly; something like where the POINTER_TO_UINTPTR() would be a compiler-internal macro or function, that converts the pointer losslessly to an unsigned integer value (with the intent that there would be a corresponding UINTPTR_TO_POINTER() that could recover the exact same pointer from the unsigned integer value), without consideration for any optimizations or rules allowed by the C standard. So, if we assume that the code is compiled in a separate compilation unit to its users, the compiler is forced to generate code that provides more quarantees than a simple reading of the C standard would indicate. In particular, if arr and ptr are in the same address space, the C compiler must generate code that compares the addresses the pointers point to, even if the C standard says that comparison of unrelated pointers yields undefined results; simply because it is at least theoretically possible for an array of objects to occupy any subregion of the address space. The compiler just cannot make assumptions that break conforming C code later on. In the GNU obstack implementation, the obstacks all exist in the same address space (because of how they are obtained from the OS/kernel). The code assumes that the pointers supplied to it refer to these objects. Although the code does return an error if it detects that a pointer is invalid, it does not guarantee it always detects invalid pointers; thus, we can ignore the invalid pointer cases, and simply assume that because all obstacks are from the same address space, so are all the user-supplied pointers. There are many architectures with multiple address spaces. x86 with a segmented memory model is one of these. Many microcontrollers have Harvard architecture, with separate address spaces for code and data. Some microcontrollers have a separate address space (different machine instructions) for accessing RAM and flash memory (but capable of executing from both), and so on. It is even possible for there to be an architecture where each pointer has not only its memory address, but some kind of unique object ID associated with it. This is nothing special; it just means that on such an architecture, each object has their own address space. 
c-8-94	X	Struct and pointer I'm trying to print the value pointed by a pointer who is himself pointed by a pointer. I have 2 structs How do I print the hash of the struct I point to? The compiler is telling me "error: request for member "˜hash' in something not a structure or union" I have try some other way but none of them are working Thx for your help You want this: *police_arg.lhash gives you an l_hash, which is a pointer to a s_l_hash which you then dereference to get hash. 
c-8-95	X	Expects argument of type 'int', but argument 2 has type 'int **' I am getting a compiler error on my program . I use Dev-C++ with -c99 -wall and -pedantic . This is where the compiler shows that there is an error. The compiler error : [Warning] format '%d' expects argument of type 'int', but argument 2 has type 'int **' [-Wformat=] What does the program do : It copies some basic functions of a phone from 1990s . First , the user selects the size of the contact list . Then he gets to add a contact, find a contact or list all contacts or exit. Edit : Removed the pictures and added more detail listNumber is declared as a pointer to an int: int*. &listNumer is of type int**. printf needs an int as parameter for a %d. What you probably wanted to do is: printf("%d", *listLastName); The * dereferences listLastName, i.e. lets you access the int value. 
c-8-96	X	What does this code mean in C, " int x = ~!printf; "? It gives : -1 ffff Can anyone explain ? printf without arguments is the function pointer, worth a non-zero value (it's built-in so the pointer cannot be zero) Now you apply logical negation (!) on this non-zero value: you get zero. Now negate this zero bit-wise (using bit to bit negation ~), you get all 1s in the int bit range (which can vary depending on the compiler) Printing it in decimal yields -1, and in hexadecimal yields a given number of fs, depending on the size of the integer (on my 32bit integer compiler, I get ffffffff) (note that -specially the negation of the function pointer- cannot be part of some valid program, this is only for academic purposes) 
c-8-97	X	Hooked VirtualAlloc returns nullptr when called by system DLLs I would like to track memory allocations done by VirtualAlloc. For that I tried to use mhook and easyhook. Both work fine as long as I call VirtualAlloc myself. The registered hook is called, from there I call the real VirtualAlloc function and memory is returned as expected. My problem now is that I try to open a SFML-window and the VirtualAlloc call in there is captured but no memory is returned. The function call goes through sfml-window-2.dll and from there it calls wglCreateContext that calls CreateAnyContext which calls VirtualAlloc. wglCreateContext is in Opengl32.dll. I guess my userspace code doesn't have the permission to allocate memory for it. My question is, why is a system library going through the same stub (that I hooked) if I am not allowed to allocate memory for it? And how could I distingush these calls and prevent that from happening? I mean, in my particular case I could wait until the window is open and hook VirtualAlloc after that. But this would be a really bad solution because I would like to track arbitrary programs maybe even inject my dll to track the memory. EDIT: I not only want to track the programs memory but I also want to be able to reset it to a recorded state, all while the programs execution should not be slowed down too much because in my case it will be games. Therefore I wanted to start with VirtualAlloc and set the MEM_WRITE_WATCH flag and track the pages returned by GetWriteWatch manually. I already wrote a vector that can be reset this way but I need it to be more general. /EDIT Another thing to note is, that I have tried it with HeapAlloc which is called in said function too but it returns memory. This is the reason why I tried two libraries. Any help is appreciated. Turns out that I wasn't allowed to alter the flags. My workaround, since I can't know who the caller is in a reasonable way, I allocate it with altered flags and if that fails I allocate it again with the original flags. 
c-8-98	X	reset a two dimensional array via function in c language windows I want to reset a 2 dimensional board, but I'm not sure how to return a pointer to the array. also I think there must be an easier way to reset it but can't find one. Don't have to return anything, you were working with a pointer to the array (array decays into pointer). So any changes you do will be reflected in the callee. If you are curious then know that 2d array char s[ROW][COL] decays into char (*)[COL] when passed to a function. This works. Easier way is to use memset or but this only works in the scope where it is declared as char board[ROW][COL]. Also return &board[0][0]; this is returning address of char so it will be char* in type not char. 
c-8-99	X	bash: /Users/Macx/Desktop/C: No such file or directory I'm currently learning C programming, and I'm using the Code Blocks IDE. I have previously downloaded some exercise files to practice with. The problem I'm having is that after the build process is completed, and the run process is used my terminal prints: bash: /Users/Macx/Desktop/C: No such file or directory. I am under the impression that the console should print Welcome to the C language: If anyone else has this problem please notify me thank you for taking the time to read this post. 
c-8-100	X	Find element in an array and move to the first position in C I am doing my homework about programing. This task is about finding an element in an array and move it to the first position. There would be no problem if I can add more variable but my teacher does not allow me to add any extra variables, arguments and functions. I have tried myself but the code didnt work. (It should move the number 6 to the first position, but it didnt.) So please help me, thanks a lot. (Remember no additional variable, argument of function is allowed). Here is my code. After compiling your code on Online Code Chef Compiler. Your code results in same output as you expect . I bet, you are running your old compiled program in compiler. Solution: Build then Run Not just RUN your old compiled program module. In Codeblock, to compile and run a C program, Click Build â†’ Build and run to compile and build your C program, alternatively many compilers use the shortcut key F9 or ALT+F9 for both build and run. 
c-9-1	X	How to order Pseudocode rightly? If I have program that include order like " void Declare variable-program, void declare variable-program" (its kind of long program bcs every function is different) What kind of pseudocode I should make? Is it Declare the variables all of the program and the I write the whole of the program. Or still I order like "Declare variable-program Declare variable-program"? 
c-9-2	X	Remove Constant from ConstantArray in LLVM pass I'm trying to run a LLVM pass on some C code and need to remove Constants from a ConstantArray. I have a GlobalVariable with said ConstantArray as initializer. Deleting entries works usingF->replaceAllUsesWith(llvm::UndefValue::get(F->getType())) and F->dropAllReferences() but that's not acceptable - I can't change the code using the array and it stops processing the array after encountering the first NULL value. Is there any easy way to simply drop Constants from a ConstantArray or do I have to create a new array without the respective entries I want to remove? 
c-9-3	X	Running a piece of C code stored in a Java String I am having a rather interesting scenario here. Let's say I have a piece of C code stored in a Java String. I need to run this code inside my Java program it self. Case 1 What I think I should do is. Create a native field in the Main write the sCode to a file Exceulte shell commands from Java to compile the c code. invoke the native method from java Case 2 I am thinking of doing the above procedure because I know how to do this with JNI if the source code is pre-defined. In the case of pre-written C code. What we do is. Compile the java class with javac Main.java Generate the header for C lib. javah -jni Main Complete the Main.c by writing the C code Compile the C code with gcc -share -I/path/to/jni -I/path/to/jni_md -o Main.so Run Main. java Main Can anyone tell me whether I am taking the correct path (in Case 1) or not? or is there is a better way to do it? ** Note: The key point here is, I am allowed to compile the java code only once. (At the beginning).** EDIT: After checking the comments and answer from @DÃºthomhas I think I should explain one more thing. The reason why I am doing this for a machine learning project. It has been decided that the numeric computation part has a bottleneck and using C as the above-mentioned method is worth the risk of trying it. So security is off the book right now. We just need to do this as an experiment. Non-answer answer: Don't do that. What you are asking to do is a pretty bad idea for several reasons, the two major ones are: It potentially opens (serious) security holes Cost to implement likely outweighs the benefit Asking to embed an entirely different language means adding and linking a library and a lot of code to synchronize the library, plus code to perform static analysis and sandbox the code. In other words, you are asking to implement an entire language on top of what you already have. It could be argued that C is the base system anyway, upon which the JVM may even be implemented (usually is), but that is not the point. The issue is not the C library, it is the C compiler/interpreter, which is a fairly complex code base as far as simple interpreted programming languages go. Suggestion: Use Java The ToolProvider class is specifically designed to provide you with dynamic compilation of Java code. Take a look through it. Make sure to use the SecurityManager class to properly sandbox the code. (And, if possible, run it in a separate, restricted JVM.) Suggestion: Use JavaScript/ECMAScript The ScriptEngine classes are designed exactly for this. Again, Google around for examples. And, again, don't forget security. Suggestion: Use an existing library FScript Scheme Tcl Python But I really want/must use C Alas. It is possible to use C, but only with great difficulty. Google around "embedded c interpreter"? for small C interpreters that you may be able to integrate into your source. (Good luck, though!) Let me clarify your two Cases. Case 1 refers to running a C program out of process. This is not what most people consider "invoke the native method from java". You cannot create a native field in Main. Actually, Java does not have native fields, only native methods. But in Case 1, you don't use native methods, either. You can compile and run any program, written in C or any other language (provided a compiler is available in the runtime environment). To do so, you use shell commands (Runtime.exec()) both to compile the program and to run it. Parameters for the C program can be passed 'on the command line' as specified in Runtime.exec(). It can communicate with your Java process with any IPC of your choice. Typically, we simply use a pipe to read the stdout of the child process. Case 2 runs the native code in-process, using JNI (Java Native Interface). The flow that you describe here is correct, but you can modify it to use a shared library that is built at runtime. First of all, remove the native method and also loadLibrary() to a separate class. Make sure that the classloader loads this class only after your Main class runs the gcc -o libMain.so command (using the same Runtime.exec() as in Case 1). This way, the static constructor will load the freshly built library. In both Cases you don't need to recompile your Java. You don't need to run javah to build libMain.so - this is a convenience step only, to guarantee that the C headers are in sync with the Java class. But in your situation, the Java class does not change - therefore the native method signature does not change, too. Note that Case 1 is easier, especially if you must run different compiled C 'strings', but Case 2 may deliver better performance, if you must call the native method many times. 
c-9-4	X	Displaying structs This program is meant to display a video game inventory based off of the user's input. The user needs to determine how long the loop runs with num_of_games. We have to use a switch loop to determine the genre. It compiles but it does not display correctly. I think this is the thing that is causing most of the problem. I don't know if I am calling the struct right with the game[I].title and others. the problem is with the struct calls I think. If I use game_s[I].title I get "expected expression before" error and if I use game[I].title it doesn't print properly I think the problem is game_s game[num_of_games]; because num_of_games isn't initiate. It should be: Your effort is commendable. You provide code and a good-faith attempt to understand why things don't work, but unfortunately, your code was riddled with errors. Not the least of which was your almost immediate invocation of Undefined Behavior by attempting to declare a VLA with an uninitialized num_of_games. No matter what you did in your code from that point forward, it was nothing but a dice-roll whether you actually processed something or SegFaulted. Your lack of output in display_inventory (regardless what was actually in memory) is due the placement of your printf statements within the body of the switch statement. When you break from a switch you don't just jump below the default case, you jump out of the switch completely. So even if the rest of your code was correct, you would never produce output. fflush(stdin) is wrong and invokes undefined behavior on all but windoze. It is only defined for seekable streams for the rest of the world -- don't use it. Instead, you can define a simple function to empty stdin and call it as required instead. When you compile, always compile with compiler warnings enabled, and do not accept code until it compiles cleanly without warning. To enable warnings add -Wall -Wextra to your gcc compile string. (add -pedantic for several additional warnings). For VS (cl.exe on windoze), add /Wall. For clang, add -Weverything. Read and understand each warning. They will identify any problems, and the exact line on which they occur. You can learn as much about coding by simply listening to what your compiler is telling you as you can from most tutorials. The number of errors in your code are too voluminous to itemize and speak to every point, so I have included comments inline below addressing the errors. (note: use printf minimum field with modifier to control spacing instead of a bunch of tabs smushed together) Example Use/Output (note: I didn't know where you intended your genre descriptions to go, so they are simply output at the beginning of each line above) Look things over and let me know if you have further questions. 
c-9-5	X	Why does my trig equation produce a Segmentation fault I'm trying to find the coordinates of a point on a circle using this equation: polar_x=cos(angle)*r+cx I've run GDB on it and the SIGSEGV occurs after this is evaluated. The values are: Seems a little strange. MCVE: 
c-9-6	X	mingw include files hierarchy issue Noob question.. So i have been peeping into my mingw installation folder on windows to setup compilation for some IDE but i'm unable to get include files working. Visibly they are bunch of include folders with C and Windows headers all bundled up, but which to use is my Problem. I have: ..\gcc\x86_64-w64-mingw32\include ..\gcc\mingw64\x86_64-w64-mingw32\include -- I'm guessing this is for strictly 64-bit builds? Also why does the mingw64 sub-folder have a separate compiler set, am i to call its own compilers on building strictly for 64bit? i thought that was controlled using -m32 and -m64 flags? 
c-9-7	X	Why GCC 6.3 giving non-intuitive output (C)? Question is to find the output :- when executed on GCC 4.2.1 it gives 446 (compiling from left) Image - mac terminal screen showing the output But when executed on CodeChef IDE (online) (GCC 6.3) it gives 656 how it can be possible? if it's being compiled from the RHS then also it should be 655 Image - CodeChef output screen Again when executed on Code::Blocks 16.01 (says:- GNU GCC compiler) gives the same whopping 656 Image - Code::Blocks output screen This is the question I got in my mid-semester exams, what should be the answer?? P.S. - I'm very beginner in this community, this is my first question, please excuse me if any mistakes done unknowingly! 
c-9-8	X	Problems with STRCPY and STRCMP when finding the smallest and largest problems I'm writing a program to find the smallest and largest word according to the dictionary order in K.N.King's problem. Find the largest and smallest of a word until the user inputs a 4 letter word. Firstly, I use strcmp to compare the input word with the largest or smallest. then using strcpy to copy the input string to the largest or smallest. for example. However, when running programs, the largest word is always a special character, and the smallest is always right. My program shows the result that I suspect the main issue is that either max or min will always be the incorrect, as they are empty (or filled with garbage) to begin with. You should reformat your code to be in the style: I also recommend using fgets() or getline() for reading input, just in case you decide to put in 100 characters when you only set aside space for 20. Same with strcpy(), it should be replaced by strncpy() just in case. So the result will look something like: The problem is due to uninitialized char array. This(using it in strcmp) is undefined behavior. Also logically your code won't work properly. strcasecmp is not part of standard - it is a POSIX thing. Compile your program using gcc -Wall -Wextra -Werror progname.c, it will tell you where you are going wrong. One thing, Don't use gets(). I'm wrong because I don't initialize max and min. However, the program still runs with min... The thing it is called Undefined behavior. It may work some time and may not. That's the thing about it. Without initializzing when you compare then behavior is not defined. It may get some error , may suprisingly give correct result. Revised See live code. Note: it is much safer to use fgets() than gets(). The reason gets() is dangerous is b/c of potential buffer overflows per this article. However, with fgets() the input may terminate with a newline so you need to get rid of it. Although you may use strtok() for that even tho' it wasn't designed with that possibility in mind, as chux remarks it is inadequate if the user's input consists of a newline character. I revised this answer again, taking a cue from here. The technique utilizes strcspn() which returns the number of characters in str1 not in str2, So, the newline gets replaced every time whether the input consists of one or more printable characters or a newline. I accordingly revised both the code and input at ideaone.com. So, now the output reflects the largest word is penguin and the smallest word is the empty string. But, if you run the code using only the original input of the OP, then the result will be penguin and bear as respectively the largest and smallest words lexicographically speaking. You don't asctually initialise max or min so they will be set to arbitrary values when you first compare them. You can fix this by simply doing setting them to the first word regardless of the comparison: And, as an aside, there's a reason why gets was deprecated and later removed from the standard, there is no way to protect against buffer overflow if you use this function. Further details can be found here, which also includes a very handy solution to the problem. 
c-9-9	X	Server/socket programming in C: Data not being sent/received properly? I am writing a server-side program that listens for connections. When it receives one, it spawns a detached thread and handles the connection. I want it to be able to receive several lines of data being sent from a client, and store it in a data structure (so I can sort it later). The client does this: Gets the filesize of a .csv file Sends the filesize to the server Opens the .csv Retrieves a line with fgets() and places it into a buffer Sends the number of bytes of this line to the server Sends the data of the line to the server The goal is to send data over line by line, and have each line stored in a structure over on the server side. The problem is, the data is not being sent over. It seems a single send request gets cut off and is processed in two different recv() calls. Client Send Loop: Client Output: Server Receive Loop: Server Output As indicated in the man page for recv: The receive calls normally return any data available, up to the requested amount, rather than waiting for receipt of the full amount requested. As indicated in the man page for send: With a zero flags argument, send() is equivalent to write(2). ... On success, these calls return the number of bytes sent. As indicated in the man page for write: writes up to count bytes from the buffer starting at... As you can see, network send and recv offer no guarantees as to the length of the data actually sent or the length of the data received in each function call. Moreover, it is very common, as packets move through the network, for a single packet to be fragmented into a number of packets (for example, due to differences in network MTU settings). The only way to treat network data is as a continuous stream. In order to find new-line markers, the receiving endpoint will have to concat any received data and cut it up along the new-line markers. I recommend Beej's guide as a good resource to start up on network coding. Good Luck. 
c-9-10	X	What's the meaning of "each CPU instruction can manipulate 32 bits of data"? From: https://www.webopedia.com/TERM/R/register.html The number of registers that a CPU has and the size of each (number of bits) help determine the power and speed of a CPU. For example a 32-bit CPU is one in which each register is 32 bits wide. Therefore, each CPU instruction can manipulate 32 bits of data. What's the meaning of "each CPU instruction can manipulate 32 bits of data" w.r.t the C/C++ programs which we write, the text which we write in notepads? Computers, operating systems, or software programs capable of transferring data 32-bits at a time. With computer processors, (e.g.Â 80386,Â 80486, andÂ Pentium) they were 32-bit processors, which means the processor were capable of working with 32 bitÂ binaryÂ numbers (decimal number up to 4,294,967,295). Anything larger and the computer would need to break up the number into smaller pieces A "word" is the size of the basic unit of change. This CPU, in addition to being a 32 bit CPU, has a 32 bit sized word. If it was changing an item, unless extra CPU cycles are used, the largest "single" item it can change is one 32 bit value. This doesn't mean that any 32 bit can be changed with one instruction. But if the 32 bits are all part of the same word, they may be able to be changed in one instruction. First; "each CPU instruction can manipulate 32 bits of data" is a (technically incorrect) generalisation. For example (32-bit 80x86) there are instructions (e.g. cmpxchg8b, pushad, shrd) and entire extensions (MMX, SSE, AVX) where an instruction can manipulate more than 32 bits of data. For performance; it's best to think of it as either "amount of work that can be done in a fixed amount of time" or "amount of time to do a fixed amount of work". This can be broken into 2 values - how many instructions you need to do an amount of work and how many instructions can be executed in a fixed amount of time (instructions per second). Now consider something like adding a pair of 128-bit integers. For a 32-bit CPU this has to be broken down into four 32-bit additions, and might look something like this: In this case "how many instructions you need to do an amount of work" is 8 instructions. With a 16-bit CPU you need more instructions. For example, it might be more like this: In this case "how many instructions you need to do an amount of work" is 16 instructions. With the same "instructions per second" a 16-bit CPU would be half as fast as a 32-bit CPU for this work. With a 64-bit CPU this work would only need 4 instruction, maybe like this: In this case, with the same "instructions per second", a 64-bit CPU would be twice as fast as a 32-bit CPU (and 4 times as fast as a 16-bit CPU). Of course the high level source code would be the same in all cases - the difference is what the compiler generates. Note that what I've shown here (128-bit integer addition) is a "happy case" - I chose this specifically because it's easy to show how larger registers can reduce/improve "how many instructions you need to do an amount of work" and therefore improve performance (at the same "instructions per second"). For different work you might not get the same improvement. For example, for a function that works with 8-bit integers (e.g. char) "larger than 8-bit registers" might not help at all (and in some cases might make things worse). 
c-9-11	X	Realloc using extern Hi im trying to figure out how to use realloc. I have made a small test project that im trying to malloc for the creation of the first element in main, followed by adding a number to that location then reallocating the array to hold one more element. Main.c parse.c C is pass by value. You should return the pointer value. Otherwise the original one is unchanged. So from parseInput return the pointer or pass address of the variable and change it accordingly (not shown in example). While reallocating use another pointer variable other than the original one, in case of failure you don't lose reference to the old memory. Don't print uninitialized value. (in main()). Don't cast the return value of malloc. When printing a pointer do this printf("%p",(void*)fileTest[1]);. Also you should put the extern declaration in main.c. You have passed incorrect number of arguments to the parseInput function. The code didn' compile. Then after correcting the input - if you try then you might get segmentation fault or some similar error. I have tried demonstrating something over here. The naming can be much more better. I have tried to keep the general aspects of what you have tried. Multiple source file with realloc used and tested, working with pointers etc. main.c parse.c myheader.h Compiled and run 
c-9-12	X	how to remove "undefined reference to 'winmani@16'" I started learning windows API using C for desktop application development for windows. I copied the exact code that they gave as the first empty window code and tried to build it using vscode. I used the command gcc filename.c but it gave the error "undefined reference to winmain@16" How do I resolve it? Here is the code: 
c-9-13	X	Beaglebone Black GPIO control running stepper motor very slowly. How can I improve speed? I have written a device driver for the Beaglebone Black that simply rotates my 28BJY-48 stepper motor connected through a ULN2003A board. Everything works fine, the motor rotates, however I have found necessary to use msleep(1) after each pin is switched to HIGH for the motor to "capture" the signal. If I let the loop run without any sleep time nothing happens with the motor. What I am trying to do is speed up the motor rotation. My logic is that the signal is too fast for the motor to respond. I know the signal is being sent because the LEDs in series with the motor coils light up. I have read the data sheet and instructions provided by Elegoo found here for referene. For ease of understanding, I have attached the wiring diagram: I have assigned the following GPIOs of P8 as controls: The way I have am controlling the GPIOs is by using ioremap(). Here is the part of the code that controls the motor: I have my motor hooked to a 5v power supply independent of the Beaglebone. Any help or pointers in the right direction are appreciated. On a side note, is there a way to simultaneously set 2 pins to LOW and 2 to HIGH? My code sets one pin low before setting another high. I would like to know if I could do both in one step. I can't seem to figure that out. After further review and research I found that the problem lies not with voltage, motor, or board, but with my code itself. As per this link I found that msleep has a minimum limitation of about 20ms. Anything below 20ms (in my case, 1ms) will be run at 20ms. Therefore the proper function to achieve <20ms delays would be one of the following: usleep_range(), using a range of 1000-2000, has yielded me a good result with faster rotation. While holding the motor, however, I feel that it skips a couple of steps, although invisible to the eye. I believe this to be either a voltage fault or a motor limitation. Further analysis would be required to rule out what causes the skipping. I am still playing with this range to figure out what is the optimal non-skip range range. udelay() also works, however the system seems to freeze in some permanent loop and a hard reboot is required. Further analysis is required to figure out what exactly is causing the system to hang after completion of rotation loop. 
c-9-14	X	error in my c code (creating a BST) , i cant find whats wrong here is the code: its about creating a BST with strings. the code takes a txt named "Diccionario" with strings and create a BTS. each node its a struct where the key "palabra" is where we put our strings ordered alphabetically. error : segmentation fault: 11 cant find whats wrong Â¿anyone? 
c-9-15	X	Is it possible to find element in Binary search tree with parallel travelsar Hello i want to ask you is it possible to find element with parallel search in binary search tree? Will it be faster with parallel or serial? Because for Example tree with root 25 and the element you want to find is 50 there is only right node where you should go and search.And if you use paralell there would be wasted searh in the left node. Tree For binary search tree, a single flow of search is always executed. So, you cannot get any parallel execution stream that can speed up the process. If you are using a forest, then you can deploy a thread for each tree in the forest. 
c-9-16	X	Running autotools in Windows (MinGW) I am trying to build the shapelib from source on Windows. The library uses autotools. I have MinGW installed with the appropriate packages. When I run it outputs I don't expect readlink to work with Windows so I just skipped right to However, that also throws errors Is there any hope of getting this to compile on windows? Am I missing something obvious? I double checked and the sed package is installed. Problem solved. My MinGW install was corrupted. I removed MinGw and installed it again. Now autogen.sh runs fine. 
c-9-17	X	How to stop parent and child process at the same time in C? I have a lab question as following: We want a pair of father and child processes based upon the beeper program with the following behaviour: The father process forks a child and beeps The child only watches the father every 0.5s (check function usleep()) If the child process dies the father process forks another child to check it. If the father dies the child process forks a new child and assumes the role of the father (it beeps) Both processes stop if any of the two receives SIGTRAP Now I finished step1-4 and have some trouble with the last step since the child dies, a new child is forked, the father dies, a new child is also forked. It seems to stick into an endless or I misunderstood this question? 
c-9-18	X	Getting EXEC_BAD_ACCESS when trying to read text file into array of strings I'm writing this using Xcode on my mac. The file is definitely the correct location, and it opens it fine. That's not the problem. I'm aiming to get a text file of words to be read in, and stored in the array list for future use, so the array acts as a dictionary. However no cigar. Any help would be great! 
c-9-19	X	LibVncClient get operation system info I use the libvncclient, to build a viewer, in which i try to integrate a specific hotkeys which do a bit of scripting, that are done as menu options, such as enable taskmanager,'run cmd' for window, and 'open terminal,'update repos' etc. I need to detect the operating system info, but i don't see anything to get this info from in rfb proto I looked trough the rfbclient.h and rfbClient structure doesn't hold any callback/or field that stores this info, as well as there is no apis for that it seems. But in rfc there is this thing https://tools.ietf.org/html/rfc6143#section-7.3.2 After receiving the ClientInit message, the server sends a ServerInit message. This tells the client the width and height of the server's framebuffer, its pixel format, and the name associated with the desktop: Richardson & Levine Informational [Page 11] RFC 6143 The Remote Framebuffer Protocol March 2011 But it seems that libvnc doesn't handle that, is there any way that this info could be taken? 
c-9-20	X	Check if Unicode character is displayed or tofu My question is similar to this one, but a little step-forward. In my Win32 program I have some menu button with Unicode characters above BMP, such as U+1F5A4 ðŸ–¤ (UTF-16 surrogate pairs 0xD83D 0xDDA4). In Windows 10 the system font Segoe UI doesn't have this glyph: it is automagically replaced with a glyph from the font Segoe UI Symbol and displayed correctly in the button, thanks to a process called font linking (or font fallback, still not clear to me). But in Windows 7 the font linking brings to a font that doesn't have this glyph neither, and the surrogate pairs appear as two empty boxes â–¯â–¯. The same in Windows XP with Tahoma font. I want to avoid these replacement boxes, by parsing the text before or after the assignment to the button, and replacing the missing glyph with some common ASCII character. I tried GetGlyphOutline, ScriptGetCMap, GetFontUnicodeRanges and GetGlyphIndices but they don't support surrogate pairs. I also tried GetCharacterPlacement and Uniscribe ScriptItemize+ScriptShape that support surrogate pairs, but all these functions search only into the base font of HDC (Segoe UI), they don't search for eventually fallback font (Segoe UI Symbol), which is the one that provides the ðŸ–¤ glyph. HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\FontLink\SystemLink it's a place where I looked, but I really think it's not there the system takes the fonts to link to. The question is: how can I know if the system font-linking produces the correct glyph or tofu boxes instead? Edit I found some kind of solution copying trom this code and adding the last GetCharacterPlacement. You can call it with checkGlyphExist( hWnd, L"ðŸ–¤", L"<3" ); I tested on Windows 10 and on two virtual machines: Windows 7 Professional, Windows XP SP2. It works quite well, but two problems still remain about the fallback font that EnumEnhMetaFile retrieves when a glyph is missing in base font: in Windows 7 is always Microsoft Sans Serif, but the real fallback font should be Segoe UI Symbol. in Windows XP is Tahoma instead of Microsoft Sans Serif, but only for surrogate pairs characters (for BMP characters is Microsoft Sans Serif that is correct, I guess). Can someone help me to solve this? I believe the high and low 16-bit words are well defined for surrogate pairs. You should be able to identify surrogate pairs by checking the range of values for each of the 16-bit words. For the high word it should be in the range of 0xd800 to 0xdbff For the low word it should be in the range of 0xdc00 to 0xdfff If any two pair of "characters" meets this criteria, they are a surrogate pair. See the wikipedia article on UTF-16 for more information. First you have to make sure you're using same API on both Win7 and Win10. Lower level gdi32 API is not supposed to support surrogate pairs in general I think, while newer DirectWrite does, on every level. Next thing to keep in mind is that font fallback (font linking is a different thing) data differs from release to release and it's not something user has access to, and it's not modifiable. Second thing to check if Win7 provides fonts for symbol at U+1F5A4 in a first place, it's possible it was introduced in later versions only. Basically if you're using system rendering functionality, older or newer, you're not supposed to control fallback most of the time, if it doesn't work for you it usually means it won't work. DirectWrite allows custom fallback lists, where you can for example explicitly assign U+1F5A4 to any font you want, that supports it, including custom fonts that you can bundle with your application. If you want more detailed answer, you'll need to show some sources excerpts that don't work for you. 
c-9-21	X	libCurl GET request with non-url parameters (objects / payload) I am working with a remote API which I don't have any documentation on and I need to send a GET request with a JSON payload which isn't sent in the original HTTP request, but seems to be sent right after. This is done with the original Python tool using the following instruction: I have been looking through Wireshark to get more informations about it, and it appears the GET requests is composed of the HTTP request and the JSON object (both being distinct from one another): My question would be: How can I achieve this using the cURL C library ? I have been looking at the manual for a while and it appears parameters cannot be passed like a POST request (CURLOPT_POSTFIELDS). I finally found the solution to this issue. My cURL request was done using the CURLOPT_HTTPGET option which could not be combined with the CURLOPT_POSTFIELD option. To fix this, I needed to replace it with the CURLOPT_CUSTOMREQUEST option allowing me to combine any request type to the CURLOPT_POSTFIELD option. This post helped me: a raw libcurl JSON PUT request using C 
c-9-22	X	Buffer storage with gets() Brand new to coding here. Tried to research this topic, but having difficulty finding where to start on questions I hardly know how to ask.. The following is a line of code I'm using in an online course and I'm trying to understand how gets() is working here. I am using Visual Studio in learning C, and the instructor is returning a different output (he is using CodeLite) when using gets(). For him, when he enters firstname in the command prompt in excess of 5 characters, the buffer will overflow the extra characters into the subsequent char variable, lastname. For me, when I enter in extra characters, my printf() will return exactly what I entered. For ex: If I enter firstname: George lastname: Washington, it will return "Hello, George, Washington.", where for him it would return "Hello, Georg, eWash." Is Visual Studio performing some sort of flush on the buffer in between my gets()s? And what is the point of specifying '5' in char firstname[5] if when I enter more than 5 characters on the command prompt, it will store all the characters in my firstname and lastname char variables? Why would fgets() be a better solution in situations like this? If you use "gets" in c++ code with visual c++ and an array argument a "safe" template overload is used instead of the gets from the C library, that function template forwards to msvc's gets_s function which takes a buffer length argument. basically it calls (return type may be off, but this gives the idea): the number in char firstname[number] is how much characters you are allocating for that array of chars. For example, if you use 6 as the number, you can put 6 chars in that variable. If more than 6 chars are used, that results in a Buffer Overflow. You can check out C tutorials for more information 
c-9-23	X	Error: Expected Expression. What am I missing? I'm receiving problems with my printf statements. It is saying that there is an expected expression before and after the int x and int y but I can't figure out what it is. 
c-9-24	X	Loading txt files into an array in C# I'm trying to load txt files into an array in C# but my program keeps crashing. Could someone please tell me what I'm doing wrong? I've tried the following: 
c-9-25	X	What does it mean for an SSE vector to be "16 byte alligned" and how can I ensure that it is? I'm working with vectors and matrices right now and it was suggested to me that I should use SSE instead of using float arrays. However while reading the definition for the C intrinsics and the Assembly instructions it looks like there is a different version of some of the function where the vector has to be "16 byte aligned" and a slower version where the vector isn't aligned. What does having the vector be 16 byte aligned mean? How can I ensure that my vectors are 16 byte aligned? New Edit to improve and focus my answer to the specific query To ensure data alignment in memory, there are specific functions in C to force this (assuming your data is compatible - where your data matches or discretely fits into your required alignment) The function to use is [_aligned_malloc][1] instead of vanilla malloc. This will (if it succeeds) force your data to align on the 16 byte boundary and should satisfy the requirements for SSE. Older answer where I waffle on about struct member alignment, which matters - but is not directly answering the query To ensure struct member byte alignment, you can be careful how you arrange members in your structs (largest first), or you can set this (to some degree) in your compiler settings, member attributes or struct attributes. Assuming 32 bit machine, 4 byte ints: This is still 4 byte aligned in memory (first largest member is 4 bytes), but padded to be 16 bytes in size. The compiler usually pads each member to assist with natural alignment, but the padding may be at the end of the struct too. This is struct member data alignment. Older compiler struct member alignment settings could look similar to these 2 images below...But this is different to data alignment which relates to memory allocation and storage of the data. It confuses me when Borland uses the phrase (from the images) Data Alignment, and MS uses Struct member alignment. (Although they both refer to specifically struct member alignment) To maximise efficiency, you need to code for your hardware (or vector processing in this case), so lets assume 32 bit, 4 byte ints, etc. Then you want to use tight structs to save space, but padded structs may improve speed. This struct may be padded to also align the struct members to 4 byte multiples....The compiler will do this unless you specify that it keeps single byte struct member alignment - so the size ON FILE could be 14 bytes, but still in MEMORY an array of this struct would be 16 bytes in size (with 2 bytes wasted), with an unknown data alignment (possibly 8 bytes as default by malloc but not guaranteed. As mentioned above you can force the data alignment in memory with _aligned_malloc on some platforms) Also regarding member alignment in a struct, the compiler will use multiples of the largest member to set the alignment. Or more specifically: A struct is always aligned to the largest type's alignment requirements ...from here If you are using a UNION, you are correct that it is forced to the largest possible struct see here Check that your compiler settings do not contradict your desired struct member alignment / padding too, or else your structs may differ in size to what you expect. Now, why is it faster? See here which explains how alignment allows the hardware to transmit discrete chunks of data and maximises the use of the hardware that passes around data. That is, the data does not need to be split up or re-arranged at every stage - through the hardware processing As a rule, its best to set your compiler to resonate with your hardware (and platform OS) so that your alignment (and padding) works best with your hardware processing ability. 32 bit machines usually work best with 4 byte (32 bit) member alignment, but then data written to file with 4 byte member alignment can consume more space than wanted. Specifically regarding SSE vectors, as this link states, 4 * 4 bytes is they best way to ensure 16 byte alignment, perhaps like this. (And they refer to data alignment here) or simply an array of floats, or doubles. xx-byte alignment means that a the variable's memory address modulo xx is 0. Ensuring that is a compiler-specific operation, visual c++ for example has __declspec(align(...)), which will work for variables that the compiler allocates (at file or function scope for example), alignment is somewhat harder for dynamic memory, you can use aligned_malloc for that, although your library may already guarantee 16-byte alignment for malloc, it's generally larger alignments that require such a call. Alignment ensures that objects are aligned on an address that is a multiple of some power of two. 16-byte-aligned means that the numeric value of the address is a multiple of 16. Alignment is important because CPUs are often less efficient or downright incapable of loading memory that doesn't have the required alignment. Your ABI determines the natural alignment of types. In general, integer types and floating-point types are aligned to either their own size, or the size of the largest object of that kind that your CPU can treat at once, whichever is smaller. For instance, on 64-bit Intel machines, 32-bit integers are aligned on 4 bytes, 64-bit integers are aligned on 8 bytes, and 128-bit integers are also aligned on 8 bytes. The alignment of structures and unions is the same as their most aligned field. This means that if your struct contains a field that has a 2-byte alignment and another field that has an 8-byte alignment, the structure will be aligned to 8 bytes. In C++, you can use the alignof operator, just like the sizeof operator, to get the alignment of a type. In C, the same construct becomes available when you include <stdalign.h>; alternatively, you can use _Alignof without including anything. AFAIK, there is no standard way to force alignment to be specific value in C or C++, but there are compiler-specific extensions to do it. On Clang and GCC, you can use the __attribute__((aligned(N))) attribute: (Example.) (This attribute is not to be confused with __attribute__((align(N))), which sets the alignment of a variable.) Off the top of my head, I'm not sure for Visual Studio, but according to SoronelHaetir, that would be __declspec(align(N)). Not sure where it goes on the struct declaration. In the context of vector instructions, alignment is important because people tend to create arrays of floating-point values and operate on them, instead of using types that are known to be aligned. However, __m128, __m256 and __m512 (and all of their variants, like _m128i and such) from <emmintrin.h>, if your compiler environment has it, are guaranteed to be aligned on the proper boundaries for use with aligned intrinsics. Depending on your platform, malloc may or may not return memory that is aligned on the correct boundary for vector objects. aligned_alloc was introduced in C11 to address these issues, but not all platforms support it. Apple: does not support aligned_alloc; malloc returns objects on the most exigent alignment that the platform supports; Windows: does not support aligned_alloc; malloc returns objects aligned on the largest alignment that VC++ will naturally put an object on without an alignment specification; use _aligned_malloc for vector types Linux: malloc returns objects aligned on an 8- or 16-byte boundary; use aligned_alloc. In general, it's possible to request slightly more memory and perform alignment yourself with minimal penalties (aside that you're on your own to write a free-like function that will accept a pointer returned by this function): Purists might argue that treating pointers as integers is evil, but at the time of writing, they probably won't have a practical cross-platform solution to offer in exchange. 
c-9-26	X	libnet error : success i am trying to create a ping flood program which takes as argument the target ip address and the broadcast ip address. the program will send icmp echo packets to the broadcast address and with the victms ip address as the source. all the hosts on the networks who got the packet will return the answer to the victim. the code looks like this: and when i run it i get this output: i am using libnet library in order to create the packet and i have a feeling i have some kind of a mistake in the libnet_build_ipv4() function. any help and suggestions ? thanx. regarding: this is not correct, a 0 returned value indicates success. the statement should be: Notice the change from == to != the following proposed code: cleanly compiles and links with: gcc -ggdb -Wall -Wextra -Wconversion -pedantic -std=gnu11 libnet-config --defines untitled2.c -o untitled2 libnet-config --libs is consistently formatted exits immediately after any error, However, you may need to add the statement: libnet_destroy( libObject ); at any exit point after the object is created. Caveat has not been tested with actual URLs And now the proposed code: a run of the code, with no parameters results in: 
c-9-27	X	Is there a way of referring to a C constant that was never defined/declared? I think the answer is no, and I usually don't have trouble going through source code, but I am slightly new to C/C++ and can't find where this constant is declared. I am looking for CMD_REQ_REDIS_MGET in The hiredis-vip client library for Redis. I did a github/google search for this and got results in exactly two files for five occurrences. I also tried to grep for the string in the source code. The source code does not contain any binaries and is supposed to be self-contained. It doesn't include any libraries from external sources that are related to Redis, and so I have just been confused for a couple of hours. The reason I need to know is that I am trying to add another constant just like it, and I keep getting errors that the declaration hasn't been found, so I am wondering if there is any black magic happening here with C that I am just not aware of. EDIT: Wanted to point out that this code will in fact compile as is. It's not possible to use a constant that wasn't declared before. But in that case, the constant was declared, but not trivially. You don't find the string anywhere (it should be in header files) because those values are defined in a macro from command.h using token pasting (## operator that creates new identifiers by combining old ones): so you never find CMD_+your suffix. Then by some magic (the macro name is probably redefined at some point), the following defines all the elements: Such macros are very useful to avoid copy/paste, but are hell when you're trying to find your way in the code using grep. 
c-9-28	X	How to give name to vertex in graph in c My aim is to give vertices names instead of numbers. I've found lots sample graph codes but all these codes gives vertices to numbers and it's not just converting vertices name to char because all these samples are allow you to give numbers to vertex "vertices number -1". And i can't figure it out how to do it. I'm trying to hold vertices name in an array. Then each vertex's place in array correspond to sample code's vertex number. Here is my code Edit: New Output Adjacency list of vertex 0 b -> c -> b -> Adjacency list of vertex 1 Adjacency list of vertex 2 Adjacency list of vertex 3 Adjacency list of vertex 4 Adjacency list of vertex 5 
c-9-29	X	C - Why the memory address of member of struct change I'm recently studying data structure and algorithm and tried to implement a graph data structure on my own. After I was successfully implemented graph data structure, I wanted to implement Depth-First Search algorithm using iterative method. What I exactly wanted to implement was find all paths between source and terminal nodes using DFS. Thanks to a nice guy's post(http://eddmann.com/posts/depth-first-search-and-breadth-first-search-in-python/), I tried to convert this python code into C code for my educational purpose. Here are some piece of codes that I used And the DFS code is below This code crashed as memory error so I tracked memory by inserting debug print statement as shown above(I checked the problem caused by memory error using gdb). When program starts(to be precise, when program first get enters to the while loop) those two same debug statements(one outside the while and one inside the while loop) give different result for example 0(0x6035f0,0x6035f0)1 0(0x6035f0,0x7ffff7a80ea2)1946271875 The integer value on the left most and right most side are vertex and the size of path already inserted and memory address are shown in parentheses. Memory error raised due to the right most value by causing array index bound error. I think this is caused by changing of memory address and returned garbage value. All the stacks and vectors are allocated on heap space using malloc. Does any one know how to fix/or what caused this problem? Thanks for reading this long question. Thomas. 
c-9-30	X	Struct array indexing in C I want to define structure array such a way so that search operation can be performed easily and string can be retrieved using enum value. For example: Advantage of defining array like this is that I can do search operation and also if I can't find any value in the array then I can assign some default value. But what if I want to find some string using enum value like If I index based on enum values like below then I can't do search operation. Also, if I have some random value like 300, I may get some garbage value. What is the best/optimal way to define array so that both of above mentioned operation can be achieved? Quick search is not a trivial operation. C language offers no simple way to process (key, value) mappings like std::map or std::unordered_map in C++ or dict in Python. You can only use functions from the standard library. C99 defines bsearch which allows a dichotomic search in a sorted array, and Posix defines lsearch (linear search) and hsearch (direct access with key hash). Or in plain and single C, scan the array for your key. 
c-9-31	X	C Avro API convert bytes to single value I have an array of bytes that represent an Avro value. Separately I have the text representation of the schema that the value conforms to. I can't figure out how to use the C library to convert the bytes to a usable avro_value_t. All I see is functions to read from a file. Any pointers? 
c-9-32	X	Fortran array to C I have a fortran array: Can I pass it directly to a C function that takes in the type: I am calling the C function within a fortran program. 
c-9-33	X	Floating point rounding error Why this code gives NOK ? 
c-9-34	X	Is it possible for fscanf to return zero and consume input at the same time? Is it possible for fscanf to consume input and return zero at the same time? For example, if I write and check that k == 0, can I be sure that the next invocation of fscanf on the same file f would continue at the same spot where the file was prior to the invocation of fscanf? This is true only for one of the three conversion specifiers that do not consume leading whitespace " %c, %["¦] (scan sets), and %n. All other conversions, including %d, will consume whitespace even if the data that they are trying to read is not in the correct format. Here is an example that demonstrates this behavior: If you pass non-numeric input to this program with leading whitespace, scanf("%c", &c) will read the first non-whitespace character (demo). Another variant on the theme outlined in dasblinkenlight's answer is: Try it on a file containing: Etc. Output: Note that the conversion succeeded on the second sentence, even though the matching failed on 'men)' (where 'of them)' was expected. There is no reliable way to get information about matching failures after the last counted (non-suppressed, non-%n) conversion. The next attempt to match failed altogether, but the fgets() cleaned up the input (read the residue of the line), and then the subsequent attempt succeeded, because the blanks in the format string match arbitrary sequences of white space in the input. In the last line of the example data, the information 'this is the time for all good men' was read successfully, but 'to come to the aid of the party' did not match. 
c-9-35	X	Can't delete old messages in message queue C I have created a msq to let two processes communicate to one another. The problem is that I'm having some issues since after a couple of time that I run my code some of the old messages of the previous executions show up. This bothers me because I need to perform controls on the current data and cant do it because of this. I tried irpcm -q msqid but it does not do anything except shutting down my program the next time I run it. I even tried hardcoding some keys thinking that it would help but nothing. Also tried to msgctl(msqid, IPC_RMID, 0) after I finished using the queue but nothing. Hope you can help me out and thanks in advance. Here is my code: sender.c receiver.c To delete message queue with message queue Id use or delete the message queue using key value as From man page "In order to delete such objects, you must be superuser, or the cre"? ator or owner of the object." Finally you can delete the message queue using IPC_RMID flag in msgctl() call as before running above code, create some message queues and then delete those. 
c-9-36	X	Recourse Linked list - Initialization Next Place I wrote this recourse: The problem with the code is that he dose not save the return from ListInsertByKeyRec function. when i am trying to save the return to _head->m_next , the function is not working at all(Segmentation fault). if i am leaving the code without saving the ListInsertByKeyRec to head->next the code(like i wrote in the beginning of the post) he is working like i want to but i cant save the return to head->m_next. 
c-9-37	X	fscanf != eof Clang compiler, anomalous behaviour I'm having an aggravating issue that I can't understand, With this piece of program, I read from a file taking all the numbers inside it, and very time I take a number a counter increases so I can count how many elements are in the file. In this file there are 6 numbers, but if I run this code the counter skyrockets to 32777... If I compile it with gcc, there's no problem and the counter is 6 as expected. Is this a bug of clang? Is it a feature that I'm not aware of? The file contains: The whole code: Your code is dangerous, because an incorrect file sends it into an infinite loop. Once fscanf with %d finds an input that cannot be interpreted as an int, the function returns zero without making any progress on consuming the input. Therefore, the loop never reaches EOF. You can fix this issue by looping only as long as the input is consumed: Now you need a way to communicate to the caller if the count is correct or not. You can do that by returning one if EOF is reached, and zero otherwise: I tried with fscaf==1 it still reaches 32777 This happens because you are not initializing grades in the caller. You should define it as int grades = 0, or add *num = 0 before entering the loop in file_count. The current ISO C standard defines the return value of fscanf() as The fscanf function returns the value of the macro EOF if an input failure occurs before the first conversion (if any) has completed. Otherwise, the function returns the number of input items assigned, which can be fewer than provided for, or even zero, in the event of an early matching failure. Verbatim quote from the ISO-C Standard (no public link available, the standard is not public AFAIK) If there is data to read, but that data cannot be successfully matched, this function will return 0. It will only return EOF (which is typically -1) if there is no data to read because the stream you are reading from is in EOF state or had another read error. So if you had a file like that: The loop will never terminate. On first scan it will read 23 and return 1 (one value matched). On next call it will return 0, as a cannot be matched to an integer. Yet, it also won't move the file pointer beyond a. So on next call, it tries to match a again and it will fail again. This continues endlessly. 
c-9-38	X	Displaying permanent table\list of printf() I want to display a string of characters in table\list. The table\list is made of printf function. For Example: printf("|---------|") orsomething like that. I want to know is there any chance of displaying the size of the table\list permanent no matter what user input and then display it in the table. Sample output is in the image below. Code: How to lock those horizontal lines in printf() no matter how long output will be. printf allows you to pad your output. For example You can see more details by reading up about padding for printf. 
c-9-39	X	Bitmap file isn't being saved in the right order in memory I have a bitmap image with 24 bpp, 12x12 pixles. when I try to load it to a strust that was built by this page of Simplified Windows BMP Bitmap File Format Specification I get 2 errors: the file size size in struct BITMAPFILEHEADER is zero when it should be 54, while the reserved2 should be 0 when it's 54. the bpp in BITMAPIMAGEHEADER is never right. the image size in the same struct is never right. the file pointer fileptr jumps to a random location which reads trash and not the actual data of the bitmap from memory unless I move it back to the head of the file and manually move it again 14 bytes again. my question is: how do I fix this ? is there a way to fix this ? . main: In Windows you should add #include <windows.h> and use BITMAPFILEHEADER and BITMAPINFOHEADER which are defined wingdi.h If you define your own BITMAPFILEHEADER then sizeof(BITMAPFILEHEADER) operator is not garanteed to return 14 as expected, because structure can be padded to member alignment. If you are not compiling on Windows or Windows header files are not available then use compiler specific keywords to turn off structure alignments. See Byte Count for a Struct not representing correct amount. Alternatively, read 54 bytes as follows (again, that's assuming you are not on a big-endian machine) 
c-9-40	X	How to concatenate two pointers to string and store it in an array or characters? What I know is ptr points at \xFF\xFF. Let's say that the value of ptr is (e.g 0x004E0000) which point at \xFF\xFF, how can I make foo array contain "\x41\x42\x43\x00\x00\x4E\x00" ? Code: I'm using visual studio 2017. What does copying anything to foo have to do with the VirtualAlloc? You have an array of 20 chars, just copy the values you want to that memory. You never declare lpvAddr, did you mean that to be ptr? If you did mean (lpvAddrto to be ptr, it would be something like (although it seems entirely pointless to take the high 4 bytes of an 8-byte address in this way): I assume that you just want to: copy the alpha string at the beginning of foo copy the address pointed to by test immediately after the string in foo memcpy is your friend when it comes to copy arbitrary objects, but it would be simpler to use an auxiliary pointer. Code could be: But beware: I've just answered your question, but I really cannot see a real use case for it. Just assuming that you are exploring address copy for learning purpose. 
c-9-41	X	Text to speech in C using AWS Polly I am trying to perform text to speech in C using AWS Polly. I read the documentation for the speech synthesis api and put in all of the required information in my json data. When I send the POST request I get a response like this: {"message":"Missing Authentication Token"} But when I add the Authorization header with my Access Key I get this response: {"message":"Authorization header requires 'Credential' parameter. Authorization header requires 'Signature' parameter. Authorization header requires 'SignedHeaders' parameter. Authorization header requires existence of either a 'X-Amz-Date' or a 'Date' header. Authorization=<ACCESS_KEY>"} What am I supposed to put in the Authorization header? Here is my Code: 
c-9-42	X	Convert char * to unsigned char array in C I would like to optimize my code and avoid errors, I have this function that does the "work" but I think I can improve and avoid memory problems. The idea of "‹"‹the function is to receive a string of this style "0123456789" and pass it to 0x01, 0x23, 0x45, ... in an unsigned char array. Any tip, good practice or improvement would be very useful. The ussage is something like this: In the function buffer ends like: There are a few optimizations possible. The biggest optimization comes from avoiding doing 2x memset and strcpy, No need to: which drastically simplifies the code: OUTPUT: 
c-9-43	X	Creating an evenly spaced array of double precision values I'm a noob in C and I come from Matlab. I'm going crazy to do a very simple operation like creating an array of evenly spaced numbers. What I want to do is have an array of 50 elements, starting from 0 with a constant increment of 0.1. In matlab it would be as simple as: In C I am trying this: And the output is something crazy like: And I really can't understand why. Thanks for your help! In printf("%i %d\n",i, t[i]), t[i] is a double, but %d requires that you pass an int. Use %g for a general format for printing double. 
c-9-44	X	STM32F407 USART1 : Clearing USART_FLAG_TC requires pgm to be halted before actually clearing the bit When initializing USART1 on STM32F407 I have run into a problem when enabling TC interrupt. The TC flag in SR is set ('1') as soon as the USART RCC is enabled and clearing the flag before enabling TC interrupt has become a headache for me because it throws a TC interrupt as soon as UART_IT_TC is enabld. i.e. this is a startup problem. By writing 0 to the flag in status register (SR) when initializing the USART and before enabling interrupts should clear the flags. But it does not when I run the program straight trough, but (!!!) if having a breakpoint and stepping trough the code where SR is cleared works fine, TC flag is set to 0. Therefor i always get a TC interrupt even before transmitting anything if I run the code without a breakpoint. And then another one after transmitting a character, naturally. But when I was using a breakpoint where TC flag is cleared gives only one TC IRQ and thats when actually transmitting something. Inside the IRQ handler I also clear the flags by writing 0 to SR register and this works without any breakpoint. Both transmitting and receiving data works well after this. So, timing issue was in my mind, but adding even an second delay did not change behavior and then it should not work clearing the SR register later either. Or? Does USARTs require settling time for RCC before initializing the USART? In this code I will get two interrupts on TC, one as soon I enables TC and one after character is transmitted. This code is what I am using now while trying to understand the issue. Note: I have also tried to clear the SR inside console_transmit before enabling TC but to no help. It almost like it requires to be cleared inside the interrupt handler. I think this is a conceptual misunderstanding. A transmit interrupt does not tell you that something has been transmitted. It tells you that there is space in the buffer, and it is OK to push data to the UART. Of course at the startup the UART buffer is empty, and you are getting an interrupt as soon as you enable it. It is not a matter of timing. It is an expected behavior. Such design makes the transmit flow very straightforward: the mainline code prepares the buffer, and enables the interrupt the ISR moves data to UART until either UART is full or there is no more data to send, and once there is no more data to send, the ISR disables the interrupt 
c-9-45	X	Not every signal gets handled in c I have a little c program where I'm creating 3 child processes using fork: My expected output is three SIGNAL ARRIVED, but sometimes I only get two of them. Why is this, what am I missing, and how can I achieve to get every time three? Signals are not queued, they are just flags. Sending a signal to a process just sets the flag, and if the flag is already set, it has no additional effect. So if multiple signals are sent to a process before it notices them and runs the signal handler and clears the flag, some will seem to be "lost" 
c-9-46	X	updating const in c programming When you intend to not change the value of a variable you declare it as a const in C language. If you execute b = b + 1; then the compiler complains: That's what is expected. But if we declare a pointer variable and that points to the const variable, and you increment the "value" of what the pointer variable is pointing to, then the compiler does not complain. Why? This is not allowed in C. The code contains a constraint violation, i.e. it is not valid C code, an error. Any compliant C compiler will immediately issue a diagnostic message for this problem. If your compiler does not complain, your compiler is broken. 6.5.16.1 Simple assignment Constraints 1 One of the following shall hold: [...] " the left operand has atomic, qualified, or unqualified pointer type, and (considering the type the left operand would have after lvalue conversion) both operands are pointers to qualified or unqualified versions of compatible types, and the type pointed to by the left has all the qualifiers of the type pointed to by the right; [...] In your case the pointed type on the LHS does not have all the qualifiers of the pointed type on the RHS. Your code contains a constraint violation, i.e. a hard language error. P.S. Your main() is invalid too. Should be int main(), or better int main(void). This invokes Undefined Behaviour. Quoting from http://c0x.coding-guidelines.com/6.7.3.html 6.7.3 Type qualiï¬?ers 1480 If an attempt is made to modify an object deï¬?ned with a const-qualiï¬?ed type through use of an lvalue with non-const-qualiï¬?ed type, the behavior is undeï¬?ned. So it literally depends on what your compiler does to it. My compiler gave But yours gave different result because your compiler just tried to make sense of it. Since it's Undefined Behavior, there's no point trying to make sense of it a = &b is not legal: As others have pointed out, a = &b is not legal C. However, this is not because you are not allowed to convert a const int * (pointer to constant int) to an int * (pointer to int); it is because you are not allowed to do it implicitly. You can do it if you explicitly indicate you want to convert it, by using a cast. (If your compiler does not give you a warning message when you do this without a cast, then you should turn on more warning messages for your compiler. If it still does not give you a warning, it is a bad compiler.) Specifically, clause 6.5.16.1, paragraph 1, of the C 2011 standard [draft N1570] lists constraints that must be satisfied for assignment statements. In regard to this situation, they essentially say that a const int * can only be assigned to a const int * and not to an int *. a = (int *) &b is legal: However, you can write a = (int *) & b. This satisfies the constraints for casts, listed in 6.5.4 1. And 6.3.2.3 says you may convert a pointer to an object type to a pointer to any other object type, as long as pointer is correctly aligned for the destination type. However, you cannot then use the pointer; you cannot use *a = 3 because then you are trying to change an object that was defined with const. 6.7.3 6 says the behavior when doing this is undefined. const is flexible due to C history: Why then does C allow it? Well, C was developed and used for many years before const was added to the language. It had to be retrofitted in, and this required allowing existing code to work and not breaking other features of the language. One characteristic of const is that although one routine might be passed a const int *, the actual object it is pointing to was not necessarily defined with const. For example, I can make int x = 7 and then pass &x to a routine whose parameter is const int *p. This means that routine will not change the thing p points to, but it does not mean other routines will not change it. One problem with that is shown by the standard strchr function. This is declared as char *strchr(const char *s, int c);. It is declared with the const char *s parameter because we want to be able to pass it pointers to const char without complaint. Since the parameter is const char *, we are allowed to pass either const char * or char *. And this makes sense because strchr only looks for things in strings; it does not change the strings. Suppose I have the non-constant string char foo[] = "abcdef". I can use strchr to search for 'd' in it by using char *p = strchr(s, 'd'). But then the result I get back is char *, not const char *. strchr accepted a const char * but then changed it to a char *! In this situation, that works. I passed a char *, it was automatically converted to const char * for the function call, and I got back a char * which is legal for my non-const string. But this funny business where const char * pointers have to be changed into char * is really a defect in the C language caused by its history. Round-trips of adding const and removing it are legal: Here is another situation: I write a library for other programs to use. One routine in the library prepares some data to be used later, say data in some struct foo. This routine allocates memory, calculates the data, and returns a const struct foo *. It returns a const pointer because the user of my library should not change the data. The user calls this routine, uses the data for a while in their program, and eventually calls another routine in my library to free the data. The routine to free the data must accept a const struct foo *, because that is what the user has. If it accepted a struct foo *, the user would get an error when passing a const struct foo * to a struct foo * parameter. But, inside the routine, I convert the const struct foo * to a non-constant struct foo * so that I can pass it to free, which requires a non-constant pointer. This is legal in C because you are allowed to convert a pointer to any object to a pointer to any other kind of object (provided alignment requirements are satisfied) and back, and when you convert it back, 6.3.2.3 7 guarantees that you have the original pointer back. So, we are allowed to convert a struct foo * pointer to const struct foo *, let the user use it for a while, then accept the const struct foo * in our free-the-object routine, convert it back to the original pointer, which is struct foo *, and then pass it to free. 
c-9-47	X	Copying an executable file in C I have a problem copying a file from a directory to another in C. Specifically, my code works well with textual files but doesn't with executable ones. The number of bytes written is correct and so are the file rights, but the result type of the copy is not recognized as executable by the file system (I'm working on a xubuntu Virtual Machine) and has "Unknown" type. Therefore, if I echo the results of md5sum from command line on bash, they are different. In the following code, "checkErrno" is a function defined by me that calls perror. "currDir" is the current directory and "DIRNAME" is the directory I want to move to. All the libraries are correctly included, I just copied and pasted the chunk of code that matters. Thanks in advance! I don't know if this is your problem, but remember to open both files in binary mode: "wb" instead of just "w", and "rb" instead of just "r." Your chmod would clear all bits rather than set any You need to make sure the copy is marked at least executable, maybe readable as well,(I'm not sure if a user has to have read permission to execute something but it would make sense. 
c-9-48	X	How to write a 2D array into a file and back in C I'm trying to save a board (which is a 2D array that has been dynamically allocated) into a file such that it can be later "loaded" by the user and they can use the board again. To save the board the user must input s filename. To get the user input, I have an else if statement for the save command: Since we've only learned how to read/open/write to binary files in C, I tried to do the same for this in my implementSave function: Note: I use some structs in my program; the struct board contains char** theBoard, int numRows, int numCols, char blankSpace. However, this gives me an error when I try to run the save command. Can anyone point me in the right direction? You can not just write the double-pointer to file. You have to index each element in the first pointer and write the data out in chunks of rows (or columns, but I've demonstrated rows). To do this use a for loop. Note that (assuming the board is all you are saving to the binary file) the resulting file size should be numRow * numCol bytes. Reading ("loading") the file is done in reverse of the code above - note that it is unwise to only save the board to file - I suggest at the start of the file you save the number of rows and columns to make allocation of memory easy while reading (loading) the file. So assuming you store the number of rows/columns in an int the above code then becomes NOTE this has the possibility of introducing endianness problems. You can Google that if your interested. This code means: Write data to the file file. The data is found at the memory location fileName points to, the data consists out of sizeof(boardState->board.theBoard) items and every single item is sizeof(char) bytes big. Does that sound right to you? I don't think so; it's already wrong that the data can be found at the position fileName points to as you want to write the board data to the file and no the file name, right? Also be careful with sizeof(); sizeof() cannot dynamically determine the content of some memory, it only knows the size of static memory. E.g. s will be 20. But now consider this: Now s will be 4 or 8 as pointers are usually 4 bytes in size or 8 bytes in size. sizeof() gives you the size of the pointer here, not the size of the memory the pointer points to. There is no way in C to obtain the size of a memory block a pointer points to, this size must always be known. You say your board is char ** theBoard, so theBoard is a pointer to an array of pointers to memory or characters. In that case the creation code would need to look like that (assuming that [0], [1], ... are the rows): If that is the case, you need to write your data row by row: Of course, assuming that all rows have have an equal number of cols. If I can give you a tip, don't make the board char **, just make it char *, as it makes everything so much easier. See, if your board is 20x30 (20 rows, 30 cols), then you can define your board like this: Now you just have a single array, like this: How would you access a specific field? Very simple: And then you can write the entire board in one call: See, much easier. Also you can just free the entire board by calling free(theBoard); whereas when using the char ** approach, you have to do this instead: 
c-9-49	X	Understanding of pointers an usage in C In the code I wrote: after passing p3 as an argument to the function 'change', p1 gets changed...then the main function has printed p1, p1 takes the value at double pointer p3(as wrote int **p3=&p1), but it does not take address of a(int *p1=&a). This means that value of p1 will be the value at p3, not the address of variable 'a'? Why the value at double pointer 'p3' will be considered?? Why not the value of address(&a) which the pointer stored? can anyone clarify these two lines.... I understood the concept of double pointers, but need clarification regarding these two lines... output: Because you changed p1 in this line. *x=z; To explain a bit more you have done this Now p3 has address of p1. And then you just changed it by assigning to it something else.. That something else is nothing but b's address. x contains address of p1. z contains address of b. Then you said that whatever is the content of x - go there and write there whatever is the content of z. z contained address of b. So now we changed p1-s content to the address of b. ..but in the main will it ignore the line int *p1=&a after p1 gets changed in the function?? Well to the OP - do you think that p1 will get changed here? We have lastly assigned b's address to p1. The value earlier written os overwritten. Nothing is ignored - the program did whatever it is said to do. Another point Use %p to print a pointer like this 
c-9-50	X	Python ctypes how does one skip optional arguments I have a function in the header im wrapping Im wrapping this function with Also tried skipping I need to call this function without specifying last parameter. I tried None and creating a null pointer like this POINTER(StuffList)() I feel like i should user prototype but i don't know at this point. Try: and or None is the equivalent of NULL in Python. Declare argtypes for all three parameters. The following is correct: ctypes doesn't do know about optional arguments so you have to pass something. You could always wrap the ctypes call in a Python function and then call it: 
c-9-51	X	Linux kernel function In which cases kernel use do_wait_thread function ? Using site http://elixir.free-electrons.com, you can see where is used do_wait_thread: in function do_wait. Same search, do_wait is used by some drivers and by wait4 and waitidsystem calls, and by some drivers. 
c-9-52	X	LibCurl undefined references Trying to make a translation program in C using Libcurl. Text editor is Atom and using gnu compiler. When compiling as "gcc example.c" i get these errors: And when compiling as "gcc projektzwei.c -lcurl" i get this error: This is my code I've searched around a bit and it seems most people get it fixed by adding the -lcurl at the end of the gcc command but it just doesn't work for me. Any ideas? Based on this line: it looks like you've not installed curl on your machine, you've just downloaded the source and compiled it. That's not the wrong way to do it, but it does make your life more difficult. Firstly you need to correct the above line as it should be You then need to tell the compiler where the include files are by adding "-Ilibcurl/include". By doing this, it means that if/when you install libcurl properly, you won't need to make any changes to your code - you can just remove the -I option. Secondly, you also need to tell the compiler (technically the linker) where the libraries are with the -L option. It looks like that should be "-Llibcurl/lib/" So to summarise, having fixed the include line as per above, your command to compile your code should look like: 
c-9-53	X	error: expected "˜:', "˜,', "˜;', "˜}' or "˜__attribute__' before "˜=' token in struct I'm getting the error when compiling with gcc -Wall -std=c99: pokerhand.c:20:17: error: expected "˜:', "˜,', "˜;', "˜}' or "˜__attribute__' before "˜=' token Card *cards = malloc(sizeof(Card)*5); here is my code where the error is happening all I have before these structs is header includes You can't "do things" with the struct members when you define the struct. So Card *cards = malloc(sizeof(Card)*5); makes no sense, and the compiler issues a diagnostic. One solution is to build an init_card function, that takes a struct card* as an input parameter; and you perform your initialisation there. If you also build a corresponding free_card function you'll end up with something that scales up remarkably well. You can't write code inside a struct declaration. That is wrong. I bet this would solve the error And later you can allocate to it when you have proper variable declared with that type. Also this would work If you think that each hand would contain 5 card every single time then yes you can add it like this. In the first case you need to allocate the cards and then free it when you are done working with it. 
c-9-54	X	Run just one process I have a process called "server" running, and wanted to know when the user tries to run another process "server" that this process ends automatically because there is already one to be created. 
c-9-55	X	Linker error calling a particular function I am using the opus library in an Android project. I have successfully linked to the library and can use the opus_decode function. But even though Android Studio does not throw any errors, the opus_decode_float throws an undefined reference error when I try to make the project with a linker command failed messages. I have refreshed the linked c/c++ files and restarted Android studio. Error still persists. Similar cases I have come across all mention linking/importing the header file where the opus_decode_float is defined but this is already imported as opus_decode which is defined in the same header file does not throw any linker errors. 
c-9-56	X	OpenMP - How to effectively choose chunk sizes when scheduling I'm currently studying parallel programming and more specifically the OpenMP API. When it comes to choosing between static scheduling and dynamic scheduling, a colleague of mine told me that static is usually best when each iteration takes an equal amount of time. Otherwise dynamic is the best bet. However, there is something I don't quite understand: how does one go about choosing a suitable chunk size? 
c-9-57	X	Passing parameters struct to function in C I am System Analyst & Developer student, I'm trying to write code but I'm stuck, structs and fuctions are easy to understand but working with both together... is a... crap... What an I doing wrong? It gives me huge error list. Then I wrote same code but without creating array of struct and the code worked perfectly. I am missing up something. You need to understand the 2nd example (simple) before trying the 1st (harder) No need for the setbuf() call, you flush stdin when you press the key Once you've done this, you can change to m[i]->mercadoria, etc in your first example. There are all kinds of wrong with your original function. You're passing it a pointer to struct mercearia which is fine for passing in your array. Inside the function you can treat m the same way you would an array, so for example m[0].valor is how you'd access the valor value for the first element. This means that your various calls to scanf become Note, that for reading in a string unlike other data types, you don't need to pass in the pointer to the string so you don't need the preceeding &. 
c-9-58	X	C concate string extra space I created a function which basically does the same as strcat. I can't understand what am I missing. The concatenation works except in the last charcarter, I allways get an extra space . You fail to terminate the output, you never write the '\0' at the end. You can make the second loop be the classic copying loop instead: This will stop after copying the terminator. Your code probably has undefined behavior, which happens to manifest as an extra space. Also, if your input really is "My " and "House", the correct output should of course be with all the spaces at the end of the input preserved. As pointed out in a comment, you can't modify a string literal, and you of course need to have the space allocated. Something like this: This prints: as expected. 
c-9-59	X	Segmentation Fault in C code when double click on the executable file I have a code written in C which reads from a file. I am using a Mac and when I run the executable file using the terminal like ./project it's ok but when I double-click on the same executable file it returns error code 11. How can I fix that? 
c-9-60	X	How to run c programs continuously as background process in ubuntu Hi I have small c program to add two numbers as below. I want sum method to be run in the background as process continuously. How can i run c program as process? If this is not possible is there any alternative methods to achieve above task? Later on I want to access this process from c#. Any help on this greatly appreciated. Thanks Running a job in the background has nothing to do with the language it was written in. To run any program (assuming a bourne shell like syntax) you run it like the '&' tells the shell to execute it backgrounded. The program will do whatever it does and if the end of main()is reached or it calls exit() the job will finish. The life-cycle of a job is basically the same when in the foreground or background. Probably what you actually want is to learn how to write a daemon. Here is a simple example. 
c-9-61	X	How to make a void pointer to read a given part of a binary file I have a binary file which contains 3 differents structs and a christmas text. On the first line of the binaryfile have they provided me with a int which represents the size of a package inside the file. A package contains 3 structs ,the chistmastext and the size. The structs lies in a file called framehdr.h and the binary file I'm reading is called TCPdump. Now am I trying to create a program att will read each package at a time and then withdraw the text. I have started with something like this: I know that the first struct ethernet will always have the size of 14 but I need to get the size of the other 2 and I'm suppose to use IP_HL and TH_OFF for that. But my problems lies in that I can't seem to read the entire package to one void * with the fread. I get noting in my *ptr. Which in turn makes the code break when I try to convert the void * to one of the structs ones. What I'm doing wrong with the void *? Two problems: First you should not really use text functions when reading binary files. Binary files doesn't really have "lines" in the sense that text file have it. Secondly, with you are passing a pointer to the pointer variable, you don't actually read anything into memory and then make ptr point to that memory. What happens now is that the fread function will read nr bytes from the file, and then write it to the memory pointed to by &ptr, which will lead to undefined behavior if nr > sizeof ptr (as then the data will be written out of bounds). You have to allocate nr bytes of memory, and then pass a pointer to the first element of that: You should also get into the habit of checking for errors. What if the fread function fails? Or the file is truncated and there isn't nr bytes left to read? You can check for these conditions by checking what fread returns. And not only check for fread, there are more functions than fopen that can fail. 
c-9-62	X	How to compare 2 chars in c I want to compare 2 chars but i dont know how to compare their content. I tried with classic if loop but I compare just characters from if loop not real chars I entered. 
c-9-63	X	x86 Input a number in the base 2 and output it as a number in base 8 For converting any number in the base 10 to the base 16, a good implementation would be: Is there an implementation alike for converting a number from the base 2 to the base 8? This is essentially a duplicate of this C/C++ question because you're asking how to do it by calling C library functions. That's fine, no reason you can't do that in asm. I decided not to just close as a duplicate because there's enough to say about how to do it correctly that it's a bit long for just a comment. C syntax is an easier way to express which functions you need to glue together, so I'll just basically answer in C. If you want to do any of the steps with a loop in asm, go for it. Converting a binary string to integer is very easy, you just shift in digits one at a time. (Or use SSE2 pmovmskb). Use a printf %o conversion for output in base 8; that's directly supported by ISO C. Base 2 isn't, though. But strtoul converts strings->unsigned integers with your choice of radix. The only remaining problem is reading input as a string. There are lots of ways to do that, but if you want to avoid over-reading and consuming characters that aren't part of a base-2 number, you can use scanf with a %[] conversion that accepts only the characters 0 and 1. So you can write asm that looks like this: All of these C statements can be implemented with a short block of asm instructions, not loops. If you're not sure how, ask a compiler with gcc -O2 -S -masm=intel. Note the length limit in the scanf format string, so you don't have a buffer overflow if the user holds down a key and your program reads 1000 bytes of 1. Also note the leading whitespace in the format string, to skip any whitespace currently in the stdin buffer. (e.g. the newline at the end of the previous line, which scanf won't normally consume). Conversions like %c and %[ don't skip leading whitespace on their own. If you want it to consume trailing non-digit characters, use %64s. strtoul will stop at the first non-digit character. (And store a pointer to that position if you pass a non-NULL char ** as the 2nd arg.) 
c-9-64	X	Data reception via UART on STM32L476 I am trying to receive data via UART/USART on stm32L476 from an Electricity meter and to display it at the same time on the screen using putty. The Meter is equiped with RJ12 port. The following link is the wiring diagram of the rj12 port I found an example describes an UART transmission (transmit/receive) in DMA mode between two STM32L476-Nucleo boards in Keil examples. So I kept the receiving part and removed the rest.I don't know how to use the printf in this case here is my code: 
c-9-65	X	sleep() C doesn't return the correct value I am a doing a school project (need to develop it in C) and I need it to execute some code each X seconds and Y seconds after the execution of the program has started it must end. So I wrote: The variable end is a global variable initialized at 0 and when a SIGALARM is received the value becomes 1. If I have got X>Y the code to do each X seconds shouldn't be executed but if X=Y+1 it is executed once. Could you tell me why this happens? Per the manual: DESCRIPTION sleep() causes the calling thread to sleep either until the number of real-time seconds specified in seconds have elapsed or until a signal arrives which is not ignored. RETURN VALUE Zero if the requested time has elapsed, or the number of seconds left to sleep, if the call was interrupted by a signal handler. Your use of alarm() almost certainly interrupts your sleep() call. And even if alarm() didn't interfere, sleep() can always be interrupted by a signal anyway, and you have to handle that appropriately. This is easy to do with only sleep(): But note that it's clearly not accurate, there is better method that sleep() with POSIX standard like clock_gettime() and nanosleep() or clock_nanosleep(). 
c-9-66	X	Compare two 2D arrays in C I have problem comparing two 2D arrays. Example: First array: xxooo oxxoo oxooo oxooo ooooo Second array (can be rotated): oxoo xxxx xooo But when I compare them, I manage to rotate and check similarities for starting left top with two for loops like this: How can I check for similarities in whole first array if its dimensions are larger than the second array? Another example: Here is my code: What I can think of right now is using the Two Pointers technique by traversing the smaller and larger array simultaneously and checking for similarities. You'll still need to enhance it a little bit to be able to check for rows which are identically over each other. I won't bother with getting into the very large program that was posted, other than to note that you should always check values returned from functions which return meaningful values. The scanf() family of function return meaningful values, which should be checked to help verify whether input is as expected. In the posted code, if the user enters non-numeric input (accidentally or on purpose), the code continues with indeterminate values as if nothing was wrong, leading to potential undefined behavior. One strategy for checking the larger array against a smaller pattern is to copy smaller regions of interest to a temporary array of the same dimensions as the pattern. This temporary array can be compared with the pattern using memcmp(). Various transformations can be applied to the temporary array, which can then be checked against the pattern again. Here is an example program using some of the sample input from the question post. The contains_similar() function returns 1 if a match is found, 0 of no match is found. A couple of alternatives would be to return the (upper-left) indices of the first matching pattern, or to store all such indices in an array. There is a reverse_rows() function as an example transformation. This transformation is applied to the temporary array within contains_similar() if the first comparison fails to match, and the transformed region is then compared with the pattern again. A more sophisticated version of this would use an array of pointers to transformation functions which could be iterated over in a comparison loop. Program output: Checking for pattern rotations The above code works fine for some uses, but will not work easily with OP goal of checking for rotated patterns within the larger pattern. Non-square patterns will change shape under rotation, and will fit into the larger pattern differently before and after rotation. The above code could be reconfigured to check the larger pattern against a sub-pattern, then against a rotated sub-pattern, etc. While reconfiguring, the pattern arrays could be wrapped in structures. These structures can contain arrays which are larger than the anticipated patterns, and can also contain the sizes of the actual patterns. It is convenient to keep pattern dimensions together with the representation of the pattern. The larger pattern, sub-pattern, and region of interest are all stored in such Pattern structs. The memcmp() function can still be used to compare patterns, but now entire oversized arrays are compared. This may not be the most efficient comparison method. Note that memcpy() is no longer used to copy the region of interest, though it could be; here a nested loop was used instead for variety. This version also stores the locations of pattern matches. The Matches struct contains an array of Coordinate structs large enough (ARR_SZ * ARR_SZ members) to hold matches if every location in the pattern is a match. When a match is found, the indices of the top-left corner of the matching sub-pattern are stored in the array, and the number matches .num is incremented. The large pattern is a modified version of the posted example input, which contains a few pattern matches in different orientations. In main() the large and small patterns are initialized, and the found structure is initialized to 0. The find_similar() function is called; this function calls find_pattern() with the small pattern and rotations of this pattern. When find_similar() returns, a message is printed to indicate whether any matches were found, and if so the locations of the matching patterns is displayed. If OP is unhappy with the use of structs in this solution, certainly a satisfactory solution between the two presented here can be found. Program output: 
c-9-67	X	why my first child process does not receive signal from his parent this program have been writted in C and compiled on ubuntu. my script create two child. The first record his pid in a static var. A second child is created and send a signal to parent. parent receive signal and send a signal at this turn to the first child. But the first child does not receive this signal. function sig_handlerr is never called. can u explain me why please ? You have a lot of bugs, of which the most important are: Your first child process exits immediately after calling signal, and the parent waits for it before starting the second process. That means, by the time the parent gets around to sending a signal to the first child, the first child is not there anymore to receive it. Use sigsuspend to make the parent and the first child sleep until the signals arrive, and call wait in the parent only after all other work is done. It is not normally safe to call printf inside a signal handler. However, if the program is sleeping in sigsuspend when the signal arrives, then it's OK. Use sigprocmask to make sure that SIGUSR1 is only deliverable during the sigsuspend calls. (You can find a list of functions that are safe to call inside a signal handler in the Linux signal-safety(7) manpage.) Instead of doing clever things with a shared memory segment, the parent should just save the child PIDs returned to it by fork. You should be using sigaction, not signal. You are not checking for any errors. You are not checking whether the child processes exited successfully. Well, the parent process doesn't send any signal until well after the first child has ended (so there's no chance for it to act on behalf). It just creates a child process that registers its pid in an array pidt[0] (being this array in a memory segment shared with its children) and installs a signal handler for the SIGUSR1 signal (of no use, as it exit()s just after that (it has almost no time to receive a signal, but read more, it cannot). Then, the parent wait()s the dead of the first child (this is wrong)... which happens... so there's only one process after that. The parent process then installs a signal handler and creates a second child. It is kill()ed by the child process, and you see that from the output of the signal handler once it is executed. As no first child is alive, there's no chance to receive a signal and no chance to see the output expected (you don't say this output is expected, but I guessed that :) ) (look, there's no \n at the end of the last message, so you get the prompt immediately after it) NOTE The final kill of the child to the parent can make the wait() syscall that is being used by the parent to wait for the second child to be interrupted (you don't check for the return value of it) and so, the final printf() can get executed before the actual exit of the second child (the child doesn't do anything but exit() so nothing can be observed after the final exit in the child, but you have to check this also). About the signal sent in the parent signal handler.... think twice: you have launched the second child (which is the one that sends the first signal to the parent) after the first child has exit(2)ed, so there's no possibility for it to receive the signal. You don't check the result code of the kill(2) syscall, as it will tell you the TARGET process does not exist. The following code repairs the broken part... first, the parent cannot wait for the child to die. The child must be alive and waiting for a signal, after installing its signal handler (this is what pause(2) does, wait for a signal to arrive): You'll get the following output: (again, with the prompt just after the last message :) ) The difference between your code and mine is below, to remark the differences: 
c-9-68	X	Passing an "adress" as a function argument - Python 3 I'm trying to use a C file that contains two functions, and one of them is a function that takes as argument the address of a variable (in C denoted by "&" and changes the value of that variable (at least this is what I believe)). Here are the functions (They are kind of complicated to understand) An example of the usage in C would be: And so the value of the variable "rand" would be some pseudo-random value between 0 and 1. I'm trying to use these functions in Python but there is a problem. I'm using id(x) as &x because it's the only thing I found to be at least relate. Here is my code: Notice that I am first using the C file to create a .so file, and then use it in Python3. The problem is that the value of x remains unchanged. How can I make the value of x change to a pseudorandom number between 0 and 1? Setting aside the strange nature of the C code, id(x) in Python is not an address. It's an identifier that is unique to a given object, but other than that the Python runtime can make it whatever it wants to. It's entirely possible that some implementation of Python could choose IDs from the negative integers (which are clearly not valid addresses). The standard implementation, CPython, does use an object's address as its ID. But even then, you can't pass that address to a ctypes function that expects a pointer and expect it to work, because the address used to make the ID probably doesn't even point to the value. More likely, it's the address of the Python "wrapper" object. For example, when you write in Python, what happens behind the scenes is somewhat along these lines: I mean, that's not the real code, and probably not even all that similar to it - I just came up with this off the top of my head - but at least that should give you an idea that there's a lot more going on at the C level than just assigning a value to a variable. If you were to try to use id(x) as a pointer, given this example code, you'd wind up getting the address of the PyInteger object, not the address of the C int value it holds. What you should be doing is using ctypes.byref() or ctypes.pointer() to create the pointers which you pass to your C functions. And the objects being pointed to should be instances of e.g. ctypes.c_int, not Python integers. Python integers are never supposed to change, whereas c_int is allowed to change its value. Incidentally, if you just want a random number, Python has built-in ways to do that. 
c-9-69	X	Average of Even Numbers and Product of all Odd Numbers It seems the even calculations worked but when it comes to odd it gives the wrong answer. Please help Our instructor wants us to use looping or iterations. No arrays. Please help me First, your C code needs some correction: at least give the prototype of getn before using it getn is defined to return an int and doesn't return anything. Either replace int with void or return a value. Second, Your code computes the product of ten numbers, if this product is too big, it cannot be store as-is in an int. For example, it works well if you enter ten times number 3, the result is 59049, but if you enter ten times number 23, it will answer 1551643729 which is wrong because 23^10=41426511213649 but that can't be stored in an int. This is known as arithmetic overflow. Your average is bad, because you sum ints, but the average is (in general) a rational number (average(2,3)=2.5 isn't it ?). So double avg = out/10.0; (means compute a floating division) and printf("Average %f\n",avg); would be better. 
c-9-70	X	Change values of 2D array in function The following code works perfectly well if I put the function content into the main block, but the function completely fails here. I currently get a 'subscripted value is neither array nor pointer nor vector' error. I also get 'passing argument 1 and 4 of 'accumulate' from incompatible pointer type' errors. 2d array when passed to function that decays into T (*)[COLS]. Or alternatively you can write So you would write Also you should be aware the ypos[i] and xpos[i] should be within the limit of the array size so that you don't run into undefined behavior. 
c-9-71	X	What are the dangers of using #pragma once? Modern C and C++ compilers support the non-standard #pragma once, preprocessor directive, which serve a similar purpose to the classic header guards: One problem, I'm aware of, with the classic approach is that once you've included a header, you have to #undef the header guard macro to include it again (doing so, to me, is a major code-smell, but that's beside the point here). The same problem arises with the #pragma once approach, but without the possibility of allowing the header to be included more than once. Another problem with the classic-approach is that you may, accidentally, define the same macro in unrelated places, thus either not including the header as expected or doing some other nasty stuff, that I can't imagine. This is reasonably easy to avoid in practice, by keeping to certain conventions such as basing the macros to UUID-like objects (i.e. random strings) or (the less optimal approach), basing them on the name of the file, they are defined in. I have only rarely experienced any of these, potential problems, in real life, so I don't really consider them to be major problems. The only potential real life problem I can think of with #pragma once, is that it's not a standard thing -- you're relying on something that may not be available everywhere, even if it is present, in practice, everywhere (*). So, what potential problems exist with #pragma once, besides the ones I've already mentioned? Am I having too much faith in having it available, in practice, everywhere? (*) Some minor compiler that only a handful of people use, excluded. I have worked with a decent set of compilers so far: GCC Clang/LLVM IBM XLC Intel C++ Compiler The only compiler that does not support #pragma once is the IBM XLC compiler, that that one does not even support C++11, so I am not interested. If you need to work with the IBM XLC Compiler on Blue Gene/Q, then you cannot use #pragma once. A long time ago, certain compilers did not understand the include guard idiom and would repeatedly open the header file only to find that the preprocessor reduced the content to nothing. With these compilers, using #pragma once would give compile time benefit. However, this has been implemented in major compilers, such that this makes no difference nowadays. Perhaps you have some special compiler for your embedded system. That one might be unable to use #pragma once. In general I prefer #pragma once because when you duplicate a header file in order to do incremental refactoring by duplication or extending a class, you cannot forget to change the name of the include guard macro. Therefore I do not know of any hard problem you have with #pragma once, except for certain compilers. One problem I have encountered with using #pragma once was when including the same file that is located at multiple locations. With #pragma once it is deemed different, not with #ifndef/#define guard. In using #pragma once you are giving up portability. You are no longer writing C or C++, but something allowed as a compiler extension. That could cause you headaches if your code ever targets a different platform. It's for this reason that I never use it. Given that the name and location of a file is unique, I use that as my include guard. Furthermore because I have in the past targetted very old preprocessors, I use as a habit which has worked on every platform I've encountered since 1996. 
c-9-72	X	LD: Linking a shared library to a static library I am trying to link a static library with shared library and this throws me an error saying recompile with -fPIC Here's what I have tried using an example: Shared library code: And the static library code: Now, see that the shared library uses the API of static library. Here's how I compiled: After the last command, I get the following error: I actually got static library from a vendor and I am trying to build a shared library on top of it. I don't have the source of static library. I get other type of error saying: I went through so many articles, but couldn't able to figure out. Please help me fix this. References: Reference-1 Reference-2 In your above example you need to use -fPIC when compiling object files for your static library. If you omit this option the compiled code just cannot be wrapped into a shared object. If you only have the static library and no source code there is nothing you can do about it. Ask the creator of the library to provide you with a compile where -fPIC is enabled. 
c-9-73	X	How do I get info out of a kernel slab corruption report? I'm debugging a filesystem corruption (sometimes I see symlinks pointing to "" after mount) and I enabled the usual CONFIG's in menuconfig (EXPERT, KALLSYMS, DEBUG_KERNEL, DEBUG_VM, DEBUG_SLAB, DEBUG_LIST, DEBUG_MUTEXES, CC_STACKPROTECTOR, etc) to try to get some info. This is on a 3.18-stable kernel. With the debug kernel I sometimes see reports like this when mounting rootfs that look related: I'm trying to find out what code allocated or freed (returned to the cache) the memory, or something similar. I tested with DEBUG_PAGEALLOC=y and =n but I don't see "Last user" info (i.e. the stack for the kmalloc) in dmesg, which according to slab.c [1] should be printed if the memory block header has the SLAB_STORE_USER flag. My question is, how can I get the alloc stacks to show in the corruption report ? EDIT: according to slub.txt [2], this may only be possible with SLUB. [1] http://elixir.free-electrons.com/linux/v3.18.80/source/mm/slab.c#L1735 [2] https://www.kernel.org/doc/Documentation/vm/slub.txt Answering my own question. SLUB does give you a backtrace and redzone info. I enabled SLUB, SLUB_DEBUG, CONFIG_SLUB_DEBUG_ON. It was an off-by-one that put a \0 on the next object which was an inode->i_name. 
c-9-74	X	operator precedence in C? I am a little bit confused about the operator precedence? what is the first condition the compiler will read in the above code? Is it going to first evaluate y % 2 && z++ % 2 since && has precedence over || or is the compiler still going to go from left to right and short circuit if on the very left ++x >= y * 2 is true? i.e is the code going to be read in the following way by the compiler? Your expression is grouped as and this is assigned to sum. This is specified by the grammar of C. Note also that the right hand side of || is not evaluated if the left hand side is 1: which will mean that z is not incremented in that case. For avoidance of doubt, ++x is the new value of x, and z++ is the old value of z. Note also that because || is a sequencing point, the expression would be well defined even had you written x++ on the right hand side, rather than z++. Calling the result of this sum is an exercise in obfuscation. Order of evaluation has nothing to do with precedence (or associativity for that matter). The fact that && has higher precedence than || tells you that a || b && c is equivalent to a || (b && c). This does not tell you whether a or b && c get evaluated first. In case of || and && the standard specifies that the left operand is evaluated first (and the right operand is not evaluated at all if the left operand evaluated to true (in case of ||) or false (in case of &&) respectively). So in a || (b && c), we know that the order is a, b, then c (assuming all three end up being evaluated). For most other operators, the standard does not specify the order of evaluation, so, for example, in a + b * c, we know that it's equivalent to a + (b * c), but we don't know whether a is evaluated before b * c nor whether b is evaluated before c. Operator precedence specifies how an expression is parsed, not how it is evaluated. Although related, evaluation order is something different! It is either specified by the specific operator, or it is unspecified. Operator precedence dictates that the expression is equivalent to: as operators have the following precedence order: If you think sum = ( ((++x) >= (y * 2)) || ((y % 2) && ((z++) % 2)) ); is an unreadable mess, you are correct. It is however just as bad as the original expression. Never write multiple operators on a single line like this if you can avoid it. That's as far as we go with operator precedence. it merely "glues" specific operators together with operands. It does not dictate the order of evaluation. Think of it as in math: in a mathematical expression (1 + 1 + 1 * 2 + 2 + 2), the operator precedence of math guarantees that 1 and 2 from the 1 * 2 belong together, but it doesn't tell you in which order you should solve the equation. You can start solving it by calculating 1 + 1 first, or 1 * 2 or 2 + 2. In the expression sum = ++x >= y * 2 || y % 2 && z++ % 2, only the || and && have specified order of evaluation. These two operators in particular are sometimes informally referred to as having "short-circuiting" evaluation. For the rest of the operators, the order of evaluation is unspecified, meaning we can't know anything about it or rely on it. The compiler doesn't even need to be consistent from expression to expression - the reason why is to allow compilers to produce the fastest possible code when parsing their expression trees. The only thing we can know is that the sub expressions ++x, y * 2 and [result of ++x] >= [result of y * 2] will get evaluated before the right side of the ||. And in turn, if the right side of || does get evaluated, then y % 2 will get evaluated before the rest of the sub expressions, because && does guarantee the order of evaluation of its operands. 
c-9-75	X	Is it possible to invoke a program through another program I'm reading an article about Buffer Overflow Attack:http://www.cse.scu.edu/~tschwarz/coen152_05/Lectures/BufferOverflow.html Theoretically I understand what it is talking about. But I can't imagine how a hacker program could be executed by this kind of attack. For the example in the article, the function bar is called because of the designed string. However, bar is a function of the same program. In other words, he is hacking himself on purpose. As I know, any address in a program only belongs itself, meaning that you can't invoke a function of another program thought its address. I just want to know that in real cases, how will a hacker do? As it said: A real attack would try to place the address of the top of the stack in lieu of the return address, followed by some horrible lines of assembly code, such as a call to another tool. what is "some horrible lines of assembly"? Is there a simple example? Go read Smashing The Stack For Fun And Profit. It has a specific example for 32-bit x86. Yes, programs run other programs all the time. e.g. a command shell takes input that you type and runs that program. Or in a GUI, double-clicking on a program runs it. The program that draws the file-manager window and receives your double-clicks is itself a program (or graphical shell). Anyway, the OS has a system call for starting a new program, and by getting enough control to run a small amount of code in the process you're attacking, you (the attacker) can invoke that system call with args to start whatever program you want on the remote computer. Often you'd choose args like /bin/sh (the Unix shell). Depending on context, its input might still be connected to the network socket you used to send the exploit payload. (Often called "shellcode", because the typical exploit goal is to invoke a shell. Although the term is now more generic, and applies to any executable machine code exploit payload, especially when formatted as a string. Usually this means avoiding any 0 bytes in the machine code.) As I know, any address in a program only belongs itself, meaning that you can't invoke a function of another program thought its address. Data is code, code is data. As soon as your exploit payload (i.e. machine code) is read into memory by the process you're attacking, it has an address in the target process. The simplest kinds of buffer overflows include code and data that overwrites the return address of a function, so the function returns to the exploit payload instead of to its caller. This is the classic stack-smashing attack for buffers allocated on the call stack, like char buf[16]; // nobody ever types more than 16 digit numbers, right? inside a function. From that page, you already know how an attacker can take control of the return address with a buffer overflow. Things like non-executable memory e.g. W^X (either write or exec, not both), and ASLR (address-space layout randomization, are both designed to defeat this sort of attack. If stack addresses are randomized, it's might take a lot of tries before you manage to get the return address to land inside a bunch of NOPs (a "nop sled") in your exploit payload. 
c-9-76	X	Concatenate macro names I'm trying to create some macros for a routing layer. The router should be able to call functions from another modules, routing is based on a channel. I have 2 enums: Configurations: Router macros: I want ot do this: and i expect this flow: RouterInit(CH0,param) => GetModule(CH0)##_Init(param) => CH0_Module##_Init(param) => AModule##_Init(param) => AModule_Init(param) => ExternalInitFunction(param) I get error: expected a ";" the preprocessor is unable to perform 2 passes. Why don't you define RouterInit in 1 pass? result of gcc -E on that snippet (plus the other stuff you declared): 
c-9-77	X	perf_event_open can not open more than 7 fd Here is my code, perf_event_open can not open more than 7 fds here is the output, only the first 7 perf events are opened, the rest of it will failed with errno 2. I do not find any illustration about this limits in linux man page, would some tell me what's happened, thanks so much. My os version is centos 6.5 . This has nothing to do with the number of open perf events as you can easily find out by simply removing the first 7 perf_event_open calls. No such file or directory (ENOENT) is not the same as Too many open files (EMFILE). The manpage of perf_event_open explains the return codes: ENOENT Returned if the type setting is not valid. This error is also returned for some unsupported generic events. The event is simply not available on your system (with the given kernel). This answer discusses the availability of PERF_COUNT_HW_STALLED_CYCLES_*END events on modern CPUs. 
c-9-78	X	Simple C/C++ Definition-Resolution for Visual Studio Code (vs. Sublime) I am using Sublime Text a lot as an editor due to its simplicity: I simply grab folders and drag them into a project and that's it, I can navigate, Definitions are resolved even if they exist multiple times. I typically know which one applies and thus can simply navigate to the corresponding file. ... whereas if I'd take the same project in Visual Studio Code then IntelliSense complains about the includePaths - which ofc. are not resolved properly - they are not defined (and I don't want to specify every single folder where a headerfile may be located). Thing is I develop in C a lot and use custom (plain) MAKE environments, so all the include-paths are resolved in the Makefile based on the project setup. Using libraries that support multiple variants (e.g., Nordics nRF-SDK) and thus duplicate header-files and have nested include paths doesn't make things easier. So... (1) Is there a simple way to tell Visual Studio Code to tell me where stuff is like in Sublime Text w/o having to define any includePaths? (2) Or does Visual Studio Code only make sense for full setups, do I really have to also tell VSC where all my includes are (no-go)? See the following screenshot from Sublime - no configuration necessary. Sure bad example since it only shows .c and .h file, but it would do the same thing if there was multiple header files containing the definition. 
c-9-79	X	Random Segmentation fault in MPI I am just trying to learn MPI and I am parallelizing matrix multiplication using MPI. Following is my code When I run the program on a cluster having 4 nodes and each node having 16 cores, initially the code works without any errors. But after some random number of runs, the code throws segmentation fault and again the code runs without any error. Even the printf statement before MPI_Finalize() is executed (when I get seg fault) by all the processes and all the rows of output are correctly calculated and received but I don't get the reason why it does not work. Also, on my laptop with only 2 physical cores when I run the code for n,p which gave me seg fault on cluster, the code runs perfectly fine without any seg faults at all. This is the error trace Sorry for the low-quality image, I didn't have any other way of extracting traces. Thanks in advance. Edit: Expected output: Simple matrix multplication of two matrices matA and matB stored in matC. matA has all the entries as 2 and matB has all the entries as 1. So matC should have 2n in all entries where nxn is dimension of matA, matB and matC. Edit: Error testcase: For following n(dimension),p(number of cores) the code gave seg fault. I think it is random but to make question more clear 1. n = 2048 p = 12 2. n = 64 p = 16 3. n = 1024 p = 28 4. n = 2048 p = 16 and so on 
c-9-80	X	scanf hexadecimal to uint8_t in C I have to emulate a simple assembly language. I have a memory of 256 bytes that I chose to represent by a table of uint8_t (as they are bytes): RAM[256]. My problem is that I need to enter the code in hexadecimal so I have lines such as: or depending on the level of indirection. Not only this generates warnings: format "˜%X' expects argument of type "˜unsigned int *', but argument 2 has type "˜uint8_t * {aka unsigned char *}' but it also 'erases' 4 bytes at a time in my RAM. I guess the %02X format is not the right choice here but I could not find any other way to enter hexadecimal. scanf("%" SCNx8, size); works fine but now I have to read the code from a file, the file is in hexadecimal again, all values separated either by spaces or newlines. I tried lu = fscanf(prog, "%" SCNx8, size); but I get the following warning now: format "˜%hhx' expects argument of type "˜unsigned char *', but argument 3 has type "˜int' [-Wformat=] scanf("%" SCNu8, &RAM[i]) is the correct format specifier for this case. Because ultimately you are reading an uint8_t type variable. For this to be successful you need to include the header <inttypes.h>. For hexadecimal the format specifier will be SCNx8. 
c-9-81	X	Why is my hex conversion function off by one? I'm trying to learn c and am confused why my hex to int conversion function returns a value that is off by one. Note: 0XAAAA == 46390 Output: Update: I now realize "- 55" is ridiculous, I was going off memory from seeing this: You have several bugs such as the string not getting null terminated, and the ASCII to decimal conversion being nonsense (value 55?), you don't initialize sum and so on. Just do this instead: EDIT If you insist on doing this manually: You're just making up logic, there isn't a single value you can subtract from a hexadecimal digit character to convert it into the corresponding number. If you want to be portable, all that C requires is that the symbols 0 through 9 are consecutive in their encoding. There's no such guarantee for the letters A through F. Also involving pow() which is a double-precision floating point function in this low-level integer work, is a bit jarring. The typical way to do this is by multiplication or bitwise shifting. If you're hell-bent on doing the conversion yourself, I usually do something like this: The above is a bit verbose, you can for instance fold the decimal digits into the string used for the letters too, I just tried to be clear. The above should work for any valid C character set encoding, not just ASCII (and it's less passive-aggressive than @Lundin's code, hih :). 
c-9-82	X	Who is the winner? I'm new to C. I've made the code, but I can't seem to find why the output doesn't show. This is the question Problem 2: Who is the winner? (Level 2) "¢ Problem description Alice and Bob are playing a game. Both of them write down an integer number. If the sum of two integers is a square of an integer, Alice wins the game. If the reversed number of the sum is a square of an integer, Bob wins. If neither of them wins, or both of them win, it is a tie. For example, Alice wrote an 8, Bob wrote a 10. 18 is not a square of any integer. But 81 is a square of 9. So Bob is the winner. Write a program to take two integers numbers and output the winner of the game. "¢ Input & output requirements Input two positive integer numbers. The output should follow the format as shown in sample results: Sample 1 Sample 2 Code: It must be the bob == 0 and alice == 0 case. Put an print stamement in the else statement you will know why. Your execution is making that case somehow. Also in issquare you should have the loop like this for(i = 0; i <= num; i++) because for numbers like 1 it would fail. Also there is a flaw in your logic. You should form the number 8 10 you should check 81 and 18. But in your case you don't do this.(You check 90 and 108). The way you calculate normal is not correct. And function you write for reverse is also not correct. And you also not checking for condition where both lose. Add that condition as well. 
c-9-83	X	MPI_Scatterv segmentation error even if I got right result I was trying to use MPI doing some parallel work like counting triangles on a network graph. And in order to let each process compute same amount of times, I use scatterv to distribute different data into different processes. Here is my code: When I run my code, the error message is like this: When I output the value of localVertices after the scatterv, I found that my threads have already got the right member, but the error occurred before further work with the triangle counting. 
c-9-84	X	texture appears to be reading off uninitialized memory I create a texture like this: I get the location of it: and then inside my drawing loop I have: and then inside my fragment shader I have: And sometimes when I run the program the object I am drawing becomes a random non white color, often red. I thought I had handled the out of bound case by using GL_CLAMP_TO_EDGE. What is causing this behavior? EDIT: this behavior also occurs when both values inside vec2(_, _) are inside the range of 0-1... Try adding The default alignment is 4 bytes but your data array is assuming tight packing. 
c-9-85	X	Pyramid Nonsense: How can I algebraically exclude i=0 instead of with an if conditional statement? Before you downvote, have a look at my code. I hope you see this is a legitimate question for math nerds. I produced this: But I was not satisfied with the first line. I wanted to exclude it, so I made a new one that excludes i=0 with a if-conditional wrapper around the for-loop. I was wondering if somebody knows a cleaner solution. (FYI, this was a test question, and my solution was very sloppy. I am practicing cleaner methods for this (stupid pyramid programming). Code Have a look at the comment // I want to exclude i=0 by using algebra in the for loop. Anybody with an idea? Can you start i from 1? Just start the loop from 1 instead of 0. Or, alternatively replace < by <= in the loop for j. Note also that at the middle your stars don't meet completely, there's still a gap between them. Is this an intended behavior? I guess you wonder why this "trick" is only required at the beginning, while at the bottom of your modern-art painting there's no empty line. This type of "miracles" is called off-by-one error. You should check your code carefully for boundary cases to see if it performs as designed. 
c-9-86	X	How is the string terminator '\0' has the same value as integer constant 0? I have the following code - It is an example of multiple indirection using string. The output is Here in while() loop instead of *pc != '\0', *pc != 0 is used. But both the approaches give same output. Why is it so? A char is really nothing more than a small integer, and as such are implicitly convertible to int. Furthermore character literals (like e.g. 'A') are really represented by the compiler as int values (for example the literal character 'A' is represented by the int value 65 in ASCII encoding). The C language allows one to insert any arbitrary integer (that can fit in a char) using escapes. There are two ways to escape such arbitrary values, using octal numbers, or using hexadecimal. For example, the ASCII value for A is 65, that can be represented as either 'A', '\101' in octal, '\x41' in hexadecimal, or plain 65. Armed with that information it should be easy to see that the character literal '\0' is the octal representation of the integer 0. That is, '\0' == 0. You can easily verify this by printing it: I mentioned that the compiler treats all character literals as int values, but also mentioned that the arbitrary numbers using escaped octal or hexadecimal numbers needs to fit in a char. That might seem like a contradiction, but it isn't really. A characters value must fit in a char, but the compiler will then internally convert it to an int when it parses the code. Adding to the existing answers, to look into the sentinel, quoting C11, chapter Â§5.2.1 In a character constant or string literal, members of the execution character set shall be represented by corresponding members of the source character set or by escape sequences consisting of the backslash \ followed by one or more characters. A byte with all bits set to 0, called the null character, shall exist in the basic execution character set; it is used to terminate a character string. and from chapter Â§6.4.4.4/P12, EXAMPLE 1 The construction '\0' is commonly used to represent the null character. So, a constant \0 is the one which satisfies the aforesaid property. This is a octal escape sequence. Now, regarding the value, quoting Â§6.4.4.4/P5, (emphasis mine) The octal digits that follow the backslash in an octal escape sequence are taken to be part of the construction of a single character for an integer character constant or of a single wide character for a wide character constant. The numerical value of the octal integer so formed specifies the value of the desired character or wide character. so, for a octal escape sequence '\0', the value is 0 (well, both in octal, as mentioned in Â§6.4.4.1, and decimal). 0 and '\0' are exactly the same value, and in C, are both int types. This is fixed by the C standard and is irrespective of the character encoding on your platform. In other words, they are completely indistinguishable. (In C++, the type of '\0' is a char.) So while(*pc != 0), while(*pc != '\0'), and while(*pc) for that matter are all the same thing. (Personally I find the last one I give the clearest, but some folk like to use the '\0' notation when working with C-style strings.) Line feed \n, tab \t etc has their own escape sequence characters, but actually there does not exist one for the null terminator. The industry de facto standard way of represending the null terminator is therefore to write an octal escape sequence with the value zero. Octal escape sequences are defined as \ followed by a number. So \0 simply means zero, with octal representation. Since this looks similar to other character escape sequences, it has become the de facto standard way of representing the null terminator. This is why a decimal 0 works just as fine, it is just another way of writing the value zero. You could as well write \x0 if you wish to be obscure. 
c-9-87	X	How to stop a running program in C? I have a problem.I've written a program in C for armbian. I am using RTKLIB software for GPS data conversion from ubx to RTCM3. I get some data from serial port and start str2str(rtklib software). It creates this command to run and call system function to run this command. It is successful, but when I send a new command, I want it to stop the str2str software. I've tried the exit(0) and it stops my software. I don't want to stop my software. I want to stop str2str and create a new command and run it again. How can I do it? I am not good with the linux environment. Thanks I suggest you find out how to search for the str2str process you want to kill, and get the PID. A stackoverflow search will reveal this and then use the PID to kill the process. Unless RTKLIB has a process to do this directly. 
c-9-88	X	How to find TCP connection status between a client and server? In a LAN, at point-1 I am running a Server listening on port 2404, at point-2 I am running client, and at point-3 I am running a packet sniffer & analyser which will capture all packets with tcp.port==2404. The packet analyser is fed using mirrored port (port mirroring). If in case the server is not listening, the client will send SYN (connection request) packet repeatedly for every 30 seconds. I have two flags in my packet analyser code 1).tcp_conn_established and 2).tcp_conn_terminated, I want to make them YES or NO by analysing SYN,SYN+ACK, ACK, FIN, RST, packets. Now my question is, Is it sufficient getting SYN, SYN+ACK, and ACK in sequence to make flag1=TRUE, or should i consider TCP sequence/acknowledge numbers, RST packet as a replay for SYN packet from kernel if server is not listening or time gap between SYN, SYN+ACK, ACK............ And for connection termination some times I get FIN some times I get RST how handle it. Overall what all things I should take care to make flag 1 & 2 TRUE or FALSE ?. Thank you... 
c-9-89	X	In C language,How to print all binary numbers of size N without 2 consecutive 0's with recursion How to print all binary numbers of size N without 2 consecutive 0's with recursion? without using arrays at all,nor loops. and they need to be printed by order like. for example: N=3: 010 011 101 110 111 There are two different questions here. First is algorithmic: how to perform the task recursively independently of any language or constraint. Simple: the recursive function takes a sequence of 0 or 1 if the length of the sequence is N, just print it and return else if last element is a 1 recurse two times, once by adding a 0 to the sequence, once by adding a 1 else recurse only once by adding a 1 Just call that function with a singleton 0 and a singleton 1 and you are done. The second part is the C implementation. You can use an int (provided N is not greater than the number of bits in an int) and use bit shifting, keeping the number of bits set to store a sequence. The actual implementation if left as an exercise... 
c-9-90	X	Lexical Analysis in C Language - How to make the asterisk be read and output it in detection of Multi-Line Comment? I am working on a Lexical Analysis program , everything works fine when detecting a single line comment. This is my code for single line comment detection. But when i am trying to detect the Multi-Line comment it got a logical error which it cannot detect the opening asterisk. here is my code for Multi-Line comment detection: Current character is for the first character for multi-line comment which is backslash and second character which is (fgetc(File_Input) (getting the next latest character from file) is for opening askterisk. This is the content of the file I inputted: This is my current output You have: The first printf() should be printing the character returned by the fgetc(), which you know to be a *, so you could use putchar('*'); or (if you really insist) printf("%c", '*') or printf("*"). Note that you've got another problem lurking: It isn't clear which of your comment blocks executes first, but both of them lose the b after the division. There are numerous other subtleties in comment detection in C " I won't bore you with them all, but suffice to say "it is hard work removing comments in C" (and harder still in C++). One of the issues you're not addressing is unexpected EOF (end of file). You probably need a peek() function to look at the next character without consuming it: this code snippet skips all the chars until you detect the */, considering the special cases where you have endings like ***/: 
c-9-91	X	How to search for a string in another array which has many strings? This is very simple program. But still I'm not getting the output. I want to search for the particular number in an another array. I've removed the " from MNC string to make it easy to compare with characters in other arrays. I can able to compare at. But not MNC Ex. MNC = 53; I want to search this "53" in 3 arrays. Code: 
c-9-92	X	interrupt flag vs interrupt pending bit stm32 I'm using the std library. I don't know what the difference between I2C_FLAG_TXE and I2C_IT_TXE is. Why when in interrupt function we don't use I2C_ClearFlag instead I2C_ClearITPendingBit? When do we used I2C_ClearFlag? I'm starting learn stm32f4. I have very little experience. I'm using the std library. I don't know what the difference between I2C_FLAG_TXE and I2C_IT_TXE is. From the processor point of view - the interrupt flag which has to be cleared by interrupt routine is set when the processor enters the interrupt. Interrupt pending flag - indicates that the event which triggers the interrupt occurred but for some reason the interrupt routine has not been invoked yet. It is good to know your hardware before using any libraries. 
c-9-93	X	Missing built-in command "history" for Tcl C extension I am working on a project need Tclsh like support with some self-defined commands. I implemented following code (based on Tcl 8.5): And put new commands registration in Tcl_AppInit. Everything looks fine, except that with the new command line interpreter, when I type Tcl built-in command "history", I got : Other built-in commands work fine, like "puts", "set", etc. Why ? Do I have to implement my own "history" command instead? Add my solution here: It turns out history is part of Tcl script library which needs to be sourced during initialization, either by sourcing $TCL_LIBRARY/init.tcl or calling Tcl_Init(interp). 
c-9-94	X	Need to create a function to call another function I need to use this function to access a function named "getName" I have no idea how to do that as I have tried a couple of times but no success. Please help me out a little This function does not return a value but has one parameter that receives a pointer to a Contact. The purpose of this function is to set the values for a Contact using the pointer parameter variable (set the Contact it points to). Use the pointer parameter received to this function to supply the appropriate Contact member to the "get"? functions (getName) to set the values for the Contact. There is a simple way to do this. You pass the pointer to the struct variable you want to make change to. And then get input accordingly. Then in getContact() In getName() Here the key idea is we are passing address of the variables to the function and then making changes to the variable dereferrencing it. Here a basic set of operations is shown. You can extend on it to get more inputs. This answer provides the basic way to do that. 
c-9-95	X	Using realloc to resize a 2D array in C Assignment: we have a canvas which the user can "paint" on - they can draw lines, add or delete rows/columns, etc. One of the commands we have to implement is resizing the canvas. Per the assignment specs, new rows are added to the top of the canvas, and new columns on the right. These new rows/columns are filled with blank spaces, which are denoted by '*'. The user inputs r numRows numCols. The part where I'm struggling is using realloc. If I have a 5x5 canvas to start with, and the user decides to resize to be 7x5, how would I do that? Where does realloc put the new rows/columns, and does it automatically shift the existing rows downwards? I have a function implementResize that is called when the user inputs a r: Right now I'm focusing on how to add rows to the top of the canvas. My code for the function addRow right now is: I'm trying to figure out how to realloc space for the rows. I know I need to use a nested for loop based on the number of newRows and the number of columns, but I'm not sure where these new rows go. If anyone could clear my confusion up I would appreciate it. This code cannot be directly put into your program because it does not use addColumn or addRow. This instead gives you an idea how you could approach the problem. Comments have been added at lines where there is a catch. There are also some suggestions. 
c-9-96	X	rand() repeating values despite only one srand() call I have a function that generates x (parameter) random numbers, removes repeats, and returns the values stored in an array. I am using rand() to call random numbers, however if I call the function with x parameter set to 5 it turns into an infinite loop as rand() continuously returns me the same 4 or 5 numbers. I have only called srand() once in the main(). Output: If I call eraser(5) I get stuck in an infinite loop. Interestingly, on another function in the program rand() functions perfectly. I think you want % (mod) instead of & (bitwise and). 
c-9-97	X	Where is the program counter stored during thread context switch? When I call pthread_yield or pthread_block and the CPU does a context switch Is the program counter stored in the thread stack (alongside its temporary registers) or in the thread control block (alongside the stack pointer) Usually it shall be in the TCB. But I beleive it is implementation specific. An example of information contained within a TCB is: Thread Identifier:Unique id (tid) is assigned to every new thread Stack pointer: Points to thread's stack in the process Program counter State of the thread (running, ready, waiting, start, done) Thread's register values Pointer to the Process control block (PCB) of the process that the thread lives on Quoting from VxWorks:APPLICATION PROGRAMMER'S GUIDE,page 76: Each task has its own context, which is the CPU environment and system resources that the task sees each time it is scheduled to run by the kernel. On a context switch, a task's context is saved in the task control block(TCB). A task's context includes: â– a thread of execution; that is, the task's program counter â– the tasks' virtual memory context (if process support is included) â– the CPU registers and (optionally) coprocessor registers stacks for dynamic variables and function calls â– I/O assignments for standard input, output, and error â– a delay timer â– a time-slice timer â– kernel control structures â– signal handlers â– task variables â– error status (errno) â– debugging and performance monitoring values 
c-9-98	X	Where do local variables exist? Sorry if this is not the right place to ask but I've tried searching everywhere but this question is so specific. I believe local variables exist from where they are declared to the end of the function and from the beginning of the scope to the end of the scope, is this correct? The best one of the four alternatives is: From the beginning of the scope to the end of the scope. if we assume that "the beginning of the scope" means "the beginning of the block". Technically the scope of an identifier starts at its declaration. If we took that interpretation then both the first two options are the same, which doesn't make much sense. IMO it is safe to assume that they meant the start of the block. (The end of the block and the end of the scope are defined as being identical, so there is no issue with the end). The word exist clearly refers to the variable's lifetime. A variable starts to exist when its lifetime begins, and stops existing when its lifetime ends. The variable's lifetime may differ from the visibility of its identifier; so it is not correct to equate those two things as was suggested in comments. The lifetime of "local variables" (which is common jargon for non-static variables defined at block scope) is given by 6.2.4/6: For such an object that does not have a variable length array type, its lifetime extends from entry into the block with which it is associated until execution of that block ends in any way. The first answer is the best fit to the bolded text, although the bolded text is more correct because execution does not necessarily enter the block at the start (e.g. goto) and execution does not necessarily leave the block at the end (e.g. break, return). Since the question asks to select all answers that apply; the first two answers should both be selected. The second answer is a subset of the first one. The last two are clearly wrong. Other relevant standard quotes The definition of lifetime is in 6.2.4/2: The lifetime of an object is the portion of program execution during which storage is guaranteed to be reserved for it. The definition of scope in association with blocks is in 6.2.1/4: If the declarator or type specifier that declares the identifier appears inside a block or within the list of parameter declarations in a function definition, the identifier has block scope, which terminates at the end of the associated block. And is 6.2.1/2: For each different entity that an identifier designates, the identifier is visible (i.e., can be used) only within a region of program text called its scope. which clarifies that every identifier has a specific scope (as well as being described as having block scope). 
c-9-99	X	Handling Immediate Return of WSARecv I'm implementing an async server using WSARecv. According to the documentation, WSARecv can return immediately with 0. This still eventually calls my completion routine, where I call WSARecv again to grab the rest of the data. If there is no more data to grab, I'd expect my subsequent call to WSARecv would result in its completion routine receiving 0 bytes in the second parameter. So, I call the receive: Eventually, this calls my completion routine WorkerRoutine where I do some work on the data and eventually call WSARecv again to get the remaining parts of the data. If I send a small amount of data (< buff_size, e.g. 'hello'), the first call to WSARecv will return immediately. The completion routine is still called, but I don't cleanly exit the completion routine, and issue another WSARecv. I assumed that the second completion routine would eventually get called, where I could check if bytes was zero and exit if it was (without issuing another call to WSARecv). Instead, the second completion routine is never executed. Is this a misunderstanding of how completion routines work? Is it safe to ignore the fact that the second completion routine never fires? For completeness, I'm using a Python script to interact with my server: Do I not get "end of data" because of how i'm interacting from Python? If WSARecv returns -1 and GetLastError is something other than WSA_IO_PENDING then there won't be an asynchronous completion. If you want to handle that situation with an additional asynchronous operation you can schedule it yourself with QueueUserAPC or PostQueuedCompletionStatus. 
c-9-100	X	Issues with MiniMax algorithm I'm attempting to implement chess AI using minimax algorithm. Right now I'm just making it so just white can be played at a time. Here's my pseudocode, I was wondering what I'm missing here because it's not giving me very correct answers. Next function is returnBestMove() Last function I have for this is findScore() I've ran it and I'm having issues. It moves around pieces, however there's a big issue that I think I've found out. Because I'm simply adding the opponent's score, I think that it's not finding what works best for white, but rather what creates the highest deficit on the board. For example I put it in a situation where it could've taken a pawn. And it moves a bishop into the path of one of his rooks. And when I tried to test this by putting my queen in a position to take a bishop, the AI chose to take a pawn, and then the queen could be taken next turn. So how can I go about this? I don't want to just choose the best move for black right away, since if I do that then it could turn out to not be black's best move, but at the same time this is me going through every possible move and it's not working out that well for me. Thank you, hopefully someone knows what I can do here. EDIT: So I've been looking at making changes to the findScore function. Right now what I'm doing is returning scoreSum + findScore if ply != 0. If I'm understanding you correctly, I should be checking at every stage. So instead of returning right away, I'm going to do this. My reasoning here is that at every stage, I only want to return what the best case scenario is however I want to search through the tree to max depth that way it's not a bad move in disguise (I'll be implementing quierisence later) After both for loops are complete, I return bestScore. Because they'll all be going the same depth, it doesn't matter if I end it on black or white's turn, since they'll all be similarly compared. Thanks user, I'm not home to try it yet but when I was reading your response it clicked for me. I hope this is right! 
c-10-1	X	How do I extract the operand from this byte? Using two's complement I currently have the code: 'b' is an 8 bit binary number that is read in from a byte file. The 2 most significant bits of 'b' is the OPCODE and the last 6 bits are the OPERAND. I currently have this code setup to take the last 6 bits of 'b' and store them in the variable 'operand'. The problem I am currently having is that I do not know how to extract the OPERAND as a signed operand. Currently the number that is returned is only unsigned. Therefore how can I edit the code so that it returns a signed number instead? If we assume you are just storing the last 6 bits of a negative byte that fits in a 6 bit signed value using your machines native 2's complement convention for representing negative numbers, then you check if the sign bit is set in your 6 bit value, and then extend the sign bits. Try it online! The problem I am currently having is that I do not know how to extract the OPERAND as a signed operand. The C standard doesn't mandate any particular way of representing negative signed numbers. In most implementations, negative signed integers are stored in what is called two's complement. The other major way of storing negative signed numbers is called one's complement. The code below assumes that entered number is entered as a signed number where the sign bit is stored as a bit 5 (0x20). This is called one's complement representation. For some applications it is easier to code operands that way. Example: Then OPERAND number is transformed to full 8 bit signed char in two's complement representation. OUTPUT: 
c-10-2	X	Masking a bit in C I'm currently storing a byte inside an unsigned integer (0010 1100). How do I get rid of the 2 most significant bits in that sequence to leave a 6 bit number: 10 1100? 
c-10-3	X	Error while sign up in simple file login program I already asked before and have done something that would work i think (but i'm a beginner so that story falls into a water) i have an error when i tried to sign up can anyone help? I have few more hours to send it (homework) AND i don't ask someone to do it for me, just to gimme instructions I tried a lot different ways and i'm really confused right now.. scanf("%s", &username); is not correct. It shall be scanf("%s", &username[0]); One should give concentration to the warnings especially for array/pointers involved. Similarly below 2 lines scanf("%s", &pass[0]); scanf("%s", &fullName[0]); fprintf(p, "%s\n%s\n%s", username, fullName, pass); You writing the fullname as second line, but while reading, you read 2nd line as password. So fprintf(p, "%s\n%s\n%s", username, pass,fullName ); Another suggestion, after opening the file, the file pointer shall be checked for its validity. for some reason, if it returns NULL, then your program would crash. Instead of simply trying compiling and getting the o/p, best way to debug this simple code is to sit down with pen and paper, try analyse what happens with each line A number of things that are wrong with your code jumped out at me. I tried to fix as much as I could. The following should work. EDIT: I apologize for the sloppy answer, I was not on my main computer. This code will work for reading 1 user. 
c-10-4	X	C: integer from pointer without a cast in shunting yard implementation I'm converting infix notation to reverse Polish notation. I need to compare the precedence of characters on the top of the stack to the next character in the string, char *c. The data in each node should point to a char. However, the line int testResult = test(stack->head->data, c[i]); is producing an error: error: passing argument 1 of 'test' makes integer from pointer without a cast. How can this error be resolved (without modifying the structs)? What is wrong with passing stack->head->data? what should I be passing instead? Assuming stack->head->data is a pointer to char, this will work: 
c-10-5	X	What is the macro for Kali Linux? I am making a program in Kali Linux, and I want to make it work only in Kali. I can use C to do it, just like : For checking if the OS of the user is windows and later in the script checking the defined variable os_platform, but I searched Google and everywhere, but I just can't find the macro for Kali Linux. If I do : It can be any type of Linux, like Ubuntu, and Linuxes like those. What is the macro for Kali Linux? There's no macro for distributions. You can only do a "sniff test" to see what distribution it is by looking in /etc for particular files, and even then it can be faked. The reason the macros exist in the first place is because Linux is radically different from BSD and Windows, so it's a necessary distinction. The difference between Kali and Debian is pretty subjective, Kali is based on Debian. Most Linux distributions are actually quite similar as far as compilers are concerned because they all use the same kernel and headers. Things like /etc/redhat-release are distribution specific, so look for something like that. This can't be tested as an #ifdef though, it's something you'll need to put in your configure script. Probably You can check /etc/issue file for particular distribution Name and then using file pointers extract the exact name & then Compare If it's a Ubuntu or Kali or any other Linux Machine. 
c-10-6	X	Is there any chance system.h file I made for my C programing assigment caused problems to my OS? I'm currently doing an assigment in C, and a day after I made a file called "system.h" my OS started making problems (I recived an error message then computer crashed).. it didn't end so well, but I'm still interested. could it be the name of the file that made this whole mess happen? Thanks alot in advance!! If you are logged in as an unprivileged user on a system with proper multi-user management (e.g., macOS, Linux, other Unix systems), nothing you do without privileges should affect the operating system. (If the operating system is affected, there is a bug in the operating system.) If you have privileged access to the system, then making a file called "system.h"? in your own area should not, by itself, affect the operating system. Compiling a program using that header and running the program will not affect the system (unless the program runs with privileges and does something to affect the system, but that is unrelated to what the name of the header file is). If you modified files belonging to the system, then you can affect the operating system. 
c-10-7	X	choosing between function returns I have written a function which has two different options of what to return: I want to use this function later, and have different things happen depending on what the function has returned. Below are the relevant parts of how I have constructed that: When I compile I get the error: Adding single quotes around the 1 does not help (and also isn't really what I want because I am not referencing part of an array) nor does taking it down to one equals sign (this produces a different warning). Thanks so much! The error warning: comparison between pointer and integer [enabled by default] Comes from this line: You try to compare a function to an integer. To get rid of this error, change the function using compare: Now, the compare function. The way you implement it won't work as you expect: If you compare "abc" and "poc", you will have in for loop: Worst, if you compare "a long string" with "tiny", you will get an UB when i is 4. You could correct the compare function this way: 
c-10-8	X	Is there such a thing as a MSYS script file? I'm running MSYS under Windows and although it works I want to know if there is such a thing as a MSYS script file. For example to compile a GTK program in C I need to type: gcc source.c -o executable.exe 'pkg-config --cflags --libs gtk+-3.0' to compile. Is there a way to store this in a file and run the file from MSYS without having to type in the command each time (IE like .bat, .sh files)? If you want to automate building an application, just use a build system. The Meson build system is what the GTK+ developers recommend now (and GStreamer, and many other projects). It's multiplatform, and available as a package in MSYS2 (I used it there, works like a charm). They have a simple Meson tutorial where they build a GTK application. That's 3 lines of code. 
c-10-9	X	Examples of printf returning -1 when using %C, %S, %ls, %lc I'm searching for examples of printf returning -1 when using the flags %C, %s, %ls, and %lc. Or even the logic behind it. I've looked on Wikipedia for UTF-8 and all the "bad utf-8 sequences" but even with those printf doesn't return -1. So I tried the following code [NEW TRY]: Result: EDIT 2 : I'm on a unix environment Small example: ff00 is not a valid unicode sequence. The logic behind needing it is that not all arbitrary sequence of bytes is a valid unicode string. Unicode spec says that ff00 not valid. Thus, printf returns -1 when asked to print that it. EDIT: you can also try with wchar_t and using 0xff00 and 0x0000 as the first and second shorts respectively (or 0xffff:0x0000 etc). printf will still return -1. 
c-10-10	X	abi difference on linux/amd64 C vs C++ I have C library with such API: to simplify my C++ life I decide do simple thing: And after that things become crazy: for example if I call f(0xfffeeea0, 40) in C++, then on C side I got 0x7fff905d2050 -69984: assember without destructor: assember with destructor: I wonder what is going on? I can understand why compiler should handle return in different way, but why it moves arguments in different registers %esi vs %edi. For clearness I understand that I do wrong thing, and I rewrite code with some kind of smart pointers instead without touching real Foo. But I wonder how ABI of c++ and c works in this particular case. full example: In the first version of your code (no destructor), we have: In the second version (with a destructor): My guess is that without a destructor the struct is treated like a plain 2-word tuple and returned by value. But with a destructor the compiler assumes it can't just copy the member values around, so it transforms the struct return value into a hidden pointer argument: Normally f would then take care of writing the return value into *_hidden. Because the caller and the implementer of the function see a different return type, they disagree about the number of parameters the function actually has. The C++ code passes 3 arguments, but the C code only looks at two of them. It misinterprets the address of the Foo instance as the opaque pointer, and what was supposed to be the opaque pointer ends up in param. In other words, the presence of a destructor means Foo is no longer a POD type, which inhibits simple return-by-value through registers. 
c-10-11	X	Segmentation fault when writing a null character to an array in a function i've done a lot of digging but can't seem to find a problem similar to the one i have. I'm passing a string through a function which gets put into a char array, it then looks through this char array to see where the first non-decimal value is and puts a null character there. It does this by comparing the values of the array to ascii for 0-9. My source code is giving me a segmentation fault, however if i run everything thorough the main function it works fine and my results are as expected? Any ideas? My source code is below You attempt to write to a string literal and shouldn't. If you give an initialised, null-terminated, non-const array of chars instead as parameter, you should not have a problem. @n.m and @Yunnosch have guided me to the correct solution which is below. I'm not deleting my question in-case someone else has the same problem 
c-10-12	X	Is there a way to pass printf letter (%c, %d) as a function argument? Please consider the following code: "“ given that the functions printStrGeneric and printNumGeneric are almost identical (except for the printf letter), I wonder whether it is in any way possible to have just 1 function instead, and pass a printf letter (either %c or %d) to the function as an argument? Passing the format specifier as an argument is one way to do it like @OldProgrammer but like @0x5453 pointed out, it could be a vulnerability. Are you against passing a bool value as an extra parameter and using an if condition to control the printf function? So your code would look like this: Read about the usage of: va_args The syntax of: format, ... Th combination of the two allows you to pass a format to a function, and handle it as you wish. This is a very simple explanation: https://www.eskimo.com/~scs/cclass/int/sx11b.html 
c-10-13	X	Multiple declarations same of variables inside and outside for loop In this variable i is declared outside the for loop and it is again declared and initialized inside for loop. How does C allows multiple declarations? The i outside the loop and the i inside the loop are two different variables. The outer i will live for the entire duration of main. The inner i will only live for the duration of one loop iteration. The inner one shadows the outer one in this scope: Due to shadowing rules, it is impossible to refer to the outer one while inside the aforementioned scope. Note that it is impossible to declare two variables with the same name in the same scope: Variables in one scope can mask variables at a higher scope. In this example, the i defined inside of the loop masks the i defined outside. In the loop body, the printf prints the value of the inner i, which is 10. The i++ then operates again on the inner i setting it to 11. When the loop hits the bottom and goes back up, the inner i goes out of scope. The second and third clauses of the for then operate on the outer i. When the loop body is entered again, a new instance of the inner i is defined and initialized to 10. You should check out the following page for the definitions of the different type of scopes that variables can have in the C language. http://aelinik.free.fr/c/ch14.htm Your first int i is in the scope of the entire block, and your second int i only has scope from within that nested loop. Once outside the nested loop, the original block scope version of i is applicable again. 
c-10-14	X	Save text to file permanently and read from it Hello everyone i have to do simple login program in C, i have a problem to save username, full name and password because i need to choose '1' for sign up and '2' for sign in but always when i exit the console and try to read my file everything disappears. I have to deal with HASH too but i will try that on my own. And help about /// comment ! As per previous comments, and with my idea, here is how you may fix the code: 1. use int c or unsigned int c to declare c variable. 2. set c tp be (whatever as long it is not EOF); 3. make do while loop that at the end checks for EOF. 
c-10-15	X	Why are C booleans called _Bool? Why does C use the word _Bool to define boolean values? Whereas they use the word float for floats and not _Float? Furthermore, why does bool have to be included, why isn't part of the basic functionality, like float? _Bool was not originally in C, but was added in the 1999 C Standard. If it had been called bool then a large amount of existing code would break because many projects made their own type alias bool already. The C89 standard set aside identifiers starting with _ followed by upper-case character as reserved for implementation use. This is why new features added to C always start with such names. _Complex, _Alignof and _Static_assert are other examples. There is also a header <stdbool.h> which aliases bool to _Bool and defines true and false ; this header can be included by new projects or by projects that didn't already define bool. As for ... Furthermore, why does bool have to be included, why isn't part of the basic functionality, like float? ... I observe that although you need to include stdbool.h to get bool, that's a convenience and C++-compatibility feature, not an essential. bool is an alias for _Bool, and in C99 and later you have _Bool automatically, but even that is non-essential. In C, any integer or pointer value can be interpreted as a boolean, with 0 or NULL being interpreted as false and all other values being interpreted as true. This was how boolean values were handled in C from the beginning, and it still works in implementations conforming to the latest standard. In fact, type _Bool itself is just a special case of this very behavior: it is an integer type whose minimal requirements are that it be able to represent the values 0 and 1. In boolean context, it works just the same as any other integer type. C did not originally have a Boolean type, it was added in the 1999 version of the language (C99). At that point, C++ was already standardized (in 1998) to use the type bool, with keywords false and true. To keep the C Boolean type separate from the one in C++, as well as preventing the new name from breaking old C code, it was named _Bool. The reason why it was named with an underscore followed by an upper-case letter, is because such an identifier was already guaranteed not to exist in compiler, library or user code, by 7.1.3: All identifiers that begin with an underscore and either an uppercase letter or another underscore are always reserved for any use. "Reserved for any use" meaning reserved for future versions of the C language. Therefore, all new language keywords that have been added to the language since C99 are named with underscore followed by first letter upper-case. Other examples from C99 are the types _Complex and _Imaginary. For the cases where code compatibility with C++ was desired, the header <stdbool.h> was created. It contains the macro bool, which expands to _Bool. And also the macros false and true that expand to 0 and 1. Though note that booleans are not fully integrated in the C language, as they are in C++. In C++, an expression such as a == b gives a result of type bool, with the value true or false. In C it gives a result of type int, with the value 1 or 0. This is for backwards-compatibility reasons with old C code. 
c-10-16	X	Is there a function to align string with spaces or special character? EDIT: This is A duplicate. Set variable text column width in printf & The simplest way of printing a portion of a char[] in C Answered my question I want to output a menu in C but I can't get it look good. I have search functions to do this in C and cannot find any? A website used C# and String.Format() to achieve this, I wonder if this is possible to do in C ? OUTput be like: In my own C I am trying to format one string and space or special character before and after such as: The front would be %s the item name, and latter would be %d the cost. My idea was like to print this in a loop, it loops m(total items) times define a line width of 30 total. Each loop find the length of the item name, use another loop to /10 of the cost to find it's len and add both of them together. print ((line-totalLen)/2) in front, print the string and do the same after the string? The small problem would be if the whole string is odd or even number. 
c-10-17	X	Copying file text in C using getc() and putc() - binary code in the output file I created a file called "text.txt" with a string inside and I want to copy that string in another file called "copiaqui.txt". But there's a problem. In the output file, I found this : Why the program doesn't copy the string correctly? Code : You have made a common mistake with this expression: What this does is assign the value of (getc(fi) != EOF) to var, because of something called operator precedence. The value is either true or false. What you intended to do is: Which will make var have the getc() value, then check that against EOF. 
c-10-18	X	What is the second argument to the bind() socket function? I'm new to C programming and currently studying Unix socket programming. My question is what is the 2nd argument of bind function actually? I try to pass p, *p, but it doesn't work. The 2nd parameter of bind() is a pointer to a struct that describes the local interface to which the socket is to be bound (the 3rd parameter is the byte size of that struct). bind() takes a sockaddr* pointer as input, but it actually accepts any sockaddr_... struct that matches the address family of the socket (sockaddr_in for AF_INET, sockaddr_in6 for AF_INET6, sockaddr_un for AF_UNIX, etc). Once upon a time, only sockaddr existed (for AF_INET), and BSD socket APIs (particularly bind(), accept(), connect(), and get(sock|peer)name()) were designed around sockaddr. Later on, when new address families were introduced, sockaddr_in was created as a direct replacement for what sockaddr previously represented (an IPv4 address). But the socket function interfaces were already set in stone and couldn't be changed. That is why sockaddr* type-casts are needed when calling such functions. All sockaddr_... structs (including sockaddr itself) begin with a 16-bit family identifier, so using such type-casts (in coordination with the associated byte-size parameter) are safe. Now, in your example, p is being passed in the 2nd parameter, and p is declared as Struct sockaddr_in *p = &serv_addr;, so you are actually passing in the memory address of serv_addr (this code would only compile if the parameter were declared as void*, otherwise you would need a sockaddr* typecast - this is platform-dependent!). serv_addr is populated with an IPv4 address (INADDR_ANY, aka 0.0.0.0) and a port number (portno, in network byte order). The 3rd parameter is set to sizeof(serv_addr). So, between that size value and serv_addr.sin_family being set to AF_INET, bind() knows that you are passing in a sockaddr_in struct, and will validate and use it accordingly. Gee thanks. So historically, at first there is only struct sockaddr structure and later time there are many structures invented such as: struc sockaddr_in, sockaddr_un structures. But bind function already designed with a pointer variable to the first or the beginning structure sockaddr (the first structure in history) and now I used a sockaddr_in. I see that the only way to succeed that bind function is by: sockaddr* typecast: TYPECASTing a pointer of a type to a pointer of another type. In my case is: typecasting pointer p which uses type sockaddr_in to pointer that uses type sockaddr. Like following: bind(mysocket, (struct sockaddr*) p, sizeof(serv_addr)) and it works. 
c-10-19	X	Why ncurses prints 7+ same consecutive characters as a single character? Prints If I add just one more x to the printw statement only is printed. Why? OS: Arch Linux 
c-10-20	X	How I can resize a bitmap properly? I want to downsample the bitmap of a BMP file by a factor M. I want to obatain the image without aliasing. So in order to achieve it I compute the mean of the MxM pixels in this way: The problem apears when I try to resize non-squared images because it only compute the mean proprely in a square. For example, if the final image is 300x150, the mean is right until 150x150 pixel. If I had the previous_mean -> new_mean = (previous_mean+value)/2 This is how I actually compute it: } new_bitmap and bitmap are 2-D array of PIXELS, being PIXELS: This is absolutely correct, I were permutating the old_width with the old_heigth. 
c-10-21	X	How can I iterate over the characters of strings within an array? I want to print each characters of the strings belonging to an array of strings. The first part of the code is: take as input an integer, and create an array of that size. Then add n words to fill the array (so I get an array of strings). Here's my idea I get this warning: format specifies type 'char *' but the argument has type 'char' [-Wformat] on this line: If I execute, after typing the words, I get segmentation fault. I don't get the problems with the two for loops. Lets start line by line. Line 1 is wrong, it should be size_t n (which means long unsigned int) and not int n, please read more about MALLOC. Next line with problems: This means that, if n == 2, then you have: and you access that ARRAY out of bounds, the line should be: but here is another thing, The standard guaranties that sizeof(char) is at least 1 so this line: is the same like this line: Next problem: Should be: Why? Well because once that you realize that malloc expects size_t then you should know that in that LOOP the comparison between signed and unsigend is not what you need. Next problem: Here you have more problems: strlen(a[i][j]) should be strlen( a[i] And this Line: Should be: Things which you should also take care are: always check scanf for errors. the length of those strings very important to be known. do not forget to free what you malloc. After you put all together you'll get: 
c-10-22	X	Why do I have to do ctrl+z twice to break end of file? Basically I have a struct I want to sort this by numero. For example, Input: jonhy_james_123 jack_china_111 Output : jack_china_111 jonhy_james_123 I have sucessfully done this, but instead of one CTRL+Z to break end of file, I somehow need to do it twice. Here is the full code: While behavior of Ctrl-Z in Windows has some peculiarities, this is secondary at the moment. The primary problem is that you placed an \n character at the end of your scanf format. By doing so you asked scanf to wait for non-empty input after the "primary" portion of the input is complete. This by itself will easily result "strange" behaviors of your scanf, like "ignoring" Enter key and such. What is that \n doing there? Why did you include it in your format string? 
c-10-23	X	Error filling an int array in a typedef struct I tried to initialize the code array in Huffman struct but when i compiled it showed: Error expected expression before '{' token. How I can fix it? Error: The Error is due to way of initialization. Statement1: line[1].code[1] = 10; //WORKS Statement2: line[2].code[10]= {0,0,1,0,1}; //Wrong The Statement2 says something similar to compiler: Go to Structure Array named as line[2] and select element array code go to its 10 element which is wrong as only memory is reserved for 8 integer values but since there is no bound checking in C so that its terribly OK and paste an {0,0,1,0,1} element there, which is not possible as you are pasting these values to that one element. Better Approach 
c-10-24	X	C implementation of exponentiation by squaring I tried to implement the "exponentiation by squareing" algorithmn in C but my program has an odd behaviour. First, here is a small code snippet: If I call the function with: I expect the output to be something like 976371285, but the result is 0 and i don't quite understand why. long long should be printed using %lld format specifier otherwise it's Undefined Behavior. Also this method already has overflow within for large values of power - because long long cant hold 2^100(as of now in 32 or 64 bit systems- when it is 128 bit system of course it can). As of now in your code if you provide not too large value of the exponent and use printf("%lld",..) then it would give you a valid result. Maybe you wanted to have modular arithmetic with it. (In general requirements stop at that - like modulo some large prime i.e, 10^9+7 ). 
c-10-25	X	typedef string c value assignment to position I used typedef in C as following: and then i created a function called "writeElement" defined as this: why am I getting the error: "assignment to expression with array type" I just can't understand. Here, the string type is of type char [20], an array type. A variable of type array, cannot be assigned, status by design. In this case, the variable string is of type pointer to string type, which is a pointer to char[20] type (char (*) [20], to be precise). Hence, string[p] is essentially of type char [20], making it unusable for the LHS operand for assignment operator. From what I see, you don't need the function parameter to be a pointer, in first place. Just make it of type string (choose a different variable name than a type, please), and index into it. Also, when in doubt, check the data types. ON RHS of the assignment, you have type char, so the LHS also should be of the same type. First off, this is bad: Because you define a variable with the same name as a type. So the variable masks the name of the type, meaning you can't use the type in that scope. The main problem is that the variable string has type string *, which translates to char (*)[20], i.e. a pointer to an array. So string[position] has type char [20], which is an array type, and you can't assign to arrays. Change the name of the string variable to something else, and change its type to string: Since passing an array to a function is the same as passing a pointer to its first element, you are able to dereference the pointer via the array element operator [] so that the results are visible outside of the function. This is an example of why it's not a good idea to hide pointers or arrays behind a typedef. It leads to confusion as to what the actual type is. 
c-10-26	X	Send audio over socket in C I am trying to send audio to a server that I built through a socket. I am using C for the client. Basically my code records a max of 10 seconds of audio and then I want to send it to my server through a socket. How can I send the audio that was recorded through a socket in C? I don't want to save the audio as a file... I want to send it directly to the server. Here is my code: 
c-10-27	X	static inline functions in a header file Lately I have been making an attempt to read more open source C code. A common pattern that I have been adopting in my hobby projects is as follows :- In my C files, I have functions that are either static or exported. Only functions that are exported are placed in a header file. Global variables which are only used within the scope of an object are also used as static global variables. My question concerns the usefulness and motivation of having "static inline" functions inside header files. From what I read online, not using the static keyword causes a multiple definition error and that is the reason for not just defining the function as just "inline". However, does this mean that this function is exported for other objects to use? If yes, then why not just define this function in the C file and export it via the header file? If no, why put this in the header file rather than just having it inside the C file? Is there a reason behind this coding style? What am I missing? One such example can be found in the git codebase inside hashmap.h: A static inline function is, in practice, likely (but not certain) to be inlined by some good optimizing compiler (e.g. by GCC when it is given -O2) at most of its call sites. It is defined in a header file, because it then could be inlined at most call sites (perhaps all of them). If it was just declared (and simply "exported") the inlining is unlikely to happen (except if you compile and link with link-time optimizations, a.k.a. LTO, also, e.g. compile and link with gcc -flto -O2, and that increases a lot the build time). In practice, the compiler needs to know the body of a function to be able to inline it. So a suitable place is to define it in some common header file (otherwise, it could be inlined only in the same translation unit defining it, unless you enable LTO), so that every translation unit would know the body of that inlinable function. It is declared static to avoid multiple definitions (at link time) in case the compiler did not inline it (e.g. when you use its address). In practice, in C99 or C11 code (except with LTO, which I rarely use), I would always put the short functions I want to be inlined as static inline definitions in common header files. Be sure to understand how and when the C preprocessor works. Notice that you could in principle (but it would be very bad practice and disgusting style) avoid defining some static inline function in a common header file and instead copy and paste its identical definition in multiple .c files. (However, that might make sense for generated .c files, e.g. if you design a compiler emitting C code). FYI LTO is practically implemented by recent GCC compilers by embedding some internal compiler representation (some GIMPLE) inside object files, and redoing some "compilation" step - using the lto1 frontend - at "link" time. In practice, the entire program is almost compiled "twice". (actually, I always wondered why the C standardization committee did not decide instead that all explicitly inline functions are static) 
c-10-28	X	Is this is correct about malloc() and calloc()? I have researched in all possible ways I could but it's hard for me to digest the fact that both malloc i.e.malloc(sizeof(10)) and calloc i.e. calloc(2,sizeof(5)) allocates same contagious memory, ignoring the other facts that calloc initializes to zero and works relatively slower than malloc. so this is what I think in my opinion, I think that on a 32-bit system if we call malloc and say malloc(sizeof(10)) then malloc will go to the heap and allocates 12 bytes of memory because for a 32-bit system the memory packages are arranged in the packages of 4 bytes so to allocate 10 bytes 3 blocks are needed with a padding of 2 bytes in the last block. similarly, if we call calloc and say calloc(2,sizeof(5)) then it will allocate 2 blocks each of size 8 bytes and in total 16 bytes because due to the same reason that memory is in the packages of 4 bytes and to allocate 5 bytes two blocks of 4 bytes are used and in one block a padding of 3 bytes will be provided. So this is what I think of malloc and calloc. I may be right or wrong but please tell me in both the cases.THANKS What you get when you use both methods is at least that amount of memory you request. It can be more. One reason could be the one you are mentioning. Another reason can be that you get a bigger chunk just in case you want to change it later. There's no way to say exactly how much you got. Only that you are guaranteed at least what you requested, and if you don't, you'll get a null pointer. Note though, that with get I mean that you get what you ask for, and you can NEVER count on more than that. That will be undefined behavior. calloc allocates "memory for an array of nmemb elements of size bytes each" (Linux man page), but we know that arrays in C cannot have padding between array elements, they must be contiguous in memory. On the other hand, malloc allocates "size bytes", so either of malloc(10) or calloc(2,5) will give you those ten bytes. Now, what happens behind the scenes is another issue, the C library might decide to allocate 12, 16, or 42 bytes instead. But you can't and must not count on that. If you ask for 10 bytes, assume you got 10. malloc(sizeof(10)) is different, it takes the size in memory of an int (since 10 is an int), and allocates that much. 
c-10-29	X	how to configure.ac with optional GNU guile library ("--with-guile" ) I'm new to configure.ac, I'm trying to create a simple program that would only use the GNU guile library if the user invokes: so the program would be something like: GNU guile uses guile-config compile and guile-config link to obtain the path to the include directory and the libraries. I've not found a tutorial where the paths above are obtained via an external program. I've removed AC_CHECK_HEADERS and AC_CHECK_LIB because they doesn't work (the files are not found). Here I'm lost: how can I add the guile paths to CFLAGS and LDFLAGS, how can I generate HAVE_GUILE in config.h current Makefile.in: configure.ac: is more typical. I used a Makefile.am instead of what you did: Makefile.am: which is more typical also. config.h has: Makefile has: 
c-10-30	X	What is difference between Pointer of Array and Array of Pointer in c language? Please tell me what is the difference between Array of Pointer and Pointer to Array, specially in c language Let T be a random type (int, long int, double, enum ecc..) then: p is a pointer to the first elemente of T array arrso you can access the first element of your array like this: or It's an easy way to move around your array without indexes and a great solution to pass variables by value. Keep in mind that the pointer has, as r-value, the l-value of the pointed object, when the pointer is dereferenced we obtain the pointed object. So writing p+1 means to move the pointer to the second element of your array. Arrays of pointers actually are a collection of this object (a pointer to a variable or to another data structure). For example you can have an array of int pointers to track all the elements of a lined list. Since you did not define each pointer, thay are unreferred so it can be a dangerous way to code. 
c-10-31	X	"Data base" to function I'm trying to build a table (as data base), that combines a few arrays. In the main: And the function: The Clion warning me that there is a mismatch types in strcmp. What I'm doing wrong? Thanks a lot! 
c-10-32	X	C: How to modify the max size of a string in a struct? The exercise gives a simple program to create databases, and this program turns around the following structure I'm asked to modify the code so I can pass as an argument to the program the maximal length of .name and .email. Now, of course, if instead of defining MAX_DATA as a macro I work with it as a global variable, I get the error: variably modified 'name' at file scope. Then I tried to create different if-loops aiming to pass the MAX_DATA value by redefiningstruct Address, for example: but DatabaseSet and DatabaseWrite (which work on a struct Connection that relates to another struct Database, who finally relates directly to struct Address) ignore the new lengths of name and email. EDIT: THANKS. Thank you all for your comments and answers, your really helped me out with the exercise and with my general undestanding of C. Then allocate memory dynamically in name and email based on your MAXDATA input. Then you do this struct Address p. And and then when you are done working with it In case you allocate memory for email you will have to call free() on it the sane way as shown before. 
c-10-33	X	Where is the 'main' function located? Where is the 'main' function located? I know about these locations: .text .data .bss stack heap I think that the answer is .bss because I know 'main' function is not located in others (but I might be wrong). This is obviously outside the realms of C standard because it doesn't mention any "sections". Using ELF systems as an example, typically all the code will be in text segment (also known as code segment) and main will be in text segment. You can look at where the symbols reside by using readelf or objdump commands. For example, if you inspect the output of objdump -S a.out you can see assembly and various sections. You can read http://wiki.osdev.org/ELF and http://www.cs.cmu.edu/afs/cs/academic/class/15213-f00/docs/elf.pdf for further info. 
c-10-34	X	Reference types inside a C union I would like to reference a type inside of a union. I have the following code: I want to be able to do something like DISPLAY_1.DIGITS or DISPLAY1.SEGMENTS however I am only presented with a list of DIGIT_1, DIGIT_2, DIGIT_3, DIGIT_4, SEG_1, SEG_2, etc when accessing DISPLAY1. Is it possible to do what I am after or have I not used the union correctly? Thanks! Even though it seems that I wasn't clear enough in my original question for some people, Eugene Sh was able to answer it. Essentially I have two typedef enum's DIGITS and SEGMENTS. I needed a way to generically apply these to displays DISPLAY_1 and DISPLAY_2, which are unions. So I could access the digits or segments of display 1 or display 2 using DISPLAY_1.DIGITS or DISPLAY_1.SEGMENTS. This works, except I need to be able to use the enumerated type for switch statements. So what I needed to do was define my enumerated enums outside of the unions, then make a reference to them as an item inside of the union. My code is posted below. Enumerations: Unions: Example Usage: 
c-10-35	X	Read input fscanf with delimiter "_" How can I scan the following in a txt file? For example: I've tried: First of all, as the code currently stands, you have undefined behavior Quoting C11, chapter Â§7.21.6.2 If there are insufficient arguments for the format, the behavior is undefined. As we see, in your case, Remember, the [ and ] pair actually forms conversion specifiers and they need corresponding argument for the scanned result to be saved. Suggestion: That said, you may want to use fgets() to read the data and strtok() to tokenize the input to get the individual tokens. What you have currently: is matching a number followed by a space, then a series of characters not containing an underscore, then an underscore and a space etc... so totally nothing like what you're actually expecting. Plus, each of those %... will expect a corresponding variable to store the value in. To get what you want you want the following. and don't forget to check what value it returns - anything less than 4 means it didn't find all 4 values. If you must use fscanf() for this, then this format should do it: That assumes that the delimiters are single underscores, and it does not accommodate the two strings being empty. It does accommodate leading whitespace before each number (which will be ignored), and the two strings will be permitted to span lines. Both of those potential issues could be addressed, though rejecting whitespace before the numbers would require using %[ directives instead of %d, and therefore scanning into strings. Overall, this is probably a lot more trouble than it's worth. It is very frequently better to write your own parsing function than to rely on the scanf() functions for handling any but the simplest of formatting. 
c-10-36	X	undefined reference to `strnstr' how to fix it and run strnstr I need to reproduce behavior of strnstr function. I want to test strnstr but can't compile program, its written "implicit declaration of function strnstr [-Wimplicit-function-declaration]" and "undefined reference to strnstr". I included header <string.h>. I know that strnstr() isn't in standard library and the problem is probably connected with compiler, but how to fix it to work with strnstr()? Compiler version: gcc (Ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609 There's no function named strnstr in standard C or POSIX. It's not in glibc/Linux either. It appears to be FreeBSD function. I know that strnstr() isn't in standard library and the problem is probably connected with compiler, but how to fix it to work with strnstr()? Not sure why you think it's a compiler issue (unless you think it's a compiler intrinsic). If it's not provided by your C library, it's just not available. So if it's not available on your system (probably you are not using a BSD system) then you can implement it. You can look at an existing implementation. 
c-10-37	X	How to extract last 3 digit of an array of a string and store it to different int array in C I want to extract last 3 digit of a string suppose like : and I want to take last three digits and store in different array like I took reference from this but I wan't it without using pointer or a linked list. As I am gonna use it for comparing stack. C program to extract different substrings from array of strings Something like this: This doesn't check the return value of sscanf(), instead defaulting the value to 0 in case conversion fails. This will convert a larger integer, so the % 1000 was added to make sure only the last three digits really matter in the conversion. The unsigned is simply to disallow embedded dashes in the string, which makes sense to me in cases like these. 
c-10-38	X	Exporting Functions from a Win32 Cross Built Static Library I attempted to build a win32 static library using the i686-w64-mingw32 cross-build toolchain. I built the object files and the mylib.lib file via a Makefile: This gave me the static library mylib.lib. Inspecting this on the linux side with nm I can see all the constituent object files and the functions they contain No when I inspect mylib.lib on a windows 10 VM, i.e. I get: None of the functions are being exported. In the relevant header file I mark up the functions I want to export with __declspec(dllexport) This worked fine when I was producing a .dll, i.e. the functions I marked for export were the only ones that were visible in the .dll file But for the static library equivalent nothing is being exported? How are you meant to make functions visible in a win32 .lib file? dumpbin /exports lists the symbols exported by an executable or DLL. See the DUMPBIN options documentation A static library isn't an executable or DLL. It's just a bag of object files in Unix ar archive format (which is the same MS LIB format). dumpbin analyses COFF binaries. When you run: it analyses each object file in static.lib according to /option.... But: will never report any exports in the object file file.obj because an object file isn't an executable or DLL either. It has no dynamic symbol stable. Only an executable or DLL can expose symbols for dymamic linkage: it is supplied with its dynamic symbol table when it is generated by the linker, which has no hand in producing either an object file or static library. If you now build an executable or DLL that links any function from your static library that you have qualified with __declspec(dllexport) in the library's header file, then the linker will add that function to the dynamic symbol table of the output executable or DLL, and if you then dumpbin /exports on that executable or DLL, you will see that the function is reported. An object file may define global symbols. A global symbol (a.k.a public/external symbol) may or may not be exported for dynamic linkage, depending on whether it is qualified __declspec(dllexport) or not. A symbol must be global to be a DLL export. If you run dumpbin /symbols on your static library, that will report all the symbols in all the object files in the static library, and will classify them as External or Static. The symbols that you have qualified as __declspec(dllexport) will appear amoung the External symbols listed. 
c-10-39	X	clang not stuck at #include "/dev/whatever" I'm working on a project of code safety of online judger. One possible vulnerability is when someone uploads a piece of code like this: I'm trying to reproduce it. When compiling it with gcc foo.c, gcc gets stuck and reads from terminal until EOF (Ctrl-D) as expected. When I clang foo.c, well, nothing happened. Clang just behaves as if the lines have never existed. Then I tried these codes: Still no luck. Why does Clang ignore all these? How can I make Clang stuck by #include-ing something? The C standard specifies that A preprocessing directive of the form searches a sequence of implementation-defined places for a header identified uniquely by the specified sequence [...]. How the places are specified or the header identified is implementation-defined. A preprocessing directive of the form causes the replacement of that directive by the entire contents of the source file identified by the specified sequence between the " delimiters. The named source file is searched for in an implementation-defined manner. If this search is not supported, or if the search fails, the directive is reprocessed as if it read with the identical contained sequence (including > characters, if any) from the original directive. (C2011 6.10.2/2-3; emphasis added) In particular, a C implementation is by no means required to interpret a header name that has the form of an absolute path as an absolute path. Such header names are not even among those for which a conforming compiler must provide unique mappings. Conforming C compilers must document all implementation-defined behaviors. GCC does provide documentation covering this area, but those docs do not seem to address absolute paths explicitly. It seems reasonable to me, however, that GCC just uses given path. Clang evidently behaves differently, but it does not document its implementation-defined behaviors (and therefore is non-conforming in that regard). Its output may give clues about what it's doing. Update: Why does Clang ignore all these? You could examine its source to determine the details of what Clang is doing, but only the Clang development team could tell you for sure why Clang is implemented that way. Perhaps its developers anticipated your hosted-service use case and intentionally hardened Clang against the kind of attack you describe. How can I make Clang stuck by #include-ing something? The approaches you've already tried seem the most likely ones. If they didn't work then there might not be a way to break Clang that way. Make a fifo, and #include it. Note this only appears to stop clang; it doesn't read from it. This might only work until the clang team see this.... 
c-10-40	X	How to efficiently compute large powers of 2? I'm trying to calculate, for 0 < n â‰¤ 10â?¹, the value of I wrote this code: When n is 10â?¹, my code takes too long. What can I do to make it faster? You can follow binary exponentiation which will be something like Call it like this fastExp(2,n). Well the complexity is pretty simple in that it does log2(n) operations so this will work better than your O(n) solution. As an explanation to why your solution got TLE. The online judges available like that of SPOJ etc usually take 1 sec to do 10^8 loop operations. Here you do much more than that when you have n=10^9 as input. You can do it in logarithmic time of n by computing power computation faster. For example, 25 means computation of x = 22 and x * x * 2. If n is smaller than 30, the result is 1 << n, otherwise you can calculate 1 << 30 and let your for loop start at 31. You can also get rid of the expensive % operation if you check if (re > 1000000007) and subtract 1000000007 (because re is smaller than 1000000007 before multiplying it by 2, it is smaller than 2*1000000007, so subtracting 1000000007 is enough): complete program: https://ideone.com/0FRcaf 
c-10-41	X	How to determine number of characters that were read with fgets()? This is the description of fgets() from the man page: It doesn't follow the pattern of read, which returns -1 on failure and the number of bytes read on success. Instead, it returns a char* which is NULL on failure and s on success. This doesn't give me any info about how long the input is. So if I have something like this: After the fgets call, is there any way to tell how long the input is WITHOUT zero-initializing the buffer first? Thanks. Yes there is. It is always null terminated in case of success. So it will be strlen(buf). From standard 7.21.7.2 char *fgets(char * restrict s, int n,FILE * restrict stream); The fgets function reads at most one less than the number of characters specified by n from the stream pointed to by stream into the array pointed to by s. No additional characters are read after a new-line character (which is retained) or after end-of-file. A null character is written immediately after the last character read into the array. How to determine number of characters that were read with fgets()? Use strlen(s) after checking the fgets() return value. This works unless a null character '\0' is read as strlen() will encounter that '\0' before the appended one by the function. In that case, strlen(s) after fgets() will report a smaller value. There are various tricks to pre-fill s and then call fgets(), yet it is undefined what happens to the rest of the unread buffer. Other short comings exist. If null characters as part of a valid input stream are a concern, use fgetc() or something like getline(). A common scenario where null characters are text is when text is encoded as UTF-16. Of course code should not use fgets() to read that text, yet that requires prior knowledge. Much code that reads text has failed in mysterious ways due to the incorrect assumption that a text file is a non-null character text file. Further, even with a text file supposedly lacking a null characters, what happens with the following code? Such code invokes undefined behavior with a hacker exploit: slipping a null character in the file at the beginning of the line. (See this and this for better solutions to lop off the potential \n) Robust code does not assume the text is well formed and takes measures to detect abnormalities. Pedantic note: there are pathological problems with fgets(char *s, int size, FILE *stream); with a size < 2. 
c-10-42	X	Change signature of function pointer in C when one argument is constant I want to use quicksort in C, which has a function signature of void qsort(void *base, size_t nitems, size_t size, int (*compar)(const void *, const void*)), but the signature of my comparison function is int (*compar)(const void *, const void*, const int) with the third argument being constant during one call to quicksort. As an illustration, assume that I want to sort an array of vectors according to different norms (L0, L1, L2 and Linifinity norm for example). Which norm it actually is, is passed as a third argument to the comparison function, but remains constant during the call of qsort. Is it possible to do an assignment in a form like to be able to call something like I know this does not work, but I hope it gives an idea what I want to accomplish. Also it is not possible to make different comparison functions and calls to qsort as the number of different ways of comparing is too big. This is called partial function application, and you can only achieve something like this with wrappers in C: If you're into partial function application or maybe mappings or pure functions, you may want to look into functional programming languages, like Haskell. The main problem is that the function signature expects 3 elements in the stack before being called. Old C compilers were "smart" and if you don't pass enough parameters, then they "complete" the stack with empty variables (zeroed). Nowadays if you do that (assuming the compiler accept),it will have a 3rd variable with undefined value in the stack and not the value you are expecting. You should do a "proxy" function as a previous comment said: 
c-10-43	X	Ncurses writes to wrong window in multithreaded program I have a program with 2 ncurses windows. one for general state of the program and another for log messages. Every half a second i update display in second ncurses window and refresh the screen. Meanwhile, from another thread, i am writing a lot of logs to the first window (around 200 lines ina second). The result is as follows: lines going to windows become messed up. Lines going to the first window end uo in secind window, and vise verse. What could be the reason and how can i work around it? This is the code i am using for initialisation and write to the log window: 
c-10-44	X	Loop closes unexpectedly I checked this but it didn't help - For loop scans one less time in c So, I'm new to programming and I was trying to solve this question from SPOJ (my doubt is general and hence didn't post it in SPOJ forums). http://www.spoj.com/problems/STRHH I made and ran this code in CodeBlocks using GCC where it runs as intended but runs differently when I ran it through Ideone. Input: Expected Output: So, I get the expected output when I run it in Codeblocks but when running it on ideone (and submitting it on SPOJ), the printf loop only runs thrice instead of 4 times and the output I get is: My question is why I'm not getting the fourth "ntc" in ideone and why is it not being accepted? Edit: Changed "200" to "201" bytes, used fscanf instead of scanf, removed fflush and updated loop condition. So, I get the required answer if I change loop condition from ' This: Makes no sense; you're allocating space for n integers, but assigning the result to a pointer to a pointer (neither of which is the same size as an integer, in general). The allocation should be: This will allocate n times the size of whatever ptrarray points at, i.e. sizeof (char *), but without repeating any type names. This is a quite general and much safer pattern, worth learning. As mentioned in the comment, don't fflush(stdin);, it's undefined behavior. 
c-10-45	X	How to map pthread_t to pid (on Linux) Is there a sane way to map a pthread_t value (as returned from pthread_create() or std::thread::native_hanle() ) to pid(tid) in Linux? Before someone gets duplicate-happy, this is not about finding thread's own pid (which can be done with gettid()). The insane way would be to somehow compel a thread to call gettid() and pass along the result, but that's way too much trouble. One of the possible applications I have in mind is to reconcile threads created within program (where pthread_t is available) with output provided by ps -T. 
c-10-46	X	Comparing an element of the matrix in c using pointers Does anybody know why visual studio throws me an exception when i want to compare an element of the matrix with 0? This is all the code. It throws me this exception: 0xC0000005: Access violation reading location 0xCCCCCCD0. I have to mention that if I use the debugger the result is good. As pointed out in a comment, this: access makes no sense at all. It doesn't match the actual contents of *a at all (which is a single pointer to n * n integers). It should be: Or do away with the double star pointer internally for clarity's sake and just have a local pointer while accessing inside the function: is how I would write it. Then access like so: Then of course don't forget to export it to the caller at the end: Also, since all the memory is uninitialized coming straight from malloc(), the code makes ... no sense. 
c-10-47	X	How to enter and scan multiple chars in c I want to enter multiple printfs but i dont get opportunity to enter. I can enter only 1, but after that it just ends the programme.I tried with do while but it didnt work Read full lines using fgets() into a suitably large buffer, then parse that. Note that %s will stop at the first blank character, so a full name of "Mr X" will leave "X" in the input buffer, grabbing that for the password and so on. It's really not a robust way of getting input. Use c library function fgets(). I can enter only 1, but after that it just ends the programme. Of course, as the code has if (number==2) @Scadge If you enter "2", consider the following: scanf("%s",&fullname); will not save spaces or other white-spaces into fullname. Entering a full name like "John Doe" will save "John" into fullname and "Doe" into password. Avoid using scanf(). Rather than use scanf() to read user input, read user input with fgets(). This is a fine opportunity for helper functions that can handle various input issues. Now use these 2 helper functions for clean user input Additional code could be added to check for end-of-file, extremely long lines, int range testing, etc. 
c-10-48	X	Which one is more possible to waste less memory, one big memory manager or several small one? First of all, this may be more like a math problem. I am writing a module that requires memory piece by piece and never release it until its instance is dead, so I write a simple memory manager to reduce malloc. The memory manager requires a block of memory during initialization, and the size of memory block is controllable by user, then the manager pass the memory pieces to user when required. If the manager is running out of memory, it doubles its memory block size by realloc. At the end, we can figure out that relation between required memory size and the total wasted memory size is: Now I have several memory users, I can either create a memory manager for each of them (the overhead of manager is not worth to consider), or create only one memory manager and share it among all users. The number of users and the size of each user's usage of memory may vary in a great range. So, which strategy have greater possible to waste less memory? The memory manager does hide the actual memory block position and provides offset to user, to avoid realloc issues. The interface is quite simple: So I think the compiler will inline it and there's no difficult about optimization. And also, there's no need to worry about data race, since all users of the manager come from the same thread. They just require in a staggered way. In my opinion, one big manager leads to faster program, since there are less realloc which is a big cost. So my focus is on memory usage. Thanks for your help. This won't work anyway: realloc is not guaranteed to succeed in resizing in place - it's free to allocate a larger block and copy all the data into the larger block. I presume that the users expect the data to stay at fixed addresses. The simplest way to address this issue is not to use the C library, but use the platform-specific virtual memory APIs to reserve a large chunk of address space, then commit memory to it on demand. E.g. on Windows, you'd use VirtualAlloc(NULL, size, MEM_RESERVE, 0) to reserve the needed contiguous address space, and then VirtualAlloc(addr, size, MEM_COMMIT, PAGE_READWRITE) to commit the pages as your used memory area grows. This means that you're at most having just one extra page per memory pool. If you stick to small (4k) pages, this means that there's never more than 4092 bytes wasted per pool (one word short of a page). Furthermore, on 64-bit systems, there's no need to pass the addresses using a base+offset: the reallocations won't ever realistically run out of address space, so there's no need to move the mapped view of memory within the virtual address space. You can use plain pointers/references! There are benefits to having a separate memory area for each user: it improves the locality of reference - the user's data is close together, and thus improves cache performance at all levels, including the page swapper should paging out occur. In a 64-bit application, reserving large address spaces for each user is not an issue and has minimal overhead. E.g. you can reserve 1Gbyte for each user. It is worth reserving say twice the largest area a user may need. In a 32-bit application, if the address spaces needed are large, the users may need to cope with having their data moved within the address space. This can be achieved by remapping the pages and thus doesn't need to copy anything. Taking a sensible assumption of there being a 64-bit OS backing the application, you may benefit from mapping the memory area to a file. This lets you completely unmap it from the address space without losing the contents, and those contents don't have to hit the disk either - the OS will cache them if it can. Thus you can grow the address space for a user without having to copy anything and without wasting the smaller address space during a grow operation: first unmap the smaller view of the file, then map the larger view of the file. The user will need to cope with being given a new starting address for the memory area. The user may refer to the memory by adding offsets to a base address: this performs well enough and allows the flexibility of a movable address space. 
c-10-49	X	Algorithm for check breakpoint for using sparse matrix I want to use sparse matrix or matrix, depending on efficiency and space saving I'm trying to find what's is more efficient and save space in run time The size of the matrix is changing but every value is char (can be nothing -"˜\0') I'm reading the data of the matrix values from file... (In the beginning of each file there is the size of the matrix) Thank you in advance You can think on this as a graph representation. As you know, if you use matrix, the space complexity would be |V|^2 (|V| is number of nodes). Moreover, if you use adjacency matrix (or sparse matrix) the space complexity would be |V||E|, which |E| is the number of non-zero strings which are related to a node. Hence, you can traverse the file and compare |V|^2 and |V||E| and decide base on these two values. 
c-10-50	X	When calling the exec*() family of functions, do the char* elements of argv all have to be unique? I'm trying to write a small utility that relays its argument list to an exec'd process, except some of the incoming arguments are repeated when building the new process's argument list. Below is a very simplified version of what I'm looking to do, which simply duplicates each argument once: Notice how the elements of execArgv are not unique. Specifically, the two elements in each duplication are the same, meaning they point to the same address in memory. Does Standard C say anything about this usage? Is it incorrect, or undefined behavior? If not, is it still inadvisable, since the exec'd program might depend on the uniqueness of its argv elements? Please correct me if I'm wrong, but isn't it possible for programs to modify their argv elements directly, since they're non-const? Wouldn't that create a risk of the exec'd program blithely modifying argv[1] (say) and then accessing argv[2], falsely assuming that the two elements point to independent strings? I'm pretty sure I did this myself a few years ago when I was beginning to learn about C/C++, and I don't think it occurred to me at that time that the argv elements might not be unique. I know that exec'ing involves "replacement of the process image", but I'm not sure what that entails exactly. I can imagine that it might involve deepcopying the given argv argument (execArgv in my example above) to fresh allocations of memory, which would probably uniquify the thing, but I don't know enough about the internals of the exec functions to say. And it would be wasteful, at least if the original data structure could instead be preserved across the "replacement" operation, so that's a reason for me to doubt that it happens. And perhaps different platforms/implementations behave differently in this respect? Can answerers please speak to this? I tried to find documentation on this question, but I was only able to find the following, from http://pubs.opengroup.org/onlinepubs/9699919799/functions/exec.html: The arguments specified by a program with one of the exec functions shall be passed on to the new process image in the corresponding main() arguments. The above doesn't clarify if it is a uniquified deepcopy of the arguments that is passed on to the new process, or not. The argument argv is an array of character pointers to null-terminated strings. The application shall ensure that the last member of this array is a null pointer. These strings shall constitute the argument list available to the new process image. The value in argv[0] should point to a filename that is associated with the process being started by one of the exec functions. Ditto for the above. The argv[] and envp[] arrays of pointers and the strings to which those arrays point shall not be modified by a call to one of the exec functions, except as a consequence of replacing the process image. I honestly don't know how to interpret the above. "Replacing the process image" is the entire point of the exec functions! If it's going to modify the array or the strings, then that would constitute a "consequence of replacing the process image", in one sense or another. This almost implies that the exec functions will modify argv. This excerpt simply reinforces my confusion. The statement about argv[] and envp[] being constants is included to make explicit to future writers of language bindings that these objects are completely constant. Due to a limitation of the ISO C standard, it is not possible to state that idea in standard C. Specifying two levels of const-qualification for the argv[] and envp[] parameters for the exec functions may seem to be the natural choice, given that these functions do not modify either the array of pointers or the characters to which the function points, but this would disallow existing correct code. Instead, only the array of pointers is noted as constant. The table of assignment compatibility for dst= src derived from the ISO C standard summarizes the compatibility: It's not clear what "The statement about argv[] and envp[] being constants" refers to; my leading theory is that it refers to the const-qualification of the parameters in the prototypes given at the top of the documentation page. But since those qualifiers only mark the pointers, and not the char data, it hardly makes explicit "that these objects are completely constant". Secondly, I don't know why the paragraph talks about "writers of language bindings"; bindings to what? How is that relevant to a general documentation page on the exec functions? Thirdly, the main thrust of the paragraph just seems to be saying that we are stuck with leaving the actual char content of the strings pointed to by the argv elements as non-const for the sake of backwards compatibility with the established ISO C standard and "existing correct code" that conforms to it. This is confirmed by the table which follows on the documentation page, which I will not quote here. None of this decisively answers my primary questions, although it does state fairly clearly in the middle of the excerpt that the exec functions, in themselves, do not modify the given argv object in any way. I would greatly appreciate information pertaining to my primary questions as well as commentary on my interpretations and comprehension of the quoted documentation excerpts (particularly, if my interpretations are wrong in any way). Thanks! There are a lot of questions buried in your post, so I'll only address the most important parts of it (IMO): Does Standard C say anything about this usage? Is it incorrect, or undefined behavior? If by "standard C" you mean POSIX, then you've already found the specification for exec*. If it doesn't mandate that the arguments need to be distinct, then they don't need to be distinct. And as pointed out by @SomeProgrammerDude in the comments, one is very likely to get non-distinct strings in the case of string literals, as the compiler is free to deduplicate them (e.g. execl("foo", "bar", "foo")). is it still inadvisable, since the exec'd program might depend on the uniqueness of its argv elements? The C standard itself does not mandate distinct strings in argv, so one can't rely on them being distinct. The above doesn't clarify if it is a uniquified deepcopy of the arguments We can say for certain that copies must be made somehow, as otherwise there'd be the possibility of modifying string literals (which isn't allowed). However, the details of how this is achieved seems to be left as an implementation choice. So it's probably best not to rely on any particular behaviour. Nowhere in the POSIX manual it's mandated that arguments in argv are required to be unique. The arguments are required to be null terminated strings and have a null pointer as the last argument for variadic ones: The arguments represented by arg0,... are pointers to null-terminated character strings. These strings shall constitute the argument list available to the new process image. The list is terminated by a null pointer. The argument arg0 should point to a filename string that is associated with the process being started by one of the exec functions. The argument argv is an array of character pointers to null-terminated strings. The application shall ensure that the last member of this array is a null pointer. These strings shall constitute the argument list available to the new process image. The value in argv[0] should point to a filename string that is associated with the process being started by one of the exec functions. And that's all that POSIX requires. So there's no explicit requirement that arguments have to be unique. So if an implementation requires the arguments to be unique then that conflicts with the standard. Because standard functions can not impose unspecified requirements or have effects not specified in the standard. "Replacing the process image" is the entire point of the exec functions! If it's going to modify the array or the strings, then that would constitute a "consequence of replacing the process image", in one sense or another. This almost implies that the exec functions will modify argv. Modifying is allowed only on success; otherwise, "replacing the image" wouldn't occur and thus there are no "consequences". It's essentially to prevent leaving the argv and envp in an unusable state on failed exec calls in the original process. exec can't do a shallow copy because there's no way for it to know about the storage duration of the arguments it's given. So even the following should be fine: Does Standard C say anything about this usage? Is it incorrect, or undefined behavior? There is no problem if two pointers pointing to the same memory location. This is not undefined behavior. If not, is it still inadvisable, since the exec'd program might depend on the uniqueness of its argv elements? POSIX standards do not specify anything about the uniqueness of argv elements. Please correct me if I'm wrong, but isn't it possible for programs to modify their argv elements directly, since they're non-const? From C Standards#5.1.2.2.1p2 The parameters argc and argv and the strings pointed to by the argv array shall be modifiable by the program, and retain their last-stored values between program startup and program termination. So, the answer is - Yes it is possible. Wouldn't that create a risk of the exec'd program blithely modifying argv[1] (say) and then accessing argv[2], falsely assuming that the two elements point to independent strings? In computing, exec is a functionality of an operating system that runs an executable file in the context of an already existing process, replacing the previous executable. So, when exec family system call is executed, the program given in argument will be loaded into the caller's address space and over-write the program there. As a result, once the specified program file starts its execution, the original program in the caller's address space is gone and is replaced by the new program and the argument list argv stored in newly replaced address space. POSIX standard says: The number of bytes available for the new process' combined argument and environment lists is {ARG_MAX}. It is implementation-defined whether null terminators, pointers, and/or any alignment bytes are included in this total. And ARG_MAX: {ARG_MAX} Maximum length of argument to the exec functions including environment data. That means there is some space allocated for new process arguments and can safely assume that the argument strings copied to that space. I know that exec'ing involves "replacement of the process image", but I'm not sure what that entails exactly. Check this. And perhaps different platforms/implementations behave differently in this respect? Can answerers please speak to this? The implementation might vary from platform to platform but all variants of Unix must be following the same POSIX standard for maintaining the compatibility. So, I believe the behavior must be same on all platforms. 
c-10-51	X	How to install a dependency in C? I'd like to compile this example C code which has a dependency on libuv. If I try to compile it as is I get an error How do I install the libuv dependency so I can compile the program? 
c-10-52	X	Printing Unicode characters using write(2) in c I'm working on a small piece of code that prints characters to the screen, and must support all of Unicode contained in a wchar_t, and i'm limited to only write(2). I managed to print an emoji using : So \U seem to be the way to go. However, i can't get to convert the wchar_t into the proper escape sequence, ie converting wchar_t c = L'ðŸ¤¡'; into \U0001f921 Can i even do that in C ? Thanks a lot. I'm working on a small piece of code that prints characters to the screen, and must support all of Unicode contained in a wchar_t, and i'm limited to only write(2). That's a problematic combination of requirements. In particular, wchar_t character representation may very well not play nicely with using write() for output. More generally, there are multiple issues here, among them: The members of the source and execution character sets. How to represent extended characters of the execution character set in your source (via the source character set). How to present extended characters of the execution character set to the output device of your choice, so that device handles them as desired. Note well that that C specifies only a fairly small set of characters that must be present in the execution character set. Additional, "extended", characters may be present in it, and your emoji would fall into this category. Dealing with extended characters via the standard C interfaces is a bit mushy, as the standard affords implementations a great deal freedom in how they do things there. So \U seem to be the way to go. The \U introduces a "universal character name". It is important to understand that these sequences are converted to members of the execution character set during compilation. However, i can't get to convert the wchar_t into the proper escape sequence, ie converting wchar_t c = L'ðŸ¤¡'; into \U0001f921 It is not safe to assume that 'ðŸ¤¡' can be represented directly in the source character set, so as to use it literally in your source code. That depends on your C implementation. A universal character name is safer. Furthermore, if you want a wide character constant then you can try L'\U0001f921', but there's a good chance that wchar_t cannot represent that character. In particular, many implementations have 16-bit wchar_t, and those are unlikely to be able to support your character as a (single) wchar_t. You may have better luck with a wide string literal: L"\U0001f921", but this is useful to you primarily if you are working with the wide-character-specific functions, which will perform appropriate encoding conversions for you. write() will not perform such conversions, so whether it produces the desired result will depend on the configuration of your runtime environment. I judge your original approach, with an ordinary string literal, to be more likely to work. If you wish, and if you can use C2011 features, then you can also express a (regular) string literal that is defined to be encoded in UTF-8, regardless of what the actual execution character set is. The form for that would be u8"\U0001f921". Again, though, producing your desired result this way depends on your environment. UTF-8 literals are better suited to interacting with interfaces that are specifically defined to use UTF-8. Can i even do that in C ? It is not safe to assume that your emoji character can be represented by a single object of type wchar_t. There may be C implementations that support it, but I think they are uncommon. One final note: this code ... ... almost certainly exhibits undefined behavior as a result of overrunning the bounds of the char array you are presenting to write(). I don't see any plausible scenario in which it is longer than 5 characters, but you write 6, overrunning by at least 1. If the internal representation is UTF-8, then that array will have length 4 -- three bytes encoding the character, and one for the string terminator. You should measure the length to find out how many bytes to write, for example: 
c-10-53	X	how can i figure out that " int(*(*ptr))()[2]; ", is a pointer to a function? It is a pointer to a function whose return type is pointer to array. What I want to know is that, are there any definite set of rules to determine it or it comes with practice. 
c-10-54	X	create file with given name and permissions in linux using c I have to write a function in c create with 2 parameters: file name and permissions for the file. (e.g: create("f","rwxr_xr_x") this function creates file f which will receive "rwxr_xr_x" permissions and will return 0)If the file already exists or it can not be created it will return a number different from 0. Here is the code that I came up with: I tried to open the file in r+ mode and then I used chmod to change permissions, {not sure if this is correct). When I compile this, I get the following warning: "initialization makes integer from pointer without a cast for the line int fp=fopen(name, r+) . Can someone please help me solve this and tell me if the code is correct? I am new to linux UPDATE so I made some changes, as suggested but I think it still does not give the right permissions (as I said I am new to linux, so I might be wrong). Here is how my code looks now: Also, how can I check if the file already exists? Because in that case my function has to return a value different from 0 and print an error message Firstly your problem with this line: fopen returns a value of type FILE * not int so that line should be And that means you need to test if fp is not NULL not > 0. Having created the file, you should also remember to call fclose(fp) to close the file as well. Your code handling the permissions is also wrong. The values you normally pass to the chmod command in the shell are octal, not decimal, so this line is wrong. You want to multiple n by 8 each time. Since it's a bit field you could improve the code by using the '|=' operator to change the appropriate bits rather than using addition. Also you should really check to make sure that mode is at least 9 characters long before the loop. 
c-10-55	X	STM32 HAL C standard I am a little confused... I have an embedded project that uses the STM32 HAL libraries which in turn uses the stm32f072rb CMSIS header files. The HAL claims here that it is Strict ANSI-C I have the belief that Strict ANSI-C means C89 so I added these gcc flags to my Makefile. But when I do it gives lots of errors and warnings. If I remove these flags it compiles. I am very confused over this. Am I lacking something or their documentation is wrong? Here are some gcc compiler erros with the flag enabled... They keep repeating over many of STM32 HAL files. Quoting Wikipedia: ANSI C, ISO C and Standard C refer to the successive standards for the C programming language published by the American National Standards Institute (ANSI) and the International Organization for Standardization (ISO). So it seems "ANSI C" is not well-defined, it's not said which particular version of the C standard is being used. Since it's clearly using inline, it must be at least C99, so try that. It works for me ... error: unknown type name 'inline' points at a feature that was added with C99. I suspect that the problem is that their documentation says "ANSI-C". "ANSI-C" is a rubbish term which does indeed most of the time refer to C89. Since the year 1990, ANSI has nothing to do with the C standard any longer, so those who keep talking about "ANSI-C" after the year 1990 are simply confused, see What is the difference between C, C99, ANSI C and GNU C?. Your compiler options are correct for strict C89/C90 code. Try to compile with -std=c99 -pedantic-errors instead. However, MISRA-C:2004 does explicitly not allow C99 features, so this is fishy. Code containing inline is definitely not MISRA-C:2004 compliant. For C99 support, MISRA-C:2012 is needed. 
c-10-56	X	OpenCL counter variable I'm performing Otsu's method (link https://en.wikipedia.org/wiki/Otsu%27s_method) in order to determine how many black pixels are in the raw frame. I'm trying to optimize process and I want to do it with OpenCL. Is there any way to pass the single variable to OpenCL kernel and increment it, instead of passing the whole buffer when it's not necessary? The problem you want to solve is very much like a global reduction. While you could use a single output variable and atomic read/modify/write access, it would be very slow (due to contention on the atomic) unless the thing you are counting is very sparse (not the case here). So you should use the same techniques used for reduction, which is to do partial sums in parallel, and then merge those together. Google for "OpenCL reduction" and you'll find some great examples, such as this one: https://developer.amd.com/resources/articles-whitepapers/opencl-optimization-case-study-simple-reductions/ 
c-10-57	X	Why is my program outputting wrong values? I have been learning memory allocation and pointers lately, and I made this program which will ask the user to input the dimensions of a matrix and enter it's elements, after which it displays the elements in a matrix format. Here's the code that I've typed. However when I gave my inputs, I got this: What's wrong? Amn't I supposed to get Is there anything I had made wrong in my code? You get incorrect output because *(A+k+l) is not the right way of accessing matrix element at matrix[k][l]. For addressing a matrix stored as a "flat" array you need to multiply the value of one of the indexes by the size of the opposite dimension. Depending on which index you multiply you get either a row-major order or a column-major order. You need to apply the same fix to (M+i+j) inside minput function. The idea behind multiplying k by b is to make k "count faster". For each increment of k by 1 you need to skip an entire row of b elements. In your three-column matrix example, if you would like to access elements at A[k][0] (the initial column) of your matrix for each row, your index would count by three: 0, 3, 6. This is accomplished by multiplying k by b. The rest is the same as the usual pointer arithmetic: *(A+b*k+l) is equivalent to A[b*k+l]. Demo. Lets take a close look at one of your loops (I use the input loop, but the error is in the output loop as well): The first iteration of the outer loop, i is zero. Then the inner loop runs, and we read into (in turn) M+0+0, M+0+1 and M+0+2. Then we run the second iteration of the outer loop, where the inner loop will read into M+1+0, M+1+1 and M+1+2. In these two iterations of the outer loop you will read into M+1 and M+2 twice. That's because M+0+1 and M+1+0 are the same element. To fix this, lets take a look at your "matrix" as it is in memory To choose the address in which to write a value, you use: Let's try that for a few values of (i,j): You want M + (i * x) + j. For x == 3: The same goes for the pointer arithmetic when reading from the same memory. Furthermore, since the pointer just goes up by one each time, you could get the same behaviour with: Or even: Other points: In one method you use variables x,y,i,j, and in another you use a,b,k,l. I assume you've done this because you don't want to overwrite one with the other. But because of scope, that's not a factor. x is local to the function minput() -- you can have another x in main() and they will be completely independent of one another. Use x,y,i,j in both places, because they are the "sensible" names for dimensions and loop counters. for(i=0; i<x; i++) is the conventional way of looping x times. Your i<=(x-1) is equivalent but messy and confusing. Casting the result of malloc() is discouraged nowadays. Do I cast the result of malloc? 
c-10-58	X	can't get the size of an array right in C The exercise I'm doing asked to create an array of 50 characters, to put it in a structure and then use a subroutine to print the array on the screen and to say how many characters it has ( there's more but the problem that I have is here ) this is what I did ` but each time I type something, the number of characters is always 1 in the end. would be nice if someone could explain to me what I did wrong. You are wrong, on two fronts. Firstly, the function call is wrong (not syntactically, from the actual usage point of view), you need to pass the starring address, just like x=Anzahl (kette); Secondly, arrays, when passed as function arguments, delays to pointer to the first elements. So, you cannot use sizeof to get the expected size from the parameter that received the input argumet. Quoting C11, chapter Â§6.3.2.1 Except when it is the operand of the sizeof operator, the _Alignof operator, or the unary & operator, or is a string literal used to initialize an array, an expression that has type "˜"˜array of type'' is converted to an expression with type "˜"˜pointer to type'' that points to the initial element of the array object and is not an lvalue. and, chapter Â§6.7.6.3 A declaration of a parameter as "˜"˜array of type'' shall be adjusted to "˜"˜qualified pointer to type'', where the type qualifiers (if any) are those specified within the [ and ] of the array type derivation. [...] Bonus: is also wrong. It's off-by-one, as C arrays are 0-based indexed. In this case, you're passing an invalid pointer (and accessing the memory location therefor to read the content), you have undefined behavior. You can't call sizeof array on a function argument, since in C arrays decay to pointer. This means as soon as you call Anzahl(&kette); the "50" will just be discarded, and your function will look like int Anzahl(char *);. This is just one of your problems though, since you call sizeof on kette[50]. This will return the size of a char in bytes, which should always be 1. Instead you should be calling sizeof(kette), but this will not work because of the reasons I mentioned earlier. This could be fixed by wrapping the array in a struct like typedef struct arr { char[50]; } arr; and then using this struct instead of kette[50]. You should also be calling Anzahl(kette) instead of &kette[50], same goes with puts. Sourav Ghosh is right! The final version should be: 
c-10-59	X	What is the KR and ANSI notations in C? How they differ? While solving quiz on C programming following question asked: Que: What is the notation for following functions? int foo(int a, float b) { /* Some code */ } int foo(a, b) int a; float b; { /* Some code */ } and the answer to a question is ANSI Notation KR Notation Please explain what is the ANSI Notation and KR Notation and how they differ? 
c-10-60	X	Fowards/backwards compatibility of C/C++ code compiled with different NDKs? I'm starting my first piece of Android programming, porting some libraries written in C and C++ to Android. I am not building an app, except for testing the libraries: the product is the libraries, which will be supplied to my customers. The libraries are mathematical modelling, running on the device, and have no web or cloud interfaces: customers who want to run them in the cloud already do that, using the Linux or Windows builds. My initial customer is using NDK 14b. I could use that, or I could use the latest NDK, 16b. If I compile C code with NDK 16b, a compatible instruction set and the same C++ run-time and target API version as my customer, will they be able to use static libraries that I've built in their NDK 14b app? The other way around is also interesting: if I use NDK 14b, and another customer comes along who uses NDK 16b, will static libraries I've built with 14b work in their 16b-built app? I'd be targeting an equal or earlier API to them, and the same instruction set and C++ run-time. You kindof cannot target the same C++ runtime when you use a different NDK release. The STL versions do not change too much, but there is no contract of their stability. Except from this remark, static lib from NDK r16 will cooperate correctly with r14 and vice versa, but the bigger the gap is, the more glitches you should expect to handle. In general, NDK improvements involve bug fixing, so there is an incentive to use the latest release. But major progress is done in support of newer platform versions. This means that if your library will be linked into an app that targets Lollipop, the advantages of r16 will be less prominent. Note that if you can ship your library as a linked shared library (so), your interdependency with the host app will be significantly less, and in my experience this improves stability and reduces clashes. If that is relevant, this way is also more secure. 
c-10-61	X	Listening with 2 sockets on server I've created a server that listens on 1 socket that works fine, and now I need to add another socket. I've read some questions/answers here about how to create it, but so far without any success. I'm running both clients and server on my local laptop, and as I'm trying to bind the second socket, I'm getting the follow error: bind: Address already in use while running the server, in the terminal. Can anyone give me maybe a little hint about what I'm doing wrong and how can I create 2 sockets to listen on the same address? I've cut the rest of the code where it gets to listen etc since that's where I get the error. Two sockets cannot listen on same port number, you need to create two sockets binding to different ports and then have a load balancer in front of them to share the load across. Or, if you want to create one socket but the requests should be handled by multiple threads or processes then you can utilize shared memory concept (usually in C or C++). So when request comes in then the server socket process can copy the request content to shared memory and then the child processes or threads can pick the request from it and then process further. This model is being used by apache HTTP server. 
c-10-62	X	Preventing timeout while transferring files between 2 peers I am transferring files from server to clients using nonblocking sockets. Some files may be quite big (hundreds of megabytes). A separate thread handles each client. Sometimes poll() timeouts and the server closes the connection (to prevent malicious clients from using up server resources). I discovered this can happen even when the client is still trying to read the data. In such case, the client gets ECONNRESET when calling read(). I figured out that the server repeatedly sends some chunks of the file and at some point the socket may remain not ready for writing for some seconds. I assume this is because the data hasn't been sent yet and the corresponding kernel buffer is full. However this causes the timeout which leads the server to close the connection. When I increase the value of TIMEOUT, the error happens less often. What is the best way to make sure unexpected timeouts don't happen? The server is supposed to run on multiple platforms so I cannot really use an OS-specific solution. You can never protect yourself fully against both DOS attacks and unexpected timeouts. I suggest that you scale the allowed timeout with the amount of data already sent. Start with a shart timeout and increase it as you send more and more data. DOS attackers and defunct clients will likely open many connections but won't bother reading from them. You want to close this kind of connection fast. Clients who have received tens or hundreds of MB of data should be allowed much greater timeouts. Example: Initial: 500 ms After 1 MB: 2 s After 100 MB: 10 s 
c-10-63	X	right arrow equals right arrow I saw something in someones code that I don't understand. What does it say in the return statement? here is defined: It's just a shorthand way of writing this: The statement return c->U = c->D = c; works because the assignment operator = returns the value it has just assigned. This value is then used in the next assignment. It associates from right to left, so it means return (c->U = (c->D = c)); 
c-10-64	X	C : Segmentation fault with typecasting In my C code, my string ( of type 'char' ) contains the payload of a captured packet. Since some of its contents cannot be printed, I tried typecasting them to 'unsigned char'. I am getting a segmentation fault. Typecasting to 'char' results in the same. Can typecasting result in segmentation fault? If yes, when does typecasting result in segmentation faults? UPDATE I am trying to check if the payload contains any URL. 'payload_length' varies for each packet and can be pretty large. Problem 1: (char)str. You cast an array into a single char. This is nonsense and you should know why. Also, this should not compile cleanly without compiler messages, or your compiler is trash. Problem 2: you update pos every time, and || has mandatory evaluation from left to right. It would be a very weird URL to have "www" after ".com". So after pos=strstr((char)str,".com" you point at the end of the string and you will never find "www" anywhere. An alternative to writing such obscure one-liner code, could be something like this: Optimizations are possible if you can assume that the strings are present in a specific order (as you should be able to). Problem 3: strlen assumes that the string is already null terminated, so you cannot write code like str[strlen(str)]='\0';. 
c-10-65	X	How to debug this code for linked list? I wrote this to perform push and reverse operation on linked list but the push/reverse function is not working somehow. I don't know where the problem is, everything seems to be fine. Can someone help me out? I think there's a problem with the head of the linked list or the parameter of the functions. Do I need to declare a pointer to pointer as parameter? There are many things wrong with this code. I'll start with a small snippet. push() is taking a pointer to NODE, allocating something and then assigning it to that pointer. this only modifies the local copy of the pointer in push() , leaving head1 unmodified. To modify head1, you either need to return a pointer or take a pointer to pointer. That is either or Also you are allocating sizeof(NODE*), the size of a pointer (typically 8 or 4 bytes). This should be sizeof(NODE). 
c-10-66	X	Is there any other ways to make the program print hostname to stdout or just shellcode? It is a lab assignment asking us to exploit this program. The first task is to call the notcalled function(which is solved by change the return address to the notcalled function :perl -e 'printf "A"x112 . "\xaddress of notcalled"') but the second task is to construct an input string to the program that makes the program process print its current hostname to STDOUT which I have been working on weeks. I only have one clue that is to write a shellcode into buffer and change the return address to address of buffer to active the shellcode. But may because of my wrong operation it doesn't work. (I tried used to GDB to find the address of buffer and using an exploit program to print an shellcode which could open /bin/sh to get root access to string buffer as a test. and I tried use root to gcc-5 -o oflow oflow.c -fno-stack-protector -z execstack chmod u+s oflow,and etc. and I have done the syracuse University's Buffer-Overflow Vulnerability Lab and it sucuss on my Ubuntu16-i386 server version. http://www.cis.syr.edu/~wedu/seed/Labs_12.04/Vulnerability/Buffer_Overflow/ and the exploit program is learned from it) So the question is: To make the program print hostname to stdout, is the idea of using shellcode correct? or is there another tricker way to print the hostname? I need only hints or tips. Thanks a lot. my exploit code is here[1]: https://i.stack.imgur.com/tmoAg.jpg because it is on vitural box. so I put a screenshot here. and I followed the guide to find the return address of buffer the Aleph One, Smashing The Stack For Fun And Profit http://inst.eecs.berkeley.edu/~cs161/fa08/papers/stack_smashing.pdf the best way to get the host name from the environment is: 
c-10-67	X	Confusing Caching Behaviour of a Simple C Program I am experimenting with a program to see if its caching behaviour is consistent with my conceptual understanding. To do this I am using the Perf command: to record the cache-miss ratio of the following simple C program: I get a cache-miss ratio of 50.212%. If I change the array access pattern as follows: I get that the cache-miss ratio is 22.206%. These results are surprising to me. The cache-miss ratio of 50.212% seems very high for such a simple program with a very regular memory access pattern. I would expect this to be closer to 1/(num-words-per-cache-line) which is definitely larger than 1/2. Why is the cache-miss ratio so high? My (limited) understanding of memory suggests that iterating over the array in column-major order should result in much worse caching behaviour but the results I am getting indicate the opposite. What's going on? The answer is pretty simple: compiler optimize out your assignments. Here is how the disassembly looks like for your code: As you can see there are no assembler instructions generated for the line arr[i * N + j] = 10.0;, so those cache misses you observe with perf are unrelated. The fix is quite easy. Simply add volatile to the pointer declaration, forcing compiler to generate the assignments, i.e.: The disassembly now: And there are much more cache misses as well. Running your test just once might get you very noisy results. You should run your measurements few times and take a median. There are benchmark frameworks, like Google Benchmark, so please have a look. And the last one. Both of your patterns, like i * N + j and j * N + i are easily recognizable by the CPU prefetcher, so the cache miss ratio in both cases should be quite similar... 
c-10-68	X	Is there a built-in function that acts like strcat from the string start? I have a string that I want to encircle with quotes. What I have so far is this: Output (as expected) is "hello world!" Is there a simpler way, or a built-in function that does this? PS. An answer in C++ (that handles C-strings) would be fine too There is an easier way - just shift the existing string the required amount of space to make room for the string you want to prepend. Since the source and target areas of memory are overlapping you can't use strcpy or memcpy, but instead have to use memmove and then replace the first character with the double quote. I suppose that the source array already contains a string. Otherwise you could build the string in quotes very easy from scratch. Here you are. The program output is In C++ if to use the template class std::string then the same task can be done the following way Otherwise if you deal with a character array that contains a string then the approach will be the same as it is shown for C. Is there a built-in function that acts like strcat from the string start? Yes, it is called strcat. What you would do in the normal case, is simply to create a second string: Trying to be "smart" and save memory by doing this in-place is probably not a good idea, since it comes at the expense of execution speed. As a side note, your code won't compile on a standard C compiler, because there is no function called "strrev" in the C language. It is a non-standard extension and should therefore be avoided. In C++, you can use the overloaded + operator for strings. If you are obliged to use a char array for some reason, you should convert it to a string first: Here, either the first or the second string should be a C++ string (i.e. std::string and not a char array), to make the overloaded operator work. In C++14, you can use a string literal to make the first string the correct type, using the s suffix: If you also want your output in the same char array, use c_str and strcpy on the resulting C++ string. You can even fit it into one line of code: This code is vulnerable to buffer overflow, unlike all the previous ones. This is quite simple. Just start with a string that holds the opening quote: Or, if you don't want to initialize the string that way, just copy the opening quote: 
c-10-69	X	Create an array of n elements in Assembly MIPS i have the following program in C, which creates an array w with dimension dim(array V)/2: There is my C code: I have to convert it in Assembly MIPS, but i have a problem doing this : infact i have to create an Array with 'dimW' elements, so i should allocate exactly dimW words in memory. My approach is the following: But i don't know which is the correct way to do that. Any idea? 
c-10-70	X	Why is there a typecast in this macro body? I study computer engineering, and the teachers here have always told us to define an ÂµC address like this: #define FIO0DIR (* (unsigned int *) 0x2009C000) //GPIO direction register from the lpc1769 But they never really explained why or what's happening. So my question is: why is the cast there, at all? why the cast at all? Because 0x2009C000 is an integer constant. Not an address. The C type system differentiates integers from addresses, even if the target architecture may not. It allows for conversions with various constraints on them, but the two types are not one and the same. You need the cast to turn the integral constant into the proper pointer type, so you may dereference it and access what's at that address. Quoting C11, Â§6.5.3.2, Address and indirection operators The operand of the unary * operator shall have pointer type. On it's own, 0x2009C000 is an integer constant (as mentioned in chapter Â§6.4.4.1), not a pointer type. However, as we intent to use this integer constant as an address, and need to deference the address to get a value, there's the cast. The cast tells the compiler to treat the integer constant value as a pointer to unsigned int, and then, the dereference operator acts on the pointer to get the value stored in that memory location. Please note, do not consider this as a general applicability. Whether an integer constant value can represent a (valid) address location, is very much dependent on the platform and the environment. What you know is that your controller is mapped at address 0x2009C000, but to manipulate it you need to define the data type to store or read at that address. And this is what types are for in high level languages like C: specify what kind of data is stored at some address, its length (in bytes) and its representation (for example integer in 2's complement). So: means view constant 0x2009C000 as an address where an unsigned integer is stored. means the variable stored at address where an unsigned integer is stored, simply the unsigned integer variable stored at the given address. 
c-10-71	X	How to COMPLETELLY install SDL2 in CLion for C I have a really hard time properly installing SDL2 in CLion and I read so many articles on how to do this, but none really helped me... In the root directory of my CLion project I already have: a directory /include with all the header files (all 72 headers) a directory /lib with all of the four library files (.a) SDL2.dll as file in the root directory Now many articles stated that I need FindSDL2.cmake in a directory /cmake and I also did this This is my CMakeLists.txt: When I just want to compile a simple Hello-World-Programm, but with the SDL.h included, like this: I get this error: 
c-10-72	X	fopen() is null when using a string variable as path I am trying to open a file inside a folder relative to the current directory of the .c file. Why is it that when I use the path variable fopen() does not work, but when I directly pass the directory it works? Here path is uninitialized; whereas strcat expects it to be null byte terminated. Use strcpy instead, for example: However, there may other problems in your code due to which fopen() could fail. Check errno and use perror() to see why it failed. 
c-10-73	X	MISRA C 2012 violation of rule 9.1 even with an initialized variable I am trying to get rid of violation rule 9.1 from my code. Rule 9.1: The value of an object with automatic storage duration shall not be read before it has been set Sample code: I am initializing var2 in the function do_test by calling another function "func" where var4 is copied to var2. It is compiling fine and I am getting y value = 1. Is it the violation due to parameters in func as pointers and the function do_test is not getting aware about the value assignment through pointers in func Is there anyway to fix this issue ? This is a common tool bug in many static analysers. Your static analyser can apparently not understand that the function func initializes all the items of var2, and therefore you get the false positive on the line var2[9] == var4[9]. On many static analysers, code such as int my_array[10]; initialize(my_array); gives frustrating false positives. "You try to initialize the array before it has been initialized!!!" Oh really... thank you, most helpful static analyser. Your code is fine. File a bug report with your tool vendor. 
c-10-74	X	Debugging a code takes me to stdio.h lib I have a C program which starts with #include <stdio.h>. When I debug a printf statement, the debugger takes me to the studio.h library, which shows me step by step how the printf function is done. Obviously I don't want this to happen because it takes too long. It does print the text I wanted to print. Any idea how to prevent this? When debugging you are probably using the "Step Into"(F11) action in the debugger which will take you to the next line of code inside that function. If you don't want to see the code execution inside the function you should use "Step Over"(F10). Use "Step Into" when you want to see the execution of the code INSIDE the function. Use "Step Over" for faster and more scoped out debugging. 
c-10-75	X	Force the C compiler not to inline an entry from an array I have an array of C function pointers: Somewhere else in the code (using a third party tool), I destroy the content of the functions array, before using it. Therefore, should result in a non definable behaviour (even abortion of the running program). But it does not. The result is as if the destruction has never happened. Currently, I can imagine two sources of errors for this behaviour: Destruction does not happen The compiler inlines the content of the array at compile time and therefore, the destruction has no effect. So far the 3rd party tool never showed the behaviour of not destructing what it is supposed to destruct. Therefore, I have to assume the latter. How can I prevent the compiler from inlining the content of the functions array? The compiler may inline the functions because you declared the array const and it isn't volatile. So according to the abstract execution model, it may suppose that the array never changes. To ensure that you may be able to change the array, you'd have to remove the const. To ensure that your compiler takes changes from elsewhere into account you'd have to add volatile. Your error scenario doesn't make much sense to me, but if we ignore that, you can prevent inlining like this: This means that the compiler cannot expect the first item of the array to always be f1, making optimization impossible. volatile forces a read of the function pointer address before calling it, meaning that there must be an address, meaning that inlining is not possible, since inlined functions do not have addresses. 
c-10-76	X	c function: re-initialize a static array or declare new every call? I wonder what is the best way if I want to use an zero-initialized array of n unsigned char elements within a function. n is approx. 600. a) Newly declare the array at every function call: b) Declare as static but memset every function call: I would expect that memset and initializing in (a) would cost the same. But for (a) I need to allocate memory every funktion call and free it when I leave the function. This would not happen in (b) because the array is declared to be static. Am I right? Keeping it static means that it get zero-initialized at start-up, which does you no good here since you set it to zero in run-time anyway. If the system-specific static initialization is carried out in run-time, this would mean that you get a slower program start-up. Also, static variables are not thread-safe, which may or may not be an issue. What takes time in the stack allocation case, is not the allocation, but rather the zero-out. So if you are concerned about performance, the best solution is to not zero-initialize it at all, but instead ensure that the algorithm writes to each and every byte of the array. I don't know the algorithm here, but "I must have a local array of all zeroes with the size 600" is a strange requirement. 
c-10-77	X	Why doesn't it print the string? it prints only FG and other characters are garbage void putstr(char *s1[]) This is wrong. The actual argument to putstr is an array (which decays to a pointer) but the formal parameter says putstr accepts an array of pointers to char. Use void putstr(char *s1) or void putstr(char s1[]). 
c-10-78	X	How to stop switch statement if it is executing all other case in C? Problem This program giving me wrong result for odd numbers because second case statement also executing every time. Please tell me why this happening. Program output: Enter Number : 1 Enter Number : 2 Enter Number : 3 Enter Number : 4 Enter Number : 5 Enter Number : 6 Enter Number : 0 Total of even numbers : 12 Total of odd numbers : 21 Total of number of even numbers : 3 Total of number of odd numbers : 6 Average of even no. : 4.000000 Average of odd no. : 3.000000 Add break; at the end of each case. A switch in C has a follow-through feature meaning that program control runs into the cases below the one you enter. You can cancel that effect by using a break statement: In your case though you could use the considerably simpler And also beware that your averages will be calculated in integer arithmetic. Use 1f * te / e instead, taking care to check that e is not zero. 
c-10-79	X	Intermediate C : String search in a large file I'm writing a 'C' code that stores the TCP payload of captured packets in a file (payload of each packet is separated by multiple "\n" characters). Using C, is it possible to search for a particular string in the file after all the packets are captured? P.S : The file can be very large, depending upon the number of captured packets. Read the file line by line and search using strstr. 
c-10-80	X	What does this macro return and how do use it? I have a problem to understand how I can use this macro to get the lenght of the IP header. I have a file called framehdr.h and I have included that file in my main.c. The struct in the framehdr.h file look like this: I can manually get the lentgh by adding all the sizes like this: But I'm suppose to use the macro that look like this to get the size: What does this macro return? Is it a digit so I can store it in a int and then print it or how does it work? It looks like vhl (which is an 8 bit member, unless CHAR_BIT is a weird value on your platform) is used to store the version in the significant 4 bits and the header length in the other 4 bits. ((ip)->vhl) & 0x0f) extracts the least significant 4 bits of the vhl member of the struct to which ip is pointing. The multiplication by 4 to get the actual length is merely obeying the conventions of that member. The way you are using sizeof to "manually get the length" is making assumptions about the header length corresponding to the sum of the sizes of the individual members. Member padding and undocumented conventions centred around the serialisation technique used for your struct might mean this is not the case. 
c-10-81	X	Why doesn't work Variable length array as a globally? If I write variable length array as a locally, like this: It working fine in GCC compiler. But, If I write Variable length array as a globally, like this: Then, GCC compiler gives following an error: From standard 6.7.6.2 If an identifier is declared to be an object with static or thread storage duration, it shall not have a variable length array type. It's not allowed because unless it is restricted to the extreme, it could be exceptionally error prone. Consider this: The size of the array depends on the initialization order between it and sz (which in our example is in another transnational unit). It could produce a 0 sized array (ill-formed). The correctness of programs being built should not depend on such things. So if we limit its size to variables in the current TU only, we end up with: But why use a VLA at all in this case? Just specify the size with the constant expression 10. It's just not a useful feature. Not to mention, as @M.M pointed out, that it goes against the design goal of easily allowing static data to be pre-built into the binary. You already have the answer, but just to elaborate on why part, let me add my two cents. First, about lifetime: (quoting C11, chapter Â§6.2.4/P2) The lifetime of an object is the portion of program execution during which storage is guaranteed to be reserved for it. An object exists, has a constant address,33) and retains its last-stored value throughout its lifetime.34) Then, static storage duration: (quoting P3) An object whose identifier is declared without the storage-class specifier _Thread_local, and either with external or internal linkage or with the storage-class specifier static, has static storage duration. Its lifetime is the entire execution of the program and its stored value is initialized only once, prior to program startup. and , the linkage: (chapter Â§6.2.3/P5) [...] If the declaration of an identifier for an object has file scope and no storage-class specifier, its linkage is external. So, in this case, a is to have static storage duration. Now, by definition, VLA dimension is acquired at runtime, so there's noway compiler can know and allocate memory/storage and initialize it at the beginning (prior to program startup, as required for static storage duration), hence this is a conflict. As mentioned in C11 chapter 6.7.6.2, standard explicitly forbids this. [...] If an identifier is declared to be an object with static or thread storage duration, it shall not have a variable length array type. Because the standard says so. But that isn't very helpful; the reason why this isn't allowed by the standard, is that all file scope variables must be initialized before main() is called. This in turn means that they must consist of compile-time constants only. The purpose of a VLA is to grab the size in run-time. We can't have an array where the size is determined both at compile-time and run-time. If you have need for a variable size array at file scope, use a pointer and then in run-time have it point to an allocated array, such as for example an array allocated with malloc(). 
c-10-82	X	Select call sets the server's socket when a client disconnects I was playing around with a server with multiple clients in C and noticed one thing: Whenever a client disconnect from the server (The server simply calls close on the client's file descriptor), a select call (I'm using select to handle messages from multiple clients) sets the server's socket as ready to read from and the return value of the call is 0. Ignoring this fact blocks the server because select keeps returning 0 with the server socket set as ready instead of waiting for other sockets. Is there some extra clean-up to be done with the server socket after someone disconnected and before the server can accept new connection? When your server gets 0 or -1 from recv() it should call close on that socket, further is should ensure this socket is removed from read and write fdsets that are passed to select() otherwise select() will return error indicating there is a bad fd present in its read/write fdsets 
c-10-83	X	How to read information from existing file and store it to structures I am working on a game and I want to store information of players and display, so I have used structures to hold the details. I have problem in reading information to structures when there are more than one record of information in file here is the screenshot of the snippet I have done. My input to the file will be in the form I want to read the information from the file in above pattern and print it. Let me know how to use files to store and read information. 
c-10-84	X	strtok with comma spaces and tab So consider this string: And i want to separate each number, so until now i try this: But this ignored theTab and print the number 7.7 with tab before. As you can see in strtok documentation you can specify multiple delimiters to it. So you don't have to manually deal with whitespaces. strtok will do that for you: 
c-10-85	X	cs50 resize (less comfortable) issue I'm working cs50 pset4, resize (less comfortable) I'm trying to write a program that can resize an image by a factor n of user input, its close to working, it rescales horizontally but not vertically. I believe the problem is to in these sets of loops, does anyone know how to fix this. 
c-10-86	X	correct method to get the unsigned char pointer length I am using strlen function to get the length of unsigned char pointer. But VS compiler throws the following warning. So what is the proper way to get unsigned char pointer size to get rid of the warning. You should be able to explicitly cast to a char* to get rid of that warning: Alternately, since tmpBuffer is an array declared in the scope you're in, you can use the sizeof operator: Let you get rid of the note. Here you are typecasting it to the appropriate type that is being expected by the strlen() From standard the prototype of the function is But here you were passing it of type unsigned char* that's why the complain. Also if you are using it for simply storing strings as shown in example. You can use char without any problem. Using strlen is an O(N) solution to an O(1) problem! The size of an array is known at compile time. Use the idiom sizeof(myString). This is the length including the NUL-terminator, so will be 1 greater than the strlen result. Of course, you can't use sizeof to obtain the length if the array has decayed to a pointer type. In which case, you can obviate the compiler warning by using a cast to const char*: noting that the NUL-terminator is not included in the count. The cast is required due to an oddity further back in your code. String literals are of const char[] in C, not const unsigned char[]. Even if char is unsigned on your platform, char and unsigned char are still distinct types. It would be better if the first line in your snippet was 
c-10-87	X	DBus : When is DBusRemoveWatchFunction called? The DBus documentation says that DBusRemoveWatchFunction is Called when libdbus no longer needs a watch to be monitored by the main loop. My question is How does libdbus determine that a watch is no longer required to be monitored by main loop? Details: I have some legacy code in the project that uses DBus for asynchronous exchange of messages between two processes.In some rare scenarios while one of the process calls dbus_connection_dispatch(), DBusRemoveWatchFunction is also called and leads to a segmentation fault. dbus_connection_set_watch_functions() has been used to set the DBusRemoveWatchFunction. 
c-10-88	X	Insert node into singly-linked lists without using global variables to update the first node? I am trying to use the insert function without having it to directly change headList, but rather through the 'head' variable passed in through the parameter. However if I use this line of code in the insert function: Only the last element, "one" is printed. 
c-10-89	X	Computing the key of a symmetric encryption given the plaintext and ciphertext As part of an assignment I need to make an algorithm that takes 2 files as input, one containing a plaintext and one containing a ciphertext. Considering the encryption model is hardcoded/known, and is a symmetric encryption, is there a way to use openSSL to compute the key used to encrypt the provided plaintext into the provided ciphertext? For convenience i used 5 paragraphs of Lorem Ipsum as a plaintext, and blowfish as the cipher. The openSSL documentation and Google have proved less than useful. Thank you! No, the ability to do that would pretty much defeat the entire purpose of cryptography. There might be tools that can do that sort of thing with trivial systems (Caesar cipher for example) but if keys could be computed in reasonable times for current cryptosystems they would be broken. No you can't. Not for the blowfish algorithm. The reason for that is however not that any encryption scheme would be broken if it were possible to derive the key from a pair of plain text and cipher, even if it is easy to do so. The rest of this answer is to explain that. There is at least one encryption scheme which is secure in spite of allowing to derive the key. It is the one-time-pad encryption scheme, which happens to be the only known truly secure encryption scheme, for being proveably unbreakable. The point is that deriving the key of one message only breaks an encryption scheme, if the knowing the key of one message allows decryption of all future messages. This in turn is only applicable, if the same key is reused. The specialty of the one-time-pad encryption is a) each key is used for only a single message and never again (this is why it is called "pad", referring to a notepad with many keys, from which the sheet with a used key is easily taken away and destroyed) b) the key is as long as the message (otherwise deriving the key for a part of the cipher with a partial known plain text would allow decrypting the rest of the message) With those attributes, encrypting even with the humble XOR is unbreakable, each bit in the message corresponding to its own dedicated bit in the key. This is also as fast as de-/encryption gets and never increases the message length. There is of course a huge disadvantage to the one-time-pad encryption, namely key logistics. Using this encryption is hardly ever applicable, because of the need to provide the receiver of a message with many large keys (or better a very long key which can be used partially for any size of message) and to do so beforehand. This is the reason for the one-time-pad encryption not being used in spite of the fact that it is safer and faster than all used others and at least as size-efficient. Other encryption schemes are considered practically secure, otherwise they would of course not be used. It is however necessary to increase the key sizes in parallel with any noticable progress of crypto-analysis. There is no mathmatical proof that any other algorithm is underivable (meaning it is impossible to derive the key from a plain-cipher-pair). No math expert accepts "I cannot think of any way to do that." proof for something being impossible. On top of that, new technologies could reduce the time for key derivation, or for finding plain text without key, to a fraction, spelling sudden doom to commonly used keylengths. The symmetry or asymmetry of the algorithm is irrelevant by the way. Both kinds can be derivable or not. Only the keysize in relation to message length is important. Even with the one-time-pad encryption, a short key (message length being a multiple of key length) has to be used more than once. If the first part of a cipherhas a known plain text and allows to derive the key, reusing it allows to find the unknown plain for the rest of the message. This is also true for block cipher schemes, which change the key for each block, but still allow finding the new key with the knowledge of the previous key, if it is the same. Hybrid schemes which use one (possibly asymmetric) main key to create multiple (usually symmetric) block keys which cannot be derived from each other are, for the sake of this answer, considered derivable if the main key can be derived. There is of course no widely used algorithm for which this is true. For any scheme, the risk of being derivable increases with the ration of the number of bits in key to the number of bits in the message. The more pairs of cipher bits and plain bits relate to each key bit, the more information is available for analysis. For a one to one relation, restricting the information of one plain-cipher pair to that single pair is possible. Because of this any derivable encryption requires a key length equal to message length. In reverse, this means that only non-derivable encryptions can have short keys. And having short keys is of course an advantage, especially if key length implies processing duration. Most encryption schemes take longer with longer keys. The one-time-pad however is equally fast for any key length. So any algorithm with easy key logistics (no need to agree on huge amounts of keybits beforehand) will be non-derivable. Also any algorithm with acceptable speed will be non-derivable. Both is true for any widely used algorithm, including blowfish. It is however not true for all algorithms, especially not for the only truly safe one, the one-time-pad encryption (XOR). So the answer to your specific question is indeed: You can't with blowfish and most algorithms you probably think of. But ... What you are looking at is a "Known Plaintext Attack": if the attacker knows both the ciphertext and the plaintext, can the key be found? All good modern ciphers, including Blowfish, are designed to resist this attack. Hence, as has been said, the answer to your question is, "No, you can't find the key." 
c-10-90	X	How can I make Extended ASCII characters displayed correctly in Linux gcc? System: centos 7, gcc Here is my code: When I enter integers from 32 to 126, ASCII printable characters are perfectly displayed. When I enter integers from 128 to 255, Extended ASCII characters are not displayed as correctly as I anticipated. Instead "c_char = ï¿½" is the result. I have no idea why. Shouldn't gcc support Extended ASCII characters? How can I make Extended ASCII characters displayed correctly in Linux gcc? 
c-10-91	X	How do I get the current size of the heap memory of a process in Linux using C/C++ system calls? I am working on a software library, which can constantly keep track of the size of the heap memory of programs written in C/C++. What I would like to do is as follows. Is there any system call in C/C++ that is equivalent to get_process_heap_size() in the code above? I dont know if there is any direct system call that gives you memory details, but if you are on linux you can read and parse /proc/(pid of your process)/status file to get the needed memory usage counts 
c-10-92	X	What is the time complexity of free()? I was just wondering what the time complexity of free() is in C. For example let's assume all my function does is: Is it O(n) or O(n^2)? As Story Teller has stated, the implementation of free() is not specified, which makes its time complexity unspecified, too. The varied concepts of administrating allocated memory can come with different complexities. Just a few simplified examples of data structures used by memory managers (note that this is NOT the data structure in the program you created): a linked list of allocated blocks would come with a linear O(n) for a single malloc()-free() pair, making your code O(n^2) a buddy scheme would come with a logarithmic O(log n), making your code O(n log n) implementations stressing the time complexity of malloc and free (as an aspect of being fast), would probable come close to O(1), I am imagining hash-tables (this would probably come with a penalty in memory consumption and with a "high 1", i.e. the constant time might be longer than for the other concepts with low n), this would make your code O(n) (or O(1) for low n) Note: There is a scheme to make the memory manager data structures (applying to all examples above) within the administrated memory, that would allow finding the block to free and relative to it the administration data in O(1), resulting in a free() of O(1). The mentioned data structures, will however be searched by malloc() taking the mentioned different time complexities for an unused block (i.e. one which the size parameter to malloc() does not helpfully point to directly). Assuming that your code also has to malloc() the blocks you are freeing, you will probably actually end up with the mentioned complexities for the whole program. Strictly speaking, with respect to only the shown freeing loop, any widely used memory manager will make your code O(n), with O(1) for each free(). (Thanks to Stargateur for forcing me to think more specifically about the exact situation this question is about.) 
c-10-93	X	How to use variable length array in gcc? So, I've read on this site that c++ doesn't allow variable length array but gcc allows it. So, I wanted to test a small code The code compiles with "gcc var_array.c -o var_array" command in linux OS but when I run it, I get segmentation fault error What am I doing wrong? Also make it int, as you are using %d specifier. (because earlier will only be of 8 bits which might overflow in case of large values) You were using an unintialized variable. And then based on new valu eof n accessing the array. The indices most probably indexed out of the bound of the array giving you seg fault. For inputting int8_t use scanf("%" SCNd8, &n);. You can also input the int8_t type. Yes scanf's return value must be checked. So the ideal call would be The Mistake in the program is So You get that error,In order to rectify that you have to get the input value of n and then you declare the var_array[n] 
c-10-94	X	Does "IOC container" just maintain dependencies? As per wiki, A dependency is an object that can be used (as a service). Image processing application is the OOP paradigm style C syntax that address 4 roles, shown below. 1) interface (handlers.h) 2) Take one Dependency (gifhandler.c) 3) Dependency container (dealt by config.c) 4) Client - Service locator (UI.C) 1) To add new dependency(libxyzhandl.so.1) in Dependency container, it just requires adding a new entry in config.txt configurable, as shown below, config.txt ./libgifhandl.so.1 ./libtiffhandl.so.1 2) New service provided by ./libxyzhandl.so.1, will be contained by Dependency container without re-compilation of application. 3) Testing of complete application is not required, except source code of libxyzhandl.so. So, if config.txt goes empty, then, application does nothing, except saying, We cannot handle this kind of files, shown here, for any input(image file). Below is a visualisation of call flow, Question: 1) Is dependency container different from an IOC container? 2) Does Spring IOC container provide more functionality than just maintaining dependencies? These are basically the same thing. People tend to use them interchangeably. You can find a nice explanation here and here. The implementation you've shown allows for a simple runtime-injection of depenencies, but so-called IoC containers like Spring contexts are no different. 
c-10-95	X	Function getting garbage value by calling it from another function So my "yes" function is working fine on it's own but when I call it within ContactManagerSystem() case 0 It's going crazy for some reason The "yes" function is actually a validation check function I need the user to enter "yes" or "no" as in 'Y''y''N' or 'n' Wait for the user to enter "Y"?, "?y"?, "N"? or "n"? (for Yes or No). If the user replies Yes ("Y"?,"?y"?), it will end the program displaying the following message: Contact Management System: terminated< (followed by a newline) Otherwise, if the user entered No ("N"?,"?n"?), the application continues to display the menu. 
c-10-96	X	How do you return a pointer to non modifiable data in c I wish to return a pointer to data from a function. The caller should not modify that data. I want the compiler to flag an error if the caller is assigning the return value to a non const pointer. I know that it is possible to cast away const, but I want the caller to be forced to do that cast instead of just an implicit cast or warning. (or no warning!, as on the compiler I am using). I believe the answer to my question is that it is not possible. I think that there is no way to prevent caller code like this from compiling, and that if the user deferences the data (buf in my example) it will be undefined behaviour. Please note I am asking if it is possible to do this in the c language itself, and if not, an explanation of why the standard prevents this. I am not looking for a way to make this specific example flag an error using some specific compiler command line. This code produces 3 warnings with clang and gcc, each time the pointer buf is assigned from a pointer to const. The two different warnings: Possibly related: Why can't I convert 'char**' to a 'const char* const*' in C? Return Pointer To Non-Modifiable Member Array C++ gcc warning The problem is your declaration of buf in main: Just change it to: That should take care of the warnings. I'm not entirely clear on what you are looking for, but nothing prevents you from returning the address to a read-only location. Take for example the short snippet where the function number returns a const int* pointer to the address of a value within data: Example Without Attempt to Modify If there is no further attempt to modify the returned pointer, the compiler has no problems at all: Example Attempting to Modify Return However, if you do attempt to modify the value at the location returned by number, the compiler will generate an error without any specific option supplied Of course the const can always be cast away, but that would take an affirmative act, which would not be avoidable. E.g. Let me know if this is what you intended. To answer your question, "I am asking if it is possible to do this [...] and if not, an explanation of why the standard prevents this." For the first part: const is the only tool that C gives you for this purpose. If your use-case permits it you could build an iterator-like struct and supporting functions to provide element-by-element access while protecting the actual storage. (But if that fits, you could also just change the API to a int get_len()/char get_char(int idx) interface) For the second part: per ISO 9899:201x draft n1570: 6.5.16.1 Simple assignment 1 One of the following shall hold: [...] " the left operand has atomic, qualified, or unqualified pointer type, and (considering the type the left operand would have after lvalue conversion) both operands are pointers to qualified or unqualified versions of compatible types, and the type pointed to by the left has all the qualifiers of the type pointed to by the right; This is the case that covers assignment to a pointer (when neither operand to the assignment is void *), and it clearly requires the type pointed to by the left side to have all of the qualifiers of the type pointed to by the right side. With const being one such qualifier, your compiler that doesn't even warn about an assignment that ignores const is just not implementing the spec. (For clarity, the spec uses "qualified pointer" to mean <type> * <qualifier>. It uses "qualifier on the type pointed to" to mean <qualifier> <type> *.) [Editorial comment: I would hazard a guess that the compiler that doesn't even warn is targeted toward embedded development. Embedded developers seem to put up with abysmal tools regularly.] 
c-10-97	X	Incompatible argument with spawnv I have a little problem. I made a simple program in C using Eclipse CDT, that takes other exe's with their command line as parameters, and then executes these commands in a certain order to compare how long they take to run. This is the part of the code I'm having trouble with: "split()" is a function that splits the string in a vector of strings, separated by spaces. It takes a "char *" as argument, and returns a "char **". When I try to compile this, it says the third argument of "spawnv" is passed from an incompatible pointer. I think it's related to the fact that I need to use a "const * char" instead of a "char **" or something like that, but I'm really not sure if I can convert it somehow. It compiles anyways, and the program works fine, but that error bothers me. I need to give the code to a teacher, and I want it to be free of errors. Is there a way to fix that? or at least suppress the warning. 
c-10-98	X	It is possible to pack a c structure with bit fields in php? Hello guys i have this C structure and i want to know if is possible to pack it in php fpr writing into a binary file: The struct in C is: I read the docs in perl which php copied to implement binary pack and see that you can pack structs but no example for struct with bitfields Any ideas for generating in PHP? I resolved it by adding a custom extension to php: } 
c-10-99	X	Creating a win condition by passing strings in functions Whenever I compile my code currently it prints all possible scenarios no matter what integer is passed. Any help on how to fix this and why this happens? When I compile it prints "Player 1 wins" and "Player 2 wins" no clue why or how to fix it or even why it happens. I'm still fairly new to C so any help would be appreciated. Thank you. Here I hope the code will help you! 
c-10-100	X	How exactly does the wait function work (in regards to condition variables) I am a little bit confused on my understanding of how condition variables work (in regards to shared data concurrent access) The following is pseudo C code to illustrate my current problem Lets say we currently have number_of_cakes = 0, so Thread 2 is currently stuck on wait(rack_has_cakes). Thread 1 runs and increments number_of_cakes by 1. Then it calls signal(rack_has_cakes) - this wakes up Thread 2, unfortunately Thread 2 wakes up before Thread 1 calls unlock(some_lock), so it goes back to sleep again and the signal has been missed. I am very confused about the inner workings of wait and signal? What exactly happens with them? Are they like some boolean flag that gets automatically set to 1 when we call signal and set to 0 again when wait succeeds? What is going on? Can someone run me through step by step 1 iteration of the above code, heavy emphasis on what happens during signal and wait? thread 2 wakes up before Thread 1 calls unlock(some_lock), so it goes back to sleep again and the signal has been missed. No, that's not how it works. I will use C++ std::condition_variable for my cite, but POSIX threads, and most run-of-the-mill implementation of mutexes and condition variables work the same way. The underlying concepts are the same. Thread 2 has the mutex locked, when it starts waiting on a condition variable. The wait() operation unlocks the mutex and waits on the condition variable atomically: Atomically releases lock, blocks the current executing thread, and adds it to the list of threads waiting on *this. This operation is considered "atomic"; in other words, indivisible. Then, when the condition variable is signaled, the thread re-locks the mutex: When unblocked, regardless of the reason, lock is reacquired and wait exits. The thread does not "go back to sleep" before the other thread "calls unlock". If the mutex has not yet been unlocked: when the thread wakes up upon being signaled by a condition variable, the thread will always wait until it succeeds in locking the mutex again. This is unconditional. When wait() returns the mutex is still locked. Then, and only then, the wait() function returns. So, the sequence of events is: One thread has the mutex locked, sets some counter, variable, or any kind of mutex-protected data to the state that the other thread is waiting for. After doing so the thread signals the condition variable, and then unlocks the mutex at its leisure. The other thread has locked the mutex before it wait()s on the condition variable. One of wait()'s prerequisites is that the mutex must be locked before wait()ing on the linked condition variable. So, the wait() operation unlocks the mutex "atomically". That is, there is no instance when the mutex is unlocked, and the thread is not yet waiting on the condition variable. When wait() unlocks the mutex, you are guaranteed that the thread will be waiting, and it will wake up. You can take it to the bank. Once the condition variable is signaled, the wait()ing thread does not return from wait() until it can re-lock the mutex. Having received a signal from the condition variable is just the first step, the mutex must be locked again, by thread, in the final step of the wait() operation. Which, of course, only happens after the signaling thread unlocks the mutex. When a thread gets signaled by a condition variable, it will return from wait(). But not immediately, it must wait until the thread locks the mutex again, however long it takes. It will not go "back to sleep", but wait until it has the mutex locked again, and then return. You are guaranteed that a received condition variable signal will cause the thread to return from wait(), and the mutex will be re-locked by the thread. And because the original unlock-then-wait operation was atomic, you are guaranteed to receive the condition variable signal. 
c-11-1	X	How to point to a pointer of a pointer I'm writing a program that can modify rows and cols from a function of a function. I don't understand how to do pointer of a pointer. First This is wrong. Assigning hardcoded address. You don't want this How to get the address of the row and col? &row and &col. How to pass it to function? Call it, changeNum(&row,&col); How to pass pointer to pointer? ChangeNum2 how it would change value? Can we do the same change using changeNum() only? Yes we can do that. Definitely check this. Grab a book. It will help a lot. The complete code will be It takes sometime to grasp that every C function parameter is passed by value. So you can safely pass setRows pointer to the second function simply by its value. Also, it's necessary to declare previously the function changeNum2, I've included the declaration without parameter names to clarify it's possible. I strongly recommend reading this book: https://en.wikipedia.org/wiki/The_C_Programming_Language, specially chapter 5 (Pointers and arrays). You can find a PDF copy easily. It's where I finally learned this concept. 
c-11-2	X	Write and use of uninitialized errors Valgrind Basically, I have written a program that, given a set of outputs, the program computes a formula that gives those outputs through genetic programming. In the program I have a function that randomly splits a set of data (inputs and outputs) into training data and test data, given a set of exemplars (fitness data and target data). The way the function works is by dividing the data into four separate arrays, training_cases, test_cases, training_targets and test_targets. Training_cases and test_cases are double arrays that contain inputs while training_targets and test_targets are single arrays that contain the outputs. Here is the function: The issue is I am getting multiple errors (write and uninitialized value errors). This is the output of valgrind: My guess is that most of these errors are due to an improper allocation in the beginning of the functions. I have tested all other functions used to ensure that they are returning the right values. Any help would be appreciated. EDIT 1 Christoph Freundl's eliminated all the write errors, so now I have the uninitialized errors to fix. I have a feeling that parse_exemplars() is causing them, so here is parse_exemplars: Invalid writes For the last elements of the arrays training_cases, test_cases, training_targets and test_targets only one byte is allocated. However, these are accessed either as a double (8 bytes) or as a double * (again 8 bytes because of 64-bit architecture) each: in the assignments in lines 645-648 the NULL and NAN values get implicitly converted. These assignments therefore cause the "invalid write" errors. Change the allocation of e.g. training_cases to and the other allocations similarly and you should be fine. Uninitialised values There is an error in parse_examplars(): results[1] receives the locally declared array tmp which becomes invalid when leaving the function. My suggestion: define a and use a variable of this type instead of double ***results. 
c-11-3	X	Strange chars while reading from file with fgetc When I printf the variable answer it contains several strange chars. What might be the reason? strcat expects the destination string to be valid - which means it must be null terminated. You are not explicitly null terminating the answer string. Add answer[0]=0 before your loop. 
c-11-4	X	setting the affinity of an array of threads My code doesn't seem to work the way I want, I have tried to find where the problem is but I just can't seem to see that there's something wrong with it ...I think I may have understood the whole thing wrong. I am trying to set the affinity of a thread,I want to make it run on a specific cpu,then when I run it and display the value of sched_getcpu() it's not the correct value,not the cpu I forced my thread to run on. the execution gives this 
c-11-5	X	How does the output come about from this C code? This was a question from a previous exam, and I cannot seem to figure out how we get the output from this code. I understand how to get the 5, but seem to find difficulty solving for the next two digits. Output: The value does not get evaluated first when it is "substituted" into the macro. i.e. printf("%d", a + b + 1 * b + 1); This one is more straightforward, it replaces the parameter p to the string literal. i.e. printf("%d\n", a); printf("%d", FIRST(a,b));: FIRST(a,b) expands to a + b*b. When evaluated, 1 + 2*2 = 5. This prints 5. printf("%d", FIRST(a,b+1));: FIRST(a,b+1) expands to a + b+1*b+1. When evaluated, 1 + 2+1*2+1 = 6. This prints 6. SECOND(d,a); expands to printf("%" "d" "\n", a);1 This prints 1 and the newline. 1 The #p in the macro means "literal text of the actual argument, converted to a string constant". See Stringizing. 
c-11-6	X	Function getting garbage value ContactManagerSystem() case 0 It's going crazy for some reason The "yes" function is actually a validation check function I need the user to enter "yes" or "no" as in 'Y''y''N' or 'n' Wait for the user to enter "Y"?, "?y"?, "N"? or "n"? (for Yes or No). If the user replies Yes ("Y"?,"?y"?), it will end the program displaying the following message: Contact Management System: terminated< (followed by a newline) Otherwise, if the user entered No ("N"?,"?n"?), the application continues to display the menu. Try: The sense of your while loop is wrong. Assume that a got the character 'y'. Then, since 'y' != 'Y' is true, you would continue to loop. Here is a corrected loop. Notice that the new code deals with the line too long, and drains the line for you, which was missing from your original code. Try it online! What we want a to be is one of Y, y, N, and n. If it is none of those things, enter the loop. Also, enter the loop if b is not the newline. If b is not the newline, then likely the line was too long, so we have to drain the line. First, put the value of b back into the input stream. Then, tell scanf to scan past everything up to the newline character, and then consume it (into b). In preparation for the next scanf call to get the inputs, pre-populate a and b with values that will cause the loop to terminate. This is in case scanf jams (say on EOF or some file input error). The rest of the code is as you had it. I think you need to rethink your use of && and ||, and use parentheses. This code also takes care of EOF and words (like "yes") being typed. If the letter in a is neither 'Y' nor 'y' nor 'N' nor 'n' or if the value in b is not a newline, report problems, gobble up any stray characters up to the newline (or EOF), and then resume. Report status via printing as well as exit status. Example runs: As noted in the comments below, one of the problems with scanf() is making sure the behaviour on error is as intended. It is often easier to read a whole line into a buffer using fgets() or POSIX getline(), and then parse the data with sscanf(). 
c-11-7	X	C: How to get string input with space in a structure in following code? I just ended up writing these codes. It is a structure of data which is supposed to be written in the FILE. I want all the strings to be entered by the user with spaces in between. I used fgets(), but fgets() produces a newline in the time of reading the file. Any way to do it? And please explain if any buffer overflow occurs. Thank you. 
c-11-8	X	What's the names for the variables that come up in blue in my C IDE Such as TRUE or FALSE, but I'm am using some example code and they have other variables that are used ie WFStatus There are not #define because when I use that the variables come up as black 
c-11-9	X	Creating struct using pointer Im working on a program that creates a structure with functions for adding and displaying new nodes. I have a function called "add" and I use it to create new nodes and send them to struct->next but whenever I try to run my function "displayData", the function says that my structure is NULL/empty. Here is the code. When i use displayData, the output is. You have to pass the head node by reference. Otherwise the functions that change the list will deal with a copy of the head node and the original head node will not be changed. For example And the function can be called like 
c-11-10	X	The text file cannot be found The error says no such file or directory i moved the file to the project folder } I guess you really need help debugging why this is happening to you. Try adding some more code to your routine to help you determine what is going on. One thing to try is to call getcwd. This should report to you where your program thinks it is running from. You report you get the following output: cwd: /Users/ahmedhossam/Library/Developer/Xcode/DerivedData/assem"Œ"‹bler-doinswpyuiekhhe"Œ"‹mczblkainroaw/Build/"Œ"‹Products/Debug `Ö¿_\377 Start with that first, and I am guessing the next steps will become obvious to you. The reported current working directory (hence, getcwd) is not your project folder. You can copy your file to that strange directory, or you can use chdir to change your working directory to be your project folder, or you can specify the absolute path to your file as suggested below. You can avoid the problem altogether by specifying the absolute path to your file. 
c-11-11	X	Reading a file, and creating a string array from temporary variables The ultimate goal is creating an array of strings from a file. So I have a file that I need to get temporary variables from temp1, temp2, temp3, etc. I wont know how many are in advance. My first thought was to create a normal string from the variables I do find using strcat then splitting that using tokens. I thought I could bypass this by just adding the string normally. At this point the number of variables are right, the issue is when adding to the array tempHeaders. the entire value of the array will be whatever the last word of the file is, i.e. if the lastword is out. tempHeaders i - n would all be out. Any ideas? Thank you I've edited out feof from the while loop and changed to "while(fscanf(inputFile, "%s ", readIn) != EOF){" sample input would be sample output at this time the prints should be temp1, temp2, temp3, etc... I made a working sample to do what I believe you intended to do: I tested the code in bash on cygwin (on Windows 10): Notes: I found a realloc() in OP's code to resize the array for variables (tempHeader in OP, vars in mine). What I didn't find &ndash; allocation of memory for variable names itself. I used strdup() for that. I could swear I've always used strdup() in the past (with #include <string.h> for the proper prototype). However, gcc complained and I found: As all functions from Dynamic Memory TR, strdup is only guaranteed to be available if __STDC_ALLOC_LIB__ is defined by the implementation and if the user defines __STDC_WANT_LIB_EXT2__ to the integer constant 1 before including string.h. in cppreference.com I just made my own version &ndash; it's not too complicated. strtok() is such a function... Hmmm. It's very old and has limitations which makes it dangerous under certain circumstances. (E.g. you shouldn't use it in threads.) However, these concerns aside, it does perfectly what is needed (and there is no multi-threading in this code). I used a fix-size input buffer char buffer[80]; to keep the sample short. In a productive project, I certainly would do something more complicated to be able to read lines of "arbitrary" length &ndash; and I certainly would need much more code for this. In the expected output of the OP, there are no duplicates of variables. However, the code sample does not provide any code which tries to prevent it. Thus, I didn't as well. To do this, the following code had to be inserted (before the one and only occurrence of ++nVars;): The provided code does not free() the allocated memory. As is, this is not a problem &ndash; the OS will make this job after leaving main(). However, a "clean" solution would be to clean the vars explicitly by: With the recommended change of 5., the output is: Live demo on ideone 
c-11-12	X	linked list removing lines and changing the location of the head I'm trying to implement the function deleteTB which works as follows. I have included my implementation of newTB and struct as well. Delete TB basically deletes the from position1 to position2. However, in my implementation, I can't seem to change the head due to how I wrote out my struct (really should have considered this case beforehand). As in, I must maintain the first node in order for it to work properly. In cases where its deleteTB(test,0,2); if I connect [world]->NULL, it returns back the [hello]->[goobye]->[world] since I can't change the head. I have other functions implemented using this struct implementation. 
c-11-13	X	Am I allowed to pop arguments from the stack? When writing a C function that is designed to be called from lua, I know I can use functions like lua_tointeger etc. to get the argument I require. These function however just read values from the stack, they don't pop it. But in my case, one of the parameters the C function gets, is an object I want to register in the registry. I need to call luaL_ref to save the argument, which however pops the value from the stack (and so, it behaves differently than lua_to* functions. So, do I need to push the value back to the stack to avoid problems? I tried both with and without the call to lua_rawgeti and it seems my application never crashes anyway. 
c-11-14	X	im trying to get the combination (probability) of 2 numbers this function return right answers for some cases and wrong answer to others. can anyone help me please is there anything wrong with this function?! Since int comb is int you are returning int! It does not matter that you are suppose to return unsigned long long int first. The result of the devision is rounded to int value, precision is lost. 
c-11-15	X	Freeing a structure containing void * I came across this code implementing a queue the node is free'd in this way Why is the node casted to void *? Should't have been just free(node)? And since I'm working on another structure : Should I cast the pointer to the malloc'd structure to void * too before freeing it? The cast is useless in this context, c auto-promote any pointer to void * in a lot of context(not for stdarg for exemple): is equivalent to: You are quite correct that casting to void* is gratuitious. And as it doesn't clarify anything for fellow programmers either, it shouldn't be there. Naturally, that's the case for both examples. 
c-11-16	X	scanf and printf 10 numbers in array only with INTIGER POINTERS //cant use intiger rather then A[]. +1 more I have this assignment: Write a C program (main function) which first reads 10 integers from the user inside an array A[10] and then prints these numbers on one line. Apart from the array A[] you can use only integer pointers in your program. No other variables are allowed. My attempt is this: But even compailer is not giving any error, exe is shutting itself. I hope someone will help me to fix it and also to understand my mistake. I have another task that is to write the following C function: int count_interval( int A[], int *last, int lower, int upper ) which returns the number of elements of A which are larger than or equal to lower and smaller than or equal to upper (lower â‰¤ A[i] â‰¤ upper). The function does not receive the size of the array, instead it receives a pointer (last) to the last element of the array. main function should print The number of elements of A which are in the interval [10, 20], The number of "5"?s in the first half of A, The number of elements in the second half of A which are larger than 50. This is what I did: Your variable i is not pointing to anything. You should really do something like and test for I<&A[10] But it's a crappy, contrived question. If you need to accept 10 values, then just do it in a way that makes sense. Here you are.:) The program output might look like Or the functions input_array and print_array can be defined using only pointers like In this case they should be called like for example and As for you code then apart from syntax errors like for example this already these statements lead to undefined behavior because the variable i is not initialized and has an indeterminate value. Also it is unclear why you are using the magic number 11. And in any case you are using the subscript operator instead of pointers. In fact all what you need in the both assignments is the following loop 
c-11-17	X	How can memset be called with memcpy as the first argument if memcpy doesn't actually return anything? I'm attempting to port some libc code to Rust. Specifically, the __tcgetattr() function found in this file. There is only one section that I'm having a problem with. I'm confused by what memset is doing in the first logic statement. From what I remember, memcpy doesn't actually return anything. It updates the value passed as the first parameter. I can't find any information on __memcpy, but I'm assuming it's similar. If so, why is memcpy being passed as a parameter when it doesn't have a return value? Maybe not an exact answer to your question, but, there is libc crate at crates.io. I searched in the documnetation for x86_64-unknown-linux-gnu and it seems the tcgetattr() function is already implemented. On that page you can also click on [src] and see how it has been implemented. 
c-11-18	X	Segmentation fault when accessing strings from linked list I am trying to write a program that counts how many times a word is used in a text document. To do this I created a function called wordList that creates a linked list with a node for each word. Unfortunately, whenever I try to read a word from the linked list with printf there is a segmentation fault. I believe this is because the linked list is not actually copying any of the words. I am wondering how I can resolve this issue. At the moment I do not know how to proceed. Thanks:) 
c-11-19	X	C - parent performing simultaneously with his N children I am developing a project for an assignment and we must fork 10 children processes and let them to their specific tasks. Meanwhile the parent needs to do specific actions every 5 seconds simultaneously with the execution of his children. What is bothering me is that I know that the parent needs to wait for all his children to process before doing tasks but when I am forking multiple child through a for cycle the action that the parent makes are repeated for 10 times (as 10 is the number of forks I need to make). Here is my code: What I would like to know is if there is a way for the parent to do his task simultaneously with the execution of his children (not before or after they have completed their own execution) but outside of the cycle so that is not repeated 10 times. Thank you in advance for your time. 
c-11-20	X	SPI ioctl hangs when length is 256 Not sure if it's a C question or something with the driver. I'm having issues sing the ioctl for SPI transfers? I'm on a yocto linux device using the spidev driver. I'm only having issues if the buffer length is 255, 256, or 257 bytes. The program hangs and cannot be killed, even with a 'kill -9' command. Any other length works fine and the transfer is successful. This is the call, pretty straight forward. I can't understand why the length field would cause it to hang but any suggestions are appreciated. 
c-11-21	X	Matrix Exponential [Multiplication - C Code] I'm currently developing a function to calculate the matrix exponential. For that, I need a function that multiplies a X matrix n times. The code below gives good results for small values of n, but when increasing this parameter, the code produces wrong outputs, probably due to the large numbers generated. Is there any solution to this, or another way to compute the matrix multiplication? EDIT: The Matrix M is statically allocated. Code: 
c-11-22	X	Adding attributes to a symbol (SYMSXP) object in R's C API Consider the following function: Function do_work is used as follows: It adds attribute a to symbol name and defines the symbol in environment envir. Attribute a is added to return value y. However, it is removed from variable x defined in environment x: How can I define a new symbol in an environment while keeping all attributes attached to the symbol? Update The issue seems to be due to the fact that symbol name is defined in environment envir by the same symbol. Consider the following function: Function do_work2 is similar to do_work except that it defines symbol name1 by a different symbol name2 in environment envir. If we use function do_work2 with a different symbol for name1 and name2, then the issue seems to be solved: In my application, it is, however, necessary to have name1 and name2 to be equal. 
c-11-23	X	How to convert c/c++ callback functon to delphi I convert above definetions like this: I know C/C++ dll function converting to Delphi, but callback is new for me. Are my definitions correct? Your Delphi translation has some errors in it. Try this instead: The most important difference from your code is TPaymentResultCallback is not declared as of object. You can't use a Delphi-style method pointer as a C-style function pointer, which means you can't use a non-static class method for your DLL callback, at least in this example. There is a simple workaround, though - store the desired method pointer in a global variable, and then use a private callback function to invoke it, eg: Needless to say, this won't work if you need to have multiple classes calling ARPaymentItemCredit() at the same time, thus requiring the DLL to call different methods each time. IF the DLL provides a way to associate a user-defined value with the callback (and your example appears to not have that option, unless there is a separate DLL function for that purpose), things get easier. You can simply pass (a pointer to) the actual method pointer as that user-defined value, and then your private callback function can invoke it directly. No global variable is needed, making it re-entrant for multiple events to run in parallel. But that is a big IF. 
c-11-24	X	How to fix my code? POSIX message queue I have to write a program with two functions (client and server). In arguments, when we run a program, we type the name of file, the client function sends this name to server, the server reads the contents of the file and sends it back to client. Finally client prints that content in the console (stdout). In the program we have to use a mq_open() function which creates a new POSIX message queue or opens an existing queue.To send and get data we use accordingly mq_send() and mq_receive() functions. I wrote the code which is below but it doesn't work properly. It prints nothing on the screen and when it starts up it hangs (there is a cursor waiting to enter text from the keyboard ...). Anyone knows how to fix this code? I don't know where is a mistake. In addition, open queues should be closed, I know we need to use mq_close(), and finally mq_unlink(), but I do not know where I nedd to do it - in the main function or at the client and server functions? Thank you in advance for help. Ok, I little bit fixed my code. Now it looks like this: but it doesn't work properly yet. The file has been read and the content has been displayed in stdout but after that the program is still working - the cursor is flashing, but I can't write anything. We have to use CTRL+Z to stop a process. Maybe I should create the queues in client and server functions or they are not colsed properly? Does anyone know how to fix it? 
c-11-25	X	About runtime error I have the following code snippet: This was asked to us by our professor some time back in the exam. What would be the output of this program? As per my understanding, it should work because I am just creating two pointers and then using strcpy() to copy string literals into it. However, on running it on Ideone, it leads to RunTime error. Could someone please help me out? Thanks! 
c-11-26	X	compiling in Visual Studio vs. compiling with cl in the command line I have a script for testing C programs in a university course. I compile the students' files using the Developer Command Prompt for VS2015 by simply running the command cl file.c. However, I found out that in some (pretty rare) cases, I get different outputs for those programs comparing to running them on VS2015 (we guide our students to check their programs in that IDE). After some investigation I found that it happens when I include a header (.h) file (see the code example below). Is cl actually the same compiler that VS2015 uses? if it is - then how come I get different results. If not - what command should I give in order to get similar results? Code example - a program that runs a functions that should evaluate a math-string. The evaluation is done from left-to-right, regardless of the ordinary math order precedence: test_data.h test.c note that mathString1, mathString2 are identical. The output I get compiling with cl: The output I get when running it in VS: VS runs the same cl.exe compiler as you get from the command prompt, however building in VS will almost certainly pass far more command line arguments. Using "msbuild" from the command line would produce the same build sequence that VS would use. 
c-11-27	X	Shortening the working code Hi there. As this code is not in English, I will explain it first: -Creates ten numbers in an array between 0 and 100 as student grades. -Calculates the largest number and average value of these ten numbers in the array. -100, the largest grade, is subtracted from the largest number in the array. (e.g 100-96=4) -New value (which is 4 in this case, explained in example above) is added to all numbers in the array. It's also printed just below average value and largest value. -New values in the array that are unable to surpass the average value are printed down below, which prints a sentence in Turkish that roughly translates to: "%dth student with %d grade has failed the lesson by staying under the average value." The question is, can I shorten this code? Is there a shorter way to make it work? This was the best my friend and I could come up with. 
c-11-28	X	How to properly copy a struct in C I have a struct element and I want to copy the element data (in all fields) to another element. So if this is the struct and this is my copy function : - My Questions : why do i get this error on the malloc ? is this the right way to do it ? I'm going should i use malloc on newMember.path=malloc(sizeof(member.path)) and in all other fields as well ? editing to explain why my question is different from using typedef in struct because the system think this is a duplicate question : Well as i understand in C this are totally different questions. I asked about copying an element and not on typedef :< Thanks malloc returns a pointer to space in memory. You are trying to assign it to a non-pointer type. NewMember already has space allocated to it (in the scope of this function). To "fix" it, change the type of NewMember. struct Node * NewMember = malloc(sizeof(struct Node)); Side note: you're going to want this function to return a pointer, or you should pass it two pointers to struct Node, where one parameter is src and one is dest, similar to the concept of memcpy. I mention this because once NewMember leaves scope, accessing the returned value is undefined behavior. You will encounter issues with the latter part of the function as well--be sure to revise it and search how to properly copy things like strings in C. You should declare the newMember instance of your struct as a pointer, because the returning type of malloc() is of type void* .....then you should assign a pointer to a pointer. By the way you'll need to access the structure members by -> operator instead of the dot (e.g NewMember->name = member.name;) Also, i think you should consider passing a constant pointer to the function, it's better if we are talking limiting memory consumption. so the function prototype could become as : And finally, you have to free the memory you have allocated dynamically using : free(NewMember); 
c-11-29	X	K&R first edition, exercise 1.18 (test in the for statement is ungainly) I could not had any conclusion about what the "test in loop statement" means in terms of programming. Is it about the tests in loop brackets or in curly brackets which are iterated by the loop ? Exercise 1.18 is here: Exercise l-18. The test in the for statement of getline above is rather ungainly. Rewrite the program to make it clearer, but retain the same behavior at end of file or buffer overflow. Is this behavior the most reasonable? As it follows from the comments it seems the for loop should be rewritten to make the code more readable. I can suggest the following solution substituting the for loop for a while loop. After rewriting the function I see a bug. The variable c must be initialized and the first sub-condition in the while loop also must be changed. So the function can look for example like Here is a demonstrative program Its output (if to run as a console application in Windows) might look like 
c-11-30	X	How to disable only one key? I had a task to create a program in which one key is blocked after pressing three defined ones ( in my case left ctrl + right alt + F1). Can someone show or say how to realize my task without using hooks? Or can someone tell me how to register the hooks in my program. That's actually what I did: It's not even a lock, but nothing else could come up and realize. I saw the codes with different using hooks, but for locking only one key-no. ALl code: { } 
c-11-31	X	[C]: When a pointer to a pointer to a struct is passed in a function, why can't it change the elements of that struct? This is the error message I get on running the code: error: member reference base type 'struct Node *' is not a structure or union newNode -> next = *a -> next; error: member reference base type 'struct Node *' is not a structure or union *a -> next = newNode; Please be as descriptive as possible as I'm a beginner to C :) means but you want 
c-11-32	X	Simple sdl game very slow while cpu at 1.2% I wrote a simple 2d tile based game and ran it on 2 computers. On comp1 it's very slow, on comp2 it's lightening fast. Comp1's cpu is a little slower, but it can play other sdl games (even inside emulaters) and simple 3d games, fast enough. So I ran the game on both computers using only cpu rendering: both ran at the same speed. Then I switched to gpu rendering and the 2nd computer went really fast (200+fps) but the first stayed at the same pace, around 20fps. So I assumed either the hw acceleration is not working on comp1 or the cpu is clogged with my calculations. I logged all the error handling and can confirm both computers support the hw acceleration and the texture sizes (i know this for a fact because the cpu bound version of the game has no flip and so the character always faces the same way ;) So then it has to be a slow cpu on the first computer, right? But when I check the cpu stats the game only takes 1,2% cpu, and overall load is around 2% cpu So the cpu is sitting mostly idle while my game crawls along :( The game is a few 1000 lines of code now, so here are some of the statements that I think pertain to this problem: Main game loop: Frame rate limiting in GameEngine_Tick: create renderer: Creating textures or surfaces: Right now you're only processing a single event each frame. Used to be SDL could only buffer 128 events before dropping them, nowadays I think they're up to 64k. So if, for example, you have a high-report-rate gaming mouse (500-1000 Hz sampling) your event queue will get backed up far faster than a regular mouse (125 Hz). Same for any other event type SDL can generate; some systems will have different event generation rates than others. You want to process every event in the queue before rendering a frame: 
c-11-33	X	OpenSSL shared option purpose and useage? I have added a custom symmetric key cipher in OpenSSL for a research project which will be used by an web application. Now, I want to compile/make and install the latest openssl in my ubuntu system. I am just confused with the "SHARED" option of OpenSSL. What exactly this is and when should it be used ? Although, I have read its official description "Build a shared object in addition to the static archive. You probably need a RPATH when enabling shared to ensure openssl uses the correct libssl and libcrypto after installation." but I am unable to understand the meaning. 
c-11-34	X	need to write a program that receives very long number in a weird format I need to write a program in C which receives: a+b= (while a,b are 2 numbers that can be longer than int type or even long long type. Input example: 333333333333333333333333333+3333333333333333333333333=) and the program needs to return if the sum %3==0; So how do I do that? I mean, how do I receive such input using scanf? The rest is not a problem. Well I guess you are not getting the problem. Rather getting the input is easier but processing it is not. So no type would be big enough to accurately hold the value - these are large. Why not store it as string? You can store it as a char array and use fgets for that (this is only if you want to print the number otherwise not needed). You can use getchar() also and do the sum as shown in the proof here. After doing it, just do one thing - check each digit-char and then calculate it's sum mod 3. That way you will get the value of the result and keep it adding. (The resultant mod sum tells you about the divisibility). That is what you want exactly. What I meant is? Rules: Example code The remainder of a number divided by 3 equals to the sum of its digits modulo 3. Once you calculate the remainders for the two numbers (not need to represent each number's value), sum those. If result modulo 3 is zero, the sum of the number is a multiplication of 3. 
c-11-35	X	Returning NULL value from a function to a pointer in C I have a school assignment where I am supposed to create three functions. The functions are printFirstWord(), skipWords() and printWord(). Albeit not perfectly written, I have managed to make the printFirstWord function work and the other two functions mostly work fine. However, in skipWords() I am supposed to return a pointer value of NULL if the amount of words that you wish to skip is greater than the amount of words in the string you input. This is my code: Initially my problem was that the program constantly crashed but I added the last part of the printWord function and it stopped crashing. I expect this output: This is the output I am receiving: Pointers are my weak side and I feel like I have missed something crucial, I have been looking online and I haven't found any solution that fits me yet or atleast that I feel doesn't fit me. There are few bugs in your code. Corrections would be Another is And the last Explanation for first one would be - you wont check past the end of the string. Otherwise you had undefined behavior. There maybe cases when you reach the end of the string but still won't get a space. To avoid that case you need to consider the \0 case too. If the words > wordCount then only you should throw the error. If they are equal then it should print the value. This loop in skipWords is the problem. It'll traverse through the string and beyond because you're not checking for the end of the string. Since the only way out of the loop is for it to find as many spaces as you've passed in as words, it will always return NULL. Arguably wordCount should also start at 1 since if there are no spaces in the string, you'll always have at least one word...unless the string is empty. Your algorithm in skipWords() is broken, I will implement your function by changing the algorithm and change int to size_t: We beginners should help each other.:) Here you are The program output is As for your code then you usually do not check the terminating zero as for example and ignore cases when several spaces follow each other. 
c-11-36	X	Cython wrapper for C code - Python kernel crashes when object is created a second time My first Cython project was to create a wrapper class for some C code. The project is based on this example. I integrated the wrapped c-code in hello.c and it works fine. I can generate an object in Python and call the functions I integrated. The only problem I have is that the Python kernel crashes as soon as I create the object with the same name a second time. It is also not possible to delete the object with del object and create it again. When I delete it the dealloc function in my cython class seems to work fine. I think it is a general problem that happens when C-code is wrapped with cython. Is there a approach to deal with this? For example to build something around the wrapped C-code to encapsulate it in order to deallocate everything that is created within the C-code? 
c-11-37	X	Random HardFaults - STM32F4 - FreeRTOS I have a board with STM32F4 running FreeRTOS (3 tasks on it), and i'm getting a HardFault every 15-50 min of use. My hardware: 3 Encoders, 6 Analog In, 10 digital in and 3 PWM output for DC motors. At start, I thought was some StackOverflow, than I implemmented uxTaskGetStackHighWaterMark(); for each task and checked that it's not it. I then implemented some HardFault handlers: And from this implementation, i got those results (each one was a HardFault, sometimes the PC was 0), that appear to be very random (to me): Regards, 
c-11-38	X	CPLEX C API retrieve variables type Is it possible (using the CPLEX C APIs) to retrieve the variables type (CPX_CONTINUOUS, CPX_BINARY, CPX_INTEGER, ...) of a model not handled by me but directly built from an .mps file? Yes, you can use the CPXgetctype function. Here's the example given in the documentation link: To get the number of columns use CPXgetnumcols. 
c-11-39	X	Any built-in function to chanage case in C? How can I change case in C without implementing function ? Is it possible? e.g hi==> HI 
c-11-40	X	Why does SDL2 have some extra delay? SDL2 seems to have a strange behaviour that I don't think SDL1.2 had, concerning event loops. When executing a program made with the following code, there is an extra delay that makes it really slow. For example, when clicking on the button "escape", it takes up to 4-5 seconds before the program closes, whereas it should take less than 1 second, since the delay is fixed at 1000ms. When using a printf in the loop, I noticed that even though the loop is working, my input is not considered before a certain amount of time. Why is there such a delay? 
c-11-41	X	How would you convert alpha characters to n string to uppercase in C? This is what I have so far. I'm just trying to understand how to implement this function. It seems that OP wants to convert a string to upper case. Now here somehow OP messed up the assignment part. The code can be boiled down to assigning uppercase characters to the string passed. But here, the code is doing something that compiler complains about. invalid conversion from 'const char*' to 'char'. Well we are trying to assign an char* to a char so it complained. The whole code can be simplified though with few thoughts. We will write a module that will convert a string to all uppercase. That's it. Then we will test it with "hello" or some string. Use of your putchar was right. So this will work with added feature that it will now go on printing too. (You decide if it's feature - because simply the use will not be that useful other than printing it - always printing whatever is given to the toupperString is not a good idea). You have some suspicious use in the function also. For example the return value of it. Why returning the \0 character? Is it needed? If the answer is no then just make it void return type denoting you are not returning anything. Also as array decays into pointer the char array will be changed and you don't need to do anything to return it. As you are basically modifying the original array of characters. Well we can write it more concisely like this as Your current function has the basic premise of what you're trying to achieve already, but suffers from a number of problems. Firstly, calling it toupper is no doubt giving you headaches because you're implementing the function using the pre-existing toupper function. Your function needs to take a string and then return the modified string, but the existing toupper is for taking and return a single char. Notionally, since you're modifying the passed in string, you don't need to return anything, but it can't hurt to return it. Secondly you're calling putchar for no readily apparent reason. You can leave that out and if required, print the updated string in later parts of your code. Thirdly, you're returning s[i] which is just a char and given that i has been incremented the length of the string would be pointing at the terminating NUL character. You also have the spurious line s[50] = "hello"; which is setting the 51st character of the passed in string to some value, which won't be any of the characters in "hello", but instead will be one of the bytes of the memory location of the string "hello". If you're attempting to declare s to be "hello", you should do that in the calling function which I've included as an example. 
c-11-42	X	command "dir" doesn't work with libcurl language C I'm trying to send a "DIR" command on an ftp server with the fonction below: Error: 500 DIR not understood QUOT command failed with 500 result when I use the terminal, I get the same error. But if I use the command "pass", then it works image below result Thanks for help. 
c-11-43	X	Return a structure that was created within a function? As stated in the question, is it possible to create a structure within a function, and then return that structure when the function exits? Since the structure is not created until the function is called, I don't know what to put in the prototype for the return value. Any advice/help would be great, thanks. First of all, in order to return a structure from you function you need to declare it outside of the functions scope, so other functions would be able to use it as well. In order to return a structure from your function, you have two main options. Actually return the structre You need to cahnge the return value of the function to be from the type "memData" instead of "void". Then, you can just return that value. For example: Pass an out parameter to the function Another option, which is more reccomended in my opinion is to pass an out parameter to the function, which is a pointer. You need to pass a pointer to memData, and the you can change it inside your function. For example: In order to call the function from main, you should do the following: Return a structure that was created within a function? is it possible to create a structure within a function, and then return that structure ..? No. The return type must be defined before the function body. Yet OP's struct has a variable size and so defining the struct ahead of time fails. A fixed sized struct would work, yet may be inefficient if large. Various dynamic options exist such as creating a struct that contains the size information and pointers to allocated space. This obliges section_to_segment_map() to allocate memory and the caller to insure it is free'd. 
c-11-44	X	Run a task for N second in C I'm trying to complete an assignment for uni and I'm encountering an issue. I want to create something like a "timer" for my program. What I mean is that I want to run the program for 30 seconds, and after those have passed I want to print some stats before closing it. Since it is a process related project I would like this timer to be passed to the child processes as well if possible. Here is some pseudo-code of what I'm trying to accomplish. I tried reading up something on alarm, time and others but I wasn't able to find anything that could help me. Hope you can help me out and thanks in advance. Try to read the man pages of alarm(). check the man page of alarm What alarm returns ? alarm() returns the number of seconds remaining until any previously scheduled alarm was due to be delivered, or zero if there was no previously scheduled alarm. you can set multiple alarm() for N seconds, but not all at a time. Here is the simple code to understand alarm(). I hope it helps you. 
c-11-45	X	Method for obtaining speed up on computer decision in C I'm trying to figure out the algorithms to play Gomoku(5 by 5 version of tictactoe) with computers. In this case, I found that the most commonly used algorithms are Min-max(or Alpha-beta) but these are too hard for me to handles.. So I decided to use following codes which are quite easy to understand but time consuming. It shows how a computers make its reasonable choice. For 3 by 3 matrix, it works pretty well. For 4 by 4, however, it takes too long to leave a next stone. Since the reason of long time consuming is the first three or four decisions, I thought that just making the computer to search for best points only around the human's last choice(point) would be a solution. After the first three or four decisions, above formal algorithm will work well for the few remaining points. How do you think about it? And give some advices to modify the current algorithm. You are trying to solve the entire game tree. On a 3x3 board there are 9! = 362880 nodes in the tree, which is small enough for your computer to handle, however on a 4x4 board there are 16! = 20922789888000 (20.9 trillion) nodes, which is too many to visit in a reasonable amount of time. Consider implementing a search algorithm that can return a reasonable estimate of the current position's score without solving the entire game tree. For GoMoku I recommend Monte Carlo Tree Search. It has been successfully applied to many games such as Go, and in its vanilla form it doesn't require you to write a static evaluation function as required for fixed depth min-max search and its variants such as alpha-beta. 
c-11-46	X	C: Is there something wrong with declaring byte arrays as uint8_t? I'm working on a small networking application that uses byte arrays. Traditionally these would be declared with something like char buf[] = .... This seems to be how it is (still?) done in most tutorials, yet it has the problem that it may obscure what is actually happening, for example when you try to print such an array and forget that not every char is a visible character. Some people have suggested that you should stop using chars altogether and instead use the modern uint8_t. I find that very appealing, mostly on the principle that explicit is better than implicit. So, is there something wrong with declaring these kinds of arrays as uint8_t buf[] = ...? Starting with the introduction of stdint.h header in C99, there is no good reason to continue using char type to represent small numbers. In addition to documenting your intentions better, uint8_t gives you one more important advantage: it guarantees that the byte is going to be treated as unsigned. When you use char you cannot assume if it is signed or unsigned, because this behavior is implementation-defined. As far as inadvertent printing of the buffer goes, using uint8_t is not going to guarantee any protection, because on many platforms it's simply a typedef for unsigned char. 
c-11-47	X	Incrementing pointers to pointers in C I've been going through Kernighan and Ritchie book in C and got lost in pointers to pointers that point to char arrays. Let's take this sample code: Question: How do I print all of the arrays using, say, while? The book tells me (quote): So, this *ptr++ is supposed to increment pointers within **ptr. But When I try to build it in VS it says there's the "lvalue" mistake. What do I misunderstand here? How should I increment pointers stored in **? Am I limited to printf("%s", ptr[i++]) only? To use this you need to terminate your array of pointers; Question: How do I print all of the arrays using, say, while? It depends on how the array ptrall is defined. If the array ptrall is defined like then it can be outputted the following way using a while loop The program output is If the array ptrall is defined as in your question that is like then it can be outputted the following way using a while loop The program output is the same as shown above. As for the expression used in this call then array designators are non-modifiable lvalues. You may not apply preincrement and postincrement operators to an array designator. 
c-11-48	X	GNU guile: function registered with scm_c_define_gsubr: how can i handle an optional parameter? I've defined a guile C function: registered with there is one optional argument. How can I detect if opt_arg2 has been used ? in or The question was answered on the guile-user mailing list: http://lists.gnu.org/archive/html/guile-user/2017-12/msg00045.html citing: Alex Vong From the Guile manual ``6.1 Overview of the Guile API'', For some Scheme functions, some last arguments are optional; the corresponding C function must always be invoked with all optional arguments specified. To get the effect as if an argument has not been specified, pass "˜SCM_UNDEFINED' as its value. You can not do this for an argument in the middle; when one argument is "˜SCM_UNDEFINED' all the ones following it must be "˜SCM_UNDEFINED' as well. Therefore, we can check if opt_arg2 has the value SCM_UNDEFINED, to decide if we have received an optional argument. The code is in the attachment: 
c-11-49	X	C Linked List Head Pointer is changing data value I am writing a custom shell for class. I have the shell working but now I need to keep track of which commands are called by the user in a linked list, and then be able to print out these commands in a similar fashion to the history() command. The program seems to build the linked list fine however upon printing out with history(list) I begin to see errors. After several commands are entered the command and string data values for the nodes begin to change. I have checked to make sure that the addresses the pointers are pointing to stay the same, but somehow the data values are being effected. I have attached an output file of the history command to highlight how the first entered command eventually changes: I think you want temp->string = strdup(s) in createNode(...) instead of temp->string = s you are just shuffling pointer to stack data around, you need to copy the actual strings Your call to getline is wrong. If *lineptr is set to NULL and *n is set 0 before the call, then getline() will allocate a buffer for storing the line. This buffer should be freed by the user program. ... Alternatively, before calling getline(), *lineptr can contain a pointer to a malloc(3)-allocated buffer *n bytes in size Since *n is 1000 and input is uninitialized (points nowhere), getline assumes there is a buffer of 1000 chars available...which isn't. Your call should be: See the comments and other solutions for the other problems of your program. 
c-11-50	X	C function to password match salted sha1 I am using a perl function to generate passwords in sha1 with a salt. Now I have to verify this password in a C program. There are sha1 verifiers like https://pastebin.com/CPC1vYAK but how do I verify passwords with a salt Is there some sample I can copy from First of all, your existing code suffers from a serious security bug. The salt shouldn't be constant. A different, random salt should be used for each password. To change password: To check password: This is still wrong, though. sha1 is far too weak. PBKDF2 with at least 10,000 iterations should be used instead. 
c-11-51	X	Vango-PLC-SDK-API communication between two modules I have two modules which I want to communicate. I want to connect the two modules to my PC, connect them together and communicate using a terminal on PC. That is, the terminal sends command from the PC using the UART to the first module(LBS) which in turn sends a command to the second module(LBD) using the PLC connection between them and finally, the second module(LBD) returns message back to the PC using the UART. How do I register a UART parser to the system and effect communication between the two modules? The code has to be written in C and compiled with Linux, generating a "bin" file to be burned into the programmer(SPI Prober), 
c-11-52	X	A block scoped variable and the activation record I understand that local variables (along with other stuff) are placed in the activation record. And the activation record must exist before the function begins executing. Consider the function below: Looking at this function, it seems that the the variable j might or might not exist depending entirely on the user's input at runtime. In this case, Will the variable j be placed in the activation record? Is this implementation defined (in other words, will some compiler generate code equivalent to j being declared outside and above the if` block)? Or, will j be simply allocated on the stack segment during execution if need be? But, in that case how will j go out of scope after the if block? I could not find much information regarding this in the C11 spec. Thanks in advance. Activation record is also called stack frame, if I am not mistaken. I believe that these are the answers: Q1. Will the variable j be placed in the activation record? A1:Yes, unless optimized out by compiler. Q2. Is this implementation defined (in other words, will some compiler generate code equivalent to j being declared outside and above the if` block)? A2:It is implementation defined. Depends on the compiler and settings of the compiler, but in most cases, j will be in activation record. Q3. Or, will j be simply allocated on the stack segment during execution if need be? But, in that case how will j go out of scope after the if block? A3: No, allocation in C is typically not dependent on the content of the local variable. 
c-11-53	X	Ruby, ffi, and a custom C library I'm trying to create a custom C library I can call from Ruby using FFI. My library will wrap certain libtiff functions with my own code, and the resulting higher-level functions will be called from within Ruby via the FFI interface. I've got test code working in C, that compiles successfully to a .so file. I've got that same code plumbed into Ruby via FFI, and can successfully call simple functions from ruby code. However, when I include libtiff in my C library code and define a function that uses some of the libtiff routines, the ruby code throws errors similar to the following at runtime. My guess is this has something to do with the way the compiler/linker is doing things. I'm very rusty with C... haven't touched it in 15+ years, and I'm not sure exactly what to do to resolve the problem. I'm using, the Code::Blocks IDE, and have my code in a dynamic library project. As long as I don't include libtiff, everything works as expected. Once I do... though the code compiles, I get symbol lookup errors for anything in libtiff.so. Here's my test library module code that generates the above error: Here are the compiler commands AddInt() called from ruby via FFI, works just fine. ConvertTIFF() does not. Any help is much appreciated. UPDATE 1: Here's the ldd output of my custom library: UPDATE 2: Here's the ldd output now that things are working: The Problem /usr/bin/ruby: symbol lookup error: /<path_to_lib>/libtiffconverter.so: undefined symbol: TIFFOpen The function TIFFOpen() used by your ConvertTIFF() is not found. This function belongs to the LibTIFF library. You need to link your project against this library. The Solution: Linking against LibTIFF Add the option -ltiff to your g++ line above, i.e.: You can check whether your just generated libtiffconverter.so actually depends on the LibTIFF library (it should) this way: The following is an example output of the command above: You may also need to add the -L option to the g++ line above followed by the directory where your libtiff.so is located. In order to obtain its location you can do the following: 
c-11-54	X	MergeSort algorithm of 2 predefined sorted arrays. Make 1 sorted array. In C I have a program in which 2 assorted arrays are filled with bicycles. Now I want to make 1 sorted array out of these 2 preset arrays. I could directly think of the Mergesort method, but I still know how to apply it if you enter something on the terminal itself. However, I do not know how to do it with 2 previously created arrays .. Maybe someone has an idea? The function should read this: Bike* bikes1 is the first assorted array of bikes and bikes * bikes2 the second. In Bike * bout the sorted array should be output. In addition to information: In bike the following data are stored Coolness, Wheelsize, Gear, Price. Sorting is according to the first value, so coolness. THIS IS MY ACTUAL FUNCTION it returns the arrays but not sorted.. Output: Output 
c-11-55	X	Adding the crypt() library to a C program in Windows 10 cmd prompt I have written a C program 'hashed.c' which requires the use of the crypt() function to carry out the hashing of various words. I have downloaded the GNU C library from an online source (http://ftp.gnu.org/gnu/glibc/) which contains the crypt library I need along with a number of other libraries. I have extracted all of the contents of the GNU C library to the same directory that my 'hashed.c' program is located in. This directory is located in C:\test\. In my program code I have included the header file #include <crypt.h>: However when I attempt to compile the program using cl DAnew.c I receive an error message saying: Cannot open include file 'crypt.h'. No such file or directory The crypt.h file is located in C:\test\crypt\ and so I have changed the command line to: cl DAnew.c /I C:\test\crypt to directly link the crypt.h file. However I now receive the error: Cannot open include file 'features.h'. No such file or directory. The 'features.h' file it is referencing is located within the same directory at: C:\test\include\features.h Would anyone be able to show me how to correctly link the crypt library (as well as the others libraries needed) to my C program please? I have downloaded the Visual C++ build tools and I am using the 'Visual C++ 2015 X86 Native Build Tools Command Prompt'. Many thanks for your help. cl DAnew.c /I C:\test\crypt;c:\test\include Your compiler knows where to find it's standard includes but does not know where your custom includes are located. It must be informed about all of them. By the way, this is not linking the crypt library. This is setting the search path for custom include files You will have much the same effort when you attempt to link with the crypt library. The above information should be enough to get you started on that path. 
c-11-56	X	Memory corruption after running malloc I am writing a pet project (a sort of single-threaded Lisp-like language interpreter in C), and I came upon the following issue: a pointer is overwritten while malloc() is run. Showing all the code would be too long, but I can share it if necessary. I would like to have some insight regarding how the problem can be debugged. The bug happens during the subroutine that runs a user-defined function: You will get the following output: The pointer scope->vars->tail is overwritten during the call to malloc()! Using gdb and hardware break points clearly showed that the value was overwritten inside malloc.c. As the pointer is overwritten, the program segfaults soon after, both within gdb and in normal run. However it does not segfault when run inside valgrind, it even ends successfully. So here is my question. How would you start to debug this mess? I am asking for advice, and not for an answer. I am far from being a C expert :) I guess I am at fault and this is of course no bug in glibc-2.26 or gcc 7.2.0. I have no warnings on gcc with -Wall -Wextra -Wpedantic valgrind shows some unfreed memory issue. Will fix them before doing anything else. Thanks to everyone's comment, I found the issue. scope->vars was not appropriately allocated (as some said). When using valgrind, I found the following message: My code looked like this: As you can see, the * was missing. This is the corrected version: sizeof(vars) would return the size of struct YL_VarList*, while I want to allocate the size of struct YL_VarList. 
c-11-57	X	error: conflicting types for "˜malloc' I am getting the following error and warning for a script: This is part of a program I am trying to install by using make. I never used C++ befor so please excuse my ignorance. I tried to run the script without the 'include' lines, but this produces other warnings. I therefore also post the entire script. That makes no sense. The code looks almost garbled, it should just be no point in brokenly re-declaring malloc(). Note that <stdlib.h> is being included, so a proper prototype is already present. Also its return type in modern C should be the same as malloc()'s, i.e. void *. This is absurd. You can not do this. Also, is valid, oldschool, and might appear weird to most of the younger bunch of programmers around. malloc allocated requested bytes of memory (if available), and return a void pointer pointing to the address where it is allocated. This is the way it should be: Additionally, before all these pointers are accessed, you'd have to check if there surely not NULL. Like, Plus, I see all the free() calls there, which should only be applied if malloc() didn't return NULL. But, now, do you see redundant code here? Why do you need an additional function call emalloc() if you are doing the lame thing as calling a malloc() and returning the pointer, you could do it here itself. It's just old-style K&R C code. Is just a wrapper around malloc(). I think this is supposed to be a malloc() prototype along with char *p. Although it seems to declare that malloc() returns a char, because is the equivalent of That's one really good reason to never define more than one variable per line. You're not saving lines of code in a textbook. And it looks like a bad mistake, which is why I just say that I think it's supposed to be a prototype for malloc() - it shouldn't have worked at all if it truncated a pointer down to a char as done on any hardware and C compiler I've ever used. And it's that char malloc() prototype that causes you to get the error: conflicting types for "˜malloc' error. Note that you can't simply go around and replace with as that will break things unless you also supply every single call for that function with a proper declaration prior to its use. I seem to remember a long description in one of Peter van der Linden's books for what havoc can come about from doing that. The problem is that this code is old, pre-standard "K&R C" (K&R 1st edition). You cannot compile it on standard compliant compiler. In the ancient days when dinosaurs walked the earth, malloc had the form char* malloc ();. This was before C was standardized and before void pointers were even invented. The sloppy line char *p, malloc(); declares a character pointer p, and then it incorrectly declares malloc as char malloc(). This is likely a bug in the original code. Now when you show this code to a modern C compiler, with the standard declaration void* malloc(size_t size); in stdlib.h, you get conflicting types. Notably, ancient K&R C didn't require a return type or a parameter list, it just "made up" some types if you didn't specify them explicitly. My recommendation is that you throw this source code in the garbage bin. It is ancient and contains absolutely nothing of value. 
c-11-58	X	Nodes lost in linked list merge sort implementation in C This implementation is used to order strings in ascending alphabetical order. I've included the functions responsible for the dividing of nodes. head is the head of the linked list. I believe the mergeSort function is working as intended to divide the list up. See the following ouput: Which clearly shows the initial list, lady apple stone red queen being divided into individual nodes, all accounted for. The problems come when nodes are compared and merged into new lists. For example: Initially, lady is compared to apple. They're merged into the list: apple, lady. Then this list should be merged with stone. However, first, lady is compared with stone, instead of apple being compared to stone. This then generates the list: lady, stone (apple being left behind and not used in a comparison). What should happen, is that apple is compared to stone, then lady is compared to stone, and then the entries are sorted and merged accordingly into: apple, lady, stone. The actual final output is: lady, red, stone. Clearly, apple and queen have been lost somewhere. I'm not sure what the offending code is. An easier (and probably more efficient, especially for large lists) method is to first convert the linked list to an array. Consider this code: Note that I'm using the type char **. The point (hehe) is to point at the data in the linked list. If the data there is more complex that simple chars or ints you avoid unnecessary copying of data. This is much easier to write, and even though it has some boilerplate it does not affect anything. The functions (which you have to write) getLinkedListSize, linkedList2Array and array2LinkedList can all have a complexity of O(n) while mergeSort will be O(n*log n) no matter what you do. Also, take into account that this method is MUCH more friendly to the cache. The only downside of this is that it requires a little more memory, but it is not by much. The array will be at maximum the same size as the list. The three functions I mentioned are trivial to write. Here are two of them: Your code is almost perfect. You are merging two lists and returning it to head. But you are not returning that exact head to previous mergeSort calls. In your main function where you are calling mergeSort, use head = mergeSort(head). The code should work now. The slow/fast method (Floyds algoritm) is not needed. It is also counter -effective: the sorting will always take N log(N) operations, even on a sorted list. You can take advantage of the existing order by only cutting out the out-of-order elements, and keeping the rest. Then (recursively) sort the unordered part, and merge the two parts. 
c-11-59	X	call matlab ifft from c I have a short question: I would like to call the matlab fuction ifft from c code ï¼ˆinverse fast fourier transformï¼‰ I was trying to understand the matlab api for c , but I could not find any example on how to pass the arguments or how to call an internal fuction of matlab within c code any hint will be greatly appreciated ! Julia You can generate C code from a script using the MATLAB Coder app. That should make the ifft callable. The ugliest way to do it would be to exec() matlab and re-ingest its output. Oliver's answer is certainly the cleanest and best route though. 
c-11-60	X	C array of values, pointer segmentation fault In my main() function I create an array, find the address of the highest value and increase the value at the address: The getAdres() function looks like: Without making the get address part into a function it works but in the current format (*pi)++; is giving me a segmentation fault. What is going wrong? You have the wrong return type, make it: Also make sure it does in fact return a valid pointer. If the entire array is 0, it will return an uninitialized pointer which is a really bad idea. Make it: to make it return a pointer to the first element, in that case. Also you commonly see: and then starting the loop from 1, for cases like this. Passing the length of the array is also very common in real code, hardcoding that kind of knowledge inside what could be a generic function makes things harder to understand (and kills code re-use, of course). The function getAdres has the return type int instead of int *. But in any case its implementation is bad. It uses magic number 5 and moreover an arbitrary array passed to the function can have for example only negative values. The function definition for example can look like And the function can be called like 
c-11-61	X	PC Lint info 825 suppress is not working using fallthrough comment I have a code where am getting PC Lint info 825, even though I'm using /* fallthrough */ comment. Tell me if any of my usage is wrong. Example code: That's the wrong comment content. Try: See the huge text file for details. 
c-11-62	X	Generic preprocessor macro enabled check Is there a way to define a macro checking if another macro is defined and non-zero or respectively not defined or defined as zero? I recently ran into the problem that different people define their macros in a different way if they are used as flags. While compiling some define their macro without a value (eg. -DDEBUG) and some set it to non-zero (eg. -DDEBUG=1). I actually found code similar to it: (defined(macro ## _SET) && (macro ## _SET)). The solution for this to work is the concatenation ## which prevents the macro expansion. Is there a way around it? Environment GNU Arm Embedded Toolchain (arm-none-eabi-*) with GNU ISO C99 (std=gnu99). Quoting some GCC docs: If the defined operator appears as a result of a macro expansion, the C standard says the behavior is undefined. GNU cpp treats it as a genuine defined operator and evaluates it normally. Meaning, you can't generally hide the defined macro test within some nested macro expansion, unless you rely on compiler specific non-standard extensions. So, the best I could come up with involves a two-part test (https://stackoverflow.com/a/13262601/5265292 gave me the basic idea): Complete sample: As pointed out, you might be able to utilize the GNUCC specific macro extensions to have the defined test within the ENABLED test, but I don't have GCC and the time at hand to check this aspect and I prefer portable solutions. You can stringify the macro name (if undefined) or the expansion (if defined) and then examine it. This program: prints: Apple LLVM evaluates the conditions at compile time, so you could use if Enabled(foo) { code"¦ }, and the code"¦ would not be included in the executable if foo were not enabled. (However, it must be syntactically and grammatically correct.) If you want more sophisticated distinctions than just undefined, blank, 0, or 1, then you can write an arbitrary routine to examine the string and return a result. Of course, the compiler is less likely to optimize that. This provides a preprocessor test for the cases where a macro is undefined, defined but blank, defined to be "0"?, or defined to be "1"?. It does not distinguish other definitions for the macros (e.g., a macro defined to be "2"? will be reported as not enabled): the output is: Additionally, we can combine it with grek40's idea to generalize it to undefined, defined but blank, and defined to strings that evaluate simply in place of x in 1 - x - 1: 
c-11-63	X	Why might need include a source file that? I am to port h264 codec in an embedded device. The ffmpeg source code uses the following construction: Why do I need to include such a source file? Isn't that used only for the header? the "template" suffix hints at the fact that the code depends on some preprocessor directives. I checked the source and at the beginning there's note that you have #define CHROMA_IDC 3 before including this file. This tells the preprocessor to use define MCFUNC(n) FUNC(n ## _444) in the included file. the source could have been left alone in the makefile but with a -DCHROMA_IDC=3 directive, and in that case, the template cannot be reused for other source files because of multiple redefinition (the functions in this source file are static to avoid multiple redefinition if the template is instanciated more than once) Why using a template? probably for performance issues, to avoid a call chain and some tests to branch on the required behaviour. ffmpeg cannot afford to be slow on the encoding functions. 
c-11-64	X	Exception thrown when using dequeue method from queue I am trying to make my queue library and when I implement the dequeue method, an exception is throw "0xC0000374: A heap has been corrupted (parameters: 0x77475910)." This only gets thrown AFTER I already remove an item from the queue, the item is returned successfully however the first element is not removed, here is how I wrote the code : and this is the method: You pass q by value so even though you make q point to next element inside dequeue(), outside dequeue(), it is still pointing to freed memory and using q will crash. Pass a pointer to q to dequeue For starters this declaration is invalid. It should look like The function dequeue deals with a copy of the original queue pointer because it is passed to the function by value. So this statement in the function does not change the original pointer. You should pass the pointer by reference. For example 
c-11-65	X	How to extract prime numbers from an array list without loops I tried to write this code: which recieves an array with numbers, i is for index running down arr[num]/2 to 1, if it it's not prime, return 1. and then procced to down to the next number in the lower index in the array. But this function is giving me a run-time error. It would be easy with loops, but it's forbidden. EDIT calling this function in the main would be like this: prime(arr,number,numer/2); 
c-11-66	X	Receiving data through winsockets in C I am trying to make a translator in C using Google's translator API. So far i've been able to create sockets, initialize them and connect them. I've sent the url that is supposed to be translating the text, but the reply size is zero bytes. The objective is to perhaps receive it as a text file or just a string. This is the code so far. Two problems. Firstly, you can't just send the URL by itself; you need to make an HTTP request. The best way to do this is often to use a third-party library like LibCURL, but for very simple cases you might prefer to do it by hand. At the very least you'd need a GET line, a Host: header and a blank line. See the HTTP RFC for how to format a request and parse the response. Secondly, if you want to use HTTPS, you can't just send plain text to a socket, there is also an encryption layer. Again, you will need a library. (On Linux I would use OpenSSL or libCURL, which also exist on Windows but there may be other choices there.) By the way, by default HTTP uses port 80 but HTTPS uses port 443. 
c-11-67	X	Lists in Python vs Arrays in C While programming in python 3.6, I came across with some problem in list : This code will obviously give an error : IndexError: list index out of range But in case of c language : Gives the correct output(including garbage value): 2 3 4 5 32764 I wanted to know why are we not getting the value of elements of list in python by using the future values of n whereas in c it is just reverse? In C, an "array" is mainly a pointer to a memory location (nb: this is an obvious simplification, you can read this for more details), and arr[x] will return N bytes from address_of_arr + (N * x) (where N is the size of the array data type). Like all memory access in C, there's absolutely NO check so you can read (and write) just any arbitrary memory location. Note that, as Daniel Pryden mentions in a comment, the behaviour you observe with your C example is called an "undefined behaviour", which means the result is not defined by the C langage specs, depends on the implementation (your C compiler, platform and whatnots), and could actually yield just any result (including a core dump, erasing your hard drive or launching a nuclear missile). Luckily the implementation you tested it with just returns garbage. Now if you really feel lucky, for a bit of fun try writing at this memory location and find out what happens ;) In Python, a list is an object which knows it's length and won't let you try to access items at indexes that don't exist. Where and how the effective list contents are stored in memory is handled by the implementation and is totally opaque to the Python code. Disclaimer : this answer is based on C implementations most commonly found on today's operating systems - the C language spec doesn't specify anything about how an array should be implemented (just how it's supposed to work) so an implementation could as well choose to store array datas on clay tablets disposed on a rubber band and move that rubber band by N positions left or right, in which case my answer would be totally irrelevant... 
c-11-68	X	Server answering client request threw pipes and tubes C Short version : I'm trying threw a request send by a client, awsering him back the result of the expression he wanted me to find. Longer version : For this, I am firstly using mkfifo to create two named tubes : one for the server and one for the client. The client will connect himself to server's named tube and write the request. The server will read and in using a fork will determinate the resultat of message->expression (threw bc). After this, he will connect himself to client's named tube (tube's name = pid of the client) and send back the result. Finally the client printf it. I have already asked how does work fork and bc, with all the redirection we should use. This does work when I'm not using mkfifo in the program (and create the named tube of the server and client before). I think I misunderstanding the correct use of open and mkfifo. I've tried to catch as much as possible errors, but that doesn't help me more. Here the code : -SERVER- CLIENT : When starting the two process, I keep having nothing from the server and the client (no error or sometimes if I'm lucky). If you have any idea to help me work that system, I would be very grateful. I don't necessary need the answer, I really want to understand how does that work. Thank you for reading (please forgive my grammatical mistakes, english isn't my main language). 
c-11-69	X	find function in linked list in c programming I wanna write a program about linked list that gets a number and if the number was equal to the one of the nodes' data , gives the number of that node . like the datas in 3 nodes are and it gets a number like 56 and its equal to the second node's data so the output should be 2. According to the C Standard the function main without parameters shall be declared like Secondly this declaration of the structure is not a valid C declaration. You should write or You have to initialize at least node first with NULL. Otherwise the program will have undefined behavior. The parameter i is not used within the function find. So it may be removed. The function definition can look at least like 
c-11-70	X	Message queue passing old values C I am trying to develop a simple message queue in C but I am running towards some frustrating problems. I have a number of 10 processes that are divided in two groups of five. Each of the processes of this group must speak with only one of the processes of the other group, and to do that I have assigned different keys to the message queue creation (sorry if it is not the best idea but i'm new to C and trying to adapt). My main issue though is that when I run the code the first time if tells me that 'No such file or directory exists" as a mq error. When I run it from this point on the server receives the message just fine, but it receives the 'old' messages, which are the ones that the client has sent the prior execution. I've been trying to look for what to change but haven't come up with anything. This is my code: server.c client.c Hope you can help me out and thank you for your time. 
c-11-71	X	C: converting char value into int I have a piece of code its first C value is in char. its ans is c= -121. Can someone tell me how this ans came? 
c-11-72	X	Print an array created on another function in C Hi i'm new to C language, and i'm creating first functions with array. I created an Array w from another array v, but i don't know in main(), how to print all elements of my array w, and not just the first element. 
c-11-73	X	When size is 64 bits then why shifting left 32 times give a zero why output is 0 when the size is 64bits output 0 is justified only if size is 32bits n may be 64 bits, but your printf() call only expects 32 bits. This is undefined behavior. What appears to be happening in this particular case is that the remaining bits are cut off, and only the apparently low order 32 bits are displayed. Other platforms/compilers/machines might do something entirely different. You can fix that by passing the correct integer type in the format string: The program behaviour is undefined on two counts, and you're on thin ice on another point: Use "%zu" as the format specifier for the sizeof return type. Using '%d' wreaks havoc, particularly if you pass multiple arguments to printf. unsigned long long is at least 64 bits. That doesn't matter in your case but don't assume it's always 64 bits. And the format specifier needs to be %llu. Reference: http://en.cppreference.com/w/c/io/fprintf 
c-11-74	X	Is it possible to modify a C program which is running? i was wondering if it is possible to modify a piece of C program (or other binary) while it is running ? I wrote this small C program : With a Hex editor i'm able to find "0xAABBCCDD" and modify it when the program is stopped. The modification works when I relauch the program. Cool ! I would like to do this when the program s running is it possible ? Here is a simple example to understand the phenomena and play a little with it but my true project is bigger. I have an old DOS game called Dangerous Dave. I'm able to modify the tiles by simply editing the binary (thanks to http://www.shikadi.net/moddingwiki/Dangerous_Dave) I developped a small editor that do this pretty well and had fun with it. I launch the DOS game by using DOSBOX, it works ! I would like to do this dynamically when the game is running. Is it possible ? PS : I work under Debian 64bit regards I was wondering if it is possible to modify a piece of C program (or other binary) while it is running ? Not in standard (and portable) C11. Read the n1570 specification to check. Notice that most of the time in practice, it is not the C source program (made of several translation units) which is running, but an executable result of some compiler & linker. However, on Linux (e.g. Debian/Sid/x86-64) you could use some of the following tricks (often with function pointers): use plugins, so design your program to accept them and define conventions about your plugins. A plugin is a shared object ELF file (some *.so) containing position-independent code (so it should be compiled with specific options). You'll use dlopen(3) & dlsym(3) to do the dynamic loading of the plugin. use some JIT-compiling library, like GCCJIT or LLVM or libjit or asmjit. alter your virtual address space (not recommended) manually, using mprotect(2) and mmap(2); then you could overwrite something in a code segment (you really should not do that). This might be tricky (e.g. because of ASLR) and brittle. perhaps use debug related facilities, either with ptrace(2) or by scripting or extending the gdb debugger. I suggest to play a bit with /proc/ (see proc(5)) and try at least to run in some terminal the following commands (and read enough things to understand their outputs) to understand a bit more what a process "is". So overwriting your text segment (if you really need to do that) is possible, but perhaps more tricky than what you believe ! (do you mind working for several weeks or months simply to improve some old gaming experience?) Read also about homoiconic programming languages (try Common Lisp with SBCL), about dynamic software updating, about persistence, about application checkpointing, and about operating systems (I recommend: Operating Systems: Three Easy Pieces & OsDev wiki) I work under Debian 64bit I suppose you have programming skills and do know C. Then you should read ALP or some newer Linux programming book (and of course look into intro(2) & syscalls(2) & intro(3) and other man pages etc...) BTW, in your particular case, perhaps the "OS" is DOSBOX (acting as some virtual machine). You might use strace(1) on DOSBOX (or on other commands or processes), or study its source code. You mention games in your question. If you want to code some, consider libraries like SDL, SFML, Qt, GTK+, .... Yes you can modify piece of code while running in C. You got to have pointer to your program memory area, and compiled pieces of code that you want to change. Naturally this is considered to be a dangerous practice, with lot of restrictions, and with many possibilities for error. However, this was practice at olden times when the memory was precious. 
c-11-75	X	Passing string array from Fortran to C/C++ DLL and get array with changed values I am creating a C/C++ DLL which accepts char*[] (String array), changes the value in array and return back. My C/C++ implementation: In Fortran (using ifort) I am calling the DLL's function like this: I am able to pass string, integer from Fortran and got changed value from C/C++. What I need is to pass string array from Fortran to C/C++ and get back the array with changed values. How do I do this? Finally made that working. Here is the solution. 
c-11-76	X	Error when calling a function from inside another function in C I have to create a function which simplifies fractions. It'd be great if I could call another function from inside the function, to find the GCD easily. My code is: I get a compilation error on the line Called object type int is not a function or function pointer What did I do wrong, and how do I fix it? You are redeclaring mcd as int. That is where the problem is. It is shadowing the globally declared function mcd(). Now when you call it you are basically trying to use an int variable in the form of function name. Compiler complains that. 
c-11-77	X	A string of codes connected to multiple strings.I have some doubts about the two dimensional array and the for loop. Thank you very muchï¼? This is a string of correct code to connect multiple strings. But I think n should be n-1 in two for cycles. But if you change the n to n-1, you can only enter n-1 strings, one less than I think. Can you tell me where my idea is wrong? Accessing array index out of bound when i=n - this is undefined behavior. So of course indexing should be from n-1 to 0( at max) or 0 to n-1. And also array indexing in C starts from 0. So there are n elements that you are accessing, not n-1. So corrections would be The thing is - you are reading in the n locations having index 0 to n-1 on the array and then you concatenate them one by one and at last all concatenated strings will be in words[0]. You are printing it out. The second loop would be like The idea is no matter what while accessing array indices don't access array index out bound. Here you can simply write it like this as shown in the second case. The thing is here we have ensured that all the indices used are from {0,1,2,3...,n-1}. First determine what you want to do, if you want to take n string and then try to concatenate them then yes you can. That's what is being done here. but a much cleaner way to do it would be that keep a different result string on which you will concatenate n strings. That will not overwrite or change the already inputted strings. 
c-11-78	X	Segmentation error when calling a function I have this recursive function which creates all possible strings from a dictionary and encrypt them so that they can be compared with some saved hashes. Earlier, I had some predefined value for the max length of passwords but I tried to change it with argv[1]. But when I execute my program, I get a Segmentation Fault with not explanation. By the way, all the includes are present as they should but I didn't put them in the post since it is somewhat bugged. Thanks for your time! This is undefined behavior. You are giving wrong format specifier. That's why you get seg fault you are trying to print an int using %s format specifer. It looks for the \0 and then it doesn't. So it accesses some memory which it shouldn't resulting in UB. (And that resulted in segmentation error). It should be Also another major problem is not every control flow of this recursive function returns int. This is a pathway to bigger problem. In case the there is no return value when one is expected the behavior will be undefined. 
c-11-79	X	bridging templates with runtime arguments I am dealing with a 3rd party C++ library which makes extensive use of templates. That makes it difficult to create a C API for it to use it from my framework. Abstracting the problem, suppose the library offers the function: I want to create a C API with the function head: An obvious implementation could be: and do the same also for void zoo(int). This works fine if the range of possible values for i is small. If I want to handle all possible values of i in [1,100], then it becomes exceedingly ugly to write code in this way, as there is lot of repetition. Is there any more compact way to do that, i.e. writing less lines of codes? Perhaps using recursive preprocessor macros? You could use templates internally to generate the necessary code. One way to do this is generate a dispatch table of 100 function pointers, then index it at runtime. c_foo will generate a compile-time sequence of indices and call a helper: This helper will generate the dispatch table and carry out the call: Then you can do the same for zoo: If you find that you need this in a few places, you could abstract out some of the details, or use a library such as Petra, which provides a switch_table to carry out this kind of mapping. Live demo I guess the question is what is this template number? Is it something like an internal buffer size, or more like a command byte? One presumes the average C++ program would only generate a certain few argument values. Perhaps the bast approach would be to enumerate some typical buffer sizes, or command names, and instantiate only those, so if the c code uses your enum as the parameter it will work, otherwise it (fails horribly) asserts. It will be an annoyance to add new entries if they are justified, but you could write a script for it. Another approach may be to generate mangled named stubs, i.e. generate a foo__1() foo__2() etc, perhaps using the boost extended preprocessor to help. Again the C programmer is then automatically restricted to the methods and ranges you have published at compile time. 
c-11-80	X	How can I move to a pointer position directly without using the ++ operator? I'm working with a pointer to a structure. I want to know if is possible move directly to a specific position without use ++ operator. This statement is not working. I will appreciate any suggestion. Well, pointer arithmetic honors the data type!! will get the job done. To elaborate, the above expression will produce a pointer by moving it 5 times, multiplied by the size of type for ds, in bytes. That's the same as &(ds[5]). For sake of completeness, explaining why iterator = ds + (sizeof(dummy_struct)*5); is wrong, is, here, you're essentially trying to move the pointer to an element with index as (sizeof(dummy_struct)*5 which is, well out of bounds. Note please, this invokes undefined behavior!! note below Quoting C11, chapter Â§6.5.6/P8 When an expression that has integer type is added to or subtracted from a pointer, the result has the type of the pointer operand. If the pointer operand points to an element of an array object, and the array is large enough, the result points to an element offset from the original element such that the difference of the subscripts of the resulting and original array elements equals the integer expression. In other words, if the expression P points to the i-th element of an array object, the expressions (P)+N (equivalently, N+(P)) and (P)-N (where N has the value n) point to, respectively, the i+n-th and iâˆ’n-th elements of the array object, provided they exist. [....] and then, regarding the undefined behavior mentioned above, [....] If both the pointer operand and the result point to elements of the same array object, or one past the last element of the array object, the evaluation shall not produce an overflow; otherwise, the behavior is undefined. If the result points one past the last element of the array object, it shall not be used as the operand of a unary * operator that is evaluated. That being said, the printf() statement is also erroneous. You have two conversion specifiers, but supplied three arguments. It's not harmful, but useless/meaningless. Related, from chapter Â§7.21.6.1/P2, [...] If the format is exhausted while arguments remain, the excess arguments are evaluated (as always) but are otherwise ignored. [...] Based on this case, you can directly use Seems that you are trying to make the iterator pointer pointing to 5th element of ds array. But this statement will give you wrong result: The result of sizeof(dummy_struct)*5 will result in the total size of all the elements of structure dummy_struct multiplied by 5, which will get added to the address referenced by ds and assigned to iterator. So, the iterator may point to a memory location which your program does not own. You need to do: Or you can also do: The behaviour of is undefined if you set a pointer beyond one past the final element of the array. You are actually setting iterator to further elements in the array than you think, by a factor of sizeof(dummy_struct)! Don't do that. The language allows you to use the notation iterator = ds + 5;. This idiomatic pointer arithmetic adds 5 lots of sizeof(dummy_struct) to the address iterator. In other words the compiler does the sizeof adjustment for you. That's one reason why pointer arithmetic is so powerful. Finally note that *(ds + 5) is equivalent to ds[5]. I find the latter affords more clarity when working with arrays. 
c-11-81	X	Is it possible to do epoll on accept event? Let's suppose I've created a listening socket: Is it possible to do epoll_wait on sock to wait for incoming connection? And how do I get client's socket fd after that? The thing is on the platform I'm writing for sockets cannot be non-blocking, but there is working epoll implementation with timeouts, and I need to accept connection and work with it in a single thread so that it doesn't hang if something goes wrong and connection doesn't come. Without knowing what this non-standard platform is it's impossible to know exactly what semantics they gave their epoll call. But on the standard epoll on Linux, a listening socket will be reported as "readable" when an incoming connection arrives, and then you can accept the connection by calling accept. If you leave the socket in blocking mode, and always check for readability using epoll's level-triggered mode before each call to accept, then this should work "“ the only risk is that if you somehow end up calling accept when no connection has arrived, then you'll get stuck. For example, this could happen if there are two processes sharing a listening socket, and they both try to accept the same connection. Or maybe it could happen if an incoming connection arrives, and then is closed again before you call accept. (Pretty sure in this case Linux still lets the accept succeed, but this kind of edge case is exactly where I'd be suspicious of a weird platform doing something weird.) You'd want to check these things. Non-blocking mode is much more reliable because in the worst case, accept just reports that there's nothing to accept. But if that's not available, then you might be able to get away with something like this... 
c-11-82	X	read int and char array from file, then resize array I am learning to manipulate arrays. I store element by element data read from file into char and int array in a function outside main() named readInput(). Data read: D E D D E E E D E E E D E 21 32 35 59 58 16 11 29 I attempt to resize both arrays to exclude garbage in the arrays with realloc: My questions: When printing the char array in main(), it contains the right elements but prints garbage at the end of the array. I note it prints correctly at readInput(). What did I do wrong? At readInput() before and after realloc, and in main(), the elements read from file of the int array are correct except they are followed by garbage. What did I do wrong? Output: Print from readInput() - Char Array before realloc: D E D D E E E D E E E D E Print from readInput() - Int Array before realloc: 21 32 35 59 58 16 11 29 -8421 50451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -8421504 51 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 Print from readInput() - Char Array after realloc: D E D D E E E D E E E D E Print from readInput() - Int After after realloc:21 32 35 59 58 16 11 29 -336860 19 -842150451 739749649 37763 4849560 4849264 -842150451 -842150451 -842150451 - 842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842 Print from main() - Char Array (after realloc): D E D D E E E D E E E D E â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? Â² Â² Â² Â² Â³ ÃŽ Â£ ` w Âº Ã‰ Â· y Ã‰ V t â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? â•? Â² Â² Â² Â² and it goes on Print from main() - Int Array (after realloc): 21 32 35 59 58 16 11 29 -33686019 -842150451 874388096 31426 6946712 6946416 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 -842150451 and it goes on Context of the program: The read data is stored in a function outside main() named readInput(), char by char/int by int into a char and int arrays respectively that are declared and initially sized via malloc in main(). After storing data in the arrays, I need to re-size the arrays to the size of the data read in the file. Finally, to verify the array is also accessible to main , write char by char and int by int the arrays both in main() and readInput(). Thank you for your help. Edited corrected working code, thank you! First of all, warnings are not to be ignored. should have raised one (CLang even gives an error!) because it is not conformant C. It should be: Do not declare argv if you do not use it and avoid using argv for anything else than command line parameters. Next: for (int j = 0; j < charArray!=NULL; j++) should also raise tons of warnings. You first compare j and charArray (already undefined behaviour). After seeing the result, j < charArray happens to be true (value 1 in C) and you compare it to NULL which is a void *! 1 != 0 is always true and you get a never ending loop. for (int j = 0; j < charSize || readValueArray[j] != NULL; j++) should also raise warnings: readValueArray[j] is an int and NULL is a void *. In addition, it is no use testing readValueArray[j] to 0 because you have never initialized the allocated memory. Finally resize does not remove garbage from the array it reallocates the array with the asked size somewhere in memory, and if you access past the allocated memory you just invoke Undefined Behaviour. There is no way in C to know the size of an array, it is the programmer's job to care for it. So you have 2 possible ways here: either pass the actual size of the arrays as an (output) parameter of readInput: or use a special value (for example 0) as an end marker. And please pay attention to warnings! In the body of while (fgets(pbuffer, bufferSize, *inputFilePointer) != NULL) you used same variable j as array index for both readCharArray and readValueArray ,i think this will crate problem during assignment since it get incremented during each assignment some index values won't be used. use two variables separately for readCharArray and readValueArray. 
c-11-83	X	How to correctly use fwrite? So I have a char* called bufptr that is of size 512. Within the first couple of spots is the name of the file that I will be reading from and everything else after that is data. ex. char* bufptr = {'f', 'o', 'o', '.', 'c', '\0', ...} I did not initialize it like that but that is the general idea After this I store the name of the file into a different file using strcpy ex. After that, I open up the file What I am having problems with is the fwrite portion. I tried writing fwrite(bufptr, 1, 512 - strlen(destString), fp) but instead of I got Ã¾================================================ How would I correctly call fwrite so that I don't run into this issue or is it because I am not skipping over the null? Or does string have something before or after the null? edit: I added a loop to check over bufptr and got this as the output this was the loop I used Here is the server code Here is the client file bufptr is not pointing to the content of the buffer,Because of bufptr += strlen(destString) , Its pointing to the location next to the content. Update the value of bufptr to point to the content you actually want to write. There are two sets of problems in the code (some of them diagnosed in comments made to question). First, you write a full length buffer even though it contains mostly junk, and then you try to interpret that as part of the file, but it isn't. And second, you're playing with an uninitialized variable in the client file copy code " you're (un)lucky it didn't crash. This code works. fcserver.c That's 85 lines, instead of 170-odd lines. fcclient.c That's 68 lines instead of 170-odd lines. Testing It is crucial to run the server in a different directory from the client, else you could get files truncated. However, when I used a sub-directory junk containing a file animals19.c and ran the client in that directory, while the server ran in the parent directory, I got the output: server window client window Oh, and at some point, you should note "i before e except after c" (so it is receive and not recieve). You should also note that perror() prints an error; it does not exit. Continuing after using perror() is usually wrong. 
c-11-84	X	Sending signal between child in C I'm learning the sending signal between process. I'm practicing how to send signal between children. Create two children by a same parents On child sending sigusr1 to another child every 5 seconds with some message. Another child receive this message, and print some message to stderr, meanwhile count the number of times it been signaled. This child also print numbers between let's say, 1-1000 to stdout. Once the printing finish. It quits with number of times it receives signals from other child and have this number as exit code. Parent wait until child exit and kill them. ============ I'm quite confused, how do I know the process id of another child so that I can send signal? Do I need two signals? One is SIGALARM so that every 5 seconds I can signal the first child, and the first child can signal the second child?? 
c-11-85	X	C " comparing char values First time here. I'm learning C and have a very basic question. I'm not able to get this piece of code work. When a user enters Yes, the loop should continue, else the program should end. 
c-11-86	X	openssl new custom symmetric only in CBC mode For a research project, I am adding a new symmetric cipher to OpenSSL 1.0.1u. Right now for test I have given it the name of "MYCIPHER"; its an exact copy of SEED cipher. Then I did all the modifications in the evp, crypto, ssl etc files/folders directory. But I only want to have the CBC mode of MYCIPHER ( actually seed cipher) When I try to make it, the MAKE generates error on mycipher.c mycipher.o saying that ECB mode, OFB128 mode and CFB modes are undeclared. Which is right because I dont have defined them and I dont want to define them because I only want to use the CBC mode. From my understanding the file "evp_mycipher.c" [again its the ditto copy of evp_seed.c] has a function named called "IMPLEMENT_BLOCK_CIPHER" which is probably causing to MYCIPHER for all the CIPHER modes, how can I limit this function to only look for CBC mode ? Thanks. os: ubuntu 14.04LTS x64 openssl: 1.0.1u [i know its old version] 
c-11-87	X	VIVADO HLS: How to declare "total width of the variable" in Arbitrary Precision Types? I am working with XILINX VIVADO HLS in which I need to run C/C++ codes with "Arbitrary Precision Types". So, I have gone through the "Arbitrary Precision Types" topics in UG902 Xilinx guidebook.But I am not clear on the topic. I don't know how to initialize"total width of the variable". Can anyone explain me with examples? The number #W specifies the total width of the variable being declared. Suppose my array size is 102 (1D-array) or 102x204 (2d array). How u will declare "total width of the variable". The width of an arbitrary precision type refer to the number of bits in the variable, and it is orthogonal to storing precision types in an array. For instance, if you want 102 elements of 4 bits, you would use: 
c-11-88	X	What is the need of the xfile variable I am new to system programming. I was going through the header file in file.h in FreeBSD as I needed it for some code. The thing I don't understand is what is the need of the xfile variable and what is the xf_data field. In the sockstat code they have used this xf_data field equating it to the socket (struct socket *). Moreover I have seen that there are several places where there is a 'x' prefixed data structure. I don't exactly understand the need of these 'x' prefixed variables. For example. in inpcb.h header file there is a inpcb data structure and a xinpcb data structure. Same with tcpcb and the socket data structures. file.h (why xfile?): https://github.com/freebsd/freebsd/blob/master/sys/sys/file.h in_pcb.h (why xinpcb?) : https://github.com/freebsd/freebsd/blob/master/sys/netinet/in_pcb.h socketvar.h (why xsocket?): https://github.com/freebsd/freebsd/blob/master/sys/sys/socketvar.h sockstat.c : https://searchcode.com/codesearch/view/456928/ In sockstat.c line 673 they have equated xf_data in xfiles structure with the socket structure. Does this meant that both are the same thing? 
c-11-89	X	best way to realloc a 2d array in c? I have to implement a function for a project in one of my classes and I am having trouble with resizing the dimensions of a 2-D dynamic array, represented as a board of characters. If I resize a board of a size such as 10 X 10 to a smaller board such as 5 X 5, the resize seems to work properly and truncates the arrays accordingly. However, if I try to increase the size of the board I get strange results or segmentation faults, I'm assuming because realloc somehow failed. Any feedback at all would be helpful; I am trying my best to understand pointers and can't seem to wrap my head around how to accomplish this without memory errors. In the larger program that I am writing I have a function to free the allocated memory of the board, but here I am mainly concerned about the way I have implemented realloc. C don't have multidimensional arrays (only arrays of arrays, or arrays of pointers). So consider some better approach, where you'll have some abstract data type (e.g. for your matrix-like objects, which keep their dimension). Of course, you'll better explicitly initialize every cell when redimensioning your board. And don't forget to test failure of malloc, calloc, realloc Compile your code with all warnings and debug info (gcc -Wall -Wextra -g with GCC) and use the debugger gdb and valgrind. 
c-11-90	X	Why is nothing in this cloned repo defined in Visual Studio? I cloned a repo (The PHP repo to be specific) and when I open any C file nothing is defined. 
c-11-91	X	Get number after colon in C I'm trying to read the numbers after a colon and store the value in a variable, but when I print it, it prints a random 6 digit number. I only need to store the value, not the 'ms' or 'degrees'. For example, the text file is similar to this, but repeats for 100 set of values: I want to store each number in a separate variable. Here is part of my code: Check your regex: %d matches an integer, as does %i - for floating point numbers, you want %lf or %f, depending on whether you have a double or float. Your code contains several errors. You have used different variable names in iteration. You used wrong specifiers. To skip rest of the line, you may use %*s which will match the unused string. 
c-11-92	X	How To Peek PHP Interpreter Source Code Definitions In Visual Studio I have cloned the PHP Interpreter source code from https://github.com/php/php-src. I now have it opened in Visual Studio. My problem is that I can't quickly jump around to peek definitions of any PHP function or type that was originally written in C because nothing is defined. I'm not quite sure what I need to do. 
c-11-93	X	Buffer overflow in C with pointers I am completely lost with this. I know I have to use a buffer overflow in order to get char 'c' to be the pointer address of ptr, but I have no idea how. Generally, the compiler allocates automatic variables by decrementing the stack pointer by the necessary amount, and remembering that a variable name means "sp + N"?. So each of your local variables {a, ptr, c, array, ...} will have corresponding offsets from the stack pointer, say {16,12,8,4,...}. So, your task involves figuring out how your compiler lays out the stack [ there are no rules ], then the next steps should be apparent. Here is a step by step method, as requested, but without a full solution, as per StackOverflow policy for homework questions. Compile the program without changing anything and run it, using a short input like "a". Run the program with a short input again. See the pair of different addresses it gives as debug output each time, they must be identical across the two runs of the program. If they are different see the assignment comment "You need to ..." Do 1.-3. again. If the address are still not the same you are out of luck. Think why steps 1.-5. are necessary. If you do not know read your text book again carefully. Create a small text file in a way to be able to make the content non-printable characters. If you do not know how, see the assignment comment "with commands like ..." The text file now should have a very specific length. Which length exactly you need to determine by looking at the output of addresses in the last run of the program. If you do not know how to determine the length from the value, read your text book again carefully and check the answer by mevets. The actual content of the first part of the text file is irrelevant, it just needs a certain small part of the total length. How long? See text book and code of the program. The cotent of the rest of the text file is special. It needs to be what you want written to the variable ptr. What content exactly needs to be derived from the output of the last run of the program. You will also need some knowledge on specific mechanisms of your CPU. This is probably easiest to find out by experiment. A few crashes of the program with wrong inputs will not hurt. Call the program in a way that it takes the text file as input. The output should be please enter: ptr is 0x???????? addr of array2[1] is ???????? Welcome to overflow! Where the ? are hexadecimal values specific to your environment, there is a little trick hidden here... Make a screenshot of all your commands and the output. Hand that in, with an explanation of how everything works, what the trick is, the relevance of the variable a and why you cannot directly overwrite array[1] with the input. Hope that your teacher knows neither StackOverflow nor a good search engine... Next time pay attention and start working earlier. Picking up a valid comment by Lundin (questioning the direction of stack growth): In the case Lundin mentions (probably a rare case), step 8 changes. You have to determine the length not so much by looking at the address pair but by looking at the code of the program. Step 10 changes, too. The content of the end of the text file is not what you want written to ptr but what you want written somewhere else, in what could by described as a more "direct" approach. Step 14 becomes much easier. 
c-11-94	X	C Beginner: recommended source file size i have to do a school project with my friend in C programming language , and i don't know , should i put all the function and stuff in one file .c or create multiple file and header , if so how to do it ? There are a few reasons why you would like to have multiple files: A. Organization put distinctive functionality in separate files. E.g. You may have a separate .c files for your utility functions, math operations, communication modules, state-machines, parsers and so on. B. Maintenance it is easier to work on a relative stuff if it is concentrated in a specific file. C. Readability when the code grows it becomes more and more difficult to have a mental overview what is going on in a specific file. The bigger the project the bigger benefits from the proper organization of your files. In my project I avoid having more than 1000 lines of code per file. 
c-11-95	X	Use of static keyword to global variable in c If I apply static keyword to local variable, its value is maintained within function invocations. However, if I apply static keyword to global variable, will it be as good as declaring the variable as global? What I mean to say is does static keyword has any effect on global variables? It means that variable has file scope. You cannot access that global variable (by name) from another file. 
c-11-96	X	Why does pointer arithmetic work between int* & int* only for minus and not plus? I can't seem to understand why I am getting this error. It seems bizarre to me that subtraction works just fine (producing -3) while addition gives me an error. Why is this the case?, Shouldn't addition return (0x00000001 + 0x00000002 = 0x00000003)? 
c-11-97	X	How to properly create a DLL from C code and use it in a C++ project I have a set of functions written in C that I need to be able to call from another project written in C++. The C code is essentially some functions that do some calculations on a large data set. I didn't write them - all I want to do is allow my C++ project to be able to call those functions. My solution was to create a DLL for the C code and link it to my C++ project. In order to make the DLL, I structured myCproj.h (the header in the C project, not C++ project) like so: The src file, myCproj.c, was not changed at all. The function definitions do not have __declspec(dllexport)in front of them, nor is extern "C" inserted anywhere. The code compiles without error and produces myCproj.dll and myCproj.lib. I then tell my C++ project in VS where to find myCproj.lib and myCproj.h accordingly and copy the DLL over to the directory where my C++ executable lives. To use the DLL, I gave myCPPproj.cpp the following addition: However, I get error EO335 'linkage specification is not allowed' on that last line. What am I doing wrong? It is preferable to use the same header for both the library and using code. As mentioned, it is usually done by a conditional define, like the following: MyLibrary.h: MyLibrary.c: App.cpp: The symbol MYLIBRARY_API will be defined for the library project (usually as a /D on the compiler command line). And if you use visual studio that is pretty much exactly what you get when creating a dll project with exports. 
c-11-98	X	not properly inserts the new node at the end of a linked llist I am trying to create a linked list from data read from a file. The following code is included in a while loop. Seems like the data are picked correctly but not inserted properly in the list, since when i try to print the data of the list using the head, i notice that the head seems to be moved on the next node every time. Any help here? Since the head is the first node of the list, the problem I see is that you create the newNode properly at the beginning, and the if branch seems to work fine. However, the else branch is the one that seems to be causing the problem, it should look something like this: Good luck, hope this helps! EDIT: Try to just enter a pointer to the newNode instead of just newNode, the problem you describe above seems to be that every element points to the last one, this could solve it: PS: In your version, it would be 
c-11-99	X	infix calculator - Program can't handle the input of non-whole numbers. C/C++ I have the following exercise. Make a C-language program that solves an arithmetic operation Example: input 3.11 + 2.1 * 2 output 7.31 The problem I can not code so that the accounts are held in order correctly. Sorry my bad english. As an example, divide after multiplication and add I'm sorry for my English. I'm still learning. The first part of the code is used as a LIFO (Last In, First Out) and FIFO (First In, Last Out) This is the second part of the code that is based on the first one. My program can't handle the input of non-whole numbers!!! I would like someone to give me the solution to this problem! 
c-11-100	X	Writing data in different files in C I'm studying C at the moment and I'm not that good yet. I am trying to write a program where I want to enter some people's name and create at the same time a .txt file with their name. For example if I type "Richard" it will create the file Richard.txt. And inside the .txt file I want to write again their name. The only problem is that after I type the first name and create the first .txt file, entering a new name will not create a new .txt file. But instead it will put the second name in the first .txt file after the first name. "int addPatient(struct personnel patient[], int noAgt)" Is the bit where I enter the name of the person that goes in writeFile(). "void writeFile(struct personnel patient[], int noAgt, char filename[])" Is the bit where I write the file. My first advice is: If you don't need the filename variable in main, then move it to writeFile(). Less parameters moving around and makes your code cleaner. Your issue is inside the writeFile() function: You never initialized your i variable. It's likely always getting initialized to 0 thus you're always writing to the first file you created. Try changing that line to this: And you should see the code working better. Still not the best solution in my opinion, since noAgt should probably not increment before writing the file. But it should get you going on cleaning up your code. 
c-12-1	X	C defining functions? I am trying to understand why this program prints out 8. A macro doesn't perform a mathematical operation but code replacement. So after preprocessing step, your code should look like this: So z should be equal to 3 + 4 * 1 + 1, that is 8. Macros aren't functions After the first phase of compilation, preprocessing, the macro is expanded: No doubt that x + 1*y + 1 == 8. A better way to define this macro is to parenthesize x and y: You can try it yourself: Compile this code with gcc -E foo.c -o foo.i And see the content of foo.i. 
c-12-2	X	Use of @ symbol in c programing? I'm working with some code that was originally written for IAR and converting it to compile using a GCC compiler. However I'm stuck with one particular line as I don't understand the syntax or what is going on. The __root I've found out is so that the the variable is included in the final code even if there is nothing that actually references it. const means that it won't change and is kept in the ROM instead of RAM. It is the @ ".part_number" part that I don't follow. The specific error I get is "stray '@' in program". I understand that @ isn't a part of standard C, but I haven't had any luck finding anything that explains this syntax I'm seeing. If anyone is able to explain it, I would really appreciate it. Thanks From this KB entry it looks like it's syntax to instruct the linker to place the variable into a specific section. If you instead place the object into a named segment: The equivalent gcc syntax is through the section attribute. 
c-12-3	X	malloc and strcpy interactions I've been testing out interactions between malloc() and various string functions in order to try to learn more about how pointers and memory work in C, but I'm a bit confused about the following interactions. Everything above appears to work properly. I've tried using printf() for each character to see if the null terminator is present, but '\0' appears to just print as a blank space anyways. My confusion lies in: String literals will always have an implicit null terminator. strcpy should copy over the null terminator onto myString, but there isn't enough allocated heap memory printf/strlen shouldn't work unless myString has a terminator Since myString apparently has a null terminator, where is it? Did it just get placed at a random memory location? Is the above code an error waiting to happen? Addressing your three points: String literals will always have an implicit null terminator. Correct. strcpy should copy over the null terminator onto myString, but there isn't enough allocated heap memory strcpy has no way of knowing how large the destination buffer is, and will happily write past the end of it (overwritting whatever is after the buffer in memory. For information on this off-the-end-access look up 'buffer overrun' or 'buffer overflow'. These are common security weaknesses). For a safer version, use strncpy which takes the length of the destination buffer as an argument so as not to write past the end of it. printf/strlen shouldn't work unless myString has a terminator The prhase 'shouldn't work' is a bit vague here. printf/strlen/etc will continue reading through memory until a null terminator is found, which could be immediately after the string or could be thousands of bytes away (in your case you have written the null terminator to the memory immediately after myString so printf/strlen/etc will stop there). Lastly: - Is the above code an error waiting to happen? Yes. You are overwriting memory that has not been allocated which could cause any manor of problems depending on what happened to be overwritten. From the strcpy man page: If the destination string of a strcpy() is not large enough, then anything might happen. Overflowing fixed-length string buffers is a favorite cracker technique for taking complete control of the machine. Any time a program reads or copies data into a buffer, the program first needs to check that there's enough space. This may be unnecessary if you can show that overflow is impossible, but be careful: programs can get changed over time, in ways that may make the impossible possible. 
c-12-4	X	fp may be used uninitialized in this function Can someone help explain why I have this error? It is for a school project that im doing. "fp may be used uninitialized in this function c". I don't understand why I do gcc -o -Wall it appears that. Can someone really help me? 
c-12-5	X	What is the difference between libdl and libltdl? What is the difference between libdl and libltdl. I just noticed that libodbc links to both of them I know Perl links again libdl. I see two seperate shared objects on the system, They both link to similar stuff too, What makes libltdl different? It's a feature of libtool to provide a libdl API (e.g. dlopen) for many different platforms that have the same or similar functionality (e.g. POSIX's dlopen etc., Windows's LoadLibrary etc.), and shared library emulation for platforms whose linkers don't support dynamic linking. I did some analysis on libodbc.so.2 on my Linux box. nm -D seems to show only libltdl symbols for libodbc.so.2, and objdump -p seems to have only libltdl.so.7 in the NEEDED section, so ldd doesn't seem to be printing out entirely accurate info in this case (Your grep output appears similar to what I see). 
c-12-6	X	Code memory and data memory When we write a particular code in C, that code gets allocated to either data memory or code memory. When are those memory initialised, at run time or compile time. Any possible explanation of why they are initialised that way? Most of .code comes from the binary image (as you might expect), the loader does make some changes before the program runs (writing the actual addresses of imported functions to an import table for example). On a system with hardware level memory control the pages that .code is loaded to will be marked read-only (and executable if the hardware gives that level of control). .data also comes from the program binary, but those pages are marked read-write and non-executable (except for .rodata which is read-only) .bss does not come from the binary, it simply gets allocated and initialized to 0 (this is the stack lives. After finishing the load the real program entry point runs (not main), this sets up the environment, runs initializers calls main runs destructors and any final tear-down code the platform needs. 
c-12-7	X	Sort vector in 2d array - c I have a question if I want to sort a 2D array with only 0 and 1 inside of my array what is the best algorithm to use? I tried bubblesort but it doesnt work very well... I want this array of vector sort ascending, from this: to this: Is there a good algorithm to sort this without changing the content? 
c-12-8	X	Calling Conventions,when are they used? Hi guys I am just starting windows programming with c++ and I have come across something called a calling convention,I did some research and cannot seem to understand what they are and why they are used, could someone give me an example of why and when they are used? 
c-12-9	X	Makefile: what's the name of this warning? I'm compiling a 3rd party .c file. I've no intention to modify the source code. I'm not a .c programmer. And the code is not mine. EDIT: This is the folder code I need to compile, for the precision, I need only magiskboot; it's a specific piece of a more large tool. The official makefile build all the tool with the result that the specific executable I want has something 'wrong'. So I'm just trying to build it standalone link to magiskboot specific directory on github I've this warning when compiling using gcc What's the name of this type of warning? And how to suppress it? I searched into https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html but without founding the right flag Move your struct declaration so that it comes before the function declarations. I know you don't want to edit the 3rd party source, but that is how you fix this warning. Add -include ucred.h to the GCC command line. Alternately, create a new .c source file with these contents: And compile that instead of the original .c file. There does not appear to be a command line flag to suppress just this warning. (Going by the gcc source code which is passing 0 for the second argument to warning_at.) You can add -w to suppress all warnings. If the code is actually C++, which is unlikely but possible, using g++ instead of gcc might fix the issue. (I'd expect lots else to be wrong if the code was originally written as C++.) 
c-12-10	X	Reallocing a c array inside extern function Hi I'm trying to malloc a char* array in my main() then realloc in an extern function every time the parsing loop finds a file. All my code works except for the malloc and realloc of char * files[]. When I run the following code I receive this error Main.c parse.c I'm assuming its a pointer error but having a hard time figuring it out as I'm new to C and pointers are still a little confusing. If you could also include a link or explanation it would be greatly appreciated. In your main files is a char ** (and you pass its address so the parameter is actually a char ***) but parseArguments only takes a char*[]. Add a prototype for In your main files is a char ** (and you pass its address so the parameter is actually a char ***) nut parseArguments only takes a char*[]. in main.c and the compiler would tell you about this. I suspect it is your main that is correct but I have not parsed through the code to make sure of that. 
c-12-11	X	Minimise read and write system calls in C I'm a computer science student and I must do a practical in C on the Inputs/outputs of a file system. In fact I have to code the Inputs/outputs of a file system. I have to create functions : openIt, closeIt, readIt and writeIt. For the moment I have that : with this file structure : But in fact the purpose of this practical is to minimise read, write, open and close system calls. Yet I've done a loop so it's not really optimised, I have much too much read. My readIt and writeIt functions are used in a file test.c like that : In my file 1 and file 2, I only have strings like : Â« abcd Â». I don't use the buffer of my file structure for the moment. It must contain the content of the file to read and a read() have to be used use only if need be. For example when the buffer is full or when the file has been entirely read. Basically : We put all the content of the file in the buffer -> We call read to store this buffer in p. But I don't understand how to get the contents of the file without a lot of read() calls. I'm really stuck at this precise point. Thanks for your help. 
c-12-12	X	Is this is an example of static memory allocation or dynamic memory allocation? I researched a lot of static and dynamic memory allocation but still, there is a confusion that: Does int a[n] come under static or dynamic memory allocation? int a[n] is a variable length array with the automatic storage duration, Consider the following demonstrative program. Its output is Each time when the control is passed to the body of the loop the generated by the compiler code creates a local array s[n] life-time of which ends at the end of the body of the loop. The C standard does not talk about dynamic allocation (or static allocation, for that matter). But it does define storage durations: static, automatic, thread and allocated. Which dictates how long an object (a piece of data) lives (is usable). Static in the sense of storage duration means the object is usable for the entire execution of the program. Variables at file scope ('global' variables), and local variables with static in their declaration, have static storage duration. Automatic storage duration are your regular local variables, they live only for the duration of the block they are declared in (the function, or inside the curly braces of e.g. a for loop). Allocated storage duration refers to memory obtained via malloc and friends. It is available from a (successful) call to malloc, until a corresponding call free. This is often referred to as dynamic memory allocation, as it is a way to obtain a block of memory with the size determined at run-time. Your variable a has automatic storage duration. However, it can be considered dynamic in the sense that its length is determined at run-time, rather than compile-time. Just like allocated storage duration has. No it's comes under automatic allocation 
c-12-13	X	Generic datatype in c I'm working on a small image processing library in C. I want to represent an image as an array of pixels which can have different types : uint8_t (for pixels whose the max value does not exceed 255), uint16_t (same but with max value at 65535), uint32_t.. I'm going with this for the moment : dsize contains the size of the datatype for the pixels And I have the same number of function to allocate/deallocate and process these images. Is there a way to define a generic "unsigned int" type that can handle values on 8-bits, 16-bits etc.. without creating a struct/function for each case ? Should I use an union ? Thanks for your help! You can use a void * for a generic pointer: Then use the dsize member to figure out how to cast it: If done in C this is going to require at minimum different statements to handle the different sizes, as in: Depending on the exact manipulation it may make sense to break the individual handlers into separate functions. The point is that unlike C++ at some point you are going to have to write code for each branch individually. Is there a way to define a generic "unsigned int" type that can handle values on 8-bits, 16-bits etc.. without creating a struct/function for each case ? No, not that would suit your purpose. Every complete C data type has a specific representation, and you can read or write objects' values only if you have a complete type for them. You certainly could define a union that can hold different-size integers: ... but objects of that type all have the same size, which is sufficient to accommodate the largest member. Thus, a raster of, say, 16-bit pixels without any padding between does not match up with an array of union uint_any, at least not if you want to read all the pixels via the u16 member. You can use a void * to point to your array, so as to avoid separate structures for each pixel size, and your functions can sort it out internally so that you need only one function for each purpose. Additionally, if you have image manipulation functions complex enough to warrant it then you can probably benefit from reducing or eliminating code duplication by using macros. Here's an example for a simpler case than probably warrants such treatment: Is there a way to define a generic unsigned int type that can handle values on 8-bits, 16-bits etc.. without creating a struct/function for each case ? To avoid casting, consider a union of pointers. A generic function: Or explicit higher performance ones for each. Depending on the size and security requirements of your project, you may also make use of C macros to generate the generic code. Bear in mind that this grows very ugly very fast, but it gives you type checks, e.g. assigning 1024 to img8_t gives you warning in compile-time, not only silent overflow in run-time. And you also implement everything once. Example implementation: This doesn't give you exactly pleasant time during maintenance, but if you're writing very generic library code, it might be worth it. You could also create custom initialization function that would set the dsize to proper value (e.g. UINT ## SIZE ##_MAX). 
c-12-14	X	C - Reading a Network Dump So I need to read a TCPdump and extract the payload, so in other words all data in the file. My problem is that I dont even have an idea on where to start. We had a very quick class regarding the subject and a very short due date which is why I decided to turn to Stack Overflow. Could someone give me any tips on how to start (Like step 1 or maybe even 1-2)? Thanks in advance. Declarations TCPdump The recommended order of work I got was the following: Read the total package length Read the full package to a void* Convert pointer to enstruct ethernet_hdr * Save the length of the header Convert the void-pointer + length to the struct ip_hdr * Repeat steps 3 and 4 for the first IP header and then the TCP header. Print the payload Type the source and recipient address of the newly announced char array Print each char sequentially as an integer 
c-12-15	X	What is the range of the "number of characters read" in fscanf? fscanf() specifies the "%n" directive as a means to write "the number of characters read from the input stream so far by this call to the fscanf function" C11dr Â§7.21.6.2 12. Let us call this number: ncount. The "%n" directive may be preceded by length modifiers hh, h, l, ll, j and others. Examples: What is type or the minimal expected range of ncount? What happens, or should happen, when "the number of characters read from the input stream" is large? My findings: The C spec appears quiet on the definition of the minimal range/type of ncount. ncount is usually saved via "%n" which specifies an int destination though not an int source. By experimentation, ncount appears to be treated like an int or long on my platform - no real surprise there. (My int/long/long long are 4/4/8 bytes.) When saving ncount to a long long, the value saved does not exceed INT_MAX/LONG_MAX. ncount could have been unsigned for twice the usable range when assigned to long long, yet, this is an extreme corner and perhaps not considered by implementors. My tests below showed no extended range of ncount past an int range, even when saved as a long long. My interest stemmed from using "%*[^\n]%lln" to determine a (extreme) line length. Implementation notes: GNU C11 (GCC) version 6.4.0 (i686-pc-cygwin) compiled by GNU C version 6.4.0, GMP version 6.1.2, MPFR version 3.1.5-p10, MPC version 1.0.3, isl version 0.14 or 0.13 glibc 2.26 released. Intel Xeon W3530, 64-bit OS (Windows 7) Test code Test output [Edit] With some runs of testf(UINT_MAX + 1LL);, I received other inconsistent results like '4294967296 cnt:0 n:1239482368 OK'. Hmmmm. Sample fscanf() support source code uses an int for ncount. What is type or the minimal expected range of ncount? The standard does not specify any specific minimum. It flatly says The corresponding argument shall be a pointer to signed integer into which is to be written the number of characters read from the input stream so far by this call to the fscanf function. (C2011, 7.21.6.2/12) This leaves no room for a conforming implementation to store a different number in the destination variable, except inasmuch as the standard specifies for all conversions, including %n, that if the result of the conversion cannot be represented in the [destination] object, the behavior is undefined. (C2011 7.21.6.2/10) What happens, or should happen, when "the number of characters read from the input stream" is large? If the pointer corresponding to the %n directive is correctly typed for the directive's length specifier (or lack thereof), and if the true count of characters read up to that point by that scanf() call can be represented in an object of that type, then the true count should in fact be stored. Otherwise, the behavior is undefined. 
c-12-16	X	Arduino W5500 Ethernet GET frame I am working on a project to send the values "‹"‹of a temperature and humidity sensor to a server via a GET. The line in the library of W5500 is: client.println ("GET / search? q = arduino HTTP / 1.1"); So I change the / search? Q = arduino by the frame I have to send on my database. The problem is that I can not create my frame. In this frame I have two values "‹"‹uint16_t (Temperature and humidity) and I need to separate them by a "_" to differentiate and parse the frame in my php. But that's how to change the "GET / search? Q = arduino HTTP / 1.1" by a variable, and how to build a frame with integers and a "_"?! I have already try strcpy, but strcpy work only with a char or string. The command you are looking for is sprintf sprintf (str, "%d_%d", temp, humid); 
c-12-17	X	Define Statement in C ouputs Can someone explain how the code below outputs 8 instead of 20: Simply replace the macro and you will get : If you need to have 20 add parenthesis to x and y in the macro 
c-12-18	X	Post increment in c I am getting output as 0..0 in the below given program.Why does j doesn't get incremented while if condition is being checked? Since i is zero the second half of the if doesn't need to be evaluated so j++ never occurs. A post-increment, not surprisingly, will only happen after the statement and it will only happen if that part of the expression was evaluated. Don't forget that conditions on the right side of && are only evaluated if the left side passes. The j++ part of that statement never gets evaluated because i is 0. What your code translates to is roughly: If these sorts of operations are confusing, it's alright to steer away from them entirely. Even experienced programmers can get tripped up on them. When you presume too much and write code like j + j++ you're going to end up in trouble. In the statement: i has the value 0 so even if the j were pre-incremented it would not be evaluated. The && and || operators short-circuit , that is they quit as soon as an answer is known,. I the case of && that is the left side evaluating to zero, in the case of || it is the left side evaluating to non-zero. Expressions involving the logical AND operator can be rewritten as follows: is functionally equivalent to If expr1 fails, the remaining won't be evaluated. If expr1 succeeds, expr2 will be evaluated and if expr2 fails, expr3 won't be evaluated. In your case i is zero, hence j++ won't be evaluated. Excerpt from Section 6.5.13 C99 specifications Unlike the bitwise binary & operator, the && operator guarantees left-to-right evaluation; there is a sequence point after the evaluation of the first operand. If the first operand compares equal to 0, the second operand is not evaluated. 
c-12-19	X	using c and tcl , error when getting data from file with Tcl_GetVar2 what is the best way of using Tcl_GetVar2 in c ? with axes as the structure This is example is getting errors in execution when parsing a data file with missings data. for example Segmentation fault when doing Thanks While the Tcl_GetVar2 API function does return a char *, you need to remember that Tcl retains ownership of that pointer: it can and will deallocate it at a time of its choosing, possibly on the next API call you make. Also, you really ought to treat it as const char *; don't modify that string either (there are some historical reasons for us not making that const). If you want to keep it around, you need to copy it immediately and that will entail some work with buffer management, with there being many ways to achieve it. Or alternatively you might be able to use Tcl_GetVar2Ex, which returns a Tcl_Obj *, a Tcl native value reference. With those, you can keep them around (as long as you remember to Tcl_IncrRefCount them when you do so and Tcl_DecrRefCount them once you no longer need it) and you can then get the char * (though still not something you should modify) from that value reference at any time using Tcl_GetString or Tcl_GetStringFromObj (the latter also reports the number of bytes in the string). If you are really interested in parsing the value to mean some sort of string chosen from a small set " the sort of thing I'd expect when parsing an "orientation"? attribute of some kind " I strongly suggest looking at Tcl_GetIndexFromObj. That's explicitly designed for that sort of task, handling a great many aspects for you that are normally an annoying amount of fiddly work to get right for yourself. 
c-12-20	X	C: Pointer to a structure element I tried to read on it from past questions and watch youtube videos but i don't get it. I have a program with struct called info. I created a function that adds element of the structure and return a pointer to it. then i want to use the element fields through the pointer. How should i do that correctly ? how can i take user1 and access it through pointer outside the function ? Thanks in advance Your function AddUser assigns all the data to a function-local variable then returns a pointer to that data, but as soon as the function returns that local is no longer valid, you need to allocate the new Info in AddUser rather than main and assign the data to that allocated instance and return that pointer. 
c-12-21	X	remove duplicate number in array in c I want my output print the array without any duplicate number make the array randomlly here my problem is not working in the program tell me Error value required as decrement operand Sort Array With Bobble Algorhim here my sort for(i = 0; i < BUBBLE; i++) { the output You may not change integer constants. At the compile-time this code snippet actually looks like That is the compiler substitutes the name BUBBLE for the integer constant 5. Moreover it is unclear where for example the variables i and j are initialized. And this condition in the if statement does not make sense. You should declare a variable that will keep the actual number of elements in the array during deleting duplicates because you can not change the size of an already initialized array. "Removing" duplicates can look as it is shown in the demonstrative program Its output is The variable n keeps the actual number of elements of the array after removing duplicates. 
c-12-22	X	How to declare a struct variable with a linked list in it? In my .h file, I have: For define firstNode variable in the .c file I have tried this: but when I compile, I get the error: I'm not too familiar with what the error actually means (sorry, I'm not that familiar with C), so I'm not sure why/what this means. As noted in the comments, at global scope (that is, outside of any function's body) executable code is fobidden; only declarations and definitions may be used here. For define firstNode global variable and initialize list in it use LIST_HEAD_INIT macro: 
c-12-23	X	typedef void (*print_type) (const char*); While exploring some code, I found the following in a header file: What does this line mean? I know that typedef is used to make certain word to represent a certain type but why using void? What is it? typedef void (*print_type) (const char*); The typedef tells the compiler that the data type print_type is a pointer to a function which accepts const char* as an argument and does not return a value. ... and it has nothing to do with a DLL Function Pointers We declare a function as follows: ret-type identifier(parameters) int f(double x) Given that for something declared as int a, the pointer to it is declared as int *a (adding a * after the data type), it is natural for someone to come up with a way to declare a function pointer as follows: int *f(double); There's a catch here. That is actually a declaration of a function which accepts a double as an argument and returns a int*. We need to explicitly tell the compiler that it is not a function returning a pointer; rather it is a pointer to a function. We do this by placing brackets (parenthesis has higher precedence) around *f. int (*f)(double); Let's take another example: int* myfunc(int a[], char b); To declare an array of function pointers which point to a function with the above signature, we write: int* (*ptr[])(int[], char); There is a trick known as Spiral Rule which is quite useful in finding out what a complicated data type is. Using typedef Things can get pretty complicated with function pointers. To keep the code readable and neat, we prefer giving a single symbol type name to function pointer types using typedef. typedef int (*ptrFunc_t)(int, char); This allows you to declare a pointer to a function which accepts an int and a char as arguments and returns an int as follows: ptrFunc_t myptr; It is creating a typedef of a pointer-to-function, the function takes a const char pointer argument and retusn nothing. Such typedefs are common in libraries that are meant for dynamic loading (that is with LoadLibrary etc), since you must load function pointers to the actual functions rather than being able to use the function name directly as you can with load-time linking. This: declares foo as a function that takes a const char* argument and returns void (i.e., it doesn't return anything). (It would have to be defined somewhere for you to be able to call it.) This: defines bar as a pointer object. It's a pointer to a function that has the same type as foo, above. By adding the typedef keyword, this: defined print_type, not as an object of that pointer-to-function type, but as an alias for that pointer-to-function type. 
c-12-24	X	When does GPIO peripheral get its members addresses assigned? From stm32f446xx.h we have a definition of GPIO_TypeDef This is used to initialize some GPIO peripherals. Focusing on GPIOA: So my questions are: Is the #define directive declaring and initializing the struct and putting it at address pointed to at `GPIOA_BASE? Or is the define statement just declaring the struct but not initializing its members? How do the members get their address placement correct without it being explicitly defined? How do we know that GPIOA->MODER leads to the same address as GPIOA_BASE? Likewise how do we know GPIOA->ODR leads to the address GPIOA_BASE + offset 0x014? Is it simply because when we declare the struct and tell it that it's located at GPIOA_BASE with the #define GPIOA ((GPIO_TypeDef *) GPIOA_BASE) command all it's member variables are declared and initialized in memory in the order they appear in the struct GPIOA_TypeDef? That would make sense since each takes 4 bytes but I am unsure if this is the case. If the member variables are not declared in the order they are listed in the struct then how do they get their memory addresses assigned? The name "C" is used to describe two things: A family of languages which map source code constructs onto target-machine constructs in a rather consistent fashion. There's often no "standard" documenting how such mapping should be performed, and implementations for unusual target platforms will behave differently from those for more common ones, but compilers for similar platforms will generally behave similarly. A language which contains only the features mandated by the C11 Standard, and generally omits features which aren't implemented consistently on all platforms, even though C compilers for similar platforms would have processed them similarly. The code you cite above is designed for compilers that process a languages in the first family, which is adapted to the needs of ARM processors. In that language, each item of a structure will be placed at the lowest offset which satisfies its alignment requirement. Neither the C11 Standard, nor any of its predecessors, requires that compilers guarantee to lay out structures in such fashion, nor do any of them even any convenient way for those that sometimes do otherwise to indicate that fact. From the point of view of the C11 Standard, structure elements may be arbitrarily placed subject subject to relatively few constraints. I think the authors of C89 probably figured that compiler writers would lay things out sequentially, with or without a mandate, except on rare platforms where there might be a compelling reason to do otherwise, and thus saw no reason to demand that they behave as they were going to anyway. Some people, however, seem to believe the lack of a mandate was meant to be an open invitation to arrange things arbitrarily, and any code that would rely upon a particular layout should be viewed as "defective". 
c-12-25	X	Linux and Windows intialise structs differently While switching from linux back to windows, I noticed that my code stopped working. Using the trusty debugger, I found that structs were being initialised differently. Look at this code for example (hid extra code to keep it tidy, also ignore struct item it's not useful here). Let's say that length is 3. In Linux, when I check the debugger, I see that: Because I did not initialise the BASEs, I only initialised the fact that there is an array of them. However, in Windows, I see that all of the BASES are initialised. Not only that, but all of the ITEMs within the BASEs are initialised as well. However, if I, for example, immediately afterwards add this line: hashmap[0]->first = NULL, I end up with a SIGSEGV error that I can't find the cause of. In Linux, this is because hashmap[0] is NULL, and hence hashmap[0]->first can't even be accessed in the first place. But on Windows, it clearly shows that hashmap[0] exists and has an initialised first value. I don't know what is going on here, and I can't find anything regarding this bug. If more code is needed, everything is on my github. Linked to the actual file this code is in. But for now, I'm confused as to what's going on... UPDATE: Apparently I had some looking up to do. Didn't know that malloc returned an uninitialized pointer and not just NULL. That was set by Linux. Thanks though, learnt something new today. Let's say that length is 3. In Linux, when I check the debugger, I see that: Because I did not initialise the BASEs, I only initialised the fact that there is an array of them. No. You get all of those being NULL because that happens to be what you get. C does not specify the initial contents of the memory returned by malloc(), and if you performed that allocation under other circumstances then you might not get all NULLs. However, in Windows, I see that all of the BASES are initialised. Not only that, but all of the ITEMs within the BASEs are initialised as well. They may have non-NULL values, but that's very different from being initialized. The values are very likely to be wild pointers. If they happen to point to accessible memory then you can interpret the data where they point as ITEMs, but again, that does not mean they are initialized, or that it is safe to access that memory. You are delving into undefined behavior here. However, if I, for example, immediately afterwards add this line: hashmap[0]->first = NULL, I end up with a SIGSEGV error that I can't find the cause of. We can't speak to the cause of your segmentation fault because you have not presented the code responsible, but having an array of pointers does not mean the pointer values within are valid. If they are not, then dereferencing them produces undefined behavior, which often manifests as a segfault. Note well that this does not depend on those pointers being NULL; it can attend accessing any pointer value that does not point to an object belonging to your program and having compatible type. In Linux, this is because hashmap[0] is NULL, and hence hashmap[0]->first can't even be accessed in the first place. But on Windows, it clearly shows that hashmap[0] exists and has an initialised first value. No, it doesn't. Again, your debugger shows hashmap[0] having a non-NULL value, which is not at all the same thing. It is your responsibility to avoid dereferencing invalid pointer values, which are by no means limited to NULL. The values of bytes pointed to after a successfull call to malloc are uninitialized. That means they can be set to any arbitrary value, including zero. So just because the bytes are either zero or non-zero doesn't mean they are initialized. Section 7.22.3.4 of the C standard regarding malloc states: 1 2 The malloc function allocates space for an object whose size is specified by size and whose value is indeterminate. So there are no guarantees what the memory returned by malloc will contain. If on the other hand you use calloc, that function will initialize all allocated bytes to 0. 
c-12-26	X	Is it possible to display progress of Asynchronous IO I am trying to implement file copy program with POSIX Asynchronous IO APIs in linux. I tried this: But counter giving different results every time when I run Is it possible to display progress of aio_read and aio_write functions? You have different results because each different execution has its own context of execution that may differe from others (Do you always follow the exact same path to go from your house to the bank? Even if yes, elapsed time to reach the bank always exactly the same? Same task at the end - you're in the bank, different executions). What your program tries to measure is not I/O completion but the number of time it tests for completion of some async-I/O. And no, there is no concept of percentage of completion of a given async-I/O. 
c-12-27	X	MPI_Reduce arrays representing decimal values (C) I have a sequential program that computes numeric values and stores the result in an array where each element represents a number "place." For example, a computed result [2,4,5,1,1,8,9,3,1] represents a decimal value of 2.45118931 The format is such that result[0] is the value to the left of the decimal and result[1-n] represents the tenths, hundredths, etc. places to the right of the decimal The computed result for each processor goes into digits, and is reduced into mpiResult: Once each process has computed its portion, I want to find the combined value result. I've not been able to implement MPI_Reduce in a way that is getting me the results I want. The closest I've gotten so far: As far as I understand how the reduction sum works with arrays, if I have two processes with the following values and The result of a sum should be 5.0092 But a reduction sum would give me the value: because it sums each element across all processes. How can I use MPI_Reduce to get the result format I'm looking for? Or am I completely off base with this approach? The only issue your implementation has is that you don't propagate the carry between your digits: The digits individually are summed up correctly, you just need to add a small postprocessing step Pseudocode (be careful as the last line writes out of bounds, in fact you might need to continue this loop until carry == 0): In your case, you get However, you need to allocate additional space in front of the most significant digit in case you decide to add something like 6.1582 and 7.4638 Another possible approach would be to implement a custom MPI data type and user-defined operation to propagate the carry during reduction, however for this, you would probably need to make sure that there is enough space to contain the result before starting the reduction. 
c-12-28	X	What does bitwise operation n&(n-1) do? I was trying to understand some code, wherein I found the statement: What does this do? That equation zeroes out the least significant non-zero bit in n. If we assume 8 bits, then here is the back of the envelop explanation. Let n be 70. As a consequence, if the result is 0, it means there was only one bit set in n originally, which means it was a power of 2 (or it was 0 to being with). If applied iteratively in a loop until n becomes 0, the number of iterations counts the number of bits set in n originally. However, most processors will have a built-in operation to do this for you. If bit-hacks interest you generally, searching this site for "bithacks" generates many hits. 
c-12-29	X	Character Pointer Arithmetic in Main vs In Other Functions I am working on a practice problem that asks me to remove the first character in a string. Ex. char *string = "Rudolph", after calling removeFirst(string), string now equals "udolph". I noticed, if I do it all in my main, I get the output "udolph". Here is my code: However, if I were to call another function, my output is Rudolph. Here again is my code: Given that I'm working with pointers, I thought that the changes I make in removeFirst should also make it to main. Why doesn't it work that way? You are changing to the local variable. C is pass by value. A char* with same value as that of string is there in the called function removeFirst(). You make changes to it and then you expect the changes made on the copy to be reflected in the original variable. That's not going to happen here. That's why you don't get the same result as before case. string == "" comparing two addresses not the content as you may have expected. You can make changes like this Then in main() printf("%s\n", string); outputs udolph. In this is case you pass the address of the pointer variable. You are now changing to the original variable by accessing the memory contained in the called function's local variable string. That is what retain the changes in main(). 
c-12-30	X	Explaination for the code The output for the code is 3? Please explain.According to me it should be 5.After removing "unsigned" still i got the output as 3. Because size_t is unsigned in C. So the comparison being negative yields a positive number. (sign extended bits of signed number yields a large value in unsigned case). Then that value is compared with 0 - being true it enters the first condition. Outputs 3. Even if you remove unsigned from C that result of the strlen substraction yields a positive number much larger than 0. That's why you always get 3. After removing "unsigned" still i got the output as 3. It is unimportant whether the variable c is declared as unsigned or signed The problem is that the standard function strlen returns an object of the type size_t that is by definition is unsigned type. So in this expression the result is interpreted as unsigned integer value. As strlen( x ) is less than strlen( y ) then you will get a very big unsigned value or at least a non-zero positive value. Instead you could write And it would be more correctly to declare the variable len as having the type size_t. 
c-12-31	X	Simple Buffer Overflow in C So I am doing an excercise where I am attempting to get the following program to output Welcome to Overflow by changing the relevant variables using a buffer overflow. Here is the code. What I need is for c == 'X' && a == 11999 && *(array + 2) == 0x99 - 0x34 && array2[3] == 'X'. So I have gotten every variable to be what I want it to be except one. By inputting the following I am able to change them. I input "XXeXXXXXXXXB" This changes array[2] to be 65, array2[3] to be X, c to 'X' but the variable I cannot change is 'a'. By making the 12th char of input a B it changes a to '66', which is the decimal equivalent of the char 'B'. If I input a 13th char, variable a will then be changed to the decimal equivelent of the char * 257. Since a needs to be 11999 I am lost. I tried dividing 11999 by 257 but it comes out to 46.6 so there is no char with that value, I even tried the char closest to 46.6 which were '.' and '/' but then a is too big or too small. What char or chars can I make the 12th and 13th input in order to change a into 11999? Also if you do not want to give me the flat out answer I would appreciate a point in the right direction. This is an interesting exercise. Because you are invoking undefined behavior, there isn't exactly one answer to your question, it has to be evaluated on a case-by-case basis. This attack may not even work on some machines. First, for this kind of test you should be using printf to see where the data is: This should give you an idea of how many bytes you need to offset. Next determine whether you are working on a little-endian or big-endian system. If you are working on little-endian then 11999 is 0xDF2E0000, if you are using big-endian it is backwards. So given your program on a little-endian system, assuming all data is in the correct order in memory for it to work, and the integer is 4 bytes, you need the string "--" + (0x99-0x34) + "-...X..X" + 0xDF2E0000 EDIT: The reason for this string is as follows: first 4 bytes: "--e-" fills in your input array Next 6 bytes: "...X..X" fills in array2 and c, with correct placement of X's Last 4 bytes: 0xDF2E0000 fills in your int (little endian) with 11999 You can test this by adding: In place of your scanf. Obviously you can figure out the characters associated with those values and paste them in, but this is the fastest way to get the correct data. Of course, this is subjective to change based on system, and the code I have above may not even work on your machine. This is still a very real thing, and a good demonstration of why you should always limit the number of characters you are reading and writing, as well as make sure you use proper ending characters. If I missed any assumptions/factors above I would appreciate if someone lets me know so I can add them. 
c-12-32	X	Alternatives to my global variables for constant arrays? I have a project of recreating printf in my school. I don't want to check the format specifiers for characters all the time in my code, as I find it messy, and ugly. As for now, I have found a way by creating some global constant array, and checking using those. But I don't like the idea of having so many global variables in my code as well. Is it one of those cases were global variables are ok? Or should I use another method to get what I want? Here is how I'm starting: Global const array My header And my printf function What I want to avoid: Those are just bare-bones prototype, but I would like to know if there is a proper way to make my function as clean as that. Which means, in my opinion, that I'd like to avoid doing the check like this, if possible: If it not possible and the best way is the one I'd like to avoid, please, let me know! Thank you all for your patience, as finding good practices can sometimes be hard! EDIT: Solution I used: While the first solution has the global answer to what I should have done in this case (which is using a static variable in that file), I have ended doing what was suggested in the second answer, as it fits my needs, and avoid using static or global variables. Here is my function's code: Thanks to all of you! g_sp_integer is only used inside the is_sp_integer function, so define it there: Here is a bit different implementation utilizing pointers. I think that it is a bit more more efficient than with arrays. 
c-12-33	X	Assigning memory to array of double pointer to string? Sorry for my bad english but I have a question for you. I wrote a program with array of double pointer to string for save memory but i have a question. In calloc for col name pointer is correct? With 'frutta' the program works. Thanks in advance for your help! Nope this is not. To make it right you have to allocate memory for n pointers. (You didn't do the first calloc successfully). Syntax was wrong earlier. You have got an warning/error. Make sure to compiler the programs with all the -Wall flag. And don't forget to check every warning you get. That will help you on these cases. From standard 7.22.3.2 The calloc function allocates space for an array of nmemb objects, each of whose size is size. The space is initialized to all bits zero Two more things:- Dont cast the return value of calloc. Check the return value of calloc. Free the allocated memory when you are done working with it. Yes! I have made one extra point. It's not correct. Compiler warnings exist for a reason. calloc needs integer as a first argument, as described: void *calloc(size_t nmemb, size_t size); This is definitely not correct. The first parameter to calloc is the number of members and you're passing into it the pointer, which at this point won't have a defined value. Instead, you want to use n that you've just read in. Secondly, for the next level down, you probably want something a lot bigger than n if you're going to be storing actual strings in there. Your example of 4 would only give you space to store strings that are 3 characters long as you need to include space for the NUL terminating character. You also shouldn't cast the return value of calloc (or malloc) as it's not needed and can hide errors in your code. 
c-12-34	X	My C Programmingworking And the two functions are: This is the bug. will be the correct way. You can do it simply like this This is much more readable. Less error prone. Also op is writing to the same file from which content was read. maybe the file where it is to be written is different. 
c-12-35	X	Why we are defining head node and new node differently in linked list i just want to know if head_node is also a new_node and both are same data type struct node then why we are defining it simply as and other nodes as: Because head is there to simply keeping track of the head of the list nothing else. Now don't the new node does the same? yes it does. it keeps track of the memory that you allocate using malloc and then you point it out with subsequent node's next attribute. head is of same type as newnode and both are same functonally. but we put a different meaning to head in that - we are making it point to the head of th list rather than making it a local variable which we can throw away. Then also why head = NULL? Ah! that's because we always create a node and make it's next attribute to point to the current head and then we change head to make the new node part of our linked list. Initially the first node should be i want to know why we are not using malloc in head assignment case.. Because it's not needed - as simple as that. Why should we allocate an extra memory space and then assign it to head when the purpose of head is to just point to already allocated node. And when we add another extra node we add it to the head of the linked list and make it head. it's nothing other than pointing to the beginning of the list. That's it. new is not a good variable name. Try some good one. Think a bit before naming a variable it will save you a lot of time in future. Because when you declare head it doesn't have anything to point to yet, it indicates the list is empty , as soon as data is added it can point to the first node in the list. 
c-12-36	X	How to compare struct with pointer I'm trying to compare a field of a struct that is holding a pointer of char with a pointer of char, but the comparison is not working. Instead of You need to write: man strcmp if(aux->word == token) Well you are comparing addresses and in the case they are equal (which is highly unlikely) it will enter the block. Correct way to do is to check the contents. strcmp() is there to help you with that. Compares the content pointed by them. That is appropriate here. The == operator will not work with strings. The standard function strcmp() should be used. The function will return 0 if the strings are equal. 
c-12-37	X	In this below code what is the role of static? If i remove this 'static' then nothing will print what is the reason behind this? Don't reason about undefined behavior. Without static it is a local variable's address that you return from the function. Accessing a local variable when its life time is over results in undefined behavior. It might give you the correct result and the very next time it may blow up. Undefined behavior it is. With static the variable has lifetime beyond the scope of the function. Then you can return its address and access it outside the function because the life time is now not dependent on the called function. 
c-12-38	X	What is -no-pie used for? I was working on Ubuntu 17.10 with GPROF for some testing with c files and when i execute with gprof the file generated (gmon.out), compiling and linking with -pg option, i got an empty flat and call graph. However, i found that this is a gcc bug and i would have to compile and link the file with -no-pie. Compile: gcc -c main.c file-1.c file-2.c -pg [-no-pie] Link: gcc -o test main.o file-1.o file-2.o -pg [-no-pie] I have the gcc 7.2 version. How does this option work and why the graphs are empty if i don't use that option? 
c-12-39	X	fragment of code from the Clang documentation page In the Clang documentation page there is a fragment of following code: Why the checker warns only at the line with accesing to p[2] whereas there is a segmentation fault on line p[1] = a;. Is it a limit of the checker or there is something that I don't understand? The documentation is incorrect. (Or, if it correctly documents the behavior of the analyzer, the analyzer is deficient because it fails to detect a clear problem.) 
c-12-40	X	Stack not succeding in pushing a number into it I am trying to make a "bucket" that holds the elements in an array and when I access the push function I want to place the x element in that array. I don't understand why the array remains empty all the time. It prints for this input: " /n /n /n The stack is empty! Popped: -9999 \n \n \n \n \n The stack is empty! Popped: -9999 \n \n \n \n \n \n " The functions deal with copies of the stack instead of the original stack itself. You have to pass the stack by reference to the functions. For example And a function call can look like Also it is a bad idea when the functions issue a message. The function above could be defined like I don't understand why the array remains empty all the time. Because you pass the variable to the function by value. By that we mean, you call the function with the variable, in the called function there is another function with the same content as this one. And then you work on it. On the copy. Function ends. Copy is thrown away. That's end. The original variable is still the same. How to solve that? Well simulate pass by reference in C by passing the address of the variable. Well, without complicating things the simple way to understand this is, instead of passing the variable's value you pass the variable's address. Here also, there is a local variable in the called function which has same content as that of the address of the variable. Now you access the address via that copy of the variable which contains the address. You make changes to the variable that is being stored in that address. So the changes you make stays. How to do that? Well it's given in the other answer. The answer shows how to do it with code. Not repeating content. 
c-12-41	X	Denial of Service not working on one router I'm doing a denial of service (synflood) in C for my project in college and i have two routers to test it with. On one router is working fine i can send my cellphone down on port 443 inside the network but, if i use the other router it doesn't seem to have an effect. Now if i use hping3 instead to flood it with syn's it doesn't work too but, if i don't set any flags it works like a charm. I did tried to send without flags but still the results are the same. I did a strace of both programs (hping3 and mine) and the calls to the kernel are identitical. I program this with libnet for forging packets and send them and pcap just to get my wireless interface. I tried on a friends laptop and the big difference that i noticed was the rate of kb/s the packets were being sent. On my program if i used a fork() on libnet_write() i can send packets at 800kb/s but if i use hping3 i can send them at 10mb/s. I'm using Arch Linux. Can someone give me some tips of what i might be doing wrong or what i should be looking for? Thanks in advance 
c-12-42	X	two way communication using two unidirectional pipes Hi have written a code so that a parent sends a message through a pipe, the child receives it and print it to screen ... then the child should reply back an and the parent prints the msg inside the pipe .. the code worked perfectly with communication from parent to child .. but when it comes to the opposite close() return errors and the message is not passed ... note that I use also a shared memory to make some synchronization and control..I know there is a special type of pipes between children and parents ..but I want to use the general case one if it works for that purpose and please tell me if that is true .. here is the code Edit : I changed the title a screen shot of the terminal output here : Hi have written a code so that a parent sends a message through a pipe, the child receives it and print it to screen ... then the child should reply back an and the parent prints the msg inside the pipe .. the code worked perfectly with communication from parent to child .. but when it comes to the opposite close() return errors and the message is not passed ... Your code prints messages about the close()s, but as your code presently stands, those messages for the most part do not report the actual return values of your close() calls. You have a variety of errors revolving around them. But how do you know that the message is not passed? You write to the pipe from buff3, which is never initialized or written to. How, then, would your recognize whether the message was passed? If you're lucky then you pass a message whose first byte is '\0', so that when you print, it serves as an empty string. note that I use also a shared memory to make some synchronization and control.. No, you don't. One can use shared memory to host synchronization objects such as process-shared semaphores and mutexes, but shared memory does not by itself provide any synchronization semantics. As such, your program contains data races, and its behavior is therefore undefined. I would recommend semaphores for the kind of locking you seem to be performing, except that it does not appear to be necessary in the first place. Appropriate pipe usage does not require additional synchronization. "Appropriate" in this case would be to use a different pipe for each communication direction. Although it would be possible to use just one for both directions, doing so is messy and unnecessary. I know there is a special type of pipes between children and parents There is no special type of pipe between parent and child processes. Processes normally obtain access to a pipe created via the pipe() function either by calling pipe() themselves or by inheriting one or more open pipe-end file descriptors from their parent process. When obtaining access this way, only processes with a common ancestor can communicate with each other via pipes. Although communication between parent and child processes is a common example, such pipes are in no way constrained to that specific usage pattern. Overall: My primary recommendation is to ditch the shared memory and non-working "locks", and instead use two pipes, one for each direction. If you must use only one pipe, then perform proper synchronization. For your apparent purposes, it looks like it would be sufficient to use one or two semaphores -- process-shared and residing in shared memory -- to control which process is permitted to read from the pipe at any given time. There are other alternative, too, but shared memory alone does not provide what you need for that. and sync the process operation (r/w) using a shared memory .. it worked .. parent to child : the tweety comment child to parent : hello from the other side screen shot : the output on terminal 
c-12-43	X	strtod not recognizing inf I have the following code: the value of input came from strtok() and was passed into the check_for_non_number function... The problem is when strtok reads "inf" from the text file, my function returns 1, implying the first argument was true... For clarity, the "inf" in the text file is located in the middle of the line in the text file so there is text before and after it and strtok is being used before and after it. If anyone could shed some light on why strtod() is not handling "inf" as an input to that would be greatly appreciated! 
c-12-44	X	Pipe() and fork() The goal of my program is to create two pipes and two processes that communicate each other reading and writing to the pipes. process p1 reads from pipe c1 and writes to the pipe c2 process p2 reads from pipe c2 and writes to the pipe c1 Until the read number from the pipe is less than BIG_INT_STOP the two processes continue to increment the number in the pipes. As soon as this condition is true, first process that reads it, close the pipes, exit and prints the number. The problem is: when the process p2 ends before p1 it works and when the process p1 ends before p2 it goes in loop. Can you explain me why? Your program is a bit strange. The main problem seems to be that the second fork is executed in both main program and in the first child. In fact you are running four processes: main, two sons of main and the son of the first son. This is probably not what you want. You probably wanted to put the first switch immediately after the first fork and to execute the second fork only in the main program. And, of course, you are not checking result values of read and write for unexpected situations. Problem is p2 is forked 2 times. Once in parent process, and second time in p1 process. Instead of: You need to write like this: Your code doesn't do proper error checking on the calls to read and write which means that if there is a problem reading from the pipes, the child will enter a never ending loop as the value of c will never reach the termination value. Since your child processes close the pipes when they're done, you have a very high chance of entering a race condition where one process closes the pipes before the other has read in the latest value of c. This is compounded by the placement of your calls to fork as currently you end up with 3 child processes not 2. You should move the second call to fork after the switch as you know that at that point you can only be in the parent process and also move the closing of the pipes to the parent. 
c-12-45	X	How to modify NICE to give maximim priority to a process I created a new system call in minix called scall(SCALL). Everything complies without an error. I added my commands to the commands/simple. I added my test file(test.c):- a program running forever. And scall.c. to the commands folder(/usr/src/commands/simple). When I type test on the terminal it works. but when i type scall it says "No such file or directory " 2nd problem: I was wondering how to modify nice to take a priority and just give it the maximum priority. I only modified a few lines. This was what I did and I have an error at line 36: 
c-12-46	X	Blocked list with lock in C While learning Mutex and Spinlock, I heard that there is a list containing blocked lock (or thread)? in C. However, I don't know what is called or what it is. Please tell me what it is. Thank you. There is no such thing in standard C, but you can create something like this pretty easily. Essentially you just do: Obviously this is not exactly complete code, but the actual implementation of this type is not too much work. You just need to keep data safety in mind. Which essentially means to lock threads out any time you are doing work on shared data. If you are talking about mutex, there are two versions for lock, interruptible and UN-interruptible. mutex_lock_interruptible() puts the current process in TASK_INTERRUPTIBLE state, So the current process sleeps until the state is changed to TASK_RUNNING. For the process in TASK_INTERRUPTIBLE, there are two possible events which may change the process state to TASK_RUNNING. First event is obviously, when the mutex is available and another thing is, if any signal is delivered to process. But if the process is put into the TASK_UNINTERRUPTIBLE state, which is the case when we invoke mutex_lock(),the only event which can wake up the process is the availability of resource. Spin lock is called lock with busy-wait. why spin lock needed ? Can we use the semaphore/mutex in interrupt handlers. The answer is yes and no. you can use the up and unlock, but can't use down and lock, as these are blocking calls which put the process to sleep and we are not supposed to sleep in interrupt handlers. So, what if we want to achieve the synchronization in interrupt handlers? use spinlock. for e.g Refer any good linux kernel book you will get all these. 
c-12-47	X	Can a macro be expanded before token pasting? Consider the following code: I would like VAL(TOTO) macro to expand to val0xAA but it actually expands to valTOTO and the compilation fails. The question is: Is it possible to "force/prioritize" the evaluation of TOTO before the Token pasting evaluation ? Yes, it's a common trick. Just add another layer. 
c-12-48	X	How do I get a function to modify any of the parameters? My objective: I have to create a function which adds up two fractions. I've defined a new struct (typedef) called fraction. The function can't have a return type fraction, it has to be void, therefore it has to modify one of the parameters entered, how can I achieve this? Pointers maybe? How would you modify my code to achieve it? This is my code: This is generally a bit broad, but to show you the pointers, let me add, yes, you're on correct path. Pointers maybe? Yes. To elaborate on the why part : C uses pass-by-value for function argument passing, so, you cannot modify an argument from inside a called function and expect that value to be retained / reflected in the caller. However, if we pass a pointer as an argument, the pointer itself cannot be modified from the called function as stated above, but any change made to the memory location pointed to the pointer, will be reflected in the caller (as long as the pointer is valid, per se). Now, coming to the how part: You need to pass the third argument (or, whichever that is supposed to store the result) as a pointer to the structure variable. This way, modifications to the memory location pointed to by the address, inside the called function will be reflected in the caller. So, your function signature will look like and the function call will look like Now, the access to sol inside the called function, I leave to you. 
c-12-49	X	Using a void function to calculate most frequent integer in an array in C Hello! I am trying to create a program (school assignment) that asks the user to enter a sequence of integer numbers between 0 - 1000. The sequence stops when the user enters a negative integer or more than 100 integers. Actually entering, saving and creating a "counter" array with the amount of times the integers have been entered is accomplished. However, a part of the assignment is creating a void function that uses pointer variables to return what integer occurred the most times and how many times it occurred. When I run my code, everything works fine until I execute the analyzeFrequencies() function. The program then stops working. I expect the function "void analyzeFrequencies" to return a pointer variable value through "mOI" and "numOfOccurences". mOI is the most occurred integer. Instead, the program just stops working. I've been looking at my code for a while but can't seem to find what causes this. I might have been sitting for too long with my code and gone blind. Would appriciate any help to realize where I am going wrong! P.S! I realize the code is not optimized at all and I would gladly receive any feedback, my main priority is however making the analyzeFrequencies function to start working! In your main funciton, you have mOI and numOfOccurences declared as pointer variables, both of which are initialized to 0, meaning they are NULL pointers. You then pass those NULL pointers into your function and dereference them. Dereferencing a NULL pointer invokes undefined behavior. Declare these two variables as int instead of int * and pass their addresses to analyzeFrequencies. So declare them like this: And call your function like this: 
c-12-50	X	CLion won't show output in Debug When I start up the program, this is the output: However, when debugging, none of this shows up. Checking the debug, it does go over the printf() commands, but it just refuses to let them show up in the console. Input registers, but output never comes. This is how the start of the code is, excluding all the #includes. Also, for some reason, CLion says the code I'm building is task2-a.c | Debug if that's any help. task2-a.c being the name of the C file that's being built. I dunno what's going on... Update: Debugging works great on Ubuntu 17.04 Clion 2017.2. It just doesn't work on Windows 10 CLion 2017.3. Putting setbuf(stdout, 0); before any printf statement or any output happens fixed this problem. 
c-12-51	X	How archive numbers? Below a program that stores 10 random numbers in a file: Wwhen I run this programm more than once, the new random numbers are placed below the old ones. Î—ow can I delete the old numbers when I run the program and leave only the new ones? You probably want this: 
c-12-52	X	Get (integer[]) array value from the query result of PostgreSQL using libpq library after executing query I run below functions but don't know how to convert value to c integer array. how to get integer array from pptRawValue where COLUMN_VALUE_IN_BINARY_FORMAT when I looked at memory i can see the value are present in pptRawValue but not able to get that values in integer array in c code? please help. You can either request text mode output, then an integer[] would look like {1,2,42}, or you can request binary mode, but then you'd have to deal with the internal array representation of the PostgreSQL server. About binary mode for integer[]: Integers themselves are represented in network byte order, so endianness shouldn't be a problem. You'll have to read the PostgreSQL source to understand the structure of an ArrayType. Binary more could be a problem if client and server have a different architecture, because the alignment might differ. Found the way to extract values from received binary array The received binary array has below format. I have actually verified it. This didn't quite agree with what I found but it gave me a starting point. Here is what I found and hope experts will correct me if I am wrong: The first 20 bytes seem to have the following information about the array: --first 4 bytes don't know what it is but it is always 1&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;This is may be format number as Laurenz Albe mentioned above.&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; Reference:https://www.postgresql.org/docs/current/static/protocol-overview.html#PROTOCOL-FORMAT-CODES --second 4 bytes " " " " " " " " " 0 --third 4 bytes oid of the datatype in the array --4th 4 bytes number of elements in the array --5th 4 bytes dimension of the array Form here we have the actual data. Each datum is preceeded with a 4 byte integer indicating the number of bytes the next element occupies. Knowing the number of elements one can parse the memory and get access to the elements. Please fallow the link: https://www.postgresql.org/message-id/attachment/13504/arrayAccess.txt 
c-12-53	X	Recursive function in C (Sequence) I need to write a recursive function that recieve a number from the user and print a sequence from that number until 1 and then from 1 until the number. For example: Number: 5 Output: 5 4 3 2 1 2 3 4 5 And I can't call the function twice. Basically I just studied about recursive functions so I don't know too much about it. I know about stoppage condition (of the ifthough not sure if this is the name). So if(number == 1) will get me just until 1, and this isn't good enough. Hope for clues and NOT for solution. If num is the only parameter, use num == 1 as the base case. Print num before and after the recursive call. Recursive call uses the num - 1. Think of what you know and what you need. You have an input number (e.g. 5) That means you know how many times you'll need to print (5,4,3,2,1,2,3,4,5 - i.e. 5*2-1 = 9) That means that by knowing how many times your function is called and by knowing the input, you can easily calculate the output. So, calling a recursive function with an end condition (number of iterations) and an iterations counter could solve it. A simpler solution (one parameter) would be this: print input call recursively with input-1 print input again This lets you print your current number in the start & end, and then go "inside" and print the next number (number-1) at the 2nd place (from start & end) and so on... Note: You'll need to have a condition or this will never end. Think what your end condition should be... Here you are. The program output might look like Recursive function algorithm: Input: Number from which sequence is to be printed, say it n (assuming n is a positive number >=1). Print the number n. Check whether the number is equal to 1. If it is then return, otherwise proceed to next step. Call function recursively with argument n-1. Print the number n after recursive call. The print after recursive call will give you the sequence in reverse order while unwinding the stack. I feel kind of silly, previusly I did on my own recursive functions that printed from n to 1, or from 1 to n.. but now I truly knows what is the meaning of the order before & after the call. 
c-12-54	X	cant analysis openmp code with frama-c I'm new in frama-c. I tried to run value analysis plugin on the following c code with openmp directives : } But I got the following errors: When I tried to add -fopenmp flag to the preprocesseur options with: I got another error message: How to make it that frama-c can analyze codes openmp? Is there a way to force frama-c to use another compiler than gcc (eg: clang, pgcc)? I use frama-c Phosphorus-20170501 version, with gcc (Ubuntu 5.4.0-6ubuntu1~16.04.5). Answer to first question (how to make it so that Frama-C can analyze codes with openmp?) OpenMP pragmas are currently (up to and including Frama-C 16 Sulfur) not supported by Frama-C. Frama-C tries to parse the pragmas it encounters, and in some cases it will just ignore them, but in other cases (as in the one you encountered) it will try to parse them and fail. Such pragmas are not part of the C standard and constitute compiler extensions that are implementation-defined. Some pragmas, such as #pragma pack(), are supported by Frama-C, on a case by case basis. Also note that the usage of -cpp-command is no longer recommended if you can use -cpp-extra-args instead. In your case, using this would mean using -cpp-extra-args="-fopenmp". Not that it would help much here, since those pragmas are not supported anyway, but it should avoid the extra warnings you mentioned. I'm afraid that, currently, the best solution would consist in manually commenting out such pragmas, and then trying to parse the sources again. Answer to second question (is there a way to force frama-c to use another compiler than gcc (eg: clang, pgcc)?) Yes, and using -cpp-command as you did is indeed the way to do it. But a good understanding of the C compilation chain is helpful here. In particular, an often recommended approach to deal with some architecture-specific issues (such as custom stdlib headers and non-standard features), is to use the compiler to produce preprocessed code (eg, gcc -E <inputs> -o file.i), and then giving that file to Frama-C. Note that in the case of OpenMP in particular, the pragmas used by GCC are not removed by preprocessing (which is logical, since it uses those pragmas after preprocessing, during the compilation itself), so it wouldn't help in your case. But it does help, for instance, when using MSVC-specific code that includes several stdlib headers from the Microsoft SDK that are incompatible with those from the GNU libc). Finally, remember that Frama-C uses gcc (or another compiler) only for preprocessing the sources; the rest of the compilation chain is not used. Therefore, it is not often the case that switching from GCC and Clang changes the result, since both implement very similar features in terms of preprocessing. Again, it is often possible to use exclusively -cpp-extra-args instead of -cpp-command, which was recommended mainly when -cpp-extra-args did not exist yet. 
c-12-55	X	Using int to print character constants I wrote the following program, and I got the result as, So I tried another program, According to me, since 32 bits are used to store an int value and each of 'A', 'B' and 'C' have 8 bit ASCII codes which totals to 24 bits therefore 24 bits were stored in a 32 bit unit. So I expected the output to be, but the output instead was and I can't understand why? In C, 'A' is an int constant that's guaranteed to fit into a char. 'ABC' is a multicharacter constant. It has an int type, but an implementation defined value. The behaviour on using %c to print that in printf is possibly undefined if the value cannot fit into a char. 'ABC' in this case is a integer character constant as per section 6.4.4.4.10 of the standard. An integer character constant has type int. The value of an integer character constant containing a single character that maps to a single-byte execution character is the numerical value of the representation of the mapped character interpreted as an integer. The value of an integer character constant containing more than one character (e.g.,'ab'), or containing a character or escape sequence that does not map to a single-byteexecution character, is implementation-defined. If an integer character constant contains a single character or escape sequence, its value is the one that results when an object with type char whose value is that of the single character or escape sequence is converted to type int. In this case, 'A'==0x41, 'B'==0x42, 'C'==0x43, and your compiler then interprets i to be 0x414243. As said in the other answer, this value is implementation dependent. When you try to access it using '%c', the overflown part will be cut and you are only left with 0x43, which is 'C'. To get more insight to it, read the answers to this question as well. The conversion specifier c used in this call in fact extracts one character from the integer argument. So using this specifier you in any case can not get three characters as the output. From the C Standard (7.21.6.1 The fprintf function) c If no l length modifier is present, the int argument is converted to an unsigned char, and the resulting character is written Take into account that the internal representation of a multi-byte character constant is implementation defined. From the C Standard (6.4.4.4 Character constants) ...The value of an integer character constant containing more than one character (e.g., 'ab'), or containing a character or escape sequence that does not map to a single-byte execution character, is implementation-defined. if you want i to contain 3 characters you need to init a array that contains 3 characters char i[3]; i[0]= 'A'; i[1]= 'B'; i[2]='C'; the ' ' can contain only one char your code converts the integer i into a character or better you store in your 32 bit intiger a converted 8 bit character. But i think You want to seperate the 32 bits into 8 bit containers make a char array like char i[3]. and then you will see that this will result in an error because you are unable to convert a char array into a integer. 'ABC' is an integer character constant. Depending on code set (overwhelming it is ASCII), endian, int width (apparently 32 bits in OP's case), it may have the same value like below. It is implementation defined behavior. The "%c" directs printf() to take the int value, cast it to unsigned char and print the associated character. This is the main reason for apparent loss of information. In OP's case, it appears that i took on the value of 0x434241. 
c-12-56	X	Why malloc() called memory allocation and calloc() called contiguous allocation although both allocates the contiguous block of memory? I know the other differences between both of them like one initialize to zero and other not, but apart from that why we are calling one memory allocation and other contiguous allocation if both are allocating contiguous block. 
c-12-57	X	Searching for substrings using 'srtchr()' Using the function strchr is it possible to search for a substring in a string instead of a character? Example: Instead of this : Can this be used : Nope. You can use strstr for that Using the function 'strchr()' is it possible to search for a 'substring' in a string instead of a 'character'? Example : Instead of this : int r=strchr("Hello World",'W'); Can this be used : int r=strchr("Hello World","World"); No, that's what strstr() is for. Note also that strchr() does not return int, it returns a char * pointer to the character searched for, or NULL if not found. Compiler warnings exist for a reason... Use strstr for this. Use this link for reference http://www.cplusplus.com/reference/clibrary/cstring/strstr/ 
c-12-58	X	Recover from Hard Fault on Cortex M0+ Until now I had a Hard fault handler in C that I defined in the vector table: One of our tests triggers a hard fault (on purpose) by writing to a non existing address. Once the test is done, the handler returns to the calling function and the cortex recovers from the fault. Worth mentioning that the handler does not have any arguments. Now I'm in the phase of writing a real handler. I created a struct for the stack frame so we can print PC, LR, and xPSR in case of a fault: My hard fault handler in C is defined: I created an assembly function: This is the right time to say that I don't have an OS, so I do not have to check bit[2] of LR because I definitely know that I use MSP and not PSP. The program compiles and runs properly and I used JTAG to ensure that all registers restore to the wanted values. When executing the last command (MOV PC, R5) the PC returns to the correct address, but at some point, the debugger indicates that the M0 is locked in a hard fault and cannot recover. I do not understand the difference between using a C function as a handler or an assembly function that calls a C function. Does anyone know what is the problem? Eventually, I will use an assert function that will stuck the processor, but I want it to be optional and up to my decision. To explain "old_timer"'s comment: When entering an exception or interrupt handler on the Cortex the LR register has a special value. Normally you return from the exception handler by simply jumping to that value (by writing that value to the PC register). The Cortex CPU will then automatically pop all the registers from the stack and it will reset the interrupt logic. When directly jumping to the PC stored on the stack however you will destroy some registers and you don't restore the interrupt logic. Therefore this is not a good idea. Instead I'd do something like this: EDIT Using the B instruction may not work because the "distance" allowed for the B instruction is more limited than for the BL instruction. However there are two possibilities you could use (unfortunately I'm not sure if these will definitely work). The first one will return to the address that had been passed in the LR register when entering the assembler handler: The second one will indirectly do the jump: EDIT 2 You cannot use LR because it holds EXC_RETURN value. ... You have to read the LR from stack and you must clean the stack from the stack frame, because the interrupted program doesn't know that a frame was stored. According to the Cortex M3 manual you must exit from an exception handler by writing one of the three EXC_RETURN values to the PC register. If you simply jump to the LR value stored in the stack frame you remain in the exception handler! If something stupid happens during the program the CPU will assume that an exception happened inside the exception handler and it hangs. I assume that the Cortex M0 works the same way as the M3 in this point. If you want to modify some CPU register during the exception handler you can modify the stack frame. Thc CPU will automatically pop all registers from the stack frame when you are writing the EXC_RETURN value to the PC register. If you want to modify one of the registers not present in the stack frame (such as R5) you can directly modify it in the exception handler. And this shows another problem of your interrupt handler: The instruction POP {R0-R7} will set registers R4 to R7 to values that do not match the program that has been interrupted. R12 will also be destroyed depending on the C code. This means that in the program being interrupted these four registers suddenly change while the program is not prepared for that! 
c-12-59	X	C program to save structure data to an Excel file in a tabular format My C code saves data to a excel file, but the problem is that it dont show id and it is saved in different format,without any spaces so how can I save the structure data in a tabular format. Here is the structure: I save record to Record.xlsx file. Here is the code how i do it I have Entered 1 as the id and Pratik as the name and India as the address. Here is the screenshot how it is saved: Screenshot Of How It Is Saved Here is the screenshot how i want and also important thing that i wanna use only fwrite option: How I Want To Save By C Program Please Help Me. 
c-12-60	X	C programming : Creating substring I'm new in C and I need some explanation on what I am doing wrong. I'm trying to iterate over a string and find the first '\' then make a substring from that place in the array. There are many errors I will explain them one by one. The code will be something like this. Things you did wrong There was no memory allocated to name it was simply an uninitialized pointer. Here we have allocated memory to it. Second thing, strcmp as the name suggests compares null terminated char array not char-s. It can be done with simple == operator. The copy part is modified to only copy the user name part nothing else. That's why we have incremented the pointer to point to the correct position. You forgot to check the return value of malloc and then you should free the allocated memory. Also you can't modify a string literal because it stays in non-modifiable portion of the memory. try this, 
c-12-61	X	Print an empty line every other line when reading from file In my .txt file I have follow data. Name: name Score: 0.00% Name: name Score: 0.00% Name: name Score:6.67% and I tried using this code to get this output: Name: name Score: 0.00% Name: name Score: 0.00% Name: name Score: 6.67% Instead of that I got below output. Test History Name: name Score: 0.00% Name: name Score: 0.00% Name: name Score: 6.67% Score: 6.67% Two things: The puts function writes a newline; And the fgets functions may include the newline in the buffer. That means when you print singleLine first there is a newline (because fgets put it there), then puts writes its own newline. Either remove the newline that fgets writes into the buffer, or don't use puts. There are a few things to note: fgets() reads until a newline, and includes it to the buffer. So on the following puts() call, you've already output a newline after that, and puts() even adds a newline on its own. Consider this code: You're actually printing one newline, then break the loop. So it makes no difference from a plain Counting both things above, you're actually printing 3 newlines every while loop: One is what fgets() writes to the buffer, one from puts(), one manually. To fix them, you need to do two jobs: Strip the newline from whatever fgets() gives you: Make the loop work better: Stop using while (!feof()). Check the return value of fgets instead: the trouble is with your logic - you have the 'if' inside the 'while' so it loops and counts on each 'while' (line from your file). I'm not c expert, so no code, but it seems you get the commands. The logic I would use is to look a the text in the line and add the '\n' from that. i.e. add the \n 
c-12-62	X	Pointers arithmetic I did a recursion exercise and I could not understand what is the difference between doing *p++ or *p+=1. Both of them should add 1 to the value pointed at but for some reason *p+=1 works and *p++ doesn't. *p += 1; means, dereference the pointer p and then increment the dereferenced value by 1. While *p++; means This is because ++ has higher precedence than * operator so compiler will parse it as *(p++);. (*p)++ is equivalent to *p += 1;. Precedence wise Here *p+=1 is increasing the value that is pointed by p. Here the value at the memory location pointed by p is incremented. You can see the change in your code. In the second case, *p++ it is just increasing the pointer p and then it de-references the value but you don't assign that r-value anywhere. This is not changing the actual content that there is in the memory pointed by p. That is why in second case you don't see any change in the working variables and concluded that it doesn't work which is certainly not the case. 
c-12-63	X	Ascii to Decimal In Memory, Would there be a bitwise shift answer? My question: I would like to change the Ascii (hex) in memory to a Decimal Value by shifting or any other way you know how? I would like a function to assign the memory as follows: From (Input): Example Memory: 32 35 38 00 (Ascii 258) Example Pointer: +var 0x0057b730 "258" const char * To (Output)(The ANSWER I am looking for): Example Memory: 02 01 00 00 Example Pointer: &var 0x0040f9c0 {258} int * Example Int: var 258 int This function will (NOT) produce my answer above: This function will produce a Decimal (600) answer and a Hex(258) answer. I've seen a lot of answers and questions about changing Ascii To Int or Ascii To Hex or even Ascii to Decimal and none of them answer the question above. Thanks for any help you may provide. "I would like to change the Ascii (hex) in memory to a Decimal Value by shifting.." No, shifting won't help you here. "...or any other way you know how?" Yes as you say there are questions already answering that. (in short you need to replace your shift operation with adding cWork times the correct base ten (1,10,100) and get it right with endianess. But just use an existing answer.) You pretty much got the correct algorithm. You can left shift with 4 or multiply with 16, same thing. But you need to do this for every byte except the last one. One way to fix that is to set result to 0, then each time in the loop, do the shift/multiply of the result before you add something new. The parameter should be an array of char, const qualified since the function should not modify it. Corrected code: Function that could have been useful here is isxdigit and toupper from ctype.h, check them out. Since the C standard does in theory not guarantee that letters are adjacent in the symbol table, I added a static assert to weed out crap systems. First of all, for the computer decimal and hex make no difference as the number is store in binary format anyway and it is presented to the user as a needed by different print functions. If I understood your problem correctly, this should simplify your life since you need to convert the c-string only to one of the two formats internally. You can then display the number in decimal or hex format as the client desires. Normally, when I do those things by myself, I convert a string to a decimal variable working from the units up to the higher order numbers: Please take the above untested code just as a reference for a solution, it can be done in a much better and more compact way. Once you have the number in binary format you can manipulate it. You can divide it by 16 (mind the remainders) to obtain an hexadecimal representation of the same quantity Finally, you can convert it back to to string as follows: You could achieve a similar result also with atoi and similar, which have a lot of side effects in case of failed conversion. Left/right shifting might not help you as much, this operation is like elevating a number to a power of two (or taking the log2, for a right shift) with an as larger exponent as the number of shifts. I.e. unit8_t n = 1<<3 is like doing 2^3 and I don't think that pointer address is relevant for you. Hope this suggestion can guide you forward 
c-12-64	X	Partition mesh with METIS based on geometrical position I am trying to partition a mesh using Metis. The mesh topology is like this : [ The circular geometry overlaps the rectangular one ] Now when the geometry is meshed, two non-connected meshes are generated, one for rectangle and one for circle. Now when I parition them with METIS, since the mesh in circle is not connected to mesh on rectangle, the processor/partition to which the circular mesh is assigned is arbitrary. Is there a way to partition the above mesh as : so that the overlapping parts of the mesh go to the same processor/partition ? I am not restricted to METIS. Thanks in advance. 
c-12-65	X	Embedded-C:How to perform division between 2 unsigned integers and display the answer in decimal format I am new to embedded System. I would like to perform division between 2 unsigned 16 bit integer and display the answer(including the decimal values). I wonder how can I accomplish this in embedded-C. Float,double and unsigned long does not seem to work. I am using TI's TM4C launchpad. For example when IR_combined is: 147 and RED_combined is: 1012, the PPG: 6. However I would like the answer to be displayed as 6.88 instead. For 2 decimals precision, you need to do (uint32_t)RED_combined*100/IR_combined. Then print the decimals as you would like them. Example: However, you also have lots of other problems/bugs: IR_combined = (PPGMsg[1]<< 8)|PPGMsg[2]; is dangerous/buggy code. Since PPGMsg[1] is a small integer type, it gets promoted to int and you end up performing left shifts on a signed type. Similarly, the | invokes implicit promotion to signed type. You must study Implicit type promotion rules. (PPGMsg[3]<< 8)|PPGMsg[4]; Same bugs here. PPGMsg[0]=(RED_combined/IR_combined); You store the result in a 8 bit variable that is too small to hold the result. I don't understand how this makes any sense. Are you trying to parse out the ls byte? %d is used to print signed integers. UARTprintf("IR_combined is: %d\n",IR_combined); should be "IR_combined is: %"PRIu16 "\n",IR_combined. You find these format specifier macros in inttypes.h. Same bug: UARTprintf("PPG is: %d\n",PPGMsg[0]);. Should be UARTprintf("PPG is: %"PRIu8 "\n",PPGMsg[0]);. unsigned long is printed with %ld Using the correct type matters, everywhere! Also consider using a good compiler like gcc that does warn if you use the wrong format specifier. Or better yet, don't use printf-like functions at all - they are unsafe, slow and resource-heavy. 
c-12-66	X	Why the output is zero? Here the output is printing zero for both cases of "a". But if I remove the first "a", then the output became correct. What is the reason? 
c-12-67	X	Is Mutual Locking necessary when there is a single reader, single writer accessing a single Queue (FIFO)? Given that there is a main thread (actual process) and a writer thread (posix thread created and invoked before main thread starts its work) and a single Queue(Doubly linked list). Reader thread can create a buffer (node), fill the buffer with data and put it in the Queue. Writer thread can read the buffer and process it and delete that buffer (node). Writer thread keeps on waiting until reader thread signals reading completed using the flag as in below snippet to the writer thread. Writer thread waits on if there is no node in the Queue until the reader threads adds a node to the Queue Do I require mutual locking for this single reader - single writer scenario? I considered context switching between threads, and found out that there can be a problem when there is 1 node in the Queue if there is no mutual locking. So I have now modified my Queue structure such that the first header node is a dummy header node with the count of the number of nodes...So, now I will never have to delete the first node (dummy header node)... I ran the code and tested and didn't have any problem. But I want to know this so that I can make the appropriate changes to avoid future problems. Since there is a single reader, single writer, A node is added to the queue only when its ready to process, A node is deleted from the queue after processing - I think mutual locking is not necessary. For more details: This above scenario is similar to a single producer - single consumer scenario with two different pointers head and tail with a special Queue as discussed above with a dummy header node. Please throw some light and explain me if my understanding is right. 
c-12-68	X	Explanation regarding output of C program Output calculated by me is 3 1 2 2 1 3 4 And Output given by book 3 1 2 2 1 3 4 4 4 I know why my answer different. In book solution they are executing printf statement in "if" loop always. But as I study in my book scope of if, for and while loop is up to next statement if parentheses are not present. After if statement true count is called and printf not get executed. But why they are executing it each time. If you do not give parenthesis to your if, for, while statements they will only execute next line. After changing: To: Your output will become closer to what you expected it to be: If the output by the book is '3 1 2 2 1 3 4 4 4' if not change this: The first 4 is printed because the if guard stopped the recursion. The second 4 is printed as the (recursive) function call for count(n:1) has returned. The third 4 is printed as the (recursive) function call to count(n:2) has returned. I think your confusion is that you believe that making a recursive call causes the caller to end any further processing of its function body. But this is not the case, unless there is a return statement that ends the function early. For example, if the recursive call was guarded like this: Then, the output would match your expectations. Only one 4 would be printed, the one that executed because the if evaluated false. All the other recursive calls would execute return after completing, so no other 4 will appear. Also note: and are equivalent. And the code means: print d after the if block completes. There are two ways for it to complete. One way is when the if condition is false. The other way is when the if condition is true, the recursive call is performed, and then that call returns. When recursive call returns, the if block completes, and then d is printed. Further note, while very closely related, and computationally equivalent, recursion cannot be considered an ordinary "loop". A recursive call implies multiple active local stacks, while an ordinary "loop" only has the current local stack, and the loop execution block. Thus, a print statement after an ordinary "loop" will only get executed once, which is after the loop completes. However, code that follows a recursive call will get executed after the recursive call returns. So, if the recursive call is performed 2 times, there are three active local stacks that need to complete. In your code, each of those local stacks want to print d after the if block completes. 
c-12-69	X	connect() works in pure C but not in Python extension I'm writing a Python extension involving socket programming and I'm stuck. The socket program works fine when compiled, but gets blocked at the following line when using as a Python extension: I looked this up but found nothing useful. The complete code is available here (the above line occurs at 117). 
c-12-70	X	Linux Device Driver: IRQ 1 and IRQ 23 Some days ago, I posted a question here, asking how to safely develop a keyboard interrupt handler. Digging more into the suggested answer, made me to find out that basically my default keyboard handler is not set into IRQ 1. This is because cat /proc/interrupts and watch -n1 cat /proc/interrupts both highlight that IRQ 1 is not responsible for the keyboard handling. Besides, since I have my keyboard and mouse, both, connected via USB, I found out that IRQ 23 is responsible for two USB devices. Then I modified the code a little. Whenever I set my handler to IRQ 23 simply by free_irq(23, (void*)irq_handler), I can get the interrupt fired upon any key pressed/released and any mouse movement. So, basically IRQ 23 triggers in response to any keyboard and mouse events. Here I am not able to find which key is pressed because both ports 0x60 and 0x64 always report the same values 156 and 28 respectively under any mentioned action (key press, key release, mouse click, mouse move, etc.). There are two things. 1) why IRQ 1 is not responsible for the keyboard interrupt handling, and 2) if IRQ 23 is responsible, why getting values from ports 0x60 and 0x64 cannot resolve what I expected from my code posted in the above link? Thanks for any suggestion. 
c-12-71	X	Compilers and Instruction sets "C is a genereal purpose language, not tied to a particular system" The C programming Language, BRIAN W KERNIGHAN & DENNIS M. RITCHIE Yet with the right compiler we can make a .exe which runs on every Windows machine, which in turn means on every CPU Windows runs on. So my question is: does every x86-64 CPU (Intel or AMD) use the same instruction set ? (yes, I could make a comparison...) if not, then I'll have to assume that the compiler detects what CPU we're running and uses the right instruction set during compile time. Am I totally mistaken ? I barely know what I'm talking about so please bear with me. Just a dude trying to look under the hood. Thank you Intel makes many different processor models that share a core instruction set of the "x86-64"? family (and additional processor models that do not). Even among the processors with the shared core instructions, there are variations. Newer models may have instructions that older models did not, and some parts of the instruction set may be on certain models and not others. Some instructions even behave differently on different processors. When you compile a program, the compiler "targets"? a particular combination of instruction subsets. This means the instructions in those subsets are available for the compiler to use when it is generating code. The compiler might or might not use any particular instruction or subset depending on its needs or choices when compiling a particular program. The resulting program is then suitable for processor models with the targeted instructions and not for other models (unless the compiler happened not to use any of the instructions not on those models, even though it could have). Often, the default setting for the compiler"˜s target is either a processor model like the one you are running on or some typical selection of instruction subsets that is common for modern processor models. The target may also be selected based on other settings you give the compiler, such as asking it to target a particular version of an operating system. However, you can pass the compiler switches to tell it to compile for entirely different targets, even for entirely different architectures, such as compiling for an ARM processor while running on an Intel processor. Software is also part of a computer system, so the executable file the compiler produces may also depend on certain software libraries being available at run-time or certain operating system features being available. 
c-12-72	X	Bit shift operator replacement in c How can I replace the >> operator? For example in this case (bit representation): The following are only valid for unsigned number x (Thanks @Groo for correction). x>>1 means right shifting x in its binary representation by one digit, which is equivalent to dividing it by 2 and only keep the quotient, discarding the remainder. The line in your program can be replaced with In case someone need it, is equivalent to (without considering overflow) 
c-12-73	X	MISRA C 2012 Rule 20.5 #undef should not be used I am trying to get rid of violation of Rule 20.5 Sample code: Is there any work around for undef here without changing any other lines ? No, there is no work-around. The code is badly written, there is no justification for using the pre-processor like this. It is just obfuscation - get rid of it. Use plain variables instead. There exists almost no scenario where the use of #undef is justified. The only valid case I can think of is "X macros", and even those should be used sparsely. 
c-12-74	X	Dynamically declaring structs not working as expected I'm having issues with my program, and I'm trying to break it down and I'm seeing that I'm having issues with memory allocation at a minimum. I have a struct: I would expect the size of this struct (one single instance of it) to be (4 ints * 4 bytes) + (1 bye char * 3 * 3) or 25 bytes. When I run the sizeof() function on simBoard, I get a value of 28 bytes. I'm assuming that it's the 25 + 3 extra that I don't need to worry about. The main issue is when I try to declare an array of this struct Assume size is some constant for this scenario. To my knowledge this should create an array of the simBoard struct, of size size. I should be able to go And get the 4th item of boardArray correct? However I'm running into an issue with the memory allocation. When I run: The return value is 8. I even tried to further sort out the issue: When I ran the printf again, I'm still getting a value of 8 bytes for boardArray. If you guys could lead me in the right direction that'd be fantastic, as I'm absolutely stumped here. Thank you! You can indeed index the 4th struct in the array using the notation boardArray[3]. Bear in mind though that boardArray itself is a pointer type. That explains your printf output. Arrays with dynamic storage duration and pointer types are inextricably linked in C. For the avoidance of doubt, sizeof(boardArray) is sizeof(simBoard*). C doesn't provide functionality to obtain the length of an dynamic array. You need to remember the length yourself. Don't forget to call free(boardArray) when your done. The C runtime library will take appropriate measures to ensure that all the struct elements are freed. 
c-12-75	X	Adding a constant to the name of a variable in C What I would like to ask is if there is a way to declare a variable with an index (that I get through my program) and append it to my variable name. An example of that could be: Where the name of the char would be mq_1, mq_2, and so on.. Is that possible to do? The answer is no. Unless the variable is declared extern so that the linker needs to know about it, the name of the variable is completely unavailable to the program at run time (excepting that there might be a symbol table for the debugger). If you are attempting to add an index to the variable, why not use an array instead? No. Variable names are not present when C code is executed (typically), since they are removed by the compiler. C is not typically a "dynamic" language, you can't generate source and have it evaluated at run-time since the typical run-time environment does not include a C compiler. If you want an array of strings which you can index, use use an array of strings and an index: This will print are, the third element in the array. Remember that C arrays index from 0. You can't define the variable name dynamically. In your case you should use an array. 
c-12-76	X	Makefile: "undefined reference to cos" I have just started learning about makefile files. I created a program that consists of two functions and wanted to use a makefile to put it all together. This is my file: However, when I run this, I get an error - "undefined reference to cos". I am using the cosine functions in my program, but I have already linked the library to the compilation of those two files. I thought about adding "-lm" to the first clang option as well. This led to no errors, but it made a warning instead - saying that "-lm linker is unused". What should I change in my file? The "-lm" is a linker option but you have only included it in your compilation rule (main.o: main.c). You need to include it in your linker rule (main: main.o find_root.o). As it stand the -lm option is ignored during compilation and missing during linking. The linker flags aren't used when compiling, but when linking, so the command for the main rule should have -lm, rather than the command for the *.o files. Better would be just to set the appropriate variables, and let Make use its built-in rules: 
c-12-77	X	Getting empty output when reading from file using "mmap" I have a problem considering the usage of mmap. I am trying to map a pci device to a virtual address and read its content. In the future I am planning to write values to it as well. The problem is that I (seemingly) successfully mapped the device to virtual memory space. However when I read the content of that virtual address all values are zero, despite the file not being empty. Here is my code: Here's the content of the first line from the file "/sys/bus/pci/devices/0000:04:00.0/resource" that I am trying to access: However the output I get is: Am I doing something wrong? Every help is appreciated! Actually you've got 2 mistakes: Don't use MAP_ANON when you create a map for a real file on the file system, it's meant for IPC and requiring extra memory from OS e.g. while malloc(). When you remove the flag, the mmap() will likely return ENODEV, because linux sysfs doesn't support mmaping; So you have to use read()'s here. 
c-12-78	X	CPython: how to link an external library (C or C++) to an extension I'm trying to implement an extension that requires use of external libraries. How can I configure include files, libraries and the path where dynamic libraries should be found? I've tried not adding these parameters and it seems compiling without any error but then, if I try to import the module, I obtain a segmentation fault error probably due to something lacking in configuration settings or setup.py. 
c-12-79	X	Why my while loop is not breaking. C I am a newbie at programming and I just learned about for, while,do etc.The problem is that when I try to break the loop with the first check (the while does)it doesn't break and it keeps going. I tried a lot of things to deal with this problem (like copy pasting the whole program my teacher show me.) I currently program with code block's For example if I give the number 0 to value at the beginning the program will not break at once and it will keep going as many times I try to break it . Then it will break by itself. If it loops infinitely, its likely that you have forgotten to apply a terminating condition. For example, if you want to iterate 5 times then code is : and if you want to force break it then use break keyword. You have to decrement the value once your operation is done inside a loop to come to an end condition otherwise it will run in an infinite loop since your if condition simply check whether it is != 0. Since the definition of GetInteger is not given here I simply assumed it is gonna return an integer may be from an input. Try this Code This line uses buffered IO. You will not see it on the terminal until either the buffer is full and gets flushed The program executes fflush(stdout); You print a line feed \n. It's likely that your program is waiting patiently for you to input an integer, but you don't know it because the prompt is still in its internal buffer. Assuming you don't want a line feed between printing the prompt and the user entering an integer, change your program as follows. 
c-12-80	X	pointer file randomly changes value in middle of reading raw bitmap data I am currently working on loading a bitmap file in C. I am kind of new to C, and I ran into a problem: I have a file pointer that reads unsigned chars to a struct of rgb pixels, (it's called rgb but it reads in the order of b,g,r and padding - this is the default of bitmap format file). My file is 12x12 pixels and when it reaches to row 9 it putting only the value '204' in each component, whike the image is white (i.e. all components = 255). All the components before this equal 255. EDIT: I changed the enum to a three defined values returned by the image state (didn't load, blue, not blue). EDIT2: I edited the code, but now im equals 0xffffffff and cannot be accessed to. here's the code: } close filePtr before opening file again and offset to raw data is bfh.offset Reading in bitmaps is always a difficult thing. There are quite some points to consider. With this line your read the reserved byte of an RGBQUAD from the file. However, this member is not in the file. The image data in the file contains scanlines. See below. After reading the Bitmap File Header, you open the file again. However, you didn't close it. This might be succesful or it fails because the file was already open. But you don't chek the return value of fopen. Anyway, there is no need to do this because after having read the BFH the filepointer is positioned at the BITMAPINFOHEADER; you can just read it in. And you need to read it in, otherwise you won't know the dimensions of the bitmap. From MSDN documentation: The established bitmap file format consists of a BITMAPFILEHEADER structure followed by a BITMAPINFOHEADER [...] structure. An array of RGBQUAD structures (also called a color table) follows the bitmap information header structure. The color table is followed by a second array of indexes into the color table (the actual bitmap data). For 24 bits-per-pixel bitmaps, there is no color table. so the sequence is now: Now we must calculate the amount of memory needed to store the image. An image consists of heighth rows of width pixels. The rows are called scanlines. For some reason, a scanline is alligned on a 4 byte boundary. This means that the last bytes of a scanline may not be in use. So the amount of memory to read the bitmap data from the file is the heigth of the image, times the number of scanlines of the image: Finally you can read the data. If there was a color table, you should have skipped that with a seek but since there is none, you can now read the data: Now, to address the pixels you cannot use a simple two-dimensional notation governed by width and heigth of the image...due to the scanlines. You can use the following: So to address a 3-byte pixel (x,y) use: im[y*scanlineSize + x*3] .. except that I believe that scanlines are reversed, so the pixel would be at im[(bih.biHeight-y)*scanlinesize + x*3]. 
c-12-81	X	exec() and pipe() between child process in C I'm trying to implement this using pipe() and fork() : ls | wc First I checked if pipe works fine, and here is the code. I checked it works fine. I replaced read() and printf() to exec(), like : My terminal just hang. I think wc process doesn't get any input. So my question is, why read() and printf() works, and execvp() doesn't work? You need not to wait every time you create a new process and also close the descriptor in the parent, something like: 
c-12-82	X	Fail to allocate a large amount of virtual memory I read that when you try to allocate more bytes than are available in RAM using malloc(), it allocates virtual memory. At least on Linux. I want to allocate a huge amount of virtual memory, lets say 100 GB. So, I wrote something like this: But the returned pointer is NULL. I execute this code on a 64-bit Ubuntu virtual machine. What am I doing wrong? EDIT What I'm trying to achieve is to make htop tool displaying 100GB in VIRT column for my process. UPDATE I CAN call malloc to allocate 2 GB at once 50 times I read that when you try to allocate more bytes than are available in RAM using malloc(), it allocates virtual memory To start with, this is not correct. You always allocate virtual memory. This virtual memory is mapped to some area on the Physical memory(RAM) or the swap space. If the swap space + physical memory is less than 100 GBs, your allocation will fail. Also, the libc implementation might fail to allocate such a large amount, if it has some (programmable) limit set. but I have a strange task to show up 100gb of virtual memory for the process in htop tool. And it's claimed to be achievable via single line of code. Yes if you just need this much virtual memory, you can reserve memory but not commit it. You can read upon how mmap(*NIX) or VirtualAlloc(Windows) can be used for the same. When you reserve a particular Virtual Address range, you tell the operating system that you intend to use this range, so other code can't use that. But it doesn't mean you can actually use it. This also means that it doesn't need a RAM/Swap backing. So you will be able to reserve arbitrarily large amount (less than 2^48 bytes on your 64 bit system of course). Although I am not sure if htop will include that in the value it shows, you will have to try that out. If this doesn't indeed add to your virtual memory count, you can map it to a file, instead of mapping it anonymously. This might create a 100 GB file on your system (assuming you have that much space), but you should even be able to read/write to it. Following code can be used on linux - The following code done the thing for me: Where int_pow is just a custom pow implementation, which operates integers. After running this app htop tool shows that it uses exactly 100GB of virtual memory. 
c-12-83	X	How do I correctly read a file byte by byte without losing any information I guess the real goal is to successfully mimic strace's output in regards to the read() syscall argument reading that it magically outputs. And to make this as clear as possible: It means that it displays them in a way that WILL NOT be interpreted by the console. For example, if a file contains \0004 or \0104 then it will DISPLAY \0004 and \0104 as LITERAL STRINGS (as if you wrote \\0004 or \\0104 instead) so it will NOT be interpreted by the console. Below is an example of what it should look like (apart from the ./catraw's output which is incorrect). (ELF header and instructions are acquired from nasm, strace, and cat.) This is a bit unclear (not sure about all the assembly), but something like this: This builds "\177" when called with c = 0177. And yes, obviously the call to snprintf() in the first case can be factored out for printables. 
c-12-84	X	Is "printf("%d\n",(int)a);" undefined behaviour for unsigned int? If I use wrong format specifier like this : It is invoked undefined behaviour because %u format specifier for unsigned. C11 standard Â§ 7.21.6.1(P9): If a conversion specification is invalid, the behavior is undefined.282) If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined. But, If I write like this: Is it also undefined behaviour? Is it also undefined behavior? No. The argument is of the correct type. It expects a signed integer, and you provide one. The only caveat is that the outcome is implementation defined (not undefined). 6.3.1.3 Signed and unsigned integers - p3 Otherwise, the new type is signed and the value cannot be represented in it; either the result is implementation-defined or an implementation-defined signal is raised. So either it will print something (because the conversion happened), or will raise some signal. Whatever happens, your implementation is required to let you know by documenting it. 
c-12-85	X	printing multidimensional array in c I am trying to print an array with specific dimensions, but it prints out wrong entities when it's run. After compiling it prints out the next result: Change char array[][w] to int array[][w] in the function print_array, which expects integer array. The compiler would have issued incompatible type warning, but that's easy to miss! Try to compile the program with zero warnings. 
c-12-86	X	passing character pointers to an external x86 32bit function I am trying to write a small program that takes two hard coded character pointers and switches the contents that they point to using an external x86 32bit function located in a .S file. I am using the basic gcc compiler. Here is my C code: valSwap.c: Before running swapMe(c, d) the strings that c and d point to are quite clear. After running swapMe(c, d) I get a Segmentation Fault. Here is my code for the swapMe external function: swapMe.S: Now since swapMe(c, d) is taking in 2 parameters using the cdecl calling convention I should find c and d on the stack at $esp+4 and $esp+8. I tried to print these values to confirm that they are what I expect. Either they are not what I expected or I tried to print them incorrectly: I also tried printing $eax as a string since I moved the contents of $esp+4 into $eax. I also printed the hex values of c and d before entering swapMe to see if I'm at least getting the correct value: I printed a few others values that may be relevant as well: I don't understand why I'm getting different values when I print the values of $eax, $edi, $ecx, and $esp in swapMe vs when I print the values associated with c and d before calling swapMe. Since swapMe takes in c and d as parameters, I expected to see the same values on the stack when calling swapMe but I do not. I did not see 0xffffdb2c or 0x565556c0 once when printing any registers. Please clarify what I did wrong when calling the function, passing in the parameters, or printing the values in the registers. I'm very new to x86 so I probably made a rookie mistake somewhere. 
c-12-87	X	How to implement bitmap array in C using uint64_t data type? I am trying to implement bitmap array in C. I've read and copy-paste from this link: What is a bitmap in C? Using uint32_t, the code works well. It prints x value: 1, 3, and 7, respectively like this: x=7 It doesn't work. The x value become 1295807169 etc, which was not I expected. I expect it to be the same as before (1, 3, 7). Can someone help me fix that code? I know "<<" is bit shifting, which mean you shift the bit to the left (or adding 0 to the right). But I am still not sure how to modify the code myself. The problem is that the code uses 1 integer constants. All such integer constants have a type just like variables and it is per default int, which is likely the same as int32_t on your system. Left shifting a signed integer like int32_t more than 30 bits invokes undefined behavior, because you'll be shifting data into the sign bit. As a rule of thumb, never use signed variables together with bitwise operators. The correct fix in this case is to replace every instance of 1 << BIT_OFFSET(n) with: Alternatively use 1ull suffix, but that may produce needlessly slow code on smaller systems. Please note that the correct format specifier for printf is printf("x=%"PRIu64 "\n",x); from inttypes.h. 
c-12-88	X	Default signed integer is correct than unsigned. Why? The default integer declaration assumes a signed number. But when i tried it printed "-26" only. Why? It is undefined behaviour because you have used wrong format specifier. Use %u instead of %d for unsigned int. like : C11 standard Â§ 7.21.6.1(P9): If a conversion specification is invalid, the behavior is undefined.282) If any argument is not the correct type for the corresponding conversion specification, the behavior is undefined. 
c-12-89	X	Make this for-loop more efficient? edit - - This code will be run with optimizations off full transparency this is a homework assignment. I'm having some trouble figuring out how to optimize this code... My instructor went over unrolling and splitting but neither seems to greatly reduce the time needed to execute the code. Any help would be appreciated! Assuming you mean same number of additions to sum at runtime (rather than same number of additions in the source code), unrolling could give you something like: Alternatively, since you're adding the same values each time through the outer loop, you don't need to process it N_TIMES times, just do this: This requires that the initial value of sum is zero, which is likely but there's actually nothing in your question that mandates this, so I include it as a pre-condition for this method. First of all, unless you are explicitly compiling with -O0, your compiler has already likely optimized this loop much further than you could possibly expect. Including unrolling, and on top of unrolling also vectorization and more. Trying to optimize this by hand is something you should never, absolutely never do. At most you will successfully make the code harder to read and understand, while most likely not even being able to match the compiler in terms of performance. As to why there is no measurable gain? Possibly because you already hit a bottleneck, even with the "non optimized" version. For ARRAY_SIZE greater than your processors cache even the compiler optimized version is already limited by memory bandwidth. But for completeness, let's just assume you have not hit that bottleneck, and that you actually had turned optimizations almost off (so no more than -O1), and optimize for that. There is pretty much only one factor left which still could have reduced the performance, for a smaller array. Not the overhead for the loop, so plain unrolling would had been pointless with a modern processor. Don't even bother, you won't beat the branch prediction. But the latency between two instructions, until a value written by one instruction may be read again by the next instruction still applies. In this case, sum is constantly written and read all over again, and even if sum is cached in a register, this delay still applies and the processors pipeline had to wait. The way around that, is to have multiple independent additions going on simultaneously, and finally just combine the results. This is by the way also an optimization which most modern compilers do know how to perform. On top of that, you could now also express the first loop with vector instructions - once again also something the compiler would have done. At this point you are running into instruction latency again, so you will likely have to introduce one more set of temporaries, so that you now have two independent addition streams each using vector instructions. Why the requirement of at least -O1? Because otherwise the compiler won't even place tmpSum in a register, or will try to express e.g. array[j+0] as a sequence of instructions for performing the addition first, rather than just using a single instruction for that. Hardly possible to optimize in that case, without using inline assembly directly. Or if you just feel like (legit) cheating: The compiler will then apply pretty much all the optimizations described above. You only need to calculate the sum of array once: Except by cheating*, this inner loop is essentially non-optimizable. Because you must fetch all the array elements and perform all the additions anyway. The body of the loop performs: a conditional branch on j; a fetch of array[j]; the accumulation to a scalar variable; the incrementation of j. As said, 2. to 4. are inescapable.Then all you can do is reducing the number of conditional branches by loop unrolling (this turns the conditional branch in an unconditional one, at the expense of the number of iterations becoming fixed). It is no surprise that you don't see a big difference. Modern processors are "loop aware", meaning that branch prediction is well tuned to such loops so that the cost of the branches is pretty low. Cheating: As others said, you can completely bypass the outer loop. This is just exploiting a flaw in the exercise statement. As optimizations must be turned off, using inline assembly, pragmas, vector instructions or intrinsics should be banned as well (not mentioning automatic parallelization). There is a possibility to pack two ints in a long long. If the sum doesn't overflow, you will perform two additions at a time. But is this legal ? One might think of an access pattern that favors cache utilization. But here there is no hope as the array is fully traversed on every loop and there is no possibility of reuse of the values fetched. 
c-12-90	X	Linked list in a shared memory segment I am currently working on a part where a linked list, one linked list node has multiple variable data, is to be saved in a shared memory segment so that another program can read that list and do operations accordingly. I have previously worked on socket programming, but sending a stream of data does not fulfill my purpose, as I have to do validation based on reading one node/element at a time. So, of all the IPC's, I think shared memory would be the best as it also has good performance than others(in this case, not generally). The following is the struct that I have made: As you can see, I have also included an XML parser part in the main function so as to give you an idea of what I am taking as an input. But the part where I am stuck is how to save/use this struct inside a shared memory, and making it easy for the other program to access it. Please can somebody provide me with some pseudo-code for the same as I have never used such C functionalities before and am absolutely clueless on how to approach this. Any and all suggestions are welcome and am thankful in advance. Edit 1 Using Centos7 on a virtual machine since somebody pointed out that mentioning the platform would be fruitful. Edit 2 Just added some code to implement shared memory segments, and it does not give me any such errors. What my concern is: Is it doing what I intended? Is the approach correct? I know I am currently just pushing one element but this sure is right, right? Am I wasting time and efforts trying to work it out using shared memory? You will need to: Setup shared memory on your platform - see here. In your program, call shm_open to open the shared memory and use mmap to access it using a pointer - see here. Accessing shared memory from different processes/thread must use some arbitration/mutual exclusion mechanism - see here. In general you cannot warrant that a shared memory segment will occupy the same virtual address range in one process than in other. So you'll have a problem when trying to interpret the values in the pointer fields, as they represent the address of the pointed object in the virtual address space of the process that wrote there the pointer value and this can be different if both processes map the shared memory segment at different places. You can pass the mmap call a pointer to tell the system where in your virtual address space you want the segment to be mapped, so the shared pointers point to the same place in both virtual address spaces. But that pointer is only a hint, and the operating system is not forced to follow your pointer. There are two solutions for this. The first is to offset the pointer values, so you construct your virtual address space pointer from the one you see in the shared segment. The second is to ensure your memory segments both are mapped to the same address. This has to be coordinated between both processes (but it has to be done only once, at memory mapping) as the place that is good for one can be forbidden for the other (because it has mapped some other thing there) In 64bit architectures this is easy, as you have a zillion virtual addresses to map the segment to, and probably you can select an address without clashing with other subsystem. Think that in 32bit systems, normally shared libraries consume a bunch of addresses for the data segments of the modules herein, and the stacks makes provision for large amounts of memory, and the heap also... so you have to plan the thing before an attempt of putting both segments in a shared, identical address. NOTE In your particular case, that almost all the fields of the structure are pointers, this applies to all the fields, and not only the list linking ones. Not only all the list nodes must lie in the shared segment... also all the strings, and everything you access that is shared. 
c-12-91	X	Exclamation mark appearing at the end of last value in string array C For some reason, when I malloc for stringArr[n], the value at strArr[n-1] either adds a '!' at the end or replaces the last char with a '!'. In GDB, when assigning to strArr[n], the string looks find but when n is incremented, when mallocing strArr[n] (n+1 in this case), strArr[n-1] gets the '!' added. I have no clue why this is happening. You don't want this. Because sizeof of a pointer is fixed (for a system). So you are allocating fixed length string for copying each tokenized string(which may have length more than what you have allocated). So strcpy is accessing memory that is not even allocated. This is undefined behavior. This will be Now you are making sure that dynamically allocated memory has length capable of holding the string (NUL terminated char array) to be copied. Also another thing, check the return value of malloc. Cases when malloc fails it won't run into undefined behavior accessing it. Free the dynamically allocated memory when you are done working with it. 
c-12-92	X	Error: Expression must have a constant value in keil Here is my code: This code works in code blocks but not in Keil uvision4. I get "Expression must have a constant value". As I understand, you've somehow rectified your problem without compiling as C99. Prior to C99 (named because it was ratified in 1999), C89 (named because it was ratified in 1989) required that your kind of initialisation only use constant expressions. Let us first explain that term, constant expression, since it is commonly confused with the const keyword. C89/3.4 Constant expressions does a far better job than I could at that, so without further adieu: A constant expression can be evaluated during translation rather than runtime, and accordingly may be used in any place that a constant may be. In other words, if the compiler can work out the result without executing your code, it's a constant expression. On the subject of initialisation, C89/3.5.7 states: All the expressions in an initializer for an object that has static storage duration or in an initializer list for an object that has aggregate or union type shall be constant expressions. Regarding aggregate types, within C89/3.1.2.5, the following is stated Array and structure types are collectively called aggregate types. C99/6.7.8 Initialization seems like it was an entire overhaul of that section, and the requirements for aggregate types (such as your array) were relaxed. Thus, compiling with a modern C99 or C11 compiler should certainly resolve your issue. C11 didn't change too many things from C99. That standardisation mostly just added some small features like anonymous unions, threads and so on, deprecated gets and made VLA support optional... The section number describing initialization has changed; in C11 it's section 6.7.9, instead, which is likely because of the additions I mentioned beforehand. Please read the standards with a little free time every now and then. Just twenty minutes a day. Do it next time you use a function that you use all the time, but which you've never read the manual for. Search for the function, see if it's in the standard so you can see if it's portable... learn about it, what it returns, etc. You never know what little nuances in C might turn your code from absolute garbage to brilliance, and you won't know the nuances unless you read about them. Peace! Happy C99ing! 
c-12-93	X	strcpy() is not working I am trying to find hash of a number and copy to a string using strcpy(), but copy operation is not working properly. Here is my code: Output: SHA1 digest{7c1824c5}: c79851b5 RET HASH:::c79851b5 HASH_NONCE::: ï¿½9ï¿½ Using strncpy() instead of strcpy() strncpy(hash_nonce,temp,strlen(temp)); Output : SHA1 digest{7c1824c5}: c79851b5 RET HASH:::c79851b5 HASH_NONCE::: temp_hash = mdString; mdString is a local variable that is out of scope as soon as the function ends. And you are accessing it when it's life time is over invoking undefined behavior.(You are accessing it in strcpy() ) Get rid of this allocating dynamic memory. With proper checks after dynamic allocation and freeing it after working on it. 
c-12-94	X	Which lines are necessary to use espeak in our C/C++ program? I found this code on the internet: I only want the espeak reads my strings in my program, and the above code can do it, but I want to know, are all of this code necessary for that purpose? (I mean is it possible to simplifying it?) ***Also I like to know are there a way to using espeak as a system function? I mean system("espeak "something" "); ? The usage of eSpeak itself seems pretty minimal - you need to read the documentation for that. There are some minor C coding simplifications possible, but perhaps hardly worth the effort: The memset() is unnecessary. The structure can be initialised to zero thus: If you declare text thus: Then you can avoid using strlen() and replace Size with sizeof(text). The variables I, Run and L are unused and can be removed. To be able to pass the text as a string on the command line, and thus be able to issue system( "espeak \"Say Something\"") ; for example, you simply need to pass argv[1] to espeak_Synth() instead of text (but you will need to reinstate the strlen() call to get the size. 
c-12-95	X	How to find orthogonal distance between epipolar line and feature points? How to find orthogonal distance between epipolar line and feature points? Feature point can a point that is taken for tracking in next consecutive frames like harris corner etc. is I'm using opencv c++ . please help me or give some good reference. Thanks 
c-12-96	X	How do I upgrade a shell into TTY in C? I'm developing a client that uses TCP sockets to connect to a listening server (an ncat for example) and when it does the program uses the dup2(socketfd, all three standard I/O file descriptors) syscall to send a shell to the server when It connects to it. (Like an SSH Tunnel but without encryption) When my ncat receives the connection I get a shell but when I executed VIM from that shell I get the following errors: Vim: Warning: Output is not to a terminal Vim: Warning: Input is not from a terminal I can't use the editor properly in that shell, and I just don't know why, in fact the entire command line doesn't feel right, nor functional. I investigated and I think its because I need to "Upgrade the shell into a fully interactive terminal" or TTY, I've read the OpenSSH source code in GitHub to come up with some clue of how to fix it and I think the <termios.h> library is key to fixing my problem, but I still feel lost. 
c-12-97	X	epoll events do not raise SIGIO Based on my research, you can add an epoll file descriptor to poll, select, or another epoll and it will return POLLIN if events are available. According to epoll(7): This works in my testing. But, I am now trying to apply O_ASYNC to my epoll fd so that it will raise SIGIO when events are ready: When I do this, it doesn't raise SIGIO for the new events in epoll. Poll indicates that there are events ready in epollFd, but it should raise SIGIO (which just checks to see if events are in epollFd and exits) first. I know I can apply O_ASYNC to the socket (and I have tried this too) but I wish to include data with my events. Epoll lets me do this. Here is my full code: Edit: According to this website, what I am trying to do should work: 
c-12-98	X	OpenMP Parallel Computing Prime Numbers The following is simple code for computing prime numbers: Our task is to use OpenMP pragmas to speed up the computation, since looping through 100,000,000 integers will take a long time. I tried putting the #pragma statement where I currently have it in my pasted code, and when I run the code I get the following output: Clearly seeing this as incorrect, I tried putting a #pragma above the for loop in the is_prime() function, but I got compiler error saying error: "invalid branch to/from OpenMP structured block". I realize this error is coming from the thread potentially entering the if statement and returning 0 in the middle of the parallel operations. The thread gets terminated prematurely and the entire operation comes apart. I feel like its most appropriate to put the #pragma inside the function call, as it can cut the run time down by v/4 for each call to the function. However, I do not know the proper syntax to do this. If someone can please help me out I'd greatly appreciate it. Thanks All the threads could pass in the if block at the same time and modify bracket inconsistency The pragma "#pragma omp critical" can prevent this: The code above won't totally answer your question: I think you wanted to know how much primes were under 10, 100, 1000, ... But the openmp way to handle for is the following: it cuts the loop in 4: the first from 0 to N/4, the second from N/4 to N/2, the first from N/2 to 3*N/4, the second from 3*N/4 to N. So as to know, how the primes are distributed, you should have some different approach: Edit: As Zulan said, I've should have use at least atomic instead of critical Do not seek a change in syntax, there is a need to change the concept of thinking - it happens in parallel Given num_threads( 4 ) was instructed above, the forthcoming operations happen one besides other three. This means if one thread goes into prime_count++ and takes the "current" value of prime_count, so as to add +1, as the instruction commands, the other threads had no way in your code to wait, before the first taker finishes the ++ and stores the "new" value ( that ought be used by other takers ). Without any coordination tools, the uncontrolled additions look fine just on the first look, but once you realise, that you have many times a wrong "initial" value ( which can and in many cases was in the meantime ++-ed by any of the other threads ), so the final result is just a wreck havoc. Explicit coordination and/or sharing of variable is possible, but is expensive in time. After generating correct results, the performance matters: Better move would be to principally avoid colliding reads/writes at all levels ( and best avoid mis-alignments and cache-inefficiencies ): Hope you may also enjoy an extended syntax-decoration, borrowed from a true-[PARALLEL] language occam-pi, so as to emphasise the thread-aligned code-execution ) Feel free to further experiment with the code Live / on-line. user3666197 gives you an example of how to do this by hand. That is fine for understanding, but you don't need to do it yourself - instead you should use the abstraction OpenMP provides - which is a reduction. A reduction will give each thread a private variable and after the parallel computation, those are added together to the original variable. A correct example without the intermediate output is simply: To reproduce the intermediate output in parallel. I would rather have all threads work on a bracket and then one reports the aggregate result. This is still easily achievable with a reduction and gives you a correct summarized information of how many primes are in each chunk: I split the for and parallel because it can be costly to reopen parallel regions again and again. 
c-12-99	X	C time.h wrap around I would like to assign max possible time to a time_t variable then convert it to a string and print out the result. Can you correct my code please? This is wrong: This tries to assign the return value of ctime (a pointer to a char) to *strOfMaxTime a char. Instead call: And then check the return value of strOfMaxTime as it may be NULL if ctime fails to convert maxTime The maximum year is 2038, and this is known as Year 2038 problem: https://en.wikipedia.org/wiki/Year_2038_problem OP's code is using char *ctime(const time_t *timer) incorrectly. Yet simply assigning maxTime= LONG_LONG_MAX; is not necessary the correct way to determine the maximum time a system can handle. Below is a trial and error method - likely with various implementation limitations. localtime() returns NULL when time_t is out of range. Output (Note that 17:59:59 depends on timezone and the year 2,147,483,647 is the max 32-bit signed integer. YMMV.) From C Standards#7.27.1p4 The range and precision of times representable in clock_t and time_t are implementation-defined. First, you need to fix the issue in your program. The below statement must be giving error while compiling: Change this to: You can use perror() to get the error message for the given input - LONG_LONG_MAX, like this: On my setup I am getting this output: Indeed, LONG_LONG_MAX is invalid input. As the standard mentions that the range of time_t is implementation-defined, so if I give UINT_MAX I am getting the output: Numerous errors have been pointed out in other postings (assigning output of ctime() to *strOfMaxTime, LONG_LONG_MAX, etc). On my 64bit Ubuntu 16.04 Linux system, time_t is defined as a long int and a long int is defined as 8 bytes as is a long long int. However assigning LLONG_MAX to maxTime still causes ctime() to fail. So I modified your code to get a range of what the upper limit of valid values ctime() will accept. Running it yields the following output: 
c-12-100	X	C Program Arrays comparison We have two arrays A and B, each of 10 integers. Write a function that tests if every element of array A is equal to its corresponding element in array B. In other words, the function must check if A[0] is equal to B[0], A[1] is equal to B[1], and so forth. The function is to return true if all elements are equal and false if at least one element is not equal. The errors that I get are: The problem is you have declared array: but not defined it. When you link, the linker looks for the definition of function array and cannot find one, prompting the error: To define the function at same point your declare it, you must add the body of the function. In that case, there is no need for a forward declaration. It has been declared before its use in main, e.g. (note: regardless of whether you use memcmp or simply loop over each element and perform a single comparison for each, you must pass the number of elements as a parameter) If on the other hand, you do not define the function until after main(), then the forward declaration is required so that the function is usable in main(). Putting it altogether, you can do something similar to the following: (note: if there is any chance your arrays differ in number of elements, you should check before calling arraycmp and handle the error as you wish. Either return exiting that point or pass the size of the smaller and only compare that initial number of elements) Example Use/Output Changing 57 to 56 in array2, Look things over and let me know if you have further questions. 
c-13-1	X	UDP Socket Programming - Printing the data twice When I call the recvfrom() for the 2nd time. It is printing both what it has received 1st and 2nd recvfrom() 1st time : It is a handshake recvfrom() 2nd time: OutPut: Received: SNK? Received Query: SNK? Received Query: Some data! PS: Client is sending SNK? only once. It works fine. I have tried to clear the buffer with memset() and fflush(). But it is still printing the both. Someone help me to get rid of this problem. Thank you 
c-13-2	X	How to solve "subscripted value is neither array nor pointer nor vector" I'm solving C programming quiz. The quiz problem was "what is the output of the following code snnipet?" Honestly I didn't understand the problem, so I tested on my local machine. I'm getting compile error on (1) and (2). Here is the error message num1.c: In function "˜main': error: subscripted value is neither array nor pointer nor vector So for the question on this post, How can I test this code without compile error? Expected output : de, ad, be, ef, or 00 I think the problem asks about the first byte of four bytes uint32_t arranged in memory layout. That depends on endianness. If you want to find out the output, you may check this code. 
c-13-3	X	Unable to get list item display text I always have how to return 0, when I try to send message to listview to get the text of the item. I've tried everything, should I give up? 
c-13-4	X	Sending messages with mpi I need some help here. I have a mpi program, that just send and receive messages. But the program don't work correctly.I read and saw another examples and i think that my program have to work.When the program run, the messages are send but the program doesn't finish. It's seem like it would be waiting for something.Here is the code I run my program for 5 process mpirun -np 5 holaMundo The output is the next: Like you can see the program doesn't finish. I think it have work... Thank for your help and sorry for my english again. MPI_Finalize: "All processes must call this routine before exiting" Your code with better indention looks as follows: See my added comment at MPI_Finalize. 
c-13-5	X	Problems creating a list inside a list I used the printfs to see where i get the segmentation fault. It manages to print 1 2 3 4 5 and then "Segmentation fault(core dumped)". I tried different ways to make it work. Like trying temp -> rootvert -> linkv = NULL. But still a coredump. After that it shows 1 2 3 4. 
c-13-6	X	Web-CGI scanner doesn't hit end of input I have just started to learn c programming and have been getting along pretty well with the language. I have written this test program that's basic functionality is to read a list of IP's from a list and then send a GET request to the IP and the CGI path defined. What i would like this program to do: The aim of this program is to run through a list of IP's, send the GET request to all entry's in the IP list, read the response header for "200 OK" is well as look for Hello world!. Error's i'm getting. Currently when i'm running the script overnight i come back to sort the list and find that its been looping all night running over and over again is well as spitting out false positives that i'm guessing its following redirects. 
c-13-7	X	fscanf only scans first string, doesn't continue loop/scan I have to write a program that does the following: Read a text file find the word with the most frequented letter, display that word, the letter and how often it appeared in the word. My current set-up looks like this, I have everything set-up except that my fscanf only reads the first string, and doesn't continue reading the file. My test.txt file consists of the following : Hello, this is a new file with a few repeated words. Expected output should be: Letter: 'E', Freq: 3 time, Word: repeated But I receive this: Letter: 'L', Freq: 2 times, Word: Hello, 
c-13-8	X	Valgrind says "definitely leak" but is it? I am trying to write a Monte Carlo Tree Search for tic-tac-toe game but there are real memory problems (e.g. my computer runs out of memory) while running it. So I decided to investigate situation with valgrind. Below, one of code block that valgrind says 'definitely leak'. where Player and player_t And they are used in that way; Am I passing pointers around in wrong way? Valgrind Dump; where Line 348 is start of player_init_all and Line 351 start of the for loop in the player_init_all A rather obvious memory leak is here You allocate memory for Player objects inside the above loop. But immediately after that player_init will allocate it again and overwrite the values of (*p)[0] and (*p)[1], definitely leaking what you allocated in the above loop. Looks like you malloc enough space for your array of Players: then malloc 3 Player structs: Then in your init function you malloc the Players again: This overwrites the initial malloc, which is leaked and never freed 
c-13-9	X	printf deadlock - some printf messages ignored if printf used in signal handler Here is a slide from System Programming course I'm currently taking: catch_child is SIGCHLD handler. How does the output correspond to the code? Why are some "Child #x started" messages not printed? By definition, deadlock is a situation when no progress is made. So it is not that some printf messages are not printed/ignored, but that after some particular printf call the program is waiting for something that will never happen and it keeps waiting there forever. For more info about what causes such behavior see: Why are malloc() and printf() said as non-reentrant? 
c-13-10	X	tilde operator query in C working differently I came across this question. What is the output of this C code? I know what tilde operator do, now 10 can be represented as 1010 in binary, and if i bitwise not it, i get 0101, so i do not understand the output -11. Can anyone explain? The format specifier for an unsigned decimal integer is %u. %d is for a signed decimal integer. printf("%d\n", a) is interpreting a as a signed int. You want printf("%u\n", a). It's undefined behaviour, since "%d" is for signed integers; for unsigned ones, use "%u". Otherwise, note that negative values are often represented as a two's complement; So -a == (~a)+1, or the other way round: (~a) == -a -1. Hence, (~10) is the same as -10-1, which is -11. The bitwise negation will not result in 0101. Note that an int contains at least 16 bits. So, for 16 bits, it will generate: So we expect to see a large number (with 16 bits that would be 65'525), but you use %d as format specifier. This means you interpret the integer as a signed integer. Now signed integers use the two-complement representation [wiki]. This means that every integers where the highest bit is set, is negative, and furthermore that in that case the value is equal to -1-(~x), so -11. In case the specifier was %u, then the format would be an unsigned integer. EDIT: like @R. says, %d is only well defined for unsigned integers, if these are in the range of the signed integers as well, outside it depends on the implementation. 
c-13-11	X	how memory allocation by calloc() is different that one allocated by melloc()? I know that calloc() function a=(int*)calloc(10,sizeof(int)) allocates a contagious block of memory(memory blocks without any padding or space) for storing 10 integer elements. but how does it even matter as malloc() function a=(int*)malloc(10*sizeof(int)) does the same thing by allocating a big memory block of 40 bytes in this case. Why this is considered as one of the difference between malloc() and calloc() that one allocates a memory block whereas the other allocates the contiguous one although the addresses are consecutive in both the cases, keeping all other differences aside. 
c-13-12	X	program in c with tcl does not work ing 64 bits An old program in c /tcl is working fine in 32 bits. I am trying to compile in 64 bits and it does a segmentation fault when executing. After some research, i have found the c function who cause the problem, but i am unable to debug more, due to lack of knowledge of tcl. As somebody some experience in c / tcl ? The function is working fine in 32 bits so it must lack something ... Regards, Serge here is the function : 
c-13-13	X	how to convert char containing operator into actual operator in C I want to ask if it is possible without using bunch of extra if statements convert char that contains an operator into an actual operator using like one or couple lines? What I would imagine looking is something like that: Sorry for something stupid, I am just a starter. No, you will have to have separate statements for each operator you wish to apply, whether that is done with 'if', 'switch/case' or a function-lookup table, the compiler is not going to perform any magic to turn a run-time decision into a compile-time choice. C is a compiled not an interpreted language - all the source is translated to machine level instructions at compile time, not at run-time, so generally it is not possible - at least not by any means that you should reasonably consider - most plausible means would look like virus or malware code behaviour. What you could do is implement an expression evaluator like this one where an entire expression string is evaluated (not just the operator, but the operands as well) - essentially implementing an interpreter within your code. If all you want is a one line expression to perform an operation on b and c selected by x then the following will do that: though I'd strongly suggest splitting across multiple lines for readability: though in truth I'd strongly suggest not doing that at all! Note that while the above is strictly a single expression it is likely to be less or no more efficient than a switch/case, and probably identical to an if/else if. As a beginner you should be striving for simple readable code - even if that code is longer. When you become an expert, you will know that such code is most often folly. You gain efficiency in coding by code reuse, not by writing shorter code - write once use often. Shorter code is often less generic and therefore less reusable. 
c-13-14	X	Using sleep() when reading from a serial port I am writing an application to read data from /dev/ttyUSB0. I found it necessary to call sleep before calling read in the while loop so that I get the entire line at once. Otherwise, sometimes I get part of the line and the rest in the next iteration. Do I have to package my data with a header containing the length of the string being sent over? Or is there a better way? The better way is to simply deal with receiving partial lines, have your code reading the data figure out when you have a complete line if that is important. something like (not tested at all): 
c-13-15	X	Makefile optimization for quickly compiling a library as quickly as possible? Are there any methods I can use to shave seconds off my library's compilation? My old Makefile took 1.86s to run, up to 5.147 total. After I changed Into: @$(CC) $(FLAGS) -c $(OBJ:.o=.c) And added @ to silence all the output, my new Makefile took 1.40s to run, up to 3.481 s total. I'm wondering if there's any ways I can optimize my makefile to simply make it run faster or make it more "useful"? Where do I go to learn about micro-adjustments to get a slightly faster compiled program? https://github.com/Hourai42/libft/blob/master/Makefile Redo only what needs to (huge improvement). Use parallel make (significant improvement if run on a multicore CPU). Invoke only one single shell per recipe (moderate to minor improvement). Example: And then, if you have, let's say, 6 cores and hyper-threading: Note: of course, with parallel make, do not parallelize cleaning targets (clean, ultraclean) and building targets (all), as you do with your re target. 
c-13-16	X	C program to count symbols in a file (without \n \t ' ') and print the line with the most of the symbols and the line with the least amount of symbols So I have this big assigment for university and I am a beginner in programming and I need little bit of help with this program I am writing.So basically I have to write a program which counts the symbols and characters on every line in a file(without '\n', '\t', ' ') and to print out the line with the most symbols and characters and that one with the least. For example if I have in the file 1.Hello my name is Martin 2.I love meatballs 3.Bacon is great It should print out for example: "Line number 1 has the most characters and line number 3 has the least characters". I made the symbol count and the line count but everything else is darkness.Please help thank you. ** Edit ** My apologies, thanks for pointing out the inadequacies. From what the assignment description sounds like, you don't need to count the total number of symbols in the entire text file, but the total number of symbols per line. Have a few variables for line number with least symbols, the least amount of symbols, the line number with the most symbols, and the largest amount of symbols. Each time as you read a line, have a temporary variable that counts the non-whitespace symbols as long as the character is not '\n'. Once you reach '\n', check if 1) the current line count is either smaller than the smallest count or 2) the current line count is larger than the largest count. If so, update the new counts and the new line numbers. I'd code it as this: Thanks so much for your help.I was able to write the program and find the leastLine - here is the code: But there are some problems: 1.If I change this line and instead of leastCound[0]>leastCount[i] I change greater than to less than I getsomething like "-327806". 2.In my "text.txt" file(the file where I test my program) if line 1 is the leastLine , the program doesn't count it as the leastLine.. I get this when I modify the program to print all numbers and lines :https://pasteboard.co/GY2wLq7.jpg Instead of using the arrays to keep track of the line numbers and their lengths and then iterating over the arrays to check which line number has the least characters, I think it would be easier to just keep track of the counts with the variables that I used above: leastLine, mostLine, currCount, leastCount, mostCount. What I would do in the commented area is: You would also need to do this check at the end, after the while loop, because you wouldn't be able to check the last line otherwise. (Unless you slightly modify the while loop.) If you really want to use an array to keep track of the lengths, I'd suggest an array declared like this: int lineLengths[200], where the index (1 - 199, not 0-199 because line numbers start at 1 so in order to avoid confusion, it would be easier to leave the first element at index 0 empty) represents the line number, and the value at the index would be the number of characters. Then, you could iterate over this array to find the smallest and largest counts and store the line numbers for both. 
c-13-17	X	openMP crushes without a good reason (?) I'm new to openMP and having some problems.. I tried to read the documentation but in vain. Probably I'm missing something basic. Any help will be appreciated. Anyways, here's a skeleton of my program (complied with gcc -O3 -fopenmp. I also tried without the -O3.) - apologies for any typos. I tried to use openMP locks but it resulted in segmentation fault. So instead I use my own locks. Another issue is that I need an auxiliary (relatively large) buffer for each thread. I tried allocating it as a local variable (on the stack?) but again the program crushes. So instead I allocate it beforehand with malloc, one for each thread. But however I try to do it, the program either crushes (stack overflow?) or it gets to an infinite loop (for reasons which I cannot understand). The program runs without a problem without threading. Are there any memory considerations (or otherwise) that I'm overlooking? 
c-13-18	X	Swap nodes in a linked list without swapping data how can i use pointers without copying the data? I want to write a bubble sorting function, but I got stuck, and need some help how to swap node addresses instead of values. I have a file with city names, and temperatures: Las Vegas, 25 New York, 33 Chicago, 23 Houston, 39 and I need to sort it by the temperature, and write it to another file. UPDATE: Ok, now I think i understand the theoratical part: This is what i need to do, to swap the nodes, but syntactically i couldnt make it work. To swap two nodes in a singly-linked list you can use the following function For example to swap the head node and the next node you can call the function like See also my answer at this reference Bubble sort in c linked list where there is shown how to write the bubble sort algorithm for a singly-linked list. We need to swap the next links such that the link chain is rearranged. If you swap node1 and node2, the link chain should change as follows: We put this inside a while loop and the loop breaks when there are no more swaps. We can improve this function by limiting the number comparisons. After each loop, the last element should be sorted. To put this together,lets use typedef keyword so that we don't have to repeat struct everywhere. 
c-13-19	X	Sending multiple files in 1 connection client server C I would like to send multiples files on a single client server connect. The server should accept a connection from the client and then loop through a folder and send every file in there to the client. What is a good way to do this so that the client can save each file after receiving them and then correctly read the next file. I have the following server code which only sends 1 file and closes. This is what I came up with, if anyone has any constructive criticism would love to hear. Works fine with python client I wrote to read 10bytes (filesize), 50bytes(filename) and filesize bytes (filedata). python client 
c-13-20	X	Scanning Into Structure In C Error expected expression before 'car' appears within the for loop. Am I using fscanf correctly? Why is this happening? I am a super noob. 
c-13-21	X	How to send output of previous programme in pipe to the next programme correctly? The goal is to implement terminal command prog1 > file && prog2 | prog3 given the arguments prog1, file, prog2 and prog3. I can't make this code to show data that last programme got from previous one. For example (assume programme's name is prog): doesn't show current date. And I don't understand why. Can you explain? You have three exec's, but 2 forks. I personally would do three forks (one for each exec), and have 2 pipes to communicate within the processes. If you run: at the command line prompt of a shell, you will get a newline and no date. Change echo to cat and you will see the date: You could fix your code so it works better on errors: A lot of C programming is about error handling. Having a function library that makes error reporting simpler helps enormously. For example, I have a library with header file stderr.h and implementation in stderr.c " source available from GitHub. It simplifies (and improves) the error reporting: For example, the err_syserr() function reports the system error number and message as well as the command name (prog41) and the message specified in the call. (And yes, there are ways to compress both programs a bit more " the else on the outer if block could be removed, leaving the following code one level less indented (and the code three lines shorter), for example.) This program was prog41, and the test output could be: After running the program successfully, the file not-there was there, of course. 
c-13-22	X	Implementing Chess AI in C I've made a chess engine in C, it's a functional engine that allows me to play chess. My next step is to make chess AI, however I've run into a huge road block. What's the best way to implement the chess AI? I've looked at several different things and it seems to cause issues. My current idea that I'm struggling with is creating each move tree as a different struct, so I'd have an array of structs. I would copy over the board status and status of variables such as castling and en passant. The issues with this is that I'd have to redo basically my entire program, maybe it was bad foresight, but I didn't program anything revolving around using this struct system, so for the AI I'd essentially have to reprogram the move generation functions. I'm a first semester computer engineering student so I haven't learned too many complicated tactics, but I'm struggling to figure out how to store the different boards and interact with them. I have an evaluation function to evaluate the board, but not much else in regards to AI. Right now I'm representing the board as an 8x8 array of char variables. Thanks! 
c-13-23	X	C access symbol in executable (linux) I have an executable binary with many symbols. I am trying to figure out how to access those symbols in my code. dbg can so I know its possible im just not sure how. I cannot create a shared object from it with "gcc -shared -o myexe.so myexe" because there are multiple definitions of the same function This means that gcc cannot link to it during compile time with -L because the of the same issue. the nm command shows all the symbols and the one I want. If I could modify the symbol table to remove all the exports but the ONE I need then it might work but I can't find how to do that. Or if anyone could point me in the right direction to access a binary during runtime and load a function with a physical address that would work too. Any help is appreciated. Thank you. 
c-13-24	X	C application not working properly } The function copiar( , ) should copy everything inside the folder of the first path into the second folder. but it is just copying the files inside itself and renaming them in a weird way. Debugger isn't even working. Any help? To begin with: sprintf(destino,"%s%s",&dir_dest, datos.cFileName); should not have & before dir_dest, and should have a path separator between directory and filename and, the line immediately following : printf("%s\n",datos.cFileName); should also have destino included (note that doing that would probably have already answered your question / and solved your problem Probably it's because you do copying only if datos is not a directory: 
c-13-25	X	Convert audio data to base64 encoded string in C I am recording audio using PortAudio in C and I want to convert that audio into a base64 encoded string to send to Google Cloud Speech API. How can I convert the audio data into a base64 encoded string? If I do a loop through the values in recordedSamples, each iteration prints out a float value so I know that recordedSamples is an array of floats but I don't know how to convert that to a base64 encoded string. Here is my code: 
c-13-26	X	MPI_Bcast, broadcasting array buffer to specific locations in the receive buffer Using MPI, I want to do a broadcast operation by all processes in the communication group such that at the end of boradcast by all processes, the buffer in all processes have the same data. Here is a fragment of code depicting what I want to do : I know there is MPI_Scatterv which on calling on each processor can do the work but this means I have to create two additional arrays, one for send_counts and displacements, which will always be the same for each scatterv operation. Is there an easier way to do this ? If i understand correctly your question, what you really need is MPI_Allgather() MWE: 
c-13-27	X	Replace CR LF with LF in C I have to write a C program that somewhat function like dos2unix. Which replace all CR LF with only LF (DOS-Format to Unix-Format). So this is my way of approach. Everytime I read a line, I search for the end of the data by lookng for \0and then check if the following are \r\n. If yes replace with \nonly. But it seems do not work and the line CRLF here never been printed out once. You have a whole bunch of bugs: You may need to open in.txt in "rb" mode, instead of "r" mode, to see the CRLF line endings in the first place. You may need to open out.txt in "wb" mode, instead of "w" mode, to prevent the C library from undoing your work. You cannot compare string literals with ==. You can compare one character of a string to a character literal with ==, but that's not what you're doing, and it only works for single characters; a CRLF sequence is two characters. You cannot replace a two-character sequence with a one-character sequence within a mutable C string by simple assignment. You would need to use memmove to shift all the characters after the replacement down one. You do not properly handle very long lines. You do not check whether fopen succeeded, or for any other I/O errors. while (!feof (fp)) is always wrong. A better way to write this program is with a main loop that goes character by character, something like This converts both \r\n and bare \r to \n, because bare \r is very rare nowadays, but was used as the line terminator on some historical OSes (notably classic MacOS), and there isn't anything else sensible to do with it. It's important that c be an int, not a char, so that it can hold EOF as well as all possible characters. 
c-13-28	X	Linked List in C: Delete Second Node and Free Memory For some reason, if I have a linked list that looks like 3->2->1->0, and I called deleteSecond(head), I get 3->1->0->0. Here is my code: I believe my deleteSecond function should be correct. I create a pointer to my second node, and then I make the head->next = head->next->next, and the I free the pointer to the second node. I don't know why I have two 0's at the end of the list. You are creating an empty node head which is creating problem. Your last node should point to NULL. So initializing head = NULL is the correct one. This is wrong. Correct would be Then again same way it would be Now let's see what you did here. head's data or link attribute is never initialized. So you get undefined behavior accessing it. This is the code you wanted to write if you want to allocate memory to head. Here we have used one extra node for holding the dummy data. Yes! it's not needed. This dummy node is doing nothing significant other than providing an next link for the newNodes which is not needed if you just use head as LinkedList or struct LinkedNode* and allocates no memory to it. It suggests we can eliminate than and simply use the pointer to struct ListNode namely head. Then the code will be simply like There are couple of things you can consider Don't hide pointers under typedef. Do check the return value of malloc. Do free the memory that you allocate after you are done working with it. The code can be written this way also. It doesn't use the pointer under typedef and modularize the reusable codes. 
c-13-29	X	How to let the user decide when to stop a for loop from counting (C programming) I'm trying to build a program that counts the number of times a/b/c is entered and prints the results. Right now I can only enter one of the three letters 4 times using for loop. My question is, can something be done to let the user(me) decide when the loop should stop? Maybe like pressing 'Z' then the counting variable 'i' stops counting. I actually know a method of achieving this using while loops and the function getchar but I'm trying to find different ways of doing it. //Using while loops I'm sure there are more "correct" ways of doing it, but simply letting the continuation of the loop depend on a specific input should do the trick, as such: Since you are currently doing for (i = 0; i<4; i++) it will only run through your loop 4 times since you are checking to see if i is less than 4. You could set i < #some larger number and it would allow the user to enter more choices but wouldn't be infinite. You could also do something like the following where it will check to see if i does not equal z. Once it does equal z it will exit the loop. Disclaimer: While this appears to work I'm unsure of the implications it may have as I am not much of a C programmer. Edit: Per the suggestions of @yano and @Weather Vane, I've changed it to use scanf instead of getchar which will help remove new line characters. I've also changed/initialized i as char i = -1; Code: #include <stdio.h> #include <stdbool.h> #include <stdlib.h> #include <ctype.h> int main() { char a = '?'; } You could also do this without the use of switch. A simple do-while loop and if-else statements. If you wish to check for more than 10 elements you could either change the macro definition. 
c-13-30	X	Linux Socket Program to Start Server and Client I have a client and server program that takes multiple clients by forking itself. Now I have to write a program that starts a server forks it, and then fork two clients to connect. The issue I'm facing is that the server uses a while loop to accept new connections and messages, so the main program is halted. My goal is to have the server and client run simultaneously rather than one after the other. server.c main.c See A Simple Stream Server from Beej Client-Server Background 
c-13-31	X	How do I avoid memory leak when concat string pointers in C I am working on a parser for a programming languages class and am having a memory leak issue while turning my expression tree to a string in the preorder arrangement. Before i had it that when allocating memory to string in exprToString it was 100 * sizeof(char), however the mem leakage results were far greater. So, i got rid of the 100 * but i still get non ascii printouts and the odd recurring "retu"... here is a sample expression: z / ( x + 2 * x ) here is the printout : 0etur/z +x *2 x Whats happening? your concat function is okay but the start of exprToString is wrong: you're allocating only a 1 byte string, and it's not even nul-terminated, so further call to concat concatenates some string with undefined length with ex->value. If what you want is initialize string with a copy of ex-value, just replace the above with: The next problem is a memory leak when doing this: you're overwriting the previous value of string, so it works but you get a memory leak because you don't have a chance to free the input. You could change concat so it frees the first argument by calling: just before returning the result. Or use realloc on s1 so it frees then resizes. But both are not very handy. What if some caller doesn't read the docs, needs the string for something else, of if you're passing a literal as first argument ? That would make your concat function not so useful and error prone (unless it's called with a very special name for this very special purpose) The simplest way is to decompose your concat call: C language doesn't have a lot of magic behind the scenes, like operator overloading or garbage collection, so everything must be written explicitly. There are (at least) two serious bugs in the current code in the question: First, and most subtle, is that you sometimes (mostly) return pointer to allocated memory, but sometimes return a pointer to a constant string. That means the calling code cannot reliably call free() on the returned value, which either leads to subtle (or maybe not so subtle) memory corruption when the returned pointer is freed or it leads to leaks because the returned pointer is never freed. Neither is satisfactory. Make sure that if you return a pointer, it can uniformly be released. Consider returning a NULL pointer instead of the single-blank string, but if you must return the single-blank string, make sure you allocate it. Note that the early return leaks memory too, completely unnecessarily. Second, and more serious, you have to preserve pointers to the memory returned by concat so you can free all except the value returned to the caller. The first problem is at: You don't check the memory allocation succeeded. You don't ensure that you have a string. You need *string = '\0'; to be safe. Then you have: After this, you've lost the only pointer to the memory allocated by the first malloc() " which is the very definition of a memory leak. The next two lines make the same mistake; you've leaked 3 blocks of memory before you return. One solution to this is: That begins to look unpleasantly repetitive. An alternative solution changes concat() " both the code and the semantics. If you demand that the first pointer be a pointer to freeable (reallocatable) memory, you can use: Now you can use a slightly modified version of your original code: Now there are only options on more leaks because exprToString() returns a pointer to allocated memory that you never free. There are multiple ways to deal with that, too. One such is for concat() to be redefined to take two pointers to freeable (reallocatable) memory and free the second pointer before returning. You then have to worry about the call string = concat(string, ex->value); " one safe alternative would be string = concat(string, strdup(ex->value));, for example. (At least, it's safe if the concat() function checks for null pointers.) There may be other problems I've not spotted yet. The suggested code has not been past a compiler " there could be bugs in it. In particular, I've not fully tracked what happens after every possible explicit allocation failure; there could be issues in the error recovery code. There are those who are adamantly opposed to casting the result of malloc(). I'm not adamant about it if you guarantee that you compile with options that ensure that malloc() is declared before it is used. I followed the original code in leaving the casts in place. Here's where the memory leak is coming from: Every time you call concat, you overwrite the current value of string, which contains a pointer to malloc'ed memory, with a new pointer value, discarding the old value. You should change concat to use realloc on the first parameter if it is not NULL. That way you can grow the buffer as needed. On the initial call to concat, you would set the first parameter to NULL. So modify concat to use realloc: Then you change exprToString to : Note that because this function is expected to return dynamically allocated memory that the base case cannot return a string literal directly. Whoever calls this function is responsible for freeing the buffer that was returned. 
c-13-32	X	Pointers in example I've been struggling to get a firm understanding on pointers in c. I found an example that hopefully with some explanation will help me and others struggling understand. Here is the output Here are my questions as I have them. Why is *b declared as an int but yet b is set equal to &c. What is b=&c doing in relation to declaring *b as an int. In the chunk below *b is set equal to 14 but it still giving out the new value of c, why? Finally, &c is passed through f2 as *a and its value changes even though f2 is a void function. Why does this happen as well? Why is *b declared as an int but yet b is set equal to &c. What is b=&c doing in relation to declaring *b as an int b is declared as an int pointer that can store addresses of an int By doing b=&c, you are giving b the memory address of the variable c. That is, consider that the variable c is allocated the memory address 1000H, then that address is what is stored in the pointer b, and when we use *b, the value inside the address in b is shown. Whatever changes we make to *b is reflected in c and changes made in c are reflected in *b In the chunk below *b is set equal to 14 but it still giving out the new value of c, why? Well b is pointing to the address in c, so when value in c is changed, the value shown by *b also changes Finally, &c is passed through f2 as *a and its value changes even though f2 is a void function. Why does this happen as well? Address of c is passed over to a in the function. So whatever changes are made to the value of *a will be reflected in c You might need to learn about pointers to understand more about this. Why is *b declared as an int? Well it is b which is declared as int* meaning it can hold address of an int variable. That explains why we can write b=&c. & is address of operator. If we put & before your house we will get your address. Well that means if we &c then it means we are getting the address of int variable named c. In the chunk below *b is set equal to 14 but it still giving out the new value of c, why? Because the order of it is like that. *b=14. It means go to the address that is in the variable b and make the content of that address to 14. Then in the very next line you explicitly say to change the content of the variable whose address was in b. Well that's why you see the changed value. Finally, &c is passed through f2 as *a and its value changes even though f2 is a void function. Why does this happen as well? What goes with the name? Don't get the name confuse you. a is a local variable - local to f2 which got c (main()) variable's address. Same with b but this time it got the content of the b in main. c is same as the local variable a but it got address of a variable from main(). Now you have all the addresses. By accessing it with * you make changes to the location that they point to. The copies (By copy a,b and c of f2() function is considered) are still there - they don't do anything other than to provide you the address of the variables that are in main(). So well now you yourself can understand that a function being void doesn't have anything to do with making changes to some variables whose address has been passed to the function. Why is *b declared as an int but yet b is set equal to &c. What is b=&c doing in relation to declaring *b as an int. The expression *b has type int - the object b is declared as a pointer to int; it stores the address of another int object. The expression &c evaluates to the address of c. Thus, you're storing the address of c into b. When this is done, the following are true: Graphically, you have something like this: IOW, the expressions b and &c yield the address of c, while the expressions *b and c yield the value stored in c. n the chunk below *b is set equal to 14 but it still giving out the new value of c, why? Remember that *b and c evaluate to the same thing, so writing *b = 14 is equivalent to writing c = 14. So basically, you write 14 to c, then immediately overwrite it with 16. Finally, &c is passed through f2 as *a and its value changes even though f2 is a void function. Why does this happen as well? Like the situation with b, the parameter a in your function points to c, so In the function, you assign a new value to *a. Since *a is equivalent to c, it's the same as assigning the new value to c. It has nothing to do with the function return type. 
c-13-33	X	gsl openmp slow random number generator I am a beginner in openmp and have a strange result from openmp. The sequential attached code generate faster random numbers using GSL than parallel code using openmp. Any suggestions to improve the code 
c-13-34	X	Print a calendar by input character month and integer year I've write the code to print the one month calendar by input of integer month and integer year. But I want to input the month by characters, first three letters of the month word like Jan for January and Feb For February.As Shown in the picture the month is entered by characters. Here is the Image. So please change the code, so I can input the month in character.Thanks There are many way to do this. They usually involve taking the input string and looking up in some table. An efficient way is to compute a hash based on the string input rather than do up to 12 string compares. Use the hash to look that month name and see if it matches. The hash below requires ASCII encoding for the month names. char may be signed or unsigned. Of course if the month names change (another language?), the specific values and hash method below need adjustment. 
c-13-35	X	Using a Quadruple Pointer in c to split a matrix into blocks I want to use a quadruple pointer to represent a matrix split up into blocks. I think this could be a bad idea. It would look something like this: Is this a good way to go about this? Note I assume a square matrix and I make the blocks square. It is not a bad idea, just inconvenient, and already discussed for 3D matrices dynamic allocation here: Malloc a 3-Dimensional array in C?. I apologize for this as it isn't an answer, but I couldn't resist: Sung to "Jukebox Hero": Lookin' at some code, with his head hung low Couldn't get the memory, it was a sold out show. Heard the roar of the crowd, he could picture the scene He could call to the heap, and and keep it all lean. He saw the pointer, just blew him away He saw stars in his eyes, and the very next day Installed a beat up compiler from a secondhand store Didn't know how to code yet, but he knew for sure That four star pointer, felt good in his hands, Didn't take long, to understand. Just a four star pointer, slung way down low, Was a one way ticket, only one way to go. So he started codin' Ain't never gonna stop Gotta keep codin' Someday he's gonna make it to the top He's a four star hero, got stars in his eyes He's a four star hero... 
c-13-36	X	I cant continue after Scanf in MPICH2 So I have a program which divides an array to equal arrays for slave machines. Im basicly using MPI_Scatter to do it. I have also a variable which decides what process will happen to these arrays. (like <0 - Sum> <1 - Min> <2 - Avg> <3 - Max>) So in my code in master section i have to take a number from user and send it to slaves. But after scanf program is just hanging. I am using vs 2015 and MPIEXEC wrapper. So after i enter a number it does not continue. Picture at the below. MPIEXEC wrapper 
c-13-37	X	programming little change in this function horizontal histogram output is as follows. I want to lean on the left side of the program like A1, A2, B1, B2. how can I do it. this image output image output 
c-13-38	X	C function return not printing I am pretty new at C and I tried to start writing functions because I will need this the most, however the return command in my functions seems not to be working, not sure if this is the cause. this is a simple function that should just get a number and sum 3 and then return that to the main function where I am trying to print. You are using printf incorrectly, you need to pass it a format string as the first argument, and a value as the second argument. Something like this: 
c-13-39	X	Is a side effect also known as a narrowing conversion? So a side effect from my understanding is any change of an instance or class field. So would that mean a narrowing conversion is a side effect? 
c-13-40	X	C structure pointer to a structure array, from a structure I need some help with the pointer syntax. I have an array of structures, and I'm trying to create a pointer to it, from inside another structure, contained in an array. I have read through this question: c pointer to array of structs. While it did clear up some of the confusion, I'm still left with a few errors to solve. I have defined my structure like this: It seems that I am able to add new structures to the array, as the following returns no errors: However, if I attempt to create a new pointer to a struct inside of the struct array like this: or this: the compiler will give me errors. Either one for invalid use of an array with unspecified bounds, or that one_ptr and foo_ptr[j] have incompatible types (in this case: one is of type foo and the other is struct foo *). Is it simply not possible to create a pointer to one of the elements of the structure array? Any help would be appreciated. EDIT: BETTER CODE EXAMPLE I am currently working with a linearly linked list for use as a shared memory stack, for use with pthreads. The array of structures is a shared pool of nodes. Whenever a node is removed from the stack, it is put into the shared pool. If a thread attempts to add a new item to the stack, it checks whether or not the element to be added exists in the pool, to avoid having to allocate new memory every time it needs to add another element to the stack. Each thread needs a pointer to the shared pool of nodes as an argument. That's why i'm trying to create a pointer to it from the argument structure. I was hoping that the question would have a simple answer. I am trying to access the pool inside one of the functions that the thread is executing. Hopefully this provides some more information. Also, the exact error i get from attempting to use: is as follows: error: incompatible types when assigning to type "˜struct node_t *' from type "˜node_t'. This is wrong: Assuming you mean you are storing the address of the actual array variable into your structure's foo_ptr variable. From the code snippet you posted, that's likely a local variable for the function, so it's not only the wrong type, it ceases to exist once your function returns. Given struct foo, this will allocate a pointer to an array of struct foo: and this will assign that Or, more directly: Note that I use a dereference to the pointer the malloc() result is being assigned to as the argument to sizeof(). That's a simple way to ensure that the pointer and the memory allocation done always refer to the same type. The call to malloc() will allocate nelem contiguous copies of struct foo (which will contain unknown, unspecified data...). Those copies can be accessed via as long as n >= 0 and n < nelem. Is it simply not possible to create a pointer to one of the elements of the structure array? You're making your code too complex. To create a pointer to the nth element: You simply add n to the address of the first element, and the resulting pointer will refer to the nth element, assuming n is within the proper range. For starters this declaration (not mentioning the omitted semicolon after the closing brace) is invalid. You have to specify the size of the array. Otherwise the pointer will point to an object of an incompete type. Taking into account how you are trying to use the array this declaration does not make sense. You could declare the data member like and then In this case you could write and or In this declaration ... ... member foo_ptr of struct bar is declared as a pointer to an unknown-length array of struct foo. This is allowed, but it is unusual. One would ordinarily just declare a pointer to the first element of the array, as this plays out more naturally in C, and it's simpler, too: You can assign to the members of the pointed-to array via this form: (provided of course, that the pointed-to array has at least j + 1 elements. To get a pointer to such an element, you would do either or, equivalently, You can do the same with your original struct declaration, but the form would need to be slightly different. For example: But really, make it easier on everybody, yourself included, and don't do that. Short answer The declaration of foo_ptr in struct bar is not right. Change it into struct foo *foo_ptr. And change your assigning statement to the follows Then you can read or write the element of the array like below (NOTE: the both read and write operation are copy of all fields of the struct foo). Explanation of the changes Think about an easy example. How do you make an array of 10 char. char *a = malloc(sizeof(char)*10) a is a pointer of char, it points to a space that contains 10 char. So we can use it as an array. a[4] means the 4th char of the array of 10 char. What if you want to assign this array to another variable? char *b = a; Now b is an array too (not a copy of the original array, b and a point to one array). You can refer to the element via b now, just like what you do with a. E.g., b[4]. Nobody will declare b as char (*b)[] right? More explanation of your mistakes Still start with an simple example. When we see such a declaration -- char (*x)[10] -- what would we say about x? We may say x is a pointer to an array of 10 char. Let's look at your declaration, struct foo (*foo_ptr)[]. Likewise, we may say, foo_ptr is a pointer to an array of ... length-unspecified struct foo. (Notice the difference in the length of array. Actually it is wrong not to specify the length, I'll talk about it soon) Based on this declaration of yours, let's talk about the errors you encountered when using it. Statement 1 that throws error struct foo* one_ptr = (*bar_arr[i]->foo_ptr)[j]; To simplify and make it clear, I'm going to remove the part of bar_arr[i]-> in following discussion. In this statement, *foo_ptr is an array of length-unspecified struct foo, we can call it this way, *foo_ptr is an array of struct foo []. So (*foo_ptr)[j] means the jth element of the array of struct foo []. Everything seems good here. BUT your array has no length defined, even though you assigned a malloc'ed array to it, but in compile-time, gcc has no idea about it. That is why it throws an error about "unspecified bounds". Statement 2 that throws error struct foo* one_ptr = bar_arr[i]->foo_ptr[j]; As I said above, foo_ptr is a pointer to an array of struct foo []. Let's pay attention to the fact that foo_ptr is a pointer first. So in this statement, foo_ptr[j] is kinda like *foo_ptr. Other than the index j, they have same type. Since we already know *foo_ptr is an array of struct foo [], foo_ptr[j] is also an array of struct foo []. It's an array, not an object of struct foo. To put it precisely, you need to imagine there is a big array, of which each element is still array (array of struct foo []). foo_ptr[j] is just the jth element, or say jth array, in this big array. So the practice you assign foo_ptr[j] to one_ptr is more or less like the following example To make it easy to understand, I show you another exmaple below. In the second example, there is no error. In perspective of human being, array1 and array2 are both array of 4 char, however, in mind of gcc, array1 is a type of array, while array2 is a type of pointer. 
c-13-41	X	Recursively put InOrder Binary Search Tree data into an array in C I am trying to recursively insert the data stored in each node of my binary search tree into an array, sorted via the InOrder logic of the code. This is the snippet of the two functions I am using. The "bst_getordered" one's parameters and type cannot be changed, only its contents. The "node_getordered" can be changed in any way necessary. It should store all data in the tree, sorted, into the array. However it does not do it and I cannot figure out why... I think I am supposed to use a double pointer to increment the address but I can't figure out how to go about it... my syntax knowledge is lacking in that field... [EDIT 1] This is a snippet of the test program I use to make sure the code works: [EDIT 2] These are the structures of my node and tree. I suspect I need to increment the counter by the tree->elsz somehow in order to properly traverse through the array: You can send the address of i variable and increment the value of it after populating that index. 
c-13-42	X	After how many values is rand() likely to repeat a duplex pattern? RAND_MAX on my system is 32767. I need to generate millions of passwords. I plan to do it as follows: Is this a good way to do it? After how many iterations is it likely that I would find a repetition? First of all, you should use a secure random number generator. If you don't then somebody could simply request a few passwords, brute force the seed and then re-calculate each and every password generated before and after. Pseudo random numbers have a very high cycle size. A cycle happens when a previous state of the random number generated is entered. After that the pseudo random number will just repeat itself indefinitely. The cycle size for secure random generators is however so stupendously huge that in practice they will never regenerate the same state and enter a cycle. The cycle size of rand depends on the implementation, but is likely relatively low - another reason why not to use it. Of course, if you have a very short password with a small alphabet (the acceptable range of symbols) it is much more likely that a password itself will repeat. Finding a similar pattern in the random number generator is much more likely than having the RNG enter a previous state. For instance, retrieving a previously generated byte value will happen relatively quickly due to the birthday paradox. How quickly you will find a duplicate is therefore linked to the specific password generator. For millions of passwords you would need to create a pretty strong password (the one you have shown is not a strong password). If you want to make sure that the password is unique you can store the password or a hash over the password in a huge table. Remember that storing a hash over the password has similar security as storing the password itself (!). You are much better off removing the uniqueness requirement and linking the password with a user ID. If you want to have a unique PIN code then create a list of possible PIN codes of the right size and then perform a Fisher-Yates shuffle (again using a secure random number generator, of course). Edit: As exposed by @chux (see comment below), my original answer (based on the "birthday attack") ignored possible duplicates relating to text concatenation and therefor was highly optimistic. My original answer also ignores the flaws in the random generator used (rand), as indicated by Oliver Charlesworth). Hence, my original answer of 39,320 iterations should be considered an overly optimistic best case scenario. A closer (yet inaccurate) approximation would be 27,320 iterations. Original: According to the "birthday attack" calculation, each the combination of "random" numbers is likely to be repeated after 1.2 * sqr_root(32,767*32,767) = 39,320 iteration. This means that you should find collisions by the time your code had generated 39,321 passwords. However, since rand isn't cryptographically safe, your passwords aren't safe from the get-go (the seed could be compromised, causing the whole collection to become deterministic. 
c-13-43	X	GCC Error struct flexible array member with no named members opts.h: opts.c: opts_test.c: I compile it with: gcc -c include/opts.c && gcc -c opts_test.c && gcc -o opts_test opts_test.o opts.o; rm -f *.o; Output: Why gcc does not compile my File? In a other Project i used exactly this code and it worked. Now it does not working.... It looks like you are declaring a struct and then trying to give it another name. Try using typedef and then just use the new name without the "struct". Something like this. Also, you are mallocing memory the size of a pointer to the struct and not the size of the struct. 
c-13-44	X	Handler for SIGCHLD signals The code doesn't work and it goes in loop. I think the error is in the gestore method, that is a handler for SIGCHLD signals. This is the first time I use a handler to capture SIGCHLD signals. This program continue to casually extracts from 0 to argv[1] until a number appears argv[1] times. If it's not clear you can test my old program that I put at the end of question. Can you help me finding the error? My goal was to modify my old program (that works) changing the way I capture the exit status of childs. From syncronically with "wait" to asyncronically with a gestore method that handle SIGCHLD signals. This is my old program: //throw-dice.c 
c-13-45	X	Proper Way to write to shared memory Windows I have 2 processes, 1 process needs to write to a shared memory segment, the other process needs to read from the shared memory segment. The writing process only writes to shared mem, the reading process only reads. Writing process Shortly after my reading process will read the message like so This works perfectly for a 1 time write then read. I need the writing process to be able to change the values. I've tried this in the writing process But this gives me random crashes in the writing process, although the reading process seems to be able to read the changes fine. I've also tried to close the segment like this from the writing process immediately after CopyMemory() call But then the memory disappears and the reading process cannot read the segment name. I also tried calling UnmapViewOfFile() & CloseHandle() then creating a new memory segment with the same name and I keep getting random crashes after that. What is the proper way to change a shared memory value of a given shared memory segment name without crashes? Thanks. EDIT - I'd like to add that I tested this code using the described methods (creating new shared memory segments) on 4 Win10 machine, 2 Win7 machines and I got no crashes. The crashes only occur on a Win8.1 machine. it's quite odd. EDIT2 - also, all functions are successful in both the reading and writing processes when the crash occurs. 
c-13-46	X	how to initialize a character array from string with special hex values in between I get an "initilizer is not computable at load time" error in gcc-89 with the first line of code. In 99 it seemed ok. What is the difference in the two lines below? The second line works fine but it is too complicated to look up every char in an ASCII table. case 1: here BYTES is a const char array i.e you can store no of characters(int are allowed) but how you can store strings("FFFEU" <-- see the double quotations ) into this, it should be 0xFFFEU or 'FFFEU' modify as but again you can't store such big data(0xFFFEU) in 1 byte memory, compiler may not give error, but it will overwrite other bytes, so you will not get expected result. Generally speaking, there are two ways to initialize an array of constant characters: (1) initialize with an initializer list of character values Here, each value is a single character value in different code representations. (2) initialize with a string literal which can optionally be enclosed in braces Those two are equivalent, both result in the same zero terminated string. However, just that the { "AAAA" } syntax is valid doesn't mean that any combination with a comma and more values would be valid. Now there is a second topic involved in your question: hexadecimal values within a character sequence / string literal. As seen above, 'A' can be represented as decimal 65 in ascii and the 65 can be presented decimal, octal, hexadecimal, ... Utilizing single character values, this could look as follows (remember bytes1): There is a problem with the direct translation into a string literal: Writing the same as string literal is not directly possible, because in "\x41A", the A will be considered part of the hexadecimal sequence instead of a separate character that follows the hexadecimal. The resulting value will be out of range for a character type. This can be solved by concatenation of string literals: "\x41" "A" - just two literals next to each other, without any non-whitespace character in between. So the same principle can be applied to your case: The leading 0 in the hex sequences are not really necessary and as said above, the braces are also optional. 
c-13-47	X	Fread() doesn't read any data I have a problem with fread(). I'm learning C and I cannot handle problem with function which have to read data from binary file. Below is code of my function: The problem is fread doesn't read anything. The num variable is still 0, the ftell shows that the pointer in file is in the same place (0). The binary file exist (function before i save list in binary file with fwrite, this is next function to do). The content of file are numbers from 1 to 10. Below you can see what xxd show what's in the file: Can someone tell me what I'm doing wrong? 
c-13-48	X	c program is not printing exact digits after decimal point output I am getting is:- 0.123456791043281555 but I want exact output which is 0.123456790987654321 
c-13-49	X	i want convert bios tree to preorder doubly link list in c Given a Binary Tree (Bt), convert it to a Doubly Linked List(DLL). The left and right pointers in nodes are to be used as previous and next pointers respectively in the converted DLL. I want to change tree to a double link list, without changing the tree code I wrote. But it doesn't (...) in a preorder (...). How I can convert them? I also tried to do it with "qunqe" (?); and It didn't succeed so I move to "req" (?). I hope you can help me. Thank you. 
c-13-50	X	Linking error of external library files: C project I am getting unresolved symbols error in eclipse C project. These symbols are actually from external library files. How can I verify whether those files are part of the entire build process? Try to add "external" declarations towards unrecognized symbols to your code, and see if that helps linker. Typically, there should be API *.h file that comes with a library, but not always. 
c-13-51	X	Printing letters with a set_pixel function (c) I have a set_pixel function (a function that sets the color of a pixel in a example display), and I only have this method of output to print to a display. I was trying to print some characters to the screen for debugging and other general purposes, but the only way I found to accomplish this is by printing each letter pixel by pixel, a very slow and tedious thing, considering that I will use uppercases and numbers. For example, this is some code used to print a 'A' with a simple set_line function made up with the set_pixel function. For this I'm using C as my language in a freestanding environment, without the standard libraries, like <stdio.h> or any kind of library, but I could re-implement something I guess or port some libraries. How I can accomplish this without going pixel by pixel or line by line? Thanks in advance! 
c-13-52	X	Can I get the command at the same time while I running the process in 3 I study systemProgramming in C. My question is "running 3-sample process and i can push command this is my code so i want like that $command Hi Hi Hi hello! // This is my writing command:hello! // This is command.c good! command:good! bye bye bye So where I push input stream? in command.c 
c-13-53	X	seg faulting textbuffer newTB when I run my program, it seems to have a segmentation fault somewhere however I've run tests and it seems I cannot find where it is. I'm using gcc -Wall -Werror -std=c99 -O to compile. The task is to create a textbuffer in TB newTB that separates by "\n" and puts it in a linked list. This is currently the only function at the moment so it has to be something I've missed that's causing it to seg fault. The problem is in the strtok function. As described in this post: C's strtok() and read only string literals The strtok function is not working for string literals since it changes the string. Just try: 
c-13-54	X	Socket C communication between two servers I am trying to communicate between two UDP servers using C sockets. I created two programs, Server1 and Server2. Server1 takes arguments for an IPv6 address and port, and it receives the address/port of Server2. Server2 takes arguments for its address/port, and the address/port of Server1. It must send its address and port to Server1, then receive any chain (here, what it has already sent to Server1). Sending the address and port of Server2 -> Server1 works good, but Server1 cannot send anything to Server2, it remains blocked in recvfrom(). I do not know how to do this. Here are the two programs: server 1 : server 2 : 
c-13-55	X	Declaring a global structure causes a segmentation fault but when localized it is fine? As the title suggests, when I declare structure BasicSetup_S globally, I get a segmentation fault. But if I move BasicSetup_S into CallFunction() the segmentation fault goes away. The output is correct each time. It produces exactly what I expect to see but I get the segmentation fault. But, if I move the BasicSetup_S structure inside CallFunction the segmentation fault goes away. Is there any reason why? I'm thinking that my entire program may use too much memory causing a fault when I declare more global variables. For ease of reading, I simplified the names of everything and showed only the useful parts of the code The behaviour of your code is undefined. You cannot use pointer arithmetic (of non-unsigned char type) to reach other scalar members in a struct. For staters, you are assuming there is no padding between the members. Why not use a single array instead? The C standard insists that the array data are contiguous, and pointer arithmetic is then perfectly well-defined. 
c-13-56	X	copy upper triangular part of a symmetric pd matrix to its lower triangular part after finding inverse I want to find the inverse of a symmetric positive definite matrix. I am using lapack's "dpotri" subroutine which uses Cholesky decomposition to find the inverse. However it returns the same matrix with upper or lower part modified to contain the inverse elements. Let us say I choose the UPLO='U' thus saving inverse elements to upper triangular part. I believe the lower part still contains the earlier elements. My question is how to copy the upper part to lower part or vice-versa in the most efficient way? Is there a lapack/Blas routine to do so ? I am programming in C. 
c-13-57	X	C - compiler asks to use '->' when already using '->' I'm working through an exercise in the K&R the C language book and am having a strange problem with the compiling. The compiler tells me to use -> operator for a pointer although I'm already using one. Here is the function that has the problem with compiling : These is what the compiler returns: Also I use the same operator in other function in a similar way and it doesn't show any problem with the compiling there. The compiler message is about *stackbeing a pointer, not stack. You are using stack as if it was a pointer to some struct. Instead it is a pointer to a pointer to struct. Changing these lines like this should solve your problem: 
c-13-58	X	malloc of an array within a struct I have the following code declaring a struct: I am then declaring the array with the following code: Then to create the array withing the VARIABLE_ARRAY i am using this: However, the malloc for some reason never creates more than one element in the array. Even when the length is changed. I am not sure on what steps to take to fix this issue. There must be something wrong with what you are passing to malloc, and that something can not be pointed out and/or fixed, unless you don't show us the full code. malloc won't do anything funny unless you do something funny with it. Its time to look at values you are setting: Width, hash, and varArray[hash].length The output it produces is: which seems as expected. As you can see, varArray[hash].length is what I didn't use at all, So, either I don't understand your design, or its not needed. I'll let you decide that. Probable cause of trouble: You insisted that the varArray[hash].length was set to 2, so the malloc should have allocated a chunk from heap which is of the size equal to twice of sizeof(BUCKET). Its just that you have one pointer to access two consecutive (logical!) blocks of similar data types. So, if I add to my code to what it looks like below (Which is very ugly and something which should be avoided for the sake of readability, BTW) It generates an output: which is again, exactly as per expectation. What obviously won't work here is: Because, in the snippet above I have not initialized varArray[1].array to point to an instance of address of a variable which is of the type BUCKET. So, if at all by an unintended error/bug you have passed varArray[hash].length * sizeof(BUCKET) to malloc, be certain that you have that much memory allocated if the malloc didn't return NULL. And I think that is the exact reason that you are getting a Segmentation Fault when you try to access the next index, by increamenting hash somewhere. Your statement: However, the malloc for some reason never creates more than one element in the array. Even when the length is changed. My guess is, By Segmentation Fault you are assuming that memory is NOT allocated, while it is being allocated. Its just that you are not accessing it the right way. 
c-13-59	X	unexpected value on bit manipulation with macro in C I tested it on online compiler and I'm getting a compiler error saying 'uint' is undeclared. I guess C online compiler can't import stdint.h. : https://www.onlinegdb.com/online_c_compiler So I manually put values: (0x12345678>>12)&0x3FF. Problem the output is 0x345, can you explain why? UPDATE Sorry for the confusion guys. I'm asking for the explanation on the output 0x345. I'm confused why 0x12345678 >> 12 is 0x12345 and 0x12345 & 0x3FF is 0x345. You can get the same result using The answer is expected because of the Bitwise and operation as mentioned in other answer. The shift operation is shifting the bits of an unsigned int to the right filling the left with 0's. That explains why 0x12345678 >> 12 = 0x12345 Truth table of AND And if you don't understand the AND operation then it will be the truth table it should know about. What output did you expect? Let's look the bitwise AND, nibble by nibble, in hex: or in binary, which might help: It should be obvious that 3 & 3 is 3, just as 4 & f is 4 and so on. 
c-13-60	X	c scanf_s in visual studio 2017 don't work more than once Only the first printf_s work, it just printf twice the text. The single way that i found to work is in c++ with getline but i want to do it in c with scanf preferably. Neither call to scanf_s("%[a-zA-Z ]s", consumes the '\n' keyed in with Enter. '\n' remains as the next character to be read @Serge Ballesta. So the 2nd call reads nothing. Had code checked the return value of scanf_s(), this may have been deduced. Instead of scanf* and *getc*, read a line with fgets() @user3121023, and lop off the potential trailing '\n' if desired. Avoid using scanf*() anywhere, even for reading numbers. this expression: should be: Notice no trailing 's'`. However, this will stop input at any character that is not alphabetic (like a space, or punctuation or newline or digit. ) If wanting to input everything on a line, use a format string like: If you post some sample input, we can be much more specific with our help. 
c-13-61	X	Wait a signal with timeout , if the signal is received just continue the execution (no action associated to the signal) i'm trying to wait for a signal with a timeout. I'm implementing a keep alive functionality for a distributed hash table. A server can be connected to other servers and it need to know if a connected server had a problem and is no longer connected. Here the first function that will send a signal if a server is still alive. And then the other function associated to a thread associated to a server, which wait for a signal to know if the server is alive. If the thread does not receive the signal before a defined time the thread delete the server and then end. If the thread receive the signal it will just loop and wait for another signal. Is it possible ? I just wanted to send a signal with no action associated but i can't find how to do it. [updated] SIGUSR1 give me User defined signal 1 and then it end the thread. I changed the signal send from SIGINFO to SIGUSR1 of the displayed code in this topic,i was doing test and i forget to change it before pasting it on this topic, sorry for my mistake. But i'm still wondering if it is possible to send a signal to tell my thread to continue its execution without ending it. 
c-13-62	X	C program produces a "SIGSEGV (Segmentation fault)" at an array size over 300000 I have just started with multithreading (OpenMP) and wrote a small program to find primes, but at an upper bound of over 300000 the Program yields an SIGSEGV (Segmentation fault). It runs totally fine under 250000. I have used unsigned long long's just because i haven't found a drawback to why not to use them yet. The time implementation is just for testing purpose. The declaration unsigned long long save[n]; is hitting some stack-frame related limit causing the runtime failure. Use dynamic storage duration instead, with a malloc call. Don't forget to check the value of save (to check if the allocation was successful), and remember to call free(save) when you're done. 
c-13-63	X	Draw shapes using C language without graphics library I have to make console program which will draw circle, line, parabola I made it using graphics library but my teacher asked me to make it without any library. I have tried a lot without any result, I don't know how to draw it without graphics library This is my code: A console program can draw a circle like this: A parabola like this: etc. And you do not need a graphics library for that. Is that what you want ? --EDIT-- Example that works: Result: my teacher asked me to make it without any library. You could do ASCII art, like answered here. Otherwise, study the C11 standard n1570. You'll see that graphics is not standardized in C. So you then have to write some implementation specific code. On current desktop and laptop operating systems (Linux, Windows, MacOSX, ...) and computers, the graphics hardware is very complex and accessible thru several complex layers of software. It is not reasonable to avoid all of them. See also this. You could ask your teacher if you are allowed to use some portable library like GTK, SDL, libcairo.... or you could feed some existing graphical program (e.g. gnuplot, dot, ....) with data. BTW, your code should declare all your routines as giving void, e.g. void draw_line(int a,int b); etc... 
c-13-64	X	What does this expression, 1>0, evalute to (on 64 bit) in C? To test "What does this expression, 1>0, evalutes to (on 64 bit) in C?" question, I wrote this program. It prints "1". Is it right way to find the expression, 1>0? And does operating system bit (64bit) matter? Why did the problem state (on 64 bit)??? In C, a > b is an expression of int type that is either equal to 0 or 1. That is not a function of the operating system: of course though the exact nature of an int is dependent on your platform. So 1 > 0 is an int with value 1. So your code is equivalent to printf("char=%d", 1); According to C11 Standard, Section 6.5.8: Relational operators - 6. Each of the operators < (less than), > (greater than), <= (less than or equal to), and >= (greater than or equal to) shall yield 1 if the specified relation is true and 0 if it is false, The result has type int. The Footnote (which is very important to understand) says, The expression a<b<c is not interpreted as in ordinary mathematics. As the syntax indicates, it means (a<b)<c; in other words, 'if a is less than b, compare 1 to c; otherwise, compare 0 to c'. So, is evaluated as The same way if, The result will be Update: The whole confusion about 32-bit vs 64-bit system is irrelevant for this particular issue you are facing. You don't need to consider that as of now. In C, true is represented by 1(one) or any nonzero value and false is represented by 0(zero). As 1>0 is true you get a 1 which represents true. All relational operators work the same way. It works the same on 16 bit,32 bit and 64 bit machine. 
c-13-65	X	Using bc through pipes and fork I'm trying to get the answer of a char expression using bc through pipes. I would like first to write the expression in the pipe1, which the bc will read and write the answer in pipe2. For this I am changing the input and output. This does work if I do not use a char[] and just put the expression in the write : But if I declare a tab, I keep getting the error : Sometimes it is 1 instead of 2 What I am doing wrong? If someone could explain me, thank you. Code : ^@ is the nul character i.e. '\0'. This would suggest you are overrunning the end of the string when you write it to bc. The problem is here: expression is not an array, it is a char pointer that points to the first character of the string "20*5\n" and, if you are on a 64 bit machine, its size is 8. To get the length of the string to send, use strlen(expression) instead. Another thing you need to do, not related to your problem is, in the parent process, after you've read the answer, wait for the child process to finish. Otherwise, you'll be left with a zombie. This is wrong You are using sizeof operator with expression which is a char*, if your system is 32-bit, it will result in 4, which is the size of any pointer variable in your code. You need to use strlen(expression) instead of sizeof. As pointed out in the answer as well, you need to wait for child process to finish its execution and terminate, if the parent process has more than one child processes. Ideally, you should also check the return value of wait, which provides you more context on how the child process was terminated. 
c-13-66	X	c: function that removes a compare string and returns char[] pointer: wrong type error I need a function that removes the begin of a string and returns a pointer to that string. Here is my approach: As you see, I just want to move the poiner to cut the begin of my string. BTW: I am considering using memcmp() because I have to use unsigned data types. This is my function call: Results in compiler error: What is wrong? The compiler line number is this: receive_buf = remove_prefix (...); @Galen Correct me if I am wrong. I don't see the duplicate because I don't want to deal with strings themselves, I want to return a pointer from a function. In my debug printf outputs I expect the address pointer to increment by some Bytes. This is for some reason not accepted by the gcc-99 compiler. 
c-13-67	X	The hashtag in #include <stdio.h> does not compile (C-programming) I made my first program in C without any problems at all at my first try, now that I want a new workspace and a new project, it goes south before I've even written anything. The code above should just print out "hello world". Instead, I get the following error code: I'm guessing I've got some faulty directories or something similar, but I've made new workspaces and tried at least two new projects to no prevail. I'd really like to know what's going on here :) You practically need to use a C compiler (not something else like node.js). I recommend using GCC on the command line, e.g. in a terminal (order of program arguments to gcc matters a lot). And I recommend enabling all warnings and debug info (which are not enabled by default), so compile with: Improve your code to get no warnings at all. Read the documentation of every used function (e.g. of printf), even if at first you don't understand all of it. Download the specification of C11, e.g. n1570, and look inside and refer to it. Be scared of undefined behavior. It is tricky (your C program could apparently seem to work most of the time, and still be very wrong and buggy). Learn to use the debugger, e.g. use gdb (and perhaps other tools, like valgrind). You probably should learn to use some version control system (I recommend git) and some build automation tool (such as GNU make or ninja). Be aware that coding conventions and style matter a lot in C (see for example this). PS. You might consider installing some Linux distribution on your laptop, it is very student- and developer- friendly and mostly made of free software (some very helpful to novice and/or expert C developers, both as tools and as examples). You also should read (for inspiration) the source code of some existing free software projects (e.g. on github). 
c-13-68	X	Determine NUMA layout via latency/performance measurements Recently I have been observing performance effects in memory-intensive workloads I was unable to explain. Trying to get to the bottom of this I started running several microbenchmarks in order to determine common performance parameters like cache line size and L1/L2/L3 cache size (I knew them already, I just wanted to see if my measurements reflected the actual values). For the cache line test my code roughly looks as follows (Linux C, but the concept is similiar to Windows etc. of course): Varying STEP from 1 to 128 shows that from STEP=64 on, I saw that the time per element did not increase further, i.e. every iteration would need to fetch a new cache line dominating the runtime. Varying ARRAY_SIZE from 1K to 16384K keeping STEP=64 I was able to create a nice plot exhibiting a step pattern that roughly corresponds to L1, L2 and L3 latency. It was necessary to repeat the for loop a number of times, for very small array sizes even 100,000s of times, to get reliable numbers, though. Then, on my IvyBridge notebook I can clearly see L1 ending at 64K, L2 at 256K and even the L3 at 6M. Now on to my real question: In a NUMA system, any single core will obtain remote main memory and even shared cache that is not necessarily as close as its local cache and memory. I was hoping to see a difference in latency/performance thus determining how much memory I could allocate while staying in my fast caches/part of memory. For this, I refined my test to walk through the memory in 1/10 MB chunks measuring the latency separately and later collect the fastest chunks, roughly like this: As soon as I start increasing ARRAY_SIZE to something larger than the L3 size, I get wildy unrealiable numbers not even a large number of repeats is able to even out. There is no way I can make out a pattern usable for performance evaluation with this, let alone determine where exactly a NUMA stripe starts, ends or is located. Then, I figured the Hardware prefetcher is smart enough to recognize my simple access pattern and simply fetch the needed lines into the cache before I access them. Adding a random number to the array index increases the time per element but did not seem to help much otherwise, probably because I had a rand () call every iteration. Precomputing some random values and storing them in an array did not seem a good idea to me as this array as well would be stored in a hot cache and skew my measurements. Increasing STEP to 4097 or 8193 did not help much either, the prefetcher must be smarter than me. Is my approach sensible/viable or did I miss the larger picture? Is it possible to observe NUMA latencies like this at all? If yes, what am I doing wrong? I disabled address space randomization just to be sure and preclude strange cache aliasing effects. Is there something else operating-sytem wise that has to be tuned before measuring? Is it possible to observe NUMA latencies like this at all? If yes, what am I doing wrong? Memory allocators are NUMA aware, so by default you will not observe any NUMA effects until you explicitly ask to allocate memory on another node. The most simple way to achieve the effect is numactl(8). Just run your application on one node and bind memory allocations to another, like so: See also numa_alloc_onnode(3). Is there something else operating-sytem wise that has to be tuned before measuring? Turn off CPU scaling otherwise your measurements might be noisy: Now regarding the test itself. Sure, to measure the latency, access pattern must be (pseudo) random. Otherwise your measurements will be contaminated with fast cache hits. Here is an example how you could achieve this: Data Initialization Fill the array with random numbers: Benchmark Perform 1M op operations per one benchmark iteration to reduce measurement noise. Use array random number to jump over few cache lines: Results Here are the results for i5-4460 CPU @ 3.20GHz: There are obvious steps between 32K/64K (so my L1 cache is ~32K), 256K/512K (so my L2 cache size is ~256K) and 6144K/8192K (so my L3 cache size is ~6M). 
c-13-69	X	Redefine const char* in C Assume the following code in C: Although I know that it is working (at least with gcc on x86_64) and no compiler warning are being generated, I'm wondering if this is something I should be doing like this or if there is a better alternative. Note that this question is not a duplicate of Difference between char* and const char*? as it explicitly asks if a redefinition of the content of the variable is good practice. The other question is asking for the difference between char* and const char* and the accepted answer does only provide the answer if one already knows what the assignment of another value means. This was unclear to me and is an essential of this question. It's fine, the pointer is just being re-assigned a new value, which is also of type const char *. If you wanted the pointer itself to stay constant too (which helps with clarity in my opinion), you can do it: This makes string have the type "constant pointer to constant char", so you cannot re-assign it (or change the data it's pointing at, of course). In C if you are writting this: Then string is a pointer pointed to a const char array. The pointer itself is not a constant, so you can modify the pointer. If you want to make the pointer as a const: Then you can't change it. 
c-13-70	X	Trying to create a linked list when reading a binary tree (fake n-tree) I have a little problem and I can't finish my function for an open project. So, actually, my point is to create a new linked list by reading a n-binary tree. When two tags checks, I create a new node on a list of tree nodes for saving them for further use. Here is our structs: Here is the code: and here is the execution when i read the state of my list. execution in console 
c-13-71	X	Winapi: Close handle in another process I've seen couple of topics like this and this, where people tried to close handle in another process or delete a file which has handle of specific file. The problem I have is that, files open handle is in System Process so I can't delete file. I've tried second example above to enumerate processes and list it's handle but none of them had my file. The reason I'm convinced that System process has my file handle is because Process Hacker showed me. But it was little strange, since if I clicked Find Handles and Dll... it would show me that the process has my handle but if I double clicked the System process in the list, it showed me the list of handles but there was not my handle. I've also tried to use handle.exe but it could not find my handle in System process neither. My question is how is Process Hacker able to list my handle in System Process? As I've said I've used NtQueryInformationFile and NtQuerySystemInformation, is there any other way to list handle in process using Winapi? Thanks. 
c-13-72	X	GDB disass main I'm doing a security project for my school. For this project I have a binary, and I have to do 2 things, make a pseudo code of this binary and do the exploit. To get better in ASM I'm trying to do exactly the same source code in c. I have a problem with edx in the main. I have no idee how to do this in c: This is the full main code: Can you help me to find how to do the line main + 41 please :) ? Thank you 0x8048468 is probably a pointer value based on the number. Maybe a function pointer, because it's in the page above 0x8048350 (the PLT entry for malloc). But maybe just a pointer to a static buffer (maybe a read-only buffer, like a string literal). So perhaps void *edx = "hello world"; or void *edx = &some_function, and then use it somehow. C statements don't map to single asm instructions, but with un-optimized output (gcc -O0), each C statement does map to a contiguous block of instructions that finishes with all values in memory. (This means you can modify C variables with a debugger and still have it "work" in un-optimized code.) I didn't trace through the mess of store/reload that looks like un-optimized code, so I'm not sure what exactly is being done with that value after it's stored to memory in the next instruction after the mov-immediate. Look at your compiler's asm output if you have source (gcc -S instead of compiling all the way to a binary and then disassemblign), or use objdump -drwC -Mintel to get relocation info for that value if there is any. Or use nm to look for it in the symbol table. If it is a function pointer, the disassembly for that address should make some sense. 
c-13-73	X	why is there NO 'l-value required' error while incrementing array name As far as I know, you cannot modify a Array variable How come this code run without any error. Is there anything I am missing out here. (It's not about why there is 'L-VALUE REQUIRED' error , it's about why there isn't.) A quirk of the C language that is well-known to seasoned C programmers, but trips up new C coders to no end, is that arrays are "pass by reference". Generally speaking, an array name used in most expressions will "decay" to the address of its first element. Functions carry that to an extreme case, where the array syntax in the function parameter is actually an alias for the pointer type itself. This is described in paragraph 7 of c11's &sect;6.7.6.3 Function declarators: A declaration of a parameter as "˜"˜array of type'' shall be adjusted to "˜"˜qualified pointer to type'', where the type qualifiers (if any) are those specified within the [ and ] of the array type derivation. Historically, this quirk was an attempt to maintain behavioral compatibility to C's predecessors, B and BCPL, and efficient structure layout. C's predecessor had a semantic for arrays in that its physical layout was actually a pointer that got dynamically allocated and initialized at runtime. When passed to a procedure, the pointer semantic was a natural adoption. Dennis Ritchie invented the notion of allowing the array syntax represent the actual address of the array, and then maintained the pointer semantic when passed to a function. Thus, the inventor of the C language considered this quirk a novel solution to a real world problem (semantic compatibility). References: The Development of the C Language This line defines a character array. s is not a pointer, it evaluates to an address (when fed to a pointer for instance, or when accessing a value like s[i] equivalent to *(s+i)), or represents the space occupied by the array (eg in sizeof(s)) But in a function signature like this char s[] is equivalent to char *s, and you can treat s like a pointer. char arr[] = "asds" Here, arr is just a name. It refers to a memory location but is not a pointer. The compiler substitutes the address directly wherever arr is used. It is not a pointer because unlike pointers, it does not have any space allocated to store an address. It is a mere compile time symbol. Hence, at run-time there is nothing on which you can do pointer arithmetic on. If you had to increment something, that something should exist at run-time. More details: Basically, the literal "asds" is stored in your executable and the compiler knows where exactly it is (well, the compiler is placing it in the executable, so it should know?). The identifier arr is just a name to that location. As in, arr is not a pointer, i.e: it does not exist in memory storing an address. void func(char arr[]) In case of a function argument, the arr does exist in memory at run-time because the arguments are pushed onto the call stack before making the function call. Since arrays are passed by reference, the address of the first element of the actual parameter is pushed onto the call stack. Therefore, arr is allocated some space on the stack where it stores the address to the first element of your actual array. Now you have a pointer. Hence you can increment (or do any pointer arithmetic on it). 
c-13-74	X	C: How could I send a list of file names as a string on a socket? I'm trying to take file names from a dirent struct, and send a list of all names as a concatenated string to the client. After a few hours of trying to figure it out, I can't seem to allocate memory properly, or read it properly, I'm getting nonsense string back, so It must be reading memory wrong, even though I think I've appended the string with "\0" Here is what I've done so far, Send string to client: Get string from server: witen() and readn() are from an imported file, rdwrn.c and .h, this was part of a coursework project, i'm not fully sure how they work but basically they read and write from the given socket. I didn't make them. I've been at it for hours, and I feel It's getting messy. Is there a better way of doing this? this loop: has a couple of problems. 1) Generic to the whole posted code, the indenting is not consistent. For consistency, indent after every opening brace '{'. unindent before every closing brace '}'. Suggest each indent level be 4 spaces. 2) There are lots of kinds of entries in the directory entries. (links, sub directories, etc etc) Before including any specific 'file name' in the resulting string. the code needs to check the type of entry to assure it is a normal file AND the name of the file is NOT . nor .. ==== the variable: len is not initialized, suggest using: ==== Note that the function strlen() returns the offset to the NUL byte at the end of the string (and offsets start at 0, not 1) so the actual length is 1 byte longer ==== The question doesn't state: is this code to collect only the current directory file names or is it to include the file names in the sub directories? ==== The question doesn't state: are the file names to be jammed together or separated by a space or comma. If separated by a space, what about file names that contain a space? ==== BTW: where do the function names: writen() and readn() come from? 
c-13-75	X	C-OpenMP/ Tried to parallelize recursive code with tasks but works slower Greetings from Mexico! I was confronted with the task of parallelizing a couple of codes involving recursion, and after doing some research I've realised that the best aproach would be to make use of omp's tasks. However, it seems that its runtime is considerably bigger than its serial counterpart. I know this question has been asked more than a couple of times in this forum but none of the proposed solutions seem to fit my case. Below I add my code. infijaParallelSearch() receives the head of a BST and a value to find, and if it is in the tree it returns the node. convertToBST() receives a sorted list and turns it into a Binary Search Tree returning the head. When I run it with list of increasing length to compare its runtime with its serial counterpart, I get this: Runtime results I am measuring time with omp_get_wtime() and I have tried almost everything, from having single traversals to multiple traversals and nothing seems to make a difference. I've also considered having the code be made in serial if its length is lower than a value at which the parallel code performs better, but after running the code multiple times that value doesn't seems to exist. Thanks again for your time. This is my first time asking and I hope I was not vague in any manner. I am a beginner and I am just developing my passion for coding, so any help or advice would be greatly appreciated. PS: I don't know if it will make a difference but below I add the code with which I compare the runtime for both codes. Firstly, the assumption you make that parallelizing the search will have a performance increase independently of data size is false. According to your run-time results, we can conclude that even though total run-time is faster for the array sizes you provided in the serialized version, it definitely gets worse as size increases compared to the parallel version. For example, while increasing the array size almost 10 times over (from 100 to ~10000) you got a 50 times slower performance in the serialized version. But the parrallel version is only ~40 times slower (which means performance gain was better in the parrallel version). This leads me to assume that with a large enough dataset, the parrallel version would out-perform the serialized version. Why is this happening? Regardless of how you chose to implement concurrency here, spawning new tasks (threads) comes with an overhead, in your case it just happens to be large compared to your per-work-item job to be done. 
c-13-76	X	Semaphore semget method return value confirmation I want to get a same semId using same key. Although, I called semget method using same key, and returned different semId. Please answer me the reason why this problem happened. Sample source : Result : id1 != id2 Key id 0 is IPC_PRIVATE, and will always generate a new set of semaphores. Choose a valid key. 
c-13-77	X	Is client-client communication possible in a fork-based server? I am implementing a very basic C server that allows clients to chat. Right now I am using fork(), but I am having trouble having clients see each others' messages. It also seems that all clients get the same file descriptor from accept(). Basically, I have a while loop where I test if someone wants to connect with select(), accept() their connection, and fork(). After that I read input and try to pass them to all users (whom I am keeping in a list). I can copy/paste my code if necessary. So, is it possible to have the clients communicate with processes, or do I have to use pthreads? Inter-process communication -IPC- (in general) don't care about client vs server (except at connect phase). A given process can have both a client and a server role (on different sockets), and would use poll(2) or the older select on several sockets in some event loop. Notice that processes have each their own virtual address space, while threads share the same virtual address space (the one of their containing process). Read some pthread tutorial, and some book on POSIX programming (perhaps the old ALP). Be aware that a lot of information regarding processes can be queried on Linux thru /proc/ (see proc(5) for more). In particular, the virtual address space of process of pid 1234 can be obtained thru /proc/1234/maps and its opened file descriptors thru /proc/1234/fd/ and /proc/1234/fdinfo/ etc.... However, it is simpler to code a common server keeping the shared state, and dispatching messages to clients. You could design a protocol where the clients have some way to initiate that IPC. For example, if all the processes are on the same machine, you could have a protocol which transmits a file path used as unix(7) socket address, or as fifo(7), and each "client" process later initiate (with some connect) a direct communication with another "client". It might be unwise to do so. Look also into libraries like 0mq. They often are free software, so you can study their source code. 
c-13-78	X	variable as argument in pthreads I have written a program for creating number of threads. The number can be passed as a command line argument or default value is 5. The problem I am facing is printing the thread number passed as an argument to pthread writer function. Below is my program: Output: Why 0 and 2 are coming two times ? Any help would be appreciated. When you create the threads i continues its life... thus when you print *(int*)args in the thread. you get the current value ofi that keeps being used and changed in the main function. You might want to allocate an array of integers that contain the thread id and store the id during the thread creation This way, each thread has an argument that points to its own personal data (in that case, an integer). To complement Ring Ã˜'s answer, in your particular case of passing a small integral number to your thread routine, you could cast to an intptr_t type that argument, and code: then this is possible since pthread_create just passes an uninterpreted [pointer] word, which could actually be a cast from intptr_t, which is guaranteed to have the same size than pointers. So you don't always need the last argument to pthread_create to be a valid (dereferencable) pointer. BTW, on my Linux/Debian/x86-64 system, pointers (e.g. void*) and intptr_t have (like long) 8 bytes, but int is 4 bytes. In the usual case, the last argument to pthread_create is often (as a rule of thumb) a unique pointer to some heap allocated malloc-ed zone (and you should later free it appropriately, usually after the corresponding pthread_join). Notice that your code should test against failure of malloc and should have: since in the unlikely case that malloc failed your code exhibits undefined behavior because the first argument to pthread_create should be a valid address of some pthread_t. 
c-13-79	X	C int array and pointer interaction The following code... Produces the output When I use variable array on the second line, it refers to the location of the "17". When I use it on the third like, it dereferences the pointer and prints out the number 17. Those, I understand. On the last line, it prints out "12 bytes" as the size of the array. Why doesn't it print out 4 bytes, since in the previous two uses of the same variable, it seems to exclusively refer to the zero index of the array? How does sizeof know to look at the remainder of the array, instead of just printing out 4 bytes (as it would if I ran (sizeof(*array))? sizeof() is a operand evaluated at compile time. The compiler knows the size, because it creates the array. sizeof(*array) would give you sizeof(int) (seemingly 4 on your computer). sizeof(array) gives 12 because sizeof(*array) gives 4, and you have 3 of these (int), 3 x 4. array is an area in memory where the 3 integer are stored sizeof(array) gives the size of that space occupied by that area. Mentioning array as itself in, for instance, int *p = array; stores the address of array in the pointer p. Here, sizeof int generally 4 bytes. sizeof gives 12 bytes. Here array is the pointer to an array of 3 integers, so if you are the printing size of the array, it will give you 12 bytes as each integer takes 4 bytes. As you know array will have starting location of the array, now you are printing integer at the address "array" by using format specifier %d. It will print integer stored in first 4 bytes of the array,i.e. 17. When passed to sizeof, an array name doesn't decay into pointer, so the whole array size is found. In the first case, it decays into pointer to the first element and the address is printed. In the second case, we dereference the address, which is basically the value at the address pointed by the array name, namely the first element. Why doesn't it print out 4 bytes? From the C standard $6.5.3.4 (sizeof operator) When applied to an operand that has array type, the result is the total number of bytes in the array. This answers your question why when passed an array name it shows the number of bytes. Here the array has 3 elements and each of size sizeof int or 4 Bytes in your system and so the total size = 3*4 = 12 What is *array? *array is nothing other than array[0]. array decays into pointer to the first element of the array and then we dereference it. What is the value that is there? That is the value 17. Why sizeof(*array)=4? Well if you remember array is an array of 3 integers. So ofcourse the value contained in it is of type int. In your system sizeof int is 4 bytes. That's why you will get 4 as a result sizeof *array . How sizeof works? sizeof is implemented by the compiler. For non-VLA type of objects sizeof is a constant which is resolved compile time. But in case of VLA the array size is known at run time and that generates the result. So this is an expression for VLA. Arrays in C are not exactly pointers, which is used to be in early days. Array names are decay into pointer based on the use of identifier(variable). Array names were pointer which caused problem with structure containing the array member, storing the pointer in array eventually lead to problem with structure members. So it was decided by the author of C to make array as name to location rather than the pointer some location. When used with * it will decay into pointer. Which allow us to use the array as a[i], i[a], *(a+i) . 
c-13-80	X	Gtk GLArea Widget in C not displaying gl commands I have asked a question earlier (Use of the Gtk.GLArea in Pygobject GTK3) about trying to use the GLArea widget in PyGObject. I never did get the python version to draw commands so I thought I'd give the c version a try to understand it better. Using Ubuntu 16 since Gtk3 is all included, I gave it a shot. The following code compiles and runs without errors or warning but does not draw the included GL_LINES instructions. The really odd thing is changing the glClearColor does change the background and the GL_LINES are in the same function. As you can see I'm using the Ubuntu included epoxy/gl library, which I believe would be equivalent to GL/gl. Any ideas? Ok, I understand a lot more about openGL and the use of shaders. Basically, the problem the GLArea was having was the commands were not in an array that was "bound" to the current context's active buffer. This tut helped a lot: https://www.youtube.com/watch?v=Q_kFcRlLTk0 I hacked up the demo code to simplify it and brought the shader source code into the c code as strings. As it was, it would open from the demo app and had sliders to rotate the triangle by a matrix. I tried to distill it down to the most basic window. This does compile and run without error. Now I will try it in PyGObject. 
c-13-81	X	C: How do I pass malloc'ed pointers into a function and free them? I'm working on a client-server program using sockets and threads. I have a menu for the client, and I'm trying to send a char from the client to the server, to then call the corresponding functions. I'm trying to make use of pointers and malloc but I don't think I'm quite understanding how to pass them and free them. I'm getting memory leaks and errors like: ./server': double free or corruption (fasttop): 0x00007f37dc000a50 *** and Segmentation fault Here is my client menu: Send menu option to server: Server side: Get menu option from client: Additional functions as requested: Send msg (server side): Get msg (client side: What am I doing wrong here? am I not affecting the value of where the pointer is pointing to? Allow me to compress your loop down to these key lines: This loop is seriously flawed. Not only are you using 1 byte of memory to store 2 (scanf should be using %c rather than %s), but if you pick anything other than 6, the loop will not only access freed memory, but it will also result in a double-free (your error). On the other hand, if you select 6 you are accessing memory after you have freed it, which is also a very serious error. You should free the memory after the loop terminates. In a do loop you repeatedly free the pointer however you allocate it only once before the loop. Server side, you allocate one char. Then in get_menu_choice() called get_menu_choice(connfd, menu_choice) using the 1 byte allocated menu_choice, you store n bytes into choice... That doesn't seem correct. Is one byte allocation enough? Meaning, is n taking values > 1? This is a generic answer, here are the functions I used on a project: and call my_freep like this my_freep((void**)&buffer); NOTICE buffer here is defined as pointer (i.e. char *buffer;). Hope that helps. 
c-13-82	X	sorry should not display sorry code cannot be displayed Given an allocator function, the deallocator writes itself - you free the pointers in roughly the reverse order they were allocated. So, given that the allocator is (only reformatted from the question " functionality unchanged): the deallocator should be: This makes sure the code doesn't try to access memory after it is freed. However, closer analysis of the allocator shows that there are some (minor) problems. For example, normally you treat the pair of indexes as maze->cells[row][col], but the memory allocation requires it to be used as maze->cells[col][row]. Both can work, but the row-column order is more usual in C. Also, the sizes in the second and third malloc() calls are incorrect. Fortunately for you, the second one allocates in units of sizeof(char **) instead of sizeof(char *), but those are the same size, so it "doesn't matter". The third one allocates sizeof(char *) units, instead of sizeof(char), so there is much more memory allocated than memory (normally, sizeof(char *) is 4 or 8 bytes but sizeof(char) is 1 by definition). So, you might do better to use this, which keeps the maze->cells[col][row] access notation: This cleans up the partially allocated memory on allocation failure. It doesn't change the deallocation code (unless you want to add a null check, but if the allocation failed, you shouldn't be calling the deallocation code). NOTE: I believe the code automatically takes care of alignment in OP's case. I am still working on to tweak it to work with any data type of members of Maze. The alignment is broken if sizeof(char*) exceeds sizeof(T) where T is the type of cell[0][0]. You can allocate memory for the entire maze in one malloc call. This will allow you to free the memory in one free call. It improves performance because: it requires a single malloc (and free) call the memory allocated is contiguous (cache friendly) 
c-13-83	X	MongoDB C driver: how to use regex query collection? for example, In MySQL the query like this: I want to translate this query in mongodb by mongodb C driver, so I write the code like this, but all don't work(the searchDoc() function is okay. and How can I build the regex pattern to query record work okay? Thank you I seach this page: https://jira.mongodb.org/browse/CDRIVER-206, there is a important tips: "You do not need to include the forward-slash when building a regex." so I delete the forward-slash, my code change to It can work. My problem has been solved. 
c-13-84	X	How can I package a configuration file with a C program? I am currently trying to build a new version of a piece of software I developed. The software takes a simple command line argument and appends the argument to the end of a file. My problem is that I want to alter the program so: Someone can set up a standard location to save the file to. The program will remember that location. It will still work for anyone installing the C program on mac, linux or windows. So basically I am trying to figure out how to create a C executable that comes with persistent memory that it can read and modify. Alternatively I would take any way to create an installer to make this easy for anyone who wants to use my program. If this were a java program I would just add it to the jar file but I have never seen this documented for the C language. I would add platform-specific code to store your settings in whatever area users of that particular platform expect. So: For Linux: store configuration files in the location specified by $XDG_CONFIG_HOME. For Mac: Use CFPreferences For Windows: use the registry 
c-13-85	X	How do I get Gtk+ to work in mac high sierra, any installation guides? or How do I give graphics to my readymade C program // ***** CLIENT ***** /*****This is a segment of my work*********/The image is my expectation Thank you 
c-13-86	X	Float pointer malloc array receiving into array I am writing a code which requires me to use the malloc function, feed input into an array, determine and print the average as well as how each array value relates to the average. Here is my code The print statement in the very first for loop I was using to check whether or not my array is receiving the input properly, it is not, as shown by my output, which is below, my question is why is my array not receiving the values? The problem is here: You're printing a reference to numbers[i] instead of the value itself. Try: Same thing for all the other places you print values (i.e. sum, average). You're getting 0's when you print it because when you take a pointer to one of those values and cast it to a float it is interpreting that as zero. Perhaps someone else will be able to enlighten us an exactly why that is (i.e. I'm not sure if that is undefined behavior). In case you're still confused: the reason you have to pass a reference (&) to the value to scanf, yet the value itself to printf, here's the reason: for scanf you're telling it "please get a float from the console and put it at this location I am specifying (i.e &numbers[i])". When you call printf, you are telling it "please print this value I am giving you (i.e. numbers[i])". A few corrected issues: 1) Allocation of memory for int was replaced with the allocation for float. Cast is not required. 2) The intention is not to print a pointer to number[i] but the number[i] itself. This type of issue was corrected for a few other printing places. 3) Final prints was corrected, logically program required printing the numbers[i] not the average Corrected program: OUTPUT: sum=0f; Writing f so that it is interpreted as float constant instead of double.This doesn't matter much but is good practice and can help striking out a lot of problems. numbers = (float*)malloc(n * sizeof(float)); Since you want a float array and not an integer array. printf("%f\n",numbers[i]); Use '&' only when you want to access the address of variable . To access the value stored in the variable simply use the variable name. printf("Sum is : %f\n", sum); Writing proper message in output is important. for(i = 0; i < n; i++) { if (numbers[i] < average) printf("%f is less than the average\n" , numbers[i]); else if (numbers[i] > average) printf("%f is less than the average\n" , numbers[i]); else printf("%f is average\n" , numbers[i]); } You need to print the value of number[i] instead of average. And remember not to use & in printf unless you want to print a address First fix the malloc then fix the for and next printf then and the 3 next similar printf. 
c-13-87	X	Using strcat() to concatenate two values gathered from void functions I am trying to concatenate two values that are returned from two different functions, a Server IP Address and a Student ID. The functions used to get these have been void function in order to access the server. I am wanting to use strcat() function but I can't get it to work successfully. The following code successfully returns both of the single values from the server. I am trying to get the output 192.168.229.128: S1427722 Any code that I have previously tried returned the error invalid use of void expression Your function get_ipaddress should either malloc and return an IPv4 address, or be given a string/char[] to fill. So you could change it to: get_studentid should be the same: And now in your main you can do: This takes advantage of sprintf(), which is formatted printing to a string, for this purpose at least it is better than strcat, because for strcat you would need to concatenate twice (": " and studentid). 
c-13-88	X	Why does this code only return every other coordinate from my data set? I have the following dataset: My goal is to read these points into two integers, x, and y. Obiviously, I do not want to read in the blank line at the end of the file, so I wrote the following code to avoid that. Essentially, if a line is blank, I break out of the loop. I know for a fact that my .dat file has a blank line at the end. However, I get the following output: Evidently, this code is skipping every other line. Why is this happening? You are doing the fscanf twice but printing only at the end. You should remove the second fscanf from the for loop 
c-13-89	X	Reverse an integer array in C Given an integer array with 5 elements [1,2,3,4,5], I am attempting to reverse the order of the elements in the array; e.g. the array would become [5,4,3,2,1]. The first for loop should print:1 2 3 4 5 and the last: 5 4 3 2 1 However, it prints 1 2 3 4 5 both times, but the print statements in the loop that reverses the array prints the right numbers. Have I done something wrong? Should I be dynamically allocating memory or something else not allowing me to change the array? To reverse an array you have to do as follows: You are reversing the array twice. On each iteration you swap two numbers to the same distance from the center. So, on the first half of the iterations you have already reversed the array. As you keep iterating you swap again and the array stays unmodified. To fix it just change the reversing loop to this (change i>=n for i>=n/2 ) The problem is, you swap every elements twice (unless it is the center one) which ultimately does not swap anything. At the first loop, you technically swap first and last item. At the last loop, you did the same. So, you return the item back to original position. Another problem is you try to access arr[5] which is undefined as your array is of size 5 and thus the index should be from 0 to 4 only. Following is a function reversing the array 
c-13-90	X	Are a functions local variables always stored in the same set of memory locations every time it executes? I'm assuming no but not positive. Not sure If other variables can take up the same spot in the stack. No. A function's local variables are not always at the same address. Consider a recursive function. If the local variables were supposed to be in the same place, all their values would have to be copied in and out each time you went in and out of recursion. The normal way of doing it is that each function call has a "block" on the stack. If you call the same function twice in a row the local variable addresses will probably be the same. If you call it recursively the second call will be in a different area of stack and so the local variable addresses will be different. The compiler will generate code to assign memory addresses based on a "stack pointer" address + offset. So, the actual physical address for each local will vary on each invocation of the function. The offset may well be the same each time because the compiler code gen logic will be the same. The stack pointer address is likely to be different based on what else gets executed before the next invocation of the function. 
c-13-91	X	C - Segmentation fault when checking if a pointer is NULL so got this segmentation fault every time I tried to check if a pointer variable is a NULL. The error is from these lines of code in add function: This is the whole code that I have: Can you tell me what's wrong with it? and how to solve that? Thanks a lot. In your add function, the variable n is an uninitialized pointer. So it is not the problem of checking it->head. if (it->head == NULL) This like will crash if it itself is not a valid pointer (such as NULL). int add(IteratorInt *it, int v){ node *n; n->val = v; This takes an un-initialized pointer n, and dereferences it. The most likely outcome would be a crash. if I delete the if statement. The printf statement above it which lead to it->head works fine It is hard to believe you, because the n->val is above the printf, and it would most likely crash before you got to printf. If you want to print the address use %p and (void *) cast. Also Allocate memory properly in IteratorIntNew(). This is one way: 
c-13-92	X	Using mutexes to solve a tunnel task Good afternoon everyone. I have started learning C programming and found an interesting task to put my skills to a test. To be honest it is driving me crazy and I do not have a clue how to do it. Instead of using semaphores I would like to use mutexes. I have created a program that automatically calls enter_tunnel so the car would enter. There are two directions possible - driving north ( dir == NORTH ) and driving south ( dir == SOUTH ), but I can't figure it out how to stop a car from entering a tunnel if there are cars driving towards you. I was trying to find more information how to make it work and I am not sure how to correctly use pthread_mutex_lock, pthread_mutex_unlock, pthread_mutex_signal in this context. There is significant literature about resolution of the problem, for example: https://docs.oracle.com/cd/E19683-01/806-6867/sync-12/index.html Also, in stack overflow, there is a question about it already: Mutex example / tutorial? And finally, here is your problem completely solved: https://www.linkedin.com/pulse/semaphore-pthread-programming-linux-purvi-pathak?articleId=7625519368425966741 I could copy the code here, but I do not want to rob the author of the solutions of his achievement. 
c-13-93	X	Visual Studio 2017 15.5 Linux CMake project Linux includes I am using the Visual Studio 2017 15.5 CMake to develop a Linux application (link). I am using some libraries and includes that were installed via apt-get on a Ubuntu system. I would like the Intellisense in Visual Studio to work with these additional includes. It appears that some Linux system includes exist in: C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\VC\Linux\include\usr\include I have copied the additional includes into this directory and Visual Studio Intellisense is working well. Is this best way to do this or is there a better or accepted approach? 
c-13-94	X	How to signal PID in C C is alittle new to me. I have two executables, one is writeP and one is a readP. WriteP executable writes to shared array and read but readP awaits until write is completed it's task. How it;s suppose to execute is as followed. WriteP Executable writes to 10 arrays and waits for a signal. ReadP, sits in busy awaits until write gives a signal. Once a signal is given it read through the 10 arrays and prints the value. I've got that working perfect. Now I would like to add one more iteration. WriteP, writes to 10 arrays and waits. ReadP, reads 10 arrays and sends a signal to writeP to write to the next 10 arrays. ReadP is to sit and await for the signal. May I ask how come my code won't iterate the next 10 arrays? readP.c writeP.c Sample execution 
c-13-95	X	how to intialize a globe struct in xv6 I am trying to implement a queue in xv6. In proc.c ,I have a structure named I have also create an array of structure The initialization I have looks like this I have written two methods as well enqueue and dequeue void enqueue_n(void) I am trying to initialize the structure as a globe structure.so that I can used the structure in my methods. Whenever I compile. I receive this error "excess elements in scalar initializer" and ""˜pq' is used uninitialized in this function ". Can someone help 
c-13-96	X	create macro for message according to time I'm trying to create a macro for my program in C to use in a printf the printf function is the same as below in compilation is returning me alert C4474 Does anyone know why the error? You need to have the else-conditions cascade: 
c-13-97	X	GCC and Makefile (multiple declarations of a function, even with only one?) Currently trying to use GCC on Debian, along with a makefile since I am making one of my headers. Whenever I try to "make" the makefile, I get an error as follows: setup.o: In function 'setup': setup.c:(.text+0x0): multiple definition of `setup' finalkek.o:finalkek.c:(.text+0x0): first defined here collect2: ld returned 1 exit status make: *** [projExec] Error 1 My makefile looks like this: finalkek.c is my main file, and setup is my header. In my main file, here is the only time I mention it: In my header file, setup.h, I have it like this: A few things I noticed: Although technically allowed, it's flawed practice to implement the entire function in a header file. Header files are just for the prototypes (i.e. void setup(void); instead of the whole void setup(void) { ... }). What is in your setup.c? Also, Make isn't supposed to work like this. You shouldn't compile a header file directly, as it's not supposed to have actual implementations in it, just the prototypes. That's what the preprocessor does, with the directive #include, it takes the whole content of the specified header, and just puts it right there in the C file. So by telling Make to compile setup.h, you are including the content of that file in your project twice, which is probably giving you the error. Like others have said, move your actual code for the function setup() to setup.c, as is appropriate. setup.h should look like this: The lines #ifndef SETUP_H, #define SETUP_H, and #endif, are a formatting tool for header files, that keep you from including the same file more than once. And then the accompanying setup.c: finalkek.c: 
c-13-98	X	my nested if statement, need to make an uninterruptible condition I've been trying to program an RC car to follow a line depending on the readings of five line following sensors. the line following sensors give us 1 when they are on the line and 0 when they are not. for example, if the sensors reads 00100, the car will go forward. but I faced a problem, when the sensors read 11111 (dead end) my car should make a uturn, but while its doing the uturn the condition of the sensors change, say it becomes 11000. that takes me to another if statement which is if 11000 turn left and the uturn order is lost. so my question is: how can I make the if statement for uturn uninterruptible by other if statements when the condition changes? Use a boolean. then Now for all other conditions, check if makingUturn is false before continuing with the code for that condition Note In case it wasn't obvious, this wasn't meant as actual code to compile and execute. What I mean by if (sensors == "ddddd"), is to check that all 5 sensors have the value at each position of the string. And when I say makingUturn = bool is to replace the bool with a 1 or 0 depending on if you want true or false 
c-13-99	X	Part of a string converted to an int (C) I'm trying to take a part of a string and put it into a int. For example: And I want to put the 98 in a. I can use only string.h. This simple program will demonstrates how to get first encountered integer number in the string str[]. Function get_first_encountered_number(char *str, int *number); can be reused to hunt for more numbers. Negative integer numbers are also recognized. OUTPUT: 
c-13-100	X	C - popen : How to catch an invalid command? I am trying to run commands sent through popen, however if it is invalid (example kfjhsfdhj) I would like to send a message and not enter my else statement. From what I understand, if an invalid command is sent, then NULL is returned from popen (I might be wrong about this!). I tried the following code but it does not seem to work as I want it to, any ideas? When I run it, I get sh: 1: blabla: not found and I get Query no. X entered in the results file with nothing following it. Another command will append properly to the file. It works as intended with a valid command. 
c-14-1	X	Add item in Arrays I got a problem when I try to add element to array and I always got the itemID already exists I try to solve it but I couldn't this is my Function thank you This is my file 1007 5 30 1004 4 10 1003 3 20 1002 2 10 1006 4 40 1005 5 50 1001 1 70 1008 6 20 1010 4 90 1009 3 10 That's because: Assuming this statement is false on first iteration. 'else' will be executed: So ItemI[1] is set to be ItemID. And on the next iteration, when 'i' is equal to 1, the "if" statement always becomes true. That's why it prints "the itemID already exists" 
c-14-2	X	permute a d-dimensional tensor in C I am interested in permuting the elements of a d-dimensional tensor using C code (and hence, using loops only) and I would like to write the function with d as an argument. The tensor data is so far contained in a "d-dimensional" pointer (for example, a simple array when d = 1). So far, I have defined this pointer statically with **T for d = 2, although indications were given here for a dynamic approach: Create a d-dimensional pointer. How to write the code with d as argument without using a (dirty) if loop: ? Note that the permutation order is an input to the function. Thank you, Edit: It seems I misinterpreted the question. However the below answer is still relevant to the topic, so I am not going to remove it for now. The answer could be specific to the problem, perhaps the code for permuting d == 2 can be reduced to the same as d == 3. I don't know exactly what the code would look like as I have not studied tensors, but if it is not reducible then the "dirty" method that you have is your best option. Alternatively, if you have the number of dimensions #defined similar to the pointer representation in the post you link, you could use pre-processor directives to turn on/off extra loops. This should give you a bit more condensed code. it should probably look like: While this is a bit ugly, it prevents you from having to create and maintain a bunch of different versions. The link provided is really the best approach for creating a d-dimensional pointed in C. However, you can simulate a d-dimensional array with a 1-D array and a bit of math. You can use the following functions to achieve this: Where dimensions is an array of dimensions, d_dimens is the 1-D array we are using to simulate a d-D array, and d is the number of dimensions. For example if you want a 4x5x2 array, you would use dimensions = {4, 5, 2}; d = 3; 
c-14-3	X	Issue copying string pointers contained in structs So i have this struct which im using as a tree for a parser. I initialize it with malloc like this. I have written more here in the function than i needed to in the process of debugging so far and for printing the tree. So I am trying to copy an Expr* a-> value into a Expr* value like this. While the values are "18killstreak" and "x" respectively. But my program crashes at this line and I have tried many other tactics at this point. The problem is that you're not managing memeory for your strings, so you can't just use strcpy. For example, when you have: this allocats space for a 0-length string (just a NUL), and then throws it away (the memory leaks), overwriting the allocated pointer with a pointer to a static constant string "18Killstreak". When you later try to overwrite the static constant string (with strcpy) you get a crash. So to do it correctly, you need to allocate and manage memory for the strings. The easiest way to do that is to have each struct Expr own the memory for the string and use strdup/free appropriately to alloc/copy/free that memory. So your init function becomes: Later when you want to replace the value of a struct, you do: and when you want to free an Expr, you need to also (first) free the value: Now one isuue with this is that strdup is not a standard C function -- it's a POSIX function. So it is available on POSIX systems (such as Linux or OSX), but not on non-POSIX systems. So you may need to define it yourself: 
c-14-4	X	What should I change in my conditional statements to produce the correct triangle classification? I want to let the user input any three values that would indicate the dimensions of the sides of a triangle. The conditional statements in the code will classify whether the sides will make up a triangle. If it does make a triangle, it will display if the triangle is scalene or right or both. If I enter 3, 4, 5 for the sides and I should get that the triangle makes up a right triangle. But I get that the sides do not make up a triangle. Your logic is confused and therefore you are confused. Get rid of ans " you don't need it. Structure your program to immediately respond to stuff. Get rid of loops you don't need. (This program does not need any loops at all.) For example, when checking for is it a triangle, check, and if it fails, quit. It is okay to make the user try again by running the program again. (Yes, you could do it so that it asks again, but that adds complexity that do not need right now. Focus on the task given you.) If the code continues past this spot, then you know it must be a triangle. The next trick is to test for types of triangles. For example: And continue with the next test. Flaggy programs (yours uses ans, scalene, right, etc to do nothing more than report a truth value) do not help you. Avoid being tricky. Good luck! 
c-14-5	X	How to read a specific line and value from a file in C language? I have a text file containing data in this format: 1_info 2_algo 3_data . . . 1999_blalabla 2000_anything I want to obtain data of a specific line in the text, for example I want my code to read the file and go to the third line, and to split it to get the number written before the symbol "_". And all that have to be done in C language 3_data >>>> i want to get the number 3 
c-14-6	X	Expression preceding parentheses? I'm very new to programming and I'm trying to create a simple delay, but I keep getting the error - "expression preceding parentheses of apparent call must have (pointer-to-) function type". This code is for a game, it's supposed to delay the racket movement slightly. I have no idea why this is not working, I've been trying for ages. What is wrong with it and why am I getting that error? edit: i've updated the code. this seems correct, but when i try to use the delay, the whole screen is kind of delayed instead of just the racket (yR2) as intended. why is this? The error is referring to this line: Here you're (apparently) trying to call delay as a function. However, delay is declared as: It's just a number, not a function, hence you can't call it. 
c-14-7	X	Controlling node mapping of MPI_COMM_SPAWN The context: This whole issue can be summarized that I'm trying replicate the behaviour of a call to system (or fork), but in an mpi environment. (Turns out that you can't call system in parallel.) Meaning I have a program running on many nodes, one process on each node, and then I want each process to call an external program (so for n nodes I'd have n copies of the external program running), wait for all those copies to finish, then keep running the original program. To achieve this in a way which is safe in parallel environment I've been using a combination of MPI_COMM_SPAWN and a blocking send. Here are some example parent and child programs for my implementation (the code is in Fortran 90, but syntax would be similar for a C program): parent.f90: child.f90: After compiling with ifort 16.0.3 and intel openmpi 1.10.3, and running with (for example) mpirun -np 4 ./parent, I get the following output: This is essentially the behaviour that I want. From what I understand, by using maxprocs=1, root=0, and MPI_COMM_SELF as the parent communicator, I'm telling each parent process to spawn 1 child which only knows about its parent, since it is the root=0 (and only process) of the MPI_COMM_SELF scope. Then I ask it to wait for a message from its child process. The child gets the parent's (SELF) communicator and sends its message to root=0 which can only be the parent. So this all works fine. The issue: I was hoping that each process would spawn its child on its own node. I run with the number mpi processes equal to the number of nodes, and when I make my call to mpirun I use the flag --map-by node to ensure one process per node. I was hoping that the child process would in some way inherit that, or else not know that any other nodes exist. But the behaviour I'm seeing is very unpredictable, some processes get spread across nodes while other nodes (notably root=0 of the main mpi process) get many piling up on them. Is there some way to ensure binding of the processes to the nodes of the parent process? Maybe through the MPI_Info option that I can pass to MPI_COMM_SPAWN? From the Open MPI MPI_Comm_spawn man page and you can use MPI_Get_processor_name() in order to get the hostname a MPI task is running on. Each MPI job in Open MPI starts with some set of slots distributed over one or more hosts. Those slots are consumed by both the initial MPI processes and by any process spawned as part of a child MPI job. In your case, the hosts could be provided in a hostfile similar to this: slots=2 max_slots=2 restricts Open MPI to running only two processes per host. The initial job launch should specify one process per host, otherwise MPI will fill up all slots with processes from the parent job. --map-by ppr:1:node does the trick: Now, the problem is that Open MPI will continue filling the slots on a first come first served basis as new child jobs are spawned, therefore there is no guarantee that the child process will be started on the same host as its parent. To enforce this, set as advised by Gilles Gouaillardet the host key of the info argument to the hostname as returned by MPI_Get_processor_name: It is possible that your MPI jobs abort with the following message: It basically means that the requested host is either full (all slots already filled) or the host is not in the original host list and therefore no slots were allocated on it. The former is obviously not the case since the hostfile lists two slots per host and the parent job only uses one. The hostname as provided in the host key-value pair must match exactly the entry in the initial list of hosts. It is often the case that the hostfile contains only unqualified host names, like in the sample hostfile in the first paragraph, while MPI_Get_processor_name returns the FQDN if the domain part is set, e.g., node1.some.domain.local, node2.some.domain.local, etc. The solution is to use FQDNs in the hostfile: If the allocation is instead provided by a resource manager such as SLURM, the solution is to transform the result from MPI_Get_processor_name to match what the RM provides. Note that the man page for MPI_Comm_spawn lists the add-host key, which is supposed to add the hostname in the value to the list of hosts for the job: In my experience, this has never worked (tested with Open MPI up to 1.10.4). 
c-14-8	X	Construction of a float array with a size of 520010 is crashing my code after all other sizes are appropriate I'm creating a program that tests the runtime of sorting algorithms with various sizes of randomized float numbers. Everything works out fine; the sorting algorithm works, and the execution time is outputted, up to size 520,010, which seems to crash the program. The program crashes once the float array of size 520,000 is initalized. Is this just too big? From researching, it doesn't seem like C has a problem with getting rid of memory after an iteration of a loop. So what seems to be the problem here? You create a variable length array in a local variable, which will be (very likely) allocated on the stack. The stack has - compared to the heap - limited size, such that the operation may fail at some point, even if your machine has much more memory available. Try it with realloc, which (probably) gives you access to more memory. And check the return value - if it is NULL, then the program could not allocate enough memory. 
c-14-9	X	Loading vectors through pointers, casts and dereferences? The OpenPower Manual | Vector Data Types states to avoid manually loading elements, and to use vector casts: The preferred way to access vectors at an application-defined address is by using vector pointers and the C/C++ dereference operator *. Similar to other C /C++ data types, the array reference operator [ ] may be used to access vector objects with a vector pointer with the usual definition to access the n-th vector element from a vector pointer. The use of vector built-in functions such as vec_xl and vec_xst is discouraged except for languages where no dereference operators are available. I'm in the early stages of testing the technique, but it appears the code above compiles. Compilers tested are GCC 4.0.1 (Old PowerMac G5) and GCC 4.8.5 (Power 730 Server). My first question is, does the technique handle unaligned byte arrays properly? My second question is, does the technique automatically perform big-endian conversions on little-endian systems? My third question is, should we use the technique in practice? It feels like the technique should yield undefined behavior or punning violations. 
c-14-10	X	This may be due to a corruption of the heap, which indicates a bug in exe or any of the DLLs it has loaded When I try to free allocated node I get following error. Windows has triggered a breakpoint in exe. This may be due to a corruption of the heap, which indicates a bug in MiniProject.exe or any of the DLLs it has loaded. This may also be due to the user pressing F12 while *.exe has focus. The output window may have more diagnostic information. 
c-14-11	X	Issue copying file from Server to Client I'm new to C and I'm having an issue that I cannot debug for the life of me. I'm trying a very simple task of sending a file from a server to a client. Server Code: } So for this code, I take a file name and read the file in 256 byte chunks and then write them which the client then reads. Client Code: } This issue is both sides seem to work however when I read a file on the server side, it reads it fine but it doesn't seem to send all of it. The client receives around 99% of the file each time. It seems the client side loop never finishes and therefore doesn't write the whole file, the test file Im using is a jpeg and it receives 32768 out of 33010. Which is 1024 * 32 the remaining 242 bytes aren't written and the loop doesn't seem to end even though the server sends an empty write that should break the loop. Sending SIGINT to the server does end the client loop and also sends the rest of the file however. Any insight into what I am doing wrong would be great, thanks! Edit: As requested the code that executes the function. recvBuff == 0 can never be true. You aren't testing for bytesReceived == 0, which is what you should be testing instead of recvBuff == 0. So, you are ignoring end of stream in the client, so your client copy loop never exits, so you never close the output file. Other problems: Don't use fread(), fopen(), etc. The API is far too problematic. Use open(), read(), write(), close(). Sending zero bytes at the end of the file is pointless. 
c-14-12	X	c: pointer errors when passing a 2D array into a function and using helper functions I wrote two functions to: 1) in getint, use an array of integers to return an integer (ex: pass getint an array with 8 integers, getint would loop through the array and return an associated integer); 2) in combine, pass an array dec[4] containing 4 integer arrays and return an array of integers. So you would pass it an array containing 4 int arrays, then it would loop through that array and pass each of the 4 arrays into getint. It would then store the returned int value into the new array of 4 returned integers (decInt) and finally return decInt. I'm getting the errors: no matching function for call to getint for decInt[i] = getint(dec[i]); candidate function not viable: no known conversion from 'int' to 'int *' for 1st argument for int getint(int dec[8]) I'm fairly certain it has to do with incorrect pointers, but I'm not sure how to fix it. You are passing only an integer and expecting pointer to an array of 8 integers. And more over you are allocating memory for 4 integers and looping 8 times in the other function. Since you are missing the idea of passing 2d array this code demonstrates the idea. Suppose you have an array like this Then when you pass it to a function you will do it like this In your case, you were supposed to return an 1d int array which will decay into int* but you passed an int. Compiler for sure threw error/warning for this but you didn't understand. Actually 2d array of int or more correctly array of array of int will decay into int (*)[8] or pointer to an array of 8 integers. And the 1d array will decay into int*. Extending the same idea you will get Here you are not specifying the row or column because you have hard-coded the value in the looping inside of it, which is not a good way of writing it. but yes it would work as long as you pass the array with same column dimension. In your case getInt() returns an int and takes an input a int*. Now you call getInt() with the 1d-array of ints and then each call's output you store in an array's element. You then return the address of the allocated chunk (where the array elements are stored). 
c-14-13	X	Does constant time access imply contiguous memory at some point? As the title says, I was wondering if constant-time/O(1) access to a container does imply that memory is necessarily contiguous at some point. When I say contiguous I mean if pointers can be compared with relational operators at some point without invoking undefined behavior. Take eg std::deque: it does not guarantee that all its elements are stored contiguously (i.e in the same memory array), but is it correct to say that as std::deque satisfy the requirements of a Random Access Iterator, memory will be contiguous at some point independently of the implementation? I am new to C++ so in case what I said above does not make sense: suppose I was going to implement random access iterators in C. Can be used to generically express a similar mechanism to that of C++ random access iterators (considering that even if pointer do not, block will always point to addresses in the same memory array in iterators of the same container)? EDIT: just to clarify, constant-time here is used to denote constant-time random access No. Consider a fixed-size linked list like the following: Lookup time is constant. It does not depend on the number of elements stored in the container (only the constant NODE_COUNT). Now, this is a strange data structure, and I can't think of any legitimate reason to use it, but it does serve as a counterexample to the claim that there need be a single contiguous block of memory that would be shared by all iterators to elements in the container (i.e. the block pointer in your example random_access_iterator struct). 
c-14-14	X	Input only with given pattern I need a little help. I need to input array of int values only if it adheres to a given format pattern. The pattern is: White space needs to be ignored. I need to load the int values into an array. 
c-14-15	X	C - Finding three numbers to add to a target value using concurrent threads I'm doing a C project where I have to read 10000 lines of arbitrary integers from a text file into an array and find three integers that add to a target value. It then prints out the time taken to find the values. For example - if my target is 233, the three numbers could be 81/102/50. That is if those numbers are found in the text file. I created three nested for loops to find every combination of the 10000 integers. It took me about 5 minutes, without any use of threads. My project involves implementing concurrent threads and I am having trouble figuring out a faster method to find the numbers. I thought about splitting the array in half, where one thread finds a combination from 0-5000 and the other 5000-10000 but I realized it wouldn't work since the three numbers could be in either half. Any ideas? Are any of the values negative? Can you keep a record of the maximum and minimum values encountered during input? (Answer: yes; it is easy to do that. You can use that to eliminate the inner loop if the outer loops identify 2 values that cannot add up to the target.) Suppose you have N numbers. You then can decide that you can split the workload between 3 threads so that (for example, pulling fractions out of thin air): thread 1 will work the outer loop for indexes 0 to N/5; thread 2 will work the outer loop for indexes N/5+1 to N/3; and thread 3 will work the outer loop for indexes N/3+1 to N. The middle loops will start at the outer loop index plus one, and if there could be a solution, the inner loops will start at the middle index plus one. The reason for the asymmetric partitioning is that the first thread will be examining more values in the middle and inner loops than the other threads will. In fact, I expect that I've not skewed the workload enough " the 5 should quite probably be a bigger number, and the 3 should be bigger too, and so on. And if you have more threads, the calculation gets trickier. You want to roughly balance the workload for each thread. If you specify the fraction of the range of the outer loop for each thread as F1, F2, F3, then: thread 1 will work C1 = (N/F1)"¢(N-1)"¢(N-2) tests. thread 2 will work C2 = (N/F2)"¢(N-N/F1-1)"¢(N-N/F1-2) tests. thread 3 will work C3 = (N/F3)"¢(N-N/F1-N/F2-1)"¢(N-N/F1-N/F2-2) tests. and you want C1 â‰ˆ C2 â‰ˆ C3. The generalization to m threads is fairly clear; the solution is not. You can change the nomenclature to use a multiplicative fraction of the range, or to specify [L1..U1] for thread 1, and [L2..U2] for thread 2, and [L3..U3] for thread 3, subject to L2 = U1 + 1, L3 = U2 + 1, and [L1..U3] covers the whole range N, etc. Start by sorting the array. Then, instead of three nested loops, you can use two nested loops and a binary search. The two nested loops find every sum of two numbers. Once you have the sum of two numbers, the third number must be equal to the target value minus that sum. So you can do a binary search to determine whether that third number exists in the array. The speed of the new algorithm can be estimated as follows. The three nested loops compute 10000 choose 3 sums, which is 167 billion sums. That's about 500 million sums per second (given that your run time was 5 minutes). The two nested loops compute 10000 choose 2 partial sums. That's 50 million partial sums. For each of those partial sums, the code needs to perform a binary search, which takes at most ceil(log_2(10000)) = 14 comparisons. So the total number of comparisons is 700 million. The result is that you replace 167 billion sums with 700 million comparisons. Assuming that the comparisons are more expensive than the sums, you're looking at a running time of about 4 seconds, even without concurrent threads. To add concurrency, simply divide the array by the number of processor cores that you have. (It's important to note here that if you have more threads than cores, then the threads aren't really running concurrently.) The outer loop of each thread only uses a portion of the array. The inner loop of the thread scans the whole array to compute the partial sum. Then the thread does the binary search to see if the third number exists in the array. For example, if you have a 4-core processor, then each thread has an outer loop that uses 1/4 of the array. That should speed things up by a factor of four, which reduces your run time to about 1 second. We can use multithreading in the following way as well: I haven't tested this code. Although the logic would remain the same. This would run it in three threads and enter the critical section only once and check if the condition is true while saving the three numbers in the save_num variable. 
c-14-16	X	Object linking order trouble I am facing linking problem. I'll illustrate it: a.c: b.S: No matter if I'll link or I'll get unresolved symbols. How do I link these files? I can't merge them. Example may be nonsensical, but that illustrates point, what do i try to archive. Initial investigation: a.c b.S b.c Output So what gives? Why is it okay with GCC but not GAS? Okay, so gcc makes b a global symbol. Lets try .global b in b.S: Success. So gcc/ld will do multi-pass symbol resolution for anything that is not in a static library. But it only looks for global symbols. Here's the final b.S: 
c-14-17	X	How to run code taken as user input? Is there a way to actually take a well formatted input and execute it at an appropriate time? Something like: Now, if i enter "print(num)" as input, it should output And not just python, I would love to have solution to this problem in C, C++ or Java as well. What you suggest actually works as is: Another method you can have a look at is the exec method (and above that is a detailed description for eval). Depending on what you are going for this might be a bad idea though. Have a look at the local and global parameters to restrict the environment. 
c-14-18	X	Native network-related functions randomly blocking in android I have a library written in C that I'm using from an Android application. I discovered that the application blocks sometimes while executing various functions (what is common is they are all related to networking). I'm testing on a real Android device running Android 6. The library is compiled with NDK version 21. So far I have observed this behavior with 3 functions - getaddrinfo, poll and socket: These functions are called several times each after the program starts running. The same call can work fine one time and block indefinitely (at least several minutes) the next time. The internet connection on the device seems to be fine. Any ideas? How can I even approach debugging such a problem? I didn't actually find the reason for the problem, but I found how to fix it. Part of the code was written by somebody else and I wasn't sure what exactly it was doing. After rewriting this part, everything started to work fine. Among other things, the code was spawning a new process with fork(). I suspect the problem to be related to that. 
c-14-19	X	File IO: Line by Line Comparison In C, Segmentation Fault I'm really stuck on this problem. I'm trying to write a program in C that will take a file, and check to see if every line is in alphabetical order. So the text file apple banana grape grape orange The program would print to stdout "Lines are in order". If the lines are out of order it would print say the lines are out of order and print the first pair of lines where that occurs. The main thing I'm having trouble with is just debugging, I keep getting a segmentation fault and I'm not sure why. I don't think that theres an instance where I'm trying to dereference a null pointer and I don't think there's an instance where I try to assign something with more memory than a pointer can handle so I'm not sure what the issue is. Below is my code, I'm really new to C so if there is anything obvious or fundamental flaws in my code I'd really appreciate being told so. Thanks for the help everyone, here is a version of the program that works. My mistakes were A) forgetting how to properly copy one string over to one another and B) not realizing that fgets would return null if it fails, that's what I needed to use to make sure my loops actually ends. Tell me, if you need comments. 
c-14-20	X	Installing a C compiler in Matlab I want to call from MATLAB function from a lib file (compiled in C - probably in MSVS). All instructions I found on Mathworks get me: "No supported compiler or SDK was found. You can install the freely available MinGW-w64 C/C++ compiler; see Install MinGW-w64 Compiler" I would have followed the instruction but I've noticed this: "Library (.lib) files generated by MicrosoftÂ® Visual StudioÂ® are not compatible with MinGW" So I rather not to. I have MSVS installed on my (windows) computer, I can't find anywhere instructions of how to 'tell' Matlab to work with this compiler. Any one can point me to instructions how to define a C compiler i Matlab (other than MinGW)? P.S. I am using the coder toolbox and generating MEX files all the time so I guess somewhere my Matlab does have access to a C compiler The options for free C compilers that work with Windows MatLab installs are getting slim. The last time I tried MinGW with MatLab, it was a no go. Visual Studio Community 2017 will not work either. Visual Studio Community 2015 does work if you can find an installer for it. That's what I have deployed in my labs. You can run the MatLab command To have MatLab show a list of compatible compilers found on the system, if any. You can also select which compiler for it to use if there are more than one. OK, solved the issue I installed the Windows SDK 7.1 SDK 7.1 won't install the C compiler without the .Net 4 installed .Net 4 comes with Windows 10 BUT the SDK 7.1 does not recognize it Here how to install SDK7.1 on Win10 I found how to solve this... Now my Matlab recognize I have a compiler :) 
c-14-21	X	Linked list only prints last word of text file line I'm writing a program that takes in a text file as input and outputs the number of times each word occurs. To do this, I'm using a linked list but whenever I print the list, only the last word of each line prints. The code below shows how I'm adding each word to the list: line initialization is: char *line[128]; search() returns true if the word is already in list and false otherwise, thus count is incremented if the word is present. and here is where I print: For example, when using the text: The only words that get printed are lamb, snow, went, go First check if the word is already in the list. If it is in the list then there is no point to add it a second time. The search function should be returning LIST* which you can use to increment its value. Also simplify the linked list as follows: 
c-14-22	X	different results after certain limit I am doing some exercises. There was a problem, where you have to do the sum of the squares of the first N natural numbers (lets call it x) and the square of the sum of the first N natural numbers (lets call it y). At the end what you want is the difference y-x. I did following: short explanation: I have two functions sumsquar and squarsum which calculate x and y. For comparison reasons I also included the 4 rows above "return 0", because it is much faster with this solution. Now the problem is, that for Ns (here limit) to 1023 I get the same result, but if limit is >1023 the results are not the same. Why is this the case? BTW sorry for the ugly title but I did not know what to use there... So someone in the comments suggested changing all the ints to unsigned long long. That fixed the problem, but I do not know why. Edit: "Because you've got 64 bits, unsigned; but int is generally 32 bits signed" "“ Basile Starynkevitch I tested it out. If you have: aa=2147483647 bb=-2147483648 my mistake was I thought that if the variable in this case for example "sum" is an unsigned long long it is no problem because it is large enough Int is of size 4byte (The size of an int is really compiler dependent. Back in the day, when processors were 16 bit, an int was 2 bytes) considering you have 32 bit or 64 bit system. So max value limited to 0x7fffffff. Where as unsigned long long is atleast 64 bits, or larger. in your case, int is not enough to hold the sumsqare() when N > 303 - So your results will be incorrect if you use int for N>303 . If you use 64 bit, you can go much higher value of N. (Still there will be a limit) 
c-14-23	X	2 dimensional array in struct with threading in C Hello. I need to write program which create N 2-dimensional arrays (N is our argv[1] and size of arrays are N-N) with random numbers and then create N threads. Every thread gets his own 2-dimensional array and sums the numbers from every line and returns the greatest value to main thread. Main thread returns the largest sum from every thread. Here's my code I don't know how to use those arrays to get data properly from struct. This code returns me only 2 random numbers (I should get 8 for N = 2) and the rest is the same like those 2 (4 same numbers for one thread and other 4 same numbers for second thread). I know why it is, but I don't know how to fix it. 
c-14-24	X	Shouldn't these ks the other way round in this C program? I wanted to make a program in C that multiplies two matrices. I'll show now how I did it. However, my teacher told me it was wrong and showed me the right way of doing it which doesn't make sense to me. This is my code: And this is what my teacher said: But it doesn't make sense to me because when you multiply matrices, the process you do goes like this: So, you go from left to right in Matrix A and from top to bottom in Matrix B (for example: ae+bg). Therefore, it makes sense to write c[i][j] += a[k][j]*b[i][k] in the for loop because k increases by 1 for each iteration. Do you understand what I mean? Do you think I'm wrong? Thank you in advance. 
c-14-25	X	GCC, x86 assembly, extra space in function's stack I was playing with my toy program to better understand the assembly that GCC generated. I am not able to understand why the emitted assembly is allocating extra 8 bytes of space on the stack. Here's the C++ code: And here's the assembly output of the func: And here's the link for those who like it more interactive: https://godbolt.org/g/zM8BMN If you look at the assembly, all the arguments passed to the function which are not on the stack are allocated a space started from rbp-20 even though it could easily have been rbp-12. As far as I can see, the stack range : [rbp-16]..[rbp-8] is unused. So why compiler didn't use it? 
c-14-26	X	Mysterious linux backtrace and memory map While dealing with memory allocation, valgrind and gdb, i had to write a simple c program with an invalid free: Which produces an error as desired: Then i tried to get rid of the output by redirecting sdtout and stderr to /dev/null but noticed the output would still be printed which left me baffled. I stoped the program an instruction before the free() call with a debugger, looked up the /proc/PID/fd dir and tried again redirecting all listed fd's to /dev/null but still same result.. I searched online for answers and asked some of my colleagues but nobody could explain to me how this output is printed and why it cannot be redirected. For sure there still are many things i do not know about operating systems / linux but i hope you can help me understand what is going on here. Thanks! The backtraces (in glibc) are printed to /dev/tty, which is going to be a different file descriptor (it's going to be 3 in your program) than 1 and 2 and your shell doesn't know about it. Glibc provides an environment variable LIBC_FATAL_STDERR_ using which you can redirect it elsewhere. For example, you can redirect backtraces to stderr with: If you run your program under strace, you can understand it better (and how the backtraces are written). 
c-14-27	X	Pass two-dimensional array of struct to function how can I pass two-dimensional dynamically allocated array containing struct to a function in a simpliest way? I want to be able to access **board with void ftoa(). Pass two-dimensional array of struct to function Leaving aside the fact that your code does not use any 2D-array, but only 1D-arrays *1, to pass a struct field**, well ... pass a struct field**: and call it like this: *1: namely one 1D-array allocated here: and size 1D-arrays allocated here: 
c-14-28	X	format "˜%s' expects argument of type "˜char *', but argument 2 has type "˜int' So Im just starting out coding in C. I was coding this custom squeeze function and I have an error i cannot explain. The goal is to get the letter 'c' out of the code. When I try to compile I get a warning I have provided in the title. How did did '**argv' become 'int' ? Change this to or better, remove the last for: **argv is a char. But when you pass a char value to a variadic function as one of the ... arguments (e.g. printf), it is automatically converted to int. That's how **argv became an int. In any case %s is not immediately suitable for printing individual letters. You want to print a single char, apparently. That's done with %c format. 
c-14-29	X	Using iteration in order to write less repetitive and less time consuming code in C I am writing a code which compares two strings for a simple guessing game. One string is pre-set, in my code it's "Eggman", and this is then compared with a user input, if the letter in the same position is the same then the user is shown the letter on screen, if it is not the same as the pre-set string then a question mark appears. For example, since the pre-set string is "Eggman" the user will be asked for an input, if the input is for example "Eclair", then the program outputs "E?????", which is exactly what I want the program to do, however, I have used multiple if statements, which has made the code inconvenient, and cannot really think of a way to do it with iteration. I thought about using the strcmp() function, but I pretty sure that it can't be used to compare singular characters in a string. The code is below: As you asked there is much easier way to solve your problem instead of definend multiple if else you can use loop. I have tried to solve your problem, hope it will help: The above program will ask your again and again till the user input matched with the declared string. 
c-14-30	X	Using getopt to process simple command line arguments I want to process some command line options. But this does not work as I expect. Running ./program -n 10000 -t 2 will cause the program to output n=49, nThreads=50. What am I missing? Otherwise you are assigning char to an int. Also you can see from where the 49 and 50 is coming from. Ascii value of char 1 is 49 and 2 is 50. 
c-14-31	X	MISRA C 2012 Rule 15.4 There should be no more than one break or goto statement used to terminate an any iteration statement I am trying to get rid of multiple break and goto statement in my code. As the rule suggests wee should not use more than one break or goto statement in any iteration statement Sample code: I have tried with nested if statements but it is not a solution to terminate the loop. And also instead of break, if goto statement is there what could be the fix. Sample code with goto: This is quite an obscure algorithm. In practice, that's usually what many MISRA rules boil down to, they block you from writing strange code. Though I can't know for certain, it smells like this code relies on various global variables and there might be better ways to write it. However, if the algorithm is exactly like you wrote it and there's no way around it, then it is what it is. In that case I would rewrite the code with multiple return statements, which violates another (advisory) MISRA rule. But it is better to deviate from that rule than the somewhat more sound rule against having multiple break/goto. This is more readable than any of the alternatives in the question. (Please note that you must also u suffix all integer constants for MISRA compliance) I think 15.4 and 15.5 are two extremely controversial MISRA suggestions. Keep in mind that they're not required but advisory then you may classify them (if your organization approves) as "disapplied" (tnx Andrew). In my opinion following those rules you will make your code more verbose, harder to read and then also more error prone. As I said it's just my opinion, let's try a step-by-step approach. I'm not using proper names but you MUST pick good names from your domain. Flag and keep a single break You can use a simple _Bool flag. Assuming you included stdbool.h: Please pick a better name for flag, ideally you should describe the condition. As you can see we have a single break but we paid a huge price in legibility. Flag and replace break with continue What can we do? Replace break with continue and use the flag in the loop condition: Slightly better but the truth is that we're not address the main issue in this code. Move it to a separate function If this code snippet is part of a bigger function then the truth is that we're addressing the wrong issue. It's not the break per se that can cause problems but its usage in a bigger context. In C we do not have std::optional<T> then we may use an out parameter (but it's not the only technique to achieve this result): With a separate function similar to our first implementation with flag. Even better, if you can ignore 15.5 then this function will be very easy to write and to read: Don't forget to add const where appropriate. I'm pretty sure that this can be refactored to be much better (too many function arguments, mixed values & pointers, too big coupling between those two functions) but with dummy names and lack of surrounding code it's hard to suggest anything better; what I want to highlight is the point to move the code to a separate function. If code inside branches is complex enough then you may even have more benefits to introduce three separate functions. What 2 * *number1 + number2 is? What it is calculating? Feel free to post your full code on Code Review (including surrounding code and with real names, explaining its purpose). 
c-14-32	X	Fuse lib example deleted my home folder I was playing with a modified version of https://github.com/libfuse/libfuse/blob/master/example/passthrough.c and I mounted it in a folder in my home directory (home/joao/mnt). Without realizing that I was running it already, I re-ran the fuse programm and my computer stopped working. I rebooted the system and then I saw my home folder without most of the files that ithad before. Is there anything I can do to restore my old state? I'm no way an expert, but I'm afraid you've lost everything unless you have a backup of your system... I can only give a hint. In passthrough.c it is said that This file system mirrors the existing file system hierarchy of the system, starting at the root file system. This is implemented by just "passing through" all requests to the corresponding user-space libc functions. Its performance is terrible. So, if I understood it right, every change you're applying to mounted passthrough FS affects your home dir. Or, since it mirrors your home dir, you could just make a pretty recursion by mounting it there and thus break something. 
c-14-33	X	avcodec on C, frozen image I write video packets from video stream to buffer. and then i'm trying to write them to file. now the problem: if start_frame=0 everithing is ok, i have 10 sec video file. But if start_frame=125 (for example) in resault i have video file with 5 sec frozen picture and 5 sec video. what is wrong? also at the end i have errors: maybe you know what is it. It kinda says you have to re-adjust packet pts/dts for +125 frame change. Try to restamp pts/dts before av_interleaved_write_frame. For pts this simple formula may work pkt.pts = frame_count * pkt.duration. dts is more complicated but for the test puspose try pkt.dts = pkt.pts. Hope that helps. 
c-14-34	X	Components for c c++ development visual studio I am trying to install visual studio 2017 community edition to test a few code verification tools. I would be developing simple cmd based c c++ programs to test on. I am confused as to which components I need to choose. my requirements are as follows to build and run c\c++ command line programs the whole environment features like code suggestion and completion and others that make development easier and if possible avoid desktop development components other languages and features what would be the minimum required set of visual studio components\workloads to achieve this? and what would the suggested component good for? 
c-14-35	X	Getting zero answer while using DO-WHILE loop I tried to calculate the tot(total fee) in the do-while loop, but all I get is tot=0.00?! Why is this happening? And after that I get a message: it said the variable fee is not being initialised? scanf(" %c",&option); This will solve the problem for you. The reason the ' ' is provided in the scanf so that it can consume the white space characters. What happened earlier was that your character input got the \n from previous input. To check the thing that it inputted \n try outputting the option like this printf("[%c]",option); you will see output Also the break statement you provide is breaking for the case staement. Not the while loop. You have infinite loop now. You can solve this with a added condition. Even more simply, you could have changed the while condition overall and make it like this this conforms to your idea the program will repeat until the user key in negative value or zero more suitably. 
c-14-36	X	execl + find + -exec: missing argument to `-exec' I am trying to run execlp with find ... -exec ..., and the find program consistently tells me: What could be wrong? When I run find with these arguments on my shell, it succeeds. My function calls follow (after looking at related SO threads, I have tried several arrangements of the argmuments): When you execute the command from C, you don't need the \ before ; Using this syntax should work When on the shell, ; marks the end of a command, and has to be escaped. execlp doesn't go through the shell to execute a command, it does it immediately. Edit -- you actually only do one find so this part is not necessary Moreover, the exec family replaces the current process with the requested command. So only the first execlp will be executed. A solution is to fork() for each find (one by one, waiting for the child process to end, otherwise the output will be a mix of all results). 
c-14-37	X	What does G_DEFINE_TYPE mean in GTK? Im trying to understand the fundamentals of this basic GTK program. I can't figure out how G_DEFINE_TYPE works. It looks similar to a function declaration like those in C` As per the documentation A convenience macro for type implementations, which declares a class initialization function, an instance initialization function (see GTypeInfo for information about these) and a static variable named t_n_parent_class pointing to the parent class. Furthermore, it defines a *_get_type() function. 
c-14-38	X	What is the purpose of defining such a function? Consider the above function. What is the purpose of defining functions like func? I have seen this repeatedly. It is not function defination but it is a functions declaration. A function declaration informs the compiler of the number of parameters the function has, the type of the function parameters and the type of the function return value. 1) It tells the return type of the data that the function will return. 2) It tells the number of arguments passed to the function. 3) It tells the data types of the each of the passed arguments. 4) Also it tells the order in which the arguments are passed to the function. 5) It tells the name (identifier) of the function. does not define a function, but declares it by providing its prototype. It's the "promise" to the compiler, that latest the linker will provide a module exposing such a function. The prototype for a function covers its: return type name the type and order of the arguments The arguments' names are not relevant in the context of a declaration. The function's arguments' names only need to be provided for the function's implementation, which might look like this: On the other hand this is not valid. The C Standard clearly states: 6.9.1/5 Function definitions If the declarator includes a parameter type list, the declaration of each parameter shall include an identifier, except for the special case of a parameter list consisting of a single parameter of type void, in which case there shall not be an identifier. No declaration list shall follow. This is just a function declaration of a function to tell compiler that a function with name func exists having definition at end. Consider this example: All the other answers are not answering the correct question explicitly, so I'm adding one here. First of all, it's not a function definition because the body is missing. This semantic is called function declaration. Before calling a function, the compiler needs to know what exactly the function is. This is named a "prototype". A prototype must be known before generating correct code to call a function. Consider this code: The compiler doesn't know if it is calling int func(int, int) or long func(char, double), nor can it perform error checking if the actual function is FILE* func(void*). With a correct prototype privided, the compiler is able to perform necessary checking and generate the corresponding code of that function call. 
c-14-39	X	Warning and Error colors on Powershell (GCC on Windows) I have installed MinGW on Windows 10 in order to compile C programs using Windows PowerShell. So far everything works fine but when I get a gcc output error, the code doesn't colorize the words "error", "fatal error" and "warning". It shows a block of text in one homogene color and makes it really hard for me to work with it. How do I change this, so that I can see those words in colors (i.e.red for "error" and green for "warning") just like in Ubuntu or similar platforms? P.S.: I am a beginner in this matter, please tell me step by step the easiest way to do this. I really appreciate it. 
c-14-40	X	Center a sprintf message adding the name I have code that works correctly if I use only the Welcome message, but when the p->client_name pointer is printed the message is not centered. So my question is how can I center the message and the client name as if it were a single message. Why does it currently center only the message welcome Example: Solution to an interpretation of the original question This code looks like it works. The comments explain the calculation. The test code shows how I go about testing such things. Note that the code doesn't attempt to handle the cases where either L1 or L2 is zero. It would be possible to do that for most cases, unless the non-zero length is too big. It doesn't seem necessary, though. The objective is to centre two (non-zero length) strings. The calculation doesn't attempt to deal with leading or trailing spaces in the strings, either; it is simply assumed that there are no leading or trailing spaces. It also assumes a single-byte code set; it won't centre UTF-8 properly if that has characters outside the ASCII range (and it won't handle control characters "Â back space, tab, newline, carriage return, etc "Â sensibly either). Output: But I didn't mean that " I meant something else This code seems to meet the revised requirement. If you don't want the trailing spaces, you can simplify the function " it could simply return the value needed for the leading spaces, and you'd drop the trailing %*s from the format string and the r2 and subsequent "". The vertical bars are there simply so you can see whether the data is centred properly (and the trailing bar needs the trailing spaces to make any sense). Output: 
c-14-41	X	C, Flex and Bison: error: conflicting types for "˜yyerror' I'm doing a project in C with Flex and Bison, but I found an error during the compile. Here is the error: Code of yyerror in A_Sintactico.yy: Code of yyerror in A_Lexico.l What is happening?, Thanks! The extern version looks oldish. Implicit return is int in that case not void . You 'd have to get the two consistent. The correct declaration is void yyerror(const char* mens); And the function definition should be the same: void yyerror(const char* mens) { "¦ } extern is not necessary, although it doesn't hurt. But the return type is obligatory. Changing the argument to const char* is not necessary, but it is highly recommended, since yyerror may be called with a string literal as an argument. 
c-14-42	X	C: Output of SHA-1 as little endian to float As per this documentation, my task is to compute a colour value based on an alphanumeric identifierer. The idea is to run the identifier string through a SHA-1 and use parts of the result to compute the colour values. I am having trouble with the following step: Treat the output as little endian and extract the last-significant 16 bits. (These are the first two bytes of the output, with the second byte being the most significant one.) Here's what I have so far: But I fail to get any reasonable output with this approach. Using more bytes only gives me nonsense values for the float, aswell as when interpreting it as an int. Obviously I do not expect anyone to solve this for me. I'd just be very thankful for some tips in what direction to look. Thanks a lot in advance. I would do this by assembling an uint16_t from two chars using explicit shifts and ORs: The double casts are necessary to ensure that each char value is zero- rather than sign-extended to the width of uint16_t, before the shift. Note also that I am reading from temp, not buf - the raw SHA hash, not the hex-coded hash. Using the hex-coded hash would limit the possible values that x could take. Then, convert x to a floating-point number in the range [0, 1) by dividing it by 65536: 65536 is 216; the value range of uint16_t is 0 through 65535, inclusive. The .0 suffix on the divisor is necessary to make C perform floating-point rather than integer division. For efficiency, this division can be combined with the next step of multiplying by 2&pi;: M_PI (declared in math.h) is already a floating-point number, so we no longer need a .0 suffix on 65536, but you need to put parentheses around the entire subexpression 2 * M_PI / 65536 to force the compiler to evaluate that part at compile-time and emit just one runtime multiplication. Let's take a closer look at that algorithm: Run the input through SHA-1 (RFC 3174 [4]). Treat the output as little endian and extract the last-significant 16 bits. (These are the first two bytes of the output, with the second byte being the most significant one.) Divide the value by 65536 (use float division) and multiply it by 2Ï€ (two Pi). The algorithm isn't saying to treat the first two bytes as a floating point value. It says to treat them as a 16-bit integer, then convert the value to a floating point type for the next step. Also, you should be using temp instead of buf when converting the values, as buf contains printable characters representing hash output while temp contains the actual output. So you would convert the value like this: Then you cast it to double for the next step: 
c-14-43	X	C - A program for calculation of molecular fraction of each element in a formula given I need to write a program which by inputted formula can define mass fraction of each element. Something like that: input: Na[Al(OH)4] output: Mr = 118 w(Na) = 19,49% w(Al) = 22,88% w(O) = 54,24% w(H) = 3,39% Everything works except for parentheses and brackets analysis, though this is fine (i'll get "good"), but i am interested, why it doesnt work Parsing strings and equations is not a trivial thing to do in C. Or any other basic programing language. You need to set up the rules and symbols your code can evaluate from an expression. Define all elements, define posfix/prefix/infix rules for parenthesis, etc... Try to look for Compiler parses and natural text interpreters. This question should be useful. How to parse a formula from a string? 
c-14-44	X	C - Getting a SIGABRT error, does not make any sense for me So, my program should read an array of unknown size of positive integers in the format {1,2,3,4,5}, process it into an array, and then start reading pairs of integers a and b and find the least common multiple of a to (b-1)th elements of that array. Here's my current solution: The line tmp = (int*)realloc(array, bufCurr); seems to be causing the SIGABRT, according to gdb, however, if I remove the second part of the program (finding the LCM while cycle), it works just fine. I've tried checking how the second part works with a defined array in the second program: and it runs just fine as well. So how come that combining these two causes the SIGABRT? I've tried checking if accessing the array causes the problem, however, this seems not to be the case as well. Thanks in advance for any suggestions. As per the manual, the function The realloc() function changes the size of the memory block pointed to by ptr to size bytes. The contents will be unchanged in the range from the start of the region up to the minimum of the old and new sizes. If the new size is larger than the old size, the added memory will not be initialized. If ptr is NULL, then the call is equivalent to malloc(size) In the program, we have calling realloc the first time, while the array pointer is not initialized. The memory manager try to read some internal data based on that random address (like the size of the segment vs the requested size) which leads to undefined behavior (crash in your case). As suggested, a simple solution consists of setting initially array to NULL, so that realloc does a simple malloc (since its ptr address is NULL). 
c-14-45	X	How to input two strings I'm trying to write a program where the user has to write two different strings, but after the first string is entered the program ends. This is the code: In theory after the first string is written and I press CTRL-D (on Mac, it's the same as CTRL-Z) it should print the "Insert the second string" and allow me to write it. What actually happens is that I have to press CTRL-D again (because it doesn't output the second printf), at that point the program ends, and it outputs (after the first string I wrote) "Insert the second string", but I cannot write it! Can you help me please? 
c-14-46	X	output of negative integer to %u format specifier Consider the following code %d accepts negative numbers therefore output is -121 in first case. output in case 2 and case 3 is 4294967175. I don't understand why? Do 232 - 121 = 4294967175 printf interprets data you provide thanks to the % values %d signed integer, value from -231 to 231-1 %u unsigned integer, value from 0 to 232-1 In binary, both integer values (-121 and 4294967175) are (of course) identical: See Two's complement printf uses something called variadic arguments. If you make a brief research about them you'll find out that the function that uses them does not know the type of the input you're passing to it. Therefore there must be a way to tell the function how it must interpret the input, and you're doing it with the format specifiers. In your particular case, c is a 8-bit signed integer. Therefore, if you set it to the literal -121 inside it, it will memorize: 10000111. Then, by the integer promotion mechanism you have it converted to an int: 11111111111111111111111110000111. With "%d" you tell printf to interpret 11111111111111111111111110000111 as a signed integer, therefore you have -121 as output. However, with "%u" you're telling printf that 11111111111111111111111110000111 is an unsigned integer, therefore it will output 4294967175. EDIT: As stated in the comments, actually the behaviour is undefined in C. That's because you have more than one way to encode negative numbers (sign and modulo, One's complement, ...) and sone other aspects (such as endianness, if I'm not wrong, influences this result). So the result is said to be implementation defined. Therefore you may get a different output rather than 4294967175. But the main concepts I explained for different interpretation of the same string of bits and the lossness of the type of data in variadic arguments still hold. Try to convert the number into base 10, first as a pure binary number, then knowing that it's memorized in 32-bit Two's complement... you get two different results. But if I do not tell you which intepretation you need to use, that binary string can represent everything (a 4-char ASCII string, a number, a small 8-bit 2x2 image, your safe combination, ...). EDIT: you can think of "%<format_string>" as a sort of "extension" for that string of bits. You know, when you create a file, you usually give it an extension, which is actually a part of the filename, to remember in which format/encoding that file has been stored. Let's suppose you have your favorite song saved as song.ogg file on your PC. If you rename the file in song.txt, song.odt, song.pdf, song, song.akwardextension, that does not change the content of the file. But if you try to open it with the program usually associated to .txt or .whatever, it reads the bytes in the file, but when it tries to interpret sequences of bytes it may fail (that's why if you open song.ogg with Emacs or VIm or whatever text editor you get sonething that looks like garbage information, if you open it with, for instance, GIMP, GIMP cannot read it, and if you open it with VLC you listen to your favorite song). The extension is just a reminder for you: it reminds you how to interpret that sequence of bits. As printf has no knowledge for that interpretation, you need to provide it one, and if you tell printf that a signed integer is acutally unsigned, well, it's like opening song.ogg with Emacs... printf is a function with variadic arguments. In such case a "default argument promotions" are applied on arguments before the function is called. In your case, c is first converted from char to int and then sent to printf. The conversion does not depend on the corresponding '%' specifier of the format. The value of this int parameter can be interpreted as 4294967175 or -121 depending on signedness. The corresponding parts in the C standard are: 6.5.2.2 Function call 6 - ... If the expression that denotes the called function has a type that does not include a prototype, the integer promotions are performed on each argument, and arguments that have type float are promoted to double. These are called the default argument promotions. 7- If the expression that denotes the called function has a type that does include a prototype, the arguments are implicitly converted, as if by assignment, to the types of the corresponding parameters, taking the type of each parameter to be the unqualified version of its declared type. The ellipsis notation in a function prototype declarator causes argument type conversion to stop after the last declared parameter. The default argument promotions are performed on trailing arguments. If char is signed in your compiler (which is the most likely case) and is 8 bits wide (extremely likely,) then c+=10 will overflow it. Overflow of a signed integer results in undefined behavior. This means you can't reason about the results you're getting. If char is unsigned (not very likely on most PC platforms), then see the other answers. 
c-14-47	X	reading string with newlines and spaces I am trying to parse a string from stdin such as this one { 7 , 3,5 ,11, 8, 16, 4, 9, 2 ,8, 4, 2} ( there is a \n between 2 and 8 ). I have made a function to extract the numbers and trim commas spaces and newlines (accepts char* as an input) but the problem is when I try to get input using scanf I can't get spaces so I used fgets instead but fgets will exit as soon as it sees \n. Is there a way I can get a string from this ? You can use fgets to read the full line and use strtok to read the numbers. The example below will also treat \n as a comma , 
c-14-48	X	GUI in C language I am building a gui of multiple programs, i want to combine them in one window by which the user could intially select which program to run. the window of the chosen program only appears. my question: when i select one program the functions under this program don't work i.e: switch(msg) { case WM_CLOSE: DestroyWindow(hwnd); break; case WM_DESTROY: PostQuitMessage(0); break; when select one item and the the program doesn't copy the name and value to edit text 1 and edit text two as shown enter image description here[enter image description here][2] Standard C99 or C11 does not know about GUIs and widgets. You can check by reading n1570 (which is basically the latest C standard specification). So you'll be using some widget toolkit library (probably running under some particular operating system). I recommend using GTK (which is cross-platform). You then could have your GTK program run other programs. Or you could (this is a bit harder) collect all the windows created by each code. (in general, your question is very toolkit specific and has no obvious answer; it could even be display server specific; in some cases, you could think of your program as behaving like some window manager) 
c-14-49	X	fseek to a 32-bit unsigned offset I am reading a file format (TIFF) that has 32-bit unsigned offsets from the beginning of the file. Unfortunately the prototype for fseek, the usual way I would go to particular file offset, is: so the offset is signed. How should I handle this situation? Should I be using a different function for seeking? You can try to use lseek64() (man page) With Notes from The GNU C lib - Setting the File Position of a Descriptor This function is similar to the lseek function. The difference is that the offset parameter is of type off64_t instead of off_t which makes it possible on 32 bit machines to address files larger than 2^31 bytes and up to 2^63 bytes. The file descriptor filedes must be opened using open64 since otherwise the large offsets possible with off64_t will lead to errors with a descriptor in small file mode. When the source file is compiled with _FILE_OFFSET_BITS == 64 on a 32 bits machine this function is actually available under the name lseek and so transparently replaces the 32 bit interface. About fd and stream, from Streams and File Descriptors Since streams are implemented in terms of file descriptors, you can extract the file descriptor from a stream and perform low-level operations directly on the file descriptor. You can also initially open a connection as a file descriptor and then make a stream associated with that file descriptor. After studying this question more deeply and considering the other comments and answers (thank you), I think the simplest approach is to do two seeks if the offset is greater than 2147483647 bytes. This allows me to keep the offsets as uint32_t and continue using fseek. The positioning code is therefore like this: The problem with using 64-bit types is that the code might be running on a 32-bit architecture (among other things). There is a function fsetpos which uses a structure fpos_t to manage arbitrarily large offsets, but that brings with it a range of complexities. Although fsetpos might make sense if I was truly using offsets of arbitrarily large size, since I know the largest possible offset is uint32_t, then the double seek meets that need. Note that this solution allows all TIFF files to be handled on a 32-bit system. The advantage of this is obvious if you consider commercial programs like PixInsight. PixInsight can only handle TIFF files smaller than 2147483648 bytes when running on 32-bit systems. To handle full sized TIFF files, a user has to use the 64-bit version of PixInsight on a 64-bit computer. This is probably because the PixInsight programmers used a 64-bit type to handle the offsets internally. Since my solution only uses 32-bit types, I can handle full-sized TIFF files on a 32-bit system (as long as the underlying operating system can handle files that large). 
c-14-50	X	how to store several separate strings in a char** to use execvp? i am coding a minishell, and i want to store my arguments in a char** and then call the execvp function with my char** my function to read user input in a buffer exec to execute the shell command j `will contain the number of arguments My problem is the conversion of char* to char** Input: Steps to create arguments to execvp(): Count the blanks: 5 Replace the blanks by '\0's. Create an array of 5+1 char* (one more to be able to mark the end of the array): Make the 1st point to the first word's 1st character: Make the other 4 elements of ppc point the 1st char after each '\0' Mark the end of the array by setting its the last (the additional element) to NULL: call execvp like this Complete code: basically the same answer as above, implemented slight differently. quick answer to your problem "My problem is the conversion of char* to char**" => you have to create(malloc) a char* array to the count of individual char* elements. then for each element in char** you have to malloc char array and copy the chars. which is implemented below. cheers ! 
c-14-51	X	C - Making UTP server/client chatroom with select() I'm supposed to make the server broadcast the message it gets from a client to all the other clients connected. The actual broadcast works, but I have no idea how to stop the clients from infinitely printing "[client]Received from friends:" when I CTRL+C the server, OR how to stop the Server from infinitely printing "[server]Message received..." when I CTRL+C any of the connected Clients. Or how to add a verification somewhere so that the Client will disconnect when trying to send the string "quit" Maybe I'm asking for too much, but could someone please explain to me what exactly does select(..) do? I understand that it's monitoring the FDs, but I can't fully understand what's going on(step-by-step) after 1 second. Does it go through all FDs ,1 second for each then repeat? I kind of get the idea, but not entirely. Thank you either way SERVER CLIENT 
c-14-52	X	Know exact line of the program execution I am trying to do a debug mode for my program that writes something like this in one file to store the logs: [Day Month D HH:MM:SS YYYY] foo.c function_name line 33: The thing that happens The problem is know the exactly value of the line, obviously I can see it in my IDE, but I want to know if exist a more elegant and efficient way. I hope you have explained me well (sorry if not) and thanks in advance. You may have a look at macro assert (assert.h) where it is done as intended by you. In short: It has to be a macro. If it were a function it would report the file and line of this function but actually you would want the file and line where the function is called. (This does not mean that this macro cannot call a function as helper.) The current file and line are accessible by the macros __FILE__ and __LINE__. So this is how it could look in source code: As MCVE test-log-debug.c: Compiled and tested with gcc in cygwin on Windows 10 (64 bit): Compiled and tested in VS2013 on Windows 10 again: visibleman noted that there is a very similar question SO: Visual C++ equivalent of __FILE__ , __LINE__ and __PRETTY_FUNCTION__. AFAIK, (and also mentioned in one that answers) __FILE__ and __LINE__ are standard. Other/similar macros might be provided as proprietary extension of the compiler. 
c-14-53	X	How to put a uint8_t in the middle of uint16_t without affecting other bits I am writing a SPI driver for a DAC chip which uses 16bit SPI messages...the value that represents the output is from bit 11 to bit 4 (an 8 bit DAC). I have wrote this MASK but I have no idea how to achieve updating the data without affecting other bits: You are correct about the use of the two operations | and &, but you are not using them in the right order, and you are not positioning one of the operands correctly. Here is the correct way of doing it: Since you are writing to a hardware register, a single write should be used to avoid possible side effects: MCP4901_SPI_MASK_DATA is inverted to clear out bits outside of 0x0FF0. Alternatively, you could define the mask as 0xF00F, and drop the ~ operator. The 8-bit value is shifted left by 4 to position it in the middle of 16 bits before "OR"-ing it into the number. Demo. 
c-14-54	X	How to store string in stack using array in C? On running push operation it's exiting with non zero error without performing any action. We have to add alphanumeric values to the stack by using array and push & pop. It should accept a string value and store it in stack array when display is selected it should display all the values. Can someone help me rectifying the error in this code that why it is not assigning or storing any values to string. This answer provided all the problems the OP has when used the code posted above. The first part of the solution provides the analysis of those errors and how to deal with them. The second part provides the solution the OP wants to achieve. (To store string in the stack). You were accessing an uninitialized variable and comparing the garbage value of it with 4. I suggested do-while. The idea is simple enough. We are getting an input in ch and the doing all of the work. The comparison is done at the end of all the work So we are working with a determinate value of ch always. Earlier it seems from your question that the garbage value in ch was not equal to 4. that's why it didn't even enter the loop. You have made every single variable in your program to be global. The real pain in debugging this will be understood when you get a bug for which we have to trace the data mutation. Don't use global variables like this. Major error You can never store a string in a int array. You are inputting character with %s specifier. You should use %c. Then also, you cant use strcpy() to copy it. Moreover you don't need strcpy() you can simply do it using an aissgnment. You can store char in an int variable and in an int array. Corrected code would be (push() function): Same way in pop() function you would use Also in display() function you need to change Again if you are sure that you will work with characters only why not use a char array. Here char a[100] will fit perfectly. Also these are the list of errors/warning that your program generates(Without using any flags) With using the flags as alk said the errors and warnings will be even more. In order to store string you need to consider using a 2d char array. That is one way to realize the string. Code (For illustration purpose. Only the changes are incorporated. The code has minimal/no error checking.) Here in this solution we have used two major changes Explanation making char x to char x[max] and also changing a from int [max] to char a[max][max]. Doing that now those can store null terminated char arrays. The 2d array of characters is used to realize the stack over here. 
c-14-55	X	Can we define function prototype in main function in C? in my university our teacher taught us "we define function prototype before main function. Like: But today my friend showed me they learned they put prototype inside main function. Like: They both works.I wonder if there are differences between them. Thanks. Can we define function prototype in main function in C? Yes. I wonder if there are differences between them The difference is that in first snippet prototype is global while in second it is local to main. findmax will be visible after its declaration and/or definition. If you declare the function in main() it is scoped in the main() and you cannot access it in another function. But if you declare it at the start of the file or in a header file you can use it in any function. If foo is declared in outside a function, it can be called from any function in the same file: However, if foo is declared inside a function, it can only be used within the same scope: In either case, foo must be declared before it is used. In VC2008 the following is valid: My believe was that prototype declarations are valid anywhere and their scope is at least from the point of declaration to the end of file. Looking at the C99 standard: 6.2.1 Scope of Identifiers An identifier can denote an object; a function; a tag or a member of a structure, union, or enumeration; a typedef name; a label name; a macro name; or a macro parameter... For each different entity that an identifier designates, the identifier is visible (i.e., can be used) only within a region of program text called its scope... identifier has scope determined by the placement of its declaration (in a declarator or type specifier). If the declarator or type specifier that declares the identifier appears outside of any block or list of parameters, the identifier has file scope, which terminates at the end of the translation unit. If the declarator or type specifier that declares the identifier appears inside a block or within the list of parameter declarations in a function definition, the identifier has block scope, which terminates at the end of the associated block. This would mean that VC2008 is wrong. A straightforward answer to your question would simply be a YES. But when it comes to the scope, I'd like to add more. What others suggest is right -- if you declare a function inside another function, the first one's scope is usually limited to the second one. For the example you provided, it is perfectly safe to say so. But that may not be the case always. Consider the following code: Here you can see that print_hello() is declared inside main(). But that is redundant. print_hello() has already been introduced into the compiler. There is no need of declaration to use it inside this file (if you use it inside other files and compile them independently, then you'll have to declare it inside those files or write a header file to do so). What my point is, declaring print_hello() inside main() has not rendered it local, at least in this example. You can see print_namaste() calling it successfully without any additional declaration. But that is not the case with print_namaste() and print_hi(). They require declaration to be used from within main() because they are introduced to the compiler only after main() has been defined. print_namaste() will only be visible to the functions inside which we declare it, and to those functions which are defined after print_namaste(). In this example, print_namaste() is not visible to print_hello() (unless declared inside it or before it), but visible to main() because declared inside it, and visible to print_hi because its definition comes only after the definition of print_namaste(). 
c-14-56	X	Conversion From postfix to infix in C Segmentation Error So I have been trying to make a program that converts from infix to post-fix and vice versa. So far I managed to do the infix to post-fix part, but in the post-fix to infix part I have a problem trying to pop the two elements from the stack and then add the operator between them. Every time I try to do any string modification I end up with a segmentation error. If anyone has the time to help me I would greatly appreciate it. EDIT--> So I did Some changes but still not working. All I want to know is how to take the last two elements in the stack and put the scanned operator in the middle using strcat if possible. I am open to suggestions 
c-14-57	X	Virtual comport communication with windows 10 in C im trying to communicate with a device via a virtual comport (comport to usb adapter,PL2303) on Win10. The device is an Eltek RC250 datalogger. I have already installed an older PL2303 driver. The devicemanager recognized the device without any errors. Sending and receiving data between the device and the official software is working properly. My problem is that after ReadFile is executed the program is doing nothing. I think ReadFile is waiting for more input from the device and therefore stucked in this function. Trying it on a win7 System gets to the same issue. The message which i write to the device is a valid message. The following code shows the communication. Please help me, i have no clue what the problem might be. Thomas In the ReadFile() call, third parameter should be sizeof(answer) (or possibly just 1 since it appears to be a single byte), but certainly not sizeof(lpNumberOfBytesRead). It is blocking waiting for 4 bytes (size of a DWORD) when presumably answer is a single byte? Also if you have not explicitly set a Comm timeout, you have no idea how long ReadFile() will wait before returning 0 to exit the loop. If the timeout is indefinite then it will never exist the loop. There are other potential issues in this call, but without seeing how the parameters are declared, it is not possible to say. 
c-14-58	X	Are this inlining results common? Due to university work, I have to investigate a simple optimization, the inlining. Here is the basic code: And here is the code with inlining: Compiling using the option -O0 with gcc, the results are 14.27 seconds for the basic version and 4.45 seconds for the version with the inlining. Is that common? I executed the programm 10 times and the results are always similar. What do you think? Then, compiling with the option -O1 the results are similar for both versions, 1.5 seconds approximately so I suppose that gcc does the inlining for me with O1. By the way, I know that gettimeofday counts the overall time and not only the time used by the programm itself, but I am required to use that function specifically. Thanks in advance! Let's us analyze the assembly output generated by GCC 7.2 (with O0) for both the versions of the code. Without inlining First, let's check how much work has to be done by the computer to achieve the task with a separate function: For the above code, GCC produces an assembly as given below: The processing part of the code takes approximately 32 instructions (instructions between L4 and L3 and that of add function). A large majority of the instructions are used for making the function call. A simplified way to understand how function calls work is: arguments are pushed on the call stack return address is pushed on to the call stack the function is called makes a copy of the make room for all locals on the stack actual function code is executed restores the state as it was before the function call return to the caller The above steps (except 6th) take additional instructions to do the required processing. This is called the function call overhead. With inlining Now let's check how much work the computer has to do if the function was inlined. For the above code, GCC produces an assembly output as given below: The processing code (instructions between label L3 and L2) has around 14 instructions. In this assembly output, all the instructions which are responsible for making the function call aren't present which saves considerable amount of CPU. In general, the overhead of a function call is not relevant when your function's running time is more than several dozens of cycles. In your code, the running time of your function is quite small and hence the function call overhead gains significance. If you use the O1 flag, the compiler indeed does the inlining for you. You can find out by checking the assembly generated with the O1 or you can directly check the GCC manual for the list of optimizations which are tried with O1. You can generate assembly output using the -S flag or you can do it online with GodBolt (the assembly outputs were taken from here for this post). 
c-14-59	X	Sorting array of struct type Hello Friends, I have some list of pre-defined list of currency in the type defined by struct and in function sortCurrency i need to sort all these currencies according to their exchange_rate how ever i am getting some error. ERRORS: OUTPUT I WANT TO GET You have to listen to the compiler complains. I fixed basic type mismatch problems which would allow you to compile and do farther tests: has been changed to: and call to compareCurrency has been adjusted. You need to debug your sorting since it does not work. This is modified program and its current output: OUTPUT: 
c-14-60	X	Simon Says Game in C on Raspberry Pi Response Function First time poster here and I was hoping on getting some help on this code I've been working on for a while. For my student project, I have chosen to write code to simulate a game of 'Simon Says' on my Rpi in #C. I have defined all my LEDs and SWITCHES and I have reached the point where the Rpi is showing the pattern of LEDs, one iteration at a time up to 10 by using this code: Example output: 1) Red Light 2) Red Light - Blue Light 3) Red Light - Blue Light - Green Light and so forth until the pattern is at a length of 10... What I am trying to do now is implement a function 'User_Response' that would provide the user the opportunity to enter the correct switch. If they enter the correct switch, the loop continues. If not, it returns out of the function. (Usually people have it loop back to the beginning of the pattern, but for all intents and purposes I would rather have mine just end the game/break out of the loop). Also, I am unsure on where to place this function once it has been made in my nested while loop... I do know about (DigitalRead(SWITCH_COLOR) == HIGH/LOW), but I am unsure how to properly use it in this situation. If anyone has any advice to offer, I would gladly appreciate it. :) 
c-14-61	X	how to access unknown parameters passed using ... to a function in c Sometimes when we don't know how many and which parameters need to be passed to a function, then we pass it using three periods ... but how to access these parameters inside the function? 
c-14-62	X	C - Segmentation fault(core dumped) I am making a Rubik's Cube that can rotate it's rows and columns. My struct is this: In this part I am allocating memory for cells. (X is user input) Then I am filling these cells: If x is bigger than 3, program crashes with Segmentation fault. How can i solve this? would be Otherwise you are allocating memory for x int variables and then storing int* variable on it. In case sizeof(int) = sizeof(int*) then it wont be any problem but on the system where this is not the case you have earned yoruself a undefined behavior. To get rid of all this ** while using malloc the best would be to do this Similarly, And also don't cast the return value of malloc. This suppresses many warning generated by compiler and is unnecessary. Apart from all this, have you ever wondered what would happen if malloc did fail and returned NULL? Then you are working on a NULL and dereferencing it(Undefined behavior). Check the return value of malloc, in case it returns NULL handle the error and move on. You want here to allocate x pointers to int, so this should be It seems on your system the size of a pointer (to int) is bigger than the size of an int ... Also in C don't cast malloc() (see this) 
c-14-63	X	How can I edit and delete from text file in my Student Automation console program written in C I am a newbie Computer Engineering and I am trying to make a program for student automation. I finished most of my project, but i don't know how to update or delete student informations from text file. I can save informations well, but when i try to find or do anything about student ID's, my program just crashing. There is my code for update and delete. Thanks for any help! Update Method: Delete Method: 
c-14-64	X	How to use scanf() to split the string "127.0.0.1:1024" into "127.0.0.1" and "1024"? So I have a string "127.0.0.1:1024" I want to split the 127.0.0.1 from 1024. This is what I've tried: It gets the 127.0.0.1 right, but port is still empty. What could be the problem? You don't need extra info after %[]: Plus, I don't really think you need that much space for them: This particular task is best performed by strsep, not sscanf. (All of the *scanf functions are broken-as-specified and should never be used for anything. Yes, really.) I'd do something like this: strsep is a BSD extension which most modern Unixes provide. If you don't have it, strtok_r, part of the 1999 C standard, provides the same functionality with a clunkier interface. If you don't have that, strtok, part of the original C standard, provides the same functionality but with an even clunkier and non-thread-safe interface. strdup is also originally a BSD extension but was standardized in POSIX.1-2001. 
c-14-65	X	C check if fd is open using write(2) Is possible to know with system call write(2) if the fd that I'm sending data to is open or close? My problem is that I'm writing to a fd that is sometimes closed and sometimes open. I think there must be a way to know with write this kind of situation but I can't find that. You could use a system function that doesn't affect the file (if opened), instead of write, use fstat (man page) Example fstat() returns -1 if it couldn't use the file descriptor (0 otherwise). From the manual page On success, the number of bytes written is returned (zero indicates nothing was written). On error, -1 is returned, and errno is set appropriately. So just check the return value for -1 
c-14-66	X	C - Storing a character to a char array? How to put a character in a char array? it gives me an error of: [Error] invalid conversion from 'char' to 'const char*' [-fpermissive] This should help: If Current_Character is a char as you suggest, then on line: strcat(Operators_Found, Current_Character); you are passing a char in the second argument where const char* needs to be passed, as mentioned in the documentation: char *strcat( char *dest, const char *src ); Appends a copy of the character string pointed to by src to the end of the character string pointed to by dest. The character src[0] replaces the null terminator at the end of dest. The resulting byte string is null-terminated. The behavior is undefined if the destination array is not large enough for the contents of both src and dest and the terminating null character. The behavior is undefined if the strings overlap. Parameters dest - pointer to the null-terminated byte string to append to src - pointer to the null-terminated byte string to copy from 
c-14-67	X	Random values assigned when using fwrite to modify one int on a binary file Function that it's not working I'm writing a simple function that opens a file containing 20 ints. The user can select a number from 1 to 20 and then a score. Then the new score should be written onto the file, and when accessing the file the new value should be there. For example, choosing Student 1 and giving it a new score of 10 should give a score of 10 when used with another function to display the numbers of the file. If I give the score of 10, the value when reading the file is: 167772160. I've been trying to see if there's an error on my use of the fwrite function, but I haven't found anything. Reading function (apparently working fine) Maybe my error is on the process of reading the values of the file again, so I'm going to include the function that displays those values as well if it's useful. I don't get any compiler error nor warning and I've been looking at other working examples, so I really don't know what I'm doing wrong. This line should be otherwise the writing is shifted one byte. 
c-14-68	X	Why does my linked list head point to 2 items before the head So im trying to practice my C double pointer linked list in not global form and im confused why s--which is practically head-- points to null first then some random address even though i think i moved it to the first node in the list. here is my code: I get this output from my code and i also get these warnings: List is: 0 43586480 3 4 5 6 7 8 9 [Warning] initialization from incompatible pointer type [enabled by default] at this line of code Statistician *travel = s i could just always move the displaydata two times before printing the data so that the first to that i dont want to see wont go out but i wanna know why its working like that. also i could also ignore these errors but i wanna learn how to fix it. The code has wrong logic. you didn't use s properly. it would be something like. Your earlier operations didn't do anything significant. You made some wrong changes to a local variable and assigned a single pointer value to a double pointer. You need to check whether malloc call fails or not by checking it's retyurn value. This will save you from undefined behavior when the call fails. Also displayData function is also wrong. It would be Earlier you had undefined behavior accessing memory that you didn't even allocate or you don't have permission to. This invoked Undefined behavior in your code. Clearing the idea: Here when you pass &s then that means address of s is being sent, a local variable having type Statistician** will hold that. Now if you don't dereference it, then you simply play with the address of s which is contained in local variable. This is not what you want. You need to make changes to the address that is being passed. So you do it by dereferencing it *s = temp and like this. [Warning] initialization from incompatible pointer type [enabled by default] at this line of code Statistician *travel = s This says you are assigning incompatible pointer types. Here s is not pointing to your head, *s is. So it should be Then Again it should be Then in displayData() 
c-14-69	X	How to convert bytes stored inside a buffer to a variable? So I'm reading from a file descriptor which contains an int variable in its raw byte format. So I'm doing: How can I convert that buffer to an integer? I was thinking of memcpy but was wondering if there are better ways. You could read directly an integer read will read the size of an int bytes, and store them into extractedInt. If your int is actually a string in a file you want to convert to an int, the procedure is a bit different. I can guess from your code that you're reading from the network. This is then not portable to just read a int from the buffer, in your network protocol you chose a certain endianness but you cannot expect that all the platforms where your program will run to have the same, so it will lead to bad convertions. And other proposed solutions of asking read to return an int will lead to the same problem. So in your case, I can only advice to iterate through your array and compute the integer by progressively placing the bytes at the right place depending on the endianness of the platform. You can detect the endianness of the build target platform by using the macro __BYTE_ORDER__in GCC. There is an example for network data that is big endian: 
c-14-70	X	SegFault when switching from small test file to 31 mb file Below is my (incomplete) code for a merge sort project. This worked fine for the parts I have implemented until I switched from the 128 line test file to the 31 mb file that is supposed to be sorted. Now getting a segfault and I'm not sure what to do in order to solve this. Removed some lines I believe are inconsequential because "mostly code". The following line: allocates memory on the stack. Its size is restricted. If you read a file which can be be very big use malloc: You can use the pointer like an array. (In fact, they are the same) 
c-14-71	X	Trouble with basic add/sub/mul/div program in C? I am trying to write a simple program that inputs two floats and an operation sign and, using the ASCII value of the operation sign, branches to a specific line and outputs the correct answer. However, the program does not allow me to enter the third input, the operation sign, and so the only output I get is 0. Here is the code: And here is what is shown on the console: As seen above, I am unable to indicate the operation I wish to perform. I'm sure it's a simple mistake. Are there any blatantly obvious errors that could be pointed out to me so that, hopefully, this program will run correctly? scanf("%c", &operation); would be scanf(" %c", &operation); That will make sure that we don't consume the \n character from previous input. In your case that is exactly the case, your operation variable holds the value charcater \n. The ' ' in scanf enusres that all the white space charcaters are consumed. And then you get the correct char input. And also operation = 45 would be operation == 45. Even more simply you can do this Earlier you were using the assignment. You were not checking equality. ==. Also here you have used goto which can be easily converted to a while statement. Here you don't need goto - goto creates an control flow which is much harder to debug. You can do it simply like this here. or with You need to use the equality operator in the if statements. Also instead of thos "magic" numbers - use the character i.e. 
c-14-72	X	Warning comparsion between pointer and string I want to input a string and if it contains two consecutive "HH" in it then it should print out "voila" to the screen if it does not contain it should return "No voila" If a string is scanned and if it contains two consecutive "H" it should print out voila The warning I get is comparison between pointer and integer Please rectify my code as I am a beginner in c. Thanks in advance for answering. "HH" this is string literal and when we use it in the comparison the address of it is compared with the ascii value of the character str[i] is being compared. That's why you got the warning message. Solution would be to use strcmp(str,"HH")==0 then print voila.(As this means str matches with "HH"). You don't need the loop here. So you would simply do this Edit:(Missed the part two consecutive occurence of HH) Again if you need to find the consecutive occurence then this solution wouldn't work because this matches exactly the content. Then you need to use strstr or similar function which finds the occurence of a substring in a string. From standard 7.24.5.7 The strstr function locates the first occurrence in the string pointed to by s1 of the sequence of characters (excluding the terminating null character) in the string pointed to by s2. The strstr function returns a pointer to the located string, or a null pointer if the string is not found. Without any function: To find the single occurence you can also do this Notice that we are comparing with 'H' the character not the literal "H". you can try this : You said: if it contains two consecutive "HH" then it should print out "voila" to the screen I assume you mean two consecutive Hs, not two consecutive "HH"s. For the first, you would need to look for "HH" while for the latter, you would need to look for "HHHH". In either case, you need to use strstr. this should help: The warning you were getting, was because you were comparing char at a time with string HH on line str[i] == "HH" 
c-14-73	X	Using write() to write the bytes of a variable to a file descriptor? I'm trying to send raw bytes of a variable to a certain file descriptor (in this case a socket). So let's say I have: So would that write the sizeof(size_t) number of bytes of the variable number to the file descriptor some_fd? I have no way of testing this out currently, so just wanted to confrm. So would that write the sizeof(size_t) number of bytes of the variable number to the file descriptor some_fd? No, it won't. Remember that write is declared as: You'd need to use: Use of & is necessary to be able write the value of number from the address used by number. write expects address of the buffer which has the data that need to be written. So you need to pass address of number in your case. write can be interrupted. You need to check the return value of the write to know whether the expected number of bytes are successfully written or not. Below are the lines from write man page: The number of bytes written may be less than count if, for example, there is insufficient space on the underlying physical medium or the call was interrupted by a signal handler after having written less than count bytes. If a write() is interrupted by a signal handler before any bytes are written, then the call fails with the error EINTR; if it is interrupted after at least one byte has been written, the call succeeds, and returns the number of bytes written. 
c-14-74	X	Why is quick sort better than counting sort? Quick sort: worst case o(n^2) average case O(nlogn) Counting sort: in all cases o(n) Both quick sort and counting sort are stable algorithms. If these two conditions are present, why is quick sort still better than counting sort? Sorts aren't always necessarily 'better' than one another. In certain situations, quicksort might be preferred for a number of reasons: Quicksort is in place, unlike counting sort, which has to create a number of arrays (e.g. use more memory) to do its work. It may seem like counting sort is O(n), but take a look at the intermediate counting array that has to be created. The counting array length is essentially the difference between the largest and smallest elements in your original array. If the range is really big, this counting array is massive. For example, what if your array only has two elements, but the two elements are 1 and 9999999? And this counting array has to be processed (all that summation and counting stuff). So really, the run time of counting sort is O(n+k) where k is the difference between the largest and smallest elements in the original array. Finally, counting sort seems...difficult to implement if the elements you're trying to sort are not numbers. How would it work for strings? 
c-14-75	X	Reading data from a file into a linked list, and searching for elements in the linked list I am trying to write code and am taking in data from a file and storing it into a struct and creating a linked list. I don't see any immediate problems with my code but I made a function to check if a zipcode exists within any of the structs in the linked list and it doesn't seem to be working. Here's what the data from the file looks like: id,price,bedrooms,bathrooms,sqft,yr_built,zipcode 1370804430,543115,2,1,1380,1947,98199 3744000040,518380,4,2.5,2810,2014,98038 3313600266,190000,3,1,1180,1966,98002 EDIT I implemented new code for reading the file into a linked list but my function for finding the zipcode isn't working. When I enter a zipcode I know exists in the file, nothing gets printed. The code you present will only load the first item, so if you are searching for later items it won't work. Notice how the code with the fscanf doesn't have a loop. I think you read only one row from data and made one node for linked list. If you want to make linked list then you have to read all rows from file and create node of each row and link it with loop. For example Trying to write this code with c++ At least two problems head remains NULL only one house is read from the file Try something like Explanations are in comments. Basically loop on fscanf until no more lines in file read values in local variable h if fscanf successful, allocate and set n if we have a last, set its next to our new n if head not set yet, set it finally, last points to n to be used at next iteration First of all select a language. Either C or C++. There is a problem in your code. The thing is, you have memory leak here and that in one way is the reason for the problem. Well to say it in detail, you allocate memory and get input and store it in that memory and then you forget about it. You don't forget but yes there is no way you can access it. This is the memory leak. And then you pass a NULL valued pointer to the search function and it returns nothing. This change will solve the problem, Also there is one redundant thing in your code (this is not causing the problem but yes you should know this). Once a return statement is executed that break will never be executed. Just put the return statement. No use putting the break here. Another point you didn't free the allocated memory.(Ah! to free you need to keep track of it - which you didn't do here). After you are done working with it you should free it. Also check the return value of malloc. In case it returns NULL take necessary action. in the following proposed code: error conditions are checked and acted upon most of the comments to the question are incorporated And now, the proposed code: Of course, if you really want to use C++, then suggest using a vector rather than a linked list 
c-14-76	X	How to configure mpu6050 gyro sensor with stm324 in Atollic TrueStudio? I am trying to build a self balancing robot as my project but, doing so has proved to be quite a challenge as I cannot find any guide or helpful content yet. The problem is that I am using atollic TrueStudio and programming in C without using CubeMX or HAL in Keil(like most tutorials). I have managed to find some lectures regarding timers, interrupts etc but I don't know how to get data from gyro and accelero using I2C. If there is any video tutorial or even a post about using mpu6050 with libraries, then kindly refer to me so I can learn it and use it in my robot. Thanks for taking the time. After looking through the data sheet and figuring out what goes where, I finally found this website which had already made a library for mpu6050 functions. I still think that you will need decent amount of understanding to make do with it but it is quite fun of you are willing to put in a little effort. MPU6050 Code for stm32f4 There are three download packages here (two at top explain I2C and one below code has mpu6050 functions) 
c-14-77	X	PuTTY console not waiting for user input? I am now to stackoverflow. Please help me. Here is the output of above code. ==================================================== First name: Saurabh Do you want to enter middle name?Last name: ==================================================== Console does not wait for entering "Y" or "n" Please explain me in detail that why my code is not working. Sorry if this question is duplicate, but please help me. 
c-14-78	X	How to copy array of strings to a empty array of strings I've been trying to copy an array of strings called char* args[] which contains basic shell commands such as ls and sort into another array of strings char* argsNew[] and it is not working properly. below is my code for copying one string of arrays to another using strcpy. When I execute this the printf never executes causing me to assume that there was an error when executing the strcpy command. Am I using strcpy incorrectly? Is there a better and simpler way of performing such a task? Any help would truly be appreciated. Thank you. Edit: I added some more details to the top. Thank you for your speedy responses. Try this, can solve the issue One way to do it would be First of all the looping was wrong, you needed to make it either the last pointer variable point to NULL.(Similar to the char* [] passed to main()). Also you didn't point to any memory earlier that you could copy. Earlier operation you were doing was invoking undefined behavior. Again the drawback with the earlier solution is that we are always taking an extra space. We can avoid that using this solution. Here we have used strdup to get the allocated memory and copy string to it. And used sizeof to get the length of the array. Also the looping can be done like this Code would be like 
c-14-79	X	How to know which address space a buffer head is mapped to? In the jbd2 source code, any modification in the File System is mapped into a handle_t structure (per process) that later is used to map the buffer_head to the transaction_t which this handle is going to be part of. As far as I could understand, when a modification to a given buffer_head is needed, then a call to do_get_write_access() is going to map this buffer_head to the transaction that the handle_t is being part of. However, when this handle_t is used to map the buffer_head to the transaction_t, the reciprocal mapping is lost, that is, I cannot track back to which handle_t this buffer_head belonged. The thing is that, during the jbd2_journal_commit_transaction() (commit phase 2b in commit function) I want to find a way to walk through these buffer_heads and be able to classify them if they are related to an inode, or to a metadata, or to a inode bitmap block, or an data bitmap block, for example. Furthermore, at this point in the source code, the buffer_heads seems to be opaque, where they are simply sent to the storage. UPDATE 1: What I have tried so far was this, in the jbd2_journal_commit_transaction() function, in the commit phase 2b. It is not working, it is giving NULL ptr in the as_p, that is, there is no b_assoc_map set for this buffer_head. But, I have no idea what is the b_assoc_map. UPDATE 2: I am trying to get the information from the handle_t structure at ext4_mark_iloc_dirty. handle_t->h_type has the information I need. However, when I try to compare this value, a NULL pointer is causing a kernel warning. I thought this structure is unique per process, but seems like it is having some race condition, I don't know clearly yet. After looking through all the source code path related to this issue, I conclude that there is no way to do it without changing anything. Basically, the handle_t structure has the information about the transaction. Later, when some modification is going to be done in a given buffer_head, the jbd2_journal_get_write_access(handle, bh) is called to get the write access to the specified buffer. Inside jbd2_journal_get_write_access the journal_head structure is created, and then it is going to point to this buffer_head, however, at this point there is no relation between handle_t. Next step, after returning from jbd2_journal_add_journal_head, a call to do_get_write_access(handle, bh) is made, and here the journal_head is initialized with the information passed by the handle_t. After this step, where the handle_t is used to initialize the journal_head, then the handle_t is not necessary anymore. Up to here, everything is initialized, now we can move to the commit point. In jbd2_journal_commit_transaction, at commit phase 2b the buffer_heads belonging to the committing transaction are going to be iterated, and committed. Because the only information attached to the buffer_head is the journal_head, and the journal_head does not contain the necessary information to distinguish what kind of buffer_head is it, then I conclude that it is not possible to reach what I want without modifying the source code. My solution was to add a new member to store the inode number in the handle_t, and also in journal_head structure. So, when the do_get_write_access() call is made, I can filter the operation like this: So, I had to modify handle_t to transport the inode number to journal_head, and at commit time I can get the required information that I want. 
c-14-80	X	Raising SIGINT, but getting stuck in thread in c I'm doing a program that utilizes threads. I also have a SIGINT handler that closes everything correctly, for an orderly shutdown. However, since my threads are in a while(1) loop the pthread_join function in my handler gets stuck and i have to press ctrl+c a bunch of times, to close each thread singularly. How can i do this with just 1 click? Here's my thread worker function: It's depend how you are sending signal (SIGINT or any) to a thread. for sending a signal to thread you should use pthread_kill() instead of kill() or raise() because signal handler(signal or sigaction) handles only processes ,not threads. If you ever try to kill running thread using kill command/function OS will throw warning like Warning: Program '/bin/bash' crashed. observe running thread using ps -eL | grep pts/0 before and after sending signal. I hope you got something. Two things you need to solve: How to break the endless while loop How to return from blocking system call (like for example sem_wait()) Referring 1.: Change to be Define exit_flag globally and set it to 1 on reception of the SIGINT signal. To catch a signal do not setup a signal handler, but create a separate thread using sigwait() to wait for and receive a SIGINT. Make sure all other threads are created blocking SIGINT. Referring 2.: Keep track of all thread running by memorising their thread-ids. After the signal-listener thread mentioned under 1. set the exit_flag, then loop over the list of running threads and one by one enable them to receive SIGINT signal them using pthread_kill(), in case they were stuck inside a system call, the call would return setting errno to EINTR. join the thread calling pthread_join(). 
c-14-81	X	The last value of an array of array of ints overrides all other values I'm trying to store 4 arrays in an array, and for some reason, the last value keeps overriding the previous three values. For example, if 123; 456; 789; 987 were inputted into the code below, ipadr[0] - ipadr[4] would all only store 123. I've tested to make sure that numConvert() is working, and within numConvert, 4 different arrays of ints are returned, but only numConvert(d) is the ipadr array (stored 4 times). Also, is my syntax / code correct in order for this function to return ipadr as an array of arrays (int**)? Why do you need to make it static int* when initializing the array? I'm new to C and this has been really frustrating me. Any help would be incredibly appreciated. Thank you in advance!! numConvert code: The hold array is indeed overwritten after each call to numConvert, because it is a static area of 8 int. Better use dynamic allocation with malloc, and have that function allocate 8 ints. then the returned values will have to be freed, after you don't need them anymore. As for static, this answer explains it in details. Every time you write something in hold then return it, you basically overwrite the previous value. There is single instance of hold not multiple as you may be thinking. static keyword you have used without knowing the full functionality. It is not the same as automatic storage duration. Free the dynamically allocated memory when you are done working with it. What have we done here? Dynamically allocated memory has lifetime beyond the scope of the function. So just like the static one it stays alive. But with contrary to the static variable each time a new chunk of memory is allocated. And for that we are not overwriting anything, which was the primary problem in your case. One thing more.. hold is of automatic storage duration meaning every time we exit the function the hold is deallocated and then again when we call it we get to have a local variable named hold. So in each we get different instance. And that's why we return the address contained in hold. This memory whose address hold contains has lifetime beyond the scope of the function. So it stays unlike the local variable hold and we store this address in other function. Declare your hold variable as instance variable rather then static variable like 
c-14-82	X	passing array of strucct pointers to function in c I am trying to pass a array of pointers to structs to a function. then assign the address of that array to a pointer and use that pointer to index the elements in the array. below I created three instances of a struct and assign the struct values then I create a array of pointers and have the elements in the array point to these structs. I then pass the array of structs to a functions that prints its the value of the structs in two different ways... The first way is I index the array that I pass to the function and print out the values in the individual structs.... this works fine! The second way is I assign the array to a pointer and I index this pointer to print out the values in the array... this doesn't work correctly I expected the output of the pointer indexing method to give the same results, but that didn't happened. I got a mangled incorrect version of my data. print data indexed by function arg print_name_struct : name one : name two print_name_struct : name three : name four print_name_struct : name five : name six print data indexed by local pointer print_name_struct : dP@ : vP@ print_name_struct : Ã¯P@ : name five print_name_struct : name six : name three I suspect there is something going on when assign the array to the pointer. it was my understanding that if I assign the array to a pointer I could use pointer arithmetic to index the data in the array. What am I not understanding? WAY 1: The *local_name_struct_pointer_array should be declared as a double pointer **local_name_struct_pointer_array, because you are assigning incompatible pointer size. Then, you should also change how you access the members of the struct from pointer[i].member to pointer[i]->member. WAY 2: Other way should be by keeping how you wrote the code, and only change the pointer assignment as this: *local_name_struct_pointer_array = name_struct_pointer_array[0], so you are getting the first element of the pointer array, and then you loop over the elements. one of the example to why one should not neglect the warning, especially involving the pointers. The code gives 'incompatible pointer type' warning. Solution is declare as double pointer Changes required and 
c-14-83	X	Output of a C code How to fetch the output of the following question? My evaluation resulted in 9 as the output, but it is incorrect. Please walk me through the procedure. The actual output of the code is 81. Thank you. Try with Printf statement in the code - you will understand the code flow better Try with small value like 4 or 5 The piece of code is resulting 81 itself If u want to understand the flow and control of the code I suggest u can use the software called Jeliot3 It shows the control of program in a animated way. But the software works for java code so I am converting the same code to java. Install the software and run this piece of code it will give complete answer to ur question. 
c-14-84	X	C - sorted linked list with words and frequencies I'm having some issues finalizing my code for my programming course (I'm an absolute beginner in C). The aim is to read words from standard input (runfile < input.c), count their frequencies, and sort the list alphabetically (capitalized words first), example output: Image Sample output I found pieces of codes here on Stack, which I adapted, and so far it produces the output with words and their frequencies. However, I can't figure out how to get the list sorted as in the sample above. Our teacher suggests, that if a new word is found, it should be inserted sorted straight away into the linked list, he gave us following code sample (it is an excerpt from this program): As far as I understand it, 'link *n' should be the pointer to the next node, 'data' is holding integers in that case, and 'cons' should be a function within this code to construct a new node or link, not sure about 'int x', my guess it's the current integer for comparison. As I said, I'm having trouble adapting this last bit into my code. I tried to adapt my addWord() function, but it doesn't work out for me. Below you find the working code I have so far: Any help is appreciated. Okay, try these two functions: A couple of other points: You've got a 31 character buffer, but you're telling your readWord function that it is 10K characters? Also, don't cast the return value from malloc(). 
c-14-85	X	Convert CPU cycles into seconds in C programming I was trying to figure out if there is any easy method to convert the CPU cycles obtained in C using rdtsc() function into time in seconds. ex:- is there any possible way to convert this into time in seconds? 
c-14-86	X	how to print a 2d battleship game I'm trying to make a printed battleship map for player one. this is the code that I made. when I run it, I expect to get the symbols of a ship in the coordinates inputted. but instead, I get this. it's really annoying and has been bugging me for hours on end. Can anyone please help me? I'd really appreciate it. Looking at the code it seems you should consider type to be char and not int in the struct Then there are a few pointer confusions. In placeShips and after the switch later in the for FYI, doing makes p points to z address, so in scanf use directly p and not &p. With these fixed the board should look better. 
c-14-87	X	How to pass a 2 dimensional array with the variable number of columns into a function? I'm new to C and I want to do this: Compiler reports this error: How do I pass the 2 dimensional array with the fixed number of rows but with the variable number of columns into the function? You can do it as: void init1(int variable_nr_of_columns, int *array); or void init2(int variable_nr_of_columns, int array[][variable_nr_of_columns]); This is a simple program to demonstrate the usage: OUTPUT: 
c-14-88	X	When seperating function to two C files output is different I have two functions one is the Algorithm and one is the main function that prints all words from a char matrix sent to the algorithm. I get what is expected when both functions are in one C file and my char matrix is populated in the correct manner. My problem is created when I separate the main function and the algorithm to two different C files. The matrix sent to the algorithm in the other C file is filled with a lot of garbage (only around 5 lines in the matrix out of around 35 is correct and not garbage). Why can this happen? I guess it might be how the matrix Pointer is sent. Here is my code (disregard O(n) problems): algorithm file: main file: By the way, this is my first course working with C, therefore, I am a newbie on this subject. Output: Good output: CAT, CATS, CAR, CART, ATE, ART, RAT, RATS, RAT, RATS, RAMP, RAKE, RAKE, TRAM, TRAMS, TAME, TAKE, TAKEN, TAKE, ART, ATE, STEEL, STAMP, SELL, SELL, MAKE, MAKE, ME, MEN, Bad output: CAT, ART, RAMP, TAME, ATE, MAKE, 
c-14-89	X	first character of a pointer to an array? I have an array of pointers to characters: Eventually, myStrings[0] will equal "example" or something of the sort. I'd like to check the first character, and see if it's equal to e. Thanks for the help! Each element of this array is a string, then consider that we have: so Now, we have to access the first element of *myStrings[0] by this way *(myStrings)[0] or *myStrings[0] or A pointer is a variable that holds the address to something else as its value. To access the value at the address held by the pointer (e.g. the something else), you dereference the pointer with the unary '*'. Since you have an array of pointers, you will need to dereference the first element of the array, e.g. mystrings[0]. With C - operator precedence, the [..] has greater precedence than '*', so you can simply look at the first character of the string pointed to by mystrings[0] by dereferencing the pointer, e.g. *mystrings[0] A short example will help: Since you are looking at the first element of your array of pointers, you can also print the string "example" by dereferecing the array, e.g. Example Use/Output (the output is the same regardless whether you access the first element with arrptrs[0] or *arrptrs, they are equivalent -- do you understand why?) note: always pay attention to C-Operator Precedence. Let me know if you have further questions. 
c-14-90	X	Function call overhead - why do builtin Python builtins appear to be faster than my builtins? I've been interested in overheads, so I wrote a minimal C extension exporting two functions nop and starnop that do more or less nothing. They just pass through their input (the two relevant functions are right at the top the rest is just tedious boiler plate code): amanmodule.c: setup.py: Next, I time them against pure Python implementations and a couple of builtins that also do next to nothing: First Question I'm not doing something retarded methodology-wise? Results for 10 blocks of 1,000,000 calls each: Now my actual question: even though my nops are written in C and do nothing (starnop doesn't even parse its arguments) the builtin hash function is consistently faster. I know that ints are their own hash values in Python, so hash also is a nop here but it isn't nopper than my nops, so why the speed difference? Update: Completely forgot: I'm on a pretty standard x86_64 machine, linux gcc4.8.5. The extension I install using python3 setup.py install --user. Much (most?) of the overhead in Python function calls is the creation of the args tuple. The argument parsing also adds some overhead. Functions defines using the the METH_VARARGS calling convention require the creation of a tuple to store all the arguments. If you just need a single argument, you can use the METH_O calling convention. With METH_O, no tuple is created. The single argument is passed directly. I've added a nop1 to your example which uses METH_O. It's possible define functions that do not require an argument using METH_NOARGS. See nop2 for the least possible overhead. When using METH_VARARGS, it is possible to decrease the overhead slightly by directly parsing the args tuple instead of calling PyArg_UnpackTuple or the related PyArg_ functions. It is slightly faster. See nop3. The builtin hash() function used the METH_O calling convention. Modified amanmodule.c Modified test.py Results 
c-14-91	X	C Programming, why can't I use strcpy() with indexes? Here is an example: Won't return anything, even though it should return >0, 0, or <0. If I remove the indexes though like: It'll work fine. Can someone tell me what I'm doing wrong here? The function strcmp expects pointers as the arguments. See the prototype: int strcmp(const char * s1, const char * s2); string1[2] and string2[5] are just characters 'l' and 'o'. &string1[2] is a pointer to string1[2] character &string2[5] is a pointer to string2[5] character Note: The strcmp() and strncmp() functions return an integer less than, equal to, or greater than zero if s1 (or the first n bytes thereof) is found, respectively, to be less than, to match, or be greater than s2. However, the exact return value depends on the implementation. For this implementation: the: printed value is -3. strcmp takes a pair of character pointers, while string1[x] is not a pointer, but a character: or Note that although string1 and string2 are arrays, C compiler converts them to character pointers without additional operators. str[ndx] evaluates to a char but the function expects a char *,[] produces an l-value so you can take its address &str[ndx] and get what you are after. 
c-14-92	X	Advanced forkbomb immune to kill signal In assignment given in one of my CS courses, we are tasked with creating a fork bomb that is very difficult to stop. It needs to be immune control-c, control-z, and control-d closing the terminal. It also must be immune to sigkill and signal 9, we have gone over signal handling shortly with sigsegv but that was all. I read that sigaction cannot catch sigkill or sigstop signals. I also read that daemonizing the process will allow it to run in the background so closing the terminal will not stop it. How can i make the fork bomb process immune to a sigkill signal? This is the fork bomb we made before. Also i am using a virtual box to safely test this. Not possible to avoid/immune sigkill signal. Read the man page of signal() it says The signals SIGKILL and SIGSTOP cannot be caught or ignored and it's not a good idea because you can't create processes as much as you want,there is some limit, check ulimit. At once stage when there is no resource it fails(sh will display the error message). 
c-14-93	X	scanf will not take &(*(p+i).grade) I don't know why scanf doesn't take &(*(p+i).grade)? I know *(p+i) â‰¡ p[i], but I don't know why it just doesn't work here. I did similar thing with *(p+i) in another code I written: *p.age = 10; and it successfully writes the value into member age. You did the conversion from a[b] to *(a+b) correctly, but you missed the precedence of the dot . operator vs. the dereference * operator. You need to force the way the operators are evaluated, like this: or use -> operator, like this: Note how the use of -> operator lets you reduce the number of parentheses. first allocate the memory for count student then scan the data. Here is the my solution : 
c-14-94	X	Homework, stuck on pointers and function call Currently it will build and run. but my issue is it won't print out the first print statement in my main function when im trying to call the pointer function. my end goal is to get it to print like a table of values for f() from 1-36. the use of the & and * in those couple lines of code is part of the homework assignment. update: i edited the pointer function it now is printing but not the right numbers Pay attention to the the compiler warnings: The e is pointer to the expected double array inside pointer function: Also your intentions my be to iterate over all elements of e: After a such calculations: 
c-14-95	X	GNU Make Pattern Rules on Windows I've been having some trouble lately while using a makefile that I've been using on Linux without trouble for quite a while now. It's logic consists in generating strings with all the objects, source files and headers used for the compilation process; but I've only written specific rules to objetcs that need some kind of special treatment, and for the rest I've used the following pattern rule: On Linux it's working, but when I try to use on Windows, with some changes of course, it doesn't and i get the following error: make: *** No rule to make target 'obj\battle.o', needed by 'programa'. Stop I've been trying to figure it out alone but it has been hard. Linux' makefile: Windows' makefile: PS: The variable AA on windows' makefile, it's a temporary fix, since without it normally it "eats" a char from the first variable, e.g let's say CC = gcc it's the first one, the command on cmd goes "cc -g [...]" if you know why that happens I'd like to know too. Thanks in advance. You have a spurious ; after the pattern rule make on windows won't work properly if you use backslashes internally, it's far easier to use forward slashes and replace then only when needed for windows tools that don't work without them, such as del. You don't need to use windows shell for a lot of the file processing, make has internal features for this. Compiling flags have no effect when linking (-Wall etc.), and linking flags have no effect when compiling (-lm) You've forced the final executable to depend on all of the headers, when object files should depend on exactly the headers they need. Use gcc's dependency generation feature -MMD etc, and make's -include feature instead. CC expands to cc by default, which should be a link or a copy of your default compiler, in your case just copy gcc to cc in the bin directory make has built-in rules and recipes for a lot of common operations, recycle them Your makefile can be condensed as follows: 
c-14-96	X	SDL_image is not working I am attempting to load a png file with SDL. I have followed all instructions. The SDL2_image.dll and the SDL2.dll are located in the same folder as the executable. As is the other dlls; libjpeg-9.dll, libpng16-16.dll, libtiff-5.dll, libwebp-7.dll, and zlib1.dll. These are all located in the some folder that contains the executable. In the file where I call the sdl command I include the header file #include And in my addiditional dependencies I include the SDL2.lib, SDL2main.lib and SDL2_image.lib However I get a popup box that reads "The procedure entry point SDL_LoadFile_RW could not be located in the dynamic link library C:\Users[name]\source\repos[name][name]\Release\SDL2_image.dll" What is it that I might be doing wrong I was using an older version of SDL and SDL_image. I have since started using SDL_2.0.7 and SDL_image-2.0.2. The program compiles and renders successfully now 
c-14-97	X	Memory mapped files used as logging program data in c I'm trying to log the activity of my program using memory mapped files. The file is created fine, and i can't write to it as well, however i've encountered two problems: When i re run the program, the file either resets or is written on top of The string i print on it is not written in it's entirity. here's where i create the file: and here's an instance of where i write to it: With only this 2 sprintfs the log file results in: 
c-14-98	X	Variable int key inexplicably changing after being used as one input in XOR operation multiple times I'm trying to encrypt file_1.txt with an inputted key and output the result to file_2.txt. The professor specified that the file had to be read in 100 bytes at a time. file_1.txt is the string "test file for testing\n" repeated 100 times. The output of the prints were as expected for the first few hundred prints, but then the key changed: I don't know how key is changing. In case it is relevant, printf("%d", sizeof(int)); outputted 4. Earlier I submitted a question (stackoverflow.com/q/47732691/905902) regarding junk getting into the buffer array because it was not initialized before using fread(). The problem this time is that key is changing unexpectedly. In the statement: output_counter can be greater than sizeof(int) if the loop it is in runs more than four times, i.e. there are more than 400 bytes (I think) in the file. When this happens the xor'ing operation overwrites the stack, which writes to the storage for key. Higher level, you really want to learn to use a tool like valgrind or clang's address sanitizer as they will find issues like this very quickly. 
c-14-99	X	How to have additional parameters while running a C program I know you can do additional parameters in Python using required.add_argument and parser.add_argument and those stuff, but is there a way to do these in C program? For example: In the terminal, can it show up the result after all those things were read by the program? 
c-14-100	X	Could somebody help me with my Code (C language)? I am a beginner in C language and I have been asked to: write a whole program printing in separate lines odd numbers from 100 to 0, and marking with "!!!" those numbers that are multiplications of 7. I tried to do that but unfortunately iam printing numbers which are duplications for example (91 and 91!!!). How can I avoid this situation? Here is my code maybe someone can help me with this task? This is a solution based on Aditi Rawat comment. OUTPUT: 
c-15-1	X	Exception thrown: read access violation. this was 0xBF13D000 I have a rather baffling issue, a program that used to always work now only works once per reboot, when running it again I'm granted with: I've extended a C++ project with C exports so I can use it from C#: C exports: C# declarations: C# usage: What is really puzzling is that when I debug it, the seemingly disposed/destroyed pointer is already visible in the C# part: SetSample._audioData. Initially, when new_audio_data is called from C# I get a valid pointer like 0x032fe940 but for some reason it becomes 0xBF13D000. Note that it always become the value 0xBF13D000 so I've searched about such value online in a hope to spot a known memory pattern but without success. As I said, there hasn't been any changes to the program, so I'm at a total loss as on what could be causing this. Try add volatile for _audioData https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/volatile It turned out that some of the native libraries needed to be all rebuilt using the same compiler version, now it works flawlessly ! 
c-15-2	X	Strange printk effect on linux stack size testing I found this weird behaviour. I wrote following code to crash the kernel but strange thing is that it crashes only if printk is uncommented, otherwise runs fine with no errors/warnings!!. make -C /lib/modules/4.4.0-53-generic/build M=/home/naveenvc/work/ker/crash_stack modules make[1]: Entering directory '/usr/src/linux-headers-4.4.0-53-generic' CC [M] /home/naveenvc/work/ker/crash_stack/crash_stack.o Building modules, stage 2. MODPOST 1 modules CC /home/naveenvc/work/ker/crash_stack/crash_stack.mod.o LD [M] /home/naveenvc/work/ker/crash_stack/crash_stack.ko make[1]: Leaving directory '/usr/src/linux-headers-4.4.0-53-generic' make -C /lib/modules/4.4.0-53-generic/build M=/home/naveenvc/work/ker/crash_stack modules make[1]: Entering directory '/usr/src/linux-headers-4.4.0-53-generic' CC [M] /home/naveenvc/work/ker/crash_stack/crash_stack.o > /home/naveenvc/work/ker/crash_stack/crash_stack.c: In function "˜crash_stack_init': /home/naveenvc/work/ker/crash_stack/crash_stack.c:14:1: warning: the frame size of 8200 bytes is larger than 1024 bytes [-Wframe-larger-than=] } ^ Building modules, stage 2. MODPOST 1 modules CC /home/naveenvc/work/ker/crash_stack/crash_stack.mod.o LD [M] /home/naveenvc/work/ker/crash_stack/crash_stack.ko make[1]: Leaving directory '/usr/src/linux-headers-4.4.0-53-generic' What could be causing this? The stack size is well documented and the above is not the right way to test, in particular in older kernels which used hugepages to back the stack the aforementioned code would jump over to the next stack. The func __crash_stack_init with prink commented out is a leaf function - it does not call anything, so the compiler knows exactly what happens with local vars. In particular in this code it sees the full array is not needed and thus its not being allocated. However, the call to printk passes arr in. The compiler does not know what the func is going to do with it, thus it has to reserve 1024 * sizeof(long) on the stack which results in the warning. Stacks got bumped to 16KB years ago, you can start reading here https://lwn.net/Articles/600644/ 
c-15-3	X	print multiple strings separated by tokens into binary file using fwrite I have to save multiple strings that are stored in different variables separated by token to binary file and then read it. I did it with fprintf and everything works (but since it's ASCII it's not what i need) i have to do it with fwrite and i don't know how. token separating the words is | i tried to use struct but it's either wrong or i messed up here's how i wrote the fread and use the saved values As you mentioned, you wanted to store it in a binary file, below code is one example. This may not be exact answer for you, but i'm sure will help as reference 
c-15-4	X	How can I print an array like a grid? Hello I'm new at programming and I need to print an array (must be 1 dimensionnal) like a grid. I tried for hours now and still don't have the results I want. The array has 16 values so the grid would be something like this : My code : Displays this : I have a feeling that this would work: I changed cell[j] to cell[4 * i + j] Does this help? You can use the remainder operator % to determine when to print on a new line. Here is an example program with a display_grid() function that takes as arguments an array of int, the size of the array, and the desired size of each row. If the array can be evenly divided into rows of the desired number of columns, zero is returned. Otherwise a non-zero value is returned. This allows you to display a 1d array in various grid formats; nothing is printed if the array can't be evenly divided. Currently this prints grids containing numbers with at most 2 digits (or 1 digit and a sign). It would be simple to modify it to print more digits, or a little more involved to modify so that the display width fits the maximum width needed for the input. Program output: 
c-15-5	X	Header file error: expected identifier or '(' before numeric constant I'm new to header files and am not sure why I am getting this error. The first piece of code is from the relevant header file, and gives the expected identifier error: Related to this, there is another error in the file relevant to that header, which gives me a "note: in expansion of macro 'MAX_ADDR_LENGTH', which it gives me on the line which gives the declaration of int MAX_ADDR_LENGTH: I've tried a number of things hoping it was just a small oversight (removed the #define altogther, deleted the line that gives the int MAX_ADDR_LENGTH declaration, just deleted the phrase 'int' from the same; all of which just caused even more errors). The problem: "˜MAX_ADDR_LENGTH' is defined twice in your code; Once as a Macro and once as a variable. Try to delete the statement declaring MAX_ADDR_LENGTH as a variable. Build your header like this: and use it like this: The #ifndef...#endif construct is called an include guard. It's not necessary to get your code compiled, but good practice to use it. The typedef is used to define the node structure. It does not create a variable yet, it's just defining a type named listNode that you can use to build your list later on. 
c-15-6	X	Initialising more than two mpz_t using mpz_set_str causes segfault Anyone know why the following results in a seg fault after the second call to mpz_set_str()? How can I initialise more than two gmp ints from str? compiled with: gcc -lm -lgmp -o segf segf.c The documentation for mpz_set_str says: 5.2 Assignment Functions These functions assign new values to already initialized integers (see Initializing Integers). ... The link goes to 5.1 Initialization Functions The functions for integer arithmetic assume that all integer objects are initialized. You do that by calling the function mpz_init. For example, As you can see, you can store new values any number of times, once an object is initialized. Your code doesn't initialize the variables, so assignment functions such as mpz_set_str produce garbage. 
c-15-7	X	insmod: ERROR: Could not insert module : No such device I'm trying to implement character device driver in C at Linux. My code is as follows: then, I compile this with following command and to this moment everything looks just fine: but when I tried to run this module with I get an error : Could you explain me please what I'm doing wrong and what should I do to run this module properly? Thanks a lot. You forget to create the class( class_create) before device_create() because if you see your device also should be in one class that's why create one class using class_create(); Add below line in your code. root mode is required for inserting a module, Sequence for compiling, inserting and running a module are : First do make then do insmod & analyse dmesg output or you can check modinfo also I hope it helps. Seems ok. But, when try to use my Makefile on root it doesn't work. Here is my make output: 
c-15-8	X	memory allocation/deallocation for embedded devices Currently we use malloc/free Linux commands for memory allocation/de-allocation in our C based embedded application. I heard that this would cause memory fragmentation as the heap size increases/decreases because of memory allocation/de-allocation which would result in performance degradation. Other programming languages with efficient Garbage Collection solves this issue by freeing the memory when not in use. Are there any alternate approaches which would solve this issue in C based embedded programs ? You may take a look at a solution called memory pool allocation. See: Memory pools implementation in C Yes, there's an easy solution: don't use dynamic memory allocation outside of initialization. It is common (in my experience) in embedded systems to only allow calls to malloc when a program starts (this is usually done by convention, there's nothing in C to enforce this. Although you can create your own wrapper for malloc to do this). This requires more work to analyze what memory your program could possibly use since you have to allocate it all at once. The benefit you get, however, is a complete understanding of what memory your program uses. In some cases this is fairly straightforward, in particular if your system has enough memory to allocate everything it could possibly need all at once. In severely memory-limited systems, however, you're left with the managing the memory yourself. I've seen this done by writing "custom allocators" which you allocate and free memory from. I'll provide an example. Let's say you're implementing some mathematical program that needs lots of big matrices (not terribly huge, but for example 1000x1000 floats). Your system may not have the memory to allocate many of these matrices, but if you can allocate at least one of them, you could create a pool of memory used for matrix objects, and every time you need a matrix you grab memory from that pool, and when you're done with it you return it to the pool. This is easy if you can return them in the same order you got them in, meaning the memory pool works just like a stack. If this isn't the case, perhaps you could just clear the entire pool at the end of each "iteration" (assuming this math system is periodic). With more detail about what exactly you're trying to implement I could provide more relevant/specific examples. Edit: See sg7's answer as well: that user provides a link to well-established frameworks which implement what I describe here. 
c-15-9	X	Android Studio Native CMake No implementation found for native I've updated to Android Studio 3.0 and I'm trying to migrate from deprecated NDK to CMake for building the native components of my Android app. I've followed the guide at https://developer.android.com/studio/projects/configure-cmake.html and here is my CMakeLists.txt file: (the last line isn't in the tutorial but I was getting errors before adding it). Here is my folder structure: Here is my native method: Here is my header file (generated by javah): And I have corresponding C++ files that compile correctly. My APK contains the libmyapp.so file, everything looks as expected. My app builds, it starts running, it loads the library: (logcat) Then, the moment I try to call the native method, I get this: Followed by this: And my app crashes. I've seen many questions about this including Android NDK C++ JNI (no implementation found for native...) but those solutions don't help either. In the log, I see: Which seems to be alright. I've also read somewhere that Proguard might be mangling the method names, so I've also added a rule for that too: -keep class com.myapp.system.Native I don't know if it changes anything though. Here is also the related part of my gradle file: I've also tried implementing a JNI_OnLoad method and declaring it in the header but it doesn't seem to be found either, which might be a clue for something general with my configuration, rather than a specific method: Why is Android unable to find my native method? Apparently that error that wasn't in the tutorial (which went by adding SET_TARGET_PROPERTIES) was the key. I've found out the problem. In my CMakeLists.txt I was referencing the folder src/main/cpp/src. It wasn't really compiling any files. I've checked with nm (ARM version) and I've seen no actual method inside the .so file. Then, I've added some garbage into my CPP file (which shouldn't compile) but the build completed successfully. My initial assumption about CPP file being compiled was incorrect: the toolchain wasn't even trying to compile my file. It seems that I need to list files to compile explicitly: I have no idea how to include a folder. I've tried src/main/cpp/src, src/main/cpp/src/*, src/main/cpp/src/*.cpp but none of them seem to work. After changing the file, my app started to run (and load the native component) correctly. hey use target_include_directories instead include_directories. Using this function you will add directories privately to that library. And if still you are get error about source file Add {CMAKE_CURRENT_SOURCE_DIR} in source path line. It works ! 
c-15-10	X	How to make a print integer function (without printf) output INT_MAX I am writing a print integer function without the use of printf. The function should be able to accept the integer needed to be printed, the base of the output, and a character to insert before the value of the integer. I have been able to make the majority of the code; however, once an input goes over 1.5 billion the output stays the same at approximately 1 billion. On the platform I work with INT_MAX is 2.17 billion so I know that this is definitely within the bounds of an int. Additionally, I'd like to know how to make this function without a static array: baseDigs in my case. The problem is in the result of your Pow function: the return type is int (probably 32 bit), and an overflow is occuring. I'm going to use int32_t (defined in stdint.h) throughout this, assuming your system has 32 bit integers (most desktop computers do, but if this is for an embedded system that might not be the case), to make it clear where the problem is. You're using Pow to get the next power of 10 after n, however for values close to INT32_MAX (in particular any value after 1,000,000,000, which is the first power of ten less than INT32_MAX) the next power of 10 isn't representable as an int32_t (because 10,000,000,000 > INT32_MAX) leading to an overflow (I believe the result is undefined, but in practice the value returned by Pow will most likely be -(INT32_max-10,000,000,000)). So, you can fix this by increasing the number of bits used in the result of Pow, by having it return int64_t (or long long int, if you don't want to use stdint.h) Also don't forget to make buffer signed as I mentioned in my comment above. Your compiler should have caught that and emitted a warning, if not then you're probably not compiling with all warnings enabled. In some (most?) compilers this is enabled by passing the flag -Wall to it. Edit: See chux's comment regarding why making buffer signed is not the right solution (using unsigned is fully-defined and works). Consider using int64_t throughout to avoid overflow and type conversion anyway. 
c-15-11	X	I need help finding a string hashing function I'm developing some experimental program that requires hashing strings I tried all the source code I could find on the internet but none of it seemed to work without any dependencies, can you please link the source to a cryptographic hashing function that has NO DEPENDENCIES, something that I can just copy/paste into my code and it would work? thank you p.s. I prefer a secure hashing function but MD5 would be fine for now You may want to check Simple MD5 implementation with no dependences. Also check these proposals: hash function for string. It is worth to mention that there are other open source implementations like: Basic implementations of standard cryptography algorithms, like AES and SHA-1 and sphlib an open source library which provides optimized and portable implementations of many hash functions. 
c-15-12	X	C code core dumped This code should get 10 names from user and find each name's length and minus the shortest name from longest and the code has compiled correctly but when i run it, it says core dumped why?? first thing, why s[i][i*10] while scanning a string, you are not scanning char by char, you are scanning string by string, so replace this with Second thing, s[i][j]!="\0" remember that s[i][j] is character not string & you are comparing with "\0" which is string, instead use '\0' it should be Edit : I hope you are clear now. 
c-15-13	X	Seg faulting from loading data from a CSV file I am trying to write a program that takes historical s and p 500 stock data (1999-2013) from a csv file and print the contents to the screen. The csv files have the format of [yyyymmdd,0,openprice,closeprice,low,high,volume] for each line that I am taking in. For instance stock a with data [19991123,0,42.2029,45.5656,39.0001,50.2143, 6753909] means that on November 23 1999 stock a had an opening price of 42.2029, closing price of 45.5656 and so on. My program takes in the information in my while loop and it is able to do it up to a point where the data is shown as zero and the price is shown as 2. Mag is the char array that everything is being based off of. ypg and chr take the csv data line by line. ypg and chr then subsequently modify each line until all you have left are the opening price and date respectively. Here is a link to a webpage that will give you a zip file containing the CSV's of all the stocks I am using. Just click Free Data and then click Download. Hopefully I am just doing something stupid thats really solvable. Any help is greatly appreciated. I expect to get results similar to this and repeating until I reach the end of my file. When I straight up run the program. My end result ends up being this. The exception being that the first four lines below stretch to the limits of my linux terminal. Here is a screenshot reference. This is what happens when I do a debugging session with breakpoints set at LOAD and line 83 (Notice how the numbers start off fine but then get screwed up): Here is another screenshot for sake of reference. The problem is in your LOAD() where you take one variable for giving size for second veritable if you want runtime memory allocation use malloc() is wrong. Correct method is as below: Your mystrlen function doesn't work because pointer to pointer of string is dereferenced instead pointer to string. before dereferencing characters you must dereference pointer to string, new version of your function is 
c-15-14	X	C/C++ Linux if file is open for writing by another process (or different strategy) I have incoming files via a regular ftp server and my program processes them before moving them to a different directory and adding to a database. I use inotify to look for "write close" events, find the files in the relevant directory and process them. This part works great. However, The directories may have files that aren't noticed by inotify, for example if they're there already when the program starts. I made the inotify calls time out at regular intervals to double check the directories, but this introduced the problem of not knowing whether a file is being written to or is closed. I know this is a difficult problem to solve. I've tried various locks using fcntl, but I can't get it to work. Are there any libraries or system calls that can help with this task? I can see at least one workaround - a shell script could take the incoming files and put them somewhere they aren't being written to, but I'd prefer that the functionality is contained in the binary. 
c-15-15	X	Push address of stack location instead of the value at the address I'm working on a small compiler project, and I can't seem to figure out how to push the address of a stack location instead of the value at that stack location. My goal is to push a stack location address, that holds an integer value, as a void pointer to a C function that prints it. My ultimate goal is to do some pointer-integer arithmetic in the function. I am successful in calling the C function from a runtime library extension, but the issue is just figuring out how to push the address in assembly. My C function. My Assembly As for what I have now, it'll crash since I'm casting the value 42 to an address. Can someone please direct me to some reference or resources to learn more? In general you can get the address of a stack based value by using the LEA instruction to get the effective address of -4(%ebp) and place it in a register. You can then push that register to the stack. The LEA instruction is described in the instruction set reference this way: Computes the effective address of the second operand (the source operand) and stores it in the first operand (destination operand). The source operand is a memory address (offset part) specified with one of the processors addressing modes; the destination operand is a general-purpose register. In your code something like this would have worked: This should effectively pass the address of -4(%ebp) on the stack for use by your function print. 
c-15-16	X	C fread() on short file is producing junk after the file ends My professor specified that file_1.txt be read 100 bytes at a time into a char array. I produced the following snippet code : file_1.txt reads : "test file for the project\n". I used gcc encrypt.c Then : Then : ./a.out 111 file_2.txt file_3.txt test file for the project : vâ–’â–’â–’sâ–’â–’ @////////â–’ During the first run of the program with file_1.txt and file_2.txt, the print statement in the nested while loop printed: Where did these random elements come from? Initializing all elements of the buffer char array to 0 before using fread() got rid of the junk. 
c-15-17	X	lwIP echo server error sending data I am working with the ethernet communication under echo server lwIP. I would like to capture samples from DMA to the HOST by ethernet. The system captures samples via UART. I am not able to make lwIP to send more than 2 packages higher than 1500 bytes without waiting for ACK. My application sends packet continuously to the client. Client receives the packet without any delay but it sends the ACK after 200ms (see attached wireshark capture image). LWIP get stuck always waiting for ACK packet before it sends the next packet. My lwIP could only send no more than 2 TCP segment and then wait for ACK. The network delay will cause performance to get down. Is there any configuration which makes the LWIP to send packet without waiting for the ACK packet? Do you have any suggestion? If you don't want to wait how about using UDP instead of TCP? TCP is a stream protocol and is going to ensure that everything arrives and is in-order (so long as there aren't errors). echo usually makes me think of a situation where you don't care about ordering, only whether a particular packet makes it or not and how long it took. 
c-15-18	X	Hi , I wanna know how to write a c code that starts a calender on Saturday instead of sunday It should look like this , and when I searched for codes they all starts on Sunday. ! What do I change on Sunday calender code ??! 
c-15-19	X	Username and Password in C so basically I want to create a program that asks for an username and a password in order to enter the actual program. I tried doing something like that but when I type the first username and password it doesn't let me go through. On the other hand when I type the second username and password it does work. Can someone explain me why? Compile with warnings enabled and you'd see that the variable i is used uninitialized here: What you have now is undefined behaviour, i.e. anything can happen. More likely you'd just get a random crash. You meant strcpy(listName[0], "Vince");, strcpy(listName[1], "Jeremy"); However, what you'd really want to do is to define these variables *out of main, and initialize them there. Also, allow for varying length passwords and usernames by using an array of pointers to char. For example: Or even better, use a structure for user data: In names() and pass() you use i uninitialized, both strcpy operations are going to copy to the same array index. Following code is not what you intended: You should initialize i and increment it between the statements, or simply use: 
c-15-20	X	Program returns all permutations of n elements?infinite loop? This code should output all permutations of n elements, So when i enter for example 3 Output it must : ABC BAC CAB ACB BCA CBA with this code : I should type what I want for a number eg 3 for ABC or 4 for ABCD and then the code should handle that but it didnt workea and it goes in an infinite loop but for this Code : I can enter whatever i want and it handle with it without Problem my question is what is the problem with the first code? i mean i want to enter a number so that the program: if i type 3 for example it should deal with ABC Your main should be like: In the working code (the second block of code you posted), the user enters a string which is stored in str variable: Then the string length is passed to permute function using strlen: In the first (non working) block of code, you ask the user to enter a length, not a string, and store it in x. You then put x characters in str array, but this is not a proper c string, because a null terminator is missing. So strlen return value is pretty much unreliable. If you don't like the solution I suggested, you can just provide a right after your while block and leave everything else untouched, and it will work anyway. The problem is that strlen is invoked on a string which is not terminated. Either add '\0' at the end of the string to terminal it: OR (better) invoke permute with the original value of x (save it after the scanf). The issue is that the str string is not properly terminated therefore result of n = strlen(str); is undefined. strlen counts characters till \0 is encountered. 
c-15-21	X	Converting data back to its original items I have some code and I don't understand how to get the individual items back: I would like to input the result of this conversion I want this to convert a IP address back to its parts to display. But when I enter 192 168 1 200 I get 0xC801A8C0 and I don't get it converted back. Does anyone know how I can items in a union struct? I try to use LwIP but have problems with union structs. I try to access local_ip and remote_ip. This is actually doing the opposite of the code above. You can mask out the values inside foo and shift them back so they are alignt in fist 8 bit ( by 24,16,8 - last one is already ok it's like you have one int input and you want to divide into bytes by bytes & store each bytes in seperate integers 
c-15-22	X	Can a local variable exist before a combined declaration/assignment? I'm currently trying to debug a small C program whose general structure looks like this: I've set a breakpoint at some_function() (using lldb). However, if I inspect the stack frame at this breakpoint it shows the variable buf_len already existing with the local scope and even having an arbitrary(?) value. How is this possible if the variable is not declared anywhere before this function? A stack frame contains the args passed in along with the local variables and some other stuff. Look at this, especially the "Structure" section. A breakpoint can not make you stop just between two functions. At a function call, a stack frame is one of the first things created. According to Â§6.2.4/6 of the C11 Draft Standard: For such an object that does not have a variable length array type, its lifetime extends from entry into the block with which it is associated until execution of that block ends in any way. So it should come as no surprise that buf_len is visible in the debugger the moment execution enters some_function(). During compilation each variable is added to the symbol table. For this reason any reference to a variable will resolve only if it was already declared, and inserted in the symbol table. If you reference a variable before its declaration you'll get an error of indefinite reference. But the space for all the automatic variables is allocated all-in-one in the stack during the function prolog (i.e. in IA32-64 architecture the space required by all automatic variables is obtained subtracting that space to the stack pointer register in the stack frame). The required space is computed by the compiler by summing the memory space required for all automatic variables present in the symbol table for that function. Practically when stack frame is created on function entry all automatic variables are there, even if used after. In some cases the variables are not allocated if the compiler optimize them out, the compiler optimizing the code choose a different way to use the variable suppressing it (i.e. using a register or simplifying the flow and removing intermediate storage). 
c-15-23	X	Don't understand why my multiplication isn't working? I'm trying to make a temperature conversion function for a class assignment, and my function receives all of the arguments correctly but for some reason after it hits the equation to convert the number it just makes the number 0. Here is the code so you know what I'm talking about: the main function puts the arguments in correctly, so I don't think that's the problem. Thank you very much for any help you can give! Use type double not int for your temperature parameter. Kindly check operators precedence & associativity, there is a problem in below statement (5/9) yields in 0 not some decimal fractional digit because coefficient is 0. If you ant correct result either typecast or replace like I hope it helps. Don't know why are you writing it that way(it's better to use a different variable name on the left-hand side for temperature in Celsius. "Code readability matters") but you are doing wrong when you write, In C,(5/9) evaluates to 0, which makes the whole expression 0. You should use double/float for fahrenheitTemperature and change (5/9) to (5/9.0) or (5.0/9). 
c-15-24	X	Using typedef keyword in c I was going through one of the lecture slide taught in the class which included a typedef keyword in it. As opposed to normal use of typedef keyword where we usually put a alias for particular data, there was no alias put up for that example. Following is the example:See the typedef in the slide Is the use of typedef correct, or am I interpreting differently? It is a function pointer. And it is perfectly valid syntax. Ptr is declared as a pointer to a function where the function takes two int arguments and return an int. Here you can use Ptr as the alias to the typedefed type. 
c-15-25	X	realloc array of struct in c Im trying to make a function that adds one more element to my dynamic allocated array of struct but i cannot seem to make it work . This is a part of my code: Here I'm reading the new complex number im trying to add to my array and the position it'll be added but when I realloc my array and I make a test to see if my old elements are still there, apparently it changes my last element. so if i read 3 complex numbers and i print my vector everything seems okay, but after I call this function and print it again after the realloc it shows: and I get that v[4] is like this because I did not modify it but why is v[3] affected by the realloc? 
c-15-26	X	Dynamically alloc size of array based on user input in C I'm new to C so I'm having a little trouble handling everything Java already did for me in the background. Basically what I would like to achieve is this: Declare an array of char with no specified size Ask to the user a string in input (single word or phrase) Set the previous array of char with size of the length of the input string (dynamically) Put the inputed string inside the char array I've tried using scanf but it doesn't seem to handle string as an array of char(?) so I'm not able to work on the variable I've also read about malloc() functions which dynamically allocates space for an array so I could use it to set the size of the array as the strlen of the string and then put '\0' at the end (just like .asciiz in some assembly language) but I can't figure out how to correlate malloc and input string. Any help would be appreciated! Thanks for your attention C does not provide a way for you to create an array of unspecified size. Generally, to do this sort of thing, you must create an array of some size (e.g., using malloc) and start reading user input. If the user input continues too long, you increase the size of the array (using realloc) and continue reading. Once you reach the end of whatever the user is inputting, then you can reduce the array to match the actual size (again using realloc) if desired. A consequence of this is that you cannot read the user input in one go. You must write code that reads portions of specific size, either character-by-character or as many characters as fit in the array you have created so far. You can read string using gets() (https://www.tutorialspoint.com/c_standard_library/c_function_gets.htm) If you want to manipulate this further, then you can use the snippet below to create a dynamic array(just an example for int provided, modify as per your need) If you can get string length then modify the below, else theres another post How to dynamically allocate memory space for a string and get that string from user? which does what you want, but Ryans answer is better it seems. You can use getline to read an entire line and not have to worry about managing memory during that read. The function was only standardized in POSIX.1-2008, so if you're using glibc you'll need to compile with -D_POSIX_C_SOURCE=200809L, for example. To summarize the linked documentation: getline takes a pointer to a string, and will allocate memory entirely for you if the string is NULL and the size is 0. It returns âˆ’1 if it fails to allocate memory (e.g. there's more input than free memory) or if the end of the input is reached immediately. You always have to free the memory allocated in this way, even if it fails. 
c-15-27	X	warning: field width specifier '*' expects argument of type 'int', but argument 2 has type 'size_t' {aka 'long unsigned int'} Code: Warning: Is it possible to eliminate this warning without casting the result of strlen() to an int, while keeping the width specifier as a variable? If yes, how? printf expects an int for * , so just give it an int.-->> cast it to int. But if you want to avoid the cast, you could use a variable for the length argument: Note: the correct types are essential for printf()s arguments, since it is a varargs function: the only way for printf to determine the types of its arguments is by inpecting the format string. And * expects an int. 
c-15-28	X	Find certain file type in c and save it I need to find files of a certain type (.bin) in a folder and then sort their content and rename the sorted files again. Any ideas on how to do this? This far i have only and i have no idea what to do next. Please help ! Avoid using system() if you can. C lets you do all these things without having to call external programs. Use the opendir(), readdir() and closedir() functions to get the names of all files in a directory. For every filename, check if it has the right extension, and if so add it to an array, You can use the qsort() function to sort the array. You can rename files using the rename() function. If you need to do this recursively, then have a look at the ftw() and nftw() functions. 
c-15-29	X	C - Storing pointers with malloc() in an array, can't free() them afterwards I want to store pointers that have been allocated using malloc() in an array and then free all of them after. However even though the program doesn't complain it doesn't work. Below cleanMemManager() won't actually free the memory as when tested inside main() the char* pointer is not NULL and it will print ???. code: I don't understand the syntax to use for this, does the pointer not actually get touched at all? What is it freeing then since it doesn't throw any errors? Freeing doesn't guarantee that pointers pointing to the allocated block will be set to NULL. If you actually try doing you will see that the program won't output and if you remove the cleanMemManager() function call, it will output. This means tfree function is working as intended, it's freeing the memory that was allocated. Now as to why ptr variable being not set to NULL, it's simply because ptr is still storing the old address. cleanMemManager() has no way of mutating the variable ptr. This is commonly called dangling pointer or use after free. Also free() doesn't clean/zero out the the allocated space, the block is simply marked as "free". The data will most likely remain in the memory for a moment until the free block is overwritten by another malloc request. In main, char *ptr = (char*)talloc(3); declares ptr to be a local variable. It contains a copy of the value returned by talloc, and none of your subroutines know about ptr or where it is. So none of them change the value of ptr. Thus, when you reach if (ptr != NULL), the value of ptr has not changed. Additionally: In initMemManager, you should use sizeof(void *) in two places where you have sizeof(void**). In these places, you are allocating and copying void * objects, not void ** objects. It looks like you are trying to implement a sort of smart memory manager that automatically sets pointers to NULL when they are freed. To do that in C, you would have to give up having copies of pointers. For example, ptr is a copy of ptrList[0], but tfree only sets whichever copy it is passed to NULL. We could give advice on building such a system, but it would quickly become cumbersome"your memory manager needs to keep a database of pointers and their copies (and pointers derived from them, as by doing array arithmetic). Or you have to refer to everything indirectly through that ptrList array, which adds some mess to your source code. Unfortunately, C is not a good language for this. 
c-15-30	X	Center a string using sprintf I have a code that would like to display the message in the center between the bars. I looked at the C functions and found nothing that would allow me this. I am looking for a way to show the Welcome message by counting the size of the user name always show centralized. Example: example 1: example 2: There is no special function for it, so you should do the math. Count the number of bars, and the length of the message. Subtract them and divide by 2. If the length of the message is even, then add 1 to the quotient. Add to the quotient the length of the message. Sample code: Output: PS: You could replace (45-len)/2 + ((len % 2 == 0) ? 1 : 0) with (46-len)/2, in order to get the same result, since the latter is shorter. 
c-15-31	X	How to sort images by their size in programming c How to sort images by their size in programming c - Heading # 
c-15-32	X	copy a sub part of a string I'm trying to copy a part of a string in a other string. I know the 2 identifiers starting and ending the sub-string. I'm trying to copy the IP from this string: The beginning of the string will be "Host: " or 192 The ending will be "\r\nC" or the 2nd occurrence of "\r\n" So the desired output is: I tried using strcpy and memcpy but the IP has to be variable so I don't know how long it will be or what it will be, the minimum will be 11 and the maximum 15 chars. I hope you can help me further. One solution is to extract all the characters which are number or . from the Start extraction after Host: Remember to terminate the string with '\0'. Simplified version of the program: OUTPUT: You will need a buffer of 16 bytes (max 3 bytes for each octet, total 12, plus three points is 15, plus zero-terminator). Then, as you say, you need to precisely position your read: If the format of the input string is known, and is as suggested by the posted example input, sscanf() can be used with the scanset directive to extract the IP address. Using %*[^:] causes sscanf() to match any characters in the input until a colon is encountered. The * suppresses assignment. Scanning resumes with the : character, so a literal : must be placed in the format string to match this character. Then the %s directive can be used to match and store the IP address as a string. Here is an example: Program output: 
c-15-33	X	Socket recv() function get null message I have a problem about the recv() function. When I sent the first message(ex: hi) to server first, the server would send back the same message to client. And I sent again(ex: hi2), I would get a null message. But I kept sending message,maybe I sent two times again. I got the second message I sent. I want the result is client send to server and client receive the right message immediately. How can I solve this problem? my client: my server: Change Into: The cause: you were sending a complete buffer, containing only a few intended characters, but padded (upto size=256) with NULs, (or whatever garbage is the buffer from previous calls)) recv() and read() return the number of characters received. (or 0 on EOF,or -1 on errors (some of which could be handled, for instance: EAGAIN, EINTR)) 
c-15-34	X	differences between char *array[] and char array[][] in C I want to know about differences between char *array[] and char array[][] in C. and I want to put some strings in char *array[]. } but above things make compile errors. I don't know why that makes errors... Please help me. Thank you. This is my code. I don't know why I must do dynamic allocation. I heard that efficiency of dynamic allocation. but I think that In my code, There are not grammatical errors... 
c-15-35	X	for loop condition in 2nd clause and no condition in 3rd clause The output I am getting is proper which is 4 3 2 1. There is no i>0 condition in 3rd clause, so how is loop stopping when i=0? --i eventually turns out to be 0. And thus the condition becomes false. As, the "3rd clause" is empty, nothing interesting happens. The "2nd clause" is where condition checks are done. And --i evaluates to itself which is 0 in the fifth iteration. In C , false value is represented by 0 whereas any nonzero value indicates true. In this loop --i; acts as a condition. When i becomes 0, it acts as a false Boolean value and the loop terminates. Is equivalent to: The for statement evaluates expression2 for value 0 to continue executing do_soemthing or not. It will continue till expression2 == 0; You didn't noticed that your loop start from 4 instead of 5! In for statement expr1 executes on the start of loop and will never execute during the iterations expr2 is checked for true or 1; before every iteration if this expression is false or 0 the loop will be stopped. and expr3 is executed after the completion of an iteration. so in your case you don't have any third expression and the second expression which is checked for 0 or false will eventually become zero after four iterations 
c-15-36	X	Error with function-pointer: a value of type "qt_pFctHandlerR" cannot be assigned to an entity of type "pidK_t" I try to call a function with return value of type "pidK_t" and parameters "void". My function handler type: My global function handler: My function handler registration: My function: My struct: My call of function: I got this error: 
c-15-37	X	How to take array in php with swig? I've a c code which produces an array as output. I want to take this array in a php script. I've made lot of searches and tested some examples SWIG C-to-Python Int Array Swig convert vector<std::string> to native PHP array Python/SWIG: Output an array return double * from swig as python list How to pass list of structs to C in SWIG/Python https://bytes.com/topic/php/answers/873146-returning-integer-array-php-c http://swig.10945.n7.nabble.com/typemap-conversion-C-std-container-of-C-objects-gt-PHP-array-of-C-object-pointers-in-proxy-wrapper-td6726.html ... but I can't do what I expect. Here's what I did until now. test5.c test5.i Compliation is OK. I test with this php script The result It's OK for char and int, but I get for the array. What to do in the test5.c? In the test5.i? In the php script? Vector, typemaps, class : I'm confused to know what to do exactly. mystruct_elements_get is created by swig in the test5.php file, within the class mystruct 
c-15-38	X	segmentation fault textbuffer There seems to be a segmentation fault when I compile my code using gcc -Wall -std=c99. The task is to create a textbuffer in TB newTB that separates by "\n" and puts it in a linked list. E.g I can't seem to find what's causing the seg fault for my code. I think it has something to do with accessing the character arrays within the node or the createNode function itself but I tried a couple of changes and it's still the same result. There seems to be a segmentation fault when I compile my code You can segfault only during execution and not while compiling. Assuming TB has been properly typedefed, the problem is your createNode function. You allocate space for just the number of bytes in text. You should allocate one extra byte (i.e. size + 1 bytes) for the trailing `\0'. The real issue arises when you try to do this: printf("POS %d : %s\n", i++, current->str);, the %s specifier expects a bunch of characters terminated by \0 which is missing. Strictly speaking, you are invoking UB here. 
c-15-39	X	Can't set SO_BINDTODEVICE for a socket on enp4s0 I have an old code running for linux (ubuntu 16.04) that binds to a socket and set SO_BINDTODEVICE, I have change the target to a new Ubuntu 17.10, and it fails with the error "No such device", I have tested in this target using loop back 'lo' interface and it works. The interface have the multicast flag enabled It fails in all interfaces but lo. I suspect about the length of device name, so I've tested in a 17.04 and with the name "eno0" works, but with wlp5s0 (wifi) doesn't. I don't know how to solve. Do you? Is there a limit in the length? It's not working for longer name lengths because you're passing in the wrong length. The last argument to setsockopt specifies the length of the option value passed as the fourth argument. You're passing in a value of 4 for this option, so only the first 4 bytes of the string are looked at. Change the last argument to be the length of the string: 
c-15-40	X	Delete messages from queue I have several processes sending a message to another process (A) through msgsnd with the same mtype. The process A recives one of the messages in the queue through msgrcv and then should delete all the others messages in the queue with a specific mtype = contact_id. Code of the senders: The senders send only one message per proccess to A. Code of process A: This is my solution but it does not work. It enters in an loop and doesnt exit from it. Output: return value = 24 - errno = 0 Success How can I edit the while condition? 
c-15-41	X	Optional input variables in scanf is there a way to have optional input variables in scanf ? I have a program that scans input until EOF. That input can look like this: When I type (or read from a file) + or - it is always followed by three numbers but when I type in ? it is only followed by one number (always). My current code looks like this: Right now it requires me to type in three numbers all the time, even if I want to type in the "?" action. Is there a way to make some of the variables in scanf optional so the input "? 10" would also be valid. PS. I have stripped the code so it is not too long. I hope I have included everything that is necessary. I would also appreciate if I didn't have to rework the code too much because it is basically done, everything works like it needs to. This is the only thing that is stopping me from turning in my code. PPS. This is for a homework. As mentioned in comment this can be easily checked with sscanf() and fgets. We are using the fgets to read a line and then pass it to the parser function. That function tries to parse the line. sscanf returns the successful number of parameters passed. Based on that count we are deciding which input it is. This code is just a starting point for how to start. It avoids the lots of error checking and concentrates on the technique as discussed above by Jonathan Leffler. Code example Here add,sub methods are to be implemented for actual code. A demo implementation is shown here above. For example here in add,sub no overflow checking is there. 
c-15-42	X	C - Use sigsuspend in a thread doesn't work for a homework assignment I have to use only linux system calls to manage signals in a game, programmed in C. One thing I have to do, it's to call indefinitly sigsuspend in a thread and wait for a SIGALRM,then if there is a sigalarm (signal alarm) I have to printf() something (doesn't matter what). However, I tried several things but it doesn't work, I don't know how to "deblock" sigsuspend and print what i want. And there is a timer in the game which send sigalrm. My code works but not the part with the sigsuspend Of course I have also a sigarlm handler which does some stuff with SDL when it receives a sigarlm. I don't really how I have to use masks with sigsuspend Code : The sigsuspend part Currently it only does not print "in thread" when a sigarlm is received, what should I do to use sigsuspend properly ? I am obliged to use sigsuspend You create a thread that should wait for the signal SIGALRM thanks to sigsuspend(), but instead you open the thread to all signals but SIGALRM. Replace with this way sigsuspend() waits for a non blocked signal (SIGALRM). For testing, you could send the thread the SIGALRM signal using from the main thread, for instance. 
c-15-43	X	2 pipe, one fork, bc and execlp (C) I'm trying to get something like this to work in c using piping and fork : echo "an operation like 10+10" | bc To be precise, I tried to create 2 pipes, one where the server will write the operation and bc will read and another where the result of the operation (by bc) will go and the server will read it and printf it. For this, I'm changing the output and input of the parent and child process. Here is my code: int main(){ } I'm getting the correct answer but with the error : "(standard_in) 2: illegal character : ^@" "(standard_in) 2: illegal character : :" plus I have to CTRL C to quit. I guess it comes from BC but why... What am I doing wrong? Thank you! I've already seen few exemple but only threw one pipe. This works. Note how it specifies the size of the data to be written, and how it checks the writes and reads, and also how it closes file descriptors. (Remember: sizeof("string literal") counts the null byte, unlike strlen(). It's also a compile time constant. However, more general purpose code would use strlen() on the current expression string.) Rule of Thumb: If you use dup2() to duplicate a pipe file descriptor to standard input or standard output, close both ends of the pipe. That also applies if you use dup(), or fcntl() with F_DUPFD or F_DUPFD_CLOEXEC instead. There is still room for improving the error handling; the code ploughs on after reporting some of the errors, which is probably not the best behaviour. Output: (Note: if you pipe the output of the program somewhere, you don't see the I am the child message. For the reasons why, see printf() anomaly after fork().) 
c-15-44	X	Pass local variable of a function back to it's parameter I'm wanting to pass a local variable within a function, back through it's pointer parameter (not returned). My assignment uses a stack data structure, and one criteria that must be used is the Pop() function must have a pointer parameter that is used to return the top-most item on the stack. I have used this before. My program became more complex with a data struct, I started getting either segmentation faults, or the data not being saved after the function's frame popped. My knowledge with pointers is alright, and memory location/management. But I can't claim to be an expert by any means. I don't exactly know what happens in the background when you're using the function's own pointer parameter as a means of passing data back. What is the correct syntax to solve this problem? How can a parameter pass something back? Thanks in advance! EDIT* Since many people are confused. I'll post some snippets. This is an assignment, so I cannot simply post all of it online as that'd be inappropriate. But I think it's okay to post the function itself and have people analyze it. I'm aware it's a bit messy atm since I've edited it several dozen times to try and figure out the solution. Sorry for the confusion. Keep in mind that not all the code is there. just the function in question, and some of the structure. The function should receive a pointer to a valid object: and the function should modify the object it received a pointer to: Update: You're overcomplicating things immensely "“ there should be no mallocs when popping, and you're leaking memory all over the place. (Your knowledge of pointers and memory management is far from "alright". It looks more like a novice's guesswork than knowledge.) It should be something more like this: but it's better to push/pop at the far end of the array: Response to the originally posted code: A few issues. Your program will not compile. variable has to have a type. stuff is not defined; item *itemPointer is not used. item * catcher pointer has to point to allocated memory. It is not initialized. Pass arguments via pointers and modify member of the structure like this: Solution like: is possible, but it assumes that stuff or someItem is a global variable which is not the best programming practice IMO. Retrieve value from pointer via -> not . operator. OUTPUT: 
c-15-45	X	I have a task to find bugs in this code and I just can't find any I study in school c programming and I have this assignment to find 3 bugs in this code. I just can't find any! It all seems to work just fine... maybe I should also mention that I have been studying for about only 2 months. This is the code: Issues: 1. No warning for entering strings instead of numbers. 00 will be printed. 2. No space between numbers, no line termination Proposed change: 
c-15-46	X	How to match .c and .h properly? I have a C project and I really don't get how to manage .c and .h. I've been using a method for years but now I have to create codes without any warnings, so I need to change the way I do it. Here is how I'm doing it: Each .c have a .h with the same name. Even main.c has a main.h. In each .c, I include the matching .h, so I have only one include per .c. In main.h, I include all the libraries I need, like stdio stdlib and so on. I also declare my enumerations and structures there. Finally, in every other .h, I include the main.h which contains the structures, enums and libraries. I understand that by doing that, I call main.h a lot of time, but I use the #ifndef and #define in every .h. Also, I each .h contains the prototypes of the functions in their corresponding .c How should I manage .c and .h? I forgot to mention that the problem is that I get a warning for every single function: "implicit declaration of function" Here is an example with four files : main.c : main.h : IA.c : IA.h : All my other .h are like IA.h For foo.h and foo.c: Use foo.h to tell other source files about things that foo.c provides. So foo.h will declare functions that are (a) defined in foo.c and (b) called from other source files. It will also declare any types or other things that those functions need or that other source files need in able to be able to use the functions. In foo.h, only use #include to include header files that foo.h itself needs. In foo.c, use #include "foo.h". This has two purposes: (1) It declares things that foo.c may need, without having to duplicate those declarations in foo.c. (2) It ensures that foo.c is using the same declarations that other source files see when they include foo.h, so any conflicts between declarations in foo.h and definitions in foo.c will produce compiler warnings or error messages. If foo.c needs any headers that foo.h, include them in foo.c, not foo.h. Similarly, if foo.c has any functions that it uses for itself but does not expect other source files to use, declare them only in foo.c. Keep things that are just for foo.c inside foo.c. Use foo.h only for exporting things to other source files. If there are any types or other declarations used by your program generally: Put them in a suitably named file (e.g., bar.h for types involving some bar concept) and include it. Largely, you can treat bar.h as a pair bar.h and bar.c described above except that bar.cis empty. Generally, there is no reason to make a main.h. Usually, main.c uses things that other source files provide and does not provide things for other sources to use (except that main is called by the C run-time start-up code). I suggest the following: Divide your functions in different .c files as you already do. For every .c create a .h In every .h insert its include guard: Within the include guard, start by including the .h of the libraries you need to declare your functions or to define structs, e.g. #include <stdlib.h> if you use size_t parameters. Within the include guard, insert the structs, enums, ... you need exported Within the include guard, insert the function declarations. In every .c start by including its corresponding .h, then include other libraries needed to implement your functions, then put in the definitions. Don't make a main.h or common.h, unless you have extremely good reasons for it (I know this will be commented against, but everyone has its style). In main.c include what you need. You'll be including much less than you think. 
c-15-47	X	C: difference between 'struct Table *const' and 'const struct Table *'? I created a struct like this: And I want to use it in the following function (given to me) but Clion highlights table in the function, and gives the warning: "'table' declared with a const-qualified typedef type; results in the type being 'struct Table * const' instead of 'const struct Table *'" I am not quite sure what this means. I tried changing my table struct to const but it doesn't change the warning. Difference Betweem struct Table * const and const struct Table*? struct Table * const means const pointer to struct Table. const struct Table* means pointer to a struct Table which is constant. In the first case the pointer is constant but the struct Table is not. you can modify the table's attributes. But you can't change the pointer to point to different table. Second case the pointer is non-constant. You can make it point to any struct table but if you try to modify the attribute of the initially pointed table it will throw error. What did you do and why the error? You have used typedef struct Table *TableP;. Now const TableP doesn't mean const struct Table*. It simply means const pointer to a struct TableP or struct TableP* const. That's what compiler said to you. The solution would be to use struct Table *const table directly into the code when you are writing the function. This is what you want - here this means table is a constant pointer to a struct Table. Also this is much more readable and easy to use. Extra points This is why it's not a good idea to hide pointer behind typedef - it hampers readability and you run into some weird cases like this. Note: The best way is to simply typedef the struct and pointer to it should be used directly. Case 1 : here Tablep is pointer to structure Table. When you are writing const TableP table, it will be defined like this const struct Table* so what is meaning of const struct Table* , means address constant, you can't change the address but you can modify it's members value . for e.g Note : both const Tablep local and Tablep const local are same. I hope it helps. 
c-15-48	X	Why this give me a segfault? Here is my code, I'm getting a segmentation fault and I don't know why... I'm creating a grid which 'n' is its size, 'tab' is an array which his type is cellule : a cell has 2 values. So I'm creating in the function 'creer_grille' an array I malloc it (size can be 4 6 or 8) and I initialize the cells values with -1 and 0. Then in the following function I'm testing the 'creer_grille' function. In your creer_grille function, you declare the g pointer. As it is not initialized, it will contain garbage. Few lines later, you try to access the n member of g (g->n). Even at this time, your g pointer is not initialized. Therefore, you try to access a garbage location which for obvious reasons will lead to a segmentation fault. A possible fix is to allocate memory for your g pointer before using it. g = malloc(sizeof(grille)); I suspect that your compiler might have warned you about using an uninitialized variable. A few problems. Suggested fixed code Explanation A) Need to allocate the Grille B) Parentheses are necessary since && has more precedence than || C) use sizeof(cellule) and not sizeof(int) D) The Cellules also have to be freed (and before Grille) The problem is in this function : creer_grille(int n) the variable g is dynamically allocated with the size of sizeof(int)nn but during the loop you are accessing the cellule field, that was not allocated explicitly. You are allocation g and testing (g->tab == NULL). This works for you because malloc is not setting the allocated memory to 0. if you used calloc - you could see the problem. When you will try to set the initial field in the cullule in the n*n'th iteration - you will get the segmentation fault. 
c-15-49	X	Simple Text Search in C I need to write a program that will find all the ".txt" files on a given directory by user and search them for a keyword. It should record all the matches in a result file with file name, and line number information in each line. How can I find all ".txt" files without knowing their names? How can I go to directory which user inputs? 
c-15-50	X	cannot find id in c programming lanuage In Code::Blocks when i run and debug my code it says in the "Build messages section" (error: Cannot find id) I reinstalled both the coding platform (code::blocks) and the compiler individually and nothing has changed. Try simple program first to see if installation is correct: 
c-15-51	X	Null pointer passed as argument 1 In line int d = atoi(argv[2]); there seems to be something wrong. "null pointer passed as argument 1..." What can I do? argv[0] holds the name of the command used to start your program. If you expect two command line arguments, check argc == 3 and read the command line arguments from argv[1] and argv[2]. You have a multiple issues with your program 1) string is not a standard type in C. 2) false is not a standard constant in C98. Standard C (since C99) provides a boolean type, called _Bool. By including the header stdbool.h one can use the more intuitive name bool and the constants true and false. 3) Your board has a fixed size 1x1 board[1][1]: Fix this otherwise your program will smash memory. 4) You need 2 arguments for your board. Arguments start on position argv[1] and argv[2] in argv[] Since first argv[0] is name of the program you need argc = 3. 
c-15-52	X	Passing a struct to a process through shared memory in C For a uni assignment I am trying to create a structure in shared memory, write some data in it, and then let the child read it. I've come up with something but, since I am new to C, I am getting some errors that I can't quite understand, here is the code: } The errors I'm getting are those: I tried to declare the dimension of the variables in the struct and the variables on the father to be the same thinking that it would help, but it didn't. Does anyone know how to solve this? If you also have some example code that would be appreciated. I tried with this test application and it works: 
c-15-53	X	Transposition cipher too long compilation I need to do a program that decodes Transposition cipher. On start I have one word, which is in encrypted text. the length of the key is equal to the -1 length of the received word. key is random. Examples: For examples 1 and 2 the program compiles quite quickly, but for example 3 the program compiles for a very long time because i have too many for loops. I would like to optimize the code to make it faster, but I have no idea. There are some possible optimizations - what is called a keyhole optimization - in your code, but I'd rather change the algorithm you're using. Keyhole optimizations are penny wise and pound foolish, and premature optimization is the root of all evil. Decreasing the algorithm complexity is almost always your top priority. Then and only then you do further optimizations. Here you know that key length is (in the third example) five, because the crib effect is six characters; we'll refer to the key as 12345. We align the key to the cyphertext since whitespaces are ignored: We could now implement a brute-force Babbage decryption in O(n3) using a linear equation system: But we can rather observe that we only have one word whose length is equal to that of 'effect' - it is 'kolniz'. Which means that we can recover the key straight away: it is the difference "nikol - efeec". The first symbol, 1, equals to a shift forward from the second e of effect to the n of kolniz, that is, 9 positions. So when we find a letter mapped to the 1 symbol of the worm, such as the first 'R', we go back 9 positions from R, and we find 'I'. The above algorithm is roughly O(n+m) with n being the length of the ciphertext and m being the length of the key. Suppose we have two words whose length is equal to "effect", say they are "abcdef" and "ghijkl". Which one do we use? Hypothesis 1: abcdef is the cyphertext of effect. If that is true then the shift for the first symbol of 'e' is 'a' and the same shift must get 'f' into 't'. Hypothesis 2: ghikl is the cyphertext of effect. If that is true then the shift for the first symbol of 'e' is 'g' and the same shift must get 'l' into 't'. The chances of both hypotheses being true and us not being able which one is correct are those of another word having the same shift difference in its first and last letters as are 'e' and 't' in our crib, for example the first word is 'effect' and the other is "cougar", "dirges", "harlow", or "jalopy". Those chances are very little. 
c-15-54	X	don't understand notesearch exploit explanation I've started reading jon Erickson hacking art of exploitation with having basic knowledge of c. In the exploitation section of book there is a program named notesearch exploit. I tried too much to understand but don't get how the program is 
c-15-55	X	Simple xmlC14NDocSaveTo Function C Example I'm looking for a simple C program that uses that libxml library API call xmlC14NDocSaveTo but I couldn't find any example in C. So basically, I have an XML buffer (char *) and I would like to canonicalize it and put the result into a different buffer (char *). This libxml API xmlC14NDocSaveTo seems to be the perfect fit to do it but I couldn't find any C example. Could someone please give an outline how to use this function? Thanks for your time. 
c-15-56	X	Reading a string with fgets into a char array from a filestream. [C] I am trying to make a programm which decrypts a series of letters from a file. Sadly, I am failing to read the letters into a char array (string) because I do not really know how the fgets() function works. So my actual code looks like this: So actually this kinda works. It opens the command prompt and writes the the sequence of letters in that window. But now I have to use every single letter and compare it with the key's letters. It just compares the right four bits with a XOR to keep the result letter in the same column of the ASCII chart. I have already written a algorithm which works for single letters: temp should be the resulting letter. So now I am struggling with how to read a single letter from the fgets function into a variable (in letterOfFile) and compare it with the letterOfKey. Or is there maybe a string-function which does that is a lot easier way? I hope someone can help me. :) The program is fine. However the shifting and masking looks suspicious to me. I think you've fallen for the common confusion between binary and hex. Binary numbers are the format in which integers are represented natively, and the bitwise operators only make sense on them. Hex number are ASCII strings of characters like "F2E0", the first character is "F", as in "Fred" and needs to be treated as text. You can write a little function to take a character and return an number 0-15, or -1 on error (passed a letter like "K" which doesn't have a hex value"). So like this As an exercise, put in the error handling if passed a string with non-hex characters in it. puffer is where fgets store a line of 80 chars max, including (if size permits) the trailing \n. To deal with all characters of a line, do a loop from the start of puffer until you reach the end of line, meaning either \0 or \n Explanation s points to the beginning of puffer and is incremented. The loop ends when the character pointed to by s is either 0 or \n. For each character in the line, *s, bitwise operations are done and stored back to *s. And, (*s & 0xF0) keeps the 4 MSb | is the bitwise OR (*s ^ letterOfKey) does an Exclusive OR between the 2 operands & 0x0F keeps the 4 LSb See also Bitwise operations in C 
c-15-57	X	about Search in Arrays ........................................................................................................................................................... Hi everyone i got a little problem when i search for element in arrays when i enter the number like 1007 he give me Error: Invalid item ID all the time this is Myfile 1007 5 30 1004 4 10 1003 3 20 And this is my function thank you for your help ............................................................................................................................................................................................................................................................................................................ fscanf() is like scanf(), instead of scanning from user you are trying to scan from file but after scanning where you are storing ? ItemI[i] should be &ItemI[i] isn't it ? Edit : I think you want output in one way but you wrote in different way So I edited your code. I hope it helps. Your code fscanf(f,"%d%d%d",ItemI[i],ItemQ[i],Price[i]) passes the values of ItemI[i], ItemQ[i], and Price[i] to fscanf. However, fscanf needs to know the addressess of the objects so that it can store new values in them. Change that code to fscanf(f, "%d%d%d", &ItemI[i], &ItemQ[i], &Price[i]). Additionally, do not rely on fscanf to return EOF when it fails. It may fail not because it reaches the end of the file but because it finds fewer than three numerals in the input that can be interpreted as integers, in which case it returns the number of items it converted before failing. So it could return 0, 1, or 2. Instead, you should check whether the return value of fscanf is equal to the number of items you want, 3. 
c-15-58	X	Why do I segfault? Here is my code, I'm getting a segmentation fault and I don't know why... I'm creating a grid which n is its size, tab is an array which his type is cellule : a cell has 2 values. So I'm creating in the function creer_grille an array I malloc it (size can be 4 6 or 8) and I initialize the cells values with -1 and 0. Then in the following function I'm testing the creer_grille function. This is accessing an uninitalized value - invoking Undefined Behavior in your code. Move the line to after you allocate using malloc. Also g = malloc(sizeof(int) * (n*n)); is wrong you don't want grille* to point to a chunk which is allocated for int's. because in case there is not enough memory there will be undefined behavior acessing memory out of your allocation. As you have allocated the n*n locations for storing grille you should access them by indexing Again g->tab[i].val = -1; this is wrong because of the same reason pointed earlier. You have to allocate memory to g[i].tab. Otherwise it's undefined behavior. You have to allocate memory for g[i].tab. Also there is a flaw in your logic. First of all allocating nxn memory doesn't mean you have nxn grid. The method you followed will give you a contiguous chunk of nxn elements and that will not be of that use. (You can make a use of it but that's an overkill). The best thing you can do is a jagged array and it's example is shown here. Example code:- You have to free the dynamically allocated memory after you are done working with it. The free logic would be something like - you will first free the memory allocated in tab and then after all of those memory is freed, you will free memory allocated in g. 
c-15-59	X	pthread segmentation fault (core dumped) error Can somebody point out why my code is throwing segmentation fault? Most likely I am making a mistake when calling pthread_create() but I am failing to understand the mistake. Can somebody point out where am I going wrong? The output of this code is: Segmentation fault (core dumped) How should I resolve this error? first thing, you should initialize mutex variable with PTHREAD_MUTEX_INITIALIZER. or you can call pthread_mutex_init(&lock,0) from main thread to initialize lock. second thing, replace below statement with because y should have valid address else you can't perform *y later(as you are doing) I hope it helps. Multiple pointer issues in Explanations A: probably int id = *(int *)threadid + 1; B: int *y = (int *)x will have y pointer set to x... an int dangerous! Was probably int y = x; (?) C: Then fix the total int total = id + y; (the following loop is not necessary, counter += total; is enough 
c-15-60	X	How cl compiler deals with it when scanf encounters EOF (windows, VS2017) After I input CTRL+Z/ENTER 3 times, the scanf then return value of -1. And scanf overlook all the things after 1st and 2nd EOF. However while using gcc to compile, the scanf works well. (that is, return -1 as soon as enter an EOF.) I have known from many books that scanf return EOF after encountering input error or end-of-file. But cl works diffenrently. Why? Or something wrong with my comprehension about scanf? 
c-15-61	X	Performance: efficient reduction of a 2d array over the columns [OpenMP, C] I would like to achieve very efficient parallel reduction operation (i.e. summation): each of columns of a 2-dimensional array (memory buffer in row mayor memory layout) should be summed to an entry of a 1-dimensional array. To be more clear about the expected input and output Parallelising the sum of rows is pretty straightforward and efficient because the values are contiguous in memory and there is no risk of race conditions. I found this works really well I am founding more difficult to parallelise over the other axis. This should be a straightforward parallel recipe but I was not able to find a definitive answer what is the most efficient way to program this. This is the naive serial code I would like to write an efficient parallel version of: Note: I have already read the following q/a but they didn't lead me to any speedup over the naive sequential code: Parallelizing matrix times a vector by columns and by rows with OpenMP OpenMP average of an array Reduction with OpenMP Just reporting the faster implementation I was able to achieve after some attempts. Here I assign columns to the different threads, in such a way to work as local as possible and to avoid false sharing. 
c-15-62	X	Linux C Programming - FTP server won't respond through sockets So I am trying to make my own FTP client, I was able to connect to a ftp server and get the "220" response code but when I try to send ANY command the recv function just gets blocked. This is my code: I have tried multiple free ftp servers and I was able to connect to all of them and get a 220 response code but from there I couldn't communicate with them at all. Well jokes on me, the problem was that I was not appending '\n' to the messages that I was sending to the ftp server 
c-15-63	X	Compiling by hand doesn't work because of missing Cygwin I used to create and compile C programs with Codeblocks. I wanted to compile it by hand, so I tried to do it with a Makefile. However it seems that I am missing an important detail, because when I execute the program, it throws me an error that I never had when compiling with Codeblocks: "...cygwin1.dll is missing from your computer..." I watched and studied the compilation code seen in Codeblocks when running the "compile" button: The best I could do to make a similar compilation was this Makefile: When running the command make and double-clicking the produced executable's icon, the error described above happens, and I don't understand why, what is happening and how to fix it. I need help to understand this. You may take note that when running the executable from the shell Babun, it works fine: ./bin/Debug/SDL\ Tower\ Defense.exe (needed libraries were moved in ./bin/Debug in order to make it work). Plus, to me, Cygwin seems to be installed on my machine and an environment PATH variable points to its location: C:\Users\nounoursnoir\.babun\cygwin. I don't see it could be missing anything. 
c-15-64	X	GNU argp: How to parse option with only long name? I want to use argp in my C program to parse command line options. One requirement is that an option does not have a short name (like -f bar) but only a long name (like --foo=bar). My approach so far is to set the key field of the argp_option struct to 0 to make it not show a short name. I have looked at the provided examples and argp.h in detail but I can't find a means to parse an option that only has a long name in the parser function that is given to argp. What I did find out is that, theoretically, in the parser I could use to find the value of long options (e.g. when called with --foo=bar, bar would be printed here). However, this doesn't seem like the right approach since I don't see a simple way to actually tell which option the value belongs to. and this also shows actual command line arguments (not option values). I'd be thankful for any tips about where I need to look. Cheers. From "The GNU C Library: Argp Option Vectors &mdash; Specifying Options in an Argp Parser": int key The integer key provided by the current option to the option parser. If key has a value that is a printable ASCII character (i.e., isascii (key) is true), it also specifies a short option -char, where char is the ASCII character with the code key. In other words, the key field of an option can be any int value, and if isascii(key) is nonzero, then it also specifies a short option&mdash;meaning you can use non-ASCII values (values outside the range 0x00..0x7F) to avoid the short option. Despite not being a short option, the value of key is still used as the value of the associated long option (e.g. --foo), so you'd handle it the same as any key/short option. O/T: I collect all of my option keys in an enum as constants, so I'm not wondering what option 0x100 represents in a switch, e.g. for GNU tar, it might be something like this for its compression options: Then you'd just need to ensure that the next set of options uses 0x200, then 0x300, etc. to avoid issues with options having the same value. If you needed, you could also use 0x100, 0x180, 0x200, 0x280, etc. (e.g. 0x100 might represent a subcommand and 0x180 might be the first option for that subcommand). It's important to group the short options and non-short options separately. The implicitly assigned values in an enum depend upon the value of the last explicitly assigned value. Had I placed COMP_FILTER_NOAUTO immediately after COMP_FILTER_AUTO, the --no-auto-compress long option would have an associated short option -b, which it does not in reality. 
c-15-65	X	Run multiple recursive functions in C I'm trying to do the "boggle" game, I have a 2D matrix with letters and I have to find words. Matrix: contains this letters: { {'C','A','R','T'}, {'E', 'T', 'A', 'K'}, {'E','S','M','E'}, {'L', 'L', 'P', 'N'} }; input: this matrix output: all the words that found in matrix, from dictionary "isWord". the code should take the matrix, index, index, word, and bool matrix. every letter that I go on should marked in bool matrix as true, and then I continue with recursion untill its going out lengths. I go on 4 paths every time. I can't go back only forward. the main problem with code that is running only in one path and not continuing with the rests of paths. [calling to "checkword" few times and it seems like its stick the first command]. Anyone ideas? pretty new in C. lets go through what will happen if it runs: for every starting point you do the same. e.g. (0,0) checkword(mat, 1, 0, word, checker); -> (0,0) -> marked as checked checkword(mat, 2, 0, word, checker); -> (1,0) -> marked as checked checkword(mat, 3, 0, word, checker); -> (2,0) -> marked as checked checkword(mat, 4, 0, word, checker); -> illegal checkword(mat, 3, 1, word, checker); -> (3,0) -> marked as checked this means you are only going through one path per starting point and checking for legal words. What you want to do is go down every path from the starting point. you achieve this by unmarking the field as checked when you are finished going down all paths of recursion. So add : edit: also you will need to shorten the word once your done- I forgot about that: 
c-15-66	X	Why has the .bss segment not increased when variables are added? Recently,I learned that the .bss segment store uninitialized data. However, when I try a small program as below and use size(1) command in terminal, the .bss segment didn't change, even if I add some global variables. Do I misunderstand something? This is because the way global variables work. The problem that is being solved is that it is possible to declare a global variable, without initializing it, in several .c files and not getting a duplicate symbol error. That is, every global uninitialized declaration works like a weak declaration, that can be considered external if no other declaration contains an initialization. How it this implemented by the compiler? Easy: when compiling, instead of adding that variable in the bss segment it will be added to the COMMON segment. when linking, however, it will merge all the COMMON variables with the same name and discard anyone that is already in other section. The remaining ones will be moved to the bss of the executable. And that is why you don't see your variables in the bss of the object file, but you do in the executable file. You can check the contents of the object sections using a more modern alternative to size, such as objdump -x. And note how the variables are placed in *COM*. It is worth noting that if you declare your global variable as static you are saying that the variable belongs to that compilation unit, so the COMMON is not used and you get the behavior you expect: Initializing to 0 will get a similar result. However initializing to anything other than 0 will move that variable to data: 
c-15-67	X	A function to checking memory allocation for all dimensions of an multidimensional array in C Here is the code: It seems work correctly. Thus, when I increase numOfStrings too big, then crashControl(strArray) works correctly. Likewise when I increase sizeofString too big, then crashControl(strArray[i]) works correctly. But I wonder, am I doing right or wrong? Is there a risk or a bug for this code? The parameter of crashControl() function has one dimensional array, am I free to use this function for any N-dimensional array? Yes, you may use it for multidimensional arrays. However, it could be good to rewrite it in that case. Instead of taking a char * as argument you should take a void * to make it general. What your function is testing is basically nothing more than if the pointer is a null pointer or not. Nothing more, nothing less. I'd say it is pretty bad designed since that function gives the impression that it does more. I cannot see any reason to do a null check in a separate function. It is better to just do the check immediately after malloc, like this: If you really want to do this check in a function I would suggest naming it isNull and write it like this: but since this function always would be called within an if statement it is pretty pointless. 
c-15-68	X	CoAP protocol with Centralized Resource Directory - Cooja Implementation I am trying to implement a simple scenario in which I have a number of sensors (let's say 10) as CoAP Servers and a centralized Resource Directory (RD) using Cooja sky motes. To do so, I have used the 'er-example-server.c' to implement the 10 CoAP servers, but when it comes to the Resource Directory (RD) I got confused. Is it right to use the 'udp-sink.c' to do the job? 
c-15-69	X	Compiling device drivers to the kernel I'm trying to compile a device driver, but i get the following error, and the same one for all following header I compiler the program using the following makefile: The thing is, that by running the small .c code: with the command gcc test.c -o test everything compiles. I suspect it's something with the kernel headers, but i've downloaded all headers as specified. I'm running lubuntu 17.10 am i missing something? Thanks a lot stdio.h is user space header file not kernel space, that's why your make fails. In driver program why we are including all headers because bcz its not having main() function, Right ? when you will do make, observe your makefile that means you are compiling as a modules and your source code will be in /usr/src/linux-4(some version). for e.g not and In your driver program why are you including stdio.h because you are not going to use printf, instead printk() ? Yes in application program you can include stdio.h because you compiling using gcc compiler as a file not as a module. I hope it helps. 
c-15-70	X	How to iterate trough multiple arrays for every position in the first array iterate the second array? I want to iterate through the second array s1 for every element in the first array s and put the duplicates in the third array s2. For all I found on the net by far is how to iterate through two or more arrays in the same position arr1[i] = arr2[i], arr1[i1] = arr2[i1] and so on. This is my code, but from unknown reasons for me it does not work. Can anyone help? Thanks in advance You are losing the length of the arrays s and s1. And then you access array index out of bound invoking Undefined behavior.(in squeeze). The correct way to do it would be Few points to note: Use global variables are not needed here. You yourself made the mistake of modifying a global variable. With time in large codes using too many global variables makes it less maintainable and readable. Know how to pass parameter in a function. And also look into functions like fgets which serves the purpose of input in your case. Check these two resources. These will help you a lot how-to-debug-small-programs Definitive C books 
c-15-71	X	C: Function to print values of an array can you explain me how to print the values of an array in C? Obviously the size of the array doesn't match... somehow. Do I have to pass the size of the array as well? And I get: Maybe I have to define my own data type that keeps the size of the array? 
c-15-72	X	Function is looping infinitely - do/while functions Goal: Implement a program that prints out a double half-pyramid of a specified height, per the below. Problem: Have been messing with the code for the past 3 hours or so. I got the first line to work, but everything beyond that was just 2 parallel pillars consisting of a singular hash mark. At present, the program is indefinitely printing a hash mark. Code: Expected Result: Program creates pyramid formed by hash symbols and spaces. Actual Result: Infinitely looping print function. the end of your loop is like: so r is always ahead of p because you're incrementing both. That's your infinite loop. I get a pretty good result moving r++ after the second while inner loop, like this: so still a bit of tuning and you're here. The other issue is with do/while which execute once even if the condition is false. Replace by while loops or you're one off like above: Note that it's also cheap to autoindent your code using "Notepad++ / TextFX / TextFX edit / Reindent C++ code" A shorter implementation, for your study Regarding j<h-i-1 || j<h+2 && j>=h ? " " : "#" j<h-i-1 spaces before the first # j<h+2 && j>=h spaces between the #s ?: operator: C ? A : B translates to if C is true give A otherwise give B 
c-15-73	X	Combine merge sort and comb sort I tried to combine comb sort and merge sort in C, so that merge sort wouldn't need to divide the sequence to the smallest unit (I mean when the length of the divisions in sequence less than a value called num, the program will immediately change to comb sort, and we can save time). However, the code didn't work as I expected. (It should sort the sequence I gave to 12345678). I really don't know what is wrong with it. Please help me. Here is my code 
c-15-74	X	Fgets only returning '\n' char I'm trying to use fgets to get a line from stdin. Here's my code FENString only has one char, and that's the new line character. I've tried looking for help and haven't found anything, does anyone know why this is happening? You are having Undefined behavior by providing a unintialized pointer to fgets. Allocate memory of >=50 size to FENString and then pass it to fgets. Solution-1 Solution-2 Simply have a char array like this char FENString[50]; Then the code would be Instead of 50 here sizeof FENString although it does the same thing this is much better towards a good maintainable solution. In case you letter change it, you don't have to search and replace 50 it will be automaticlaly done due to use of sizeof.(Peter points out) FENString is pointer, where is the memory ? you may get segmentation fault, either take FENString as array or allocate memory dynamically. Try to print return value of fgets. fgets() will by default add one new line in FENString at last. Read the man page fgets() "reads in at most one less than size characters from stream and stores them into the buffer pointed to by s. Reading stops after an EOF or a newline. If a newline is read, it is stored into the buffer. 
c-15-75	X	MPI INT Arrays in C I'm creating a program that utilities MPI to determine the dotproduct of large matrices. I am having trouble determining how to send and receive the data through MPI_Send & MPI_Recv. I have an array int* vector of size nrc that I would like to send and receive I'm running a test of nrc=4, where Master is receiving vectors from 3 slaves. However the results are garbage. I found the problem, it wasn't in the send recv functions, they work as intended. The problem was in the matrix init function that populates the matricies. Originally I had these init functions inside of the if id==master and if id==slave blocks, which set the id to 0,1,2 etc. When I moved them out of the master slave blocks the id no longer was 0,1,2, it was garbage. So when initializing the matrices using the id, they became garbage as well. 
c-15-76	X	Why it is storing just two characters instead of 4? This is my code: Output: a b c d a b Process returned 0 (0x0) execution time : 3.965 s Press any key to continue. Because they are storing and two of them is the space. That's why you don't see them. Try this and you will understand To solve the issue you can do this This consumes the white space character between the two character input. From standard:- 7.21.6.2 Input white-space characters (as specified by the isspace function) are skipped, unless the specification includes a [, c, or n specifier and this A directive composed of white-space character(s) is executed by reading input up to the first non-white-space character (which remains unread), or until no more characters can be read. The directive never fails. 
c-15-77	X	Trying to copy all strings from char*[] but get segmentation fault I am trying to figure out why I am getting a segmentation fault when trying to copy the arguments from one array of strings to another but just leaving out the > This is undefined behavior. strcpy tries to access an indeterminate memory location resulting in undefined behavior. You need to allocate memory to temp[i] or simply use to copy the string to temp[i]. Also would be If you know the length of the array to be 4 then what's the use of doing all those calculation. You need to calculate it not put it like that. Example code:- Note that your comparison should be much more simpler as mentioned above. What does strdup do? Internally it allocates memory and then copies the target string using strcpy. This is not part of the standard library and implemented by POSIX. For more detail look at this answer . Your code crashes here at strcpy(temp[i],args[i]); as temp[i] has uninitialised values. You need allocate memory and store the address in temp[i] before calling strcpy You are trying to copy data (strings in this case) into the memory pointed by temp[i] - but this pointer is uninitialized and no memory is allocated. You should allocate memory: temp[i] = (char )malloc(sizeof(char)(strlen(args[i])+1)) To leave out the ">", you can just test for != 0. You will need a secondary index for the copied strings. What is the purpose of sizeof(args)/sizeof(args)? Try: 
c-15-78	X	FDTI libMPSSE I2C- Getting FT_IO_ERROR while using separate Reader & Writer Threads to read and write I am trying to communicate with I2C device using FT232HL(libMPSSE dll). Separate threads are used for reading and writing the data. First write cycle happens successfully but then it gives FT_IO_ERROR. I have followed AN_177_User_Guide_For_LibMPSSE-I2C.pdf while coding and have used semaphores for synchronization of threads. I couldn't find document on FT_IO_ERROR over the Internet. Please help me if you know about it. The I2C bus is half duplex. It is thought that it is not necessary to distinguish read thread from write thread. FT_IO_ERROR is a data transfer failure. This is described on page 13 of the document you explained. It is probably not a problem of the interface chip or the library, but whether the communication control is performed according to the command/response sequence of the device connected to the I2C bus. Please check the communication specification of the I2C device being used. In addition, make sure that the interface chip and the I2C device are correctly connected and communication is possible. 
c-15-79	X	pthread_create memory leak in valgrind I'm finishing up a threading project and I keep getting a memory leak at pthread_create in valgrind. I have tried using pthread_detach and it still gives me the leak. 
c-15-80	X	Writing a function in C to scan different number of args based upon initial character Some background to my problem: we have a board filled with blank spaces, and the user can input one of 9 different commands using the first letter of the command, followed by the required number of arguments (if any). For example, user can enter 'q' to quit, 'h' to display help information. Those two examples don't need anything after them, but for commands like "write" or "erase", the user inputs "w startRow endRow startCol endCol" where the latter 4 args are integers. I'm having trouble figuring out how to account for the fact that there are different numbers of args that I need to read. Here are the functions I have right now (note: these functions are not in main.c, they are in a separate source file, which is why command is a char*): Note: it may seem redundant right now, but I'm going to add another function isOnBoard to an else if statement in the isMoveValid function. The issue I'm having right now is that after reading the initial command character, the isValidFormat function scans through all the rest of the args that have been inputted, so I can't scan them again and assign them to variables. However, I need that function there bc it checks if I've hit a newline, and makes sure I don't scanf the newline on the next iteration of entering a command. How can I get around this so that I can read the values that are entered by the user? The best way to go about these would be to read the whole line using fgets and then parse it accordingly. Suppose you have a command like You get the whole line and check which command it is. Now you will know how many arguments should be there. You tokenize the string using strtok and then convert them to integer or whatever format you need it. Now next question how to pass it. Take two variables, one of them should be the argCount denoting the number of inputs to the command and then an array argVector which stores that many number of arguments. 
c-15-81	X	when i use libevent 2.0.21 to transmit ,The cpu is little high My code exists as part of the proxy client. I just did these things. After getting the information from the server, it will be forwarded to the corresponding client. I use iptables. Why my CPU will be at a high level? Listen callback && bufferevent config in this.And compile command is just gcc XXXX -levent. So, what should I configure or how to modify to reduce CPU? 
c-15-82	X	Split a line from a file into two strings Struggling with this one a lot. I'm trying to read a file into an array of structs with each line being split into the two string attributes of the struct. Here what I have tried. Note that I am just editing the first member of the array for testing purposes. My current implementation gets me the correct result for the data attribute but the key attribute becomes the entire line, which is what I cannot figure out. This only happens if I edit the data attribute. If I remove the section editing the data attribute, the key attribute correctly displays the first 8 characters of the line. 
c-15-83	X	Vim gg=G does not work for C programming I've installed a fresh Centos7 Linux system on my VMWare with VIM originally installed. I have altered the /etc/vimrc file by adding the following: but the ( gg=G ) doesn't seem to work with C programming language. autoindent and cindent work fine. Are there any more things I need to do to make gg=G work properly in VIM ? 
c-15-84	X	Getting an "expected identified" error when it perfectly on an IDE I'm using SSH Secure Shell to run and submit my assignment. I'm getting this error right now: In file included from a1ms4.c:15:0: contacts.h:37:4: error: expected identifier or Ã¢(Ã¢ before Ã¢--Ã¢ token In file included from contacts.c:16:0: contacts.h:37:4: error: expected identifier or Ã¢(Ã¢ before Ã¢--Ã¢ token Which is bogus because the exact same code compiled on another IDE. These are my C files that are reporting the error. I am not missing a ( or a { or a ; anywhere in my code. I went through this code for hours to find a potential mistake but couldn't spot anything and despite that, it won't let me submit my assignment. a1ms4.c contacts.c contacts.h regarding contacts.h it is missing the multiple include guard. it is missing the prototypes for the functions in contacts.c The contacts.h file should look like the following: After making the above changes to contacts.h, the code cleanly compiles The error: suggests that you most likely have an invalid character that is unrecognized by the compiler in your code that occurs in a pattern X...stuff...X (where X represents the unrecognized character). The line being complained about is: The likely cause of the problem is you have included (copied/pasted or otherwise somehow acquired) a unicode or html variation of '"' (double quote) surrounding your scanf format string. (this is a common occurrence when a #ldquo; or #rdquo; (left-double-quote or right-double-quote) is accidentally included in your source file). Most likely the result of a copy/paste of " %[^\n]" from some web page. Go double check that your double quotes are all ASCII 0x22 (decimal 34) characters. The error is not apparent in your code above (most likely because in your copy/paste to stack overflow the funky quotes were lost in translation) The only errors you need to fix in your code (not including all little nits, etc.) are: Which you remedy by including your function declarations from contacts.c in contacts.h, e.g. include the following at the end of contacts.h Your code then compiles fine -- without error or warning (well done). The only other thing that stands out is you should initialize struct Numbers temporaryNumbers in contacts.c. Not knowing if you are compiling on Win7 with VS 10 or on a later version, simply using the C89 compatible initializer as follows works: Your code then compiles fine, e.g. (the /Fecontacts just telling the compiler to create contacts.exe as the executable name) (note: you can create a bin and obj directory to place the executables and object files in to keep your source directory clean. Just add /Foobj/ /Febin/contacts after /Ox to place all object files in obj (the /Fo option) and create the contacts.exe executable in bin (the /Fe option), the /wd4820 just disables the compiler reporting the number of padding bytes added to each struct as a warning) If you do create and use the bin and obj subdirectories, then your compile string in full would be: 
c-15-85	X	How to run Apple Accelerate fft algorithms with data length, which is not power of 2? I want to port an algorithm from Android to iOS written in C. For Android I use fftw3 library. And it is able to run the algorithm on input data with any size. For example the size I see in debug is 14996. And It's pretty efficient. And when I read the docs from here: https://developer.apple.com/documentation/accelerate/1449739-vdsp_dft_zrop_createsetup?language=objc I see that there are some spesific requirements for input length. Are there any way to avoid this or to modify the input data to meet the requirements? Sorry, no, the Accelerate DFT routines only support the documented sizes. Only powers of two multiplied by 1, 3, 5, or 15 are supported. (These include sizes that have been useful previously. It is possible to support other sizes in the future if we get sufficient requests for them, but 14996 seems unusual. Usually numbers with only small prime factors are preferred, but 14996 has a factor of 151. What makes it a size that is interesting to take a DFT for?) As for modifying your input data, some applications will pad their data with zeroes to make it a supported length. But then adjustments may need to be made, depending on the application. You can, of course, also use FFTW on iOS. 
c-15-86	X	Using Python's ctypes to call functions involving custom types I am currently trying to use Python 3.6's ctypes module to call functions from a library written in C++. Suppose I used ctypes to create a shared library object called myLibrary: The library I'm trying to make calls from uses C++ classes, and it is impossible with ctypes to make Python calls of the form myLibrary.class()->method() (see here). I am therefore first writing some intermediate C++ code which "wraps" the C++ class methods in a non-class form. For example, suppose Math is one of the classes, and Add() is one of its methods. My intermediate wrapper would look like this: I then plan on compiling this C++ into a shared library (a dylib file) on which I can make calls in Python using ctypes. For example: That's the plan. Unfortunately, many methods in the library have exotic argument and value types. Some are simply variant type names created with the typedef keyword, but others are exotic structs. Further, there is a bit of enumeration in the original C++ code. My question is: How does one deal with custom argument and value types (and enumeration) when using ctypes? Looking at the ctypes documentation, I know that you must specify restypes and argtypes for the methods you're trying to call, but how to do this when the original C++ functions involve exotic types and structs? I thought the ctypes documentation might shed light on this, in section 15.17.1.6. ("Calling functions with your own custom data types"), but it just talks about the reverse scenario where you want to pass your own object types into the C++ functions. Similar questions that were helpful, but not totally: How to use C++ classes with ctypes? Obtaining address of custom data-type in C from Python using ctypes Note that the ctypes is designed to call C code, not C++. Since you're already writing wrappers, you only need to change one thing - specify that these wrapper functions have C linkage: As for the structures and so on, you should define a proper C language interface for those. It will not be that difficult to come up with the ctypes wrapper for that. 
c-15-87	X	How do recursive struct-defined types work in C? I'm trying to define a linked list type from a structure in C. It would be easy for me to do this as a struct, but structs appear not to work with the sizeof() method, which is inconvenient for my purposes; though I could figure out the size of my linked list struct manually, I'd rather avoid a "magic number" situation. That being said, I'm unaware how to get this to work properly. The code that would ideally work would be: However, as linked_list is still undeclared by the time the linked_list* variable needs to be declared, this doesn't work. So, what's the actual way of dealing with this? I'm imagining I have to somehow declare the linked_list type in advance, but Googling "c type declaration" doesn't really get me anywhere. My extremely limited and sketchy experience with C++ hints to me that a header file might be useful in this situation, but I'm not exactly sure how. 
c-15-88	X	Issue with taking out a segment of an character array in C I have a source.txt file here: https://palomar.blackboard.com/bbcswebdav/pid-1168887-dt-content-rid-3710280_1/courses/2177-70219/payfile%281%29.txt And my assignment is giving me a user-made function, called strsub, which is defined here: So basically when I scan the source .txt file the strsub function is singling out particular segments and putting them into it's respective array of structure. It works fine for the most part, for example when I print out employee[2].city: https://prnt.sc/hl25n7 Nothing is wrong there. However, when I try to print out the employee[i].first variable, it clumps together a bunch of letters, more than what I told it to do, and I don't know why. Here's a picture of when I try to print out employee[2].first: https://prnt.sc/hl26gt In the readData(), I only told it to go from 0 to 6, why is it taking in more input than what I told it do rather than just the first 7 characters? Oh, and also this is my structure right here; I put it in a separate header file: We need to see the record structure of employee. If first is defined as char[7] then it does not have enough memory to hold 0-6 (which is 7 char) + null termination. Also, if initial is 1 char, your function is coping 2 char if input is 8, 9. 
c-15-89	X	Printf displays numbers/characters incorrectly in C I am creating a program that simply allows users to do multiple things in one executable program. So for right now I input information into my struct variables and when the user enters "P" into the window, they're suppose to get the information back. The problem is that when it displays the results, instead of displaying '1 or 2' it displays "-0.23455558" and other silly symbols for characters. Here is my code. C code Your problem lies here. At no point do you actually access anything in the array created in the main function (and passed in as a parameter to this function). Instead, you access a variable temp created in this function, which will have arbitrary values in the members. On top of that, since your first two members of the structure are C strings, you probably want to treat them as such rather than trying to output individual characters: i is the index within the structure array, not the character array forming the strings. You would be better off with something like (cut down for illustration only): 
c-15-90	X	Passing arguments to a casted function pointer First I read a binary file into a character array. The binary file when passed as an argument becomes the file pointer. The binary file will calculate a result based on an operand and 2 numbers, and contains a function so Calc_fptr is the same signature as calc. the contents of the file will be read into a local array that is large enough to contain the length of the file. I have a char array I will put the file into raw_bytes via where i is the number of bytes in a file. I'm trying to cast it to function pointer via but when I try to pass arguments to the casted array so that it will calculate via the file passed into raw_bytes, like so: it tells me it's not the correct type. How would I go about doing this? 
c-15-91	X	How to insert into a Linux Kernel Linked List in a sorted order? I have the following: I want to enter into this list in a sorted order, sorted in ascending order by router_id value. How can I do this? 
c-15-92	X	undefined reference to `main' collect2: error: ld returned 1 exit status I am trying to create a phonebook using sqlite, and I get compilation errors, I was able to debug a few syntax errors, but the problem I am now having is making sure that the following error is corrected. I will appreciate explaining the error and providing some solution when i compile this c code on putty using i get this error below, solution will be much appreciated.thanks The body of your function callback() has not been properly closed off. The reason GCC didn't flag an error when it encountered a function definition within the callback() function is that GCC has an extension called nested functions. 
c-15-93	X	Getting segmentation fault in linux but not in Windows I'm trying to protect a program from invalid inputs and I've made a function that is not working in Linux but, apparently, works fine in Windows. I receive a String and the program is supposed to accept only Strings that have 3 " " and the last 3 values are digits. E.g "Mike 1 1 1". The solution I came up with was If n is 3 I accept the input. I know that this solution won't be correct for an input like "Mike 1 1a 1" but for now that won't be important. I really wanted to know why this doesn't work in Linux and how can I test this in a way that will work. 
c-15-94	X	free() the reserved data with malloc Hi I have written this Program which create a list of books which is given by the User and i can't free the my_value at the end of program and get a lot of errors . This is my Code First, in you don't need n+1 pointers since you use only n. Then, this loop is unnecessary (and wrong). array[i] is to be overwritten just after. In the next loop you free what you just allocated -- array[i] cannot be used anymore from that point! Lead to undefined behavior. 
c-15-95	X	Check if an argument is a double Iá¸¿ developing a program and I need to check if one of the char arrays passed by the argv are numbers, the problem comes when I have parameters like 2_two or 2-2 , what I've tryed doesn't works cause catch the number 2 and keeps the program running when it should exit. I have tryed with atrof(), sprintf(), but didn work. The method Error is an auxiliar that exit the program with the code error and the message So what I need is the program exit when I get a parameter that is not just number. Use strtod (include <stdlib.h>) From the man If endptr is not NULL, a pointer to the character after the last character used in the conversion is stored in the location referenced by endptr. Example of use If endptr points to the trailing \0 in argv[1], that means the whole string was converted. ok is 1 meaning the conversion was done up to the end of argv[1]. 
c-15-96	X	Concatenate character to __VA_ARGS__ in a macro redefining printf I'm developing an embedded application that uses a library for interfacing with a SPI NAND memory chip. The library provided uses a print function in which I, as the applications developer, must override for my specific platform. For instance, they use the function printf_ extensively in their code. I redefine it as such, to get the print function to print over the serial interface It works fine, except that on this platform, you need to supply a carriage return ("\r") for a newline. So right now, when the library is called, the formatting is horrible. I'd like to append a "\r" to the end of whatever is supplied to the print function. Like Obviously that doesn't work. I'm really not familiar with, and have sort of a hard time understanding variadic functions in C, so this would provide me with a little learning opportunity if I could figure this out, or at least I would learn if this is not possible. I also can't just wrap the function using va_lists and vsprintfs because my platform does not support this (and I'd rather redefine it in a macro, as a performance/stylistic choice, personally). Is there a way to do this? I agree with other users that your requirement of CR coming after LF is quite strange, and I have a strong suspicion you mean for it to be CRLF, not LFCR. Regardless, I will help you with your original requirement of appending CR to the string. It is going to be incredibly difficult to perform this operation in a one-liner macro. Alternatively, you could use a nasty-looking multi-line macro: In my macro, I have not used your serial.printf function but rather made some short code that prints out the hexidecimal values of the concatenated string for proof that the logic works. Explanation Macros are required to appear as a single line to the C Preprocessor. The additions of \ at the end of each macro line escape the newline character. gcc allows for named arguments in your macro. Here, format describes the format string you would normally pass to printf, and args... is the variable argument name for "everything else" you would pass into printf. I do not reference args in this example, but you will certainly want to modify my example in your final code to include it. Your call to printf would look something like serial.printf( _new_str, args); Multi-line macros are kind of nasty in that you need to do some trickery to get them to appear as normal functions to the human programmer. The need for enclosing the macro in a do-while is nicely discussed here. The linked page is meant for C++, but it applies to C as well. If you copy my code, compile, and run it, this is the output: Here, this ASCII dump is showing us that 4 @ symbols were copied, followed by \n, \r, and finally \0. There is also a strong case for instead writing this as an inline C function. You say that your system doesn't support va_list etc. so if that is true, then a macro may be the only choice. QED. Perhaps you could just output '\r' after the call to serial.printf ? 
c-15-97	X	warning: incompatible pointer types passing 'char *' to parameter of type 'FILE *' (aka 'struct __sFILE *') I am try to execute my code but I seem to get this incompatible warning. I want this program to read the file and also store my structure type into my buf pointer. Warning Output: project.c:65:11: warning: incompatible pointer types passing 'char *' to parameter of type 'FILE *' (aka 'struct __sFILE *') [-Wincompatible-pointer-types] fscanf(buf,"%d %d %d %d %s", &addr[i]->IP1, &add... ^~~ /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/include/stdio.h:250:30: note: passing argument to parameter here int fscanf(FILE * __restrict, const char * __restrict, ...) __scanf... ^ Like the error says: fscanf expects its first argument to be a FILE *, whereas you're passing it a character buffer. If you want to parse a character buffer using the scanf family of functions, use sscanf 
c-15-98	X	Recursive Function? fnord Function Can someone please explain what exactly this code does. it is a task for me but I can not understand it well. I tried it. When I entered a value between 0 and 9 it return the same value? In the main function I have done so : INPUT: OUTPUT: 
c-15-99	X	In Linux, how do I determine optimal value of optmem_max? We have a Linux project where we are pushing struct information over buffers. Recently, we found that the kernel parameter optmem_max was too small. I was asked to increase this by a supervisor. While I understand how to do this, I don't really understand how I know how big to make this. Further, I don't really get what optmem_max is. Here's what the kernel documentation says: "Maximum ancillary buffer size allowed per socket. Ancillary data is a sequence of struct cmsghdr structures with appended data." (I don't really understand what this means in English). I see many examples on the Internet suggesting that this should be increased for better performance. In: /etc/sysctl.conf I added this line to fix the problem: net.core.optmem_max=1020000 Once this is done, we got better performance. So to summarize my question: In English, what is optmem_max? Why is it so low by default in most Linux distros if making it bigger improves performance? How does one measure what a good size for this number to be? What are the ramifications of making this really large? Aside from /etc/sysctl.conf, where is this set in the kernel by default? I grepped the kernel, but I could find no trace of the default value of optmem_max being set to 20480 which is the default on our system. In English, what is optmem_max? optmem_max is a kernel option that affects the memory allocated to the cmsg list maintained by the kernel that contains "extra" packet information like SCM_RIGHTS or IP_TTL. Increasing this option allows the kernel to allocate more memory as needed for more control messages that need to be sent for each socket connected (including IPC sockets/pipes). Why is it so low by default in most Linux distros if making it bigger improves performance? Most distributions have normal users in mind and most normal users, even if using Linux/Unix as a server, do not have a farm of servers that have fiber channels between them or server processes that don't need GB of IPC transfer. A 20KB buffer is large enough for "most" that it minimizes the kernel memory required by default and is also easily enough configured that one can do so if they need. How does one measure what a good size for this number to be? Depends on your usage, but the Arch Wiki suggests a 64KB size for optmem_max and a 16MB size for rmem_max and wmem_max (which are the send and receive buffers). What are the ramifications of making this really large? More kernel memory that can be allocated to each socket connected, and maybe unnecessarily. Aside from /etc/sysctl.conf, where is this set in the kernel by default? I grepped the kernel, but I could find no trace of the default value of optmem_max being set to 20480 which is the default on our system. I'm not a Linux kernel source aficionado, but it looks like it could be in net/core/sock.c:318. Hope that can help. 
c-15-100	X	Can numerical values be extracted from an app binary? I've written a static C library that encrypts messages using an algorithm I wrote. The encryption is based on four unsigned 32-bit integer values (a seed, length value, offset, and stride), of which all four are required to decrypt the message. Is storing these 4 uint32 values in code secure, or is it possible these values could be extracted from the binary? e.g. If I have this in an app: I know storing raw strings in code is bad because they can easily be identified by doing a hexdump of the binary, but are there similar risks for numerical values such as these? 
c-16-1	X	Decimal to binary in C language I wrote simple code in C language (without libraries), but the result is good only when you read it from right to left, how to reverse it? I want the most simplified code as it is possible. My code below: You could store the binary number in an array and then print it backwards. So you would have for example int binaryDigits[1024]; and then instead of printing you will store the number in the array with a counter. Before the loop: int i = 0; and after that instead of printf("1"); and printf("0");, binaryDigits[i++] = 1 and binaryDigits[i++] = 0 respectively. Finally you could print the number in order with a for loop: You could use recursion and print the digits as you fall off the stack. I changed number from int to unsigned int. A recursive solution using bitwise operations, for unsigned integers: The bitwise operators >>, &, etc. access the bits in the value. The bits form a binary representation of the number. >> shifts the bits to the right, where the bits are ordered from MSB (most significant bit) to LSB, like the normal way numbers are written. num & 1 returns non-zero only if the LSB (rightmost) bit is set. (AND mask with ..0001). So (num >> 1) & 1 does the same on the second-rightmost bit. So this recursive function prints the bits in MSB to LSB order. The if(num >> 1) check makes sure prefix zeroes are not printed: If after the rightshift, num is all-zeroes, it is not printed any further. The check is made outside the function call, so that print_binary(0) (initial call) will still always print a single 0. For signed integers: 
c-16-2	X	How to use write() to print unicode with wchar_t I'm having troubles understanding write() in order to print unicode caracters, unicode in the UTF-8 i'm using uses 3 bytes, so with an array of 3 char there is no problem to print them, this prints the character 'Æ¸': The question is: if wchar_t is also 3 bytes long, and write just prints the number of bytes given by argument why the following code does not work? I've tryied also to initialice wchar_t like this: wchar_t uni = 0xC6B8; and the result is the same just two unprintable characters (ï¿½ï¿½). 
c-16-3	X	C Research vowel and consonant with fork() As the title says I'm tryng to create a program in C in which 2 son process research a vowel(son2) and a consonant(son2). To perform the research i use 2 function, the first to research a vowel and the second to research a consonant. I give to the program 3 more file from command line: -1Â° is the file in which is stored a combination of vowel and consonant -2Â° is the file in which will be stored all the vowel founded -3Â° is the file in which will be stored all the consonant founded The program is compiled without error/warning but it doesn't complete the research correctly, here is an example: -first file: qwerty -second file: ey -third file: qr I use these command to compile it Thanks in advance for the help! EDIT(final) Code (now is working) simplified following all of the tips of David C. Rankin You don't initialize pid1 or pid2 to any particular value. And if pid1 is zero, you don't set pid2 to any value at all. But your first if checks the value of pid2. That can't be right. Here's one probable source of trouble: In C, < has higher precedence than =, so the order of operations is something like this: Call fork(). Evaluate fork() < 0. If fork() is negative, this evaluates to 1, otherwise to 0. Set pid1 to the value of fork() < 0. Normally, in both the parent process and in the child, fork() will return 0 or a positive number (provided that the parent was able to create a child process). So in both the parent and the child process, fork() < 0 will evaluate to 0 and pid1 will be set to 0. Since pid1 is now equal to 0, if(pid1 > 0) will have a false condition, and the block of code after it will not execute in the child or in the parent. The second fork() will never be called, not even in the parent process where it is meant to be called. Another thing to investigate is the effect of opening all the files in the parent process. Referring to information in the answers to Are file descriptors shared when fork()ing?, when one child reads a character from the input file it may cause the other child to "skip over" that character. The input received by each child would then depend on the order in which the child processes' calls to read overlapped, which could be random. You could try opening the files in the child processes instead of the parent (so the input file has to be opened twice) and see if that clears things up. 
c-16-4	X	C - I am trying to copy words from one file to another but ignoring common words such as "and", "or", "the", etc Okay I was told not to write my explanations in the middle of the code block. Fixed that! I also made some changes per you guy's advice. I managed to get what I wanted with hardcoding "hello" so I have been trying to find out how to compare a set of words from another file. I've been told I can not to use a hashtable from my instructor. So far I believe my problems comes to my nested while loop here Basically I tested to see if the looping was the issue and it was not. then I checked to see if the if statement was catching the hardcoded "hello" and it is not. Of course the file I am reading has the word hello in it. and it actually does catch it if I choose to take out the nested while loop. Any Ideas? EDIT: okay so it looks like when i go into this nested loop, the x that stored a word in the outside loop disapears? like x has nothing in it, then when it runs outside the nested loop it, x re-stores the word that was in it?? why does this happen? 
c-16-5	X	How to modify a string inside a struct in C? I am trying to modify a field inside a struct. I have no trouble doing this with other types (i.e. int, float etc.) but char * is giving me problems. I think I have to do something like: But this gives me a segmentation fault. What reason do you think I would get this problem for? Initially, I thought maybe the char *string_field was not big enough to copy to, but I changed the size of it manually to be of size 100 (more than enough) and I still get this problem. You reserve memory for your struct, which comprises a pointer to a string, but not the space for a string's content. Reserve memory for the string content and let your struct's pointer point to it; then you can copy newstring's content into that memory: Allocate memory for the structure as well as for the string. In example below there is a room for 63 characters in the string. Remember to free the allocated memory. OUTPUT: 
c-16-6	X	ODBC - Coding Prepared Statements in C++ Hi all, Plugging away at learning how to develop ODBC SQL driver and data source stuff, but I seem to have run into a bit of a snag. I'm currently working with prepared statements on the a database with the following statement: In English, find all records from TEST1 with to-be-specified name and latitudinal coordinate. I'm able to do the above with the ODBCTest app, so I know I can connect to the data source and query it with parameterized queries. Here's what I have for code for my problematic function: This should give me the same results from the test app: 3 records of 13 attributes (3 rows, 13 columns). Instead, it fails on execution. For ease of reading, I've removed all of my RetCode handling from the code, but I do have it in there to check that the statements are completed and to handle it gracefully if they fail. There must be something I'm misunderstanding here - it also shows me that the number of parameters from the statement is 0 (with the numParams variable); I theorize that this is because it should be placed after the Execute call, but I can't test that right now because I never get to that point in execution. Any ideas? Banging my head on a brick wall here; MSDN and other online sources are proving less than informative on this. Clarification on the main question: Does anybody have any idea why the Execute function is failing? ANSWER FOUND The issue was malformed SQL through misused casting. Instead of passing in a const char* string to the function, I pass in a WCHAR*-casted string instead, and inside the function I use WCHAR*. The functional code now looks like this: Where TryODBC() is a function as follows: Massive thanks to @erg for directing me towards the SQLGetDiagRec() function. You are passing a wide string but specifying SQL_C_CHAR as the parameter type, this should be SQL_C_WCHAR. 300 as your BufferLength parameter makes no sense, for the string argument pass the correct number of bytes, for param2 just pass 0 (BufferLength is ignored for non-character or binary-string data). And you really need to check the error code after every ODBC call, and if it's an error dump the diagnostics. Either that or turn on the trace connection attribute and look at the results. Answer noted in original question. 
c-16-7	X	Reading binary values in c I can read unsigned ints from a binary file but one of the values is printing out negative. Expected values: 45788331, 281302247, 461354227, 13127, 299215653, 2356985123, Values printed out: 45788331, 281302247, 461354227, 13127, 299215653, -1932982173, The 6th value is printing out as negative but I am reading a list of unsigned ints? My code below printf("%d\n", r); prints out a signed decimal integer. You want: printf("%u\n", r); Additionally, r is declared as int not unsigned int. Type of r is int. The range for the 32 bit int is -2147483648 = -(2^32)/2 through 2147483647 = (2^32)/2 -1 decimal. 2356985123 is outside the range for the signed int. When printing r by printf("%d\n", r); r will be presented as -1937982173. -1937982173 = 2356985123 - 2^32 
c-16-8	X	C - What Interfaces are in UML Component Diagrams What is exactly an interface in a Component diagram in C? I am an embedded systems tester understanding software development architecture. I have seen Component diagrams of the project I perform Black Box testing. I have seen that components are represented by blocks that joins with "sockets" and "lollipos". I know that those are interfaces, and components provide and request interfaces. I have read different articles but i do not find a practical example of it. Are they functions and variables, and the component that request such interface calls it and the provider has the definition of the function? Basically an interface is a declaration of attributes and operations someone might offer or need. A class can implement an interface which means it must implement the operations and have the attributes accessible. Now a component is something that is composed of 1..n classes and interface can be made visible outside the component. So finally a component can show a number of different interfaces which a number of its internal classes offer to the outer world. Regarding sockets and lollipops: The lollipops represent provided interfaces (classes that have implemented it). The sockets represent required interfaces. That is there must be a counterpart somewhere to connect which offers an implementation of the interface. Definition of a component according to the UML standard: A Component represents a modular part of a system that encapsulates its contents and whose manifestation is replaceable within its environment. A Component is a self-contained unit that encapsulates the state and behavior (...). A Component specifies a formal contract of the services that it provides to its clients and those that it requires from other Components or services in the system in terms of its provided and required Interfaces. A Component is a substitutable unit that can be replaced at design time or run-time by a Component that offers equivalent functionality based on compatibility of its Interfaces. (...) A component defined by its API In C a component can be a set of compilation units that define functions and global variables that are visible to other compilation units, and that may require the existence of functions or global variables in other components: the set of global variables and functions implemented by the component (and available for others) is the interface that is offered. the set of extern global variables and functions that are expected by the component to be defined elsewhere is the required interface. A component defined by a structure In C you can also develop using an object oriented style. Of course, it's not so nice and convenient as C++. But it allows to develop interchangeable components. The trick is to use a structure that defines data members or pointers to data members (state) and function pointers obeying certain signatures (behavior). In this case, the definition of the structure defines the interface provided by the component. Microsoft is for example using such an approach for its COM technology A component defined by its system interface A C component doesn't need to be a part of a larger programme and offer a source code or an object code interface. It can be itself an independent programme, that offers an interface at runtime using OS features, such as a network protocols (listening to sockets, or implementing HTTP or other network protocols), remote function calls or other IPC techniques (e.g. shared memory, mutexes, etc...). The interface is a contract As the examples above have shown, the interface is not limited to a specific language feature. An interface is a contract about what is provided and what is expected to communicate with the component. What is exactly an interface in a Component diagram in C? [...] I have read different articles but i do not find a practical example of it. [...] I believe there are cases where it could be low-level interfaces (for a C module) or something higher level, such as a REST API or communications protocol. I think the general idea is that an interface is something published, which allows implementations to be swapped in and out. Here's an example used in Craig Larman's Applying UML and Patterns book, which is concrete: The MyApp system requires two components, one for the messaging, one for the database (DB). The interface of each is standard (in this example), namely JMS and SQL respectively. In your case with C, the interfaces are probably defined in one or more .h files for each component (which could be one or more .c files, again there is some flexibility on what is a component). They likely are not as "standard" as JMS, SQL, etc., but if you're doing testing, you should be able to test on both sides of an interface. 
c-16-9	X	Trying to append to existing file in c in my own Unix Shell using >> not working Currently i'm trying to create my own unix shell and i've hit a wall while trying to append a command such as ls to an existing file, for example. ls >> myOutput I was able to do a basic redirection using > to print to an output file and figured doing >> would be quite similar, but i guess i'm wrong. Below is my code. Please let me know if you would like further details. Any help would truly be appreciated. 
c-16-10	X	Why does Horspool not work on binaries? I'm trying to make a quick and simple signature detection program in C. It should read a binary file (.exe, ELF, a library, etc...) and search for binary data (sometimes strings, sometimes bytes); I have a simple test program in C: Here is the horspool algorithm I'm using. I adapted it directly from the wikipedia pseudocode found here: https://en.wikipedia.org/wiki/Boyer%E2%80%93Moore%E2%80%93Horspool_algorithm Output is something along the lines of: Offsets: -1 ~ 2052 Notes: The same buffer and "egg" work with the naive search implementation. The horspool implementation seems to work correctly with normal strings as the buf and egg parameters. Code was using a signed char and with binary data, from time to time, would index incorrectly with a negative index. This problem also exists in the the egg pattern. Other sign issues occur when buflen < egglen Also consider opening the file in binary and: Add ()s to #define MAX(a, b) (((a) > (b)) ? (a) : (b)) 
c-16-11	X	Issue with piping data between processes in C I need to pipe from my read function to my write function. I tested using the command line ./mapstore retrieve ABCD 2>/dev/null | ./mapstore -p ./new_dir/ stream ABCD and this successfully wrote the data into a pipe and stream successfully read the data from the pipe and wrote it to the filesystem. I would like to do this in C, but I'm having issues. retrieve_data failed: Undefined error: 0 I based my code off what was in this issue Classic C. Using pipes in execvp function, stdin and stdout redirection Complete code is available here https://github.com/aleitner/libmapstore/blob/master/src/mapstore.c#L374 
c-16-12	X	xcrun Error running program with custom malloc on macOS I am writing a custom malloc() - free() - realloc() set of functions for a school project. I've written such functions and they appear to work, for example I can launch a simple program with my custom malloc and everithing works fine. My malloc library is compiled as such (gcc is symlinked to clang): Now, I tried to launch lldb with my malloc like this: with ./run.sh being: And I've got this error: What is this error about? I suppose this is a linker problem, but what this means exactly? I've searched some info around, but nothing yet. Any tip is appreciated, as I will dig it. I'm using macOS 10.12.6 and 
c-16-13	X	Comparing two strings in C in a loop I am writing a code to see whether or not the user's input is equivalent to an already stated string. The program loops until the input is the same as the string, using the strcmp function, but for some reason the program does not compare the strings and therefore the loop malfunctions. The code is below: The main problem is here: A string in C consists of a sequence of characters followed by a null byte. passcode is not large enough to hold the null byte for the string it's initialized with. So when you try to use it as a string by passing it to strcmp it reads past the end of the array. Doing so invokes undefined behavior. Similarly, input isn't big enough to hold a string big enough to compare against. You're also not initializing check, so the first time you enter the loop it's value is unknown. Another problem is the use of gets. This function is dangerous because it does not check if the string the user entered can fit into the given buffer. If is is too big, this again invokes undefined behavior. Make your arrays larger to hold the user's input as well as the target string, and use fgets instead of gets. You should also change the while loop to do..while since you need to enter the loop at least once. I see what is going on. Your input string is only three three bytes and you are reading using the unsafe gets. The gets is putting the input of ZZZ into the input variable as expected but it is putting the terminating null in the first byte of passcode. Change the size of your input buffer to 999 and things will work a lot better. The suggested code above does not recognize the input. It likely wont work and will stuck within the while loop. I would suggest to make it much easier using scanf for the input and then compare the string as you did with strcmp. If input is correct then let in and break out of the while loop. Try this: 
c-16-14	X	When there is no input, how can I avoid scanf() function? Here is my code. I want to check whether any input is given or not. If no input then how can I avoid scanf() function and back to other activities? because I can't avoid scanf(), if no input is given. 
c-16-15	X	void *reader(void *i) -> Equivalent in C ++? I'm studying Operating System and I have an exercise to do in C ++ and I'm having doubts (The book only comes back in Java), I have to implement a classic reader and writer problem using traffic lights and control variables ... And I'm studying some codes. This function is written in C, but I want to write it in C ++. How would something like this compare? void * reader (void * i). I've never seen a structure similar to this in C ++, a void pointer that has a void pointer parameter or something like that ... My English is bad, sorry. 
c-16-16	X	how to write a recursive function that would return the minimum values in a BST? I am trying to write a recursive fucntion that will return the minimum value in a binary search tree. I expect to get the minimum value in the BST Instead, I am getting the second smallest result, most of the time! I am not very good at recursive functions and I would appreciate the help! When you make recursive calls to your function, you discard the return value. So the recursion is effectively doing nothing. All you're doing is returning the value of the first node passed in. You're also not using the right exit condition. You want to stop not when the current node is NULL (because what can you do with it then?) but when the left node is NULL. Then the value you want is in that node. So change the condition to check the left node, and return the value of the recursive call: You are returning every left node value. So finally it returns the root value. You should find the leftmost node and fixed that value as the minimum one. I have used kInf for a value not present in the tree. 
c-16-17	X	Is it possible to set ISR Handler at runtime on M0+ I have a "default" resetVectors.c file for my SAMD21 ARM M0+. It has something that looks like: in it that defines where different handler stubs. For testing purposes, I want to use one of the unused peripheral IRQs. By default, the unused ones are set to NULL addresses. I have demonstrated to myself that I can modify that file and at compile time change my unused IRQ (21) to fire a handler. BUT, is it possible to do this outside of compile time? I observed that the table appears to be based at offset 0. So I tried this: But that just hangs the board. Is there a dynamic way to assign the handler at runtime? In Cortex-M it is possible to set the address of the vector table at runtime. So in order to set a specific vector, you need to locate the vector table into RAM. The simplest method in this case is to copy the vector table pointed to by exception_table to RAM, modify the specific vector you need to change in the RAM copy, then switch the vector table to the RAM copy. Note however that the Vector Table Offset Register is optional on Cortex-M0+ and may not be implemented on all devices. It is however implemented on SAMD21 (see 7.1.1 of the datasheet summary. You can place the vector table in in the RAM or if you do not want it there you can copy it to the new location in the FLASH memory changing the ISR vector. Then you can change the address of the of the vector table itself. 
c-16-18	X	Writing to a file in c, garbage value gets populated The code is supposed to append whatever data it gets in fileReceived to a.txt file but instead it gets populated with random values.(well not so random also but definitely not the correct values). Am i missing out on something? Guessing (but can't be otherwise) even if you're not showing the right part: fileReceived has to be a pointer on data, so sizeof(fileReceived) isn't 1024 but 4 or 8 depending on your architecture (since it's not possible to assign an array to another array) You're writing too few data in your loop and your file gets the first values but not the last ones. Since you know the size, fix it like this: if the data size varies, you have to get the size information from whatever function provides the pointer to you, or you'll get undefined behaviour 
c-16-19	X	makefile not updating .o file with respectively with .h file I have following make file :- and follwing files in my src dir:- objs is directory. Whenver I change ustreqsol.h file it compiles ustreqsol.c file but not in case for ui.h file As a noob in makefiles i have no idea why is this happening The reason ui.c is not being rebuilt is because you explictly said ui.h is not a dependency: For the general dependency you have set up: The dependency list only takes effect for files that you didn't explicitly set them for, such as ustreqsol.c. You need to add targets for each object file specifying the dependencies for each one. The targets can be blank, as the %.o target will fill in what to do. For example: 
c-16-20	X	C function read bad realloc multidim array I build function to read text into multidim array which has char array for every word which you can list in. But here is problem after writing more words it crashes and i cant solve it myself, i would be more than happy if someone could help me how to properly do it. Thanks 
c-16-21	X	Is memmem available on mac? Can I safely use memmem() if I want it to also run on Mac? I know it requires: Yes, memmem is available on MacOS. See the man page for details. You don't however need to #define _GNU_SOURCE. That is specific to Linux. 
c-16-22	X	Why postfixed has higher precedence than prefixed? Case 1: Here, first the value of i is assigned to j and than i is increased by 1. Case 2: Here, first i is increased by 1 and than it is assigned to j. So, If the operation of increment is done first in the prefixed form, then why postfixed has higher precedence than prefixed? This has nothing to do with precedence.(here) In pre-increment the value that is assigned is the value before the side effect takes place. For pre increment it will be the value after the side effect. Before incrementing value of i is 10. So j=10 after these 2 statements are executed. Here the value will be 11. because incremenet is done first and then it is assigned. Linux manual page of operator define as same priority for both pre/post increment. post increment rule is first assigned and then increment Pre increment rule is first increment and then assign for e.g consider below example 
c-16-23	X	How to use LLVM-C to JIT-compile the floating-point identity function So far I have written the following code: The corresponding implementation using 32-bit integers works, i.e. identity(42) will return 42. However the floating-point version above returns 0.0. Above program generates the following output: I am using LLVM-3.9 under Debian Jessie on an AMD computer. My question is: What am I doing wrong? I found a solution to the problem. Instead of using LLVMRunFunction one can use LLVMGetFunctionAddress to get the address of the function and call it directly using C (or using an FFI library). 
c-16-24	X	Xcode 9.1 Image not found: libBacktraceRecording.dylib Since updating Xcode to 9.1 from 9.0, all of my projects compile and start, but now crash and output: for all of my projects. Is anyone else experience this problem? Is there a simple solution to fixing it? I cleaned the build and deleted the derived data, but to no avail. 
c-16-25	X	Why character # is null on argv I was working with argv to store characters from the command line. And I just noted that if I input # I got a null instead of character #. Why is this happening? The code above works fine with any character, except # which returns Segmentation fault (core dumped) . The # character denotes the start of a comment to the shell, so it never gets to your program. As a result, argv only has one element, i.e. argv[0], so accessing argv[1] is reading off the end of the array. This invokes undefined behavior, which in this case manifests in a crash. In order for the shell to pass this special character to your program, you need to quote it: 
c-16-26	X	handle multiple client socket in c using select I want to handle multiple client in parallel with the c langauge using the function select and the client send a number to the server the clients who have the minumum number can be the first one to reach the server i don't know how i can correct my code so i need some help thanks !!!!!!!!!!!!!!!. server code 
c-16-27	X	Read 2 data string I have faced a problem with my program and I don't understand why. I read 2 data string and the program just skips the first read and jumps on the second one. I can't place the program here because is pretty big and I don't think anyone wants to waste time reading and understanding it.For example: And when I build and run it, it only reads the second string.Edit: So in this case if you build and run it, it only reads the second string. First thing you should elaborate what is gets_s() ? Is it your implementation of gets() or typo ? Instead of gets_s use fgets() to avoid buffering problem as mentioned in comments by @user3121023 EDIT(for visual c++) : } Because You must flush the input buffer(stdin) before using gets_s(). I hope it help's. 
c-16-28	X	c, get rid of uninitialized warning error In function my_func1() in c the 1st thing I do is call another function my_func2(), which always sets the pointer. GCC warns me that the pointer might not be set. How can I get rid of the warning? Here's some simplified code to merely demonstrate it. If the line ptr=0 is uncommented, then the warning goes away. I don't want to set the variable because it does nothing since the my_func2() sets it. The gcc warning message is warning: 'ptr' is used uninitialized in this function [-Wuninitialized] Any help would be greatly appreciated. I think what you're trying to do is this: 
c-16-29	X	How to redirect stdout to a file and then restore stdout back? Here is my code and I can't get it to work. I have added some edits to my code. You need to check the return values of your function calls. For most functions, you should check for error conditions. Doing so might have revealed the problem that if you want open() to create the requested file in the event that it does not initially exist, then you need to add the O_CREAT flag. But that's not your main problem here -- you are dealing with a buffering issue. The output from the first printf() is buffered in memory, so even though file descriptor 1 refers to your file at the time that printf() is called, the data you write do not immediately get flushed to the destination file. You then restore the original stdout file handle, so when the data are actually flushed, they go to the (restored) original stdout. Solve this by fflush()ing before switching stdout back: Note also that dup2() is cleaner and safer for duping a file descriptor onto a specific file descriptor number. You do that when you restore, but you should also do it for the initial redirection. 
c-16-30	X	Funtion and Pointer Interaction I am VERY new to C programming. I have a function which I want to reverse a string. When I read that function into main, it outputs junk. I think it might be a problem with how I am using pointers.... my code is: and the output is: Enter the string. help help Your reversed string is: 112108101104 Thanks in advance! printf("%c", str[i]); You printed the ascii values earlier. Use %c specifier to print the characters. For example, you can see that in ascii-chart Or even more easily you could have done this printf("%s",str); 
c-16-31	X	Sum of each row and column in 2D array (C) I want to get the sum of each row and column of an array and print them one by one in C. I done half of work but I can't progress any more. There it is my code: As you can see it prints just first row's sum and column's sum. I thought if I add after line, it can move second column and sum it too. But when I add the program go into infinite loop without any errors. This code is in the header but don't worry in the rest of the code there aren't any mistake. Suggested code for the task You have: Although this compiles, it is poorly-defined code, and is unnecessarily subject to failure if the global variables n and m are not set correctly. There is no need for that level of coupling, and if you do use that level of coupling, the variables r and c are superfluous. You should be using: This allows the code to be used to print any shape of matrix using VLA (variable length array) notations. The variables n and m should be unnecessary; the parameters i and j seem to be pointless too since you ignore the values passed to the function, setting both to 0 at the start of the loops. Summing the columns is simple: Summing the rows is equally straight-forward: Assembling an MCVE (Minimal, Complete, Verifiable Example): The code in the (renamed) print_sum_rows_cols() function maintains the question's variable names, though they aren't the names I'd use in my own code. (For those, see the "Analysis of another answer" section.) And the output: Note that this prints the inputs so that the outputs can be checked manually against the inputs. This is a useful technique in debugging. Deconstructing an alternative answer In an answer (revision 1), Jozeph has shown code which, it is claimed, works. When indented in an orthodox format, the code is: There are multiple problems with this code, some already identified but repeated in a marginally different form here: The size of the matrix is identified by the values in the file scope (global) variables n and m. The size of the matrix is also identified by the parameters r and c. The values in the parameters i and j are unused; they're just a peculiar way of defining two local loop variables. Assuming it is possible to assert(n == r && m == c);, the first pair of nested loops (which sum the rows) is OK. Assuming it is possible to assert(n == r && m == c && n == m): (square matrix), the second pair of nested loop (which sum the columns) is OK, but it is mostly by accident rather than design. However, if the global variables are not in sync with the parameters, then the calculations in the first pair of nested loops are incorrect because the loops use the size rxc but the function assumes the array has size mxn. Similarly, if the global variables are not in sync with the parameters, or if the matrix is not square, the calculations in the second pair of nested loops are incorrect. It doesn't even produce one 'column sum' for each column. Here is an adaptation of my original answer to include the proposed answer (shown above) with some debug (read-only) printing added. It also includes a minor variant of my original proposed function " the variables are renamed to suit my prejudices (short names for loop variables, longer names for function parameters, etc), plus the debug printing code. The code also prints row sums before column sums to match the proposed answer's sequence, and it identifies the rows starting at row 1, column 1 instead of row 0, column 0. There's also a 'bogus' variant of my answer (bogus_sum_rows_cols()) that uses the n and m variables to size the array; it produces the wrong answers when n and m are not in synchrony with r and c. There's also a 'bogus' variant of the proposed answer (bogus_sum_row_column()) which does at least sum columns correctly if the array size in r and c matches both n and m. The output from the code shown is: You can tweak when the debug is set on or off to get different amounts of output, but careful scrutiny of the results shows various discrepancies with the actual sums of rows and columns for the matrices defined in the main() program. The fact that the proposed answer gets the 'right' answer on square matrices when the globals are synchronized with the parameters shows why it is important to do thorough testing. If the code is only meant to handle square matrices, you'd not have both n and m (and you wouldn't need both r and c). But you shouldn't tie the function to the global variables are all; you should define r and c (or just one of them if the matrix must be square). This also shows why an MCVE (Minimal, Complete, Verifiable Example) is important. The values in the variables n and m are not documented in the question or the proposed answer, so it was necessary to tease out the implications of what they represent. I did in main; and in function; and its work! Thank you for your help. 
c-16-32	X	Valgrind finds a leak in my code, could anybody help me find it? I have the following code for a function. It reads a file, line per line, without knowing the size in advance. It is a learning exercise in my school. I have run the valgrind command on it and I have this output (the full log is here => valgrind log): I don't know where that could come from. Here is the function that provokes the leak: The function 'ft_strnew' just mallocs memory for a string and memsets it to 0: Could anybody help me find it? By the way, this is how I call my function in the main: I free the malloc line (ft_strnew) everytime I call the function, so I am at a loss. If you need more information to help, I'd be glap to provide it. It is my first question on stack, I hope it is clear enough. Thanks to all of you! EDIT: I simply forgot to free the line in the while loop of my main, when returning some values. Adding a couple of free solved my problem! Thanks to all of you! In your ft_strnew function you malloc a new string but you never free it. I would suggest that you free line before returning status in your get_next_line function! There is a couple of possibilities. Firstly in your while loop, if you get certain values of status you exit without freeing line_read. That will only cause one block to be lost though. Secondly, you overwrite the value of *line with this code which looks like the most likely candidate if you're allocating more memory in there. If you were changing it to a different point within that block, you'd get entirely different errors when you tried to free it. 
c-16-33	X	Pointer changes at runtime I have the following file test.c: When debugging with gdb the function lexerGetWord, I realised that after executing the line word = malloc((len + 1) * sizeof(char));, the lexer->pos pointer address changes to some number (in my case 0x23): Here lexer->pos points to this address after getting word "pop" from the string lexer->sourceText ("pop\r\npush\r\nhalt\r\n") But after malloc is executed, the pointer changes it address, resulting later in Segmentation fault. What I'm doing wrong? EDIT This only happens with Cygwin gcc. I tried MinGW and all works fine. The problem is in main: You're allocating enough space for the pointer, not what it points to. As a result, you end up writing past the end of allocated memory. This invokes undefined behavior. You need space for what lexer points to: 
c-16-34	X	fgets from stdin with unpredictable input size I'm trying to read a line from stdin but I don't know to properly handle the cases when input size is at least equal to the limit. Example code: Now, the user can do three things: Input less than 4 characters (plus newline): in this case there's nothing left in stdin and the subsequent getchar() correctly waits for user input; Input exactly 4 characters (plus newline): in this case there's a newline left in stdin and the subsequent getchar() reads it; Input more than 4 characters (plus newline): in this case there's at least another character left in stdin and the subsequent getchar() reads it, leaving at least a newline in. Cases 2 and 3 would require emptying stdin using something like while(getchar() != '\n'), whereas case 1 doesn't require any additional action. As I understand from reading answers to similar questions and c-faq, there's no standard/portable way to know whether the actual scenario is the one described in 1 or not. Did I get it well? Or there actually is a portable way to do it? Or maybe a totally different approach? The fgets function will store the newline in the buffer if there is room for it. So if the last character in the string is not a newline, you know you need to flush the buffer. If ones assumes that a null character '\0' is never read, then @dbush answer will work. If a null character is read, then strrchr(buf, '\n') does not find any '\n' that may have been read. Code could pre-set the buffer to see if a '\n' was read in the end. Yet the C standard does not specify that data past what was read in buf[] is unchanged, pre-filling the buffer with some pattern is not sufficient to detect if a null character '\0' was read. is a portable way to do it? The most portable way is to use repeated calls to fgetc() or the like instead of fgets(). maybe a totally different approach? I recommend fgetc() or the common but not C standard getline() Another alternative: Use scanf("%4[^\n]%n", buf, &n): It is very cumbersome, yet a portable way is possible. It keeps track of the number of characters read before the '\n' even if some are null characters. 
c-16-35	X	Can not set low priority in using pthread_setschedparam() for pthreads I was trying to set a low priority [ priority = 10 ], in Linux using pthread_setschedparam() However, the accepted values I get from function sched_get_priority_{min|max}() is 0-99. If I give 1, I get priority as -2. If I give 90, I get priority as -90. But I want to get priority 10. Code is given below. Is there a way to assign low priority to a thread. [ NOTE - I tried also a setpriority, but that doesn't work in my case, since I need to assign priorities from the main thread ] 
c-16-36	X	Are C compilers like gcc smart enough to bit shifts in place? Unlike assembly code, in C there is no way to bit shift a value in place. To shift the bits in variable an assignment must always be performed: Are compilers like gcc smart enough to realize that this is an in-place bit shift and compile it like this: or will the compiler put the result first in a register, then move it back into x (which would require two extra unnecessary instructions). Any good compiler with optimization turned on will handle bit shifts efficiently. Compilers will keep small objects in registers when feasible and efficient and will not store them to memory even if you write assignment statements, until they are forced to by circumstances. Additionally, it is not desirable on typical modern processors to try to shift the bits of a value in memory. Generally, memory hardware does not have any capability to manipulate stored values. To change the value of something in memory, it must be moved to the processor (loaded), changed, and moved back (stored). Whether this is done in one instruction or several is not generally an indication of how fast or efficient it is, because the processor still has to do the individual load, shift, store operations, and the performance of those is highly dependent on the processor model. Except in exceptional programming situations, you should not be worrying about performance at this level. what did you see when you tried it? why not just try it? unsigned int fun ( unsigned int x ) { return (x<<3); } Disassembly of section .text: and so on 
c-16-37	X	Inserting nodes at the end of a linked list I'm having trouble inserting a node at the end of a linked list. The logic to me and others i have asked seems fine, however the problem remains and i'm clueless to where it might be happening.I insert the first node fine, it prints correctly. When, however, i try to insert the following node, it's as if the other has been deleted and substituted by the new one.Here are the functions i'm using : the accept funtion in main, is because i'm using this for a chat program. fnode and lnode in this code are, respectively, the pointers to the first and last node of the list (head and tail). So for instance i have a connected client named jack with socket number 5, him being the first and only connected client, it would rightfully print out jack and 5. however if a sencond client, amy joins in with socket 3 it would only print out amy and 3, without the first client, and so on and so forth. Inside your while loop, you declare clinfo as a instance of struct client_info. You then pass the address of that variable to client_insert to put that variable's address in the list. When you then reach the end of the loop, that variable goes out of scope. So now you have the address of an out-of-scope variable. Subsequently using that address invokes undefined behaivor. As to why things seem to be overwritten, that's exactly what's happening. On each loop iteration, you have an instance of struct client_info which just so happens (due to undefined behavior) to have the same address as the last time through the loop. So you're passing in the same address to client_insert each time. You instead need to dynamically allocate an instance of struct client_info and add that to the list. 
c-16-38	X	How to send from JAVA String(path of file) to C? i want to send from java some paths to C. For example i have a folder that have 4 subfoldes... From java i read the length of them from the code below and it returns me 4. Now with a thread i start to call the function that connect with C So far all good. Now from MATCH(int x) class i want to call a C code and every time give the path of the Main folder each time The C code that will recieve the path will be look like that... I try with ProcessBuilder but i cant send the path every time with this way... Use jni (Java native interfaces) Make a c++ .dll file and you can easily pass information between both languages. Good example/explanation for using jni: https://www3.ntu.edu.sg/home/ehchua/programming/java/JavaNativeInterface.html As stated by Eric Fitzsimmons, you will need to use JNI to pass a String value from Java to C. The C part will need to be in a dll that is available to the Java program. Wikipedia has a JNI article Oracle has an in-depth JNI write-up Edit Concerning JNI. If you want to send a value between Java and C, there are only a few ways to do it. JNI. As stated, Java Native Interface is built for this. This seems to be the best solution. Use an external Data store. Write something to a data store (maybe a file or a database) on one side and read it on the other side (sides being Java and C). Write a stand-alone C program that writes to standard out. Launch that program from within Java. Read what was written in java. This is not a great idea. Depends on a lot of variables. I'll assume that you are building the C code and can change how things are passed, so... Easiest to hardest: Pass it in as a command line parameter (only works once per C file execution) Write/update a text file on your hard drive that the C program can watch Use TCP/IP and send messages over a pre-designated socket Build as a shared library or DLL and Use JNI to call the C functions If you were doing this professionally and this was just the beginning of a larger development effort you'd be wise to look into more professional tooling: a message bus (Apache has one called ActiveMQ) is designed to do exactly what you are trying to do (and so much more) a shared cache (Hazlecast can connect Java to C++ and nearly everything else and share data freely) A shared table in a database that both languages can access. These are much higher initial investment in time (otherwise free) but they have innumerable features that you could continue to take advantage of as your system grows. 
c-16-39	X	Segmentation fault (core dumped) in parallel computing I am trying to code an AMPI to sum a 1d array in parallel. However, I am getting a segmentation fault (core dumped). I tried to fix my function so many times but I could not find where the error is or how to fix it. When I ran your code, my numProcs came up as 1 and the program crashed with on the line because we had a zero in the denominator. Since you are getting a different error, may I suggest putting in a bunch of: statements to get an idea where it is crashing? 
c-16-40	X	Finding time taken by the code I am trying to find the time taken by memmove function in c using time.h library. However, When i execute the code, I get the value as zero. Any possible solution to find the time taken by the memmove function? As I write in my comment, memmoving 5000 bytes is far too fast to be mesurable with clock. If you do your memmove 100000 times, then it will get mesurable. This code below gives an output of 12 on my computer. But this is platform dependent, the number you get on your computer might be quite different. If you want to know the time it takes on a beagle bone or another device with a GIPO you can toggle a GPIO before and after your routine. You will have to hook up an oscilloscope or something similar that can sample voltage quickly. I don't know much about beagle bones but it seems the library libpruio allows fast gpio toggling. Also, what is your exact goal here? Compare speed on different hardware? As someone suggests, you could increase the number of loops so it becomes more easily measurable with time.h. 
c-16-41	X	Is there proper way to concatenate a base path name with a new path name? Is there a way where you can update the char arrays of a base path with an updated path? My goal is to update full_path after each loop to the base_path + whatever argument is passed to argv[] and in my directory i have two files name file1 and file2.... i.e if I ran my code and wrote ./Stat, I expected full_path to be "./statdir/file1" and then "./statdir/file2" The results I am getting however is : Debug: ./statdir/. Debug: ./statdir/... stat failed: No such file or directory You could build the full filename using snprintf like this... ...but you'll first need to ensure that full_path has the space to contain the filename so replace with You're concatenating a string onto base_path, however that array is just long enough for what you initialized with. That means you're writing past the end of the array. This invokes undefined behavior. Also note that full_path is pointing to the start of base_path. Instead, make full_path an array big enough to hold a full path. Then use strcpy to copy over the base path, then strcat to add on the current entry. 
c-16-42	X	Why crash program by access pointer? In C I tried to access a pointer but the programm crahs. With memory access error. I receive the pointer from a stack. (pop- function). As a void*-pointer. Why this behavior? UPDATE: I have tested my stack. And it works. But with for-loops it crashs. My stack implementation. I get the error always I access to the pointer. the issue is that kind of allocation: sizeof(void) is illegal but some compilers consider it legal like gcc, which in that case returns 1, which isn't enough for your int pointer. So you could fix those by passing the size of the element: call by There is an error in your stack implementation. In both initStack and grow, you do this: This is invalid, as void doesn't have a size, although some compilers will evaluate this to 1. So you aren't allocating enough space for an array of void *. As a result, you write past the end of allocated memory which invokes undefined behavior. Change the type you're getting the size of to void * in both places. 
c-16-43	X	Is this reallocation method correct My code works but my question is if this dynamic allocation is correct. It's works well and all is ok but I'm not so sure it is correct. Ideally this would be something like this. Otherwise in case of error you have a memory leak. Also this saves you from derefrencing the null pointer. Again other things include casting malloc which is not necessary. And using constructs with while(!feof(file)). Don't use it. Check the discussion posted in comment. 
c-16-44	X	Why are two getch functions used to detect special key press in C? I am writing a C program on Netbeans IDE to detect the special key press. I learnt that there is an ASCII code and scan code for every key press but, the ASCII value for special keys are 0. But in this program once we've taken the input from the keyboard for a special key using the first ch=getch(); statement, why is there another ch=getch() statement in the if(ch==0) condition. Thanks you in advance. 
c-16-45	X	I need to input 20 numbers and to output only double location try to input 20 numbers with array and to output the numbers in the double location only but somehow it's print also the 0 location... please help. Try this, start with 2 and increase by 2 every time, the you don't have to deal with 0th element and odd element. If you mean you want the numbers from array that are present at even position than you can do like this: I above code i is initialized to 2 and the increment in each iteration is 2 so it will access elements only at even position (2,4,6...). First of all there is no way that your code is printing the 0-th location of the array. That's impossible given the condition of the if statement. Secondly n- you don;t need to use macro expansion for that name. What you did wrong that your code skipped 0th element? i when 0 makes this condition false - and you never get to print it. i!=1 ? If i=1 then i%2 will be 1, so you will not even check the second conditions, the whole conditional expression will become false. So you can safely omit this logic. Is there a better way? Sure, Explanation If you consider that every time you check the modular arithmetic of 2 the elements which results to 0 remained are See the pattern? Starts with 0 and increments by 2 each time and when does it stop? Yes before reaching 20 coding it we get If you want to omit the 0-th index do initialize properly 
c-16-46	X	Allow the user to search a specific staff in system It will trigger the break point during the while line...but it won't display the results. How do i fix it? It is supposed to read the ID in and display the results. 
c-16-47	X	char to int conversion mechanism I am using array's of bytes and trying to understand better what happen during char to int conversion. Here is the code : } and the output : As my char has the value of 1111 1111b, i expected - but i was wrong - that the conversion would fill my array of 4 bytes with 0x0 0x0 0x0 0xff ( let's say bytes are BigEndian oriented but it doesn't matter here) as it seem to be the case for numeric literals like 0xff. I know that 0xff can be interpreted as 255 or -1 in decimal (unsigned or signed integer with the first bit being used for the sign), nevertheless i still don't really understand the mechanism that gives this output. EDIT : As pointed out in comments, i would like to understand the mechanism that "extends" from one byte to 4 bytes the signed char value. I don't ask why the char type is signed or unsigned on my platform but how the 3 remaining bytes are built, what are the rules behind this output. Thanks. 
c-16-48	X	the link between fcntl and sockets I have read about socket, connecting, fcntl, buffers, etc. But I don't know what the link between the sockets and the fcntl function is. I only know that sockets are used to make a connection, and fcntl is used to control open files. I don't know how fcntl is used to control files and how it is different from the fopen, fwrite, fclose functions. So could anyone help with this, because I am stuck. fcntl system call is used to perform operations on an open file descriptor - getting or setting the file descriptor flags (e.g. changing O_APPEND or O_NONBLOCK status flags). int fcntl(int fd, int cmd, ... /* arg */ ); An open socket will be referenced by a file descriptor (sockFd in this case): sockFd = socket (PF_LOCAL, SOCK_DGRAM, 0); An example - to make the socket non-blocking, use fcntl to change the status of the socket's file descriptor. * Note simplified code:* int flags = fcntl(sockFd, F_GETFL, 0); /* get socket's flags */ flags |= O_NONBLOCK; /* Add O_NONBLOCK status to socket descriptor's flags */ status = fcntl(sockFd, F_SETFL, flags); /* Apply the new flags to the socket */ fcntl() is used to control a file descriptor (not specifically a file). open() may be used to obtain a file descriptor associated with a file. Also for example socket() and pipe() calls return a file descriptor. Those file descriptors may be later used with fcntl(). So the connection is: the file descriptor obtained from a socket() call may be used as the argument to fcntl() function. File descriptors and associated functions are part of the POSIX standard. You mentioned fopen(). fopen() returns a FILE pointer. In simple words, FILE pointer is something build above file descriptor (on most *unix systems, but this is not necessary and may not be true). For example, FILE pointer may have some buffering options: written bytes are stored in a buffer and then flushed on a newline (this behavior may be modified using setvbuf()) or manually by a fflush() call. You may use fileno() to get the file descriptor associated with the FILE* pointer. And then use this file descriptor with the fcntl() call. ( FILE* pointer is not necessary associated with a file either, for example it may be associated with a memory buffer, see fmemopen() function. ) fopen(), fwrite(), fclose() are part of the C standard. 
c-16-49	X	About accessing userspace memory from kernel I'm doing kext development at XNU kernel, there is KPI function called copyin and its friends, similar to copy_from_user at Linux kernel So I'm using copyin at most time, it's more secure processing data at kernelspace rather than relatively volatile userspace, but sometime i need process a quite large amount of memory(eg 2MB) from userspace, and i only need to read, could that be a excuse for directly access userspace memory ? (could that cause unexpected problem?) The data from userspace has entries, so i only need read at least each time, besides I don't need to do any write on this memory neither from userspace process, I list three ways that just i could think about, hope someone could give me advice, i am really appreciate that! Alloc enough size pageable memory (IOMallocPageable) at kernel space, and calling copyin to copy the whole data from userspace Alloc also alloc pageable memory, and size is enough for one entry, use copyin to read and process then read again to same memory Use stac disable smap, directly read from userspace First way, if i don't do writing, could that be mapping to same physical map, so doesn't need waster memory? Which way is more efficiency? If you have the userspace address you can remap it to kernel - use IOMemoryDescriptor::withAddressRange with the relevant task (process task) and map it to kernel with IOMemoryDescriptor::createMappingInTask. Make sure the permissions are correct. Just a friendly tip - the stac/clac instructions are overwritten by the context switch code handler and you will have to make sure it's not being called during your copying phase. Done it - not very fun. 
c-16-50	X	Motor PI regulator structure code I am actually working on a robot project base on freeRTOS. I faced some problems with PI controller which controls robot's wheels speed. The prblem is that when the error reaches 0.0 instead of being steady is starts oscillating . It is not clear how you are using FreeRTOS in this solution - there are no FreeRTOS calls in the fragment, and the non-RTOS HAL_delay() and the terminal output in the time critical control loop will not help - you can output only 57 characters in 5ms - you do not have time to output text. Your error signal is calculated incorrectly the encoder provided relative position not speed; you have to calculate speed from change of position over time. You should dedicate a task to the control loop and use RTOS timing to ensure efficient and accurate scheduling. The task should run at sufficiently high priority relative to other tasks to ensure jitter free timing. The following should be regarded as pseudo-code; I am not familiar with the FreeRTOS API, so the OS calls are not real, and I have not dealt with instantiating the task itself and and have not dealt with scaling and other subtleties for which you have not provided sufficient information - it is the suggested controller structure that you should take from this - not the actual code verbatim: This does not on its own of course solve the oscillation, but is at least a controller structure capable of control given appropriate coefficients. To tune the loop set Ki = 0 and increase Kp until the motor moves as fast as possible but without oscillation. This will not get you to the target speed because on target the error will be zero, so Kp alone cannot work. Then start to increase Ki until the target speed is met. With even a small Ki the target speed will eventually be met but the dynamic response will be laggy. Too much and you will get overshoot or oscillation. Depending on the dynamic response of the motor you may need other tweaks such as integral limiting or dead-band compensation. You may even benefit from a differential term, but for simple speed controllers this is generally unnecessary and often hard to tune. If you need to output debug data, have the loop write debug data to shared variables (in motor_ctrl_data for example if using the structure suggested above) and print them asynchronously from a lower priority task at a rate that the terminal output can sustain. The article "PID Without a PhD" by Tim Wescott may be a useful read. 
c-16-51	X	undefined references when using fftw3.3.6 with threads and float enabled I installed fftw3.3.6 on my Ubuntu 16.04 to test the performance of using this library with thread and float enabled. Step 1 : Installed the library with thread and float and SIMD instructions enabled:` Step 2 : I wrote this code (basing on the manual and tutorial) to compute an fft of 1024 points using 4 threads (complex to complex): And then, I compiled this program with this makefile. Compilation errors : After compilation I've got these errors: Is there something missing, or something wrong that I have did during installation and compilation? Read the fine manual. From the sincos() man page: Link with -lm. Using -lm in the compile phase of your program is useless: -lm needs to be in the link stage: 
c-16-52	X	Why i can't take address of variable? guys! Why i can't take address of "t" - variable ? error: cannot take the address of an rvalue of type 'char *' You're not actually taking the address of a variable here: What you have here is an expression which is the assignment operator, and whose value is the value assigned. This is not the same as taking the address of a variable. As was mentioned in the comments, a variable is an lvalue, while an expression involving one or more operators an rvalue. You can only take the address of an lvalue. To get around this, you can use the comma operator: Note that you need an extra pair of parenthesis around the comma operator expression to prevent the comma from being interpreted as a separator for function arguments. The answer by @dbush have already explained the cause of the error. I like to add that you can rewrite the code and get something much easier to understand and maintain. Like: 
c-16-53	X	How to debug project with makefile I'm a newbie both in makefiles and in projects using multiple files. What I'm working on now has one main.c and two user libraries. Here's the makefile: I'd like to be able to debug this project in Emacs (using the multiple-windows variable) however when I run gdb -i=mi 9_1 (the default option) and try to add breakpoints in main.c it doesn't let me. Specifically: I run b main.c:25 and I get What should I do? It happened because you already built your objects/executable without the -g flag you added the -g flag afterwards Adding an option in the makefile doesn't automatically trigger a recompilation. Since you have a clean target, just do and the objects are rebuilt with the -g option: executable is produced with symbols now. Happy debugging. Aside: don't pass header files to the gcc command. They're useful so make knows the dependencies (in the line above) but not when building the object from the .c file. Doing so creates useless .o files. 
c-16-54	X	Function, for returning pointer to function that returns pointer to function? Here is my problem, my code, which partially works, and the heading exactly describes what I have as code, presented below: The output of GCC compiler is the following: And the execution gives the following: What did I do wrong in this example? puts expects and argument of type const char *, but the inner puts in (puts)(puts("The Task: what did I do here wrong?!")) will return an int, which is not what outer puts is expecting. 
c-16-55	X	not able to read iio file from userspace I am trying to read following file from C code. file: /sys/bus/iio/devices/iio\:device0/in_voltage7_raw but file pointer I am getting is -1. Using cat command it is able to read the file. But I am trying to read the same from my code as follows: After the line: fd = open(file_name, O_RDONLY); value of fd is -1. How can it be solved? Most command line shells use some characters for special actions and if you're trying to use them as their actual character, you need to prefix them with a backslash to escape them. In this case, your shell needs you to escape the colon when accessing that filename. In C you don't have this issue so you can put in your code the filename as it truly is, such as: "/sys/bus/iio/devices/iio:device0/in_voltage7_raw" 
c-16-56	X	pthread: hybrid locking using mutex and spin lock Good morning. I thought that mixing up the mutex and spin lock would speed up the locking process. So, I tried to create a hybrid lock by mixing the mutex lock and the spin lock. Below is what I thought when I wrote the code. Wait for lock acquisition, spin for 1 second and wait for lock. If the lock is not acquired after 1 second, block the thread. The lock is given priority to the thread in the block state. My code is as follows, and it is not working properly. Could you possibly get an indication of the wrong part? Thank you. Have a nice day! 
c-16-57	X	logic confusion of program code to print map Here is the C program code.. It prints the map of India. Can someone explain the logic behind the code. How for loop is iterating? I can't understand whats happening in this code. Thanks 
c-16-58	X	How to send signal from a children to another children in C? How can I send a signal form passenger-children to the taxi - children? I have the following C code: How can I send a signal form passenger-children to the taxi - children? yes it's possible but question here is how will you get taxi-children pid in passenger-children process ? once you got pid of that taxi-children, for sending signal to one process from another process you can use kill() function. Use any IPC mechanism to sending pid(any int data) of one process to other process. Here is my Solution, before this go through man page of wait() & waitpid() : how above code works is explained in comments itself. usage of macro(#if 0) part in both process is for sending pid of that taxi-child process to passenger-child process. Enable the macro for observing the output. I hope it help's. 
c-16-59	X	DLL import not working in web api project(.net core) Hi I tried to import c library into c# console application as below. Later I created .net core webapi project and tried to import same dll as below. Below is my build screenshot from properties Below is my application scree shot when I do this I got error System.BadImageFormatException: 'An attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B)'. May I know what could be the issue? Any help would be greatly appreciated. Thank you. 
c-16-60	X	static const uint8_t inside function changes value I am writing a small analysis tool using libpcap that sniffs traffic on an ethernet device and performs some sort of analysis on the received packets. In order to do so, I have the obvious libpcap loop: that calls the follwoing code snipped on receival of a specific packet type. As you can see, I am using a static variable to keep track of the previous packet, in order to compare two. struct dataheader is a regular struct, just like etthdr. I would expect a constant printout like: Unfortunately, I get a different printout, which is mostly right. But around every 20th-40th packet, I see the following behavior (example): It is maybe interesting to note that this does NOT occcur, when I receive only packets of the specific type I look after (8-10 Mbit/s). Nevertheless, as soon as I use my tool in the "regular" network environment (around 100Mbit/s), I get this behavior. I checked my if statement, that filters the packet it works flawlessly (checking UDP source and destination ports). Wireshark also shows me that there is not a single packet on those ports that is not of that specific type. libpcap controls the packet data it passes in to your packet_loop. Once packet_loop returns, you have no guarantee what the pointers for the packet data point to - libpcap could throw the packet away, or it could reuse the same space for a new packet. This means if you want to compare 2 packets, you must make a copy of the 1. packet - you cannot save the pointer from one call to packet_loop and expect that pointer to be valid and point to the same packet in future calls to packet_loop. So your code could be changed to e.g. Also, make sure your verify the sizes everywhere. Just because the ethernet type says it is an IPv4 packet, doesn't mean you can trust it to contain a full IP packet. Just because the IP header says it is 20 bytes, doesn't mean you can trust it to contain a full IP packet, and so on for all the layers you attempt to decode. 
c-16-61	X	How to split string using pattern matching? I have a string like "123-#-#-abc-user-#-#-abcpassword-#-#-123456", i need to split this string with pattern "-#-#-" to create an array. I used the following code to do this But the result isn't getting for "123-#-#-abc-user-#-#-abcpassword-#-#-123456" due to the hyphen in the "abc-user". What i am expecting is that array[0] has the 123, array[1] has abc-user, array[2] as abcpassword etc. Is there any other method to split to array with the exact pattern ? strtok() here will not produce the exact output you expect. Check the details, C11, chapter Â§7.24.5.8 A sequence of calls to the strtok function breaks the string pointed to by s1 into a sequence of tokens, each of which is delimited by a character from the string pointed to by s2. [...] So, presence of any character of the whole delimiter string will cause tokenization. You need to look for strstr() which searches for a sub string inside a bigger string. Once again, from C11, chapter 7.24.5.7 The strstr function locates the first occurrence in the string pointed to by s1 of the sequence of characters (excluding the terminating null character) in the string pointed to by s2. and The strstr function returns a pointer to the located string, or a null pointer if the string is not found. [...] So you can use the function call, take the non-null returned pointer perform pointer arithmetic to reach to the next token you want. 
c-16-62	X	C: How to add a try again function to this asterisk square printing program I need a program that asks for an integer &prints out an emtpy asterisk square based on the input number. And if the input was invalid then i need it to try and ask again . THIS is what i have so far (it already can make a square based on a variable number) i just need to enhence it so it asks again if the user is too dumb to input an integer i think the teacher mentioned something of adding a switch case...? I propose this solution, in a few words I check the type of number entered by the user, if it's >0 then run,you do not have to worry that it is float because you have defined an integer type and the part not integer is automatically troncated. You can simply use an infinite loop i.e. while(1) loop with a condition to break. Let's say you want a user to input positive integer and discard negative numbers and alphabets as well, you can do that in the following manner: 
c-16-63	X	fork: child process doesn't stay in an infinite loop In the above code snippet inside if statement if we put while(1), it doesn't remains blocked and when enter key is pressed program is exited, but in case of parent if we put while(1), parent remains blocked until we give ctrl+c. Please clarify this behaviour of child. In the above code snippet inside if statement if we put while(1), it doesn't remains blocked The child process doesn't exit actually; it just becomes an orphan process because its parent exits. The orphaned chuld process will be adopted by the init process of your system. You can see it via ps command. But if you put the while(1); in the parent process it remains blocked. Basically whichever process has while(1); infinite loop, it's still running. When parent exits you get the prompt back and the child becomes orphan. But the child process is still running. In general, you need to wait(2) for the child process in the parent process to reap child processes. 
c-16-64	X	Why does strtok return the wrong number of tokens? I've been solving an Advent of Code problem in C, and I've hit something I don't understand. My C is very rusty, and I know this isn't a great example of C code. I have stripped the program down to the smallest section that demonstrates the behaviour that confuses me. This code reads a file from disk, and then splits it into tokens using the newline as the delimiter. The final printf returns the correct number of tokens, 1044. However, if I change the start of the main method to move the declaration of fill_index: ...now strtok returns 1050 tokens, which is wrong. That's the only difference between the two files. I'm running on Mac OS X Sierra, gcc --version reports that its Apple LLVM version 9.0.0 (clang-900.0.38). I'm sure I'm stomping on memory somewhere, and the first version only works by coincidence. However, I've got no idea why moving that declaration makes such a difference. Can anyone explain what's going on? You didn't use the delim properly. It would be const char delim[] = "\n"; (Null terminated char array not a single character). Earlier you were invoking undefined behavior by passing the wrong parameter. From standard Â§7.24.5.8 And some example 
c-16-65	X	How to check whether a linked list is of infinite length or not I am writing a simple linked list program. I have a simple query, is there any way to identify whether a given linked list is infinite or not.? 
c-16-66	X	Whats the difference between void function(stuct *s) vs void function(stuct s)? I have this school homework to do and I'm confused because of the functions I am asked to make. It is different from the style I do singly-linked list. I do singly linked-list like this: Where all arguments are receiving a pointer but my homework needs me to do my code like this: So I'm confused whats the difference because I'm used to receiving pointers and the homework style is different. I think the one with the receiving pointer is call by reference thats why what ever i edit locally can be edited globally... And also how is my structure implementation different from the one I have to do? Statistician is a pointer. It is typedef'ed as nodePtr which in turn is defined as node*. So passing a Statistician is really passing a node*. Whether it's smart from a usability standpoint to make a pointer look like a nonpointer is a different question. 
c-16-67	X	Does inheritance via unwinding violate strict aliasing rule? I have a struct X which inherits from struct Base. However, in my current setup, due to alignment, size of X is 24B: In order to save the memory, I'd like to unwind the Base struct, so I created struct Y which contains fields from Base (in the same order, always at the beginning of the struct), so the size of the struct is 16B: Then I'm going to use instance of struct Y in a method which expects a pointer to Base struct: Does the code above violates the strict aliasing rule, and causes undefined behavior? First, Base and Y are not compatible types as defined by the standard 6.2.7, all members must match. To access an Y through a Base* without creating a strict aliasing violation, Y needs to be "an aggregate type" (it is) that contains a Base type among its members. It does not. So it is a strict aliasing violation and furthermore, since Y and Base are not compatible, they may have different memory layouts. Which is kind of the whole point, you made them different types for that very reason :) What you can do in situations like this, is to use unions with struct members that share a common initial sequence, which is a special allowed case. Example of valid code from C11 6.5.2.3: 
c-16-68	X	How the GNU builtin function `__builtin_unreachable ` works in this code snippet? I have a code snippet in my project in which the __builtin_unreachable function has been used but I don't know why it is needed here. And I read from GNU __builtin_unreachable, it seems that the __builtin_unreachable function is used to inform the compiler this line will never be reached during the CPU run time, so that a lot of complains in compilation can be prevented in advance. But I am not understood why this feature is needed in this code snippet, it seems nothing will happen by removing the __builtin_unreachable. ATHCONTAINERS_ASSUME tells the compiler that its argument x cannot be false. This relieves the compiler from having to generate any code to accommodate the possibility that x is false. For example, when the compiler sees ATHCONTAINERS_ASSUME (ptr != 0) it can assume ptr is not null, and any code which contradicts that assumption can be optimized away, as it would be undefined behavior. For example, since getDataArray() is inline, the compiler can know at every call site that the returned pointer will never be null. So if a caller does this: The compiler can generate code which directly writes "OK" without performing the null check. That's pretty interesting, and new to me. My best understanding, from the documentation you linked to which says: If control flow reaches the point of the __builtin_unreachable(), the program is undefined. So basically the macro reaches undefined behavior if the condition is false. Thus, the compiler is assumed to be able to optimize based on the assumption that that doesn't happen, i.e. the conditions are not false. I'd be interested in comparing the result from building the code with and without those macros, to further understand what actual difference it makes. Relying on this to get some kind of optimization to happen seems kind of "brittle" to me, since it assumes a lot about the internal functioning of the compiler. As the code comment indicates, it tells stories to the optimizer. The first thing this tells, is that the compiler can assume that the return value is not a null pointer. It would probably improve the readability of the code if another gcc extension would be used instead, namely __attribute__((__returns_nonnull__)). Adding this to the interface of getDataArray would also guarantee that property, even if the the compiler decides that he can't inline it for whatever reason. But it is telling more than that. It also tells (or tries to tell) that future calls to cachePtr with the same parameter will return the same result. All these properties would probably better be guaranteed by removing the unused parent parameter (to avoid aliasing analysis) and by also adding __attribute__((__const__)) to getDataArray. 
c-16-69	X	EM_ASM is not yet supported in shared wasm module When I compile c files with emscriptenï¼Œ I used public API called emscripten.h The terminal feedback error is as follows how to fixed it? 
c-16-70	X	blinking an led using timer interrupt (atmega 128) I'm trying to blink an led without using the delay function. I came across using the timer interrupt and I tried it, and it compiles fine. But the output is fixed on PORTA = 0x01; so, I believe the ISR function is not working. Is there anything I am missing in the code? Thanks. You have a logic error in your ISR() function. Once count hits 625 the first two if/else-if clauses will be false (because 625 is neither less than, nor greater than, 625), thus the final else clause will execute and reset count to zero. The result of this is that the else-if clause that sets PORTA=0x00 will never execute. To fix, change the first if from < to <=, like so: 
c-16-71	X	Why is getchar() terminating my second getchar() read unable to understand why ? the above code will not let me enter by 2nd value. It terminates to the very end 'Hit ENTER to continue' I put a blank getchar() just above the second value line ... and viola the code suddenly worked ... it sought inputs for both values i am puzzled ... if not for, accidentally introducing the blank getchar() i was lost trying to figure out what was wrong in the above code ... this code works, but no idea why the empty getchar() line was required ??? 
c-16-72	X	How to use c library in .net Hi I have created c library in visual studio 2017. I followed following steps to create C library. Under visual cpp I selected windows console application and I created simple hello world program. Please find the below screen shot. Inside project CLibrary I got below folders after compiling Now I want to use this program in C#. I created one web api project. I want to access this CLibrary in my weapi project. Can someone tell me how can I use this c program in c#. Any help would be greatly appreciated. Thank you. Do not start with console application. You should create library in visual studio, after this you can use your cpp.dll as external. c++ code c# code for calling 
c-16-73	X	byte composition of a structure within array I was trying to check the number of bytes an array of structures contains. The output is: The array of structures takes 128 bytes, for 8 structures this makes 16 bytes per structure. Each structure however contains an int which is 4 bytes and a string array of 10 characters which should be another 10 bytes. So, totally a structure should contain 10 + 4 = 14 bytes. But it seems it has 16. Where are the other 2 bytes coming from ? With char name[13]; the output is: And with char name[17];: So, it seems that the struct size is a multiple of 4 (16 - 20 - 24) but why ? How is the size calculated or determined and what rules apply ? 
c-16-74	X	How to strtok a string that saved in an array and save it into three different arrays in c? I have a string stored in an array. AT response will be for an ex: I want to save 234, 567 and String in three different arrays. I can able to parse the characters but stuck at saving them in different arrays. The output of above code is I need to save 234 in a1[20], 567 in a2[20], String in a3[20]. Thanks in advance. 
c-16-75	X	Memory allocation? I have code that looks like the one below. It shows the current date and date after 100 days. However, I've noticed that result turns out to be same. So I thought maybe the addresses of structure or variable were same. I put "%p" of variable now, later, lnow, and tnow and the result on the very bottom shows that structure pointer of lnow and tnow are both 02B51AA0 while variable later and now have different address. Now, if I move lnow = localtime(&later) into different location, after first switch statement, then address changes and it works perfectly. Could you explain why this happens? Results: Why are you printing the address of now and later ? These are just time_t values so the address is useless. localtime returns a pointer to an internal buffer - the same each time, so you need to copy the values out of it if you want to do localtime on a second time. The standard C library has 3 functions ctime(), gmtime(), localtime() that all use the same static struct tm object. A call to anyone of them or a repeated call, will re-use that same object. The calls below return either NULL (if the conversion failed) or a pointer to the same object. The struct tm object may be over written each call. Execution of any of the functions that return a pointer to one of these object types may overwrite the information in any object of the same type pointed to by the value returned from any previous call to any of them ... C11dr Â§7.27.3 1 To retain the result, copy the object referenced by the returned pointer. Error checking is a good idea too. 
c-16-76	X	C uint8_t array memory inaccessible in function call I have a simple byte array structure: that I'm creating like this: later I'm using this in another module like this: now inside of rom_set_prg_bank() r->PRG->arr has it's allocated memory and everything looks good. I can look through the memory block and see everything. As soon as I get into byte_array_print() I get a bad access error. Can anyone see what I'm doing wrong? passes the allocated buffer defined as an element of the ByteArray struct, but byte_array_print expects a pointer to the full ByteArray struct, not the buffer. Fix it with: 
c-16-77	X	Function 'malloc' could not be resolved Every time I type malloc in eclipse it says it cannot be resolved. I have included <stdlib.h> What is the problem? I have both GCC and Cygwin on my Windows 8.1 64 bit. malloc is not recognized by eclipse 
c-16-78	X	how to see if value entered is a number and not chars? I want to know if someone entered a number and if they did the program continues but if they didn't the program terminates. If the user enters "hello" than I want program to terminate. We have a function isdigit() to identify the variable and the code goes like this: Well the right way to do it will be something like this Checking the return value of scanf will help us know whether the scanf call was successful or not. Alternatively you can use fgets() to get a line input and then parse it and check with functions like strtol etc. Checking whether the input is a correct number with only applying isdigit() on it is not a solution.(As provided in other answer). You can check by giving an input 1234 and you will see the isdigit() solution fails here though it shouldn't. To give you an idea why the isdigit solution won't work, from 7.4.1.5 standard we can see the quote The isdigit function tests for any decimal-digit character. And the decimal digit characters are 0,1...9. Explanation of the solution provided: If you look into the return value of the function it says the function returns the number of input items assigned, which can be fewer than provided for, or even zero, in the event of an early matching failure. This is what is being checked. And this works for multiple digit number also. Use isdigit() from ctype header file This function will return 0 if the entered value is non numeric character. In Your Case, For More reference Visit https://www.programiz.com/c-programming/library-function/ctype.h/isdigit To expand on what yano described, you will need to set your scanf function to a integer variable, which will count the number of successful scans. Here, you are looking for one successful scan: if integer c is not 1, then return a message saying "invalid number", etc. 
c-16-79	X	negative index in array of pointers in C When I run the above code output is 8,-12,7,23,8. But if i change the last 3 lines to output is 8,-12,27,27,7. I'm unable to understand last printf statement. How does a[-1][something] is calculated ? And according to me *(++a)[1] should print 56 instead of 27 ! Pointers and array bases are in fact addresses in virtual memory. In C, they can be calculated into new addresses. Since the compiler knows the size of memory the pointer points to (e.g. int * points to 4 Bytes), a pointer +/- 1 means the address +/- the size (e.g. 4 Bytes for int). The operator * means to get the value stored in the specified address. Another trick here is the priorities of the operators. [] is calculated before ++. If you understand what I mean above, your problem should be resolved. 
c-16-80	X	What happen when we do AND operation of 4 byte number with 2 byte number I am trying to write a piece of code to extract every single byte of data out of a 4 byte integer after little bit of searching i actually found the code with which this can be achieved , but i am just curious to know why it behaves the way output is created , below is the code Output: the result is self explanatory but why the compiler didn't converted 0xFF into 0x000000FF , since it has to perform AND operation with a 4 byte number and instead generated the output consisting of only 1 byte of data and not 4 byte of data. The output is a 4-byte number, but printf("%X") doesn't print any leading zero digits. If you do printf("foo 0x%X bar\n", 0x0000AA) you'll get foo 0xAA bar as output. The compiler did convert 0xFF to 0x000000FF. Since the value is an integer constant, 0xFF gets converted internally to a 32-bit value (assuming that your platform has a 32-bit int). Note that the values you get back, i.e. 0xDD, 0xCC, 0xBB, and 0xAA, are also ints, so they have leading zeros as well, so you actually get 0x000000DD, 0x000000CC, and so on. Leading zeros do not get printed automatically, though, so if you wish to see them, you'd need to change the format string to request leading zeros to be included: Demo. 0xFF and 0x000000FF are both exactly the same thing, by default the formatting will drop the leading 0's if you want to print them in your output, you just need to specify it: But since you are printing Bytes I'm not quite sure why you would expect the leading 0's. 
c-16-81	X	Generate your own compilation error\warning with macro-like function I want to generate a compilation error or warning depending on, for example, what is written in a string, in the following main i wanted that if the string is uninitialized that will generate a compilation error (Obviusly that does not work i want tho know the right way to do it). This one is a redundant example, but i want to do what printf does when he founds a wrong format, for example if i write this: Gcc returns the following warning: The matter is how to generate those kind of errors in compilation time. 
c-16-82	X	Catching Signals and Pausing with Character Device Drivers I'm a student new to C Programming and am not fully understanding how signal catching works, and in line with character device drivers. I'd appreciate some help but I need to state that this is for a project that is due in my first C Programming class. So I have not posted any direct code, only an example of my initial approach. My project needs to accept a signal input and set that signal to a variable to pass to my character device driver. Another program I've written will need to access that variable's value such that when read, it performs a certain outcome. I've tried to run my control program (<name> &) but it quits immediately. I double check by entering ps into my command prompt and the process is gone. Basically I need my control program to pause and wait for the signal to be received. Once received, if the signal matches it will set a variable to its value. Otherwise, if it is SIGTERM it will either end or pause(), where it will wait until another signal is received that meets another condition. Currently, when I compile and run it with & it simply runs and quits. Here is an example of my code: I'm waiting until this daemon receives a signal to put the device driver into a particular mode. I haven't entered any write() methods yet because I'm trying to take this one step at a time where I send a signal with kill() and the proper response is returned with printf(). My problem is that I can't seem to keep this in pause() mode while I'm waiting for a signal that breaks the if loop. What's worse (other than my lack of knowledge and programming) is that I can't even keep this daemon open long enough to attempt a signal send. Once I can get this to pause and receive the signal, I plan to use the system write() method to write my file_state variable to the /dev/<filename>, which will be cross-referenced in my executable. How far off am I? This is the final part that (I believe) I'm stuck on and I can't figure out how this should be approached. I've looked online and about 95% of the examples that delve into this contain methods we haven't learned yet. And if not, the examples are more simplistic where they do not include passing a value to a character device driver for use when another program is using the driver. Any help is greatly appreciated. ETA I've updated my code so now it stays open until a signal is received. Problem is that I want this to pause() and remain open until the SIGTERM signal is received, breaking the loop and ending the program. I can't seem to get the loop correct. Even entering a conditional int variable into the while() loop still is broken when any signal is received. Here is my updated code below: I'm trying to figure out a method to keep this process and signal catching loop alive until a specific signal is received. I can't figure it out for the life of me. ETA 2 Discovered my issue. I wasn't paying attention and fully understanding the signal() method. The first argument requires the exact signal you are attempting to catch. I was using SIGINT which I was understanding it to be a "class" of interrupts that you wanted to catch. And then in the signal_handler() function, you would specify which type of interrupt you were catching. But, it is actually looking to catch the exact signal you are interested in. So in my example code, I should have been using: I'm going to update with my new script as an answer and if anyone thinks it should be done differently or have any constructive criticisms please let me know. Thanks again! There are 2 parts, 1st user space where generation and catching of signals occurs. This has nothing to do with kernel driver. Your code seems okay about it. 2nd is interacting with driver when signal has been caught. For char driver have a look at this link. You can simply write a value write(fd, 1, &buf); from user space program and implement corresponding write() in char driver. So I found my issue, and it is working now. Below is my fixed code that produces the correct response back to the terminal when caught. I've added a for() loop to catch any other signals I'm not worried about didn't stop my process, only SIGTERM will. Look forward to getting critiqued and why I would never want to do my approach. 
c-16-83	X	Converting Complex c function to fortran I am converting some c functions to fortran. In my c routine , there are two structures definitions like below I converted above two type definitions to fortran as follows and it works well. My question is about initiating of above two structures. The requirement here is we should have one heap type variable and with-in that heap type variable we should have multiple heap nodes. To demonstrate this I show below c code to print heap elements In above code h is heap type variable h->n is number of heap nodes in heap variable h Here we can see accessing heap node variables as h->d[i] I show c code to create this heap variable and nodes below what we can see above is create a variable (this time heapnode)in a particular memory location and point a pointer variable to that. I want to know , how we can do this using fortran. Could you please give me some hints to do this. Pointer arithmetic is not available in standard Fortran. However there is a non-standard extension in come compilers called a 'Cray pointer' which will allow for limited pointer arithmetic. Note that Cray pointer arithmetic is not the same as C-style pointer arithmetic - incrementing a pointer to a derived type using a Cray pointer will not produce a pointer value equal to the original memory location plus the number of bytes needed to store the derived type. So statements like vspace = (void *)(h + 1); cannot be emulated exactly. If you wish your code to be portable then I don't recommend the Cray pointer. 
c-16-84	X	Invalid Read of 0 bytes inside 72 alloc block } This is the function I use to allocate a 2d array. This is how I call the function. Valgrind says: Invalid read of size 4. When I run the program it says core dumped. I use printfs in the for loop to check where it occurs the error: } If i change the previous value to 5 in the loop occurs the same error. Please help me. 
c-16-85	X	scanf prematurely terminating while loop (I think) I am making a simple program to calculate the required exam mark based on your current mark, the % total worth of the exam on the course, and your desired mark. I was having no problems with it until I wanted a simple while loop to redo the proses if the user wanted to do so. The problem that arose was that when I have the scanf to get a char response from the user, it terminates the while loop and then the program. When I comment out the scanf line and leave the code as is (an infinite while loop) it works properly looping forever but with it, it will terminate with no errors. Any thoughts? The problem that arose was that when I have the scanf to get a char response from the user, it terminates the while loop and then the program. This is happening because the scanf() is reading the stray \n (newline character) from the input buffer. To resolve this, add a space before % character in scanf() like this: This will skip the leading whitespace characters (including newline character) and read the input given by the user. The reason you face this has to do with leading whitespaces Change your scanf line to this: Here's a link for the explanation How to do scanf for single char in C Try this, which works as you expected. Original : scanf("%c", &responce); Replace: responce=fgetc(stdin); Personally I like to use fflush while under Windows or fseek under Linux environments. before this need to clear out stdin, perhaps by: because the prior call to scanf() left the newline char in the input stream. 
c-16-86	X	Valgrind not showing line numbers when compiled with cmake I am compiling my project with the command cmake .. -G "CodeBlocks - Ninja, which works fine, but when I run valgrind it does not display any lines numbers. This is the valgrind command I am using: valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes --log-file="log.txt" ./pony_gpExe. Here is an example of the output: EDIT 1 Not sure if this is helpful but here is my main CMakeLists.txt: I hope you compiled your code with -g and assume you running code in Ubuntu or Mac OS Try to run valgrind like this which does the trick in Ubuntu You need to tell cmake to produce a debug executable. Without seeing your cmake config, it's hard to tell you how to do this, but by default/convention, it should be: See this answer on Debug vs Release in CMAKE for additional infomation. So, I don't know why but randomly valgrind started to show the line numbers... I didn't really do anything different, but either way it works... 
c-16-87	X	What am I doing wrong with realloc() in c? I would like to ask, what am I doing wrong with memory management. I just want to read some int array from stdin and then print it. Starting from 2 elements, then allocating by 2 to amount I will be satisfied with. Remove the free after a successful realloc. Realloc takes care of that for you. Also, if you ever hit the error case, you will double free() your buffer. EDIT Sorry, I didn't realize you just wanted something you could just copy and paste. Let me address the design problems as well. regarding: free(tmp); This statement should not be anywhere in the posted code. It frees the memory just allocated ==== the pointer 'n' better be pointing to an array, in the caller, that was allocated and not to some fixed array ==== When passing a pointer where the called function is going to change where that pointer points, It must be passed (in the current scenario) as int **n. This also means the calling function must pass the address of the pointer, not the contents of the pointer ==== variable (and parameter) names should indicate usage or content (or better, both) the parameter names 'n' and 'l' are meaningless even in the current context 
c-16-88	X	Multiply-included header with guards Let's say I have a special header file which is designed to be included multiple times and generates different code depending on the value of some macro which must be defined before including it. For example, the following file dumb.h: You include it like: and it generates two versions of the function like: Great1. How can I make a header guard for this type of file? Without guards, if two different consumers of the header file both requested the same VALUE, you'd get an error since two identical versions of the return_* function would be generated. Now a normal header guard like: Isn't going to work since it would only effectively include the file once (the #include sequence above would generate the _100 version of the function, but not the _200 version). In principle I would like to generate the name of a macro using token pasting, to check as the guard, like: But token pasting can't be used like that (outside of macro expansion). Any there any other options to prevent this file from being included multiple times with the same VALUE, but to still allow the body to be effectively included once for each different VALUE requested? 1 Not great in the sense that this is a good pattern or anything like that, but in it that it at least appears to work. With the explanation in comment 1 and comment 2, I think the normal process is more like this. I'm going to use a type as the argument, and generate a 'minimum' function for the different types: dumb.h Consumer code This does not stop you from trying to instantiate the same function twice in a single TU (translation unit), but the compiler will object if you do that. And frankly, letting the compiler do the complaining is simpler than trying to make the C preprocessor spot that you've screwed up and rectify your mistake. If the C code will be generated by another program, then you need to ensure that the code generator keeps a track of what it has requested and ensure that it doesn't double generate the code. 
c-16-89	X	In C, I can't take the max from a messages-queue In C I fork() a father and I have 20 children. 19 of these process sends, with msgsnd(), 1 message with a random value to one "brother", the first forked. Now, I need to find the MAX of this random values and send, at each process 0 if his value isn't MAX and 1 if it is. I send messages with: But how I can take the MAX? When I receive the message this is erased. And I don't know how can I say to the rest of 18 with-no-max-value process that they don't have the MAX. EDIT: To find the MAX I usually do this But with this type of "structure" I can't do this. Help me. 
c-16-90	X	Searching for pattern string in a long sequence without arrays I wanted to ask how can I search for two patterns (such as RFMKCR and AWY) in a long input of different characters using getchar()? P.S It is not allowed to use arrays. Thanks! This is complete code for the state machine which gets input from generic function getchar1(). Patterns: AWY and RFMKCR are recognized and reported. Function getchar1() is just a wrapper for any function which gets a char from the input. getchar() or scanf can be used inside it. Char defined by the STOP terminates input processing. Difficulties for this problem come from the need to hunt for the beginning of two patterns: AWY and RFMKCR at the same time. We may be forced to switch to hunt for the different pattern in the middle of another one or to re-synchronize. Three complete solutions are given. First solution use recursion. Second solution use a simple goto constructs avoiding recursive calls. This approach works very well for this particular problem. Note: The usage of goto is typically discouraged in C. It is good programming style to use the break, continue, and return statement in preference to goto whenever possible. Since the break statement only exits from one level of the loop, a goto may be necessary for exiting a loop from within a deeply nested loop. Third solution does not use recursion or goto statements and tries to show a generic approach which can be easily adapted to different patterns. Solution 1) Solution 2) Same output is produced by both solutions. OUTPUT for INPUT: AAWY AAWWAWY RRRFMKCR A A WY AWRFMCR AAA! 3) Solution OUTPUT: 
c-16-91	X	How do I cast sockaddr pointer to sockaddr_in on Arm I have the following code copied from elsewhere to get the client port from a server socket connection. On a 64bit Linux intel arch this compiles with out issues, In Arm its complaining that 'error: cast increases required alignment of target type' which seems reasonable. I don't think I can ignore this. Is there some way to tell GCC to fix the alignment so I can read the port? 
c-16-92	X	Compatibility between structs with differently const-qualified pointers Is it allowed to use a pointer to some type as a pointer to a different type if they have otherwise-identical pointer members that differ only in the constness of the pointed-to values? Concretely, given the following two structures: Is it allowed to treat a pointer to type as a pointer to const_type and vice-versa1, for example passing a type pointer to a function expecting a const_type pointer as shown: My overall motivation here is to have a foo and const_foo struct which differ only in the constness of the objects pointed to by their contained embedded pointers. For any function that doesn't modify the pointed-to data, I would like to write a single function (that takes the const_foo variant) and have it work for both types of objects. 1Evidently in the latter case (using a const_type as a type it is not be safe if it results in an attempt to modify a pointed to value in case they were defined const, but you may assume this doesn't occur). IMO, I do not think that const matter in the way you want to use it. Also, I think you meant this: No, the behavior is not defined by the C standard. (Although it is "allowed"? in various senses, including that a C implementation may support this as an extension.) First, C 2011 6.7.3 10 says "For two qualified types to be compatible, both shall have the identically qualified version of a compatible type"¦"? So const char and char are not compatible. Then 6.7.6.1 says "For two pointer types to be compatible, both shall be identically qualified and both shall be pointers to compatible types."? So const char * and char * are not compatible. Next, 6.2.7 1 says "Moreover, two structure, union, or enumerated types declared in separate translation units are compatible if their tags and members satisfy the following requirements: "¦ If both are completed anywhere within their respective translation units, then the following additional requirements apply: there shall be a one-to-one correspondence between their members such that each pair of corresponding members are declared with compatible types;"¦"? Also, it requires "If one is declared with a tag, the other shall be declared with the same tag."? So the structures are not compatible. Finally, 6.5 7 tells us "An object shall have its stored value accessed only by an lvalue expression that has one of the following types: a type compatible with the effective type of the object, a qualified version of a type compatible with the effective type of the object,"¦"? The first of these does not apply since the structures are not compatible. The second says you can refer to a structure using a const version, which unfortunately does not apply since the const here qualifies the members, not the structure. It's not even guaranteed to work if the two structs have exactly the same member list. The code is a strict aliasing violation, accessing type1 via an lvalue of type type2. As always for strict aliasing discussions: the text of the rule is underspecificed, however it's widely accepted that x->y, which is defined as (*x).y, counts as an access of *x for the purposes of strict aliasing. The rationale for this can be seen in this code: The compiler should be free to assume that a->x and b->y cannot alias each other , even if they both happen to have type int, and regardless of their offsets within the struct. However, if you declare a union containing the two struct types, and that declaration is visible at the point of the attempted aliasing, then this bypasses the strict aliasing rule, even if the objects being aliased are not currently in a union! See this thread for good coverage of the topic, with commentary about compiler compliance. Back to your question though: since your structs don't even have the same member list, the text from 6.5.2.3/6 about common initial sequences in unions: Two structures share a common initial sequence if corresponding members have compatible types (and, for bit-fields, the same widths) for a sequence of one or more initial members. does not apply; the two types are just unrelated struct types. (The definition of "compatible type" is in 6.2.7 - changing qualifiers makes the types incompatible). And putting them in a union doesn't gain anything. Finally though, as discussed on the linked thread; what the standard says and what compilers actually do are not the same thing in this area. 
c-16-93	X	Strange segmentation fault message appears when I am debugging I am writing a memory allocator in c and everything works fine, but when I use the debugger a "segmentation fault" message appears. The program still works as it should be working, but I am afraid this error might cause problems on other systems or on other tests. I am using CodeBlocks. Here is the code: 
c-16-94	X	unknown type of struct in parameter function C when using Struct type data in parameter how to pass struct type data using parameters to another function ? i have already create a global struct but i think i've miss something so my purpose is when i already call the myFunctionInsert, the struct data same as i was input in that function. for example, when i call myFunctionShow (which is i'm not write in) the data show should be like this when i tried my code above, i got an error Unknown type name 'Stuff' (in line i call myFunctionInsert(Stuff *stuff)) any help will be appreciated thanks The type you defined is struct Stuff not Stuff. Hence: Alternatively use typedef: The problem is not only with lack of typedef. Also memory will be smashed since for(x = 0; x < 25; x++){ crosses the boundary of Also stuff[x].name = 'stuff'; will not fly. You mean "stuff". Notice that there is no String type in C language. The working version of the program where size of the passed array of structures is specified may look like this: OUTPUT: 
c-16-95	X	Can Function declaration or function prototype affects the working of the program I am new beginner in the programming world and while I was coding on Functions in C, I came to know that there are three most important parts of the functions namely- Function declaration or function prototype Function call Function definition But, while I was solving a problem on factorials of a number I came to know in my code that when I am not including function declaration or function protocol in my code above main() then still the code is running and giving the output as 120. So my question is why a function declaration or function prototype is not affecting the output of my program or is it not necessary to include function declaration or prototype above main(). If you use a function without declaring it, the compiler may provide a default declaration. This is not part of modern C, but compilers may use old standards or be unduly lax in this regard. (It is better to require explicit declarations because it helps reduce mistakes.) Any declaration of a function must match the definition of the function. The declaration gives the compiler information about how to call the function. If the declaration does not match, things can go wrong. So, yes, the declaration can affect your program; it can break it. In this case, you got lucky, the default declaration of a function happened to match your function fact. The default declaration is a function that returns int and accepts whatever arguments you pass it, subject to default argument promotions. (Roughly speaking, the default argument promotions are that integers narrower than an int are converted to int, and float values are converted to double. So, if a function returns int and accepts only int and double arguments, it can match the default declaration.) A good compiler will warn you that a declaration is missing or that a declaration is wrong. Your compiler has "switches"? or other options that tell it what sorts of warning and error messages you want. You should ask for lots of warning messages. Your compiler probably also has switches that say which version of C to use. (There have been several standard versions, most recently 1999 and 2011, and there are some non-standard variants.) You might want to request that your compiler use the C 2011 standard, until you have good reason to change that. (Unfortunately, if you are using Microsoft Visual C, I do not believe it supports C 2011.) 
c-16-96	X	Fastest way to zero out a range of positions of an array? I have an array which I wish to assign zeros to all positions in a given range (positions 10 to 24, in this case). I'm doing this: Is this the fastest way to do that? It seems that there should be a faster way without a loop, given that it's a contiguous position in memory, but I don't know what that would be (perhaps XORing that memory space with itself? If so, how would I do that?) Any ideas? You could use memset()for that: http://man7.org/linux/man-pages/man3/memset.3.html Might be the same thing under the covers though. I'd be tempted to write it with the simple loop as you have done, and leave the optimisation trickery to the compiler. If you are in any doubt that the compiler has done a good job then check the generated assembly. As a rule of thumb, programmers are more expensive than computers. So keep maintenance cheap; i.e. write clear code whenever possible. memset can do the job. See the illustrative example where 14 elements are zeroed. OUTPUT: Assembly for both cases x86-64 gcc 7.2 (no optimization!): 
c-16-97	X	Fread get different content for a .txt and a .jpeg file I'm getting only 4 bytes in my buffer when I try to read the whole file (weight a lot more than 4B). But when I'm reading a .txt file, I successfully recover the whole file content. I've searched in the fopen man, in the malloc mand and in the fread man, but I cant' understand why. Also, when I change the image extension from .jpeg to .txt, I still get 4 bytes only. Can you help me ? 
c-16-98	X	C: I would like to read a binary file with various variables and assign them to variables inside my code Thank you in advance for all answers. I am writing a program in c language that generates various variables in structures format. more specifically I have to save two structures into a binary file I have used fprintf to save the values in a binary file like such: The file saved is fine, however I am now having trouble to do read this binary file and assign it to my variables inside the program. I have tried fscanf, but it is not working. My saved file is looking like this: 0 Jonas K 18.000000 13.000000 1 No name 58.000000 0.000000 2 No name 59.000000 27.000000 3 No name 44.000000 7.000000 4 No name 36.000000 9.000000 5 No name 4.000000 29.000000 6 Victor G 33.000000 1.000000 7 No name 27.000000 0.000000 8 No name 1.000000 13.000000 9 No name 21.000000 6.000000 10 No name 8.000000 9.000000 11 No name 29.000000 20.000000 12 No name 49.000000 7.000000 13 Leticia S 31.000000 2.000000 14 No name 4.000000 5.000000 15 Camila Z 18.000000 12.000000 16 No name 47.000000 24.000000 17 No name 25.000000 15.000000 18 No name 19.000000 0.000000 19 No name 42.000000 15.000000 ENDSTARS 0 15 1.000000 6 13 2.236068 ENDPAIRS And I have to assign the data before ENDSTARS to save_stars[i].ID, save_stars[i].StarName, save_stars[i].x, save_stars[i].y , respectively and the data before ENDPAIRS to save_pairs[i].ID1, save_pairs[i].ID2, save_pairs[i].distance Any help? I can Also change my saving strategy if it will help me reading the file after. Thanks again! 
c-16-99	X	Propagating Calling Context GCC Preprocessor Macro Values to Target Function Let's say I have where foo lies in f.c and bar lies in b.c, i.e. b.h is included in f.c. I would like to modify bar to print that it was called from any function foo that invokes it, like so: I want to obtain these two pieces of information from the predefined GCC preprocessor macros __LINE__ and __FILE__. However, these obviously evaluate to the line of printf in b.c and the path to b.c respectively, if simply plugged into the printf. Can I somehow propagate the values of __LINE__ and __FILE__ from the calling context to the printf in bar, so "Called from line x in file foo.c" is printed instead? I attempted to rename bar to bar2 and then define a delegator function in the header file b.h: The idea was that the #include directive would copy the header code into the source file f.c and then substitute the path to f.c and line number respectively. However, this gave me a duplicate definition error across the different translation units. Next, I tried to add the static modifier to the header definition of bar2 to allow multiple definitions. I can then compile without errors and run the program, but still only bar.h is printed. Where am I going wrong? I'm sure there is a more elegant way to do this. Questions: Why not just use a debugger like GDB? This is kernel code. Why not do caller-side debugging? Large code base. EDIT: Why does this not work? you could create a delegate, but not a function in the .h as __FILE__ and __LINE__ would be in the .h (and the static modifier doesn't help here), but with a macro which will expand at the proper location with the correct file & line info. and bar should accept file & line parameters: The gdb method is more complex. That could work with: a gdb script that prints the current breakpoint location / traceback and continues, a collaborating bar function that triggers a breakpoint (On intel/Windows: with the Breakpoint function or asm("int $3") directive, if a flag/env. var is set telling that the debugger is enabled, but if bar is called often, this could slow down the program a lot) Note: if you want to make it activable or not, this is becoming more complex, but by setting a command line -DDEBUG flag you could make the following print the lines or not: file bar.h: file bar.c call bar2 from your main program. If DEBUG is set, bar2 is a macro that calls bar. If DEBUG isn't set, bar2 is directly your function. Note that doing that for all your functions is tedious, unless you use a script to generate those patterns. 
c-16-100	X	C: Loop pops out even when condition is still satisfied this is a demo of linklist written in C. Description: The code is about manipulating the linkist like insert, delete, display the linked list. problem: I choose 1 to insert value to node (ex: 1) then value; 2,3,4... Then I delete the head element the code exit. It's supposed to continue running as the condition of the loop is still satisfied. same problem if you intend to display the linked list. You're invoking undefined behavior by not initializing head. Consider the first time you insert an element, you call insertToHead .. then you execute newElement -> next = *head;. head was not initialized, so *head is garbage, and your first element ->next value is "initialized" to some indeterminate value. Your displayForLoop function, for instance, keeps looping until ->next is NULL. This may not be the only problem but it is certainly a problem. Whenever you traverse your linked-list looking for ->next == NULL as the marker for the end of the list, this is going to cause problems. Initialize head with intLinkedList *head = NULL; to fix this problem. 
c-17-1	X	Connecting from Java to C When connecting to C from a Java program, I am facing the following error: Failed to write core dump. core dumps have been disabled. Please note: I have limited knowledge of Java. I am trying to run like this: java getEDidValue from command line.This java code internally calls a c program. Any help please?enter image description here strong text 
c-17-2	X	Is there any purpose to `bind()` unix domain socket client processes? When using AF_UNIX (unix domain sockets), is there any application to calling bind() in a process that never calls listen()? In my systems programming lecture and lab, we are instructed to callbind() on a unix domain socket client processes. Is there any documented, undocumented, or practical application to calling bind on a client-only unix domain socket process? From my understanding bind() creates the special socket file, which is a responsibility a server process would undertake. Is this correct? Here is an example code based off of what concepts discussed in class: server.c client.c man bind gives this answer: The call to bind() is only required if you need to receive a connection with SOCK_STREAM type socket, but bind() behavior depends on the domain of the SOCKET. There is a manual page dedicated to this. Useful information: Address format A UNIX domain socket address is represented in the following structure: Three types of address are distinguished in this structure: pathname: a UNIX domain socket can be bound to a null-terminated file system pathname using bind(2). When the address of the socket is returned by getsockname(2), getpeername(2), and accept(2), its length is offsetof(struct sockaddr_un, sun_path) + strlen(sun_path) + 1, and sun_path contains the null-terminated pathname. unnamed: A stream socket that has not been bound to a pathname using bind(2) has no name. Likewise, the two sockets created by socketpair(2) are unnamed. When the address of an unnamed socket is returned by getsockname(2), getpeername(2), and accept(2), its length is sizeof(sa_family_t), and sun_path should not be inspected. abstract: an abstract socket address is distinguished by the fact that sun_path[0] is a null byte ('\0'). The socket's address in this namespace is given by the additional bytes in sun_path that are covered by the specified length of the address structure. (Null bytes in the name have no special significance.) The name has no connection with file system pathnames. When the address of an abstract socket is returned by getsockname(2), getpeername(2), and accept(2), the returned addrlen is greater than sizeof(sa_family_t) (i.e., greater than 2), and the name of the socket is contained in the first (addrlen sizeof(sa_family_t)) bytes of sun_path. The abstract socket namespace is a nonportable Linux extension. Binding to a socket with a filename creates a socket in the file system that must be deleted by the caller when it is no longer needed (using unlink(2)). The usual UNIX close-behind semantics apply; the socket can be unlinked at any time and will be finally removed from the file system when the last reference to it is closed. So: bind() is not necessary in a client. bind() in your context give a name to yours sockets "a" and "b" bind(s0, &sa0, sizeof(sa0) + sizeof("b")); and similar line in yours code are undefined behavior; it gives a wrong size to bind() that exceeds the bound of &sa0. The correct code is bind(s0, &sa0, sizeof sa0); bind() in this context (Linux, AF_UNIX) does create a special socket file; if you want to remove it, you must call unlink() or remove(). Calling bind() on a Unix-domain socket, with no intention of ever calling accept(), is a very useful way of assuring only one copy of a process is running. It's a lot more robust than relying on a process name, as binaries can be copied and run under another name. Cleanup on abnormal termination (SIGSEGV, being the target of kill -9 ...) is a problem, though. as the socket won't be removed unless your application does it in a signal handler. 
c-17-3	X	strtok - moving one place forward I have the function of myPrint that I am trying to use but I think that I am using the strtok function wrong The problem is if I send to the function to print what I want, I get after each % also the d Is there a way to move the result of the strtok call one place forward? You'd need to feed strtok a new pointer if you want to move it beyond the last match. I tried your code with the changes below: Edit: I updated with the whole code which might be easier for you to see now! 
c-17-4	X	How do you calculate when edges overlap in a MST in C? https://imgur.com/a/imqAA (sorry for my microsoft paint art skills but this is what I am trying to accomplish) So I have a minimum weight spanning tree made from certain points. I have the weight of each line (which can only be horizontal and vertical so most are L shaped). My objective is to start at the end of each part of the tree where each point has no child. Then back track while calculating the paths in which the most overlap is created. This means that the line connecting the parent to the current point, and the point to each child (max degree is 8) must be compared when each line is placed horizontal then vertical, and vertical then horizontal to find which case has the most overlap and store it in the point's structure. In the image you can see that these are the parent, child, and weight data: So when back tracking the times where overlap occurs is when the 6 attaches to the 7, 8 attaches to 7, 4 attaches to 5, and 0 attaches to 9. I have absolutely no idea how to compare the 2 options of each line. I have a structure of each point holding its coords, parent, children, its horizontal - vertical overlap and vertical - horizontal overlap. I created a matrix where I have the weight between two connecting points. What is the easiest way to do this? From what I see backtrcacking and collecting the length which is traversed multiple times in a variable that is stored in the current point that is reached after the overlap has occurred. I am coding this in C but any general algorithm would help. Main issue is, how to store the two possible paths for each edge and how to compare each edge to see if it overlaps. 
c-17-5	X	2 Dimensional Arrays.Why do I have to declare size of Columns in C I want to ask a question about 2D arrays in C .First Let me explain what I want to do. I am trying to read names into a 2D array till user enters 0 and from that array I want to randomly pick an name. Now I have couple of questions. Why do I have to declare the size of arr? I want to do it like char arr[][50] the reason that am asking this is because I took a semester of C before my current semester and I remember my tutor said something like you don't have to declare size of column as long as you declare a row size. I just found that I was missing braces after if inside for code gives no error at the moment but entering 0 from the keyboard does not executes the proccess. Also I want to read names in a function but couldn't figure out how to pass the arr[50][50] to a function So I can read names in that function. I am trying to work with ANSI C When you create something in a program, you need to know how big it is. The computer has to decide what memory it is going to store the thing in, so it has to know how much memory it needs. So, when you define an array, you must include all the sizes. So, in char arr[50][50];, both of the dimension lengths are needed. When you pass an array to a function, the function does not always need to know how big the array is. It only needs to know where the array is and where its parts are. Once you tell the function where the array is and what the parts are, the function has the information it needs (because it can calculate how big each part is from knowing what type they are). In C, we could have said, when you pass an array to a function, declare the type (so the function understands the parts the array is made of) and pass the address of the array. Instead, they did something slightly different. They decided, when you pass an array to a function, you declare the type and pass the address of the first element. (On a lot of computer processors, these two addresses are the same thing at the machine language level. But there can be differences.) So, when you pass this array arr to a function, you are supposed to pass &arr[0], which is the address of the first element of arr. (Note that arr is an array of 50 arrays of 50 char. So its elements are arrays of 50 char. In contrast, &arr[0][0] is the address of the first element of the first element of arr.) That would work fine. Everybody could pass &arr[0] or whatever the first element of their array is. But the creators of C decided to make it look simpler and to look like you were passing the array. They made a rule that if you use arr in a typical expression, the compiler would automatically convert it to &arr[0] for you. So you can write MyFunction(arr), and it is just like you wrote MyFunction(&arr[0]). Next, what does the array look like in the function declaration? Since you are passing a pointer to the first element of the array, you ought to declare that as char (*arr)[50], which is a pointer to an array of 50 char. However, again, the creators of C wanted to make this look better, so they said, in a function declaration, you can declare a parameter as char arr[50][50], and the compiler will automatically adjust it to be char (*arr)[50]. Whenever you declare a function parameter to be an array, the compiler automatically adjusts the declared type to be a pointer to an element. (This adjustment only occurs for the first dimension.) So, when you pass an array to a function, the function actually receives a pointer to the first element. Then, if it ever wants to find the element with index n, all it has to do is add the size of n elements to the address of the first element. So the function has all the information it needs to locate array elements. It does not need to know the total size. If you write arr[3][4] in the function, the function starts with the address you passed. Then it calculates where element 3 is, which is 3 times the size of an element. An element of arr is an array of 50 char, so its size is 50. So arr[3] is at the start address plus 150 bytes. Then it calculates where element 4 of that array is, which is 4 times the size of an element. An element of arr[3] is a char, so its size is 1. So arr[3][4] is at the start address plus 150 bytes plus 4 bytes. Since a function does not actually need to know the total size of the array, you are allowed to declare a function parameter with char arr[][50], leaving out the length of the first dimension. The compiler would just discard that length anyway when it adjusts the parameter to char (*)[50]. This may not be an answer - but probably help you to develop code better I just found that i was missing braces after if inside for code gives no error at the moment but entering 0 from the keyboard does not executes the procces. If i understand correctly, you want to exit the application when you type 0. If so the condition if(arr[i]== 0) would not work. When you type 0 , the it stores its ASCII value in the character array. To tell compiler you are looking for ASCII 0, you need use '0'. Now how entered value stored on to arr[50][50]. For the first iteration i=0 , and you entered abcd(hit enter) -> arr[0][0] = 'a', arr[0][1] = 'b' arr[0][2] = 'c', arr[0][3] = 'd' and arr[0][4] ='\0' for second iteration i =1 and you entered mnop(hit enter) -> arr[1][0] = 'm', arr[1][1] = 'n' arr[1][2] = 'o', arr[1][3] = 'p' and arr[1][4] ='\0' and so on To exit application when you type 0, you can probably use if(arr[i][0]== '0') condition. But this condition will not work in all cases, it works only if the first character you typed (after you hit enter which means it is stepping up to next array location) is 0 
c-17-6	X	Child process inherits a handle from its parent process but fails to write in it I want to have 2 processes write in the same file. I created a file in the first process (parent) and call the second process (child) . I have made the file inheritable and the second process inherits the handle as a command line argument. Although the handle is not equal to INVALID_HANDLE_VALUE, the second process can't do anything with the file. WriteFile() ends with Error 6(the handle is invalid). The same is for LockFile(),Unlockfile(). What is wrong with the code and how can I fix it? I want to make 2 processes work with the same file. Process 1: Process 2: P.S. The first process succeeds in writing in the file. By that time the second process has already failed. You may be creating the child process with an inheritable file handle, but you are not actually telling the child what the value of that handle is! The child is looking for that value in argv[1], but the code you have shown is not passing any value in that parameter! Even if there were, you are not retrieving the value correctly anyway. Command-line parameters are always strings, so argv[1] is a pointer to a null-terminated string, not a handle. You have to convert the handle pointer to a string representation when you put it on the command-line, and then you have to parse that string back to a pointer when processing the command-line. Try something more like this: Process 1: Process 2: That being said, having two threads, let alone two processes, share a single file handle is NOT a good idea. A given file handle only has 1 read/write position in it, so sharing that handle is going to risk the threads/processes stepping all over each other, unless you provide some kind of synchronization between them so only one can access the file at a time. Consider passing the target filename to the child process and let it open its own unique handle to the file, eg: Process 1: Process 2: Otherwise, consider having process 1 duplicate the file handle and then have process 2 inherit the duplicate instead of the original. 
c-17-7	X	scanf picking up characters after whitespace C I am writing a program that takes a line of user input and stores the data in a struct that is then used in a linked list. The data is entered in the following format: command_name full_name address account_balance command_name calls the function; full_name is a single char array with a dash instead of a space. address is a single char array with street,city,state,zip all separated by a comma account_balance is a double. I have a function to replace the '-' and ',' chars with spaces so they contain whitespace. The issue I am having is that when I read the address the state is read as the state and zip stuck together. The zip is read fine and all other input is read fine. Just the state. It is slowly driving me into madness so I have decided to ask for help. I've attached the code of the insert and print methods below along with a sample printout of a struct. Below is my code: Your struct does not allow enough space for string terminators. The state field needs a capacity of at least 3 (two characters plus a terminator), and the zip field needs a capacity of at least 6. You might or might not want larger capacity for the other fields. When you read into the existing struct, you overrun the boundaries of some of the member arrays, producing undefined behavior. The actual output suggests that the terminator of your state string is being overwritten by the first character of the zip, but that's a post hoc analysis -- you cannot assume that it would work that way in all cases. 
c-17-8	X	C - dir path last folder - gibberish at the end I want to get the last folder in a directory path. for example I have this directory path : and I want to get "files" I am using I want to export "files" to .csv file and I get gibberish at the end , something like "filesï¿½" Update: I also tried this : char * file points on "/home/workspace/projects/files/example.c" and its not working too ,"files" still written to .csv with junk in the end,but when I print basename(dirname(file)) to console it prints well "files" As was mentioned in the comments, both dirname and basename can modify the argument passed to it. What you're passing however is a string literal, which cannot be modified. Attempting to do so invokes undefined behavior, which in this particular case results to extra characters being printed. Section 6.4.5 of the C standard regarding string literals says the following: 7 It is unspecified whether these arrays are distinct provided their elements have the appropriate values. If the program attempts to modify such an array, the behavior is undefined. You need to store this string in either an array or a dynamically allocated buffer. Then you can modify it. Here, path is declared as an array, and this array is initialized with a string literal. It is not a string literal itself. 
c-17-9	X	How to convert a raw 64-byte binary to Hex or ASCII in C IÂ´m using SHA512 in C to get an Hash-Value. I did it like this: I tried to convert it to hex by: But this is not wat i wantet. How can i convert the binary which is in a unsigned char into a human readable format? Best case in a char[] for printing. The Hash for "data to hash" should be: d98f945fee6c9055592fa8f398953b3b7cf33a47cfc505667cbca1adb344ff18a4f442758810186fb480da89bc9dfa3328093db34bd9e4e4c394aec083e1773a Just print each char using %x in a printf(). Don't convert, just use the raw data: Edited to just output the hex value no commas or spaces. 
c-17-10	X	Why C libraries for Linux and Windows are different? I have tried to run the functions "strlwr", "strupr", "strcmpi", "strrev" from the string.h under Ubuntu and the gcc compiler; getting the next message: warning: implicit declaration of function "˜strupr' [-Wimplicit-function-declaration] as well (.text+0x84): undefined reference to `strupr' Once I tried over Windows, same compiler, everything works perfectly. I looked over the string.h in linux under "/usr/include" which states that was part of the GNU C library ISO C99 7.21 string handling (also tried to compile with the -std=c99, din't work) and I've learned from the header file that I could use the "strcasecmp" function, instead of the "strcmpi". Can not do the same in Windows (look under the code of the header file) since the headers and libraries files are kind embedded under the compiler code, Am I right?(1) Again searching for the string.h file in Linux, I have found nearly 50 files with the same name under different paths such as /usr/include/linux; /usr/include/x86-64-linux-gnu/bits others under the directories of Oracle VB and the Arduino directory. Why are so many files that handle the strings in C but doing in different fashion? How does the compiler knows which one to take in order to do the work? Is there any way, under the C file or during the compile process to define one of the multiple headers files?(2) Am I using out of date headers and libraries, Is there any "official" source to know if any library have come depreciated? How to know what are under the Windows headers and libraries?(3) gcc version 5.4.0 20160609 (Ubuntu 5.4.0-6ubuntu1~16.04.5) is what I am using and Windows 8. 
c-17-11	X	waitpid returns 0 when SIGINT (Crtl+c) on a children I'm working in a terminal for an university work, but I'm having troubles when looking for finished children. I have a list in which i save the background processes and this works fine, but when i bring it to the foreground and i send him a SIGINT signal with ctrl+c the waitpid returns 1 on all unfinished children but the one I kill. That's my code. I'm sure that my error is in that waitpid, but I don't know why returns a wrong value. What I want my code to do is to select when I kill a process with SIGINT and kill this one and remove this from the list but keep the unfinished commands. PD: My list has the command pid, the command and a pointer to the next node. waitpid should never return 1. It should return either -1, 0, or the pid of the child that exited. Try using the wstatus field of waitpid to debug exactly what waitpid thinks happened to the child. 
c-17-12	X	How to clear buffer after reading an input in c? This is a program to store a college/school student list, I want to know how to improve this code, however in the part where I ask the user to enter strings, on the second one I can't enter anything. And if I try to enter more than 2 students, my code doesn't print all the info of the students I entered realloc(alu, size + 2) will allocate only 2 bytes in the first run. But you need much more than that. The total size needed is number of elements in the array multiply by the size of the structure. That is sizeof(struct listaAlu) which is about 15 bytes. You don't need to increment the size by 2. Make sure to check the input at the right places. Clear the input when scanf fails. To get first name and last name, you can use fgets and strdup There are major problems with generarDimension and reallocarDimensiones. You may want to leave those out. Edit realloc does not need to be wrapped in a different function. But for fun purposes, you can do the following: my_realloc1 will work here, however nothing is gained. This is just extra lines of code. It's easier and more clear to use realloc directly and do the necessary error handling. Another method is to pass a reference: Again this will work, but it just adds more code. The function generarCadena seems okay. You could simplify as follows: And use scanf for to read 6 characters (because size of cedula is 7) To be safe, make sure the input is null terminated, and clear the buffer. Or you can use fgets as I used in the example. This will read up to 256 characters: fgets is sometimes easier because you don't need to clear the buffer. But buf includes end of line character \n, you have to remove \n in this case. 
c-17-13	X	Printing address of struct members in flexible member array of structs I have a struct which contains a flexible member array: I'm trying to use foo and bar as data structures to copy data over to uint8_t buffer[50]. Now I would have expected this to print the following (i.e. a contiguous block of memory): Instead, I'm getting the following: What am I doing wrong? Since foo.bars is an array of pointers, you need to allocate memory for the objects they point to, and then copy to that memory. Or you could declare it as an array of structures instead of pointers. and change how you access them in main() 
c-17-14	X	Import data to ragged array As an exercise, I have build a simple program that, given a text file of N lowercase words and whitespaces, populates a ragged array char *en[N]. It works without great problems, apart for one: it populates the ragged array with only the last word of the input. I cannot understand why it goes down to the end of the input file. I am unable of detecting major issues that could suggest a wrong approach. Edit: The reasoning behind my approach was that an array of *char can be initialized with this form: reasoning that I wrongly tried to translate in the error above, that @coderredoc brilliantly caught. As far as the dimensions of single words and inputs are concerned, I admit I did not put many attention in them. The exercise is centered on a different topic. In any case, thanks a lot your your valuable suggestions! You just found out the awesomeness of pointers, congratulations! Seriously, char *en[100] is an array of pointers. en[j++] = temp; assigns the pointer to the first value of temp to a pointer at en[j++]. And you do this over and over again. No surprise that you end up with an array of pointers, all of which point to the same array temp, which holds the contents of the last word. What to learn from this: a pointer merely points to some memory, and no memory copying happens when you do en[j++] = temp;. You have to allocate the memory yourself and copy temp to that new memory yourself. Your array of charcaters are all pointing to the same char array and then the content of the array at last changes to the last word. And you get only the last word. A possible solution to Then you will achieve the behavior you want your program to have. 
c-17-15	X	C - random numbers array function I'm trying to create a function that creates an array in size n with random numbers stored inside, I've been trying several option but once i use the array in main, only the first number shows up correctly. I'm using CodeBlock by the way. and this is the code that compiles: Thank's to "coderredoc" his answer was the solution i was looking for You have to enter the number followed by / and n. This is not what you want. You wanted this But here the scanf reads the number in num but then the reading continues until nonwhitespace character followed by \n is found. You don't need the \n here. Also returning return temp_arr; and using it outside it's scope is UB. The array temp_arr has automatic storage duration meaning its lifetime will end after the function ends. Accessing it outside its scope is undefined behavior which is precisely what you did. Something like this The code tries to show a possible way to achieve what you wanted. Dynamically allocated memories lifetimes extends beyond the scope of the function. That's why it works. Note the free() - which is used to free the dynamically allocated memory. The first and foremost, in your code, temp_arr is local to the function get_random_arr(). Once the function finishes, the returned address is not valid anymore! The moment you try to use the returned value, it causes undefined behavior, as the accessed memory is invalid in the context of the caller. That said, not checking the return value of scanf() also posses a problem. In case scanf() fails, you'll be end up using an unitialized value. 
c-17-16	X	realloc crashes when pointer has an offset I have below a simplified C program that demonstrates the problem. When I try to call realloc using a pointer, it works fine, but if I try to add an offset to the pointer(i.e. to start from a later element in an array), it fails. As an example, this outputs: But, from the above code, changing realloc(num->bytes,num->len); to realloc(num->bytes+1,num->len-1); changes the output/behavior to this: And then crashes. It may be that I do not understand pointers at all, but my current understanding is that they are essentially addresses at which another value is stored. In this case, why would supplying the pointer+1 not point to the value stored in the address one higher than the pointer, or in other words, what would act as the 1st element of an array pointed to by that pointer. What I'm trying to do is copy an array pointed to by num.bytes starting at the 1st element to a new address in memory, but clearly, it's failing for some reason. No, you can only realloc() on the actual pointer previously returned by malloc() or family. Otherwise, it's undefined behavior Quoting C11, chapter Â§7.22.3.5 If ptr is a null pointer, the realloc function behaves like the malloc function for the specified size. Otherwise, if ptr does not match a pointer earlier returned by a memory management function, or if the space has been deallocated by a call to the free or realloc function, the behavior is undefined. [....] So, you're not allowed to use pointer aritmatic go generate a new address, pass that to realloc() and expect to re-allocate partially, that makes no sense. 
c-17-17	X	Send multiples variables with msgsnd function I would like to send more than one variable through the mtext parameter of the msgsndfunction. I know it should be an array of char but all variable I should send are integers. Thank you! As mtext is array of character, it should have elements as characters but if you want to store integers into it, you can convert integers into string using sprintf() or user define function & then store into mtext OR you can modify the predefined structure( msgbuf) according to your requirement for temporarily solution but I will not advice you to do so because then you should same structure in all process where you are sending and receiving. you can add extra member in above structure. Is it compulsory to send integers through this structure only ? you can store integers into one array & then call msgsnd() as 2nd argument of msgsnd() is buffer & you can pass that array as 2nd argument. I hope it helps. 
c-17-18	X	Code to find max number from array I wrote the following code to find the max number from a array of numbers. Apparently there is an error in my code.It is a segmentation error. Please help me identify it. In main() you declare n but it has no value, so likely defaults to 0. You then declare and define an array A and give it size n, which as I say is likely zero. Within max() you then read in a value and assign it to n but your array A is size zero. So change main() to And remove the setting of n from max(). You have to initialize n otherwise it contains garbage value. And now after this point you run into undefined behavior. Correct code would be 
c-17-19	X	Declaring two-dimensional array locally and storing on heap with non-constant size In C when you declare e.g. int ar[x][y]; it actually is int[x*y], and you calls are compiled in needed manner. But this array is stored on stack if made inside a function. I'm looking for a way to have it stored on heap, while having the same functionality. Because when I was looking for a way to do is, the only thing I found was make int** and then each of element (type int*) would be pointer to another array. (Correct me if I'm wrong) It seems legit but the second way doesn't store the values one after another and also uses more memory. For ar[x][y] first method is just x*y*sizeof(int), but for second it's x*y*sizeof(int)+x*sizeof(int*). Summarizing is having two-dimensional array stored on heap possible, while maintaining functionality of int ar[x][y]? EDIT: I'm sorry for misleading everyone, but ar[3][4] was just en example, I'm actually looking for a way to do this with non-constant size. EDIT2: Actually I'm even looking for sth that will also work in raw C. If at least one of the sizes is known at compile time, you can use standard C++ containers: Note that myarray above is a (smart) pointer to a 2d array, so you access it as (*myarray)[i][i]. This one is not a pointer so you use myarray[i][j]. When both sizes are determined at run time, this is not so easy. std::vector<std::vector<int>> memory is organised similarly to int** so it is not suitable. You may want to create your own class that stores std::vector<int> of size M*N internally, and provide a two-argument int& operator()(size_t, size_t) for indexing. The familiar syntax with two levels of square brackets is possible but too complicated and potentially inefficient, so it's rarely worth the trouble. myarray(i,j) works perfectly so just use that. Here's one possible basic outline of the class (unfinished, unteated) templatized for convenience: It needs more code to be fully functional but this is the basis. 
c-17-20	X	C - Matrix Main and Anti Diagonals (Replace) I have a task and i need help from pros. My task is: User inputs number of rows and columns for matrix[8][8], with some prohibitions using IF. Later user enters all the elements for this matrix, using loops and outputting this matrix. Here is the code : Now i need to add one thing, i want to take diagonal and anti-diagonal of this matrix and replace all the elements there with capital X. As i don't know, what kind of matrix it will be, like it can be matrix[4][6] or matrix[7][4], so i need to do something that will work with any kind of matrix that user can enter in this program. Example of this task (In this program i can't enter less than [4][4], but for the example i'll do it): Here i need to do something like this : If user enters not square matrix, for example: Replaced diagonal and anti-diagonal with capital Xs. Please any help ? Complete code and its working on both of the examples you provided in your quesetion, just tell me if anything missing here You can do something like this: Example: 
c-17-21	X	Parsing Buffered Bytes into Integers with sscanf - C I am receiving Serial commands, and I would like to be able to parse out data from between the comas. An example, would be "SET,1,3,1" and then be able to parse out the 1,3,1 as integers. After doing some reading I tried to accomplish this with a sscanf, but when I monitor the variables, they are not being set properly. Here is my code: I have also tried this for example, but the variable is 0 You just need to parse the input string like this. This would work. (u32_t is 32 bit unsigned long). You can do it using sscanf. Because you wanted to parse from string not a stream. Also you should check the return value of sscanf to check whether it is getting the inputs right. 
c-17-22	X	Mac OS (10.13.1) task_for_pid for forked process "(os/kern) failure" Last time I'm trying to write simple genetic fuzzer (using strictly Mac OS, just for fun). My idea is something like that : -> Main program that control forked process --> forked process load binary code from disk and jump into it. -> parent ask for task (task_for_pid(mach_task_self(),childPID,&task)) -> parent try to catch traps (0xcc), checking if we had been there before, just like AFL works (of course simplifying) --> child loads some raw binary code (in my example has to be System V ABI) I get error as below : run.sh : "instrument" is present at my keychain, and Always Trust for code singing, so I think it should't be case. Info.plist Of course my code is only useful for specific case, it tries to fuzz one function which input is string and compare it with other string. server.c : Why this outputs error ? Is it case of how fork works under OSX ? What's the problem out there ? I'm not expert of how osx works underneath so maybe I missed something. Thanks for help :) ! Dominik You call pid_t pid = fork(); therefore the PID of the child process in the parent process is stored in pid variable not in the childPID. The childPID variable is initialized in the child process only according to your example code. The task_for_pid() call is using childPID - basically you are using an uninitialized memory. Besides the problem mentioned in the other answer of using uninitialized pid, it looks like you don't pass the file as input argument, what cause the child process to terminate immediately and become a zombie (since parent doesn't wait for it's pid) and you cannot perform task_for_pid to terminated process (even though it's still listed in the process table) Basically, you need to synchronize between parent and child more carefully, but as first step, In order to pinpoint the problem, I would recommend to put sleep before checking if the file is properly opened, that should resolve the error in task_for_pid. 
c-17-23	X	How can I write an array of strings into a file.txt using system calls write() and open() I want to write a predefined array of strings to a file.txt, like so: This will create testfile.txt. Expected file content: But when I tried, it gives a weird result. Actual content: haha \00aww \00hmm \00hello \00there \00aww \00hmm \00hello \00there \00testfihmm \00hello \00there \00testfile.txhello \00there \00testfile.txt\00\00there \00testfile.txt\00\00;4\00\00\00 You are assuming that all the strings are 24 characters in length. This is incorrect. You are reading outside the bounds and writing this to file. Instead use the correct length. i.e. Of course add the appropriate include file - this can be found on the manual page for strlen Just to make more clear and readable your code Here are my observation : First thing when you are using open() system call with O_CREAT flag, you should provide explicit permission, reason for this is if you observe man page of open() written by Michael Kerrisk, open() with 2 argument and open() with 3 arguments. when you are creating file and writing/appending/truncating file using open() system call you should use open() call with 3 argument . as man page says mode specifies the permissions to use in case a new file is created. This argument must be supplied when O_CREAT is specified in flags and make sure umask value is not set to 0. Refer the man pages for this "The effective permissions are modified by the process's umask in the usual way"; and if you try to open a already existing file using open() you can use open() system call with 2 arguments as man page says "if O_CREAT is not specified, then mode is ignored" So replace this with Second thing, somestr is array of char pointers, each pointer can have any length. Instead of random no of characters (24 as mentioned), if you want to make it generic, use strlen(somestr[i]). 
c-17-24	X	Python read/write/seek operations under the hood While creating a character device on a Linux system, I interacted with it using Python and its basic file operations. After experiencing several crashes, I started printing debug messages and noticed a strange behavior: it seems that Python "optimizes" file operations in a weird sense. Let's peek at an example; here's a basic code and output of an interaction: Kernel module Python Output It is clear that the basic file operations do not translate directly to the same operations on file, with the clearest examples being that seek to 0x7f123000 instead of 0x7f123456 and the read of 4096 bytes while only a read on 20 bytes was requested. This raises the following questions: Why is this a feature? What optimization does it achieve, as most of it doesn't look like a good "next-operation" prediction? Is it documented anywhere, to know what to expect when programming a read/write functionality beforehand? Besides pure interest about this area, I still wish to use Python for easier access - so is there any way to disable this optimization, and force Python to behave like a C code executing these operations? Thanks! I am not sure that's the case here but I think this has to do with the time penalty of reading a byte being the same as reading a whole sector, so why not read always whole sectors from disk (or maybe you can't even ask to read less bytes than the sector size to underlying system) Python's file objects are actually wrappers around FILE* object (in C language), so they are buffered streams. Because of buffering, Python's operations with file don't translate them into the syscalls with the same parameters, but attempt to optimize request time (both for current and future operations). Method open() accepts buffering parameter as 3d argument. Passing 0 should disable the buffering, so python will translate all file's requests directly to the underlying system: 
c-17-25	X	Cast type to va_arg return Can i cast type to va_arg return as on example? As i know va_arg can't read-return char/short int types The standard specifies that The va_arg macro expands to an expression that has the specified type and the value of the next argument in the call. (C2011 7.16.1.1/2) The fact that such an expression resulted from expansion of a macro has no bearing on how it can be used. In particular, when the type specified to va_arg is int, the resulting int-type expression can certainly be cast to other integer types, provided that va_arg()'s behavior is defined (roughly meaning that int is compatible with the promoted type of the actual argument). So yes, you can cast the result of va_arg(). From the documentation: va_arg returns the current argument So in your case it returns the value of what pt is pointing to as an int. So yes, you can cast that value. 
c-17-26	X	BYTE, WORD and DWORD macros definition I am trying to understand, what would be best way to define BYTE, WORD and DWORD macros, which are mentioned in answers of this question. Would it be correct to assume, that: BYTE is macro defined as #define BYTE __uint8_t WORD is macro defined as #define BYTE __uint16_t DWORD is macro defined as #define BYTE __uint32_t If yes, why cast to another macro instead of casting to __uint8_t, __uint16_t or __uint32_t? Is it written like that to increase clarity? I also found another question which answers include typedef, with little bit more of research I've found answers to question about comparing #define and typedef. Would typedef be better to use in this case? You have it defined at: https://msdn.microsoft.com/en-us/library/windows/desktop/aa383751(v=vs.85).aspx, and that is already defined in Windows Data Type headers for WinAPI: and it is a type, and not a macro. This is a portable solution: 
c-17-27	X	Memcpy a str[ ] to str* I'm trying to create a xoring function ( I want to XOR 2 strings and return the result). For that, I need to copy the content a an array (str[ ]) to a string (str* ). I'm getting a seg fault for my memcpy. Am I missing something ? Can you help me ? You should declare the array as minimum length of 2 strings+1. Otherwise you might access array index out of bound while accessing str1 and str2. You were accessing one element more index than you should. This is where you get the segmentation fault. Also you didn't allocate anything in result. Solution would be something like memcpy() tries to copy to the memory which is not pointing to any valid determinate portion of memory resulting in undefined behavior. Snippet code To Summarize the problem was - Accessing array index out of bound. Passing an uninitialized pointer to memcpy. Also leaving a scope for undefined behavior when the string lengths for the two strings differ. Now the question is what is the purpose of this process..we may run into nonprintable characters and so on, which are of not much use, from the usual string operation's perspective. One more thing Your heading of the question was Memcpy a str[ ] to str*. Now what you meant was Memcpy a char[ ] to char*. The thing is char* holds address of some memory. So when we would copy where will we copy? The memory address pointed by that char*. And your case that was simply was an indeterminate uninitialized value. You were copying there - that is UB. You should allocate space for result using either malloc or calloc. Currently, result is NULL. Hence, the segfault. Moreover, you should not use sizeof(temp)+1 in your call to memcpy. You are invoking UB. You are trying to access one byte beyond what you have allocated to temp. That's wrong. Taking all comments into account, I believe your function should be: which can be simplified to: You didn't allocate memory for result and you passed NULL to memcpy(); that is undefined behavior. 
c-17-28	X	Taking the address of a function from within that function First, the question: Is there any reason you can't take the address of a function from within that function? I can't think of a reason why this shouldn't work portably, but that doesn't mean there isn't one. I've tested it with MinGW and MSVC on Windows, and gcc on Ubuntu, and it works fine. The C standard is pretty much silent, except to say that (C99 5.1.1.2) function references are resolved in the final translation phase. My main aggravation is that I can't find anything that confirms that this is standard behavior. I've run across comments in the past that said that you couldn't take the address of a function from within that function, which I thought were bogus at the time, but didn't really have the time or inclination to actually check it out, until now. Is there any reason you can't take the address of a function from within that function? Nope. The C standard is pretty much silent, except to say that (C99 5.1.1.2) function references are resolved in the final translation phase. The standard is not silent; it just does not address that particular case explicitly. It is not a special case. My main aggravation is that I can't find anything that confirms that this is standard behavior. The standard specifies that you can obtain the address of a function, and it describes how. It makes no exception for code inside the function's definition, so the general rules apply there. It would in fact be pretty inconsistent if you could not obtain a pointer to a function within that function's implementation, since you can certainly call it from there (i.e. recursively). I've run across comments in the past that said that you couldn't take the address of a function from within that function, which I thought were bogus at the time, but didn't really have the time or inclination to actually check it out, until now. I'm inclined to agree that such comments were mistaken to whatever extent they were directed at standard C. Perhaps, though, they were directed at some non-conforming implementation. Or perhaps you misremember. Obviously, I cannot address any such comments with specificity unless you provide a reference, and preferrably an in-context quotation in your question. The only constraints on the unary & operator are as follows: The operand of the unary & operator shall be either a function designator, the result of a [] or unary * operator, or an lvalue that designates an object that is not a bit-field and is not declared with the register storage-class specifier. Functions identifiers satisfy this (perhaps counter-intuitively, a function identifier is an lvalue as per 6.3.2.1p1), and so it is always legal to take their address. In fact, if it were illegal, recursive functions would be impossible, because to call a function, you need to use its designator, and 6.3.2.1p4 defines such use in terms of a conversion to a function pointer: A function designator is an expression that has function type. Except when it is the operand of the sizeof operator, the _Alignof operator,65) or the unary & operator, a function designator with type ''function returning type'' is converted to an expression that has type ''pointer to function returning type''. 
c-17-29	X	Confusion with string pointers The output is: C is here. Can anyone explain this to me its confusing me. Here, switch(*(1+"AB" "CD"+1)) is evaluated like switch(*(2+"ABCD")). *(2+"ABCD") points to character C. that's why output of your code is C is here. *(any thing) is evaluated as pointer to a string literal. First of all, string literals only separated by white-space (and comments) are concatenated into single strings. This happens before expression parsing (see e.g. this translation phase reference for more information). This means that the expression *(1+"AB" "CD"+1) is really parsed as *(1+"ABCD"+1). The second thing to remember is that string literals like "ABCD" are really read-only arrays, and as such one can use normal array-indexing with them, or letting them decay to pointers to their first element. The third thing is that for any array or pointer p and index i, the expression *(p + i) is equal to p[i]. That means *(1+"ABCD"+1) (which is really the same as *("ABCD"+2)) is the same as "ABCD"[2]. Which gives you the third character in the string. And the third character in the string is 'C'. In C, adjacent string literals, such as "AB" "CD", are concatenated. (This is a convenience that allows long strings to be easily broken up over multiple lines and enables certain features such as macros like PRIx64 in <inttypes.h> to work.) The result is "ABCD". A string literal is an array of characters. In most circumstances, an array is automatically converted to a pointer to its first element. (The exceptions are in contexts where you want the actual array, such as applying sizeof.) So "ABCD" becomes a pointer to the A character. When one is added to a pointer (to an element in an array), the result points to the next element in the array. So 1+"ABCD" points to the B. And 1+"ABCD"+1 points to the C. Then the * operator produces the object the pointer points to, so *(1+"ABCD"+1) is the C character, whose value is C. 
c-17-30	X	Generate all combination of elements in table (langage C) i have i table of integer i want to have this combination: and after i will have this until to have all combination possible without repetition (i.e 12=21) I want combination like they are made in excel columns for example This Problem can be solved like this: We basically start with swapping the first Elemen with other elements, we use the loop so every choice we could do in the first swap is computed in the end. When we do one iteration, say swapping the first element with itself in the very first iteration, we call perm() recursively and continue on that decision, after we return from the recursion we have to undo the swap so the untouched array can proceed the iteration. Using recursion swap element with all possible following elements: OUTPUT: 
c-17-31	X	How to fix error: redefinition of '__kstrtab_sched_setscheduler_nocheck' I am compiling android kernel v3.10.108. I enabled kernel modules in defconfig and when tried to compile I came across this error. Here is the whole log on hastebin. Here is the kernel source. I am not an expert in programming languages and I need help. Kindly also point out why the error occurred too. The kernel source is actually here. The error occurred because there were two commits that both added the line EXPORT(sched_setscheduler_nocheck); to the file "kernel/sched/core.c", leading to the redefinition errors. The commits are here and here. The error occurred because whoever committed the changes did not check to make sure it still built properly when modules are enabled. I suggest raising an issue on github to report the error. You can fix the problem locally by deleting one of the problematic EXPORT(sched_setscheduler_nocheck); lines in "kernel/sched/core.c" or by reverting the second one of those two git commits locally. EDIT: I never noticed there were two errors in your build log. The other one is due to two commits applied to "fs/fs_struct.c" here and here. EDIT 2 Subsequent linker errors are due to some things in the kernel .config being configured as modules (or possibly not configured at all) that are being linked to by other things configured as built-in. Configure CONFIG_HW_RANDOM_MSM=y (not =m) to hopefully fix the "sensors_ssc.c" linker problems. Configure CONFIG_IPV6=y (not =m) and CONFIG_NF_DEFRAG_IPV6=y (not =m) to hopefully fix the "ipc_router_security.c" linker problems. 
c-17-32	X	Std-Output within callback-function-call does not apear I am trying to write a minimal version of a keylogger for windows. For debugging purpose I have inserted a few printf's within the callback function. Unfortunatelly nothing appears on stdout even if flushing last. I have posted a minimal version of the keylogger just returning 'A' for testing purpose. Any help? 
c-17-33	X	How to read one line at a time from a data file and to perform calculations in it before moving to the next line in C Programming? I'm a beginner at C programming and I would appreciate some help in order to understand the problem. Alright so, I have a data file (input.dat) with data like this: (first line) 0 2 3 4 5; (second line) 1 2 3 5 4, (third line and so on...). I'm required to read the data one line at a time until the end of file and print it. This is what I have done so far: This is showing all of the lines in the data file at once. But this is not what I want. I need to read one line at a time and perform some calculations and conditions for that one line first before I move to the next line. So how can I do that? Next problem is, for the first line, I need to implement a loop from -10 to +10 with increment of 2 (to get 11 results in total). For example the program will read the first line, display it on the screen, then for the first value -10, the program will calculate and again display something . Then it will do the same for -8, then for -6 and so on until +10. After the 11 results are displayed, the program will then and ONLY then, move to the second line and so on. Hence for each line in the data file, the program will have 11 results. How can I use the loop function with increment of 2 to achieve these 11 results? I would appreciate if anyone can provide me a simple layout of the structure of the codes which I've to write. NOTE: The formats are a bit different than other compilers as I must use Microsoft Visual Studio to do it. Add your calculations to your while loop. You are reading one line at a time anyway. If you want to loop from -10 to 10 with increments of 2, use a for loop. 
c-17-34	X	How to do unit testing on timer functions on a microcontroller I am new to the concept of unit testing, and I am currently trying to get more comfortable with it. I have to do unit testing on a timer driver for a microcontroller written in C. Now, I heard that a unit test on a function should not depend on the outcome of another function. My problem is, how can we test a function that is supposed to stop a timer in these conditions ? Don't we need to start the timer, heck, we even need to initialize it ! I would like to know at which level we need to consider our unit test ; is it at the level of one function (in that case, we get the problem above), or is it at the level of the driver itself (in that case, we can use multiple functions of the driver in one unit test) ? I would love to hear from more experienced people their feeling about this subject, as I feel I'm going nowhere at the moment. I would approach this as follows: You can test each function independently to check that it adheres to its interface and handles out-of-bound values of parameters (if that is a requirement; the converse is that the requirement is with the caller not to call it out-of-bounds). You can also do a code inspection on each function. Then you can unit test the whole unit, in one way from the higher level routines: can it be called for intialization and set-up (wand here out-of-bounds conditions must be handled) and can any call-backs be called and are they called properly. For hardware related elements you can either simulate it or create a dedicated hardware environment for the testing (test harness, test bed). There is pretty much only one correct way to test a timer driver: Write a test case application that uses all functions of the driver. Leave the driver code itself completely untouched. Important test parameters to note/document: clock speed, clock accuracy. That is, which clock source is the timer hardware getting its clock from, how fast is it and what is the expected accuracy? You'll probably want to test the driver against a proper crystal oscillator and not some built-in RC oscillator. That way you can rule out clock inaccuracy and see what the driver latency is. Internal PLLs/FLLs in the system clock can also have a certain inaccuracy. In the test application, set some GPIO pins wherever you expect the timer to stop etc. Possibly from a callback function, depending on how the driver is written. Measure the actual time with an oscilloscope. This is mandatory, you can't test such code without one. Period. There's not much more to it. Optionally, if you want a more in-depth test, you could include some manner of code coverage to see if all parts of the driver code are executed at some point. 
c-17-35	X	Reverse linked list returning new linked list I need to implement a function that reverses a linked list but i don't know how to return a newly formed linked list as a result. This is the code I have written so far. How do I insert this reverse linked list into a different new linked list within the function reverseList it self? You are juggling around your nodes on the original list, and modifying then in place - which means you have only one list, and modify its nodes. If that is what you want, your code might work (as soon as you fix things like the rev_head variable that appears from nowhere) - and the new head of the list, which is on your prev variable: which means your code should just work. (It is important that the typedef don't hide the pointer though, I'd suggest changing that.) What you seem not to have understood quite well is that for this kind o structure, any node works as the head of a list - there is no "list" type, just "node" types - and if you happen to pick any node in the middle of a list, that will just represent a partial list, starting from that node as well. So when you change your previous "last" node to point to its previous "antecessor" as its "next", that is it: that node is now the head. (The exception to this "node == list" equality is while the reversing algorithm is running - at that point you have nodes that point in one direction and nodes that point in another, and the extra "next" and "prev" variables provide the needed information to fix things. If this was production code, this part of the code would have to be protected in a thread-lock) Otherwise, if you want to produce a reversed copy of the list, you will have to copy the old nodes along the way, and just fix where they are pointing. You can simply create a new node for every node in the original list and set the link in opposite order. Code could be: 
c-17-36	X	How to scan a formatted string using fscanf()? I have this file with multiple lines. Each line follows a format of For example: How should I use fscanf() to retrieve the userID, the integer, and the string between $$ and :`? This is what I have now, but it is not working. I don't know much about the format I should specify for fscanf() to achieve this. Please help. Try this: here, int ret is: EOF, if the pointer is reached end of file. 0, if no input matched with the variable >0, number of matched variables with the file input Try a regex, like this for example: I created a regex101 link that explains the regex expression used above. PS: Don't forget to check for the return value of fscanf(), in order to ensure that everything was read parsed correctly. You want to parse three elements, thus the return value should be 3. 
c-17-37	X	Can the intmax_t hold size_t? Can the intmax_t hold size_t maximum decimal number? And what size type in printf have a biggest priority uintmax_t/intmax_t or size_t (ex. if i write printf("%zjd", x))? No, since size_t is unsigned that risks dropping one bit. I don't think you understand how printf() works, you can have "an optional length modifier" but not more than one. Most likely not Both are implementation specific, so it's not really possible to answer. size_t is (usually) an unsigned integer holding the largest possible number of bits that will fit in a register on a given CPU. That's not exactly guaranteed in reality though, but I still haven't found an example where this isn't true. intmax_t is a signed integer, meaning it will probably have the bits required to store any value that a size_t can hold, but large values will not mean the same; the largest value that a size_t can hold, is likely going to be a negative integer when interpreted as an intmax_t. 
c-17-38	X	Extracting string from char array specified by prefix and suffix I want to write a function which extracts data from char array, which contains data specified by prefix (e.g. "type=") and suffix (e.g. ","). I have hard time working with strstr and pointer arythmetics, so I think posting my attempts to write that function is pointless. I want body of function to look like this: and call of function (with parameters) to look like this: Can you please show me correct way to implement this function? It think this is not too complicated, I just stuck somewhere... Thank you for your concern. the following proposed code: assumes that the 'output[]' array is long enough to hold the result+1 assumes that the 'output[]' is not to include the strings 'start[]' nor 'end[]' Caveat: this is not tested Caveat: the resulting char array in 'output[]' is not NUL terminated so the calling code (probably) should pre initialize that array to all '\0' 
c-17-39	X	What's wrong with Macro definition in the C code? During an interview, I was showed the code. However, I think it's right. And I also try this on my computer. Nothing is wrong with the macro definition. However, the if condition needs an explanation. Note the difference between: 1 makes the condition true and every other value makes it false. and Every value except 0 makes the condition true. Only 0 makes it false. 
c-17-40	X	Why I cannot compile with -fPIE but can with -fPIC? I have one interesting compilation problem. At first, please see code to be compiled. And I compile this and got a error as below And after this, I modified the code(removing a line [1]/using -fPIC instead of -PIE[2]) and then successfully compiled these. Why did this phenomenon happened? I have heard that calling a function within an object is done through PLT when it is compiled with -fPIC but done by jumping to the function directly when it si compiled with -fPIE. I guessed that the function call mechanism with -fPIE refrains from relocation. But I would like to know exact and accurate explanation of that. Would you help me? Thank you, all. The only code generation difference between -fPIC and -fPIE for the code shown is in the call from sub_func to subsub_func. With -fPIC, that call goes through the PLT; with -fPIE, it's a direct call. In assembly dumps (cc -S), that looks like this: In unlinked object files, it's a change of relocation type: And, on this architecture, when you link a shared library using cc -shared, the linker does not allow the input object files to contain R_X86_64_PC32 relocations targeting global symbols, thus the error you observed when you used -fPIE instead of -fPIC. Now, you are probably wondering why direct calls within a shared library are not allowed. In fact, they are allowed, but only when the callee is not a global. For instance, if you declared subsub_func with static, then the call target would be resolved by the assembler and there would be no relocation at all in the object file, and if you declared it with __attribute__((visibility("hidden"))) then you would get an R_X86_64_PC32 relocation but the linker would allow it because the callee is no longer exported from the library. But in both cases subsub_func would not be callable from outside the library anymore. Now you're probably wondering what it is about global symbols that means you have to call them through the PLT from a shared library. This has to do with an aspect of the ELF symbol resolution rules that you may find surprising: any global symbol in a shared library can be overridden by either the executable, or an earlier library in the link order. Concretely, if we leave your sub.h and sub.c alone but make main.c read like this: so it's now got the an official executable entry point in it but also a second definition of subsub_func, and we compile sub.c into a shared library and main.c into an executable that calls it, and run the whole thing, like this the output will be That is, both the call from main to subsub_func, and the call from sub_func, within the library, to subsub_func, were resolved to the definition in the executable. For that to be possible, the call from sub_func must go through the PLT. You can change this behavior with an additional linker switch, -Bsymbolic. Now the call from sub_func is resolved to the definition within the library. In this case, using -Bsymbolic allows sub.c to be compiled with -fPIE instead of -fPIC, but I don't recommend you do that. There are other effects of using -fPIE instead of -fPIC, such as changing how access to thread-local storage needs to be done, and those cannot be worked around with -Bsymbolic. 
c-17-41	X	strncpy behaviour in different IDEs I am wondering why in Eclipse with internal CDT builder I can do this But in visual studio I have to do this As you can see I have to use malloc() in visual studio otherwise I get access violation to memory, but why don't I need it in eclipse? For most of the cases, is the same as and then, you're using a NULL pointer (i.e., an invalid address you're not suppose to access) as a target for strncpy(). It is undefined behavior Elaborated in C11, chapter Â§7.1.4, Use of library functions [....] If an argument to a function has an invalid value (such as a value outside the domain of the function, or a pointer outside the address space of the program, or a null pointer, or a pointer to non-modifiable storage when the corresponding parameter is not const-qualified) or a type (after promotion) not expected by a function with variable number of arguments, the behavior is undefined. [...] 
c-17-42	X	compilation error in C pointer working in 32 bits, not in 64 bits I am trying to compile a c program in 64 bits. It is already working in 32 bits for several years and used by some clients. Example of code working in 32 bits : in Compil in 64 bits i have an error: conversion between a pointer and an integer of different size and a segmentation fault in execution. I have no experience in pointer in c, so i prefer to ask for help ! As mentionned in the comments, you should: include the proper headers (stdlib.h and string.h) check for the value return, in particular the getenv call: 
c-17-43	X	inserting a new node on a linked list creates a new one i'm trying to create a linked list, which creates fine but when i try to insert new nodes to the already non-empty list and display it, only the new inserted node exist. here's the code: So for example, if i input through the pipe "3 10 20 30" it rightfully displays the 3 nodes i've created. However if i do it again, when it should print 6 nodes, it only prints 3 again, but the new ones. this struct definition/instance: is not correct, because the root pointers are fine, but the the instance of wr needs to be an instance of the struct, not a pointer to an instance of the struct. Suggest: then the rest of the code needs to treat wr as an instance of the struct and not a pointer to the struct So this: should be: 
c-17-44	X	C on linux: using fclose() on Filepointers made from Socket descriptors I have to write a simple command-line client/server thingy for school and our teacher told us that using fdopen on Sockets is the easy way to go. A protocol is given that defines simple requests and responses only marked by EOF (so not within the request itself but the FIN flag will have to do). Now my problem is that in order to get a response in the client I have to close the writing direction. For this I'm using fclose() Leaving out the details what I'm doing (skipping all the error handling and unrelated stuff)is pretty much: Now I would expect flcose() (which successfully return 0 btw) to send EOF, fflush(), close the pointer and close the underlying socket descriptor resulting in a fin flag being sent from the client to the server. Now when I single step through the program and simultaniously look at tcpdump I see the request being sent (and ack'ed by the server) when I call fclose() but no FIN flag. This of course results in the Server not seeing that the request is done and my client getting very bored when trying to read a response later on. I don't find many people using file pointers for tcp transfers here so a search for this didn't yield a whole lot. Has anyone had this problem before? You have two ways to cause a shutdown of a TCP socket and you are doing neither of them. One of them is to call shutdown. You are not doing that. The other is to close the last descriptor that references the connection. You are not doing that. Do one of those two things. Your expectation that this will trigger a shutdown is unreasonable. You still have a socket open to the connection that can be used to both read from it and write to it. So it would be quite surprising if a TCP protocol shutdown was triggered. 
c-17-45	X	C palindrom program - undefined reference to main I wrote an function, wich checks, if string of char is palindrom or not. I also created funs.h Now, I'm trying to use this function in my main function I also created makefile: Everything seems fine and works in single file, but when I try to compile them separately they "don't see" each other. Makefile also seems to work badly, but I cant see any mistakes. Can you help me fix it? When I try "make" command it returns "makefile:15: *** missing separator. Stop." comment and do nothing. Did you actually look at line 15 of your makefile? Notice that it's flush against the margin instead of indented by a tab character. When I'm compiling pan.c with "clang pan.c -Wall --pedantic -std=c11 -o pan" command: 1 warning generated. /usr/bin/../lib/gcc/x86_64-linux-gnu/5.4.0/../../../x86_64-l"Œ"‹inux-gnu/crt1.o: In function _start': (.text+0x20): undefined reference to main' Indeed, your pan.c does not have a main() function. So don't try to compile it by itself. How about clang main.c pan.c -Wall --pedantic -std=c11 -o pan 
c-17-46	X	Keep a parent process waiting and run linux command as many times as wanted I have the below C code in linux (using gcc): I want the parent process to keep waiting indefinitely and run "who" every time I press the "u" key. I only get the desired effect one time and then the child and parent processes exit. Any help on this? Observe below loop : It doesn't matter how many times you rotate the loop , it will execute only once because when child process starts running(PCB created), you are calling function doWho then control will come to doWho function and in doWho function what you are doing ? execl(). what execl() does is that " it replaces current process(child) with new process, after when i = 0 whole child process image got replaced with new one using execl(), so there is nothing left in child process that's why it will execute only once. If you want to execute as many as you should use fork() in the function because then exec will replace every process created by fork(), but it's not advised to run fork() in loop because your program may crash when there are no more resource available. So replace your doWho function as I hope it helps. 
c-17-47	X	issue with macros in C code in .out file please go through the below code ,here if i give any input (1,2,3,4) using scanf this code is printing all the printfs related to all the macros. for example if i give input as 1 ,then it will #define the first_case it should only execute but instead it is printing all the printf statements. why it is happening? FYI ::iam using gcc for building the code and using .out file to run the code. Macros (#define MACRO ...) are processed by the C preprocessor before the actuel compile process takes place. So the compiler only "sees" this once the file has been preprocessed: You could write your program like this, and the outcome would be exactly the same: As others have said, a preprocessor macro cannot be set or altered at runtime, you just need an ordinary automatic variable. For example: Having said that, you are doing the same test twice, so most would just use the case, probably with a default: 
c-17-48	X	Types, expressions and arrays dimensions I red the answers to a similar question where the matter is extensively and straighforwardly discussed. I would like to be sure of the correct interpretation i gave them. For example, my textbook states, at exercise 6.24, that "The sizeof operator can be used to find the number of bytes needed to store a type or an expression. When applied to arrays, it does not yield the size of the array." Even so, it does not appear that obvious to me. Hence, I would like to briefly discuss the output with you: Then: In this case, 27 is the number of bytes of that s is composed of, being each char composed of one byte. This appear in contrast to the definition of sizeof because it returns what appear to be the _size_of an array. At this point, am I correct thinking that char s[] = "deep in the heart of texas" is considered as an expression? Here, we have a pointer char *. Since sizeof "finds the number of bytes needed to store a type", I assume that a pointer char * is stored in 8 bytes of memory. Am I correct? This case make me particularly unsure. The only relevant difference I found is that in f() the array a is passed as a parameter : a pointer to its base. As before, a pointer is stored in 8 bytes of memory. Am I correct? If so, 12 has to be considered to be the amount of memory needed to store the expression int a[3]? Again, it appears to return the dimension of the array d, that is, five sections of 8 bytes each. But, again, we are not talking about an array, rather we are considering an expression double d[5]. Is it correct? Thanks for sharing with me your knowledge and experience! Lots of text, which I didn't all read, but here is my answer: and in f, you correctly declare it as getting a pointer, so its size is the size of the pointer. That's all... Briefly: 1) sizeof(s) = 27: The length of the string including NUL-terminator. Note that sizeof(char) is 1 by the standard. 2) sizeof(p) = 8: The size of a char* on your system. 3) sizeof(a) = 12: in main, yes that's the number of elements in the array multiplied by the size of each element. From this we can infer that sizeof(int) is 4. 4) sizeof(d) = 40: sizeof(double) multiplied by the number of elements. In the function f, the array passed has decayed to a pointer type. Most likely sizeof(a) will be 8. The standard does not insist that sizeof(char*) is the same as sizeof(int*) but I've never come across a desktop PC where that is not the case. 
c-17-49	X	Why do I have NUL line in my written file using fopen fclose c++ linux? I have some C code running on a linux OS into a portable device. I'm using a VRmagic system, similar to BeagleBone etc...). In this code, I'm using the following function to write results inside a txt file. 99.9% of the time all is OK. But, randomly, I do have some NUL character in my file, and this happen when I turn OFF my system. Looks like the file has not been closed properly or something like that for some reason..... When I get my txt file, and open it with notepad++ on my computer, it does look like the following: I can confirm that the device has been turned OFF between line 172 and line 174. Many thanks for help Just closing a file on Unix systems does not implicate the contents are instantly written to disk; usually buffering/caching is enabled. To make sure the contents are written you can use sync() immediately after a write and/or close operation, which will minimize the risk of lost updates. Additionally I recommend to use a journaling filesystem like ext4 (which may not be an option on external drives like USB pens, but is strongly recommend for all system and data partitions). This will not save you from data loss in case of a power failure or crash, but will avoid inconsistencies/partial writes like you are experiencing. 
c-17-50	X	K&R, find longest line, same code but not working? I've just started to read K&R and on pages 32-33, there is a code that finds the longest line among the inputs. I nearly completely copy-pasted the code given in the book, just added some comment lines to make the code more understandable for me. But it isn't working. Edit: I'm sorry for bad questioning. It seems the program does not act properly when I press Ctrl + Z, in order to terminate it. No matter how many lines I type and how many times I press Ctrl + Z, it just does nothing. The following is my version of the code: Thanks in advance! Okay, here's the error: This will cause it to terminate the string even for no input (when it got EOF directly), and since it increments i before returning it, getLine() will never return 0 and thus main() will never stop. Removing the ++ fixed it, for my simple test. Also, the comment is misleading, the compiler doesn't know anything. The compiler is no longer around when the code runs; the in-memory format of strings is something that's needed to keep the run-time libraries happy since that's what they expect. 
c-17-51	X	How to guard file read/write from different child processes? I implemented a proxy server in C using fork() for handling multiple requests from the client. I am trying to implement caching for the proxy. For that, I took the response obtained from the server and stored it into a file and I am reading that file next time that same URL is requested. But, what I suppose when one child process is writing the file to cache folder, the other is detecting that file in cache already and starting to read it. I have tried shared mutexes but they don't seem to work. 
c-17-52	X	change matrix inside a function and use it in main I'm new to c language and I have an assignment to allocate a dymanic matrix inside a function, put values in it and return to main and then call to another function that prints the matrix. I know that if I want to change the matrix values inside a function I need to use '&'. But when I return to main in order to print the matrix I get "Segmentation fault (core dumped)". Can somone tell me what's wrong with my code: One issue is your memory allocation. You allocate space for the wrong types and save the result incorrectly. That is should be and should be Here is an alternative approach that doesn't operate directly on the input argument: Output: note For clarity check of malloc return value is omitted. 
c-17-53	X	Creating a large 2D array? I'm using a pretty simple 2D array to store values (it's part of a mandelbrot set program). The 2D array works fine until my numbers get larger. These, for example, work: But when the size of the array grows to this: I get a seg fault if I try and access this array at any point after creating it. Is it simply too big? Am I not allocating memory correctly? If I can't make a 2D array this large, how could I store the values instead? Thanks for any help! 
c-17-54	X	Backpatching with OR_ELSE and ALSO in yacc I am trying to implement Syntax Directed Translation(SDT) using yacc. In the case of boolean expressions I've chosen to adopt Backpatching method. Below is an example of my implementation of logical OR using C in yacc : It does work but my current problem is something else. We are to have an alternate approach for handling logical operation OR_ELSE besides the "Side Effect" approach adopted just for usual OR. Lets go on a little bit more about the problem Imagine we are dealing with something like simpleexp1 OR simpleexp2(numbers are provided in order to distinct simpleexp s from each other). Using the implemetation of logical OR , as implemented above , we won't evaluate simpleexp2 if simpleexp1 is true. Because we should jump to simpleexp1.truelist which is filled via calling backpatch function called somewhere else later. In case of simpleexp1 OR_ELSE simpleexp2 we want to be sure that simpleexp2 is evaluated , whether the final result will be true or false. For example if simpleexp2 is (x++ == 4) where x is an integer , we want to be sure that the incrementation takes place and the value of x increments by 1 ; however , in the case of simpleexp1 OR simpleexp2 , the value of x won't change if the simpleexp1 is true. P.S. : I have figured out that in order the simpleexp2 to be evaluated we should fill both the truelist and falselist of simpleexp1 in an order that causes the control flow to be given to the beginning of simpleexp2 , but I don't know what to do next! 
c-17-55	X	Lifetime of a compound literal 6.5.2.5p5 says If the compound literal occurs outside the body of a function, the object has static storage duration; otherwise, it has automatic storage duration associated with the enclosing block. Am I correct to interpret "the enclosing block" here as "the innermost enclosing block"? (Because if it's not the innermost one, which is it?) Why are gcc and clang behaving as if the lifetime of a literal were its enclosing function? Example: Code generated by gcc/clang at -O3: There does not seem to be any good reason for this. I would just call it a compiler bug. Consider the code: The way the Standard is written, the compound literal will only be usable if the assignment to p is performed by the lone non-compound statement controlled by the if; changing code so the if controlled a compound statement would require a significant reworking: Such a requirement would substantially and needlessly undermine the usefulness of compound literals (since code could be written about as well without them). A far more reasonable rule would indicate that the lifetime of a compound literal extends until code leaves the function in which it was used, or the expression creating it is re-executed, whichever happens first. Since the Standard allows compilers to extend the lifetime of automatic objects however they see fit, the fact that a compiler does so should not be considered a bug. On the other hand, a quality compiler which is deliberately going to be more useful than the Standard requires should probably explicitly document that fact. Otherwise future maintainers may declare that any programs that rely upon such sensible behavior are "defective", and that the compiler can be more "efficient" if it ceases to support them. 
c-17-56	X	C - Cannot iterate through second string onward Can anyone tell what I am doing wrong here? Problem statement: https://practice.geeksforgeeks.org/problems/good-or-bad-string/0 My code: Sample Input: Output: My solution link: https://code.hackerearth.com/9bca55K Why does the for loop not work for the 2nd string? Hint: You have to clear the the consonant and vowel counts after increment the other (e.g {c_vwl++;c_cnsnt=0;}), not when they are equal, and always tests your BAD condition. I will not give you a sample code. Good luck 
c-17-57	X	Why some junk bytes at receiving file with UDP in C? I writing a client/server program in C, where the client send the file to the server. It works, but some junk bytes are added to the received file at the position of 1400 of the byte. I tried with a text file and I setted to 0 the memory before any sent. Why that junk files? Here the code: macro.h client.c server.c For files less than 1400 bytes it works perfectly! If the file is larger than 1400 bytes (more packet for sent it) then some junk bytes are added. I can't find why! junk bytes at the end of string a dead giveaway for a missing string nul termination problem. here: or here: you're copying the string without the terminator. now on reception you have no way of knowing where the string ends and neither does fprintf. So just use strcpy instead of memcpy when copying strings. It'll work and add the nul termination char and 
c-17-58	X	C - RSA Cryptosystem Decryption Issue (unsigned long long not big enough?) I'm working on an assignment where I have to build an RSA Cryptosystem. I was able to encrypt the cipher key no problem however I'm having trouble decrypting it due to the result of the exponent being so large. I've tried using unsigned long long int but I'm still getting an output of 0. I should add that the professor made no mention of using a big number library so I'm sure we are most likely not supposed to use one for this assignment. The maximum value of an unsigned 64-bit integer is 18,446,744,073,709,551,615 However, 1394^2011 is more around 1.296 x 10^6323. That is 7.02 x 10^6303 times larger than the maximum value of an unsigned 64-bit integer. TL;DR: Use a BigInteger library, a really big one. Seriously though, the main reason RSA can compute such large powers is because RSA operates under a modulus, so if we use Modular Exponentiation, we require far less computational power to reach the result. Calculating the result by raising the plaintext to the exponent and then applying the modulus at the end isn't computationally feasible. 
c-17-59	X	Why does i += a[i]++ assign i before incrementing a[i] with Visual C++? Problem This example is a minimal reproduction of this issue encountered a code golf attempt. I am not advocating anyone use this style. I am aware I may have hit undefined behaviour, my question is: why specifically, and does this go for C as well as C++? I have this file: With GCC on Ubuntu on WSL I get the expected i=1 a=[2, 0] but with Visual C++ it is i=1 a=[1, 1] The problem is fixed if I do this: Whilst order of evaluation of assignment is unspecified, I am surprised that it appears that a[i] is evaluated again for the increment, after the assignment of i. The disassembly below seems to confirm this. Do either the C or C++ standards allow this? Background Build command line and output on Windows: Dissasembly of the statement (built with /Zi): The code is well-defined in all versions of C and C++. You are seeing a bug in MSVC. The definition of the += operator is that x += y means x = x + y, except that x is only evaluated once. (Note that "evaluate" is different to "lvalue conversion"). So we are looking at i = i + a[i]++. Informally: the new value to store in i cannot be computed until both operands of + have been evaluated, and had lvalue conversion performed. Because we need the result of that lvalue conversion in order to know the value to store. The term "evaluate" for an lvalue means to determine the memory location which the lvalue refers to. Evaluating a[i]++ when i is 0 beforehand means to determine that we are referring to a[0]. Then lvalue conversion retrieves the stored value of a[0], and the unsequenced side-effect is that the stored value of a[0] will be updated sooner or later. Writing to a[0] has nothing to do with i, so there is no reason to believe there might be undefined behaviour. More formally: prior to 2011, the C and C++ standards used a somewhat confusing sentence that expressed the logic in my "Informally:" paragraph. If the expression reads and writes i then it is well-defined only if the reads of i are all necessary to determine the new value to store in i, because that will guarantee that the reads have all happened before it is possible to store the new value. In C11 and C++11 the language changed but not the implication. C11 6.5.16/3 (Assignment operators) says: The side effect of updating the stored value of the left operand is sequenced after the value computations of the left and right operands. which leaves no doubt that the write to i is sequenced after all reads of i on the right-hand side. C++11 has similar language: In all cases, the assignment is sequenced after the value computation of the right and left operands, 
c-17-60	X	How to handle duplicated data at backend and frontend Problem - Example We are having list of accounts at website. Those accounts have statuses (close, open, validated) We need to do something at frontend depending on account state. Problem Question Because of it we are having those statuses in backend and also at front end side If we change data at backend we wont have refreshed data at frontend. Is there way to handle such case? 
c-17-61	X	What RSA key components do I need to initialize to sign data with OpenSSL? I'm creating an RSA key in the following way: And whenever I try to sign data using EVP_DigestSign* or EVP_PKEY_sign* a segmentation fault occurs. If I generate key it works. So what other key components should I initialize to get it working? 
c-17-62	X	why is this behaviour of strtof() changes with respect to the change in stdlib.h? With <stdlib.h> included the following code gives the output of 123.34. But without <stdlib.h> it produces the output of 33.000000. What is the role of <stdlib.h> here and why did the value 33.00000 occur when it is nowhere in the code? The <stdlib.h> header tells the compiler that strtof() returns a float(); in its absence, the compiler is forced to assume it returns an int. Modern C compilers (GCC 5 and above) complain about the absence of a declaration for strtof() and/or a conflict with its internal memorized declaration for strtof(). If you omit <stdlib.h>, your code is unacceptable in C99 and C11 because you didn't declare strtof() before using it. Since you omit <stdio.h>, it is invalid in C90, let alone C99 or C11. You must declare variadic functions such as printf() before using them. You must take a look at the warning generated by the compiler. This still yields result, which is not deterministic in any way because the return type expected is float, whereas without the header inclusion, the default is assumed to be int. If you look into the stdlib header file, there is a declaration, With #include<stdlib.h>, we provide this declaration. When missed, compiler assumes to be returning int, and hence the result is not deterministic. With my system, it produced 0.00000000 as the output, whereas with the necessary inclusions, I got 123.339996 as the output. As a precaution, make a habit of always compiling the code with -Wall option (Assuming that you are using gcc), or better yet, -Werror option. 
c-17-63	X	Difference between EVP_PKEY_sign and EVP_DigestSignInit? So far I've seen two different approaches to RSA signing with OpenSSL: With EVP_PKEY_sign With EVP_DigestSignInit: Are these just two different ways to do the same thing? Oh. There's a fairly major difference. EVP_PKEY_sign() does not hash the data to be signed, and therefore is normally used to sign digests. For signing arbitrary messages, see the EVP_DigestSignInit(3) Per https://wiki.openssl.org/index.php/Manual:EVP_PKEY_sign(3) So EVP_PKEY_sign is very likely used under the hood in EVP_Digest SignInit, and is intended for applications where the caller will manually format the block to be signed. 
c-17-64	X	Ending a program based on user's input in C I am trying to end my program once the user inputs a "***". I've read other articles such as this one: How to stop a program based on user's input in C Tried the solution, however it doesn't work for my case, not sure if it's because mine is in string type format, while the other user's input is in character type format. The following are my codes: 
c-17-65	X	Using glade treeviewer to display data using c I'm trying to use glade GTK3 to display data with c programming.. I can't find simple example where i can use already created treeviewer on a glade project to show data from a file. I'm new in using this tool thank you. 
c-17-66	X	C Language: I want to add all the positive integers when a negative number is inserted I want to add all the positive integers when a negative number is entered. Click for Example The problem is this: Instead of printing value of total variable, you are printing the address of it. Remove &. Correct way is: There is a minor bug in your code here: When this is changed to: A simpler version of the same would look like: This code will do what it says, but it will also do different things if valid input is not inserted. Because, it doesn't take care of inputs that are not numbers. Here is the one, that takes care of validating inputs and only allows numbers. This version below has a lot to improve on, but I prefer it this way for letting learners understand the code and improve it further. 
c-17-67	X	redirecting stdin to file I want to write a program that takes whatever I type in terminal and writes it to file. Here is the code that I wrote. Currently I am using arrays and a pipe for achieving this. Is there any way that I can achieve the same without using any arrays? I want to write a program that takes whatever I type in terminal and writes it to file. That's actually very simple and you don't need a pipe for this. (Your application itself takes the role of the pipe.) This is what I did to demonstrate this: mycat.c It reads a character from stdin and writes it to the file stream fOut which has been opened by fopen() before. This is repeated until getc() fails which might happen e.g. due to end of input. Sample session in bash on Cygwin/Windows 10: At this point, I typed Ctrl+D to signal bash the end of input. I used cat to output the contents of mycat.txt. It is what typed in before (as expected). cat was actually my first idea when I read the question but then I thought: It's a question tagged c (not bash). Hence my C sample code. For completeness, the same with cat: This remembered me that <<'EOF' is something interpreted by bash. Hence, the following works as well: This let me belief that cat works quite similar though it takes input file(s) as argument(s) and writes to stdout (which in turn might be re-directed when calling it in a shell). In opposition to mine, cat doesn't fail if no arguments are provided &ndash; it reads from stdin instead. I want to write a program that takes whatever I type in terminal and writes it to file. => yes it's possible, use dup() or dup2() and close() system call accordingly. What's the need of using pipe for input redirection task I mean you just want to redirect user input into file So pipe() is unnecessary if this is only task because you are not doing any kind of communication b/w child or parent process. 
c-17-68	X	how to encrypt a string in aes waywith mbedtls? We all know that mbedtls library is a very lightweight c library. I want to use the library to encrypt a string. So I have a function like this: aes_encrypt.h: and the implementation: I call the function like bellow: And I get the err msg like below: Can anyone help me out and explain what is the meaning of the error message? Thanks. Explanation: CIPHER - Decryption of block requires a full block Can anyone help me out and explain what is the meaning of the error message? AES is a block cipher it means it is implemented to encrypt 128 bit block at the time. Not more, not less. So if you have source data shorter than a single block, you will need to use some padding to ensure you prolong your data to a required length. Generally to encrypt data of any length we use mode of operation. There are some which do not require any padding (CTR, CFB, OFB, ..) Still your encryption will be far from secure - you will need IV (salt) and authentication tag. We all know that mbedtls library is a very lightweight c library apparently the mbedtls already support multiple modes of operations, it's up to you to choose 
c-17-69	X	Why does gcc link without the lpthread flag? I was working on a hobby project where mutexes were behaving mysteriously. I boiled it down to this test case that should obviously deadlock. However, when I compile without the -lpthread flag, not only does the program still compile and link, it also runs without deadlocking. Why? Compiling with the -lpthread flag yields the expected result: I'm running GCC version 7.2.0. 
c-17-70	X	Are variables declared in pthread's functions shared between threads? I am new to C and pthreads. Here's an example (which probably won't compile as I wrote it now) but it shows what I want to know: int i = 50; Is int myLoop shared between the 3 threads? Is the loop in myFunc running as thought on all 3 threads (as in iterating properly to 50 which is the value of int i), or are they fighting continuously over its value due to myLoop++? Is this because the variable int myLoop shares its memory value in all different threads? I want myFunc to run on different threads given to different cores without them messing with each other while looping, meaning the loop iterates perfectly on all threads and they are ignorant of each other. Or is this not actually a problem and is indeed doing that? Is int myLoop shared between the 3 threads? Threads have nothing to do with it. The same question could be asked about a single thread. Consider: Consider a single thread that calls myFunc and then myFunc calls itself. Do the two instances of myFunc share q or not? And the answer is -- both. Each invocation has its own q. But if the second call does *j = 2; it will change the value of the first invocation's q. So each has its own, but they can share them if they wish since they have the same view of process memory. Same with threads. 
c-17-71	X	GDB and asm 32 bytes for my school i'm doing a security project. The first steep is from the binary, find the c code source. I have one problem here, this is the asm code from the school binary with GDB: Main: func P: I have no idee where the line p+30 from because ebp+4 mean the variable from before the stack of the func P but P have no parameter... Have you got a idea where this variable from? and how can i get her ? Actualy this is my source.c It's wrong close to the gets thx :) because ebp+4 mean the variable from before the stack of the func P but P have no parameter... this is not true, if you want to access parameters of p functions, you should use ebp+8, ebp+12 etc. In prolog of p function there is and you must remember that when call instruction is called, return address is pushed onto stack (next 4 bytes). After making a stack frame, [ebp+0x4] is the return address. On function entry, args start at [esp+4], which becomes [esp+8] after you push ebp. Thus, with a stack frame, the first arg would be at [ebp+8]. To get a compiler to emit something like that asm for p, you'd need to use something like the GNU C __builtin_return_address extension. There's also a __builtin_frame_address... 
c-17-72	X	How to make Interactive program in BST ? C Lang I need to to open and read multiple text files which will be stored similar to binary search tree construction. NOTE: They all need to be opened and their content stored before user enters his input. I really do need some advice, because I do not see my errors any more. However, what I really don't get, is how to make it interactive ? When I press 'A', it needs to read text from the left node and opposite. Structure of output: ------------------\n \n Title\n file1 // file present - 'A' file2 // file empty/not empty - 'B'\n Text\n \n Your choice (A/B):\n This is how the programs output should look at the beginning: terminal Elements of struct //Forward initialization is present //Here i wanna initialize node elements // For every malloc, I have to make sure that it succeeded //Function that opens the files This does not do what you probably expect. It compares the returned value to whatever value your compiler uses to represent true. Currently your loop is hence likely to seem an endless loop, while waiting for returned_value to be identical to true. You need This will leave the loop when returned_value is identical to either 'A' or 'B'. That way the endless loop problem is solved, which is likely the core problem preventing your file BST from being interactive. By the way, for users convenience I recommend to also accept 'a' or 'b'. For avoiding a "try again" after each input, use with a space at the start, for ignoring leading white space, including the newline/return after each entered 'A' or 'B'. 
c-17-73	X	TCP chat in c not reading/sending strings correctly I'm trying to implement a multi-client chat, using tcp socket-based connections and threads to manage the clients and inputs. However the reading and writing of the sent or received string aren't being executed correctly, and i can't quite figure out why. Server: client: the code has a lot o code unnecessary to a simple two-way input based connection, however it will have more feature in the long haul that i'm trying to implement.There are many thing to fix here but my question is mainly focused towards sending a string through the "private" input that should be as follows: private (username of receiver) (message to send) I am still looking at it but I noticed a few things. In your server, you have The buffer variable receives a pointer to a block of NAMELEN (32) bytes. You recv NAMELEN bytes without looking at the status. So far so good. You then clear the first sizeof buffer bytes (since buffer is a pointer, you are clearing 4 or 8 bytes). A short time later, you recv BUFFSIZE (1024) bytes into your poor 32 byte buffer. What I would suggest is you get the server running by testing with telnet and typing what your program expects. Keep in mind that the data is only transmitted when you hit return. The client could be similarly exercised with netcat with: While I am at it, why is your client multithreaded? It would simplify things if you called receiver() directly rather than creating another thread. Also keep an eye on your mallocs and make sure they are paired with a free. I see a number of places where you malloc a fixed size block of memory and then to do not free it. This could be accomplished a lot cleaner with a local variable. Those go away when you return. Alternatively, look into alloca(), that also goes away when you return. It is not available everywhere but it is pretty useful. 
c-17-74	X	minishell malloc error with EXC_BAD_ACCESS Hi i'm recently learning unix system programming I'm trying to create a minishell in c but when i run my code I always got: EXC_BAD_ACCESS (code=EXC_I386_GPFLT Don't really know what's wrong here. Searched online they say it's something wrong with malloc ,but i don't see what's wrong Can someone help me with this problem? Run it in a debugger and see where you are dereferencing a null. 
c-17-75	X	undefined reference to a pointer in c I'm trying to run my program, but it keeps giving an error. I have 3 files and will include the code from one of the 3 functions that are not working. File: contacts.h File: contacts.c File:a1ms4.c Any idea why I'm getting this error: Probably you are compiling it the wrong way. Try this gcc -c a1ms4.c gcc -c contacts.c gcc -Wall a1ms4.o contacts.o -o contact I just hope is actually Remember, "? is not the same as " The same goes for this one: and these too: Make sure that there is only one version of contacts.h in your include path and you have included the exact file you intend to. 
c-17-76	X	Opaque struct with C linkage & C++ implementation Say I want a struct foo with C linkage. I'll declare it in a C-style header file (foo.h) opaquely: But I want to use C++ in the implementation of foo. Say I want foo to contain a std::vector<int>. Since C code wouldn't have access to foo's fields, I don't see why the compiler (or language standards) should prohibit this. But how would I do that? Can I just put extern "C" around the implementation of foo in foo.cc like this? A struct is compatible between C and C++ as long as the content of the struct is POD (plain old data). If you add non-POD into it e.g. your vector, it no longer is compatible with C and will cause undefined behavior when used with typical C functions like memset or memcpy. The non-POD members cause another memory layout of the struct, it gets a virtual table at the start of it to support inheritance. I've ended up stuffing C++ under C a lot...here's the general gist of it. (And as an aside, letting C++ exceptions unwind the C stack can cause issues for the C code that is unaware such things can happen...so it's advisable to do some catch(...) blocks in the C++ interface functions.) lib.h: A header file that declares a few functions with C calling convention no matter whether it's compiled as C or C++ lib.cpp: A C++ library with a few functions declared with C calling convention main.c: A C program that uses the C calling convention functions exported from lib Makefile: a makefile that builds the C as C, and the C++ as C++, then uses the C++ compiler to do the link Output: Struct by itself is just a type, in other words a syntactic sugar which does not exist beyond compilation as a struct, but just as several bytes in memory and pointers to it. Therefore it does not have any language specific linkage. Meaning of bytes is defined by the compiler at compilation time and references to them are created also there. So, its layout depends on the language you use. Answering your question, the std::vector implementation contains certain fields which become a part of the struct layout. c++ understands them, since it understands templates and all other object-oriented stuff, 'c' will choke on the template in the first place as well as other c++sness. So, struct definitions are not compatible if you use non POD data. If you use POD, standard 'c' data types, no member functions and no bit fields, you should be all set and compatible in definition. Which means that both compilers will compile the struct and the layout will be similar, so that you can save/restore it cross languages. If you are talking about just passing the pointers to a c++ struct through a 'c' code, than you should be all set in any case. you can use cast to 'void*' to do so in a standard way. 
c-17-77	X	How to access c objects in c# I am basically .net developer and having zero knowledge on c. Today i got below task. There is a c program to add two numbers. C program contains method which takes two numbers to add as parameters. Now I want to access these c methods(objects) in my .net MVC or webapi2. I should call c program(object) to add two numbers and should give output in HTML using .net. I have no idea where to start this! Can someone educate me on this or someone share me usefull links to in order to understand in better way. Any help would be greatly appreciated. Thank you. 
c-17-78	X	reliable serial port data validator for linux I'm trying to write a program for Linux that validates that a data is a certain sequence of bytes as follows: The remote device is a circuit that uses an AT89C4051 microcontroller and both are setup for 57.6kbps baud. I ran some tests. When I used the code below, I often receive the following set of bytes as hex values: But when I ran the following command: and checked the screen data, it looked accurate. Then I exited screen and ran And the output data there looks more accurate than the data my program produces. In fact, at least 6 of the 8 bytes are shown in the correct order. Is there something I can modify in my code below so that I don't have to execute the screen command and exit it and execute the od commands all the time to see more valid data? (In particular, I'm trying to avoid manually calculating the data checksum) For now, let's assume the devices are connected via a short physical serial cable and that they are both powered on with no power interruption. 
c-17-79	X	text to decimal C Manual conversion. For example, input = axe, why the dec of 'a' (97) always in endless loop? Can't move to 'x' dec and 'e'? You've declared data as type char, meaning it can only hold a single character value ('A'', '1', '0', '\n', etc. ). If you want to be able to store a string to data (such as "axe" or "foo" or "Supercalifragilisticexpialidocious"), then you will need to declare data as an array of char, and the array size must be at least one longer than the length of the longest string you intend to store: As for the endless loop, 'a' (97) is never equal to i (0), and you never update the value of either entity in the loop. You have to update one or the other each time through the loop. Here's what I think you're going for: This code takes a string input by the user and prints the encoding value of each character (ASCII, EBCDIC, UTF-8, whatever) as an integer. 
c-17-80	X	extract numbers from dates in C I got an assignment to convert numbers from a date. we get the dates as a char string like 18.2.2014 for example, and I need to extract the integers 18, 2, 2014. my way is not perfect... what is the best way in your opinion? Using strtok() function extract the 3 numbers as char* with delimiter .. For each of these char* - go char by char from the LSB to MSB, find this char i's numeric value (like you did in your code) and multiply by 10^i, and accumulate all these numbers. I don't know if you are fine with it but you can directly do this in scanf() itself. Just take the input as This will ignore the '.' from input in specified sequence. Correct me if I am wrong. Else you can use sscanf() function as follows: There are many ways to solve this. A simple question is how much code should be used to detect invalid input? Staying with the C standard library, code can process the string multiple times and catch many errors. Check format. "%n" saves the offset of the scan if it got that far. "%*2[0-9]" matches 1 or 2 digits, yet does not save the result. This is unlike "%d" which allows leadins spaces and '+' or '-'. If n is non-zero that the scan was completely successful. So if that is the end of the string, then - oh happy day! 
c-17-81	X	Why does this for loop stop instead of terminating? The program compiles, but i have an error with the input function below, the array size is 50 which is defined. I will provide an example input that i used 2 4 6 8 10 1 300 5 7 9 -1 My problem is that the loop control expression in the for loop seems to stop rather than exiting the loop when it reaches -1. When I just used a -1 for input, the loop stops on the second evaluation of the loop control expression. I have been trying to solve this issue for the past three hours, any help would be appreciated. Thanks. and here is the main function and the top, as well 
c-17-82	X	Preventing char input into switch statement I've been trying to make my code more robust by preventing incorrect data types being entered into inputs, my problem is that I can't find a solution to stop people entering letters or symbols into the switch statement variable. This causes the entire function to loop infinitely. The program seems to loop due to the default case in the switch statement. I have rewritten my code to simply show the error so it can be easily copied and pasted for your own testing. 
c-17-83	X	How to define a structure with a function pointer by using ctypes? I want to call av_find_input_format function (from dll coded in C) from Python. The function define as follows: In order to call it successfully, I must define a structure AVInputFormat as its return value. The AVInputFormat structure is defined in C as follow: What should I do? Additional explanation, now my Python as follows: But it runs error with ValueError: NULL pointer access 
c-17-84	X	Initializing a function pointer without the '&' operator I was playing around with function pointers, and ran into something that intuitively doesn't fit with my understanding of pointers in C. Take a look at the following code: If I treated function pointers like any other pointer in C, I should expect void (*blooptr) (int) = fun; to trigger a compiler warning against incompatible types. My code compiles (silently) and works as expected. How does C let me initialize a function pointer without the & operator, like I would do a regular pointer, without even a compiler warning? Is this one of those cases where I'm accidentally getting the right behaviour, though I'm technically in undefined behaviour territory? If someone could explain why this works, with some insight (references to literature will also do) into the nature of function pointers, that would be great. I tried looking around for this specific question, but couldn't find anything related. Seems a bit fundamental, so apologies if it's a dup. Function type in C automatically and implicitly decays to function pointer type (as if unary & operator was quiety applied). This decay takes place in all contexts, with the exception of unary & operator and sizeof operator. For this reason and are two alternative ways to say the same thing. 
c-17-85	X	Prevent OpenGL from Buffering Frames I am writing a program that requires extremely low latency texture to screen streaming (under 10ms), I have implemented this using GL_ARB_buffer_storage which works great for the streaming, and vsync to prevent tearing. However I have discovered that the NVidia pipeline will buffer from 2 to 8 frames when calling swap buffers before it blocks, I need to prevent this. What I have done is the following: Then in the draw thread I do the following: This solution works great on NVidia hardware but is reported to not calculate a proper present time on AMD GPUs. Is there a better way to do this? I know that glFinish normally shouldn't be used in an application except for profiling, but I can't find another way to ensure the GPU pipeline is not buffering frames. Edit: For those interested this effectively emulates FastSync under Linux, but without disabling vsync. Edit2: Perhaps the present time function should be implemented a bit different: I found the answer, there is a little known OpenGL extension called SGI_video_sync, using this it is possible to wait for the next frame. ie: 
c-17-86	X	Sorting an incrementing list in C I am trying to create a list of employees and sort the list based on age each time I add a new employee. The problem I am having is that only a list of 1 employee is "sorted". If I add another employee suddenly all of the ages become 0. Here is my code: I think that I might not be increasing correctly. Header file: main() (in menu.c) I left out the rest of menu.c because it only prints the menu which you'll see below. The output should look like: I added some extra print statements just to show what it is supposed to be doing. I'm also worried that it is only going to sort the age and not the rest of the information Firstly in employee_add when calling employee_sort you are passing the last struct element. Pass the first employee. Change last line in employee_add to employee_sort(list); Next problem If I add another employee suddenly all of the ages become 0 No it doesn't. In employee_sort in the for loop before sorting, change it to Next While taking age and wage input change it to I'm also worried that it is only going to sort the age and not the rest of the information Yes you are only sorting age, you should sort whole struct based on age. And the final problem of printing sorted list PS Note the list[I] in every printf and not list[i+1] Edit Instead of sorting it yourself, you can use qsort biult in function in stdlib.h header file. Implementation: You will need to define a comparator function as you dont have a traditional array to sort Just define a function And then where you sort the list call qsort like this 
c-17-87	X	C Bitwise operation i'm trying to make a function such that it will return to me every single combination of true/false or in this case 0/1 for the number of variables What i'm trying to do is return the True/False or O/1 combinations total, the length of what it should be printing is equal the n. In this case: 1 should return 00 2 should return 01 3 should return 10 4 should return 11 
c-17-88	X	getenv() returning environment as null? I am trying to print the executables in the current directory in c and bash with the following code: However, when I compile and run the c code, the result I get is: Any help will be appreciated! system() is creating a new shell and setting the environment in there and then throwing it away when that shell exits. getenv() is using the environment of the "current" process. Try getting the result of the system call and using putenv to modify the current environment. I tried Ahmed Masud's solution with popen and fgets and got a working solution: 
c-17-89	X	Why these rtm transactions act weird? I am trying to work with rtm transactions. I started using intrinsics to implement a simple transaction. But I found out the following line always returns zero, while for the transaction to successfully begin, it should be -1: int status = _xbegin(); Then, I tried putting the if..else in a loop to reach this code: The output of the code is "000111" and I can't understand why the first transaction fails but the second one does not. Also, if I make changes to printf inputs in the first transaction, the second transaction won't start at all and the output of the following modified code will be "0000": The same happens if I remove one of the printf lines, too. I want to understand why the outputs are like this and how to fix the problem? Note that I use immintrin.h and compile using "gcc -mrtm". 
c-17-90	X	How do I write helper function in C to return a random number from a specific range and avoid a segmentation fault? I'm attempting to write a program in which a helper function returns a random integer between -999 and 999 and returns it for use in the main function. However, despite many different tweaks and simplifications of the main function to debug at bare bones, I'm still getting a segmentation fault. What am I missing? What am I doing wrong? Compiling with -Wall gives you the clue: Your rand() function is calling itself, not the library rand(), as they have the same name. Rename your function. Renaming it to rand1 works fine here. Which rand() do you want? Your version or the system one? Seems it is picking up yours which is recursive and so will blow the stack. Try renaming it int myrand(void) { 
c-17-91	X	I am writing a C program to hold two columns of numbers,I need to get rid of many zeros printing before the values of my .txt C programming If there is any confusion about how to see data and what is printing click data.txt and "this" respectively I am trying to scan a .txt file, store it in an array, and then print the numbers. I have to do a number of other manipulations with the numbers but I have to get this right first. My data.txt reads data.txt First off, my program is not printing the data for 2005. Secondly, it is placing a ton of zeros before my year and data point. This is just a test .txt file so I will need it to still be a float or double, even though I think that the variable type is the issue. All I need is for the array to print without so many zeros before the values. It currently prints as this. I would also like it to print in column form but I'm sure that is just dinking around with the print statement. My code Any comments or suggestions would be greatly appreciated! I am a freshman engineering student who has never done this before so if i miss something obvious I am sorry. 
c-17-92	X	How does GCC protect against hijacking the stack pointer? One of my professors mentioned that a common way attackers/hackers attack is by hijacking the stack pointer, so when the "ret" is called, the instruction's memory address at the top of the stack is their own instructions (hence executing their code). What I'm curious about is how do people hijack the stack pointer, and how does gcc protect against that? 
c-17-93	X	free() errors in c program I seem to keep getting either a free() invalid pointer, invalid size, or double free/corruption errors in my sfs_fread method here: } The test code uses randomizers, leading to the three different errors. There are no double frees that I can see and temp is a void* global variable. I have tried debugging to no avail but I know that the problem lies in this method since after commenting it out it finishes running. Thanks in advance for your help. 
c-17-94	X	Segment fault while reading a string into a char* array I am trying to read some strings and then print them into a matrix form. Any suggestion what I am missing here? char *buffer[BUFFER_SIZE] is an array of character pointers. The way your code is now, buffer[i] is a char * that is uninitialized at the time you scanf("%s",buffer[i]). You need to allocate memory (malloc, perhaps) for scanf to store the string of characters prior to this point. 
c-17-95	X	C - Cannot check for empty value with scanf? After using scanf, I'm attempting to check if the user hit enter without a value. However, it seems to not get past the scanf line of code when the value is empty. (I believe scanf ignores/trims off after whitespace?) Basically when I run this and enter an empty value, it keeps scanning for more input and never gets to the if statement (to determine whether or not the input is empty). I think you cannot scanf for this. if you scanf one value and enter 100 empety value scanf not complete. now u can :: 1- use other number or other char to run your orders . for example say if you want to stop enter -1 or 'e' ... 2- use puts()and gets() ... I think u can solve with this ways .. good luck; 
c-17-96	X	printf variable placeholder? Is it even a thing? So why (2) works and (1) doesn't? There are two problems with pos. First what you have is a character array, not a null terminated string. You need to add a 0 to the end of that array. Second, you don't have the same characters. In the string literal "\033[9;9H%s" there are a total of 8 characters while pos has 13. The sequence \033 represent a single character whose value is 33 octal or 27 decimal. You instead have the literal characters '\', '0', '3', and '3'. So replace 92,48,51,51 with 27. Also, you have 34 for the first and last characters in pos, which is the double quote character ". These characters are not part of the string literal but are used to denote it in code. So get rid of those. pos should now look like this: You've got three differences: You don't need the initial and final 34 character ("), since string (2) doesn't print them out. You need a null terminator to ensure that you print only your string and nothing more. If \033 is meant to be an escape character, then its value is just 27, not 92,48,51,51. After addressing those differences, your pos array: Should instead look like this (aligned to match the original array): 
c-17-97	X	strtok and it's usage I'm working on an assignment that requires string and file manipulation. I'm currently working on the string manipulation part and I'm trying to use strtok to separate lines in a file, split by a comma. However, I'm not sure how strtok works. I'm looking at the code below and don't quite understand why there is a NULL in the second strtok call, when NULL isn't even a string. The code I'm running: /***************************************************************** * * Purpose: Program to demonstrate the 'strtok' function. * Author: M J Leslie * Date: 23-Apr-94 * ****************************************************************/ From the documentation: Each subsequent call, with a null pointer as the value of the first argument, starts searching from the saved pointer and behaves as described above. 
c-17-98	X	Segmentation fault when attempting to print int value from x86 external function I'm trying to learn how to use the x86 DIV instruction. Here is my external function located in a .S file: Here is my C code: As you can see I am testing to see if 10/5 = 2. Using GDB I verified that 2 is indeed in EAX right before executing RET. However I am still getting a seg fault. GDB has shown me that EAX changed in between executing the function and printf. Why is this the case and what can I do to prevent this? In case you need to know I compiled this by running gcc test.c divExtern.S -m32 -o test 
c-17-99	X	Read strings in C from txt file I'm trying to read some strings from a txt file. Each line has a 5 digit number, a full name that occupies 51 characters (including spaces), 2 city names, each one occupyng 11 characters including spaces, and one number. Example: I can now scan the first 2 strings, but I can't scan the city names, nor the last number. Here's the struct: here's the way I'm reading the file What am I doing wrong? when I print the city names, nothing appears! Since you have fixed columns, I would consider just reading in the data and doing my own scanning with something like: I am not sure what you wanted to do with the data variable but this will give you an integer. Observe, the biBuf and dataBuf variables are allocated in the loop so they get set to zeros each time. 
c-17-100	X	C - Segmentation fault after freeing dynamically allocated array I'm trying to create dynamically allocated array of clusters, where every cluster has its own dynamically allocated array of points. I am able to initialize clusters array and populate it with this function: In main I want to create the array, fill it with function mentioned before and then free it. When I compile and run this program, it crashes at second iteration of freeing with segmentation fault. I have spent last 2 days digging through the internet, but didn't find anything about what I'm doing wrong. Can anyone point out where is the mistake I can't see? This doesn't look right. It should be The following bit: does not allocate the correct amount of memory. i will be some number greater than zero, but you've only allocated space for one Point. You're smashing your heap and a crash will follow. There is no need to cast the return of malloc, it is unnecessary. See: Do I cast the result of malloc?. malloc returns void * compatible with any pointer. A cast can only serve to muddy the waters. Simply allocate your pointer points and then call sizeof on the dereferenced pointer, e.g.: While a correct statement for the allocation, it wholly fails to validate the allocation succeeds, instead, check the return from malloc is not NULL, e.g. The same for the allocation of *arr, e.g. (note: how_many_clusters was shortened to nclusters, we are not writing a novel) Your primary problem is: You only allocate memory for one Point struct, therefore points[i] makes no sense at all. You allocated sizeof(Point) -- how many of them do you think there are? Since your goal is to copy point to the newly allocated block of memory at the address held by the pointer (*arr)[i].points, "How Do You Access (or Set) the value Referenced (e.g. Pointed-to) by a Pointer?" (Answer:, you dereference the pointer to obtain the value). That's all you need do here. No additional [..] tacked on the end to dereference (*arr)[i].points, just dereference it with the unary '*', e.g. Putting the pieces altogether, you can do something like the following: (note: you do not have to free each clusters[i].points in reverse order. (it's not wrong, there is just no need to go out of your way to do it). Just free them as you work your way through the loop.) Example Use/Validation In any code you write that dynamically allocates memory, you have 2 responsibilities regarding any block of memory allocated: (1) always preserve a pointer to the starting address for the block of memory so, (2) it can be freed when it is no longer needed. It is imperative that you use a memory error checking program to insure you do not attempt to access memory or write beyond/outside the bounds of your allocated block, attempt to read or base a conditional jump on an uninitialized value, and finally, to confirm that you free all the memory you have allocated. For Linux valgrind is the normal choice. There are similar memory checkers for every platform. They are all simple to use, just run your program through it. Always confirm that you have freed all memory you have allocated and that there are no memory errors. Look things over and let me know if you have further questions. 
c-18-1	X	Reading from file to dynamic array with Fatfs and PIC32 I work with xc32 compiler and fatfs. I try read information from bitmap and write it to dynamic created array: In Size image is 192 and the program stops on "f_read(&file,&bitmapImage,100,&size);" function. Where is a problem ? When I have static table there is no problem. 
c-18-2	X	'For loop' to arrange Numbers in ascending order. [ERROR] pointer and integer comparision This is a very simple program, to arrange numbers in ascending order. Now here I don't know how it says there is the comparison between integer and pointer, in all the for loops. I am a noob by the way. You are using i < number where i is int and number is an array Just change those lines to below the following proposed code: properly checks for errors properly outputs error messages to stderr properly minimizes the scope of variables cleanly compiles incorporates appropriate horizontal spacing after commas, after semicolons, inside parens, around C operators performs the desired functionality makes use of a VLA (variable length array) so the number of numbers could be most any positive number separates code blocks (for, if, else, while, do...while, switch, case, default) via a single blank line does not contain random blank lines documents why each header file is included does not allow the user to enter a negative count for the number of numbers follows the axiom: only one statement per line and (at most) one variable declaration per statement. And now, the proposed code: 
c-18-3	X	Passing an Asterisk into a string in c I have a question about putting a * into a concatenated string and having it print out the asterisk. My code takes 2 parameter strings, and needs to return a pointer that is the First string and Second string concatenated BUT I need it to have * inbetween each character. (Ex: String 1: 09876; String 2; 12345 result; 0*9*8*7*6*1*2*3*4*5); My issue isn't with trying to print this result, it's adding the asterisk, especially since C won't let me just declare a * or have a pointer point to *. So I'm a bit stuck. Here's my code I supplied just my function, because this is the only part of my code I get problems. EDIT: The 29 in my Malloc is to keep account of asterisks and the NULL character (The parameter strings have a maximum of 30 characters) I fixed my problem of adding the asterisk thanks to the community, now I get a segmentation fault, this should be fun. asterix doesn't need to be a pointer, it's just a single character. You're not using the correct size when allocating the result string. It needs to have 2 characters for each character in the two original strings -- 1 for each of the characters you're copying, and 1 for the asterisks in between. You need to add a null terminator to the final result. This can replace the final asterisk, since you're only supposed to have asterisks between the characters, not after each character. 
c-18-4	X	What will execve() overwrite from the current process? I'm writing a minimum shell program using C for practice purpose. And here is a snippet from my code: And here I have few questions: I block the signal and redirect I/O before execve(), and I wonder will the new program overwrite these status? And what will be preserved after calling execve()? And what should I pay attention to (with respect to writing a shell program) 
c-18-5	X	C programming: the difference between getchar vs scanf what is the difference between getchar and scanf? I know that getchar is unformatted input and scanfis formatted. Also, I understand that for scanf you have to use a conversion specifier. My question is fundamentally what is the difference between the two. They get input from the user but do they function differently? How? 
c-18-6	X	Linked Lists Structures How can I link my variable num->next for my structure NUMBERS so when it is called again I dont lose the numbers I have inserted previously. For starters according to the C Standard the function main without parameters shall be declared like Also it seems you defined the function add_number inside the main (if you did not omit the closing brace for main). The C Standard does not allow to declare a function inside another function. Usually if a singly-linked one-sided list is declared then nodes to the list are added to its beginning. Here is a demonstrative program that shows how new nodes can be added to the beginning and the end of a singly linked list. Its output is 
c-18-7	X	Catching signals I'm trying to write this little game. What I want is that when the time is over the program prints "off time" and then it ends. Why does it prints and not end? 
c-18-8	X	Swapping / Bubble Sorting is eating the Linked list (C) I've managed to make a one for all swapping procedure, and then managed to make the sorting list procedure. But the problem is that the sort function is actually devouring the swapped item instead of just swap it. while the swap function is actually working. Half swap takes one parameter and simply swap it with its successor. The linked list is simply a set of random integer. Hereby is my whole program: 
c-18-9	X	How to code for optional command line parameters in C My program has to accept optional command line parameters where there will be either 1 or 3 parameters (executable, number of rows, number of columns). If argc is anything other than 3, we have to create a board that is 10x10 (I've already made a function to create the board). I'm not sure how to account for this. One restriction on main.c is that we're only allowed to declare/assign variables and call functions, so I'm stuck on how I'm supposed to make this work. My initial idea was to write a function correctNumOfArgs to check if argc is 3, and then return true or false. I would then use that result in a different function to determine how to create the board, but that would still require me to pass argv[1] and argv[2] as parameters in the function and they might not even exist. How do I get around this? Note: I looked at other questions regarding optional command line parameters and they suggested solutions more advanced than what we have learned. Is there a more basic solution to this? It doesn't matter if the arguments don't exist for a code path you don't take. What I mean: If numArgs is not 3 then that path is not taken so the non-existent arguments aren't used and are never evaluated. You can pass both argc and argv to a function and have it return rows and cols. You can do it quite easily with variable assignment using a ternary operator to check if argc > 2 and if it is, convert the supplied arguments to rows and cols, otherwise, use the default 10 for each, e.g. (note: always check for error in the conversion before continuing -- you can move this to a function and fully validate the strtol conversion by checking nptr against endptr to insure characters were converted, and then saving the value to a temporary long value, you can insure the values are between INT_MIN and INT_MAX (and reasonable) before assigning to rows, cols) If you must use a function, just pass a pointer to rows and cols as parameters and then set the values stored at each respective address within the function. That way you have a simple function call that can return 0/1 for success/failure and update the values for rows, cols through the pointers passed as parameters. 
c-18-10	X	Compile ffmpeg library statically using visual c++ When I try to compile ffmpeg library statically using visual studio 2015, with following configure options surprisingly, I get .a libraries instead of .lib. How can I compile ffmpeg to generate .libs ? 
c-18-11	X	C warning: implicit declaration of function 'htons' & 'ntohs' & 'rand' - are they missing headers? I'm very new to C programming so wondered if anyone could help with these warnings. (I am trying to compile someone else's code, I couldn't code these lol) I managed to fix the above warnings by including the below missing include statements in the appropriate files. However the below warnings still persist and I cannot work out which include statements are missing. When I do man ntohs , man htons and man rand I cannot see any specified libraries that should be included in connection.c and util.c files 
c-18-12	X	Shifting Extended ASCII codes When assigning Extended ASCII codes to an unsigned char, I noticed that the values are shifted upwards when they are written to a file. I condensed my code into this simple program to briefly present my question: If I run this simple program, I get this terminal output: This is correct. If I now add the following to the above program: It runs correctly but if I now go to the O/S and run: I get this output: As you can see the Standard ASCII code (below 128) is correctly shown; however the Extended ASCII codes (above 127) are changed. I expect them to be 150 and 175 but they are 226 and 257. If I remove the binary flag from the file open command, the result is still the same. As a final check, instead of the binary print (fwrite), I changed the code again and looped through the array and did a fprintf of each item like this: Here's the OD display for that: This all tells me that the binary print (fwrite) isn't doing what I expected. It's my understanding the fwrite command writes the binary data to the file. In that case why does it successful write a value less than 128 but it fails with values equal to or greater than 128? Environment: Code::Blocks 16.01 Centos 7.1 Note: I did find this similar question: fwrite with non ASCII characters but it didn't seem to help with my situation. I could be wrong. Please let me know if I missed something in that post? You are printing in octal (that's what od does by default), 226 octal is 150 decimal. 
c-18-13	X	What is the required allocation of a char that is to be converted to an int from stdin Hear me C gods, I am but a newbie: Trying to get an input char that will be a small int, convert it to an int and then print it out again. What is the correct allocation of char x[1] for this to work? In the end my program just screams at me. EDIT thanks to an answer below, this works: It seems I needed to account for an additional char \0, once that was done in the allocation, then I could use isdigit by indexing the char array and do the same for the conversion. Whether this is recommended use though I'm unsure(I suspect not). Your input does not get automatically converted into an int. For example if your user typed in "67 (enter)", what you should expect in stdin is char array of {'6', '7', '\n', '\0'}. What you want to do is to allocate a big enough array, save the user input from stdin, then use atoi to do the conversion. 
c-18-14	X	How to open more files than FOPEN_MAX? I am compiling a project using a dedicated DSP processor C compiler (runnning it from Cygwin). I tried to open 30 files, but failed. printf("Error number %d \n", errno); gave me 0. How can I open more files than defined by FOPEN_MAX in <stdio.h>? 
c-18-15	X	Read data from serial port in FreeRTOS We have a issue during reading data from serial port. The C function which is used to read data have a argument for the data size in bytes. In order to read data we need to know in advance the size of the incoming data. We use RFID reader via serial port connection. Data is send to Nucleo board in different size each time. The other problem that we face is the Nucleo interruption during reading data. When we receive the data in height speed we need to initiate it again. This leads to data loss in height data transfer speeds. One possible solution will be to use DMA(direct memory access) but we are not familiar wit this approach. Can you propose some solution? I find your question confusing as you don't clearly state what the issue you are having is and you make assumptions that others will know how the functions you are calling are implemented. In any case is sounds unrelated to FreeRTOS. 
c-18-16	X	Unexpected output for sscanf I am inputting a file and parsing the text into tokens. I am attempting to take each token which consists of a real and imaginary number and trying to print them out into separate columns. Ex input file format: [[[0+0i 1+1i 9-345i -7654-1234i][0+0i......][...]][[......]]] The resulting output is suposed to be: I am able to successfully pull in the file and the tok was tested and it was correct. The only prblem is once the tok is put through the sscanf statement all the output is: 0 0 for all the items in the array. The simplistic form was tested and it also gave the correct output: This worked like a charm However when I apply this to my code, i am only getting zeros. My code is the following: Feel like this is a very simple solution I'm just missing something. Thank you in advance for the help. 
c-18-17	X	OpenCV leaks memory (cvResize, cvCreateImage) I'm running OpenCV on a RaspberryPi and use OpenCVs C interface. I need to resize the dimensions of an image from a webcam, therefore I used the cvResize() function. It works fine but after a few seconds I run out of memory, since I'm executing the code inside a while(1)-Loop and read about other people having this problem, I suspect a memory leak. Here is my code: I already tried to free the reserved memory at the end of each iteration using cvReleaseImage(&frameRaw) (or &frame) but that always caused a segmentation fault. Using cvReleaseImageHeader() caused no segmentation fault but also didn't free any memory. Also I tried to change the capture-resolution of the frames via cvSetCaptureProperty() but that did nothing. Can someone help me understand what's going wrong here? Thanks in advance Thanks to @DanMaÅ¡ek I found the solution: After each while-loop iteration the allocated memory for the frame has to be freed. That can be accomplished using cvReleaseImage(&frame). The complete code now looks like this: 
c-18-18	X	Does this C code leak memory? So here is my code: I'm quite worried about whether or not it causes a memory leak, and how I can fix that in case it does. Oh, and I know that if I define another vector let's say w, such that w = fct(v) it would clear the problem, but I need a different method, one that would work even if the function is returned to the original vector. Sure it does. vector t is allocated twice, and freed once. The whole architecture looks problematic. Here you assign allocated memory to v.t. Then here you overwrite all fields of v with what was returned from fct. This discards the old value of v.t, causing a memory leak. The call to free at the end of main is freeing the memory that was allocated inside of fct. You can fix this leak by saving v.t and calling free on the saved pointer: Yes, you are leaking memory. w.t is never released. Also pass the structures via pointers not by value. Returning vector is also expensive. Your new program can look like this: OUTPUT: I'm quite worried about whether or not it causes a memory leak, and how I can fix that in case it does. It does. In main(), you allocate memory and point v.t to it; then you overwrite that pointer with one from the return value of fct(). The original pointer is lost, and you've no other copy of it, so the pointed-to memory is leaked. Oh, and I know that if I define another vector let's say w, such that w = fct(v) it would clear the problem, but I need a different method, one that would work even if the function is returned to the original vector. With every dynamic memory allocation comes an obligation to free that memory. You can consider that obligation to be associated with exactly one copy of the pointer to that memory, as a kind of notional tag. You can freely (notionally) transfer the tag to a different copy of the pointer. If the copy then bearing the tag ever goes out of scope or is overwritten with a different value, however, then you leak the pointed-to memory. Consider how that applies to your case: You allocate memory and assign a pointer to v.t. This is initially the only copy of the pointer to the allocated memory, so the obligation to free that memory is associated with it. You pass a copy of v, including a copy of v.t, to function fct(). You have two alternatives: the obligation to free can stay with the original copy of v.t, or it can be transferred to the copy received by the function. That is an inherent characteristic of the definition of fct(), and should be documented with it -- you cannot choose on a call-by-call basis. Since fct() does not free the pointer, you have implicitly chosen for the obligation to free to remain with the original copy. fct() performs its own allocation and returns a copy of the resulting pointer; that's the only copy that survives the execution of the function, so the obligation to free must go with it. By overwriting the original v.t with a different value while it holds an obligation to free, you leak the original memory. There is still an obligation to free the (new) value of v.t, but there is no longer any way to access the old dynamically-allocated memory. Now you had one option in there: whether to transfer the obligation to free as part of the function call. Suppose that you did transfer it; in that case, fct() must not fail to perform that free() before it returns. In that case, however, main() must not use the original value of v.t after calling fct(), whether it overwrites v with that function's result or not. So you have a choice: either fct() takes responsibility for freeing v.t (which it could pass on to another function if it wished, or which it could return to the caller via its return value), or fct() does not take that responsibility. Its callers need to behave accordingly. You cannot have it both ways. 
c-18-19	X	GetKeyboardType and GetSystemInfo realization everyone. I want to know hardware configuration but for it i must use thee other functions(hardware,keyboard,system).Buuut i have problem with the realization of two function(GetKeyboardType and GetSystemInfo). I found realization only on C# or C++ but realization on C haven't found( Please, if it isn't difficult for u, help me. 
c-18-20	X	How to run an .exe file downloaded with InternetOpenFile() in Winapi I have a C app written using Winapi and an .exe file that I need to download and execute. My code so far is: I read the file, what now? If I try to write it in a local file, it will stop at the first \0 delimiter, which is after 2 letters in my case. The file can be found at http://students.info.uaic.ro/~alexandru.antochi/exe_1.exe You must save the EXE file to a local file before you can execute it. You can't execute an EXE from memory (without writing your own EXE loader, or using a 3rd party one). InternetReadFile() reads arbitrary amounts of data, so you need to call it in a loop until the end of the response is reached. Write each block of data that is received as-is to your local file. Your claim that your writing "will stop at the firstÂ \0Â delimiter" means that you are writing the received data as null-terminated strings instead of as raw binary data. Binary files, especially executable files, contain plenty of 0x00 bytes in them. So this is a logic bug in your code that you need to fix. Try something more like this instead: Refer to MSDN documentation for more details: HTTP Sessions Downloading Resources from the WWW 
c-18-21	X	C Error: dereferencing pointer to incomplete type (list) I can't solve this problem. My list is: I want to create a function which deletes the last elem of the list. My idea of it is: The error "dereferencing pointer to incomplete type" appears on the while instruction. I suppose it's because the programme points to a temp->next that's equal to NULL so it could not take the "next" on it, but I don't get why, as the programme gets to the while only if there are at least 2 elements in the list, as I consider in the two "if's" the case of 0 or 1 element. Thanks for your time! Thanks to all of you, I changed the = with == and now it's working. The first part of the code is in the library (list.h), whereas the function is the c source file (list.c) I don't get what's the issue with "typedef"?... moreover, the list is actually made by the university teacher of who I'm following the course and I'm not supposed to change that, but just to write the function. 
c-18-22	X	Opening and Selecting a set of values from a separate data file in C Like the Title says, i need to figure out how to open up a .txt file and be able to: 1. save up to 5 SETS of values into the file from a structure and 2. be able to open that file later and choose one of these sets of values here I'm opening the premade file in the project folder to choose one of the set values that's been saved I need to fill in the if part of the statement where all of this would take place is where the program would ask if they wish to save the values they inputted themselves after saying no to taking an existing set of values from the file edit: I'm slowly adding stuff as I'm figuring it out 
c-18-23	X	How to send data back to C app from Java app launched via Invocation API using JNI? I have a Java app acting as GUI launched via the Invocation API for C The main C (MyApp) file looks like.: the last line method call makes me able to send data from C to the programmatically launched Java GUI. But how do I send data (boolean or string) back to the actual C app (MyApp) from Java - let's say on a button click in the Java GUI? It's clear that I can call C methods from within Java via JNI. The Java GUI app (MyGUI) holds for testing purposes: But the corresponding C file has to be compiled as so/dll file, so I have of course no connection between this library file (MyGUI_Print) and the actual c program (MyApp) I need the data in. From the MyGUI_Print I'm however able to print like this: This output is also reaching the actual C app's console output. But the C app itself has so far no knowledge of the "incoming" data. Any way I can programmatically access this string on the other side (C app)? Or is there any better solution? Theoretically I could of course do polling - i.e. asking from the C app every few seconds the current state of some variable in the Java environment. But I don't think that's a nice way of doing it. Actually you do have a connection between your executable and a hypothetical JNI library. They're in the same process so you can always pass some handle from C code to Java code and then from Java code to the C code in your JNI library. And the library can use it to call stuff from you main module. That said, I would skip the JNI part altogether. You could pass a function address to Java, then use JNA (https://github.com/java-native-access/jna) to call that function. It uses libffi internally. (If you don't want to pass function pointers around, JNA can also help you get the module handle for wherever your function is and then get the function via its name) 
c-18-24	X	C programming : dereferencing pointers I have these three files. using structures, functions and pointers. Trying to do this: void getName(Name *) - Receives a pointer to a Name and performs the actions contacts.h contacts.c a1ms4.c I'm getting the following error in contacts.c: error: dereferencing pointer to incomplete type struct Name scanf("%s", name->firstName); [EDIT: I minimized the code to this: and getting these error: 1). error: unknown type name Ã¢NameÃ¢ void getName(Name*name); 2). In function Ã¢mainÃ¢: warning: implicit declaration of function Ã¢getNameÃ¢; did you mean Ã¢getlineÃ¢? [-Wimplicit-function-declaration] getName(&contact.name); 3). At top level: error: unknown type name Ã¢NameÃ¢ void getName(Name*name) There are quite a few things wrong but I think your main error is that you have declared Name as struct Name so you need to use struct Name instead of just Name. When you say struct Foo {...}; in C, you are not defining a type with the name Foo. Instead, you are defining a struct by the name Foo **which is referenced as struct Foo. Thus, when you say void getName(Name*name);, your compiler rightly complains that there is no type called Name. Since it could not parse this function declaration, it subsequently complains about not knowing about that function when you call it. Ignore that second error, it's not your problem. Fix the prototype. There are two methods of fixing your program: Call your structs struct. At each and every instance where you have Name in your code, ensure that you are actually saying struct Name instead. Write a typedef that defines the type Name. Declare your struct like this: Since C programmers are lazy gits, they will usually merge these two statements into the following declaration: This declares both the struct Foo and its alias Foo in a single statement. You'll see this a lot in real code. The form of the typedef deserves some explanation. I find it easiest to think of it as a variable declaration with typedef prepended to turn the variable name into a type name. I.e. if you can declare an array of strings with then you can give a name to its type with After that, you can declare the above array with a simple So, when you say the second Foo is the name that is being declared, and the type it aliases is the rest of the declaration without the typedef: struct Foo. 
c-18-25	X	Issue with fgets() inside of a do-while loop in C Hello. I have a problem with a code I have created to decide if an input string is a palindrome or not (word is the same if read in wrong direction). The actual code in itself works as intended, however when I tried to put a loop on the whole code it started acting weird. So what I expected was the code to run again and ask for another string to be entered, however it doesn't. I read around a bit about this and it looks like what is happening is what a newline (\n) is still in the input buffer and the fgets is skipped. I tried using a getchar() after the fgets to consume eventual newlines but it did not solve my problem. This is the output I am getting: The output Any ideas on how to solve this? I am new to programming and I would love to hear on how I could improve my code generally, although my main concern right now is fixing this loop issue. Thank you! EDIT: The only function from string.h that I am allowed to use is strlen(). (This is my first time posting on this site, I am sorry is the post is horrible for your eyes.) Where the newline is getting left in the buffer is after the getchar call at the bottom of the loop. It only reads one character, so the newline (and any extra characters you may have entered) are still left. So when fgets is called on the next iteration, it reads just the newline. You need to flush out the input buffer at the bottom of the loop by repeatedly calling getchar until you see a newline: 
c-18-26	X	How to programmatically drive ISR on M0+ I'm writing some Unity unit tests for an embedded project running on an Arm M0+. Some of my APIs depend on wether they're called from the ISR context or not. So I want to programmatically drive an interrupt. In pseudo code, I want my test to look something like: The part that I need some direction in is how to trigger the ISR. I saw some references in the M3 docs about a Software Interrupt Trigger, but I'm not finding anything like that for M0+. A "workaround" solution might be to grab an unused timer, use it's ISR, then set it's compare to 0, and start it so it drives the interrupt. Or maybe a similar scheme with an unused pin which I configure? Is there a more direct way to accomplish this? Based on the hints from @user58697 and @andymango, I came up with the following scheme. -1 Determined that for my board (SAMD21), there was no peripheral at IRQ 21. -2 Copying the other alias dummy handlers in my resetVectors.c file, I added: -3 Modified the DeviceVectors structure to set .pvReserved21 to that: -4 Implemented a void PV21Handler(void) { } function that actually does something -5 Used the following to enable the interrupt: -6 Finally trigger the interrupt with: The poll for clear status was necessary since there seems to be a slight delay between setting the interrupt and it actually happening, so to get a true edge, I had to assert it low first. 
c-18-27	X	MPI broadcast array of strings is it possible to broadcast array of strings defined as I have tried and where linesCount is number of strings in array. How can it be achieved? Assuming the strings that you store in the lines array may have a varying size, you can first broadcast an int array of sizes of each string and then broadcast each string separately, MPI_Bcast can broadcast only elements that are contiguous in memory - in this case the int array with sizes, lin_siz and each line stored in lines. This may not be a very elegant solution and better is surely possible but it works. It was tested with the following array with p_rank being a standard processor rank obtained with MPI_Comm_rank(MPI_COMM_WORLD, &p_rank). And successfully printed at the end as I can post the entire test case if you have issues implementing my answer. 
c-18-28	X	C - Function Pointer Array - How to call function from array depending on opcode Hello StackOverflow Community, How do I call a function from a function pointer array based on the passed opcode? For example when I read the opcode '0x1A' and pass it to a function pointer array I want to call some function for example 'add()'. How can I do that without using switch/case ? My function pointer array: My Codebase: 
c-18-29	X	How can I convert char pointer to __uint8_t array in C? I need to convert a string (char*) to an array of __uint8_t. I know the latter is an alias of unsigned char but I can't figure it out how to proper convert it. Example: This is need cause I have to call an API that accepts only an array of __uint8_t and not char*. If I try to cast: I get the follow error: Sorry if that's a silly question, last time I've played with C I was a teen. Thanks in advance! Just cast: Note: this violates const-correctness. You have to make sure yourAPIFunction doesn't mutate name. If it does, then you'll need to memcpy (and free!) it to a local variable, and provide it that, so its mutations don't effect the pooled-string used by any other users of "My Full Name". Response to your (completely different) updated question: Those arrays have their storage in-line, they're not pointers to the heap like a typical char *.. You need to copy the contents of your string into them: I need to convert a string (char*) to an array of __uint8_t. I know the latter is an alias of unsigned char but I can't figure it out how to proper convert it. Being pedantic -- because it matters here -- a C string is not a char *. Rather, it is a null-terminated array of char. These are accessed and handled primarily via pointers of type char *, largely because that's how one works with arrays in C. Thus, no, you do not want to convert a char * to an array. It appears that what you want to do is copy the contents of the array to which it points. For your particular purpose I would use the strncpy() function: Note well that with that code, if ssid is longer than wifi_config.ssid can accommodate then the latter will end up being unterminated, and that otherwise its tail will be filled out with null bytes. Given the type of that array, such behavior may be precisely what is needed. If you want to ensure null termination, however, then simply overwrite the last byte of the array with a 0 after the strncpy(). 
c-18-30	X	Is there an alternative to getline() in C I am writing a Program which works as expected however one of the requirements is that I am not to use getline() is there an alternative to this. I have tried fgets but I get a segmentation fault. The only line I have problems with is: As I said, I would like to replace the getline in the first line of the snippet of code with an alternative. It would be acceptable if I would replicate the function of getline() and then insert that into my code. However I don't know how to do that. Use scanf The [] is the scanset character. [^\n] indicates that while the input is not ('\n') take input. The %*c specifies to reads the newline character from the input buffer, and the * indicates that this read in input is discarded. you can read about scanf here Note: The space before % is important especially if you have multiple scans in your code 
c-18-31	X	C - declare and init array inside struct language: C i am trying to declare and initialize an array inside a struct and pass it to a pointer, which is itself declared in the struct xD yes, i know my attempt is... let's say "not correct" :D but it would be very useful if something similar would exist. any ideas? later, i want to access the values ... the only error is Once you take a pointer to the first element of an array, you can no longer find the size of the array through that pointer. So you will also need to make variables to hold the array size. (Or use a sentinel value for the end of the array). One way to solve your problem would be through ugly macros: It would also be possible to define static named int arrays and then use that array's name in the initializers for structvariable_a. Consider using int const * and int const[] respectively, if you don't intend to change the contents of the arrays at runtime. Note that if this code is in a header, each translation unit will have their own copy of the arrays. Update (as suggested by comment): using a sentinel value would look like: and the in main or whatever, you look for INT_MAX to know where the end of the array is, e.g.: Obviously this means the range of valid data for the array needs to exclude the sentinel value. The error you're getting is because ARRAY_SIZE expects an array, and structvariablepointer->section_A is not an array but a pointer. Since your structs effectively have fixed size arrays, just declare them as arrays instead of pointers: Then initialize like this: i am trying to declare and initialize an array inside a struct and pass it to a pointer, which is itself declared in the struct xD That doesn't make any sense whatever, but your actual code is almost completely correct in C99 and later. In particular, this: Is neither a declaration of nor (quite) an initialization of an array; rather, it is a compound literal of type array of int. Because arrays decay to pointers in the context given, as in most, such a compound literal can indeed be used to initialize a structure member of type int * (to point to the first element of the array). Having successfully initialized those two struct structname objects, you can certainly obtain their addresses and record those in variables. HOWEVER, a pointer to an array element does not carry information about the number of elements in the array. If that's all you have, as is the case in your main() function, then you cannot determine the number of array elements from it. You need to be able to determine that from the content (this is why C strings must be null-terminated), or you must have that information from some other source, such as a function argument, a variable, or clairvoyance. yes, i know my attempt is... let's say "not correct" :D but it would be very useful if something similar would exist. If you declare the members of struct structname to be bona fide arrays then you can access and use their declared lengths. If you prefer, you can store the number of array elements in additional members of that struct. Both of those approaches are used in the wild, as are approaches based on the contents of the pointed to elements. But I don't foresee C ever gaining a facility for making your ARRAY_SIZE() macro work with pointers as it seems you would like. 
c-18-32	X	Matrix Multiplication of size 100*100 using SSE Intrinsics the above code I made to make matrix multiplication using SSE. the code runs as flows I take 4 elements from row from a multiply it by 4 elements from a column from b and move to the next 4 elements in the row of a and next 4 elements in column b I get an error Segmentation fault (core dumped) I don't really know why I use gcc 5.4.0 on ubuntu 16.04.5 Edit : The segmentation fault was solved by _mm_loadu_ps Also there is something wrong with logic i will be greatfull if someone helps me to find it The segmentation fault was solved by _mm_loadu_ps Also there is something wrong with logic... You're loading 4 overlapping windows on b[k][j+0..7]. (This is why you needed loadu). Perhaps you meant to load b[k][j+0], +4, +8, +12? If so, you should align b by 64, so all four loads come from the same cache line (for performance). Strided access is not great, but using all 64 bytes of every cache line you touch is a lot better than getting row-major vs. column-major totally wrong in scalar code with no blocking. I take 4 elements from row from a multiply it by 4 elements from a column from b I'm not sure your text description describes your code. Unless you've already transposed b, you can't load multiple values from the same column with a SIMD load, because they aren't contiguous in memory. C multidimensional arrays are "row major": the last index is the one that varies most quickly when moving to the next higher memory address. Did you think that _mm_loadu_ps(&b[k][j+1]) was going to give you b[k+0..3][j+1]? If so, this is a duplicate of SSE matrix-matrix multiplication (That question is using 32-bit integer, not 32-bit float, but same layout problem. See that for a working loop structure.) To debug this, put a simple pattern of values into b[]. Like Then when you step through your code in the debugger, you can see what values end up in your vectors. For your a[][] values, maybe use 90000.0 + 100 * i + j so if you're looking at registers (instead of C variables) you can still tell which values are a and which are b. Related: Ulrich Drepper's What Every Programmer Should Know About Memory shows an optimized matmul with cache-blocking with SSE instrinsics for double-precision. Should be straightforward to adapt for float. How does BLAS get such extreme performance? (You might want to just use an optimized matmul library; tuning matmul for optimal cache-blocking is non-trivial but important) Matrix Multiplication with blocks Poor maths performance in C vs Python/numpy has some links to other questions how to optimize matrix multiplication (matmul) code to run fast on a single processor core 
c-18-33	X	C - opendir() return "No such file or directory" I am trying open dir and read files inside it . but the function opendir() returns always "No such file or directory", and when I put the the path it's working . Working: Not working: dirPath is a char* . Can you please explain me why the second option is not working? 
c-18-34	X	most frequent character in 2d array with pointer i want to find the most frequent character for 5 strings,i thought of this ,i have done it for a specific character,in my ocasion s ,but how can i make it for every character,its only part of my code Ch is a pointer!!! You have to somehow store the number of occurences for each character somewhere. With that given a hint would be to keep one variable with storing the max occurence of the character and the character itself. Nothing else. And for looping you need to consider all characters from a to z. The code will be something like:-(Only look if you feel you have tried enough). To make you aware of what this code does - it counts the character which occurs in maximum number of cities. In case there is a tie, it selects the smaller alphabet first (lexicographically). If you want to ignore non-graphic characters or you just want to count alphanumeric characters or whatever your requirements maybe, you will have to add an if check with the correct combination of functions (isalpha, isalnum, etc) from ctype.h You now have to run through the count array and find the largest number. The index at which the largest number was found is the ASCII value of the most common character. 
c-18-35	X	compiler does not allow me to edit the passed string I looked around and I could not find a solution of my problems in other question. For some reason, then I get segmentation fault when I run my program and it seems to be because i am changing the give string. I tried passing a pointer to a char pointer and edit that, but to no avail. what I get: before: juanpablo Segmentation fault (core dumped) My code: From the C Standard (6.4.5 String literals) 7 It is unspecified whether these arrays are distinct provided their elements have the appropriate values. If the program attempts to modify such an array, the behavior is undefined. To escape the error you could call the function like Take into account that it is better to use type size_t instead of the type int for the second parameter and the variable len declared like is not used in the function. The function should be declared like Here is a demonstrative program Its output is 
c-18-36	X	Initializing array inside struct I'm trying to initialize an array inside a struct, Like this. I want the array to have the size of row*col. Here is part of the code: Please not that You cannot preset the values of row col in your code. To acheive this you need dynamic allocation like this, You should be extremely careful with the use of malloc() and free(), you must use it correctly or unexpected things will happen to your program. You can't declare a struct in that manner. One thing people have done is to set their array to the end of the struct and then use malloc to leave extra space for the array in the struct. Something like this: There are few of errors in the code. You probably want something posted below. Also, don't divide by zero. 
c-18-37	X	How to generate a value using pre defined mask I am working on a hardware that is a bit tricky...for example one its 32bit registers looks like this (the upper 16bits are all zero) My question is, how can I generate a number that I need to write into this register. E.g. I will have a function that gets numbers from user and returns the value ready to be written to register. This seems to be a very painfull process...I have a dozen of similar registers that have different bit-width and stuff...How can I make this easier? For one, How do I even write a desired value at the MASK_DBG_CTRL_MAX_COUNTER bits? Example of calling function: Here is another set of register masks...here I neeed to set the low 10 bits spliced into two 5 bits: Here, top 8 bits and low 8 bits: How to generate a value using pre defined mask (?) To address OP's first part: Consider a re-write of the function signature. Other suggested changes below as comment code. I have a dozen of similar registers that have different bit-width and stuff...How can I make this easier? Need to see some of those for a good general answer. 
c-18-38	X	Pointer is null after a function I am working with linked list in C, but I think didn't understant very well the use of pointers. I have a structure for my linked list. I initialize the first element to NULL. I send this pointer to a function to create (with malloc) a new element of the list. But after the call of the function my element is still NULL. I don't understand. It is surely a stupid error but I need some help.. } Thanks for helping me Well to make change either you have to pass the address of the variable from the caller function or return from the callee function the address of the allocated memory and assign it to respective variable. Here you do neither of it so you don't get to retain the change. By passing the adress of the variable you can do it like this:(The other can be done easily if you understand this one fully). Here what we did is simply passed the address of the variable. You will call the function like this One thing, you have a bad choice in selecting the names of the variables. Goto is the last choice of variable name. In C goto is a keyword, naming a variable on some variation of it is not only misleading but also erroneous in meaning too. 
c-18-39	X	Display float with variable spaces in c I'm trying to display float number like this: i know that i need to use %g but how can the spaces change ? thanks 
c-18-40	X	trying to extract complex numbers from strings I am attempting to extract two columns of numbers from a text file. first column is the real part of the number and the second in the imaginary part. I managed to extract the list of numbers from the file as strings but I don't know how to separate the strings into two parts. I have attempted to use the sscanf function but just hasnt worked. The difficult part is the numbers can be both positive and negative therefore I cant use + and - in the delimiter of the strtok function since it will remove the negatives. Iv been stuck for a few days so any suggestions would be appreciated. Thanks in advance. Here is the code I worte which errors at the sscanf line. The output should be something like this: 0 0 -4 100 45 -234 -56 -78 I noticed there are mistakes such are trying to search *arrayp in strchr but its a pointer I dont know how to convert a pointer into a string so i can put it into this file. Thank you for the help and effort in advance. parse every number yourself. start scanning the string from index 1 (since index 0 is either +/- or a number), looking for either a "=" or a "-". once you find it, you know how to split the string. So far so good but in there are two errors. Firstly the scanf function family needs %lf for a double target. Secondly, it needs the address of the target, so Also, I don't see why you need to build an array of string pointers first - just examine every non-NULL token pointer that strtok produces. Edit: this is a little test program. Program output: 1 1i -4 100i 45 -234i -56 -78i The program should be more rigorous and check the return value from sscanf. 
c-18-41	X	How universally is C99 support (as of December 2017)? About a decade ago, @EliBendersky asked: How universally is C99 supported (as of September 2008)? Much time has since passed, and I'd like to ask again - how universal is C99 support, in terms of the default/popular C compilers on various platforms? I'm especially interested in non-Linux Unixen (AT&T, HP, SUN, AIX, SGI, and *BSD) and OSes which run on non-x86-CPU, non-PC machines. Notes: If a platform's default or popular compiler is not GCC or clang, then the fact they support C99 doesn't bring us closer to universality... I know Microsoft has held out for a long while (and maybe still does) on C99 support in MSVC; so no need to go into details about the background for that. 
c-18-42	X	Call to system("printf buffer > output.txt") fails to write file when buffer is 1MB Iam trying to call system to save a buffer to an output, i have to do this with system call, or with execve and pipes(it's a university project). The buffer is read for a part of a file, and then i have to run a sh on it, and then i can save it to file. I was trying to just save it to file with the system(), when i replace the buffer with a shorter string it works perfectly, but not with the large buffer. I use this function to create the command: Here is the link to the functions iam using if you wanna see them, it's a university library. https://github.com/sisoputnfrba/so-commons-library/blob/master/src/commons/string.c Is there a limit to the characters you can output with printf command on sh? What do you recommend me to do? to change this to execve approach? Thanks, i will add code/information if you need it. What do you recommend me to do? to change this to execve approach? The alternatives of system() vs. execve() are choices for how to run another process. The latter would be combined with fork(). Given that you must use one of these, it is apparent that you are supposed to use an external command to perform the I/O to the eventual destination. An essential question to answer, then, is which external command to use. As you have discovered, there are limits to the size of a shell command, and if you pursued a direct conversion to using execve() instead of system() then you would likely discover that there are corresponding limits at that level. Therefore, your basic approach of passing the data to be printed as an argument to the command is not viable if the possible size of the data is not suitably bounded. Thus a second, related, essential question is how the data to write are to be conveyed to the external command. Allow me to suggest using the cat command in place of printf. With no arguments, cat simply copies its standard input to its standard output. This solves the problem of providing the data to write to the file: you will arrange for cat to read it from its standard input. To arrange for the data to go to the destination file, you will need to connect cat's standard output to that file. As far as the standard input goes, it looks like you would want to establish a pipe() between the main process and its fork()ed child, and to dup2() the read end of that pipe onto the child's standard input. The child would close the write end of the pipe (important), and the parent would close the read end. The clean way to handle the output would be for the child to open() the destination file, and to dup2() its file descriptor on to its standard output. Having performed those redirections, the child would then execve() /usr/bin/cat with no arguments, and the parent would write() or fwrite() the data to the write end of the pipe, then close() the pipe and wait()s for the child to finish. 
c-18-43	X	i can't get full webpage i wanted do http request but it doesnt download full page. only 7300bytes or less from any big webpage if i try little webpage it download full i tried different flags but still cant find my mistake exec : As pointed in the comment, you have to recv repeatedly until the returned value is less or equal to zero. Also in such a simple case I'd recommend to send HTML 1.0 request to avoid chunked answers. Try the following code: 
c-18-44	X	How to save data to an Excel sheet from Altera monitor program 16.1? I am using Altera De0 nano soc FPGA to acquire some data and send them to Windows PC to save acquired data. So far now I have got values display on Altera monitor program's terminal. Is there a method to get that to an excel file. basically, i need to save the data to excel sheet's column that displays on Altera's monitor programme's terminal. I use 16.1 - Quartus Prime Lite Edition. and I use Hard Processor System and some IPs in VHDL on FPGA to acquire data. I tried file write on Altera monitor program and it gives error code, 
c-18-45	X	Disable DES in my https server have a light http server (embedded software solution). This http server is calling openssl functions to handle https connexions. I want to disable the DES cipher in my https server so I find the function: I m newbie in openssl and I want to find the right string to pass in the function SSL_CTX_set_cipher_list() What's the string to use in SSL_CTX_set_cipher_list() in order to disable DES in my server? Is it correct to call the SSL_CTX_set_cipher_list() just after ctx = SSL_CTX_new(meth); ? I found an example of SSL_CTX_set_cipher_list usage in this question. Summarizing you should declare an string of algorithms using : as separators between them (you can consult the algorihtm names in wiki openssl) and create the context before (as you suggested) setting the cypher list. A little example in code: Finally I would suggest change your version of openSSL if the library allows DES method, because, as you can see in this proposal, DES is disabled by default except if you compile explicitly. So, I highly recommend update your openSSL version. 
c-18-46	X	Program received signal SIGTRAP, Trace/breakpoint trap. [Switching to Thread 6] I know this question has been asked before, but I have read all the threads and I didn't find an answer. From the moment I execure run to start debugging my project, I get this : Program received signal SIGTRAP, Trace/breakpoint trap. [Switching to Thread 6]. When I do ctrl+c, gdb tells me : Program received signal SIGINT, Interrupt. 0x00000000 in ?? () Usually it'll tell me which file and which function it got interrupted at not 0x00000000 in ?? () GDB no longer hits breakpoints, and what makes matter crazier is the fact that a colleague and I, are sharing the same session (the debug is done using cygwin with a remote machine) and it works fine for them but not for me. when I try to get info about the threads using info threads here's what I get : there's no thread 6, there's no * to indicate which thread gdb is using. And I don't even know if that's linked to the problem. Can anyone please help me? Effectively this is a duplicate of your other question. As I have said in comments there, you are not providing nearly enough info to help you. Details matter, and you are withholding them. Versions of GDB and gdbserver matter, how you invoke GDB and gdbserver matter, what warnings you receive from GDB (if any) matter. Now, this error message: usually means that gdbserver has not attached one of the threads of your process, and that thread has tried to execute breakpoint instruction (you do have breakpoints set before this happens, don't you?). One of the reasons this may happen is when your GDB loads "wrong" libthread_db.so (one that doesn't match the target libc.so.6). what makes matter crazier is the fact that a colleague and I, are sharing the same session (the debug is done using cygwin with a remote machine) and it works fine for them but not for me. I am not sure what you mean by "same session", but it's probably not "when he types commands, they work; but when I type the same commands into the same GDB, they don't". One difference between you and your colleague could be LD_LIBRATY_PATH environment variable setting. Another could be in ~/.gdbinit or in ./.gdbinit. I suggest running gdb -nx to get rid of the latter, and unsetting LD_LIBRARY_PATH to get rid of the former. The problem with the whole thing and for some reason no one seemed to notice it is this : this is how I call gdb /usr/local/build/gdbx.y/gdb/gdb what I should be doing is this : /usr/local/build/gdbx.y/build/gdb/gdb It was a path problem. 
c-18-47	X	'System.AccessViolationException' in WPF; DLLImport and unsigned char* I am trying to import a DLL written in C. The definition of the function is: The counter function used in C# to import this DLL is: which is called using, But when I run thiscode, I get an error, PS: There are two processes that are using the same DLL. MyVal is getting updated by one process and the other process (WPF) is trying to get that. Thanks in advance 
c-18-48	X	Jumping between object code with different (and unknown) calling convention in C I have (mapped in memory) two object files, "A.o" and "B.o", with the same CPU Instruction Set (not necessarily Intel --it can be x86, x86_64, MIPS(32/64), ARM(32/64), PowerPC(32/64),..., but always the same in both object files). Also, both object files are compiled with the same endianness (both little endian, or both big endian). However (you knew there was a however, otherwise there wouldn't be any question), "A.o" and "B.o" can have a different function calling convention and, to make things worse, unknown to each other ("A.o" has not even the slightest idea about the calling convention for functions in "B.o", and vice versa). "A.o" and "B.o" are obviously designed to call functions within their same object file, but there must be a (very) limited interface for communicating between them (otherwise, if execution starts at some function in "A.o", no function from "B.o" would ever be executed if there was no such interface). The file where execution started (let's suppose it's "A.o") knows the addresses of all static symbols from "B.o" (the addresses of all functions and all global variables). But the opposite is not true (well, the limited interface I'm trying to write would overcome that, but "B.o" doesn't know any address from "A.o" before such interface is established). Finally the question: How can execution jump from a function in "A.o" to a function in "B.o", and back, while also communicating some data? I need it to: Be done in standard C (no assembly). Be portable C (not compiler-dependent, nor CPU-dependent). Be thread safe. Don't make any assumption about the calling conventions involved. Be able to communicate data between the two object files. My best idea, for the moment, seems that can meet all these requirements, except thread safety. For example, if I define an struct like this: I could write a pointer to an struct like this from "A.o" into a global variable of "B.o" (knowing in advance that such global variable in "B.o" has space enough for storing a pointer). Then, the interface function would be a void interface(void) (I'm assuming that calling void(void) functions is safe across different calling conventions... if this is not true, then my idea wouldn't work). Calling such a function from "A.o" to "B.o" would communicate the data to the code in "B.o". And, fingers crossed, when the called function in "B.o" returns, it would travel back nicely (supposing the different calling convention doesn't change the behaviour when returning from void(void) functions). However, this is not thread safe, of course. For it to be thread safe, I guess my only option is to access the stack. But... can the stack be accessed in a portable way in standard C? Here are two suggestions. Data interface This elaborates on the struct you defined yourself. From what I've seen in the past, compilers typically use a single register (e.g. eax) for their return value (provided the return type fits in a register). My guess is, the following function prototype is likely to be unaffected by differing calling conventions. If so, then you could use that in a way that is similar to the idea you already had about using arrays. Define the following struct and functions in B: To call the function, do this in A: For thread-safety, make sure the list of data blocks maintained by B is thread-safe. Simultaneous calls to get_empty_data_interface should not overwrite each other's slot in the list. Simultaneous calls to the_function should not both pick up the same list element. Wrapper functions You could try to expose wrapper functions with a well-known calling convention (e.g. cdecl); if necessary defined in a separate object file that is aware of the calling convention of the functions it wraps. Unfortunately you will probably need non-portable function attributes for this. You may be able to cheat your way out of it by declaring variadic wrapper functions (with an ellipsis parameter, like printf has); compilers are likely to fall back on cdecl for those. This eliminates non-portable function attributes, but it may be unreliable; you would have to verify my assumption for every compiler you'd like to support. When testing this, keep in mind that compiler options (in particular optimizations) may well play a role. All in all, quite a dirty approach. the question implies that both object files are compiled differently except for the endianness and that they are linked together into one executable. it says that A.o knows all static symbols from B.o, but the opposite is not true. Don't make any assumption about the calling conventions involved. so we'll be using only void f(void) type of functions. you'll declare int X, Y; in B.o and extern int X, Y; in A.o so before you call the functions in B.o you check the Y flag, if raised wait until it falls. when a B's function is called it raises the Y flag, read the input from X, do some calculations, write the result back in X and return. then the calling function in A.o copies the value from X into it's own compilation unit and clears the Y flag. ...if calling a void f(void) function just makes a wild jump from one point in the code to another. another way to do it would be to declare static int Y = 0; in B.o and omit it entirely in A.o then when a B.o function gets called it checks if Y == 0 and if so increase Y, read X, do calculations, write X, decrease Y and return. if not so then wait to become 0 and block the calling function. or maybe even have a static flag in every B.o function, but i don't see the point in this waste since the communication data is global in B.o Remember that there are both caller saves and callee saves conventions out there, together with variations on use of registers to pass values, use or not of a frame pointer, and even (in some architectures, in some optimisation levels) the use of the delay slot in a branch to hold the first instruction of the subroutine. You are not going to be able to do this without some knowledge of the calling conventions in play, but fortunately the linker will need that anyway. Presumably there is some higher level entity that is responsible for loading those DLLs and that knows the calling conventions for both of them? Anything you do here is going to be at best deep into implementation defined territory, if not technically undefined behaviour, and you will want to make a deep study of the linker and loader (In particular the linker must know how to resolve dynamic linkage in your unknown calling convention or you will not be able to load that shared object in a meaningful way, so you may be able to leaverage it using libbfd or such but that is outside the scope of C). The place this sort of thing can go very wrong is if shared resources are allocated in A and freed in B (Memory springs to mind) as memory management is a usually a library based wrapper over the operating systems SBRK or similar, and these implementations of memory management are not inherently compatible in memory layout, other places you may be bitten by this include IO (see shennanigans you sometimes get when mixing printf and cout in c++ for a benign example), and locking. 
c-18-49	X	`mmap()` manual concurrent prefaulting / paging I'm trying to fine tune mmap() to perform fast writes or reads (generally not both) of a potentially very large file. The writes and reads will be mostly sequential on one pass and then likely very sparse on future passes. No region of memory needs to be accessed more than once. In other words, think of it as a file transfer with some lossiness that gets fixed asynchronously. It appears, as expected, that the main limitation of mmap()'s performance seems to be the number of minor page faults it generates on large files. Furthermore, I suspect the laziness of the Linux kernel's page-to-disk is causing some performance issues. Namely, any test programs that end up performing huge writes to mmaped memory seem to take a long time after performing all writes to terminate/munmap memory. I was hoping to offset the cost of these faults by concurrently prefaulting pages while performing the almost-sequential access and paging out pages that I won't need again. But I have three main questions regarding this approach and my understanding of the problem: Is there a straightforward (preferably POSIX [or at least OSX] compatible) way of performing a partial prefault? I am aware of the MAP_POPULATE flag, but this seems to attempt loading the entire file into memory, which is intolerable in many cases. Also, this seems to cause the mmap() call to block until prefaulting is complete, which is also intolerable. My idea for a manual alternative was to spawn a thread simply to try reading the next N pages in memory to force a prefetch. But it might be that madvise with MADV_SEQUENTIAL already does this, in effect. msync() can be used to flush changes to the disk. However, is it actually useful to do this periodically? My idea is that it might be useful if the program is frequently in an "Idle" state of disk IO and can afford to squeeze in some disk writebacks. Then again, the kernel might very well be handling this itself better than the ever application could. Is my understanding of disk IO accurate? My assumption is that prefaulting and reading/writing pages can be done concurrently by different threads or processes; if I am wrong about this, then manual prefaulting would not be useful at all. Similarly, if an msync() call blocks all disk IO, both to the filesystem cache and to the raw filesystem, then there also isn't as much of an incentive to use it over flushing the entire disk cache at the program's termination. It appears, as expected, that the main limitation of mmap()'s performance seems to be the number of minor page faults it generates on large files. That's not particularly surprising, I agree. But this is a cost that cannot be avoided, at least for the pages corresponding to regions of the mapped file that you actually access. Furthermore, I suspect the laziness of the Linux kernel's page-to-disk is causing some performance issues. Namely, any test programs that end up performing huge writes to mmaped memory seem to take a long time after performing all writes to terminate/munmap memory. That's plausible. Again, this is an unavoidable cost, at least for dirty pages, but you can exercise some influence over when those costs are incurred. I was hoping to offset the cost of these faults by concurrently prefaulting pages while performing the almost-sequential access and paging out pages that I won't need again. But I have three main questions regarding this approach and my understanding of the problem: Is there a straightforward (preferably POSIX [or at least OSX] compatible) way of performing a partial prefault? I am aware of the MAP_POPULATE flag, but this seems to attempt loading the entire file into memory, Yes, that's consistent with its documentation. which is intolerable in many cases. Also, this seems to cause the mmap() call to block until prefaulting is complete, That's also as documented. which is also intolerable. My idea for a manual alternative was to spawn a thread simply to try reading the next N pages in memory to force a prefetch. Unless there's a delay between when you initially mmap() the file and when you want to start accessing the mapping, it's not clear to me why you would expect that to provide any improvement. But it might be that madvise with MADV_SEQUENTIAL already does this, in effect. If you want POSIX compatibility, then you're looking for posix_madvise(). I would indeed recommend using this function instead of trying to roll your own userspace alternative. In particular, if you use posix_madvise() to assert POSIX_MADV_SEQUENTIAL on some or all of the mapped region, then it is reasonable to hope that the kernel will read ahead to load pages before they are needed. Additionally, if you advise with POSIX_MADV_DONTNEED then you might, at the kernel's discretion, get earlier sync to disk and overall less memory use. There is other advice you can pass by this mechanism, too, if it is useful. msync() can be used to flush changes to the disk. However, is it actually useful to do this periodically? My idea is that it might be useful if the program is frequently in an "Idle" state of disk IO and can afford to squeeze in some disk writebacks. Then again, the kernel might very well be handling this itself better than the ever application could. This is something to test. Note that msync() supports asynchronous syncing, however, so you don't need I/O idleness. Thus, when you're sure you're done with a given page you could consider msync()ing it with flag MS_ASYNC to request that the kernel schedule a sync. This might reduce the delay incurred when you unmap the file. You'll have to experiment with combining it with posix_madvise(..., ..., POSIX_MADV_DONTNEED); they might or might not complement each other. Is my understanding of disk IO accurate? My assumption is that prefaulting and reading/writing pages can be done concurrently by different threads or processes; if I am wrong about this, then manual prefaulting would not be useful at all. It should be possible for one thread to prefault pages (by accessing them), while another reads or writes others that have already been faulted in, but it's unclear to me why you expect such a prefaulting thread to be able to run ahead of the one(s) doing the reads and writes. If it has any effect at all (i.e. if the kernel does not prefault on its own) then I would expect prefaulting a page to be more expensive than reading or writing each byte in it once. Similarly, if an msync() call blocks all disk IO, both to the filesystem cache and to the raw filesystem, then there also isn't as much of an incentive to use it over flushing the entire disk cache at the program's termination. There is a minimum number of disk reads and writes that will need to be performed on behalf of your program. For any given mmapped file, they will all be performed on the same I/O device, and therefore they will all be serialized with respect to one another. If you are I/O bound then to a first approximation, the order in which those I/O operations are performed does not matter for overall runtime. Thus, if the runtime is what you're concerned with, then probably neither posix_madvise() nor msync() will be of much help unless your program spends a significant fraction of its runtime on tasks that are independent of accessing the mmapped file. If you do find yourself not wholly I/O bound then my suggestion would be to see first what posix_madvise() can do for you, and to try asynchronous msync() if you need more. I'm inclined to doubt that userspace prefaulting or synchronous msync() would provide a win, but in optimization, it's always better to test than to (only) predict. 
c-18-50	X	Cant read file name when Input through cmd in C ( through args[1] ) This is how I am reading my text files in cmd. It is a constraint. What I'm trying to achieve is the file name "1.txt" as a string so that I can read the number for lines in the file. I looked through a bunch of solutions and all of them suggest argv[1] but when I do this: it prints null. args gives 1 and argv[0] gives myproject. I don't know what else I could try. All I want to achieve the number of lines in the given input file. Please help. Thanks! Using redirection (<) gives the data to the program on the standard input (the program sees the data just as if they were typed in by the keyboard), if you want to pass just the parameter simply delete the redirection. ... if you just want to 'count lines' give a try to the command wc -l, if it's a homework, just check you're dealing with the file in the correct way: Use fscanf, fgetc, fputs, fputc, ... instead of the 'standard input' ones scanf, gets, getc, putc, ... 
c-18-51	X	Statements with no effect when it should have an impact on the code i got an assignment to write a program that will check if a given size matrix (max 25x25) of a sudoku solution is correct acording to the sudoku rules or not. my problem is in the last function and i cant figure out what is wrong because everything seems legit. The code: I have a problem in the last function int check boxes. The message i get is : This. it seems that it does not recognize the first 2 loops as needed one, please help me understand what to repair. thank you :) 
c-18-52	X	Parameterized includes In a few C programs (for example in gecko) I've noticed an idiom whereby a program will temporarily define a macro, then include a file which uses that macro, then undefine the macro. Here's a trivial example: speak.c: dog.h: Which expands to: I gather this might be a useful technique to generalize included code by being able to specify behavior at the expansion site. Does this pattern have a name, or has it been written about previously? This is a variant of what are often called X macros. Further reading The New C: X Macros (Dr Dobbs) 
c-18-53	X	Bit selection algorithm I want to find an efficient way to select bits from one stream using the bits of another stream in C. The amount of data processed is terabytes, so speed is important. What a "bit selector" does is select only certain bits from out of a sequence of bits. For example, if the source stream is [ 1, 0, 1, 0, 1, 0, 1 ] and the selection criteria is [ 1, 1, 0, 0, 1, 0, 0 ] then the result will be [ 1, 0, 1 ]. An example of doing this the following: The problem is that this method is probably a lot slower than it could be. Is there a well-known algorithm to do this fast? I'd do it byte by byte and based on a lookup table. Create a lookup table that gives you the bit patterns to be or'ed (after shifting) onto the current and the next byte of the output. This table is indexed by [sourceByte][selectorByte], so it's a 256*256 table of byte values. Shift the table result by the number of bits already occupied in your current output byte, and OR that onto the current and next byte (or maybe use bigger chunks for the result). Advance the output bit position and byte pointer by the number of bits from the selector byte (another table byte[256] might be easier than bit-fiddling). But in the end, you have to profile the program and try which approach is faster (and if the bit-fiddling really makes for a noticable portion of the run-time). 
c-18-54	X	Print one more parameter with va_args I have a function which implements a custom variant of printf. Does anyone have a clue how I can print out one more parameter with va_list? My format is like "%d some text %s". I need a, to be printed as first parameter. If a is always printed the same way, it shouldn't be part of the format passed in. You should instead print it separately. In the example you gave, change your format string to "some text %s". Then your function can do this: As noted in comments: Redesign the interface You would do best to redesign the interface so that the format string only applies to the ... (va_list) arguments; the fixed argument gets treated separately. Standard reasons for wanting extra arguments are logging things like __FILE__ and __LINE__ (presumably not __func__ if you don't have C99 __VA_ARGS__ support " see below). You would probably do best to remove the option of caller-controlled formatting of those fixed arguments, leaving the fmt to process just the ... arguments. If you can't redesign the interface The fact that the %d is part of the format and the int value is not part of the va_list makes life tricky. If you cannot, or decline to, change the rules for calling the function, you'll need to parse the format, for example separating it into the part up to (but not including) the second %, and use that format with the standalone argument; the remainder of the format is then passed to vprintf(). If you're on a POSIX system and in a multi-threaded program, you might want to use flockfile() and funlockfile() on stdout to ensure that they're treated as a single unit of output despite the multi-threading. The code cheats; it uses a C99 VLA (variable length array) and also interleaved declarations and statements. In C90, therefore, you'd probably end up using malloc(), or perhaps a fixed size buffer (running risks of overflows), or a hybrid (use a fixed size buffer if the prefix of the format string is small enough to fit, or allocate (and free) if not). You need to decide on the appropriate error handling strategies. Note that this isn't bullet-proof code. Calling func(a, "%% yield is %d; data is [%s]\n", data); throws another spanner in the works. Also, if you're on POSIX and someone passes "it is %2$s and %1$d things happened", you're in deep trouble. Yes, I'm on POSIX system. But it is quite old, I am even not able to use approaches with __VA_ARGS__ macros as it appears in C99+ standards. It's curious that you're on such an old system. However, that simply means you probably won't write code with the n$ notations in it, so it is one less thing to worry about. The multi-threading issue is less likely to be a problem either. And you can't use the other C99 features that were shown in my sample code. You could look at the FFI (foreign function interface) library; I'm not at all sure it will help, though. Based on previous answer to parse format, I've found a simple solution (if %d is always first): Special Thanks to Jonathan Leffler 
c-18-55	X	Undefined reference to GetConsoleWindow I am trying to get a handle for the console window with the following: I followed the instructions from the GetConsoleWindow documentation and "Using the Windows Headers", but I still get: undefined reference to `GetConsoleWindow' You have to have kernel32.lib in your list of input libraries. 
c-18-56	X	What is new name of load_defaults() function in mysql c api? What is new name of load_defaults() function in mysql c api? I tried the following code from this link (http://www.kitebird.com/mysql-book/ch06-2ed.pdf). I am using MySQL 5.7 and Visual Studio 2013 on Windows 7/64bit. The load_defaults() function no more exists. There is no documentation on it. What is the new name of load_defaults() function? load_defaults was never meant to be used outside of the client lib. It had therefore been removed from the library exports. I assumed this would still be the case, but then I found: https://bugs.mysql.com/bug.php?id=25535, which seems to indicate this function has been renamed and re-exported. Didn't check this myself, though . 
c-18-57	X	Fast binary parser algorithm I'm writing a parser for binary files. The data is stored in consecutive 32 bit records. The files only have to be read once and as this is done it is fed into the analysis algorithm. Now I am reading the file in chunks of 1024 records to avoid as much of the overhead from calling fread more frequently than necessary as possible. In the example below I use oflcorrection, timetag and channel as outputs for the algorithms and use the bool return value to check if the algorithm should stop. Also note that not all the records contain photons just those with positive values. With this approach I can process at up to 0.5GBps or 1.5 GBps if I use the threaded version of the algorithms which break the file into pieces. I know my SSD can read at least a 40% faster. I was thinking of using SIMD to parse several records in parallel but I don't know how to do it with the conditional return clauses. Do you know any other approach that would allow me to combine chunked reading and SIMD? Is there in general a better way of doing it? Thanks P.S. The records correspond to either photons arriving to detectors after going through a beam splitter or a special record that indicates an overflow condition. The latter is needed because Timetags are stored with picosecond resolution in uint64_t. Please find below the parsing function. Keep in mind that I can't do anything about the file format. Thanks again, Guillem. I came up with an almost branchless parsing function, but it doesn't produce any speed up. I/O is very likely to dominate the runtime of your function. That said, you should first measure the speed without parsing, i.e. just the fread. Probably it won't differ that much to the speed including parsing. If so, you can concentrate on optimizing that bottleneck first. Look into the linux tool fio, in particular with different --ioenginge= (also libaio). In case you are using an NVMe disk, look into the Intel SPDK. Apart from that, you can optimize the parsing further. You can avoid both the (*RecNum)++ and more importantly the first if-clause within the loop, since after the fread you know how many records you will read, so you can use that information. Furthermore, I would not iterate over buffer->head but use a local variable for that, using a for-loop. I also would use a local variable for *RecNum and only at the end assign to *RecNum. If you are aiming at parallel writing to *RecNum, your code would be buggy anyways, because neither your increment nor your read uses an atomic operation. Not until then you should start thinking about SSE or AVX. If you have mostly zeroes in *channel, you could use SSE/AVX to check 16 or more bytes at once for greater or equal zero. Update: Now after you providing the code of your parse function, I can see that situation is different. Many branches there... Update: Here is an implementation of the optimizations for next_photon that I mean. If buffer->head == 0 is guaranteed when entering next_photon, it can be simplified. And I assume you don't check the return value of fread on purpose, because you want to handle that with StopRecord only. So I left it like that even though it's not safe. You are accessing to disk in loop and I don't think SIMD will help too much there, you could use mmap. Check these answers: When should I use mmap for file access? Fastest file reading in C but you could also use SIMD (SSE/AVX/NEON) for other parts e.g in parsing code That speeding the data analysis by parallelizing it has such a dramatic effect on your program's throughput shows that the data analysis cost is of the same order of magnitude as the I/O cost. Therefore, if you want to improve its throughput to be closer to the limit imposed by your available I/O bandwidth, the best course of action would probably be to perform analysis and I/O in parallel. You can do that by maintaining two separate I/O buffers, processing one while you read into the other, and then flipping. 
c-18-58	X	C free int array in function after writing value to other variable i want to free memory allocated to int array in function after assign value from array element to integer variable. I have code: Why cant i free memory allocated to array after write a value to another variable? int out have another adress then allocated memory, all what i want to do its just give a value from array to another variable. Can somebody explain me why i cannot do it? Remember that sizeof(int)*n + 1 is equal to (sizeof(int)*n) + 1. You allocate space for n integer values, plus one byte. That means your loop in the else case will write out of bounds (unless sizeof(int) == 1 which few if any platforms have, even historically). And writing out of bounds of allocated memory leads to undefined behavior. Often, writing out of bounds messes up the private and internal data used by the memory allocator, leading to problems when calling free. The solution is to either change the allocation so it allocates n + 1 integers (i.e. sizeof(int) * (n + 1)). Or to change the loop condition to i < n. Have a look to the comments. 
c-18-59	X	Misconception in Compiler's function I have studied many articles to understand whether Compiler generates Object Code or Assembly Code and there is conflict, even in stack overflow. Some says Compiler generates Object Code while other says Compiler generates Assembly Code which is then converted to Object Code by Assembler. Both answers has up-votes. Is there any clarification or justification for this. Ultimately, the compiler has to somehow produce object files with the code that will end up in the application, and the linker combines the code from object files and libraries (which are just collections of object files) to produce the application. So it's correct to say that the compiler produces object files and the linker combines them. On the other hand, there are various ways that the compiler can produce the object files. One way is to directly generate object files. Another way is to generate assembler code and run the assembler to produce the object files. That introduces some flexibility, because the compiler doesn't have to know the details of how object files are laid out; the assembler does that. Yet another way is to generate C code and run the C compiler (which could, in turn generate assembler code and run the assembler) on that to produce object files. That's how cfront worked back in the olden days of C++. It's also how some modern compiler front-ends work. For example, Edison Design Group sells a C++ front-end that vendors can hook up to their own back-end for code generation. They also provide a version that generates C code, for use during compiler development when the back-end isn't yet working. Typically in these cases, the compiler will have a switch to keep the C or assembler file around, so you can examine that to see what's going on. 
c-18-60	X	Declaring char array results segmentation fault in C programming language I was just creating simple implementation where I read input.txt file which has one line of code containing two numbers separated by space (e.g. 4 4). I was trying to separate them by delimiting with space first. And I was trying to use the first value as a size of char array. However it keeps causing segmentation fault but I have no idea. If I comment out "char charArray[number]" it does not cause segmentation fault. If I comment out only the while loop, it does not cause segmentation fault. But I cannot figure out why it is causing the segmentation in the first place. Please help. Thank you in advance. Something like this? 
c-18-61	X	Call function in shared library but not declaration in header files I am doing some implementation about calling function of shared library via Java to JNI. And JNI is implemented by C code. Here is my question. There is a function named ABC() in shared library. This function is not be declared in header files. BUT with NDK build, it can be successful and this function also can work fine. It's very confusing. Why? why can it be built by NDK and why can it be called without any exception? Thank you for answering:) There are two possibilities here. The file using the function may contain its own declaration of the function. (Declarations are not required to be only in header files.) If you use a function without declaring it, the compiler may provide a default declaration. This is not part of modern C, but compilers may use old standards or be unduly lax in this regard. The default declaration is a function of the type int SomeName(). Such implicit declarations automatically have external linkage, which means the name will be matched to the definition of the function when the library is linked in. If the latter is the case, you would be well advised to enable additional switches to tell the compiler to issue more warning messages and to use a modern language standard (such as C 2011), at least when developing new code. Using a routine that is in a shared library but is not declared in its header is inadvisable. Such routines are often intended only for internal use of the library, and they may change or vanish in future versions of the library. So code using them would break; it would not be compatible with the new versions of the library. 
c-18-62	X	There's a space when I strcpy a string into another string I have a kind of logical assignment here in my class. So my question is when I try to strcpy() a string into another string, There's a (like space) in my new string. I don't know how to delete that, perhaps my mistake. Please help me, thank you. This program let's you type whatever letters or symbol on your keyboard and try to capture it and count the symbol. Then, return it. Here's my code in C And here's my console result: So that's make the program will show the space symbol and count it. And if I can ask again, how to display only one char if there's a symbol again in another index that have same symbol. Thx, forgive me if my English is not fluent. The space(s) showing up at the end of your printout are because the list of test conditions you include: May be missing some additional conditions that need to be excluded: 1) added additional test: test[i] != 0 2) changed temp[i] != ' ' to !isspace(temp[i]), which will test against all white space. Once these are added: The text entered is printed only down to the last non-whitespace character. Code modifications: I added some other minor modifications to the following code that allowed the code to be compiled in my environment. Because my modifications use functions that are part of the C standard libraries, this should compile for you as well. Changes also include expanding for(...) loops to accommodate the array sizes you created, enabling input up to N-1 characters as opposed to only 10. Most of what I did includes commented explanations. Addressing your question: how to display only one char if there's a symbol again in another index that have same symbol. Displaying a list of the characters used, and the number of times used might be better handled in a separate function. The one below can be adapted to be called in your original main function by inserting the following lines: Just under your existing line: printf("Hasil Analisa:\n\n"); (i.e. replace all your code under that line down to the getch(); function; For example, if the string "this is the string" were passed as the argument to that function, the following would be output: 
c-18-63	X	Unclear relationship between pointer dereferencing and casting in a specific scenario I have the following Cpp funtion: I have spent some time trying to extract the value of buff that I need to pass to ntohl() (so you can ignore the first couple of lines). I was playing around with *buff[0] *buff and others, w/o realizing that I need to cast the value of the first element of the array (&buff[0], buff or &buff). Question: why do I need to cast the retrieved value to (u_long*) and then deference the pointer? Is it ambiguous or unclear to @ runtime that the value held in the buff[0] will be a of type u_long * ? My expectation was that ntohl(**buff) - (buff is the array name, that decays into a pointer and since the array is of u_long pointers itself) double dereferencing should suffice. The parameter passed to ntohl should not need casting. When parsing a IPv4 string address InetPton just needs an address in memory where it can write 4 bytes. Ideally you would use the IN_ADDR type instead but if you only care about Windows you can use the long based types directly. Declaring a variable on the stack as a pointer (*) to something makes no sense when you need to store data in said variable, this is C 101. You have buff defined as an array (of size 1) of pointer to u_long. So InetPton is storing the resulting IP address directly in this pointer variable. You then get a crash because this IP address is interpreted as a memory address and dereferenced. buff should be defined as a simple u_long, with it's address passed to InetPton: Then you can do this: Improving on this, the MSDN page says the following if the value of the first parameter is AF_INET: ... When this parameter is specified, the pszAddrString parameter must point to a text representation of an IPv4 address and the pAddrBuf parameter returns a pointer to an IN_ADDR structure that represents the IPv4 address. So you should instead be passing in the address of an IN_ADDR for the third parameter: EDIT: Expanding on why the cast makes a difference, it turns out it doesn't. What makes a difference is the level of indirection and how many times you dereference. The call to InetPton writes a 32 bit IPv4 address to the first u_long * in buff. All your variants that double-dereference are treating that value as if it were a pointer. It isn't, which is why they crash. The ones that work manage to do only a single dereference and have the result treated as a long, which is why they work. (Although I suspect many of them actually have unspecified or undefined behaviour since you are being pretty cavalier about whether the value is a pointer or integer.) If you declared buff as an IN_ADDR your code could be both simpler and clearly correct. 
c-18-64	X	Input and output of a c code from file in android (without root) For OJ problem solving I often face importance to have my outputs as a file. But freopen() does not work in android. Actually, there is a way that copy the code in a root diretory using Termux (or like apps) and then But it is very long process. Is there any way to doing this input/output easily any app or method? 
c-18-65	X	Variable arguments inside a macro I have two functions foo1(a,b) & foo2(a,b,c) and a macro I need to re-define macro to accomplish, 1.if add() is called with 2 parameters, then call foo1 if add() is called with 3 parameters then call foo2 Im new to the option VA_ARGS. How can I do that That usual trick for counting arguments may be adapted for this: Once you plow through the boiler plate, it basically just involves placing all the arguments in a line, with the function tokens after them, and seeing which function stands out. That's what EXPAND_ADD_SEL_FUNC does. You can see it live on coliru. But I'll reiterate what we told you in comments. This is likely to be a sub-par solution to a proper function. I haven't tested it thoroughly, so breakage is easily possible. Use at your own risk. If you just want to distinguish between two functions, the following works: The auxiliary macro ADD always picks the fourth argument: The drawback is that you get quite cryptic error messages when you don't supply two or three arguments to the function. The advantage over variadic functions is that you get type safety. For example if your functions operate on doubles, you can still say add(1, 2) and the integer arguments will be converted to doubles. And variadic functions require some additional information on the number of actual arguments, so that's not a feasible solution here, unless you specify the number of summands in the function. Addendum: I've changed the add macro so that it doesn't pass an empty variadic list to ADD. Some compilers allow empty lists, but it isn't standard C. If you must use variadic macros, then here is a trick. Have the macro create a compound literal array. The size of this array will depend on the number of arguments. Grab the address of the compound literal, to get an array pointer type. Let _Generic check which type you got, then call the proper function based on that. This is 100% standard C and also type safe. Demo: 
c-18-66	X	C: sorting 2d arrays row by row using qsort So, what I'm trying to achieve here, is to use the C implementation of qsort in a 2d array, in witch I want only the rows to be sorted based on the its first element, for example: I want the output to be: Is there a way of doing this without implementing quicksort myself? If so, how? EDIT This is what my code looks like: You're not sorting integers, you're sorting "things" that happen to be a number of integers in size. So, don't lie to qsort() about your element size: This prints: Here is the problem: This function take size_t as the second argument. You have passed 3. Thats not the size, thats count of elements in the array arr. In a crude way, you need something like 3*sizeof(int). Or better sizeof(arr) / sizeof *arr. So, change it to With: 
c-18-67	X	Why, when this program ended, and pressed t like this is not like this, why not looping again with if on do-whilec Why, when this program ended (picture 1), and pressed t like this (picture 2) is not like this (picture 3), why not looping again with if on do-while program ended error not looping must like this 
c-18-68	X	Embedded C: How to apply the MAP macro to two arguments at a time instead of one? I want to modify or use in a tricky way this https://github.com/swansontec/map-macro macro for using map in my C sources as follows: into How should I? Just call MAP() with a macro for the function name, where the macro expansion inserts your argument: Then in your function: Result is: (Not endorsing the approach, just providing an answer to the question.) In the end, it was clear that using C preprocessor is bad and should be avoided as much as possible in the real world. I decided to use auto-generation of code using python and COG, the COde Generator: https://nedbatchelder.com/code/cog/index.html#h_the_cog_module By wrapping python code inside a comment, I was able to selfgenerate all I wanted, no matter how complex it was. Much easier, flexible and 2017 friendly than relying on preprocessor. 
c-18-69	X	calculate hexadecimal offset within array I know in general what offsets are, but I have a question regarding offsets on the following array. Let's say I have a uint8 array: Now I have description which says: Does this in myArray mean: For offset 0x00: It's the element with index 0 of myArray, so 0xCB For offset 0x01: It's the element with index 1..9,so 0xF8, 0xFA, 0xFB, 0xCA, 0xAC, 0x24, 0x53, 0x64, 0x4F etc. Or do I interpret it wrong? Your elements have a given size, as described by your size column. So basically what this tells you is: Version starts at offset 0x00 (aka, position 0) and has a size of 1, so its the first element: 0xCB Timestamp starts at offset 0x01 (aka, position 1) and has a size of 15, so its the combined elements: [0xF8, 0xFA, 0xFB, 0xCA, 0xAC, 0x24, 0x53, 0x64, 0x4F, 0x1E, 0xA2, 0xF9, 0x78, 0xCA, 0x63] Info1 starts at offset 0x10 (aka, position 16) and has a size of 8, so its the combined elements: [0xB8, 0x7F, 0xFC, 0xFB, 0xD8, 0xFA, 0xFB, 0x8F] Info2 starts at offset 0x18 (aka, position 24) and has a size of 2, so its the combined elements: [0x67, 0xC1] And so it goes... One thing that you seem to be getting wrong in your analysis, as others have pointed out is that the offsets are in base 16 (hexadecimal). So 0x10 is 1 * 16 + 0 = 16. How to interpret each byte sequence as a proper type is up to you. Does this make sense? 
c-18-70	X	The sum of prime numbers I want to calculate the sum of even prime numbers between 101 and 203. But the output for my code is wrong, the output is 52. Can anyone help me please to get the correct output, in my code I supposed that the even numbers are sure not prime that's why I escaped them. I want to solve it using this method by the prime function. What should I do? Thank you a lot First of all: you do not need 'i++;' in your prime-method because this is unreachable code. Second: try this function for checking if a number is prime: THERE ARE NO SUCH THING AS EVEN PRIME NUMBERS... YOU WILL ALWAYS GET 0. But to really answer your question... You really don't need to put i++ in your first function. Secondly, try this This should work. You don't need to increment sum by 1, you need to add i each time there is a prime number. The reason why you get 52 is because you do sum+=1, which adds 1 to sum 52 times in the for loop. There are several problems in your code. In the for loop: The statement sum+=1 should be inside the if block. Also, you are adding 1 to sum. Instead, you should add i as you want the sum of prime numbers as result: The function prime() should return 1 only when while loop checks condition n%i == 0 for all the values of i and for none of the value of i it is true. So, you need to move return 1 to out of the while loop. Also, in the while loop in prime() this is incorrect: It should be: Collectively, it should be: 
c-18-71	X	On the STM32F4, why does setting the main clock source as the PLL corrupt the rest of the program? first question here, thank you for your patience. I'm facing an issue with an STM32F446VET6-based board (the ST-B96B-F446VE from STMicroelectronics), using the StdPeriph library v1.8.0. I've narrowed down the issue to a str instruction in the SetSysClock function: The instruction result should be that the second bit of RCC->CFGR (SW1) be set to 1, in order to set up the PLL as the main clock source. Instead, the bit stays at 0, and a whole lot of code past 0x08000000 (in the flash) is overwritten. For instance, this line in SystemInit(): ends up rewritten as: Letting the program run in this state and pausing it again shows some more overwriting happened, again at the same lines: and it hangs in the subs and ands instructions. Incidentally, replacing the line RCC->CFGR |= RCC_CFGR_SW_PLL; by RCC->CFGR |= RCC_CFGR_SW_HSE; resolves the issue. No corruption happens, and main() executes properly. But now it's using another clock source, with no idea what implications this carries. Is there some way to revert to the default state of using the PLL as the main clock source, and avoid the flash corruption? I've narrowed down the issue to a str instruction in the SetSysClock function: That usually means you forgot to set the flash wait states before. Flash memory ist rather slow - it tops usually at around 20 MHz without wait states for many MCUs. Trying to run it too fast result in reading garbage. Reference Manual and datasheet should state how many wait states your target frequency requires for flash access. Note: It is safe (but slower) to run the flash at maximum wait states. 
c-18-72	X	How to store raw jpeg image into the internal flash of STM32F2 series microcontroller using Embedded C? I have a .JPEG file which I need to store into internal memory of the STM32F2 series controller. Is this possible to do without any conversion/encoding the JPEG file? If so can anyone please provide some sample code for my understanding. Generally, one method is to define a constant array which is initialized with the data from the JPEG (or any binary) file. Then that array definition gets linked with your code and becomes a part of the firmware programmed to flash. If desired, you can use linker directives to locate the array (i.e., the file data) at a specific address in flash. You can accomplish this general idea in many different ways. Below is just one specific example implementation of this technique. First, create a desktop program that reads the JPEG file as a stream of bytes and writes those bytes into a new comma separated text file. Here are the first two lines of an example file, I'll call my_jpeg.h: Then define an array in your C code and initialize it with the data from the file you created. Now all that JPEG file data will be included in your firmware and be programmed to flash when you program the firmware. You could use a makefile recipe or your IDE's pre-build batch script feature to run your JPEG conversion program automatically and produce my_jpeg.h during the build. 
c-18-73	X	How to make a dynamic char? Hi, I want to now how to dynamically store a char while writting it on the keyboard, so I made a function for it. I want to send a char pointer in it, but it doesn't seem to modify it. Another problem I have is that my function only stores a few data, so if the data is to long, my program crashes. I see something wrong here: caracter is a char pointer. By using & with caracter you are trying to access the address of the char pointer, and not the contents to which the pointer is pointing. Change it to Secondly, what is lector initialized to before it is used? See here: This simplifies the code to one function to capture input until a newline. Memory is allocated on each character. 
c-18-74	X	How to generate an xml file in C of 1GB I don't know who to generate 1GB of data within a tag of XML. I want to generate a line of data within the data text of 1GB of size How can I realise this in the most efficient (speed-wise) way. The data should be readable (can be nonsense of course) I solved it by creating three files. One with the xml until the opening of the tag in which the data should reside. The second with the generated junk data. The third with the close tag of the bulk data en the rest of the xml. Like so: 
c-18-75	X	How to find a specific string in a .c file using the perl api of (Scitools) Understand? I'm trying to analyse a code base (many .c files) by writing Perl script using (Scitools) Understand's Perl API. I'm aware that list of variables, functions etc. are easy to obtain for a given .c file. Probably someone who has worked with Understand Perl API could point me in the right direction to search for a specific string that is present in many lines of a file? and possible return the line number? Sounds like you simply want 
c-18-76	X	Trouble debugging binarysearch function in C i'm trying to make a binary search that searches through an ordered file of numbers. Although, even though it worked in "main" before I converted this into a function, it has managed to have some weird behavior after my fseek(). Any suggestions? It doesn't seem to run the rest of the code. Thanks in advance. I found my answer, it was my FILE pointer that was off, it had to be a pointer to a pointer so FILE **. 
c-18-77	X	Safely convert SIZE_T to WORD In my C code, I want to convert SIZE_T WINAPI type, in either 32/64 bit system to a WORD WINAPI type. In case that nValueToConvert is too big for WORD type I want to know abot it and raise an error. What is the best and safest way to do that? exist many ways do this. for example we can use next code: however this is valid only for unsigned types - both SIZE_T and WORD is unsigned. if work with signed types, say SSIZE_T nValueToConvert and SHORT wConvertedValue, task become more complex, separate signed bit create problems here. i think try truncate and check can be done next way: Truncate return true when SSIZE_T nValueToConvert in range [-0x8000, 0x7FFF], otherwise false Conversion may not give a proper result. The type sizes are different. Check this: Window Data Types SIZE_T Unsigned integral type; defined as: WORD A 16-bit unsigned integer. The range is 0 through 65535 decimal. This type is declared in WinDef.h as follows: But if you really want to compare them than 
c-18-78	X	Access on kernel module I wrote a linux kernel module char device (SuSE 13.2 Kernel 3.16.6), and an application for using this device. In principle, the driver, the application and the communication works. The application can open, read, write and close the char device. But there is a sporadic issue, that the application somtime 'lost' the reference to the module's write function. After 3 to 4 (sometime much more) write commands from the application to the module, the module's write funtion isn't executed. I reduced and the write function inside module: And I also reduced the applcation: The output looks loke this. sometime I can read 3 times, sometime I can read 4 times, sometimes much more. The write function handle is still valid. If one write command fails, all following will also fail. If I close&open the device again (inside the application) the write is temporary fixed. The same behaviour exists on read command. Any ideas? In the driver function fWrite() return length instead of 0. 
c-18-79	X	How to use goto across multiple functions I am trying to exit a program without using exit(). I have come up with a very convoluted and dirty solution (I am a Beginner). I would like to use if statements and if it is true, then I would like to use goto to go the main function and then return 3; and end the program. Here is a bit of code: This however does not work as I cannot get jump between functions because I get undeclared Label as an error. Is there any way I can exclude exit() from my program and still end it returning a certain value. If there is a better solution, please let me know goto can't be used to jump across different functions; it can only be used within the same function. To jump between functions, you can look at setjmp() and longjmp() functions. Having said, since you claim to be a beginner, I am not convinced you really need to use either of the above. You can simply modify your function to return an "error" value. And in main(), check its value and return from main() with the error value. The only good answer to this question is: don't do it. gotos used in this way make your code very hard to reason about. Refactor your code so that you have a clear structure and hierarchy of calls. Use return values to propagate success/failure throughout the call stack. By design, a goto cannot jump from one function to another. It can only be used to jump within a given function. There are ways to jump between functions, but doing so is not only very poor design but also dangerous as it is very easy to put your program in an invalid state. The proper way to handle this is to have your function return a specific value (or set of values) to indicate an error. Then the calling function would check for one of those error values and act accordingly. For example: 
c-18-80	X	Fill a drawed circle with the midpoint algorithm in c-> infinite-loop? I am trying to draw a filled circle with the midpoint algorithm. I already managed to draw an unfilled circle with y0 = 320; x0 = 240; radius = 180 -with the following code (reference: https://en.wikipedia.org/wiki/Midpoint_circle_algorithm): This delivers the following output (saved in a bitmap): Now I want, that this unfilled yellow circle will be filled, so it looks like this: I thought I can accommplish this with setting the radius everytime to radius-- so it draws the same circle with a -1 radius - and that until radius=0. So basically it draws everytime a new circle filled up with the old circle until there is now circle to draw anymore (radius=0). My code for this is: int x0, int y0, int radius; This should be the code to my idea how I could fill up, but all i get is an infinite-loop.. Has anyone an idea why? Or has anyone another way to fill up the circle using the midpoint algorithm? Greetings I'm pretty sure doing it your way won't generate a very nice circle; rounding errors and such might very well end up giving you "holes" in the circle, i.e. un-filled pixels. A much better approach is to realize that the circle can be viewed as a bunch of horizontal lines of varying lengths. Thus, all you need to do is to iterate the y component from -r to r, and for each such y compute the corresponding x using your existing code. Then draw a horizontal line from (-x, y) to (x, y). This question is a duplicate of fast algorithm for drawing filled circles?. 
c-18-81	X	What is difference bw these codes for structures? I want to make a phonebook in C using structures. But I have these pieces of code that are same, but one works other does not. I am posting both. Input code : This one is not working: This one is working: None of them is correct (in accordance with your requirement)!! Conceptual fault: For char *name[100][25];, here name as array 100 of array 25 of pointer to char For long *num;, num is a pointer. So, when you define a variable of the type, the memory gets allocated for the members themselves, they do not point to anything meaningful. You need to make them point to something valid before you can store values into the address pointed to by those pointers. Programming problems: for scanf(" %s",&user[i].name), the types does not match, which is expected by %s and the one you suplied. Probably what you need here is a simple array, like char name [100]; for scanf("%ld",&user[i].num);, once again, num itself is a pointer. Once pointed to a valid memory , passing num to scanf() is what you want, not the "address of num", which is a pointer-to-pointer. This dwells with Undefined Behavior. is Wrong, and this one: is also wrong. num and name are pointers and they are supposed to be initialized (make them to point to a location which is valid in current address space), before you access them or access the data pointed by them. This is actually passing a pointer to a pointer, which I am sure you are not wanting to do. The same is the case here, You might want to have an array rather a pointer to an array of 100 x 25 characters. Change, char *name[100][25]; to char name[100][25]; as the first step going ahead with fixing these all issues. 
c-18-82	X	pthread mutex with a global variable: correct usage? I understand the purpose of mutex in pthreads, but I often here that it is considered a bad practice to use mutex with a global variable as a shared resource (for example, like in the answer to this question: Mutex lock threads). So, the questions: Is it really that bad to put the shared resource as a global variable? If you have only 1 shared variable, like in the example, would it be considered ok to use a global variable, or still no? What is the better way to share the variables between the processes? In general: Global Variable are Evil: Global Variables Are Bad on C2 Wiki Chapter 19: Global Variables Are Evil from Better Embedded System Software Yes, you have to create a variable in the main thread and pass the reference to other threads that have to use it, which is true even if you have only one shared variable. Is it really that bad to put the shared resource as a global variable? It depends , It is up to the developer to decide . But in general we need to be cautious about using the shared variable as a global one . For example if the program is so simple , then it is easy to manage global variables , if the program is complex and large enough with its own other complexities , it is somewhat not easy to maintain . If you have only 1 shared variable, like in the example, would it be considered ok to use a global variable, or still no? Above answer answers this question as well. What is the better way to share the variables between the processes? You can go ahead with some kind of serialization method which suits for you . 
c-18-83	X	Windows ThreadPool API - wait until all tasks finished I'm trying to use Windows Thread Pool API as pat of my C program. In my scenario, I want to send many tasks to the thread pool, and wait until all tasks are finished, and there are no more pending tasks. After all tasks finished I want to close the thread pool and continue execution of my program. I believe the way to achieve it is using the wait objects described in the link above, but I can't really figure out what is the right way to do that. Does anyone understand if it's possible and what is the right way to do that? 
c-18-84	X	no suitable conversion function from [class] to [type] Hello, I am currently a student and i need to do a small project in C. I have been given a "doubly_list" class (list that goes both ways) and I am trying to make the value of the list as a "Form" type (I made a "Form" class) but i get an error when i try to put the "Form" data type inside the list. in the "doubly_list.h" file: in the "Form.h" file: the error message says: no suitable conversion function from "Form" to "list_type" exist. the insertLast function at "doubly_list.c" i added the #include "MId\Form.h" into the "doubly_list.c" file and some changes you suggested. but the error stays and now i have bunch more errors about 'b' undeclared b identifier. 
c-18-85	X	c programming using execvp I'm working on a side project where I want to spawn 5 children processes then execvp into a second program called isEven which will tell if the number passed to it is even or not. However, the execvp call keeps failing as I ran it in gdb and it doesn't execute. Args and load(args) are both called in another function. Thanks in advance!!! Here is a smaller program I wrote which does the same thing I'm trying to do right now. Gdb says I am getting a segmentation fault. The main problem is with this line: The args passed to execvp must be an array of char*. Having 12345 as an argument makes it interpret it as address and it's unlikely to be a valid address. In any case, that's not what you wanted to pass. So do: You need to convert number into a string. For example: In your modified example, you are printing errno as: This will fail because printf expects a string as its first argument. You can use perror() to print the error as shown above. 
c-18-86	X	How is evaluation order determined in case of same operator precedence? In this expression there is a tie between operators of the same precedence (/ and *): How is determined which operation is evaluated first? It's always grouped from left to right, i.e. When operators have identical precedence, the associativity comes into play. The ultimate explanation for this is revealed by the grammars for C and C++. Note this can be the cause of some nasty bugs, for example is a double type equal to zero; the first part of the expression is 0 by integer division. 
c-18-87	X	How to pass a string from C to swift? I am using OpenSSL as a library in swift. Since it's in C, I need to pass some data from C language back to swift. The data was an array, but after some research I have learned that I cannot pass an array from C to swift. One way I can think of it is to change the array into a string, an then pass the string back to swift. In C I wrote: In Swift I wrote: The result is that it only prints H. What did I do wrong with it? It there a easier way to pass an array from C back to Swift? You might want to change to Or By char c[]={"H","E","L","L","O"}; an array of strings is getting declared, rather than an array of characters. There is a difference between a string and a char. A string literal enclosed within a double quotes represents a set of characters. So, "H" seems to represent a single character to you, but internally it contains an additional character with 'H' and the very necessary '\0' which is terminating character in C. That was possibly the reason that you were getting a H printed on your console as output. This is because as per C11 standard - Section: 6.4.5 String literals which states, A character string literal is a sequence of zero or more multibyte characters enclosed in double-quotes, as in "xyz". A UTF-8 string literal is the same, except prefixed by u8. A wide string literal is the same, except prefixed by the letter L, u, or U. Additionally, section: 6.4.4.4 Character constants states that, An integer character constant is a sequence of one or more multibyte characters enclosed in single-quotes, as in 'x'. A wide character constant is the same, except prefixed by the letter L, u, or U. With a few exceptions detailed later, the elements of the sequence are any members of the source character set; they are mapped in an implementation-defined manner to members of the execution character set. Also, means that teststring is supposed to return a char, and you are returning c which is now a string. So either change it to return a pointer to char i.e Or, return a char like return c[0]; there's a couple things... First, it'd be a lot easier to format your string this way: But, if you want to do it your way still, you need to null-terminate your string, otherwise the computer will not know where the string ends and new memory begins: becomes: See the single quotes vs the double quotes? The double quotes indicate a whole string (null terminated with zero)... the single quotes indicate a single char. So when you did it with double quotes, in characters in memory for the whole thing looked something like this: H0E0L0L0O0 With single quotes, the characters in memory looks like this: HELLO0 The printf function will print until it hits a zero and then quit. That's why you were getting just the 'H' printing out. Yes you have to declare array of chars. So the it will be Case-1 Here you have created something like array of array of chars. Coorect way of doing it would be. Case-2 But in this case you have to pass c[0] or c[1] in printf. Also note that the first thing can alternatively done using Case-3 This is an array of 6 characters, \0 included. And once again you could have also done Case-4 Here you have to pass the c[0] or c[1] which will print the string "H" or "E". Also note that is a valid initialization but this is not null terminated. So you can't pass it where a null terminated char array is expected. (like strlen() etc). Now the case-2, here the strings are modifiable. So you can change the character in them where as the strings in case-4 are not. Those are string literals which are non-modifiable. Simply put if you wanted to have a string which contains those as characters then Case-1 and case-3 are the way for you. c is an array and when you return c you return first element. You need to return entire array. Check And remember to change signature of your function 
c-18-88	X	Does kfree fill the memory with 0x6b? I ran into a bug that I found somehow the memory will be filled with '0x6b' for each char by someone else. (I check the memory via printk, not ICE.) After a lot of debugging I found out that it was because I accidentally did kfree to the memory (it was allocated by kmalloc). I'm curious about who fills the '0x6b' and trace the kfree code but can't find the code doing this. Is it a debugging mechanism of Linux kernel or there is some other reason? (the env is kernel 4.9) Thanks! Is it a debugging mechanism of Linux kernel ...? Yes, it's called "slab poisoning". Here is the 0x6b declared in the source for memory freeing: https://elixir.free-electrons.com/linux/latest/source/include/linux/poison.h#L57 And here's a short blurb about it: https://whatilearned2day.wordpress.com/2006/12/13/slab-poisoning/ 
c-18-89	X	Arranging numbers in a file using C I need to take the numbers listed in the two files "numbers1.txt" and "numbers2.txt" (where the numbers are listed in ascending order) and move them to a file named "output.txt" where they are arranged in ascending order. Here is what I have so far: my files look like the following: numbers1.txt numbers2.txt: The issue I am having is that the output file ends up looking like this: output.txt So my issue is that the program is not continuing to read/write numbers from numbers2.txt even though it has not yet hit the end of it's file. I've looked through it and I can't seem to find out why it's stopping, so help would be appreciated! There are a few problems with the current code Initialization of the 2 numbers should be performed before the main loop Use of feof() here Test of strict < insteaf of <= (could lock your algo) Keep reading a file if the other one becomes empty Regarding 2., fscanf returns a number >0 if it could read the number, so you can test this instead of checking feof (that says that EOF (a stop condition) happened before, and this might trigger one more unwanted iteration). Suggested fixed code: Further explanations readX<=0 || numY <= numX addresses 4. readX = fscanf(...) addresses2. 
c-18-90	X	How to use divided by 1000 as CPU optimization? I am using small embedded PCIe based hardware, which is having a very low-end processor, based on the operation and firmware size, I am consuming all of its resources. To do CPU optimization what are the steps I can do? I have tried to move multiplication(*) and divisions(/) using bitwise. But I have codes like this or getting confused how to do these in CPU friendly ways. 1. Confirm your bottlenecks There are CPU-bound, memory-bound, IO-bound applications etc. Your low-end processor in fact may spend most of the time waiting for the data from DRAM, doing some IO, or waiting for a spinlock. So the first thing you do is to confirm your real bottleneck. There are tools for this, like free perf for Linux or paid Intel VTune. 2. Show us the context If you found that most of the time your CPU spends on foo(), show us this function so we could help. 3. Generic suggestions For your generic question, you will get just generic suggestions, like: Use more aggressive compiler optimization, like -O3 Change your algorithms. Avoid locks. Align your data. Avoid false sharing. Make your data structures more compact. Use prefetch. etc etc Sorry, there is no context to suggest you a more specific technique. 
c-18-91	X	How to send a packet immediately I use Linux C to write a simple socket program. (Both client & server side) When server got a packet from client. Server will send a response packet to client. When client send continuous packets, I expect server send back resp. packets within 100ms. However, the time of resp. packet send back sometimes over 300ms. send packet not immediately I try to used disable NAGLE algorithm. or disable send buffer Both these two methods not work. 
c-18-92	X	openssl function to define cipher order I have a light http server (embedded software solution). This http server is calling openssl functions to handle https connexions. I want to make the https server prioritize some ciphers. because according to the following link, the https connection is more secure when the DH cipher are prioritized: Instead of using the RSA method for exchanging session keys, you should use the Elliptic Curve Diffie-Hellman (ECDHE) key exchange. Note that you can still use the RSA public-key cryptosystem as the encryption algorithm, just not as the key exchange algorithm. ECDHE is much faster than ordinary DH (Diffie-Hellman), but both create session keys that only the entities involved in the SSL connection can access. Because the session keys are not linked to the server's key pair, the server's private key alone cannot be used to decrypt any SSL session. To enable Perfect Forward Secrecy, you must do the following: 1- Reorder your cipher suites to place the ECDHE (Elliptic Curve Diffie-Hellman) suites at the top of list, followed by the DHE (Diffie-Hellman) suites. 2- Configure servers to enable other non-DH-key-exchange cipher suites from the list of cipher suites offered by the SSL Client. How I can change the cipher order on my openssl server to make the DH ciphers first? From the OpenSSL documentation, the relevant function call here is SSL_set_cipher_list The OpenSSL recommended string to use here is HIGH:!aNULL:!kRSA:!PSK:!SRP:!MD5:!RC4, since the !kRSA disables using RSA as the key exchange and forces the use of ephemeral DH, which provides the Perfect Forward Secrecy that you describe in your question. As a disclaimer, the cipher string above may not be what is recommended today, it is just what is recommended in the OpenSSL documentation. 
c-18-93	X	Print the id of the current thread I'm working on a logging implementation and to ease up reading of the log messages I'd like to print the current thread ID together with log messages. The solution could be linux specific and, if it makes any difference, I'm using gnu99 standart library. I've seen numerous posts about obtaining various types of thread identification variables, but I struggle to find any about printing them. 
c-18-94	X	Get PID of process using port in macos Sierra I am writing an ident server for IRC on macos Sierra, and I am having trouble with finding the owner of the port. In linux, this seems to be done with /proc/net/tcp if I remember correctly. I know it is theoretically possible, because sudo lsof -i tcp:6697 lists the exact information I want (username and local port). I have tried going through the lsof source code on opensource.apple.com, but I was unable to locate where and how lsof does this. Google also yielded me no results beyond "Here is how to do it with lsof" or "Here is how to do it on linux". I also couldn't see anything relevant in sysctl(3). If anyone has a solution to this, or some insight, it would be much appreciated. Thank you! 
c-18-95	X	WebBrowser in C++. Opening an Internet Explorer when doing redirect I have a problem. I have created WebBrowser in C++. I am opening the site (for Example: http://google.com) and click to the link it's opening an Internet bRowser with that uri but I want to open the link in the my program. How to do that? Change the default program to access the web content. To do so, do following: Control Panel -> Programs -> Default Programs Here set your provide your program(.EXE) path for appropriate content type. 
c-18-96	X	Error with if and else I keep getting this error message. Can anyone help? Thank you in advance! You unintentionally placed some code outside of a block: Change it to: 
c-18-97	X	Semaphore and Mutex synchronization is not working as expected I was preparing a C code for testing kernel sysfs testing in which one thread would read input from console and another would write to a special file currently in the directory as /sys/kernel/kset_devices/device{j}/dev_param{i} where integer i and j can take the values as j = 0 ,1, 2 and i = 1, 2, 3. Another thread would show the result. I have written the following: I was expecting that it would take input from user one by one and write the value to files and show the result in sync. But it is hanging after one output. What is going wrong? Thanks. 
c-18-98	X	Python wrapper for C Library dependent on wrapped C Library Bundled in a PyPI package I've found a few question about Python wrappers for c, but none that quite answer my question. (Just as an FYI, I am able to install and use c libraries when they compile easily, but I am not very well versed in coding c, or linking libraries.) I need to construct a nicely bundled wrapper for a c library in Python. This library, psrfits_utils, has a SWIG wrapper and depends on another c-library , cfitsio. That 2nd library actually has a really nice python wrapper, fitsio, that comes bundled with the c-libraries. So my questions are: The larger package I am writing is already dependent on fitsio. Can I use the c-libraries in there to run the dependent (psrfits_utils) libraries? How would I go about getting the dependent libraries to find the bundled cfitsio libraries? How would I bundle the libraries in psrfits_utils to ship with the package? How would I get this to install easily for a Python user? Does this stuff go into the setup.py file, or somewhere else? Thanks 
c-18-99	X	access c multidemensional array with only one argument? I am reading this C code, and I find it difficult to understand what's going on. Here is the array: and it's 32*4, this is another part of the code that trying to access this array: Indice is a function that returns an int. So what is this g0000 (I know it's a pointer), say Indice returns 1, what is the value g0000 holds? I mostly code in C# to my understanding if you want to access multidimensional array you would need several arguments, but here is only one, I am really confused... The type of gradient is static const char[32][4] i.e. a two dimensional array of chars. When you dereference it twice using [] operator you get a char. But in this case when you deference only once you get const char[4] which can be decayed into const char* and assigned to g0000. Precisely, g0000 will hold the address of the 2nd sub-array if Indice(x1, y1, z1, t1) returned 1. The way a static multidimensional array is stored in memory as a 1D array (in C). For example if you have the following array: the memory allocation is exactly the same as in: This can be shown by the following snippet: The reason that you can use multiple indices is just C making your life easier in using it as a 2D array abstraction. So if you access the element ray[x][y] of an array ray[a][b], the element you actually access is ray[x * b + y], even though C won't let you do that to keep the abstraction clear. Instead, if you try to access element ray[x] directly, it will return you &ray[x * b], which is exactly what you want here: A pointer to the beginning of the desired sub-array, which you can treat as an array. That wouldn't be unreasonable to assume Indice() returns the index of the row in gradient that holds the 4 values x1, y1, z1 and t1. gradient being const char[32][4], say Indice returns an index i used in gradient is an address that points to a char ; the calculated address of gradient[i] is that is, it points to the first element of gradient at address &gradient[i][0] In C there is no automatic control of array out of bounds indexes, and in that array, accessing [R][C] is like accessing [R*4+C], meaning while g0000 points to a [4] char area, you might try to access beyond that 4-limit, (e.g. [i][5]) and would access the next row (since it's [i*4+5] or [i+1][1]). However accessing the array out of bounds leads to undefined behavior (if i+1 > 31 in that case, since an array [X] goes from [0] to [X-1]). 
c-18-100	X	pthread_create Memory Leaks I am trying to code a very basic multi-threaded TCP client server system and have managed to get the main functionality working as well as sorted any memory problems except for one. When its time for the server to shutdown, I have it set up to receive and handle a SIGINT signal which will close the listen and connfd as well as do some arbitrary output. The problem being that valgrind reports a memory leak on exit which it says is from pthread_create and threads being left active on exit. The leak is the size of 272 bytes for each connected user at the time. The code for the sig handler and main are as follows: The client handler code is: I have tried many different ways including detaching the threads upon completion but always end up with this memory leak. Occasional the memory leak will occur even if the client has only connected and the server ends and other times it will only occur if the client connects and interacts with the server. You need to put a join before the end of your while loop, rather than in your signal catching function I would recommend looking through the last few sections of this guide, a few problems with your code that they handle are: joining the threads so that threads dont stay open because you are using threading, your connfd can be overwritten (as it exists in same memory space across different threads) adjusting your while loop to run only while the connection is open (changing it to be on the return of accept) http://www.binarytides.com/socket-programming-c-linux-tutorial/ 
c-19-1	X	Trying to read leak summary from valgrind - Program causes a segmentation fault on my PC, not on another I have a C code OpenGL program that compiles and runs fine on my ubuntu machine. But when I compile and run it on another linux it causes a segmentation fault. I've used valgrind to see where the problem could be and here is a small portion of the output: The full output file from valgrind is 15614 lines long. I'm still learning it but I could use assistance on reading what I'm looking at and how I can correct my code. Also this is my first post on this site, so any info for this question and posting in general would be appreciated. Segmentation fault has nothing to do with memory leaks. To fix segmentation fault you should read and fix errors reported by Valgrind, not memory leaks. According to output there are 8 errors found by Valgrind: See the difference between Valgrind errors and memory leaks here: Error summary in Valgrind output? 
c-19-2	X	How should I free an array in C? I created a function to free an array in C, but I don't know whether it is correct or not: I'm not sure whether I should execute free(array) at the end. Technically, we've already freed all the array elements, so we don't need to do free(array). Thanks for the help. You must write free(array) at the end, otherwise there will be memory leak. If you malloc the pointer as well as each element of the array you will need to free that pointer after your for loop. For example: you will have to free each element and free array. Essentially for every malloc/calloc you have, you must have a free 
c-19-3	X	MemCpy() Hanging I am calling memcpy() in the final phase of my operating systems project. The code compiles without warnings. memcpy() hangs. A print statement immediately before my call to memcpy() works. A print statement immediately after never gets called. The program hangs in the memcpy(). Has anyone encountered this problem before? Is there a standard solution? 
c-19-4	X	Forks and Processes in C I am supposed to write a program that runs two scripts in two separate processes and returns which one finished first. Unfortunately, my program returns the slower process, which confuses me. I made sure that the pids were not 0, so that they weren't child processes. I then compared the pids of each process to the pid of the process that finished first, but for some reason, the slower program gets printed. 
c-19-5	X	Inline Assembly Doesnt Work in C in Visual 32bits I'm trying to put inline assembly in one of my C source code functions, but it wonÂ´t do as expected when I do it in assembly. This is my function in C And here is what I have made in inline ASM 32 bits But i keep having a unwanted result, because when I test the function with the C code it outputs a compressed version of a text, but when i try to run it with the inline asm it wont output anything. 
c-19-6	X	sql functions not found after include I've been working on a basic server/client program in c on a MacOSX, and when having tried to link the server to a mysql database, I'm having serious issues. I checked the sql header file and it had all the function declarations that the compiler cannot find. I downloaded a connector, specifically for the x86_64 architecture, and using it gave the same error. Consider the following code: I get the following error upon compiling it: Any help as to what's going wrong here would be appreciated! The MySQL documentation, and specifically this page, explains how to link your program with the MySQL. This is copy-pasted from the link above: mysql_config displays the options needed for compiling or linking: You can run those commands to get the proper options and add them manually to compilation or link commands. Alternatively, include the output from mysql_config directly within command lines using backticks: If you use C++ (you have both C and C++ as tags in your question) you'll want to replace gcc with g++ of course, but also replace --cflags with --cxxflags. 
c-19-7	X	Getopt() Error Checking I am trying to make it so that getopt can handle certain flags, but I am having trouble implementing the error handling using getopt. I want to prevent duplicate flags such as "-s 1 -s 1", and having too many arguments for a flag "-s 1 2" both of these should exit the program. Too many arguments (e.g., program -s f1 -f f2 hello). Duplicate flags (e.g., program -s f1 -s f2). Both should exit the program 
c-19-8	X	How to take an input through Scanf for an enum I'm trying to assign an enum so that the user enters in a small string (e.g. B6) and I want to assign a number value to that. My code: Then I'm trying to scan for user input like I'm getting garbage values, e.g. 2 billion or sometimes a negative number. Does anyone know what I can do to fix this? 
c-19-9	X	Program in C that reads binary file and outputs only zeros in float notation instead of file contents I am not that comfortable with the C language or really writing code. I am trying to read a file in binary and output it to the screen. I am using fread and fopen since these work well with binary. I have this code that compiles but when i run my code as ./a.out data1 i only get 0.0000. The file contents are 4, 1.1, 2.2, 3.3, 4.4. This is what is supposed to be outputted. 1.1000 2.2000 3.3000 4.40000 only the floats. I supspect the problem is that im not passing the values in the file to the array correctly. I would appreciate any help or comments. My code is below. You don't set cnt anywhere so you read an unspecified number of floats which may or may not be correct. If I hard code it to 4 and use a binary data file with 4 floats in it, it works fine: running the program: 
c-19-10	X	char stored as int array in C? How to I convert it to C# I am trying to understand part of the C code and convert it to C# code. I have a hard time understanding this part, it seems like a char array, expressed with intergers. How do I convert it to C# code? Thanks in advance! C# equivalent of char is byte. But in your case you need possibility of negative numbers, so you'll need a multidimensional array of sbyte. 
c-19-11	X	Where can external libraries be added to C code? I am answering this homework problem I need some help with. As I understand, external libraries can be added in two places in a C file: the top, with an #include statement, and in a function body, with dlopen(). I'm not sure if this is the correct interpretation of the problem, and if it is, if there are other places I may have missed. Thank you for any insights :) 
c-19-12	X	free(): invalid next size (fast): 0x00000000023847a0 *** I wonder why this function get erorr free(): invalid next size (fast): on leetcode but goes well at my mac? it goes well when to input is short, but get error when the input string is too long. but i restore string from the beginning of pointer *init, so i just think the longest of char *init is 255. why still get error? 
c-19-13	X	Returning SetConsoleTextAttribute colour value from function in c Currently im trying to call a function to change the color the text background using the windows.h functions to do so. I have done it before but not from another function. Is the problem that the function needs to return the color value somehow or there is just something wrong. The function was called from another function if that changes anything. Code Together: mainMenu called from main: Ok so I got it fixed. I first decided to declare the HANDLE value in the mainMenu() function and remove the HANDLE pointer. Secondly, the setColour() function's GetConsoleScreenBufferInfoEx() did get called before changing the color values but wasn't called after modifying the color values thus i needed to call GetConsoleScreenBufferInfoEx() a second time to get the new color values to use. Fixed Code: 
c-19-14	X	Sending a structure through a socket in c I want to send a data structure through a socket in a tcp server/client program written in C. However when i try to print the sent data it doesn't print anything. I've realized by now that sending structures this way is a bad idea, the posts i've seen aren't being very helpful in finding a way to actually make this work. Here's the data structure in question: thanks in advance. Before, writing a structure, you need to be aware of padding issues. It seems that your structure is well aligned. However, the receiver needs to be on similar architecture and similar compiler structure packaging settings to consume the structure in the same exact way. Alternatively, you can define a message protocol that explicitly packs this data and writes as a byte stream. That said, a structure could still be written simply by doing write(sock, &myMessage, sizeof (message)). It will write out all the bytes of the sizeof(message). You can just write the message out on the socket: and then read it back in on the client side. That works if it's always the same hardware / compiler, since the struct will be compiled the same way. If you haven't memset() the whole of mymess, then you are likely to have uninitialized stuff in the write(). It should be safe, but can set off sanity checks. For more reliable messaging you need to design or adopt a serialization protocol. JSON is an extremely popular one (albeit perhaps not among C programmers), but there are many others. For the same machines and compilers you can do as follows: If you need better portability try protobuf-c , nanopb, binary serialization binn or tpl. 
c-19-15	X	synchronization in simple socket programming in C I want to create a simple multithreaded chat application in C using api. For the beginning, i wrote a simple server communicating with client but there is a problem in the order messages sent. example output: in server *new_sock socket number: 4 Server:hello client Client:hello server Server:how are you? Client: Server: in client Server:hello client Client:hello server Server:how are you? Client: Join the threads right after it has been created , accept is a blocking call (I assume you have not modified the default behavior) . Threads are complex to analyze however , the call to join wont even come since blocking accept call in while loop. 
c-19-16	X	C read a file, line by line to vector I just started coding in C. I have implemented a vector that seems to be working when i append strings to it, but as soon as i read from the file i seem to get the last string again and again. From what i can see it seems like it uses the same address and therfore i get the same line again and again. But i can't seem to find a solution to the problem, hope you can help. this is my vector structure: } and appending to vector: and here is what i do in my main function: My get_element function: here is my output: You need to make a copy of the data you add to your vector. You'd have to call that with something like to preserve your vector's apparent purpose of holding a pointer to any type of data and not just NUL-terminated strings. You may also want to add a size field to your structure so you know how much data is pointed to. I found another simple way around this. by setting line to NULL 
c-19-17	X	C program that tells the user which child process finished first I am working on an assignment that involves using fork. The program runs two separate programs simultaneously and tells the user which one finished first. If a child finishes, the other child still running should be killed immediately. My code so far is this... From my understanding, this runs the programs and will not let the parent process continue until the child processes have finished. Now I'm wondering how I can terminate another child and return the winning process. 
c-19-18	X	Producer consumer semaphore value is not correct I'm trying to implement producer-consumer problem in C using processes and System V IPC and I'm stuck on one thing. This is early version of my code (without implementing queue operations or even producer and consumer executing in loop) that I was using to learn and test how semaphores work: sem.h: shm.h: Why before executing consumer function value of full semaphore is 0? Even if right after producer finishes his job the value is 1... I'm new to this kind of topics so maybe there is an obvious explenation of the situation, but I have no idea what can I do and hope you can help me. You initialize the "full" semaphore to zero. Your "child" producer, prior to exiting calls your sem_post() function, which calls semop() with a SEM_UNDO argument. The Ubuntu Linux man page for semop says the following about SEM_UNDO: ... If an operation specifies SEM_UNDO, it will be automatically undone when the process terminates. This means, "producer" increments "full" prior to exiting, then after it exits the system "undoes" the increment (i.e. it decrements "full") setting it back to zero. So,for the purposes of the "full" semaphore, you should NOT specify SEM_UNDO. 
c-19-19	X	Understanding a program about Memory Allocation and Deallocation Memory Allocation and Deallocation fill in the XXXs This was code given to me that uses the buddy system to handle allocation and deallocation. The parts that ask for work the XXXs I don't even know where to start, what variables to use etc. Any help would be appreciated. I do not understand what to use or even start with for the missing code (XXX) Even though the code is very well documented any extra comments, questions or even more clarification for certain functions you have would be helpful. 
c-19-20	X	Serialize Netbios struct to send over TCP/IP in C, possible? I have 2 machines talking to each other using NetBIOS via NetBEUI. I am in the process of replacing NETBEUI with TCP. I am looking for the easiest and fastest way to do it. There is NetBios over TCP/IP protocol available but for some reason it's not working... I could not figure out why. So now, I am thinking to serialize the NetBIOS struct and send it over to another machine using TCP and de-serialize there. The struct look like below. Will serialize approach work? 
c-19-21	X	What is wrong with my C functions? Greatest Common Divisor and Least Common Multiple Your findGCD does not compute GCD perfectly. You misplaced GCD = i. 
c-19-22	X	Whats the point in select(fdmax+1,.......) from https://github.com/davidxia/c_code/blob/master/socket_programming/select.c Why is the largest file descriptor + 1 used here? 
c-19-23	X	What is the purpose of '_' in macro I am trying to understand one of the VPP sample function name 'sample_plugin_api_hookup'. What is the purpose of underscore ('_' ) in macro (#define _(N,n) ) ? _ is a valid C identifier, though it's reserved for use at file scope. A C identifier consists of a letter or underscore, followed by zero or more letters, underscores, or digits (I'm ignoring universal character names). Apparently the author of that code wanted a name that's short, easy to type, and unobtrusive. I believe the GNU gettext package, or code that uses it, follows this convention, with a macro call like being replaced by a localized version of the message. (Which means that a program that uses GNU gettext likely would have to pick a different name). foreach_sample_plugin_api_msg is another macro that makes use of the _ macro, which is why the _ macro is undefined immediately after that line. Perhaps the author was influenced by the Go language, which uses _ as a blank identifier. Opinions are likely to differ on the question of whether this is a neat trick or a crime against good taste. 
c-19-24	X	C - Exception thrown: read access violation I'm new to programming and I just recently started learning C. Every week we have "labs" where we have 90 mins to finish the given tasks and so far every week I get the same error "Exception thrown: read access violation." My question is, what does it mean? I can't seem to figure out what it actually means and how to solve it. Every week I spend half of the given time just trying to figure out what's wrong. I would really appreciate if someone explained to me what to do/what to look for when I get this error. Once the error was gone after I fixed in my code some passing of a pointer/address (not sure which one but it was wrong). When I fixed that, the error was gone. Another time the error was gone after I noticed that one of my loops doesn't stop where it should it just went on to very high numbers (no, not forever, I don't know why). When I fixed the loop the error was gone. I hope it's clear what I'm trying to ask but I will include my current problem but I don't think it's really necessary to look at. Thanks in advance for any help! This time I tried to write a task at home and once again I got the same error but I haven't yet figured out what is wrong. The task was to: Write function: int find_next_word(const char *string, int startIndex, int *end); which will search string for the first word, starting at startIndex, return the index of its first character. A word is a nonempty sequence of alphanumeric characters, surrounded by other non-alphanumeric characters, beginning or end of the string (use function is_alphanumeric to classify characters). Function should also search for a first character after the word (possibly the null terminating character) and store its index in the variable pointed to by end. is_alphanumeric is a function from a previous task which I wrote and is included in the code; it works. You're running past yourself with your loops. In your first loop, you run straight to the end of the char array. (Remmember, C doesn't have "strings", it has character arrays.) Then, in your second loop, you get an access violation because you're trying to index past the end of the array. Try this: 
c-19-25	X	C get and instantiate struct type from array of different structs I'm having trouble figuring this out... I have a bunch of structs defining message types from a data stream that look like this: There are many of them with different names and formats. What I want to be able to do is... dynamically, given a struct name, get and instantiate that struct, so far I'm doing this.. So, given a name, we can search through the list of names, find the index, and then grab that struct from the list of structs that has identical indexes. Right now, I'm just returning a void pointer, which returns a reliable address depending on the struct. Is there a way to unwrap this pointer and use it as a struct? ...how to instantiate it and use it in code. Is this even possible because the type of struct is not known so I can't just do... Is this even possible? Is there a different way I should be approaching this? Thank you. What you're wanting isn't possible in C. I think you might need to do this a different way. You could do something like: As you need to use a dynamic string, you can use your function (but modified): Then, you can use it as follows: It's not a very nice way of doing it, but I don't believe there is any other way. 
c-19-26	X	Why does fork() behave differently when piped? In the C code below, the parent process forks a single child, prints its PID, and does the same for a second child. When run in the shell, the code behaves as expected, with the following output: However, when run as via process substitution or as the input to a pipe, the first line of the output is printed twice I've tested this in both bash and zsh, and the error is present in both. Why does this occur? 
c-19-27	X	C - Segmentation fault when using strlen? I'm getting a segmentation fault with using strlen. My function: Is there something wrong with my scanf line? I've never had this sort of issue before with using strlen... so I assume maybe I'm not reading the user's input correctly into 'userInput'. Use char userInput[128]; instead. scanf expects a pointer to valid memory to put the contents of the users input in to. The above variable is a pointer , and it is pointing to nowhere (Mean no memory location ) . It should contain a address to store / retrieve data . So either you must allocate memory for this variable or use strdup 
c-19-28	X	How to sync N processes to wait for each other through semaphore Linux, C. I have to sync N processes that are forked from one parent. Every process needs to wait until all other processes have completed a task before they can all move to the second task simultaneously. I was thinking about implementing a semaphore but I don't really know which type and how to implement it in an effective way. Can anybody show me a way of doing this? Does anyone have solutions to this issue? Here is some pseudo-code of what I am trying to achieve: 
c-19-29	X	What's the difference between the assignment operator vs equal operator in C Why does this print the value of y? I thought the value of x was being assigned to y but thats not the case. That's expected behavior in C and other languages. Your title of the question also is not worded very well. The assignment operator "is" the equal operator, and that is exactly what you are using. You might be getting confused by the order of operations in C. On your printf line, the expression y = x happens first, and the resulting value (y) is used as a parameter in your printf function, which is why you see the value of y printed. This is one of the fundamentals of C. I would recommend reading up on C syntax. According to the standard, an assignment expression evaluates to the valueof the left operand after assignment: 6.5.16 Assignment operators (3) An assignment operator stores a value in the object designated by the left operand. An assignment expression has the value of the left operand after the assignment So y=x in printf( "%d\n", y = x) first lets y take on the value of x, and then evaluates to the (newly assigned) value of y. So the output of the printf-statement will be 5580, i.e. the value of x, which is the new value of y. 
c-19-30	X	15 slide puzzle game: Segmentation fault (core dumped) error My first time trying to ask for help in here so my bad if my question is poorly explained/written. I'm writing code for the magic-15 puzzle game, however I think that I have an error with my update_board function that keeps resulting in a segmentation fault (core dumped) runtime error. Any feedback or help would be appreciated. Sorry for the excessive amount of code, I'm just fairly new to programming and I'm not 100% sure where my error is so I just put the whole thing in there. Just to clarify, this is the game: https://www.youtube.com/watch?v=EtXE08bOVZM Like I was pointing you in my comments you should fix all those strcmp calls. Another problem, you need to declare update_board as void because it does not return anything. And last replace gets because is deprecated with fgets or scanf(), like this: fgets(command, 100, stdin); Inside void scan_board(int board[4][4]) you should use a second loop instead of using this line: and also to check scanf for errors: After you do that it should look like this: Output: I do not know how should your program behave, but at least you can compile and test it. 
c-19-31	X	Correct random numbers, minimum value and maximum value are not printed in the screen. Why? SO, here is my code. The code compiles and prints data. But it is not giving me appropriate data; like I input two values for maximum and minimum;so, this is my range(from minimum to maximum.). The code is written to print 30 random numbers within my range- which I am not getting(within the range). It also should give me the minimum and maximum value from the generated random numbers. But I can't get it(from my range). Unfortunately, I can't find out where is the problem lying. Can you help me with it? **Edit: If you run at least 2 times this code, you will see that this code has indeed some problem in it. You have to run it two times as the code doesn't seem to be wrong for the first time. My inputs for minimum was 3 and maximum is 66. You can put any minimum and maximum value (but should be positive integer.) 
c-19-32	X	Double pointer adresses So I created and allocated a double pointer like this: And then I initialized it for example like this: My problem and question is how can I save the address'es of my double pointer?At this moment I lost them and can't use them anymore. Don't use explicit pointer arithmetic and dereferencing when array subscripting will do: Return a from a function, save it as a class member, it is just like any other variable. If you want to save the contents of the arrays then do that (but that is not what I could call saving a double pointer -- by the way the usual description is "pointer-to-pointer"). 
c-19-33	X	fgets() randomly changes between returning NULL and returning the correct value While calling this function that I made to get lines out of a file fe, sometimes the function works and keeps working for a while until it randomly decides it doesn't want to work anymore and fgets() starting returning NULL (I am not allowed to use getline as an alternative). I tried remaking the function from scratch but it still doesn't want to work. I am a thousand percent sure that my file exists and that it is being loaded. Excuse the rookie code please, second month using C. 
c-19-34	X	MVC ListBoxFor missing special char I have an MVC4 app that uses bootstrap on one view I have Model.OPtions have a string value that has special characters in it. These are being stripped out It is an IEmumerable<SelectListItem> any ideas? Have you tried to use HttpUtility.HtmlEncode as Luke Duddridge pointed out here? ASP MVC Razor encode special characters in input placeholder I feel a fool, it was being created by a an ajax call, someone stuffed a million abstract methods in the javascript file for layoutMaster.js 
c-19-35	X	Are there any guarantees about C struct packing? Are there any guarantees regarding packing of structs in C? Just as an example, provided that sizeof(double) == 8, is it guaranteed that sizeof(struct { double x, y; }) == 16? I am aware that the intention behind this question conflicts with strict aliasing rules, therefore assume strict aliasing is disabled, e.g. in the case of gcc with -fno-strict-aliasing. To avoid any further speculations: The intention is knowing about compatibility of a struct with its explicitly packed counterpart. Note that aliasing is relevant even in the following case: Are C-structs with the same members types guaranteed to have the same layout in memory? . No need to worry about me wanting to access single bytes. The only thing the C standard says regarding struct packing is that no padding may exist at the start of a struct. It makes no guarantees regarding padding between fields or at the end. Section 6.7.2.1 of the C standard says the following regarding structures: 15 Within a structure object, the non-bit-field members and the units in which bit-fields reside have addresses that increase in the order in which they are declared. A pointer to a structure object, suitably converted, points to its initial member (or if that member is a bit-field, then to the unit in which it resides), and vice versa. There may be unnamed padding within a structure object, but not at its beginning. ... 17 There may be unnamed padding at the end of a structure or union. That being said, most implementations tend to be fairly consistent with how structures are packed. Non-struct variables n bytes in size (or arrays such variables) will tend to start on an n byte boundary. A struct within a struct will tend to be aligned based on the alignment of its subfields. The Lost Art of C Structure Packing goes into this in much more detail. 
c-19-36	X	doesn't count extra numbers [magic square] When I hit more than sizearrayXsizearray numbers it doesn't add into the counter and stops at sizearrayXsizearray counting. Can anyone point out why it doesn't count it? The exercise asked to check if the input is a magic square (sum rows=columns=diagonals), making sure there are no duplicates, only int numbers and that I don't enter more or less than sizearrayXsizearray numbers. The input from the user should look like 3 1 2 3 4 5 6 7 8 9 where the first number (here it is 3) is the array size and the rest are the numbers that would be checked as a magic square. 
c-19-37	X	Check if user input A or B and ignore whitespace in I want to check if my user input is A or B Inputs like: "aA AA vbB and so on would be invalid white spaces before A and after A ( or B ) are allowed: Input check should run until user inputs valid character (A or B) or unti EOF (ctrl+D). My code has Basics for this but not sure how to do the rest: For now dont know how to ignore spaces. Any help appreciated The problem is you're letting the user input anything, but taking one character. I think ignoring spaces will actually make it worse, turning "A B" - two valid inputs into "AB" which is a fail. A simple solution would be: and strcmp with "A" and "B". This will read 99 characters at a time as strings (so a \0 at the end), using spaces as separators between input values, so you can be sure only single letter strings matching A or B will succeed. This will of course break for strings 100 characters long (say e 99 times, then A. scanf read e 99 times, then the next loop will read just A). The proper way to do this I think is to read character by character, for example: 
c-19-38	X	Deleting from a file Suppose that you have a file containing list of names (or ID num) of people that work in a company and that you want to delete someone from that list. Is there a function in C that takes a variable (the person i want to delete) and allows you to delete from the file? if not what can i do ? PS:the file can be a text file or binary file, whichever allows you to delete from a file. You have to read in the file contents and re-write with only the data that belongs after the deleted data. There isn't a function to "delete this section of a file. I suggest that you open the file in read mode, read all the data, then re-open the file in write mode (to clear all the old contents), then write the contents as you want them. This way is actually quite a bit easier than trying to get by with only opening the file once. 
c-19-39	X	Using 2D matrix without stack overflow Hello. I got a project about the Longest Common Subsequence For small matrixs it worked fine but for bigger sequences I get a stack overflow. I was advised "You shouldn't store 2D-matrix inside main() function or any other function (it may cause stack overflow). Maybe move it outside of functions or allocate dynamically." but I dont know what the person means by moving it outside of functions and I dont know to allocate 2D matrix. Sorry for the long post. Thank you Replace by and at the end of your main add: Now you have dynamic allocation on the heap. What you did isn't standard anyways (variable length array on the stack, see here). Apart from that I haven't checked your code. At a first glance, it seems strange that you first split into n and m when counting and then use i for both arrays when filling. Update: Now I see you edited your code from your original post. Here is how to do it with a double pointer. Allocation: Freeing: And remove the realloc. And don't forget that you can't return L[m][n] after freeing, so store that value, then free, then return the value. 
c-19-40	X	Non-Prime Number Counter in C I want to write a program for storing all the non-prime(composite) numbers before 10.000 in an array. I did this algorithm below, but it's not working. When I print out the array which is supposed to be holding composite numbers, it's simply counting from 4 to 10.000 . Where is the problem? I really looked so much but I can't see. This is happening because of the logic in your code. Inside of your for loop, you say this: So, once you find any composite number, you increment counter. Counter is never reset to zero in your loop, so every single number is added to your array. Even if your logic were fixed, you would be adding values to an array in a way that doesn't make sense. Consider the values 5 and 6. Even if you corrected the logic, 5 would not be added... So arr[i-4] (arr[1]) would have no value... but when I=6, arr[i-4] would have a value. You probably want to change this logic to count how many composite numbers you have found so far and add the number found to the array at that point. The problem with your code is clearly not resetting counter as @DavidHoelzer points out. But there's another bug as simply fixing counter leaves zeros in your output where the primes were. I believe the real fix is to eliminate counter as it's wrongheaded. Once you determine a number is composite, you keep checking more divisors but ignore all that extra work when you test if (counter != 0). So, we should just make a note once we find the first divisor and move onto the next number. This is a perfect use of a break statement: Note that I've also changed compositeArray not to be a list of composite numbers but rather a list of booleans indicating whether a particular index is composite or not. A final issue is one of terminology. Your code is looking for composite numbers but your title and text say non-prime. The difference is how you handle 0 and 1. If you're looking for composite numbers, exclude them. If you're looking for non-prime numbers, include them. Composite numbers is non-prime numbers greater than 1. So all you have to do is to find prime number up to 10k. It can easily be done by erythrophene sieve. The principle of the sieve of Eratosthenes Create array which maps numbers to {1, 0}, 1 - if number is prime, 0 - if composite. Now let's initialize sieve: So we got bool array, each element of which is 1 if element's index is prime, 0 otherwise. Now, we can simple iterate throw it and get composite numbers. First 10 number from stdout: 4 6 8 9 10 12 14 15 16 18 20 21 22 24 25 26 27 ... 
c-19-41	X	Client/Server pthreads program not executing under Valgrind. Runs fine normally I have a C server program that creates & opens the write end of a named pipe (in /var/run), and interrupts on a SIGIO signal for a tty uart, pushing data into the pipe from that interface. This program also spawns a secondary pthread, which opens the read end of a separate pipe (again, in /var/run), reads from it (blocking), and passes that data back to my main thread for writing out over my tty. Data is shared between these using a mutex-locked struct. I also have a testing client program that handles the other end of this. Permissions/file access is valid. This appears to work great running in bash. I want to make doubly sure with Valgrind, though, specifically with the memcheck and helgrind tools, for memory leaks and thread errors. But when I start my server program in valgrind, it hangs and doesn't run when my client starts up. I don't even see my initial startup printf from the server at the start of the program. Valgrind just sits there, until I kill it. I'm running with the following options: and Output is as follows (for both commands): Suppressing undef-value-errors because ld.so has a ton, and it was flooding my output. Is there anything you could think of that I may be doing wrong? Maybe the lack of debug info in the ld library? I can dump code if need be, or elaborate further. Thank you. It looks like your valgrind version is rather old: Assuming that ld-2.24.so is from glibc, that's around five years of toolchain development, and who knows what kind of improvements when into the gcc and binutils versions which were used to compile that glibc. 
c-19-42	X	C conflicting types caused by macro I'm building some code that used to compile properly with an older version of Rowley Crossworks for ARM version 2. Now trying to compile the application with Crossworks for ARM version 4, the following header file causes the compiler to throw the following errors: conflicting types for 'UEZMemAlloc' conflicting types for 'UEZMemRealloc' It looks to me like the newer compiler is now irritated about: The uEZ library I'm using has documentation here. It seems to be indicate it was done on purpose. Has the gcc compiler/preprocessor gotten more picky over time? Is there a way to avoid these errors? Rowley Crossworks for ARM uses GCC. The solution was to modify a Config_Build.h file which caused the compile to NOT change the types of some standard C types. 
c-19-43	X	Using assembler inside C from converted c file im new to using asm into C code ,so sorry if my question is too dumb. The thing is I wrote a program in C which codes a text file based on a code rule file.But im trying to make some methods in asm.So I made the compiler(Visual compiler) to make a asm file of my code.The thing is when I see the asm code for one method there are things like this. And if I try to paste it over my method add, inside the __asm{} ,i get errors even though is the same asm output. How can I put this asm code inside my function? Thanks... this is the error log when trying to compile. I know very little about Assembly (what I do know about it comes from C/Linux) so I'll try to suggest something that helps. Does your function need any parameters passed to it? Does it need to return something to its caller? You could write a short C source file, that only defines a little function like this. And then convert that single file to assembly the way you did. Name it what you want, but remember it. This should give you an assembler source file with the function name butts. Then, you could put the code you posted in your question, into that assembly file. Make sure it can be called with the name you set. I don't think the __asm{} will work the way you want it to. Then, I believe, you could compile that assembly file as an object, and link it with the C-sourced compiled objects, so you could compile the whole thing together. Make sure you define whatever this function is in a C (or header) file, without writing the body of the function. Use the prototype like this: Sorry if this is hogwash or doesn't help at all. Just brainstorming and something like this might work for you. 
c-19-44	X	Added C src files to my C++ project, but they cannot find "stdafx.h" I have a simple VS C++ project that consists of a few headers and one source file that houses main(). I am using VS's default method of using precompiled headers with stdafx.h. So my one main.cpp has: #include "stdafx.h" at the top. For this configuration, everything compiles and runs fine. However, I needed to add some C src and header files to my project that has data and function calls that I need to use. So I added these (3 .c files and 1 .h file) using the usual method: Add > Existing Item > choose file. But when I tried to compile I get Error C101: unexpected end of file while looking for precompiled header. Did you forget to add '#include "stdafx.h"' to your source? So I went back to my new .c src files and added #include "stdafx.h" to the top, but VS is throwing E1696 Error: cannot open source file "stdafx.h" Does VS's precompiler work with C files in a C++ project or do I need to reconfigure it somehow? EDIT: The reason I chose to go with the default method of using precompiled headers is because although my code isn't very large, I am using large header libraries like Boost and Eigen. 
c-19-45	X	gnu cflow - not recognizing "typedef struct" GNU cflow analyzes a collection of C source files and prints a graph, charting control flow within the program. My .c or .cpp file The command is cflow.exe test.c -i s -i x > test.graph 2>&1 and the output is: QUESTION Why does it say "a redefined"? It can only be because it doesn't recognize the typedef struct construct so how do I fix it? UPDATE I ran cflow again with --debug=1 and it gave me this: Just as we suspected: it's not treating each struct . . . as a struct i.e. the ability to have the exact same identifier in two different structs. So how to fix this? I'm emailing cflow mailing list. Hopefully will hear back soon. Until then, I'm going to play around with the syntactic classes and see if I can't trigger the correct behavior. I'll post my own answer if I get an answer back from mailing list. This is clearly a bug in cflow. I just built cflow versions 1.3, 1.4, and 1.5 on my system (Ubuntu 17.04). Versions 1.3 and 1.4 do not exhibit the problem you describe. Version 1.5 does. Here's a simpler test case that exhibits the problem: (typedef struct and separate namespaces for different structure types have been features of C for about three decades. It's not plausible that cflow would fail to support them -- and in fact earlier versions handle them with no problem.) As a workaround, use cflow 1.4. I also suggest submitting a bug report. It doesn't appear that this one has been reported. (The OP has now reported it to the bug-cflow@gnu.org mailing list and received an acknowledgement.) 
c-19-46	X	Visual Studio not updating the build Just started learning coding(c) and this is a simple code that I'm working on: Before this, I just tested a simple program that just used 'printf' to printed out 'Testing'. However, I had overwritten that with the above program but it is still printing out 'Testing' as the output. P.S. if you can simplify your answer then that would be really appreciated since I'm a complete beginner at coding. Try to store the variable using scanf(); also u can declare variables as follows: if u did not mention int before main(),than by default it returns as int type.. The method that worked for me was to go to the solution explorer and then to my project properties and disable the 'Pre-compiled headers' in the C/C++ tab. And I also had to remove any header files or source files that were present beforehand and create a new source file with the suffix ".c" since I'm using C language. I don't know if all this was a very basic or self explanatory solution, but since I'm VERY new to coding, I had to ask this. 
c-19-47	X	Read 8bpp bitmap in c I know there is so many articles like this but In my program there no working reading pixel from 8bpp. For 24 bpp works and I get: But when I read 8bpp bitmap i get: The 8bpp bitmap is 10x10 pixels red block So Can You tell my why when I reading pixel from 8bpp bitmap i read 6 times 0 and next 128 when bitmap is red block ? And the program is: The 8bpp bitmap is created by paint Program with 256-color option. 
c-19-48	X	How to debug this Binary Search code? I don't know what's wrong with this binary search code of mine. It seems fine to me, but always displaying "not found" in output. I don't know why. Can someone identify the problem? Though your array is sorted here, initializing high to a constant value of SIZE (100) is the problem. If you trace the values of low and high in iterations, you will know that. Instead you can use this: and pass n to the function and initialize high = n-1. 
c-19-49	X	C beginner: How to copy the arguments from *argv[] to an array of strings using a while loop? I'm learning C and I am an absolute beginner. I'm trying to do an exercice but after several trials I can't solve it. I have to copy the arguments in *argv[] to an array of strings *states[] using a while loop so each prints out the name of a state I should have input as an argument. I think the only header I must use is stdio.h. Thank you in advance for your help. EDIT. So far I've only tried things like this But, of course, I get an error because of the states[i] = argv[i]; statement. You can do something like this: You have to include 
c-19-50	X	c serial programming as intermediaries I am doing a project now to listen to the data between a PROFIBUS network that is between a master and slave. The setup would be that the master would be connected to Raspberry Pi and the Raspberry Pi would be connected to the slave. So far, I am able to read the telegrams or messages sent by the master and send it to the slave. However, I can't get the respond of the slave. When the master is directly connected to the slave the communication is working. This should be a very simple task because basically what I should program is just to read from master, write it to slave and get the slave's respond. I think maybe Im missing out on something, can you guys help me out? This is the code... The code is shortened, since most of the codes are really basic like setting up the serial port. As said earlier, the function getPacketsFromMaster is able to read perfectly from the master. The function getPacketsFromSlave has a timeout, because the slave does not need to respond always depending on the request sent by the master. The problem starts when I output(write) to the slave and hear for response. Sometimes the slave replies perfectly, a lot of times no reply at all and sometimes the telegrams are just not what I expected. Should I use like flush or drain? anything??? The Raspberry Pi is basically just the intermediaries, getting data from master and sending it to slave and vice versa. It acts like the middleman. Note that a middleman is not needed since the master can be directly connected to slave but I want to use the data for other purpose. Thanks. 
c-19-51	X	(C) Access to normal speaker in PC and play WAV through it I finished my WAV file format structure on C and I can load any WAV file with function. But I don't know how to play data on speakers. I couldn't find any examples or something on Google about using speaker. I suppose this is something about ports stuff and using it, but i can't find information about speaker ports. I'm using Windows 2000 for programming, but I think it doesn't change anything. If it's impossible, on my normal computer I have Linux and Windows 10. And I don't wanna use a WinApi function, because probably something like it exists, I believe this can be done without this. 
c-19-52	X	C - deep copy a container The problem I have arises with pretty much any container I can think of, but it's easier to illustrate it on good old doubly-linked lists. Now let's try to deep copy it. The first naive approach would be this: This has two major problems: list_append might fail on OOM condition. If this happens, the list constructed so far needs to be destroyed. copier might fail for whatever reason. Likewise, the list would have to be deconstructed. Both problems can be cured by passing a deallocator function to list_copy (which is slightly odd). There's a snag here: to avoid having to use globals, the list_copy function must have variants where either copier, deallocator, or both take an extra void * argument. As you can imagine, I'm less than thrilled by the prospect of quadruple code duplication and a pain of choosing names for such a group of functions. What can I do to avoid this? This is how that would look like (well, one of the four. And yes, copier should probably have an extra int* argument instead of returning NULL on failure): One would use like this: 
c-19-53	X	How to enter a character in a C program in windows without display on screen and also without pausing the screen? I'm trying to make a game program in C. How to get a char or input without displaying and pausing the screen? You mentioned you want to make a game in C. Create your own window. Capture and Process events. This sounds a bit much for a beginner but actually it is not. Use a library like SDL2 to help you with that. Here is a tutorial series that walks you through some of the basics of game making. 
c-19-54	X	incompatible types in assignment of 'int' to 'int [10]' in C **i want to assign the pointers on the first element of each array but i get this message -->incompatible types in assignment of 'int' to 'int [10]' in C ** The types are different. Type of &arr1[0] is int* but that of arr1_ptr is int*[10]. That's why this error message. You even copied the error message wrong. Also note that maybe this is what you wanted Because now the types match and also it means - you are assigning a int variables address to the first element of an array where each element of the array is of type int*. arr1[0] is a single int value. Therefore &arr1[0] is a pointer to that single int. And therefore &arr1[0] has to be of type int *. The variable arr1_ptr is an array of 10 pointers to int. If you want to make an element of that array point to an element of arr1, then you have to assign the address of an element of arr1 to an element of arr1_ptr: If on the other hand you want a pointer to an array, then you have to do e.g. int *arr1_ptr[ten] is an array of pointers to int (you want a pointer to int) : 
c-19-55	X	why does it only add 2 when passed by reference? How come only when its passed by reference does the value of age change? why doesn't it work when passed by value? Output of code Because the change you made when you passed the value is on the copy of the variable passed. This is completely unrelated with the variable in main(). On the second case when you passed the address as an value, you dereferenced it and made changes to that address's variable. That's why the change retained. There is no pass by reference in C. Pass by value : The copy of variable will be passed, change occurs on that copy not in actual variable pass by address : The address is passed inside function so the change will occur on variable stored at that address 
c-19-56	X	crc 16 implementation that accepts different polynomial Is it possible to have a crc16 implementation that accept different polynomial ? I mean by different polynomial the same function that can calculate crc16 with, one time, polynomial 0xA001 and an other time polynomial 0x1D0F (for exemple). I have this code, in C, that work fine for little endian, with modbus polynomial (0xA001). I choose to initialise crc 16 at 0xFFFF : But when I execute this code with other polynomial, as 0x1D0F, result is wrong regards on this crc 16 online calculator. Am I trying to do something impossible ? Is it possible to have a crc16 implementation that accept different polynomial ? No. The CRC generators must use the same bits at every step of the algorithm or the outputs will not match. See https://en.wikipedia.org/wiki/Cyclic_redundancy_check for a description. 
c-19-57	X	How to redirect stdout with '\r' printed on the same line? Check below the code snippet of using the character \r: The output of this program on the console has only 1 line: However if the output is redirected to a file ./main > main.log, the file has 100 lines: Question: How do I keep only the last line of output to the log file? I am assuming this is part of a larger program where the "percentage" may or may not be 100% (otherwise, you could just print 100% right away). So you could check if the output goes to a terminal using isatty. If not, print the "last percentage" value: 
c-19-58	X	NET - HttpWebRequest host header order on TOP For several days I have been trying to establish communication with the server using HttpWebRequest. I noticed that server isn't compliant with the protocol specification of the http in RFC. Therefore, I set tru in App.config: After doing this, I received a 400 answer. I noticed that I can communicate using curl software. I set the same headings in my code - with no result. Finally, I noticed that the order of the host header is a problem. If the host header is after POST / HTTP / 1.1, the server responds is OK, but if it is at the end of all headers, then I get the code 400. Didn't work: It works: Is there any possibility to change the order of headers using HttpWebRequest? 
c-19-59	X	How to show only 1 digit in a float correctly? If I have a float number- 28.274309, and I want to show only 1 digit after the dot, I use %.1f. But then the result is 28.3. How do I make it 28.2 and not 28.3? 
c-19-60	X	Memory allocation of Integers Let's say I have a UInt16 made up of 2 UInt8s (upper bits and lower bits) Is this statement correct? As long as the value of the UInt16 is less than 256, all of the memory will exist in the lower bits and the upper bits will be 0 All of the set bits will be in the lower byte when the value is treated as a 16-bit unit, however if you cast the address of your variable to a char * you may find that the 'low byte' precedes the 'high byte' in memory. This is called little-endian storage and is true, for example, on intel x86 based processors. 
c-19-61	X	Replacing C code macros and defining constants in C++ code Essentials of my problem: My project consists of both C and C++ files, some string constants (they are hardcoded in C part of project with #define) are required to connect to computer via USB, but if I connect two or more of same type devices, they stop responding because those constants are same. Solution to this problem would be assigning those constants dynamically, from C++ files, so that variable from C++ code could reach C part, where those values are used. What I have now: Values are defined in C headers as #define IDENTIFIER VALUE (hardcoded), where both VALUE is a C primitive constant an int like 0x1234 or char array like "Some string". For instance: I know that methods in C use those identifiers with other macros such as LOBYTE and HIBYTE, also values are passed to some functions. I tried approaching this problem by replacing the string defines with static cast char[] variable definition wrapped in #ifndef, but compiler noted that the identifiers are initializing non-const variables in some functions or is passed as a parameter. I successfully compiled code in which i changed defining strings from #define IDENTIFIER VALUE to static const unsigned char IDENTIFIER[] = VALUE;, but I still need to define them in C++. However I struggle to define hexadecimal numbers like 0x1234. I've found other question including something related to my problem, so far I've tried to define hexadecimal values in following ways (found out that uint8_t is just a typedef of unsigned char, also found some questions about casting numbers to unsigned char and some answers to questions about casting types): there is a function which uses IDENTIFIERs as arguments, its prototype looks like this: and later this is called like that: What I want to achieve: Values should be defined in C++ code, where it should use some method to pass those values to C code. Questions: What is best way to pass values from C++ code to C code? What alternatives there are? Please inform me if I could increase clarity of my question! Great thanks to @AhmedMasud for helping me out in defining my problem more clearly and giving few tips to clarify questions. Values should be defined in C++ code, where it should use some method to pass those values to C code and then define them. You can certainly do that in a general sense, but making it work with your existing C code will require changes to that code. Those changes could be distinctly non-trivial. If I understand correctly macros change all places where IDENTIFIER is used to VALUE before compilation, Yes, that's a reasonably good characterization. therefore I think that macros shouldn't be used anymore. I take you to mean that because you want to set values at run time, you cannot use macros. That's quite right. The least disruptive way to accommodate this in your C code would probably be to declare and use external variables to hold the values. Note well, however, that there is a considerable variety of problems that you might need to solve to convert your C code to work that way. I expect code to look something like as far as I know const should already do it. No, it won't look much like that at all. In the first place, you said, reasonably, that you don't want to use macros. In that case the #ifndef IDENTIFIER and #endif have no role to play. In the second place, you have declared variable IDENTIFIER inside a function, so it has no linkage. You need an external variable if you want one function to set it and a different function to read it. In the third place, since you'll need an external variable, you'll not be able to use an initializer to set its value. If you declare the variable as a char array (as opposed to a char *), then, you'll need to use strcpy() or a similar function to copy the argument's characters into that array. You can use simple assignment for numeric or pointer variables, however. I don't know much about interacting with C code from C++ yet, what is best way to pass values from C++ code to C code? What alternatives there are? Pretty much the same alternatives you have for passing around values inside C++ code: store the value in an accessible variable, or pass it as a function argument. C has no "methods", but for this purpose, C++ methods can be considered a kind of function. What precautions should I take when assigning those "constants"? I noticed that it is recommended to use static const instead of #define, as mentioned above using macros in this situation probably is unlikely. The question does not make sense. If you have a constant then you cannot assign a value to it (noting that assigning to is different from initializing). You might use a file-scope const or static const variable if you wanted to set its value at compile time, but the macros in use already accomplish that anyway. Why go to all the work to change? On the other hand, you need non-const variables if you want to assign to them at runtime. Moreover, you need external variables (non-static) if you want to assign values in one source file that will be read from a different one. Would static const defined in C++ program be seen in C code? At file / namespace scope, no, because preventing that is the exact purpose of static in that context. Inside a function or method, no, because the local variables of functions / methods are not visible outside the function / method in which they are declared. So, no. If you want a variable to which one function or method can write and from which another function or method can read, and at least one of the functions accessing the variable is implemented in C, then you need a file-scope external variable. Such a variable is declared to all users (both C and C++) with a file-scope declaration of this form: That would normally be placed in a header file that all sources that access the variable include. Additionally, exactly one source file in the project must define the variable, with code of this form: I would start with simple replace of macros definitions with After that I would solve further problems step by step if they occur. 
c-19-62	X	system() function in c printing 0 I am using Linux Mint XFCE 18.2. I am trying to solve the string equation(user enters some equation in GTK_ENTRY) . For that i pass the string to systems shell to evaluate answer. here is my code:-(real code too big) when ever I execute this I get this result:- every times it prints this extra 0. from where does this 0 came from?? I just want 15 to get printed.I want to assign the values to g variable or redirect output to files. The system call executes the command you give it, then returns the exit status, which you stored in g and printed. The exit status was 0 because the expr 8 + 7 executed without an error. The reason you're also seeing the result of the expression is because you didn't redirect stdout as part of the command, so the expression evaluation is showing up on your console. If you want to capture the output of the command, you will have to open some pipes. two ways: or If you are using programming in c, its not a good idea to use system unless you have a good reason to run the command in shell. c can directly evaluate expressions. How above statement gets executed ? system() function will call shell(bash) internally and then bash will execute expr 8 + 7 like how it does on CLI. Now check the return value of system() from man page "The value returned is -1 on error (e.g., fork(2) failed), and the return status of the command otherwise", if shell is able to execute command provided in system(), it will return it's status which is 0 in case of success. So remove the extra printf, system() anyhow will print result on stdout buffer. If you want to store the expr result into some variable there are so many ways to do that, you can redirects system() result's into file. Here is the simple approach I hope it help's. System return: The value returned is -1 on error (e.g., fork(2) failed), and the return status of the command otherwise. This latter return status is in the format specified in wait(2). Thus, the exit code of the command will be WEXITSTATUS(status). In case /bin/sh could not be executed, the exit status will be that of a command that does exit(127). If the value of command is NULL, system() returns nonzero if the shell is available, and zero if not. system() does not affect the wait status of any other children. You can use popen : I hope it help's. 
c-19-63	X	C - Caesar Cipher [Moving Code to Function] I am totally new to C programming language, so don't be too critical about my code. I found some tutorials to make Caesar Cipher encryption and decryption program, I just would like to run it from the CLI. I have code, but it uses global variables and doesn't use functions, i need both of them, i need to somehow move my code to function called "encryption" and another function called "decryption", this all goes to problem number 2 I created encryption code, but i can't make decryption, i understand the main idea, but because i don't have function (Which i need) i can't make the decryption part of the code. Please help me. Here is my code: As i said, i need to make 2 function, one for encryption and another one for decryption, can i get some help ? Thank you. The function you need will be something like You can copy paste your code inside that like: You don't HAVE to make an array called encrypted[] but since you might need your original message[] later (eg. for checking if your decoding is correct) I would advise against overwriting it. Encryption function You can also include string.h lib and use the strlen() function to get the length of the string. 
c-19-64	X	Wait for signal, then continue execution I am trying to make a program that suspends its execution until a signal arrives. Then, after the signal arrives I just want my code to continue its execution from where it was. I don't want it to execute a function handler or whatsoever. Is there a simple way of doing this? I have been struggling for a week or so, reading here and there, and didn't manage to get a fully operative code. In particular, I want the main program to create a thread that waits for some particular event to happen (e.g., a user has input some data to stdin). Meanwhile, the main program is doing something but at some point it suspends its execution until it receives a signal. The signal may come from the thread because it has detected the event or it may be due to a timeout because I don't want it to wait for ever. I have made some code but it does not work as expected... Here is a typical execution of this code. As you can see, the signal SIGUSR1 is being raised and sigwait is being unblocked. However, the code seems does not continue after the signal has been raised. (Note that I don't need a signal handler but I just added for the debugging purposes. I have blocked its execution with sigprocmask) Why is SIGUSR1 unblocking sigwait but the execution does not continue from there? Is there a way to make it continue after unblocking? This seems to work for SIGALRM but why not for SIGUSR1? As I said, I have been looking at tons of stackoverflow questions, online howto's, tried with different system calls (e.g., pause, sigsuspend), ... but couldn't find a way to solve this :-( If you are wondering why I am not doing this code much simpler by not using a thread is because this is not actually the code I am implementing but just a simpler example to make my question more clear. I am actually trying to implement a network protocol API, similar to the sockets API for my own protocol. Thanks in advance The SIGUSR1 signal isn't going where you think it is. In a multithreaded program, the raise function sends a signal to the current thread, which is the thread_job thread in this case. So the main thread never sees the signal. You need to save off thread ID of the main thread, then use pthread_kill to send a signal to that thread. Add a new global: Then populate it in your init function before starting the new thread: Then in message_rcvd, use pthread_kill: Also, remove the definition of end in thread_job, and remove the definition of tid in init. These definitions mask the global variables of the same name. Sample output: 
c-19-65	X	Unresolved reference to <symbol> in C. Makefile seems to be in order: gcc command is perfectly fine according to the suggestions I keep getting the errors: in main.c: in scpinstance.h: in scpinstance.c: in Makefile: The gcc commands seems to be in order. I've looked around but the only relevant suggestions seems to be to link my files properly. But i checked my directory, the files in OBJS already exists. Please help. I really appreciate it, thanks. Update: (Solution) Have to make sure functions are defined, not just declared. So in scpinstance.c, I did this: Your C source file only contains declarations of the functions, not definitions of them. As such, they have no definitions, and thus the symbols are undefined at link time. 
c-19-66	X	Why does this loop with scanf always quit? Why does my program quit after inputting anything? The %c format specifier accepts any character, including newlines. So if you press N, then scanf reads that character first but the newline from pressing ENTER is still in the input buffer. On the next loop iteration the newline character is read. And because a newline is neither n or N the loop exits. You need to add a space at the start of your format string. That will absorb any leading whitespace, including newlines. Just change your code to: For more information read this link 
c-19-67	X	Why are the variables always returning 0 The task says to introduce different input in each line and the reading to stop when you write END. One point of the task is to check if the input from each line is either a number, a word(they say a word can also contain digits or characters like ef=5g) or a special character( like ? ' etc.).I wanted to start by checking whether the lines with 1 character I introduce are numbers or characters and so i wrote this code . I am a begginer at C so what i wrote isnt great but i would like your help regarding why are the nrCar and nrNr returning 0 always. 
c-19-68	X	Strict Alternation for 3 processes Well, Recently I have come to learn Strict Alternation while studying operating systems concepts. To reduce chances of race condition and handle two processes we go like this: Process 0: Process 1: But I'm wondering how I can handle 3 processes to reduce racing condition even more? My approach is: Process 0: Process 1: Process 3: Is my approach okay? what do you guys suggest? and are there anything better out there? Thanks With what you have it wouldn't necessarily strictly alternate anyway, for instance, it could go into turn = 0 and the turn = 1 or turn = 2 code could follow. My suggestion would be to use OS-level events, one for each code path and each process triggers the one that follows. 
c-19-69	X	Installing AODV protocol on Raspberry pi (https://github.com/erimatnor/aodv-uu) I'm trying to install AODV protocol on Raspberry pi. After completing git clone from "https://github.com/erimatnor/aodv-uu" when I tried to do "make" and I am getting below error. Expecting your suggestion. Thank you! make gcc -Wall -O3 -g -DDEBUG -DCONFIG_GATEWAY -DDEBUG -o aodvd main.o list.o debug.o timer_queue.o aodv_socket.o aodv_hello.o aodv_neighbor.o aodv_timeout.o routing_table.o seek_list.o aodv_rreq.o aodv_rrep.o aodv_rerr.o nl.o locality.o aodv_neighbor.o: In function neighbor_add': /home/pi/aodv-uu/aodv_neighbor.c:68: undefined reference tohello_update_timeout' aodv_timeout.o: In function route_discovery_timeout': /home/pi/aodv-uu/aodv_timeout.c:98: undefined reference tort_table_update_timeout' aodv_rreq.o: In function rreq_route_discovery': /home/pi/aodv-uu/aodv_rreq.c:460: undefined reference tort_table_update_timeout' aodv_rreq.o: In function rreq_local_repair': /home/pi/aodv-uu/aodv_rreq.c:521: undefined reference tort_table_update_timeout' aodv_rrep.o: In function rrep_forward': /home/pi/aodv-uu/aodv_rrep.c:231: undefined reference tort_table_update_timeout' nl.o: In function nl_kaodv_callback': /home/pi/aodv-uu/nl.c:282: undefined reference tort_table_update_timeout' collect2: error: ld returned 1 exit status Makefile:112: recipe for target 'aodvd' failed make: *** [aodvd] Error 1 The code available from sourceforge is the same code that is on github. If you download the archive, you'll see that the latest modification date of any file there is 2010. Given the age of this code, I wouldn't be surprised to find that things simply don't work anymore. However, here's a quick workaround for your problem. The root cause appears to be that the problem functions, like rt_table_update_timeout, are declared as inline, but that information seems to get lost somewhere in the build process such that other object files are trying to reference these as non-inline functions. You can avoid this by opening defs.h, looking for this line: And replace it with: This will allow aodvd to compile correctly (make aodvd). On my system, the kernel module will subsequently fail to compile: As far as I can tell, the modversions.h file is no longer produced by modern Linux kernels. 
c-19-70	X	Get access to shared memory through semaphores I have a different number of process which should write on the shared memory that I already defined. I'm trying by using system V semaphores. The semaphore (sem_access) is initialized at 1. The problem is that the printf prints always the same number, without increment the index. PS: Sorry for my bad english, but I'm spanish. edit: if I insert a sleep(1) it works well, but i really I don't want the sleep! provide some more info about your code. What problem you are getting ? Does your process get stuck once resources acquired or not waiting ? man page of semop() says : 1) If sem_op is less than zero, the process must have alter permission on the semaphore set. So if sem_access.sem_op = -1; when other process will make this value 0 or greater than 0 then only this process will access shared resources. process 1 : sem_access.sem_op = -1; //this process will wait until condition not true process 2: since in 1st process sem_op value is -1, this process needs to make sem_op value as 0 or 1 then only other process will get executed, So do like this as man page of semop() says, If sem_op is a positive integer, the operation adds this value to the semaphore value (semval). now sem_op becomes -1 + 1 = 0, refer again semop() man pages "This is a "wait-for-zero" operation: if semval is zero, the operation can immediately proceed". I hope you got some idea to resolve problem. 
c-19-71	X	How to find prime numbers Hi I'm writing in c language, below is my code. I'm trying to take in an input to check whether the person keying in a number is a prime number by using modulus. However I'm getting error at the first if statement. The error is floating point exception(core dumped) why is this so? Am I not allowed to compare values with 0? Below is my question actually, I am not able to get my compile to work right although I can get the output. Input t "“ the number of test cases, then t test cases follows. [t <= 500] Each line contains one integer: N [2 <= N <= 2^63-1] Output For each test case output string "YES" if given number is prime and "NO" otherwise. I bet, you get the error ahead of the if statement at: This is, because you start with i = 0: Since the modulo operator % is a division, using 0 as second operand isn't legal. You get a divide by zero error. BTW: Starting with 1 is meaningless. 
c-19-72	X	What is the best way to retrieve states from a state controller? For a school project, the goal is to make a real-time system that exists out of 3 processes, lets say "process calculate" and "process execute". On top of these 2 processes, there is a state holder, lets call it "process StateCommunication", of the 2 processes. whenever the state of the statecommunication changes, the 2 processes should then read the state of the statecommunication, and if it's a state that is used in that process, then an action has to be executed within that process. What is the best way to retrieve the state of the statecommunication process? As this state controls what happens in the 2 other processes. A last thing, all the statecommunication does is adjust the state accordingly to the two other processes, so it doesn't calculate anything whatsoever, this all happens in the other 2 processes. For the communication between calculate and execute, we've decided to use a FIFO to send the data from the calculation to the executer. But, this doesn't seem to be the optimal solution for the statecommunication, as this should then have to be a FIFO that can be read by multiple processes. But in a FIFO, once the data gets read by one process, all the data disappears from the pipe. Now my question is, what would be the best way to retrieve the state from the "statecommunication", which can continuously be retrieved by multiple processes? Below is one approach to implementing a state machine in C. In the example below, I used forking to create the processes you mentioned and I used a thread to emulate some input that transitions the state. I've used this pattern for cases where I have a device that implements a state machine with input from some external source. This can be done a bunch of ways, but the core idea behind this approach is to have the worker threads (or processes) watching a state variable, have a main thread (or process) watching a state transition variable(s) and changing the state variable accordingly, and then an independent thread (or process) that changes the state transition variable(s) according to the external data received. Keep in mind that it is necessary for the main thread to "reset" the state transition variable so that it doesn't immediately transition out of the new state. I did this by creating a NO OP transition state. Since both the main and ExternalSource write to the state transition variable, I used a mutex for protection. This code does compile, but it is not platform independent. This is really just to demonstrate the idea. If you're going to use this code as a starting place, make sure understand what's going on in each line, or else it will end up taking you more time in the long run. 
c-19-73	X	Fault in memory management by test in valgrind? I've written a C programm to compare the runtime of insertion sort and count sort, but it can't pass the valgrind test because this programm will read from non-initialized memory. Here is my code, which could probably be false, and I want to know why I have this problem: and here is the result of valgrind: Here's your problem: You allocate space for an array of MAX_VALUE int's. So the indexes of this array range from 0 to MAX_VALUE - 1. Your loop however allows j to range up to MAX_VALUE, so when that happens count_array[j] is reading one element past the end of the array. Fix your loop condition to not include MAX_VALUE: 
c-19-74	X	How to build a portable static C library for macOS I'd like to build a portable static C library that can be linked into macOS binaries regardless of macOS version. The C library does not have any dependencies (i.e. no stdlib, no OS specific calls). The only dependency is the CPU which has to be x86_64. When extracting the relevant compiler triplet, I get x86_64-apple-darwin16.7.0 for Sierra, and x86_64-apple-darwin17.2.0 for High Sierra. Also, when I build on High Sierra, there is a warning if I use the static library from Sierra (even when I specify --target x86_64-apple-darwin16.7.0 for clang). How can I build a truly portable static library for macOS? If it is not possible, what is the way to go? One different version per major macOS release that is built from the same release? Some hackery by copying SDKs from outdated Xcode versions? Keep in mind, my library is completely portable and does not depend on macOS or the stdlib in any way. Does the version part at the end of the compiler triplet matter? You can just create a static library directly by using macosx libtool Here's what I just tested out on 3 different versions of Mac OS X (Sierra, High Sierra and Mavrick): $ ls -al â?Ž $ cat foo.câ?Ž $ cat foo.hâ?Ž $ cat bar.câ?Ž In my tests, libfoo.a could be generated on any (of the three) platform(s) and copied to any (of the three) platform(s) and be used to generate test locally. nm test on all three shows library statically linked into the binary. Hope this helps. on macosx libtool P.S.: macosx libtool is NOT the same as the gnu libtool except in name. Completely different usage and functionality. the macosx libtool is essentially AR + ranlib + some darwinisms. 
c-19-75	X	output(c) for writing a function this is my code. Im trying to write a function that converts USD to euros and then can recall the function but i got confused and now no matter what every output is "enter something greater than zero please! Your while is not grouped with the printf below it, but with the do above it. Let's reformat to make the distinction more clear: The do..while loop continues until you input a positive value. After that, you have a block that always runs. You probably want to put an if check inside the loop to see if the error message should be printed: 
c-19-76	X	Does POSIX standard specify what calling convention functions like read() should follow? I know that POSIX defines a set of functions that should be present in the compliant system. These include read(), write(), printf(), and many other that we know as "libc" functions. But does POSIX enforce a calling convention for them, or it is up to OS implementors to choose? But does POSIX enforce a calling convention for them [...]? No. POSIX aims to be portable. Calling conventions are heavily dependent on the architecture as they specify the way how stack and registers are used when calling subroutines. If POSIX made enforcements on certain calling conventions, it wouldn't be universally applicable any longer, or, alternatively, it would have to define calling conventions for each possible architecture, which is impossible. 
c-19-77	X	C string functions error I'm working on an assignment, but I'm having trouble with my code : I'm getting an error : Access violation reading location Do I pass the parameters wrong or..? strcat expects a non-const char*. You passed a const that's why compiler complained. Also the second parameter would be "&". (Earlier you passed a char). From standard Â§7.24.3.1 The strcat function appends a copy of the string pointed to by s2 (including the terminating null character) to the end of the string pointed to by s1. So s1 will be modified (the first parameter) that's why it should be non-const. '&' is a character literal, which is a small integer. The second argument of strcat is a const char*, which is a pointer to a character (more precisely, a pointer to the first character in a contiguous NUL-terminated array of chars). You presumably intended "&", which is a two-byte array. Attempting to interpret a small integer as a pointer leads to precisely the problem indicated by the error. If it were not for the problem reading the second argument, you might be presented with an error when strcat attempts to modify the string pointed to by its first argument, which is const and thus conceivably in read-only memory. (Modifying the first argument seems semantically incorrect, as well.) If you compile with warnings enabled, you should see a warning about the types of the argument. For this particular problem, consider the use of snprintf(res, MAX_STRING_SIZE, "%s&%s", c1, c2), which avoids modifying c1 and protects against buffer overflow. (You should compare the return value with MAX_STRING_SIZE if you care about truncation.) 
c-19-78	X	casting a pointer to struct for qsort's compare So I'm using qsort() in c and my compare function usually consist of creating a pointer of the correct type and assigning it the value from the arguments. is it possible to just cast the pointer from the arguments without creating a new one? if so, what am i doing wrong? i'm getting : EDIT: i got it to compile with but still, how would i do it with casts? The type cast operator () has lower precedence than the pointer-to-member operator ->. So this: Is the same as this: You need to parenthesize what is casted, then you can dereference the pointer. Also note that the casted pointers are const to be consistent with the original pointers. According to the handy precedence table, the cast operation has a lower precedence than the structure member access operator ->. So when doing (struct date_t*)(one)->time, first the member time is accessed (and failed, as one is a void* and has no such a member). And only then the cast is performed on the result. Instead you should force the precedence by using parentheses in appropriate places like: 
c-19-79	X	Can't read line written on a file in C I have been developing this project where every process after being forked writes his information on a file for the parent to read. I have also written a small snippet for the parent to read this file, but every time I run this code it wont work. Instead, when I manually write in the file in the following format: 567 | A | B | 20 568 | N | A | 2 569 | Z | B | 12 I can read allright, but when I run this code: And then read the file with this code, it doesn't work: From what I was able to understand, the length of the lines I write with the process code is very long, and the code to read the file doesn't support it. I'm new to C so I can't really know where I'm mistaken, and I hope somebody might help. Your first program isn't writing the data in the format the second program expects. The first problem is here: The strcpy function expects a pointer to a null terminated string for it's second argument. You're instead passing a pointer to a single character. As a result, the function will attempt to read memory past the location of that single variable. Reading outside of memory bounds invokes undefined behavior. The other issue is here: Your second program expects a single character for the second and third elements, but you're instead writing strings for both of these. Also, \r is not a newline but a linefeed. A newline is \n. The fix: First change your structure to use individual characters instead of strings, since you'll only be writing characters: Then change how you assign to those fields: Then write single characters and fix the newline: Bugfixes writer: Bugfixes reader: 
c-19-80	X	How to make a snake that makes better progress? I have the following main code loop that controls a random snake. A significant portion of the time, the snake is curled up in a little block as might be expected of a random walk. It's even worse in the corners and it looks bad. I'd it like to be more decisive and make progress across the screen until it hits a boundary. How can I get the snake to go in a straighter line? I think that it's something to do with weighting the random number generator, but I'm not sure of the algorithm as it would have to weight in different directions at different times. I'm not looking for a self avoiding random walk though as they block very quickly when in 2D. 
c-19-81	X	clang target is ignored Im trying to set a target when using clan compiler 5.0.0: clang version 5.0.0 (tags/RELEASE_500/final) Target: powerpc-unknown-linux Thread model: posix InstalledDir: C:\Program Files\LLVM\bin "C:\Program Files\LLVM\bin\clang.exe" -cc1 -triple powerpc-unknown-linux -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -discard-value-names -main-file-name MessageFilter.cpp -mrelocation-model static -mthread-model posix -mdisable-fp-elim -fmath-errno -masm-verbose -mconstructor-aliases -target-cpu ppc -mfloat-abi hard -v -dwarf-column-info -debugger-tuning=gdb -resource-dir "C:\Program Files\LLVM\lib\clang\5.0.0" -internal-isystem /usr/local/include -internal-isystem "C:\Program Files\LLVM\lib\clang\5.0.0\include" -internal-externc-isystem /include -internal-externc-isystem /usr/include -fdeprecated-macro -fdebug-compilation-dir "C:\Source\Filter" -ferror-limit 19 -fmessage-length 120 -fno-signed-char -fobjc-runtime=gcc -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o "C:\Users\kfir\AppData\Local\Temp\Filter-6f8e03.o" -x c++ ".\src\Filter.cpp" clang -cc1 version 5.0.0 based upon LLVM 5.0.0 default target x86_64-pc-windows-msvc Even though I have set the target as -target powerpc-unknown-linux it is ignored by the clang compiler, and it sets another value: I would very appreciate some help with that. 
c-19-82	X	Why windows BGI can not show when have these code(c programming) I have these code They can run but the windows BGI that should have text "hi chess" is empty. On the other hand, after I delete all for loop then they can run and show "hi chess" properly. My questions is How can I show "hi chess" without delete all of for loop. 
c-19-83	X	alternative to exit() in C I am not allowed to use exit() in my code, is there an alternative to that that I could use. Or could I just use return 2 instead and call it a day. If not, what does the exit() function actually do? Below is a snippet of my code to show what I have to replace. Edit: I am writing this program as an assignment and one of the requirements was that we are not to us exit() and getLine as it is not part of ANSI C and all the exit() are outside of the main function. a return from main is acceptable If the return type of the main function is a type compatible with int, a return from the initial call to the main function is equivalent to calling the exit function with the value returned by the main function as its argument (5.1.2.2.3 Program termination) Otherwise: _Exit will terminate almost like exit, except whether any "cleanup" (see below description of exit) is done, is implementation-defined no functions registered to atexit will be called as a last resort, the abort function will terminate abnormally, and you have no control over what is returned to the host environment what does the exit() function actually do? The exit function causes "normal" termination. (7.20.4.3 The exit function) functions registered by the atexit function are called (in reverse order of registration) all open streams are flushed all streams are closed any temporary files created by tmpfile are removed control is returned to the host environment (your program is finally "finished") if return value is 0 or EXIT_SUCCESS, it is considered to be a successful termination, EXIT_FAILURE implies an unsuccessful termination, and anything else is implementation-defined is there an alternative to that that I could use. Yes, you can unwind the stack (assuming you are not already in main) and return 2 from main. That may involve adding code/return values to functions so that your main function knows to return 2. If your code snippet is directly in main, just return 2. what does the exit() function actually do? It calls all the registered atexit handlers It flushes and closes all the stdio file streams It deletes files created by tmpfile It terminates the program and sends the status code (its argument) to the host environment in an implementation defined way (for example, Linux masks all but the bottom eight bits). I believe this is exactly the same as what return does in main Within the main function, any call to exit can be replaced by a return statement with the same exit code. The two are equivalent. If you want to exit from a function other than main, the function will need to return a value that indicates some kind of failure that warrants exiting from the program. Then the calling function will need to check for that value and act accordingly. 
c-19-84	X	Decrement operator in function call I am currently learning C with the "Programming in C" by Stephen G. Kochan (3rd edition). In the chapter on recursive functions the factorial-function is presented. The part with recursion is result = n * factorial(n - 1); where n is the formal parameter of the number whose factorial is to be calculated and factorial is the function. Out of curiosity I changed the function call to factorial(--n) and while my Linter gives me a warning saying this operation on n may be undefined this compiles and runs as expected (I use gcc on Ubuntu). I cannot grasp what is happening here. In my understanding I should end up with a product of 0 (0 * 0 * 0 * ... * 1) with the last value being a one. But still this function returns the right values as with factorial(n - 1). Here is the complete code of the function: To clarify: my question does not concern the undefined behaviour (why is this undefined behavior?), but how exactly this particular case is handled by the compiler. As this question was marked a duplicate, the answer to which does not apply here (although @badp answers my question in the duplicate but it is not the accepted answer there), I will answer it here. Answer @StoryTeller supplied an example, where this way of writing the function (n * factorial(--n) could lead to a behavior that is different from the one expected. @Pedram Azad gave an example of how one could find out how the compiler handles this by inspecting the assembly listing. The file containing this code can be generated by running gcc prog.c -S -o prog.s where prog.c is the file containing the c-code and prog.s is the file containing assembly-code. The important part is the -S option. 
c-19-85	X	Copy array via memcpy I saw there are a lot of articles about memcpy but I can't find the solution for my problem. Can somebody see why the copy action doesn't work? Idd @Ronald that was part of the solution thx! 
c-19-86	X	Threads execution Not stable I am a beginner with threads, I have 2 arrays of floats (1024 elements each) one for real part and the other for imaginary part with which I have to do some computations. So I thought about boosting the performance of my code by using 4 threads,and I divided my array to 4 sub-section each one of size 256 elements. So each thread is working on a part of each sub-section the arrays, for example: Thread Nr 1 : working on element index 0 to index 64 working on element index 256 to index 319 working on element index 512 to index 575 working on element index 768 to index 831 Thread Nr 2 : working on element index 64 to index 127 working on element index 320 to index 383 working on element index 576 to index 639 working on element index 832 to index 895 Thread Nr 3 : working on element index 128 to index 191 working on element index 384 to index 447 working on element index 640 to index 703 working on element index 896 to index 959 Thread Nr 4 : working on element index 192 to index 255 working on element index 448 to index 511 working on element index 704 to index 767 working on element index 960 to index 1023 So as a try I wrote this code: And as you can see I am only loading and storing in the same place the elements using some macros macros __LOAD_PS__() __STORE_PS__() which contains Intel intrinsics. I tried to check the correctness of the execution and it turn out that on 10 tries : 7 gives me correct results and 3 partially wrong results. Could some one please explain me what is the reason behind it? 
c-19-87	X	How many different types of libraries in c? What are the differences and advantages? After reading several articles and a bunch of online research, it makes me even more confused. How many different types of C libraries are there? Some says static library .a file and shared library(aka dynamic link library) .so file. But some says header file .h is a form of library too. some says .so can be linked during load-time and run-time, while some says it's linked during run-time and execution. Related question: isn't execution == run-time? I'm so confused with the terms. Is there a standard document that I can refer to? 
c-19-88	X	Are there memset function implementations that fill the buffer in reverse order? I know that there are implementations of memcpy, which copied memory in reverse order to optimize for some processors. At one time, a bug "Strange sound on mp3 flash website" was connected with that. Well, it was an interesting story, but my question is about another function. I am wondering, there is a memset function in the world, which fills the buffer, starting from the end. It is clear that in theory nothing prevents doing such an implementation of a function. But I am interested exactly in the fact that this function was done in practice by someone somewhere. I would be especially grateful on the link on the library with such a function. P.S. I understand that in terms of applications programming it has completely no difference whether the buffer is filled in the ascending or descending order. However, it is important for me to find out whether there was any "reverse" function implementation. I need it for writing an article. The Linux kernel's memset for the SuperH architecture has this property: https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/sh/lib/memset.S?id=v4.14 Presumably it's done this way because the mov instruction exists in predecrement form (mov.l Rm,@-Rn) but not postincrement form. See: http://shared-ptr.com/sh_insns.html If you want something that's not technically kernel internals on a freestanding implementation, but an actual hosted C implementation that application code could get linked to, musl libc also has an example: https://git.musl-libc.org/cgit/musl/tree/src/string/memset.c?id=v1.1.18 Here, the C version of memset (used on many but not all target archs) does not actually fill the whole buffer backwards, but rather starts from both the beginning and end in a manner that reduces the number of conditional branches and makes them all predictable for very small memsets. See the commit message where it was added for details: https://git.musl-libc.org/cgit/musl/commit/src/string/memset.c?id=a543369e3b06a51eacd392c738fc10c5267a195f Some of the arch-specific asm versions of memset also have this property: https://git.musl-libc.org/cgit/musl/tree/src/string/x86_64/memset.s?id=v1.1.18 
c-19-89	X	how to find the first repeated occurance of the character inside the same string in c How do I get the first occurance of the repeated character to print only that character.it doesnt matter with it should be case sensitive or insensitive. e.g For input= "opuott" Answer=o/O input= "kuttu" Answer=t/T In C,a case sensitive solution can be something like this: Input:"nabc-=1nabc" Output:n Something like 
c-19-90	X	C Programming - Help decrypting from file my code currently counts all the characters in a file and displays them in a list. I then enter a key based off of the most common letter to E and use that to decrypt it (I know I could work out the key but that's another task). The only problem is that my code only decrypts the first word/string in the file. How do I get it to decrypt the whole file? 
c-19-91	X	function remove a word depending of a number - c programming I have been stuck with this problem over 4 days: Write"‹ "‹a"‹ "‹function"‹ "‹"‹skipWords()"‹ "‹"‹that"‹ "‹takes"‹ "‹a"‹ "‹string"‹ "‹named"‹ "‹"‹sentence"‹"‹ "‹and"‹ "‹an"‹ "‹integer named"‹ "‹"‹words"‹ "‹"‹as"‹ "‹arguments."‹ "‹The"‹ "‹function"‹ "‹should"‹ "‹return"‹ "‹a"‹ "‹"‹pointer "‹ "‹ "‹to"‹ "‹a"‹ "‹substring"‹ "‹of sentence"‹."‹ "‹The"‹ "‹function"‹ "‹should"‹ "‹skip"‹ "‹the"‹ "‹number"‹ "‹of"‹ "‹words"‹ "‹indicated"‹ "‹by"‹ "‹the"‹ "‹parameter words. If"‹ "‹words"‹ "‹is,"‹ "‹for"‹ "‹instance,"‹ "‹0,"‹ "‹then"‹ "‹a"‹ "‹pointer"‹ "‹to"‹ "‹the"‹ "‹beginning"‹ "‹of"‹ "‹the"‹ "‹string"‹ "‹"‹sentence"‹ "‹"‹should be"‹ "‹returned"‹ "‹(that"‹ "‹is,"‹ "‹no"‹ "‹words"‹ "‹are"‹ "‹skipped)."‹ "‹If"‹ "‹words"‹ "‹is"‹ "‹1,"‹ "‹then"‹ "‹a"‹ "‹pointer"‹ "‹to"‹ "‹the"‹ "‹second word"‹ "‹of"‹ "‹"‹sentence"‹ "‹"‹should"‹ "‹be"‹ "‹returned"‹ "‹(i.e.,"‹ "‹one"‹ "‹word"‹ "‹is"‹ "‹skipped),"‹ "‹"‹etc "‹ ."‹ "‹To"‹ "‹see"‹ "‹how"‹ "‹it should"‹ "‹work,"‹ "‹see"‹ "‹the"‹ "‹example"‹ "‹below."‹ "‹The"‹ "‹function"‹ "‹may"‹ "‹not"‹ "‹print"‹ "‹anything"‹ "‹on"‹ "‹the"‹ "‹screen"‹ "‹or take"‹ "‹any"‹ "‹input"‹ "‹from"‹ "‹the"‹ "‹user."‹ "‹If"‹ "‹"‹words"‹ "‹"‹is"‹ "‹greater"‹ "‹or"‹ "‹equal"‹ "‹to"‹ "‹the"‹ "‹number"‹ "‹of"‹ "‹words"‹ "‹in sentence"‹,"‹ "‹then"‹ "‹the"‹ "‹pointer"‹ "‹NULL"‹ "‹should"‹ "‹be"‹ "‹returned. Example: char"‹"‹ "‹*ptr1,"‹ "‹*ptr2,"‹ "‹*ptr3,"‹ "‹*ptr4; ptr1"‹ "‹="‹ "‹skipWords("‹"there"‹ "‹you"‹ "‹go"?"‹,"‹ "‹1);"‹"‹ "‹/*"‹ "‹ptr1"‹ "‹points"‹ "‹to"‹ "‹"you"‹ "‹go"?"‹ "‹*/ ptr2"‹ "‹="‹ "‹skipWords("‹"there"‹ "‹you"‹ "‹go"?"‹,"‹ "‹2);"‹"‹ "‹/*"‹ "‹ptr2"‹ "‹points"‹ "‹to"‹ "‹"go"?"‹ "‹*/ ptr3"‹ "‹="‹ "‹skipWords("‹"a"‹ "‹string"?"‹,"‹ "‹0);"‹ "‹"‹/*"‹ "‹ptr3"‹ "‹points"‹ "‹to"‹ "‹"a"‹ "‹string"?"‹ "‹*/ ptr4"‹ "‹="‹ "‹skipWords("‹"a"‹ "‹word"?"‹,"‹ "‹2);"‹ "‹"‹/*"‹ "‹ptr4"‹ "‹is"‹ "‹NULL"‹ "‹*/ got the code : but I am completely lost. We beginners should help each other.:) Here you are The program output is As for your code then for starters the function should be declared at least like instead of and even in the very beginning of the code there is used uninitialized variable i that produces undefined behavior of the program. First, get rid of those "‹" from your code, and use " instead. Secondly, This is dwelling with Undefined Behavior, since i is not initialized. Additionally, if you compile your code with warning turned on, your compiler will generate a warning stating something like expression has no effect or similar. It means that sentence[i]; has no effect on anything. Also, with warning turned on, your compiler would have also generated a warning which states something like variable "i" is used before its value is set or similar. Do you realize that it all boils down to the requirement of locating a white-space in the input string, and then skip it the no. of times specified as a second argument? All, you need to do is locate a white-space char in string. For that, read the man page for a standard library function strchr. There are also ways to do it, without using the strchr function. This one is the crude way of doing it, remember not the best way, but easier one for you to understand and optimize/improvise going ahead. Produces an output: 
c-19-92	X	Sonarlint for Eclipse C/C++ rule - Make the prototype of this function visible at this point - not working We are using SonarLint for Eclipse and have some problems with the rule "c:S819 "“ Make the prototype of this function visible at this point". It seems like SonarLint does not find the paths to our header files, so all prototypes defined in them will not be visible. How do we configure this so that we don't get this error? We use: Eclipse Neon 4.6.0 C/C++ SonarLint 2.5.1 
c-19-93	X	Insert clang-tidy report in SonarQube Firstly, sorry for my english. I'm working with legacy C code made with CVI 6.0 and I'm learning various check and report tools, like Cppcheck, Clang-Tidy and CCCC. I'm using sonarqube with sonar scanner with the C community plugin sonar-c-plugin-0.9.8. This is the project tree: In the project folder, the tree contains the next files: When I use Clang-tidy, with this format, I must define and include all the elements I use inside the project in the same command line. The file clang_tidy_generator.bat contains: cppcheck outputs the cppcheck-report.xml file perfectly and clang-tidy generates correctly a file, too. The project_sonarrunner.bat contains: Sonarqube outputs correctly the data parsed from the xml file, but clang-tidy, does not, showing some errors. Part of the report output when executing the project_sonarrunner.bat is as follows: There are my questions: The code is not inserted properly and my suspect is -Dsonar.sources=. How to insert the files correctly? How to analyze the code in sonarqube? The code is not analyzed with the sonar c community plugin How to insert the clang-tidy report in SonarQube? Thanks in advance and have a great day. 
c-19-94	X	GStreamer freezes at first frame I wish to split the GStreamer pipeline so the video is both displayed and recorded. I got this working with gst-launch using the following pipeline: gst-launch-1.0 -v videotestsrc ! video/x-raw,width=640,height=480 tee name="t" ! queue ! glupload ! glimagesink t. ! queue ! jpegenc ! avimux ! filesink location=output.avi I've tried to implement this in my C++ application, but ran in to a problem that doesn't make sense to me. Below is the entire pipeline setup, but only the last couple of lines are relevant/interesting. If I don't add filesink to the bin, then the test video is displayed as intended. If I add filesink to the bin, then the video displays the first frame and then freezes. I don't understand why this is, since I haven't linked the filesink to the pipeline yet (the line is commented out). Does anyone know why this is? (If I uncomment the line where the record queue is linked to the pipeline, then nothing is displayed. But this might be a question for later.) UPDATE I tried to run the pipeline using gst_parse_launch() and it shows the same behaviour. The code above freezes at first frame and the output.avi file gets created but has a size of 0 bytes. If I remove the filesink queue, then the video displays fine. Works: videotestsrc ! video/x-raw,width=640,height=480 tee name="t" ! queue ! glupload ! glimagesink Doesn't work: videotestsrc ! video/x-raw,width=640,height=480 tee name="t" ! queue ! glupload ! glimagesink t. ! queue ! jpegenc ! avimux ! filesink location=output.avi So I guess I have an issue with the filesink plugin. I've tried to use absolute path to file, but that didn't help. (It still works fine when I use gst-launch from terminal) I've also tried to print some debug information with the environment variable GST_DEBUG="filesink:9", but it doesn't print any errors, only this info: 0:00:00.116304411 3331 0x7f92b4002f60 INFO filesink gstfilesink.c:301:gst_file_sink_set_location: filename : /some/path/output.avi 0:00:00.116345776 3331 0x7f92b4002f60 INFO filesink gstfilesink.c:302:gst_file_sink_set_location: uri : file:///some/path/output.avi 0:00:00.118291875 3331 0x7f92b4002f60 DEBUG filesink gstfilesink.c:523:gst_file_sink_do_seek: Seeking to offset 0 using fseeko 0:00:00.118320893 3331 0x7f92b4002f60 DEBUG filesink gstfilesink.c:423:gst_file_sink_open_file: opened file /some/path/output.avi, seekable 1 Does anyone know what could be causing this? You could first go with easy option that is use gst_parse_launch(), instead you creating elements and connecting the pads. Coming to your issue where it freezes, the linking of elements is not correct it needs to be following: 
c-19-95	X	Disassemble, modify, and reassemble executable How can I disassemble an executable on my mac using ndisasm and reassemble and link it using nasm and ld? This is what I tried (I'm running MacOS X btw): this generated clean assembler code with all the processor instructions in main.asm this generated an object file main.o which I then tried to link ... this is where I'm stuck. I don't know why it generates the following error: ld: in section __TEXT,__text reloc 0: R_ABS reloc but no absolute symbol at target adress file 'main.o' for inferred architecture i386. I also tried specifying the architecture (ld -arch x86_64 main.o) but that didn't work either. My goal is to disassemble any executable, modify it and then reassemble it again. What am I doing wrong? There is no reliable way to do this with normal assembler syntax. See How to disassemble, modify and then reassemble a Linux executable?. Section info is typically not faithfully disassembled, so you'd need a special format designed for modify and reassembling + relinking. Also, instruction-lengths are a problem when code only works when padded by using longer encodings. (e.g. in a table of jump targets for a computed goto). See Where are GNU assembler instruction suffixes like ".s" in x86 "mov.s" documented?, but note that disassemblers don't support disassembling into that format. ndisasm doesn't understand object file formats, so it disassembles headers as machine code! For this to have any hope of working, use a disassembler like Agner Fog's objconv which will output asm source (NASM, MASM, or GAS AT&T) which does assemble. It might not actually work if any of the code depended on a specific longer-than-default encoding. I'm not sure how faithful objconv is with respect to emitting section .bss, section .rodata and other directives like that to place data where it found it in the object file, but that's what you need. Re: absolute relocations: make sure you put DEFAULT REL at the top of your file. I forget if objconv does this by default. x86-64 Mach-o only supports PC-relative relocations, so you have to create position-independent code (e.g. using RIP-relative addressing modes). ndisasm doesn't read the symbol table, so all its operands use absolute addressing. objconv makes up label names for jump targets and static data that doesn't appear in the symbol table. 
c-19-96	X	256-bit integer to string I need to convert a 256-bit integer that is represented as a array of 32-bit integer to string in decimal representation. I can't add dependencies to the project so I cannot use additional libraries. Is there a way to achieve that efficiently? 
c-19-97	X	I need to find an amount of numbers in array that are appearing in array not more than 3 times So this is what i got for now, i need help with next steps. As a result program should bring out the amount of these numbers. For example Input: 9 1 1 1 1 2 2 3 3 3 Output: 2 There are a lot of problems with your code. First starting with main it should at least int main(void), because you do not use your program with arguments. Also main has no block {} where in your main code should appear int main(void){}. Next problem "%d"?, you are missing the double quotes here, it should be "%d". Also you do not check return of scanf at all, which is a bad thing. Your for loop uses a coma (for(i=0;i<n,i++)) where a semicolon ; is needed. After you make all this changes you get this: Now that you fixed your code, it will be more easy for you to find the amount of those numbers, which by the way you are not clearly explain it. As mentioned by others,your main() code wasn't written correctly,so you should change that. Also,it is not clear if you want to find the numbers appeared no more that 3 times(based on the title) or 2 times (based on the example). So after the changes and based on your example,you can use: and : } Input: 0014447777 Output:2 
c-19-98	X	Function with return value not error when you just call the function For function with return value, why does it not error when we just call it like we call a void function? For example, printf function is for output. But we see here, printf function have a return value. Why when we have a return value in a function, we could just call the function without specify what the return value saved to? And what happen to the return value? And what happen to the return value? It's discarded, ignored. Why when we have a return value in a function, we could just call the function without specify what the return value saved to? Because that's what the language designers deemed appropriate. Seems foolish to you, but that return value isn't always guaranteed to be useful. In the case of printf the value indicates how many characters were written. And we may care about it to detect any errors. But if we do any printing as part of error handling itself, what good is that value? Are we going to fail even harder now? We should be able to ignore it without introducing an unused variable. And just in case you want your compiler to warn you about ignoring the value, most have compilation switches to that effect. For example, GCC's -Wunused-result. In that case, you can make the discarding explicit by casting the result to void. Some say it expresses intent better, but YMMV. 
c-19-99	X	Trying to understand what does execlp System Call do? I have this question...trying to understand what does execlp do and I'm failing to understand. The question is how many processes are made in the code, and how does execlp work? Thanks in advance. 
c-19-100	X	Data Read/Write from internal flash I am trying to code a TZ series microcontroller from Toshiba to collect the data from sensor via I2C and store data into internal NOR flash with time stamp every second. I am facing a problem in reading the value from the flash which is the data from the sensor stored. My code is as follows, Both variables sram_area and hts_measurement1 are global arrays and are of type uint8_t . varialble Value is simple sensor data, which would keep on updating every second and is of type float. Variable rtn represents a return value (either 0 or 1) from the function WriteData and ReadData and is of type uint8_t. If I try to read the data simultaneously with write then I can read the value properly. But the idea is to first write the data to flash first and then read it when required. I request some one to help me out on this. I am using FREE RTOS. Thanks in Advance. Regards, Nitin 
c-20-1	X	Add to linked list via tail pointer without 3 levels of indirection I am working on a project that requires an implementation of a linked list. Before I started the project, I was reviewing the classic method of creating a linked list. I realized that in the past, I had been adding elements to a linked list via the head pointer that traverses the list until it reaches the null pointer. I figured out that there is no need to do it this way, and to implement it in a way that involves a tail pointer, but the only way I could think of is a one that involves a triple pointer or a global pointer. I was wondering, is there an easier approach that uses less levels of indirection? You can do: The tail pointer should point to the last node, not the next pointer of the last node: In main: In AddList: 
c-20-2	X	Linux Device Driver Error for the Keyboard Interrupt Handling During the way to learn how to program the Keyboard interrupt handling in Kernel mode, and following the example below, I get such an error after loading the driver in kernel space. The unloading also work fine, but after loading by insmod, I get such an error. I was wondering if somebody can explain it. I use Ubuntu 16.04.2 LTS. free_irq() should never be called with NULL, you should pass the unique handler that you have used during registering the IRQ. free_irq(1,(void*)(irq_handler)); //In your case You should not free the IRQ in init function, free_irq() should be called after register_irq() call has been made in the same module. Even if you call free_irq(1,(void*)(irq_handler)); in init function the kernel will taint as the handler was not previously registered. You need to let the kernel know which handler you want to remove. As you don't know which module has already registered the same IRQ so the logic is to use a shared IRQ in your module which you have already implemented in your code. In short, do not free the IRQ in init function. 
c-20-3	X	Trivial query with if statements How to achieve this simple logic? Essentially, I want to check for the same CONDITION1 over two consecutive interrupts. For 1st interrupt, I want to update the variable value to 1 and exit the loop (precisely do not execute the following if condition). As I see, I cannot use break condition with "if"! I am struck here for a while! Please help me! There is no loop in your code, just a bunch of selection statements using if condition. In this case, seeing this as a function body, if you want execution not to continue to the rest part, you can always return ; from the function. It's not a loop, so there's nothing to break from. Use return to exit the function. In this case it's better to go for M.K's answer and use else but return is always an option to exit a function at any place in the code. It can be very useful if you want to exit from a lot of nested if statements. Example: You are mentioning loops and you are not using any. As from what I understand about your question, and you do not want to enter the second condition EVER, just use an elsecondition. Just use an else condition and it would be better if you check CONDITION1 initially. 
c-20-4	X	Dynamically allocated memory got corrupted when trying to copy to it I've been searching in stackoverflow but couldn't find answer for my problem. I've allocated memory for 2 unsigned short pointers. Then I filled one pointer with data. Each word contains 1 byte caracter and 1 byte NULL. So data looks like this: 1 byte caracter, 1 byte NULL, 1 byte caracter, 1 byte NULL .... Now I want to copy the data to second pointer. But during the for loop the data of the second pointer got corrupted. The code look like this: After line 8 (memset()) is executed, all 22 bytes of 'lastDate' are NULL. But when entering inside the for loop, bytes 4-8 got corrupted, which leads to corrupted data of words 2-4 at end of the for loop. (When the for loop is at the index of words 2-4, the data is copied well, but then it corrupted again). Can you tell where I'm wrong? This code is not my full code but still more detailed then before. The full code is compiled and runs, but sometimes got stucked. While debugging the program I have noticed the memory corruption. 
c-20-5	X	Unexpected output when multiple threads update same variable output: 225 In the following code, the output is 225. But the correct should be 45 I know threads share global variables!. so this function should correctly output right. But adding that sum=0 inside only gives correct output. Whats happening here I don't understand! output: 45 You are modifying one global object from 5 threads. One thread increases value of sum by 45, so when you multiply it by 5 you have 225. Another issue here is that you modify one variable from each thread which may end up in some mess caused by races. You have data race because sum is accessed/modified by all threads without any synchronisation. So both 45 and 225 are "wrong". You may see different values in different runs. You need to synchronize the access to sum. Another thing to note you haven't initialized attr that you pass to pthread_create. You need to initialize it with pthread_attr_init. What you are dealing with is a race condition. With each systems, you'll get different output. The behavior of this code is not deterministic. Because, as you create each thread, in a loop, runner function, which iterates for 10 times, is invoked in an order which can not be known. So, expecting 45 or 245 or anything for that matter is wrong. Race condition is an undesired condition when multiple threads can modify a common/shared data at the same time because they can have access to it. The scheduler which can behave differently from system to system might switch between those 5 threads at any point in time. To have a deterministic behavior, this needs to be addressed by some synchronization technique like Mutex or a Semaphore. Mutex are my favorite for that. Not writing the whole code for you, because its not necessary with the question and I am lazy. The rough steps to do the same would be: Where you create threads, Initialize Mutex before you create threads Create threads (0 to n) Destroy Mutex once you are done pthread_join And in thread handlers, in your case runner function, Lock Mutex Do something Unlock Mutex (Don't forget this!) So, your main should contain pthread_mutex_init, if it does return NULL, you can proceed. In runner function, pthread_mutex_lock(&lock); should be the first trivial thing it does, followed by your code and then finally pthread_mutex_unlock(&lock); before it returns. The mutex you created can be destroyed by pthread_mutex_destroy. Its fun! 
c-20-6	X	Arithmetic Calculator using Linked list in C I am using linked list to create a Calculator in C language. Code: ** ** My Out needs to be like this: well I am using online C compiler but getting Segmented fault error. Program is running in repl.it: https://repl.it/repls/LimpingLightgoldenrodyellowGharial Not running on other online compiler. Please check and see is there any problem with Code? 
c-20-7	X	c malloc() - do I need to allocate space for the null terminator I have a snippet of code below that appends the text _dut1_serial_log.txt to a supplied filename. The supplied filename is a variable in the struct pointed to by targetP. The text _dut1_serial_log.txt is 20 chars long. My question is do I need the +1 when I call malloc for the null terminator? Both strcpy and strcat will copy the NUL-terminator from the source string to the destination buffer. You do need to reserve space for that terminator in the destination buffer therefore. To avoid any doubt, "_dut1_serial_log.txt" is a const char[21] type. 
c-20-8	X	Crash when populating an an array of structs I'm trying to make an array of struct. test.c Trains.txt The output should be etc... But I get this: Why does the program crash? 
c-20-9	X	Creating a FIFO Queue with Keypad Inputs I'm trying to implement a FIFO queue for keypad inputs but cannot seem to get it to work. I'm able to get the keypad inputs to appear on an LCD screen but that is all I'm able to do. I think the code is supposed to read a keypad input and push it into a queue, then pop the keypad input and read the value onto an LCD screen. Could anyone advise on why it doesn't display all the values I've pressed? Thank you. Some problems in your code: As pointed before, delay = 10; is not well placed key variable of main function is set only at the beginning of for loop. So a corrected code could be: Maybe you can write it shorter: 
c-20-10	X	Why isn't this swap program working in C? I'm completely new to C and I'm trying to create a basic swap program, can someone please explain why the code below isn't working. Thanks in advance. int *temp = *p1; will not compile (this is a constraint violation and must result in a compiler diagnostic): you are assigning an int (other than 0) to a pointer type. And that's not allowed. Write int temp = *p1;, fix the obvious typos in the swap function - give it a body! - and all will be well. The void is a sub-process, it must be enclosed in braces and must not end in a semicolon. on the other hand as the community says int * temp = * p1; is a constaint violation, it must be int temp = * p1; Nor was exchanging values, it showed only as when they were entered. Finally, the main returns an int, you must specify that you return a 0, that is done with return 0; The whole program would be like that 
c-20-11	X	Writing to a memory mapped text file printing NULL till the end of mapped memory In this code, Im writing some text to a memory mapped text file. Data is written to the file successfully, but when i open it with notepad, after the written data, "NULL" is repeatedly written upto the mapped memory limit which is greater than the text i have written. What could be the possible reason? There is no 'end of file' marker within the file. You need to set the file length, so the OS marks it correctly. See MSDN documentation for SetEndOfFile Sets the physical file size for the specified file to the current position of the file pointer. You cannot set the end-of-file marker through a file mapping. The end-of-file marker does not physically exist in a file. It is a flag raised by the OS when reading past the end of a file. To set the size of a file you will have to call SetFilePointer followed by SetEndOfFile on the file object used to create the file mapping. first of all CreateFileMapping and MapViewOfFile this is bad solution for log file. you need create/open file with FILE_APPEND_DATA access instead GENERIC_READ | GENERIC_WRITE - so call must look like: in this case you open file with FILE_APPEND_DATA and SYNCHRONIZE (because no FILE_FLAG_OVERLAPPED): If the caller sets only the FILE_APPEND_DATA and SYNCHRONIZE flags, it can write only to the end of the file, and any offset information about write operations to the file is ignored. The file will automatically be extended as necessary for this type of operation. after this you need log via WriteFile - it will be automatically append to the end of file. this is what exactly need for log file. however, if want use CreateFileMapping and MapViewOfFile - at first CreateFileMapping return 0 on error, so check if (hMapping == INVALID_HANDLE_VALUE) is wrong if you want change file size - you need use for this SetFileInformationByHandle with FileEndOfFileInfo (vista+)or NtSetInformationFile with FileEndOfFileInformation (working everywhere, how not hard understand SetFileInformationByHandle is only very thin shell over NtSetInformationFile or ZwSetInformationFile (in user mode this is the same function)). use SetFilePointer followed by SetEndOfFile also possible but bad and not effective choice - you will be have 2 calls in src code instead on single. in binary - you will even more worse situation: first you set file position, that SetEndOfFile read this file position and finally call NtSetInformationFile with this position. so 3 calls instead one. and assume that nobody change file position (on this handle) between SetFilePointer and SetEndOfFile calls but need clear understand that call SetFileInformationByHandle with FileEndOfFileInfo you can only after you unmap view and close section. otherwise you got error ERROR_USER_MAPPED_FILE (STATUS_USER_MAPPED_FILE ) If CreateFileMapping is called to create a file mapping object for hFile, UnmapViewOfFile must be called first to unmap all views and call CloseHandle to close the file mapping object before you can call SetEndOfFile. 
c-20-12	X	Reading lines from a file and splitting them into arrays I am working on a Linux project in C. I am creating a number a processes and each one writes his information on a file in the following format PID | NAME | TYPE | GENOME and the process.txt file looks something like this: 567 | A | B | 20 568 | N | A | 2 569 | Z | B | 12 This information I provide while executing it's code. What i want to do is to let the parent process read the file at the end of the child execution and be able to split this values into arrays in this way: I have been looking for a way to do such thing but haven't found anything specific yet. A runnable code would be appreciated. I won't be helping you with your entire code, but here's a tip. Read each line and then use sscanfto read the values into your arrays. Here's a small code: When scan or writting a file, you need to open it first. Then, you could specify what you want to do using fprintf to write or fscanf to scan the data. To scan you file, here's the code : 
c-20-13	X	NTP client in infinite loop (Not working ) I have designed a client from the reference given here. I modified the code (see below) to fulfill these requirements print timestamps in milliseonds within infinite loop for getting NTP timestamps, RTT etc. to define a cycle time (get time every x second) Makefile: make and run the code using The problem I am facing and need your suggestions possible code changes and improvements The code doesn't work infinitely, it stops in between and doesn't print any output after some iteration (no error message is shown) The timestamps are not of same size although 64 bits RTT and precision print the same value and doesn't get updated in each iteration (Sometimes both shows 0) How to build T2 from packet.rxTm_s and packet.rxTm_f as one timestamp of 64bit. When I compiled your code with some warnings flags, I got some warnings: 25 warnings generated. Some are clearly not useful but some are really scary: I didn't keep them all but there are still 19! First of all you should fix all of them because they are important in my opinion, and ignoring those would likely cause undefined behavior. After you've cleaned all these warnings, you could try again to debug your code. (Try to get to zero warnings with clang -Weverything; not all warnings are useful but try to understand them before ignoring them). Next, I tested your code and it seemed to work on my machine. Yet, there is a lot of potential undefined behavior in your code. Bit fields are quite inconvenient as their layout is implementation-defined. Nevertheless, I get this output: Which looks good to me. So to answer to your questions: The code didn't stop in my machine and worked as expected. Of course the reason why your code stopped is obvious: you have called write() and read() that could block until the I/O is completed. Remember that you are using UDP protocol, some packets will never arrive to the server or some packets from server will never reach you. If you want to code a real server, use something like select() or poll() or epoll(). NTP is at version 4, your code asks for 3 (0x1b; // Represents 27 in base 10 or 00011011 in base 2. => 3 for version field. By the way, you create a bit field... USE IT; don't use magic number). So I suppose that somehow you end up with a mix of version 3 and 4; the thing that I don't understand is that documentation of NTP claims the protocol to be backwards-compatible. To answer this question you should read the RFC V3 of NTP protocol (obsolete). I have no idea of what is it and why it doesn't change. I have no idea. So, you will ask why do I answer you if I don't give you the answer to your question? It's because you've clearly misunderstood critical things. First this tutorial is ******** (Linus' favorite word), you can't expect to parse a protocol with 30 lines of code in C when the last RFC of NTP protocol has 6163 lines ! You MUST read this protocol if you want to implement your own parser. Secondly, the code of this tutorial is very badly written, my "wtf-o-matic" showed me a very high value of "wtf (worse than failure) by line". Why to use unsigned and not uint8_t for the bit field (bit fields are 80% implementation defined anyway) ? Why ntp_packet packet = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 }; and not ntp_packet packet = {0}; ? Why and why and why use memset(&packet, 0, sizeof(ntp_packet)); just after ??? And what is that *((char *)&packet + 0) = 0x1b;, this IS ******** ! Well, there is more to say but I will just advice you to use getaddrinfo() in place of all the mess of gethostbyname(), htons() and etc... As a conclusion: read the RFC that I linked (NTP V4); and stop using this "tutorial". If you want implement your own NTP library (the good news is coming), you could use the nice skeleton provided by the RFC, I was so happy to find a code example in a RFC that I made a gist of the example for you. And the good news is that the RFC is reduce by half in terms of documentation lines to read! So GL, HF in your lecture. I've read the C code and agree about the "quality" of this code in terms of things to do. For the analysis, I disagree on this point: - I don't think the problem is a real-time problem, this can be easily check by using wireshark and filter on the NTP protocol. Despite the fact, that the program fails, the wireshark should still capture data on the ethernet interface. - For me, the problem seems to be caused by the Kiss-o'-Death Packet (see section 7.4 of the RFC 5905). - A wireshark capture will help to know what really happens and investigate more deeply. 
c-20-14	X	Do I need to free in BinaryTree the root or the data? I have a question... If I have a Binarytree like this: and have a start function: And a funtion to add left child in binarytree, if root is not empty and here I must give my text and line dynamic memory. } Now the problem ist I want to free everything in tree so I have a a function like this to call himself if left or right or root is not NULL. So i saw some codes that I should free the root and not the datas. Main.c You shouldn't free memory that you didn't malloc. Here the first node's pointers are pointing to a string literal. You shouldn't call free() on them. You should allocate memory in the initial node also and then try to copy that string literal. Now every node is similar. Now you free the memory of each node. Which node to do first? The post order traversal would be the one. First the children, then the parent will should be freed, otherwise you will have memory leak. root->text was allocated calling malloc - You have to allocate dynamically to be able to call free on it. In your code the initial node's text is pointing to a string literal. You need to do it proper way as mentioned in answer - (allocate - and copy the string into newly allocated memory). 
c-20-15	X	[Solved]File line counter in C I want to count the lines of a c file ignoring the lines that have comments or empty lines , i came up with the following code but my string ( char pointer) only returns three chars instead of the whole line : Thanks for the answers especially for @Michael Walz i found that i have problems with my pointers. After i re-adjusted my if conditions now the line counter works just fine and this is the working code : You probably want this: This is untested code, there may be errors. Also read this: Why is "while ( !feof (file) )"? always wrong?. I also strongly recommand you to read the chapter dealing with strings and the chapter dealing with pointers in your C text book. 
c-20-16	X	Is it safe to derive the Argon2 type from the encoded hash value? I'm trying to use the Argon2 reference implementation and I'm a bit confused on the use of the type parameter (i, d, id) during verification. For password verification, I would need to call one of the *verify* functions of the library. These functions come with the "high-level" API: The confusing part is why do I have to choose which method to call (or what to put in argon2_type type on the generic function), since the type is already contained in char *encoded? From an application point of view, I would need to know which type was used for each password, beforehand. But... that's what encoding is all about. Wouldn't it be great if there was only one *verify* function? which would derive the type from the encoded value? So, the questions are: Does the RI current API design tells me something about security, or usability was something the developers didn't really bulletproof? Is it safe to derive the type from the encoded value, or should I choose one type and stick with it (aka hardcode it)? Thanks The confusing part is why do I have to choose which method to call (or what to put in argon2_type type on the generic function), since the type is already contained in char *encoded? ... Does the RI current API design tells me something about security, or usability was something the developers didn't really bulletproof? I'm afraid that's something only the authors can answer. However, generally reference implementations may not be as user friendly as those are meant for developers of argon2, not so much the users of the library. Is it safe to derive the type from the encoded value, or should I choose one type and stick with it (aka hardcode it)? It makes sense to disallow downgrading and it may be wise to make this kind of filtering configurable. In the end it is unlikely that an adversary finds collision even if the adversary has full control over the parameters - so it is not overly critical. Personally I like to specify a specific protocol version separate from the actual parameters, which then specifies which algorithm to use. 
c-20-17	X	Not being able to send message between clients (C) I want to have a minitalk done using client-server (server with multiply clients). Client is launched with the name parameter, and connection to the server is done. The server remembers names of every client. Then, in every client I can send message to another - for example I have 2 clients launched - c1 and c2, I can send message from c1 - c2 hello and it should be shown in c2 as a received one. I can also send from c1 to c1, it doesn't matter. What I expect is below the clients code (because server works well) I should be able to send messages like "ping-pong", so c1 sends to c2, c2 sends to c1, c1 sends two messages to c2, c2 sends one to c1 etc.. At the moment, the connection works well, then I send first message (it doesn't matter who is sender and receiver, for example c1 sends to c2). I can send many messages from c1 to c2, but when I want to respond (message from c2 to c1) nothing happens. I also noticed, that this message isn't even is server, so it's certainly a client's fault. I can still send messages from c1 to c2, but not inside out. What "flushes" this state? I send a message from c1 to c1. After this message, the previous ones from c2 are shown in c1 too (with the most recent from c1 to c1). But I have to "flush" every time when I want to receive message from c2. Should I add something to select() call? (For example the parameter for writing). Or the loop isn't done well? -EDIT server code 
c-20-18	X	read matrix issue C language This code should read and display a matrix. But it doesnt work, I cant find the problem. Why it doesnt work? For input: The output is: Because n is passed by value, not by reference. Use: and Now n is passed by reference and it should work as expected. First of all, let's deal with a fact "In C there is nothing called pass by reference". But yes we emulate that with what is available in C, that is pass by value. So in the first case there are things that happened You call the function like this read_matrix(a, n); A copy of the variable is there in read_matrix. We make changes to the copy. Function ends and story ends there. That local variable's scope ends. It is not alive now. You come back to main(). Do you expect to see any change in n? Nope. Because all change was there in read_matrix. Now to change that we write it this way. Now here also couple of things happened You pass the &n or the address of n. Then nn is a local variable (local to read_matrix) containing the address of n. scanf() wants the address of what it will write something. We pass the address of n or content of nn. Then scanf() writes where? In the memory of n. So n in main() changes. Now we want to get while looping the value of n or the value in address of n or the value in the address contained by nn. So we use * on nn. Or *nn. Now you back to main() and the local variable nn is not there and it's lifetime ended when the function read_matrix ended. You see the changed value in n. Do you see any difference in two method? In one we pass the value. In another we pass as value the address of n. Both are pass by value. But in second method due to the side effect of accessing memory we see he change in main(). Story ends. 
c-20-19	X	Openssl in Apache "Segmentation fault." apache+php When use curl request https resource,it will: "Program received signal SIGSEGV, Segmentation fault." gdb result: it will end at engine_unlocked_finish, what's wrong with it ? when use php script it's ok, but use apache+php,it will cause that fault... 
c-20-20	X	how to redraw or invalidate ubuntu desktop programmatically by c or python I am now using ubuntu16.04 with GNOME desktop environment. I can change attributes(eg metadata::nautilus-icon-position) of files on desktop by c or python, but desktop display does not update. Then i simulate a "F5" press event using xdo_send_keysequence_window(x, CURRENTWINDOW, "F5", 0) from libxdo, display now update but with a blink (It seems to me that all widgets on desktop are first cleared, then redrawed). If i continuously change file attributes and simulate "F5" press, desktop keeps updating and blinking. I have two questions: how does desktop system handle "F5" press event? (first clear all widget except background on desktop and then maybe in next time slice redraw all widgets??) is there a way(api interface or send events to desktop) to invalidate or redraw desktop without blinking,just like a normal GUI application(widget.move() or container.invalidate())? I have searched a lot and can not find answer.Thanks a lot 
c-20-21	X	Why is the output 5 when sum doesn't return anything? the sum function doesn't have any return type specified also it doesn't have any return statement still the output on a turbo c compiler is 5. Can anyone explain why, I guess it's because the printf function prints 5 characters and maybe returns the number of characters printed. 
c-20-22	X	How to get the interface used to join a multicast group programmatically? Is there a way to find which interface has been used to join an IPv6 multicast group, if the index used was 0 meaning that we leave to the kernel to choose which interface is suitable. Can we get that information afterwards? Does the IPV6_MULTICAST_IF socket option change after the join is complete? If not you'll have to look at the interface table and see which is the default, on windows this would be done with GetAdaptersAddresses, no idea for *nix. 
c-20-23	X	Working with Captured data in OpenAL I wanted to make a simple voice chat program and using OpenAL. On one side i capture voice and send it througth the internet(using Boost.Asio), so on the other side i just need to play that captured voice. BUT my problem is that i manage to capture voice say, 5 seconds but on the the other side(i mean another client, computer) plays that 5 second voice only very first second not the whole data. I don`t understand what is wrong with my code, please help me with it and any your suggestions are VERY important to me. Thank you in advance!!! //... //... so i send the captured data captureBuffer with samplesCaptured and on another side(client) i receive them and want to play. As i said above it plays not the whole data. 
c-20-24	X	Easiest way to print 64 bit hex data splitted by 16 bits I want to print 64 bits hex data in following format: I can think of following: Is there a simple (or maybe more clean) way to achieve this? Bit shifts are always the best method, because they are both fast and platform-independent. However, your code is needlessly complex: you can mask after shifting instead of before. 
c-20-25	X	Array of strings: Segmentation fault(core dumped) I'm trying to write a code that sorts an array of strings in alphabetical or reverse alphabetical order, depending on the command line argument given. "-o a" for alphabetic. "-o r" for reverse. This is my code so far. The program is supposed to work something like this: or this: The program compiles without error, but when I run it I get I'm new to C, and I don't quite fully understand how to manipulate the memory allocation. Any help or advice is much appreciated. In for loop you have used = operator instead of <= or >=. NOTE: There are other logical errors also. UPDATED: You can use following code: You can see working code here(Command line argument are nor provided due to online IDE restriction). I fixed the logic errors that were pointed out and the swap function, and the program runs without crashing. The results are mostly right except for "Mercury". Current program: Result with command line argument -o a: It seems the program skips the first string in the array. 
c-20-26	X	kernel mode version of OpenProcess Is there a kernel mode version of OpenProcess function? Basically I want to get a process HANDLE from process ID. Specifically, I want to get the HANDLE of System Process ID. Thanks! If you are in an arbitrary system thread you can use ZwCurrentProcess(), otherwise you will need to figure out the ID of a system thread somehow and use ZwOpenProcess. You might also look to see if there is a way to convert the result of PsInitialSystemProcess to a process handle (or maybe PsInitialSystemProcess is what you are really after). 
c-20-27	X	How the value to the several flags are assigned in the terminal I was trying to look into the termios structure in C. I wanted to know how the value to the several flags are assigned in the terminal. I could not understand how the c_cc array in the structure gets its value assigned to its various indexes. Is it through the input we give in the terminal. Or is there some other way the values are assigned to this variable.? tcflag_t and speed_t are unsigned int, cc_t is unsigned char. 
c-20-28	X	How to correctly use pointers in my c program So I turned in this code for my assignment to my teacher thinking I had completed his request that we use pointer techniques for writing our hangman assignment. He gave it back and said I used array techniques and not pointer techniques. I have struggled with learning pointers and arrays, so I am a bit confused how to fix where he said I went wrong. These are the parts of my program he marked were array techniques and not pointer techniques: My full program code is below (can anyone help me understand how a proper pointer technique can be implemented, I clearly don't get it - THANKS in advance): Original: Becomes: A pointer is the base address, you can index it just like an array and the compiler will work out the offset according to the type declaration of the pointer. q = base address of your data, [i] indexes from the base address. I think I've interpreted your question wrong if you wanted to convert all the array references to pointers then: Original: Becomes: I can't quite see the point that is trying to be made, in C there is no difference in pointers and arrays they are the same and you can access them either way. Lets recode your loop: Becomes: First of all, p = &word; and q = &guessed; are incorrect; remove the & in both cases. word and guessed are arrays containing values of type char, which "decay" to pointers to their first items in most cases. As an example of array decay, consider guessed: guessed has type char[20], or "array of 20 char values". guessed[0] has type char and is the same as *(guessed + 0), i.e. 0 chars from the beginning of the array (which is the first item in the array). &guessed[0] has type char * and is the same as &*(guessed + 0). Since & and * are inverse operations, they cancel each other out, resulting in &guessed[0] being the same as guessed + 0&mdash;or just guessed. The only difference between guessed and &guessed[0] is the type because the [0] indexing operation happens before the &, causing the types to differ. Array decay effectively makes guessed the same as &guessed[0] in the context of your assignment to q, so you can write either one. The exceptions where an array variable guessed will not behave the same as &guessed[0] are: sizeof(guessed): gets the size of the entire array &guessed: gets a pointer to the array, with type char (*)[20]&mdash;pointer to array of 20 char values As for your teacher's instructions, you probably need to modify the p and q pointers themselves rather than use *(x + i), which is the same as x[i]. For example: becomes: Similarly: can be rewritten as: 
c-20-29	X	Finding overlap in Prims MST I'm stuck on a problem where I am attempting to calculate the maximum overlap in a Prims MST. I have the following information: and Within this struct I have information regarding index value, x, y, parent, num_children, child[8] all correct. Now i'm having troubles of making up with a way in which I can recursively find the the overlap. My initial approach was to set set every single leaf nodes overlap to 0, as I know a leaf will never overlap to its parent. Then my recessions base case is when the node I am currently on has a parent of -1, in which case I know at that point it is the root. Fundamentally, I am stuck on being able to think of a way to calculate this overlap. For instance, if I am on point 7, I know its 2 children are point 3 and 6, while its parent is point 8. Point 7 - 70, 30 Children Point 6 - 70, 90 Point 3 - 100, 55 I can see that some overlap exists. From point 7(70,30) I must go to point 3(100,55) then again from point 7(70,30) I must go to point 6(70,90). I see that no overlap exists on the X axis, however overlap exists on the Y axis for a total of 25 (55-30). I'm having of figuring out the math involved calculating the overlap. 
c-20-30	X	Segmentation Fault Recurrence function in C Flight Planner 10337 Hi im trying to apply bruteforce to compare with my dynamic function called solve.. the thing is im having a little issue in using bruteforce since im getting an error called Segmentation fault on function "BruteForce" Im trying to get both the same answer.... just to finally compare with function solve(); heres my code: 
c-20-31	X	How could I effectively read complex numbers when they are written as (a+bi) form? I want to make a program that adds and multiplies complex numbers using structures. Up to here it seems very straight-forward to me, as I know how to create structures and make functions that compute this. But I have a problem with reading the input values, as I want them to be written according to these rules: Real numbers(imaginary part==0) are written as numbers themselves. ex) Input: 90 Imaginary numbers(imaginary part!=0) are written with brackets. ex) Input: (3 + 6i) So for example, I want to achieve the below: Input: 80 + 100 180 Input: (3-2i) * 2 (6 - 4i) Input: (3 + 4i)*(2 + 2i) (-2 + 14i) I know that if I read the operation first and then read each number separately this problem would be solved. But if I wanted to read complex numbers as a whole distinguished by parentheses, I do not know how it could be done. The difficulty that I had was not in the computing algorithm, but in reading the input values with scanf(). When reading with scanf() I do not know when there would be parentheses, so I feel it difficult to read two complex numbers and save them into my complex structure. Thanks! 
c-20-32	X	Calling fopen with an output from fgets I am trying to open files with an output from fgets from another text file. Specifically, my "./list.txt" contains all of the relative paths to the files I want to open. For example, this is what list.txt looks like: and so on. What I tried to do was get one line from this "list.txt" and use that output as a parameter for another fopen call, thereby resulting in opening of "./tst/f/ak/1237743.txt" and so on. I made a very simple code to see whether or not this could be done. This is how my code looks like: This is what I got: ./tst/f/ak/1237743.txt failure Any help on where I'm doing it wrong? I also tried and it worked fine, so I am sure there is nothing wrong with relative paths here... Copying comments into an answer. The basic problem is that your data file has CRLF (DOS-style) line endings but you're working on a Unix machine that doesn't map CRLF to newline, unlike a Windows machine. You could improve the printing by enclosing the name in, for example, square brackets: This would show whether there is a newline, or perhaps a carriage return, in the string addr. And that, I suspect, is the cause of your problem. You'd probably see the ] on a different line from the [. Alternatively, you might see the ] at the start of the line and not see the [ at all. Also, are you compiling and running on a Unix derivative or on Windows? Was the data file ever on a Windows machine? (I guess you're using Linux and the data file came from Windows.) To which the response was: Wow, you are right. [%s]\n shows "]./tst/f/ak/1237743.txt". And yes, I am using Ubuntu but the list.txt file was created from a Windows machine. Is this the source of the problem? And the answer is: That's a carriage return before the newline that you zap. ["¦] Yes " the configuration information you give is the source of your trouble; Windows data on a Unix (Linux, Ubuntu) machine. The trick of surrounding text strings with marker characters can often diagnose problems like this quite quickly. It's worth remembering. And again: Thank you! So I guess I have to create a whole new list.txt file? To which the response is: You have a couple of options. One would be to create a new file. You could use a conversion utility such as dos2unix to convert the file. Or you could strip newlines or CRLF by using strcspn() instead of strlen(), like this: That will put the null byte at the first CR or LF it encounters, or overwrite the null byte with a null byte if there are no CR or LF characters (so it is safe, even with degenerate data). 
c-20-33	X	why if condition is working in a weird way I am just trying to search the key in a binary search Tree. Here is what I did. In the main function,check if function return 1, if it does, the key is in the tree. if the key is not in the tree it will print : which is correct. So here comes the weird part, if the key is in the tree, sometime system will print out : and other time system will print both: So what can I do to fix it? Here is my entire code } You should not search the whole binary search tree for a key. You should follow the correct path. That is why you should compare you key with the current root value. If the value is same as key, then this is the output. If the key is less than the root value, you should go to left subtree, otherwise right one. In your case, you are traversing the whole tree even if you found the key. So that's why sometime you are getting both output. Try this: Edited Answer-: The issue was regarding the return values. Even if you found the key, in the next iteration loop you are returning value 0. This will be checked in you main function and will be reported as key not found. Second the search was not done in the right links of the node. Duplicate entry in root linked list while adding entries especially the first entry. Just change your code like this, Main function, Return value 0 means success, any other value including 1 means error/key not found. I found minor issues as well but i think those should be found in compilation time itself like, int array[numOfNodes]; array declaration needs a const number not a variable. Usage of Node instead of node. Using "new" keyword as a variable. Swap function to be defined above its usage. 
c-20-34	X	C Unexpected segmentation fault I am trying to implement the avl tree in C. The following is part of my code. struct Node contains structure variables including an integer key, height and 3 points to the parent, left and right child of that node. In the following code, I am inserting "8" into a tree with "2,6". I printed out the key of the right child of the node (i.e. 6). However, when I passed the pointer to the insertright() function and printed the right child right away, it is not 6 but a mysterious number. As I need to go to the right child of "6", it gives me a segmentation fault on the next step. The weirdest thing is that I compile and run this using gcc on my Macbook. But when I run on some online compiler (i.e. repl.it), it works well for this case (and segmentation fault still exists when more elements are added). Thanks! The orignal code is as follows: 
c-20-35	X	Can I invoke ioctl() (system call) for nvme with different threads using pthreads I am working on a testing tool for nvme-cli(written in c and can run on linux). I am interested in repeating a nvme command 'r' number of times with 't' number of threads. The below code does the repeat of a command along with threading, but the issue here is the parallel execution time is very much high compared to serial execution. As per my observation the reason is the invocation of ioctl() system call from err = nvme_identify(fd, 0, 1, data); i.e nvme_identify() inturn calls ioctl(). So can I know if ioctl() is blocking for nvme ? Also can I have any way (solution) to reduce the execution time by threading? The thread function is as follows : 
c-20-36	X	C program, displaying '>' in front of user input in terminal I'm making a simple client/server chat application, and in order to better differentiate between messages from the client vs. server on the client terminal, I'm trying to have a symbol displayed in front of where the client is typing text. For example, on the client, it would have: '> hello what is my name' 'your name is bob' Where the first line has the '>' symbol in front of where the user has input 'hello what is my name', and the server response doesn't have the '>' symbol. How can I go about doing this? You should use a while loop like so. This reference page for the function scanf() might help you. 
c-20-37	X	memory leak in ldap_start_tls I am writing a sample program to connect to LDAP Server using STARTTLS. I am able to connect and authenticate the user using STARTTLS but it is giving memory leak in the program. Sample Program: Command to compile: g++ -o sample_tls sample_tls.cpp -I./include -L./lib -lldap Command to run: valgrind --leak-check=full --log-file=./leak_tls.log ./sample_tls Memory leak: It looks like it is not stopping the TLS connection after unbinding. Any help appreciated. 
c-20-38	X	15 Puzzle Program, stuck on up left right down commands I am having trouble making the cursor go right or down? I can go left and up, but not the other two. I'm not looking for someone to answer the entire program its just I have been stuck on this for hours and every other code I look at sees similar to mine.I can get it to correctly do up and left but right and down cause a problem and not sure why. The bug is the checking logic is wrong and the bad practice you followed is lots of repetitive code. Well I have boiled the code to something simple. You can check that there is a break statement in case of down and right. The reason is, when you swap -1 to the right or down then you will meet up again in the loop iteration. So without the break the result would be Another thing is don't repeat code. The readability is worse when you do that. Maintaining the code is even harder. Even better here you can write swap() logic and use it. And also the movement of the tiles can also be done with another function. Tricky downlogic (Edit-1). In case of downlogic the simple breaking up the loop wont work because in case you do that there will be a chance that in next iteration it will again get -1 and try to swap it with next number. 
c-20-39	X	install clutter in ubuntu I am installing libchamplain. I installed dependencies, but I could not make out how to install clutter. While running configure I am getting these errors I installed clutter while configuring, the following error occurs- I installed glib 2.44 also. why do I get this error and how to solve 
c-20-40	X	Merging strings together based on command line arguments. I'm trying to write a program in C to merge 2 string together in two diffrent ways based on the given command line argument. '-i' to merge the string alternating, like this combine_strings "“i Please enter a string of maximum 30 characters: abcde Please enter a string of maximum 30 characters: 1234567 The combined string is: a1b2c3d4e567 '-w' to concate the 2 strings together, and insert a '*' between each character of the string, like this combine_strings -w Please enter a string of maximum 30 characters: abcde Please enter a string of maximum 30 characters: 1234567 The combined string is: abcde*1*2*3*4*5*6*7 This is what I got so far. I getting these error messages. I'm new to programming, so any help and advice is appreciated. Two problems, you didn't include stdlib.h where there is the declaration of the function malloc(). Also you are passing a wrong parameter to the strlen() but you passed char**. Same in other functions too. You had parameter mismatch. You wanted Also you should use strcmp when you are comparing "-i" with argv[1]. Now argv is basically array of char*. And you are basically comparing a null terminated char array with (string) with "-i". (Not '-i'). Also notice one interesting thing, compiler says An ordinary character literal that contains more than one c-char is a multicharacter literal . A multicharacter literal has type int and implementation-deï¬?ned value. '-i' is a multicharacter literal. This has type int that's why the warning comparison between pointer and int. Also there is another thing you should clearly know, when you pass an array to a function it decays into pointer to the first element of the array. char *s[100] decays to char** because the content of the array is char* a pointer to it would be char**. 
c-20-41	X	How to set input files with a Makefile? (C) If I have source code files main.c, library.c, library.h, etc. how would I go about setting the input text files to act as console commands like main input1.txt input2.txt? Can this be done at all or must it be done post-compilation? Basically, you treat them like dependencies for running the program. In the above example, make run will run the program and compile it if needed. 
c-20-42	X	How to expand allocated memory in place Is there something like std::realloc but do nothing if it fails to expand the existing memory (of course it will let you know it failed)? I mean truly expand in place. Not copy to a newly created memory chunk. No, there is no such function. From your comments, I suppose that the following might be of interest to you: `std::realloc` for non-POD types and What is C++ version of realloc(), to allocate the new buffer and copy the contents from the old one? PS: Re-approach your problem, since the existing methology is most usually enough. truly expand in place. Not copy to a newly created memory chunk. This is impossible because of how virtual address space works on direct-addressing (non-segmented) instruction set architectures like x86-64 (or ARM, MIPS, RISCV, etc....). (so that strong limitation is mostly not from software, but from your hardware, in the previous century some segmented architectures like iAPX432 or Rekursiv have been proposed, but failed) Let's suppose you want to realloc a pointer zone of one megabytes to get four megabytes of more memory. But the virtual address space of your process could contain some other data -for some other malloc-ed zone or something else like a code segment, a call stack, etc...- used two megabytes ahead. So you need to move your (growing) zone -by asking your OS for some fresh 4 megabyte zone- and copy from the previous one. On Linux, look into proc(5) (e.g. type man 5 proc in a terminal) and into mmap(2). Run the cat /proc/self/maps and cat /proc/$$/maps commands in some terminal to get a better intuition about virtual address space. Be aware that all memory management is done above such mmap and related (sometimes, old sbrk) system calls. So your malloc or operator new is (sometimes) using them (most of the time, reusing previously free-d zone is preferable). Use strace(1) to explore the system calls done by existing programs. BTW, on Linux, both your C standard library and your C++ standard library are free software. You could study their source code. Read also Operating Systems: Three Easy Pieces to understand more how OSes work. Consider reading some book on Computer Architecture (or at least some slides on the simplified Y86 architecture). You've got some deep misunderstanding about how your computer works. Contrary to what other answers say, the function you need could be provided by the C standard ibrary. It isn't for some reason or other. It was considered for an adition to the C standard, see e.g. http://www.open-std.org/JTC1/SC22/wg14/www/docs/n1527.pdf (search for try_realloc). I don't know if the C committee is still pursuing this. Bottom line, there's no such function as of now. 
c-20-43	X	C open second connection on socket I need to program a distributed hash table with P2P. The peer which gets the request from the client needs to have an open connection to send the response back and also needs to open a connection to its predecessor to receive the information. I tried using accept a second time on the same socket but it didn't work. I read a few solutions about forking but I'm not sure if it's suitable for my needs. (And I'm not really sure how to implement it correctly here) My basic setup: Edit: Can someone lead me to the right path? 
c-20-44	X	Print out all possible strings in C using recursion My assignment is that code takes a string as input, and if there are x's in the string replace them with either a 0 or a 1, and print out all the possible string combinations. We have to use recursion for this as well. For example, if the input string was "1x0X" the output would be: I'm really struggling with how I'm supposed to find all the permutations of the string without having the complete string yet. I have a series of function that combine to print out all permutations of a list of numbers, but I don't know how to make a function where it only permutes certain elements of a list. Does anyone have any suggestions on how to accomplish this? Recursion is best used when the recursive depth is limited and not too big. Yet setting aside that axiom, below is a double recursive solution. Its eats up stack space quickly (that is its biggest constraint) and so is not a robust solution. Yet it gets the job. For "code takes a string as input,", use fgets() - not shown. Yet in the spirit of recursion why not recurse the input too? The print_combo() recursion produces a linked list (LL) of characters and keeps track of the number of 'x' read. Once an end-of-line/end-of-file occurs, it is time to print and the linked-list starts with the last character. The foo() recursion prints the LL in reverse order, passing in a binary mask to direct the x substitution of 0 or 1. The unsigned binary mask is good for typically 32 x's. That is another restriction. If you must, mouse over for the code. Input Output Jonathan's initial suggestion This code implements what I suggested in a comment essentially verbatim. It accepts either x or X as a valid marker because the examples in the question do too. The main() function is essentially the same in all three variants. The use of strcspn() is a standard idiom that trims everything from the first newline onwards, or overwrites the end of the string if there is no newline in it. Note that this solution is safe even if a read-only string literal is passed to the function; it does not modify the string that it is passed. The following solutions will both crash or otherwise fail if the initial string is in fact a read-only string literal. It would be possible to determine the string length, allocate a VLA (variable length array) to take the string copy, and copy the string into the VLA. That would dramatically reduce the cost of allocating memory for the string (VLA allocation is much simpler than a general purpose memory allocator). Gene's Suggestion This code implements what Gene suggested in a comment. It will be more efficient because it does no extra memory allocation, an expensive operation on most systems. Mildly optimized variant This optimizes the work by not rescanning the prefix that is already known to be free of x's. The difference in performance is probably not measurable on almost any input simply because the I/O time will dominate. With all due respect to chux, I think that the code in the answer is more complex than necessary. The extra data structure seems like overkill. I would do something a bit simpler. Just use a position parameter to iterate over the input string. Whenever you hit the 'x' character recurse twice, once for '0' and once for '1'. Make sure to reset the character back to 'x' after you return. Whenever you hit the digit character just recurse once. Increment the position parameter each time you recurse. When you hit the end of the string, print it out. With this idea, you'd get something like this: My output looks like this: 
c-20-45	X	Converting massive binary input string into character string C I'm not familiar with C at all so this might be a simple problem to solve. I'm trying to take an input char* array of binary character sequences, ex. "0100100001101001", and output its relative string ("Hi"). The problem I'm having is coming up with a way to split the input into seperate strings of length 8 and then convert them individually to ulimately get the full output string. I'm aware of how to convert 8-bit into its character, I just need a way to split the input string in a way that will allow me to convert massive inputs of 8-bit binary characters. Any help is appreciated... thanks! Maybe this can help. I didnt compile it but there is the idea. You can loop every 8 bit separately with while loop. And assign 8 bit to binary array with for loop. After that send this binary array to convert8BitToChar function to get letter equivalent of 8 bit. Then append the letter to result array. I'm now writing c for 3 year if there is mistakes sorry about that. Here pseudo code. From what I can tell, your binaryToString() function does not do what you'd want it to. The print statement just prints the first eight characters from the address pointed to by char* b. Instead, you can convert the string of 8 bits to an integer, utilizing a standard C function strtol(). There's no need to convert any further, because binary, hex, decimal, etc, are all just representations of the same data! So once the string is converted to a long, you can use that value to represent an ASCII character. Updating the implementation (as below), you can then leverage it to print a whole sequence. I compiled this and it seems to work fine. Of course, this can be done cleaner and safer, but this should help you get started. I just need a way to split the input string in a way that will allow me to convert massive inputs of 8-bit binary characters. You can use strncpy() to copy the sequence of '0' and '1' in a chunk of 8 characters at a time from the input string, something like this: 
c-20-46	X	error: invalid conversion from "˜int*' to "˜int' [-fpermissive] Getting error: error: invalid conversion from "˜int*' to "˜int' [-fpermissive] on g++ on the following code: You need to change int self = (int *)s; to int self = *((int *)s); or to int * self = (int *)s;. You need to think of these as two different things. One is a pointer to memory where the value is stored (int*) and the other is an actual value (int). Looking at your function declaration void* func(void *s), your s parameter is of type void, this will need to be int if you wish to convert it. Your data types seem a bit mixed, which just doesn't fly do well in C/C++. Can you clean it? If you are using this function with pthread_create(), as per the documentation with example for this function, try.. Pointers can be confusing. See if that above code looks similar, in particular to passing the last parameter for pthread_create as a pointer reference. And then try your original code. It might just be that it wasn't passed as a reference. See what that yields you, else try storing it as a pointer and then converting on use. In the second line of the function body, I suspect you were trying obtain the value at s (as an int pointer), but you actually cast it directly to an int. That would yield the address in s rather than the value stored there. 
c-20-47	X	GCC not creating stack usage files despite using -fstack-usage I'm attempting to enable -fstack-usage on a somewhat large build system and I can see that it's being passed to GCC correctly. However, when I check for *.su files after the build, they are not present. I expect them to be placed in the same directory as where I've specified the object files to be. Are there any conflicting GCC flags that can suppress the generation of these *.su files? I've read else where that -flto can do so, but I'm not using -flto 
c-20-48	X	NPPExec scanf Notepad++ Console im new to NPPExec and c coding. Is there a way to compile and run a c code like when i try NPP_SAVE cd $(CURRENT_DIRECTORY) cmd /c g++ -utf-8 -pedantic -Wall -W -Wconversion -Wshadow -Wcast-qual -Wwrite-strings $(FILE_NAME) -o $(NAME_PART).exe& IF ERRORLEVEL 1 (echo. && echo Syntax errors were found during compiling.) ELSE ( cmd /c "$(CURRENT_DIRECTORY)\$(NAME_PART).exe" -run) the scanf() is ignored Please help :/ in It looks as though you are attempting to print out a user prompt in the call to scanf. Unfortunately that's not what scanf does. You need to print out the prompt separately. Give or something similar a shot. 
c-20-49	X	I am trying to print but not being able to figure out the right command In my code I am trying to create a contact management system. I have structure a function and a main function. What I am doing is I have a structure, I am passing that structure to a function. The function gets an input for the structure member and stores it. But there's something wrong with my syntax while calling the getName() function and while printing the structure member input that I took from the user. The error is in the way you are accessing member of the object. It should be accessed like: name.firstName instead of with -> operator. This is because you have an object and not a reference (pointer) to an object. So the correct prints call is: 
c-20-50	X	Using Vtune for profiling malloc function I'm using vtune amplifier 2018 for profiling '_int_malloc' in the 'malloc.c'. However, after getting the advanced hot-spots results, when I want to open the function and see the detailed hotspot info about '_int_malloc', vtune complains about not finding the malloc.c source file (see the image below). I've taken the following approaches but, they weren't successful: 1) I downloaded the source code of glibc-2.23 and I specified the location of malloc.c in the result tab of vtune (see the picture above). After that I could see the hotspot info on the malloc.c but they didn't match (i.e. the profile data showed it spent 4s on a blank line!! which doesn't make sense) 2) I also tried to add the path of glibc-dbg to the LD_LIBRARY_PATH (Since it has debugging symbols, so I suspect vtune can use it to show the hotspot info on the code) and make vtune use glibc-dbg instead of glibc However, this approach wasn't successful as well. My question: Did I miss anything in the above approaches? Is there another way to get hotspot info for glibc? My OS: Ubuntu 16.04 version of libc: ldd (Ubuntu GLIBC 2.23-0ubuntu9) 2.23 
c-20-51	X	Piping in c w/h terminal command: ./process arg | ./process arg I have 2 files, one that generates random integers with two arguments, number of integers and the seed. The other file searches for a value in an array. What I want to do is for the first file to give its randomly generated numbers as an array input for the second file. like so in terminal. ./random_no 100 50 | ./find 42 - I know this is meant to pipe the input from random_no into find. the problem is I don't know how to receive or manipulate that input from the find file. if it doesn't make sense or you want to see code as an example please tell me. Thanks :) You should clarify you question. Which operating system are we dealing with? AIX, Linux? Also it helps if you clarified what is it that you are trying to achieve as there may be better ways than what you are trying to do. Pipe uses plain text via the stdout and stdin .... you are not working with objects, like an array. random_no need to write to stdout and find would need to read from stdin. but really you could use many standard command line utilities to achieve different tasks and should not need to write a C application. for example to "find" 42 from the output of random_no ./random_no 100 50 | grep 42 But what does that achieve exactly? 
c-20-52	X	Seg fault when using strtok I am trying to read each number from an input that looks like this: ... and get the min/max of each row going line by line and then getting each number in the line using strtok, but I get a seg fault error in the second while loop. The code: The header: I just don't get what it might be wrong. Thanks. This isn't doing what you think it is. This tries to open a file in the current directory named "stdin"?. It does not open the standard input stream. You most likely don't have a file by this name, so this function probably fails and returns NULL. And because you don't check the return value, you pass a NULL pointer to fgets. This invokes undefined behavior, which in this case manifests as a crash. The standard input stream is already open when your program starts. So remove the fopen call and it should work. OK, so... Your <header.h> breaks on my compiler, as it redefines the identifiers int8_t et al. reserved by the standard. (Not quite correct of the compiler to complain, as the relevant headers were not included, but there you are.) If you define your own types, use your own identifiers. Or include <stdint.h> for the "real" intX_t types (yes I know a certain "big" compiler doesn't have that header). The simplest thing, of course, is to use char * for strings instead of int8_t *. (The signed-ness of char is implementation-defined, and anyway a good compiler complains rather loudly about the many implicit casts not using char * involves.) You use the exact-width type int32_t for your minim and maxim, but neglect to use the proper printf() width specifiers to go with that (PRId32, specified in <inttypes.h>). As I cannot see any specific need for exact-width types, I replaced them with plain int (for which a mere %d suffices). Once you've done that, remove mention of sizeof( char ), as that is by definition 1. Do check return values of functions. fopen() can fail. Make sure it didn't. Don't "reuse" the stdin file descriptor. It's just confusing all around. Whether your stdin comes from the terminal or a file or a pipe is decided by how you call your executable. If you open a file, use a FILE * handle_name, not stdin. And besides, stdin is an open file descriptor (namely your program's standard input), so you would have to use freopen(), not fopen(), to have it properly receiving from a different source. The simplest thing is to actually use stdin as-is (which also gives you the greatest flexibility in using your program). Do release resources you acquired. free() memory. fclose() files. Many operating systems protect you from this kind of negligence and clean up after you. Some don't. And once you've fixed those problems you sneezed at in comments... ...your program works: Lesson here: Code cleanly. Enable strictest compiler warnings, and heed them. As for overwriting stdin with the results of fopen() as you did, the standard states (emphasis mine): 229) [...] [stderr, stdin, or stdout] need not be modifiable lvalues to which the value returned by the fopen function may be assigned. 
c-20-53	X	User string input to go until \0 in c I am trying to simply get a user input string. The string is saved (scanf) when the person hits enter or the string hits the NULL character. Yet, when I run my program, and type in the string, it continues input until I type \n or \0 (whichever I have in my if statement. Here's my code: This is by no means finished code, i'm just in the process of writing my program when I snagged this annoying bug. The +1 on my MSL is to make sure the NULL character is read so my string doesn't yell at me, idk if it's necessary, but it's a precaution. Thank you answerers. There are various problems with your code, not just a simple bug. I'll try to describe some of them here. Turn on compiler warnings. For example, if your array is size 30, there is no element at index 30 (indexes would go from 0 to 29). Your compiler could have warned you about that and other problems. Store a string in a char array or pointer, but not in a char pointers array. When you wrote: You are creating an array of pointers to char, or an array of strings. However, since you're dealing with pointers to char as strings, you'd need to allocate space for them yourself. That's another concept. You probably meant to write an array of char like this: Enter at maximum 29 characters. If your string holds 30 char, and you need 1 to mark the null at the end, you've got 29 remaining usable chars. Or"¦ change MSL to 31. Consider dropping the \n from your scanf format. It will make it read all whitespace (which is what \n represents in a format) waiting for the next non-whitespace. Thus, the input somestring<enter> for example won't be sent directly to your program until the next non-whitespace or EOF. Give scanf an address. That could be just the array name (which translates to the first element address) or a pointer if you were working with them. You can limit the length of what scanf reads. To be safe: Don't use uninitialised data in comparisons. When you wrote if(str1[MSL+1] != '\0'), what did you expect str1 to contain if you had never stored anything yet? 
c-20-54	X	Native C Websocket Client I have been playing around with writing some code from some lightweight clients and was wondering if there was any good lightweight websocket client that allows connection to secure websockets (wss) for C applications. Some example code would be great if it existed as well as I am coming from a OOP background which makes it a bit trickey I'm told libwebsockets can be used as a client as well. Barring that, you can find a decent Websocket parser / formater in the fail.io library. You could also use the library's read/write hooks to handle TLS/SSL connections, but you'll have to manage handshakes, since it's HTTP and Websocket implementations are server oriented (though the HTTP/1.1 parser supports client side parsing as well). 
c-20-55	X	Building a graph from a text file in C I'm having a hard time trying to build a graph from a text file. We were given the following .csv file: The first name of each line stands for a vertex, the rest of the line are the vertexes the first one is connected to. How can I read from that file and transform it into a graph? The mechanisms of the graph itself are almost done, but this whole reading thing is driving me crazy! 
c-20-56	X	Linker yells that my function from other file is not defined I have a function int get_token(); defined in file scanner.c and I have a declaration of it in header file scanner.h. Now I included this header file in another header called precedence.h and at last I included precedence.h in precedence.c file where I want to call my function get_token();. When I call this function, calling make throws following error: and this is my Makefile I have tried including scanner.h along with precedence.h, also changing Makefile. I'm just little experienced with C programming. The linker fails to address function get_token because it seems to be defined in a file scanner.c, which is not passed to the compiler. Your include files probably just declare this function (i.e. provide a function prototype without body/implementation). You'd probably write: 
c-20-57	X	After a fork with an execve can't sync process to wait I have a problem, in C, with an execve after a fork. I need to create 20 children and, only when they are succesfully create, I'll do stuff. I'm using a semaphore to do this but still not working, because in execve file that I running after the fork, it read last 2 or 3 children. But I want to "stop" the file and make him wait for the creation. Take a look my code: Father.c person.c Obviously I linked well the semaphore in all two files. 
c-20-58	X	Passing and changing an array and returning it to the function call I am writing a code for fun where it translates and transcribes a strand of DNA as an array and returns its complementary RNA strand. I am passing an array to the function which it then re-writes all the nucleotides and then changes each letter, but it keeps returning the array as NNNNNN which is the last else. Relevant to the main: Main: Changing the array: Re-running the program: 
c-20-59	X	Building with autotools: AC_CONFIG_MACRO_DIRS conflicts with ACLOCAL.AMFLAGS Trying to build libwally-core C library for Android on Windows in Cygwin with supplied autotools scripts: libwally-core After running or I get the following error: I tried the following things to no avail: Re-saved all scripts with Unix line-endings (LF only) Commenting out "ACLOCAL_AMFLAGS = -I tools/build-aux/m4" in Makefile.am The error happens at the following place in libtool's source in libtoolize.in: I assume that the above makes sure that AC_CONFIG_MACRO_DIR and value after "-I" in ACLOCAL_AMFLAGS are identical (checked for identical line endings with hex editor too). The values are identical in both configure.ac and Makefile.am. However, even if I comment out setting ACLOCAL_AMFLAGS in Makefile.am, the error persits. I would like to compile the library and generate libwallycore.so. Any insight would be much appreciated. 
c-20-60	X	Using system() in C with an agument I wish to write a program that uses system() and compress a folder. The folder name is given via command-line. This is what I have: Basically I wish to do this: buf should be the input argument of the user. The folders he wants to compress Perhaps this will pass the folder name argument to the tar command. But it's a mystery why you don't just do it from the command line. Leaving the possibility of buffer overflow out of it. 
c-20-61	X	Can't get my code to work in c I've written a code as an assignment for my class at the university. The code is supposed to be executing newton's method to find a root for an equation (in close proximity at least) by entering the starting point and a limit. The code compiles but after i enter the necessary data the program finishes without doing anything else! Thanks for the help in advance! Here is the code: P.S: code runs until line 27 fabs(f(x)) < e should be fabs(f(x)) > e. You want to keep running while the value of the function is too far from zero, not while it is near zero. 
c-20-62	X	SIMD Program slow runtime I'm starting with SIMD programming but i don't know what to do at this moment. I'm trying to diminish runtime but its doing it the other way. This is my basic code: https://codepaste.net/a8ut89 blurr2: 0.43s negativeCount: 1.38s ord: 0.33 And this is my SIMD code: https://codepaste.net/fbg1g5 blurr2: 0.42s negativeCount: 1.42s ord: 0.35s **Differents solutions. Can you explain me what i'm doing wrong? I'm a bit lost... Do you know that ord function with SIMD is not 1:1 to ord function without using SIMD instructions ? In ord function without using SIMD, result of OR operation is calculated for even indexes what with odd indexes? maybe, if OR operations are calculated for all indexes, it will take more time than now. Use _mm_loadu_pd instead of pointer-casting and dereferencing a __m128d. Your code is guaranteed to segfault on gcc/clang where __m128d is assumed to be aligned. blurr2: multiply by 0.5 instead of dividing by 2. It will be much faster. (I commented the same thing on a question with the exact same code in the last day or two, was that also you?) negativeCount: _mm_castpd_si128 the compare result to integer, and accumulate it with _mm_sub_epi64. (The bit pattern is all-zero or all-one, i.e. 2's complement 0 / -1). To learn more about efficient vector horizontal sums, see Fastest way to do horizontal float vector sum on x86. But the first rule is to do it outside the loop. (source + asm on the Godbolt compiler explorer) From MSVC (which I'm guessing you're using, or you'd get segfaults from *(__m128d*)foo), the inner loop is: It could maybe go faster with unrolling (and maybe two vector accumulators), but this is fairly good and might go close to 1.25 clocks per 16 bytes on Sandybridge/Haswell. (Bottleneck on 5 fused-domain uops). Your version was actually unpacking to integer inside the inner loop! And if you were using MSVC -Ox, it was actually branching instead of using a branchless compare + conditional add. I'm surprised it wasn't slower than the scalar version. Also, (int64_t *)&rr violates strict aliasing. char* can alias anything, but it's not safe to cast other pointers onto SIMD vectors and expect it to work. If it does, you got lucky. Compilers usually generate similar code for that or intrinsics, and usually not worse for proper intrinsics. 
c-20-63	X	Why does scanf() in this program fail to get input? First question, why when I run this program does it fail to get user data regarding "scanf(" %d", &books[ctr]->pages);" ? Instead of getting user data it restarts the loop. Second question, can someone explain why getchar(); is used at the end of the first loop. As stated in the book it says "Clears newline input" but that doesn't really make sense to me. Does this have anything to do with the problem I am having. I expect this program to gather how many pages are in the book before completing the loop and asking for info regarding the book #2. However.... When I run the program this is what I get... What is the name of the book #1? good book Who is the author? good author How much did the book cost? 50 How many pages are in the book? What is the name of the book #2? bad book Who is the author? The problem here is, you never checked the reurn value of scanf()!! Thus, following the inputs you have shown, for a scanning statement (i.e., the format string) like an input of 50 will cause a matching failure. Thus, scanf() will return failure and the input will then remain in the input buffer to be consumed by the next successful call to scanf(). In your case, the immediate next conversion specification seems to match exactly the input, so you get the behavior that scanf() never waits for the user input. Related, quoting C11, chapter Â§7.21.6.2/P6, A directive that is an ordinary multibyte character is executed by reading the next characters of the stream. If any of those characters differ from the ones composing the directive, the directive fails and the differing and subsequent characters remain unread. [....] 
c-20-64	X	How can I identify which program a tcp packet came from in a linux kernel module? I'm currently working on an assignment in which I need to write a linux firewall extension. A bit of context: My kernel module will maintain a list of "rules". A rule is just a port number with a path to an executable file. A rule indicates that the program is allowed to make outgoing connections on the corresponding port. A connection by program A on port X should only be terminated if there are rules for port X and program A is not one of them. So if a port has no rules set, anyone can communicate on the port. I know how to analyze the TCP packet headers and extract the source port. My problem is, how can I tell which program created this packet? Here is some example code my lecturer gave me, although I'm not sure how it helps. I've removed parts that aren't relevant for clarity. 
c-20-65	X	how do I get the line number which is causing segmentation fault? I want to know how can I get to know which line is causing segmentation fault in c language in unix terminal Rebuild with debugging symbols (add -g flag when compiling). Run through gdb. gdb <binary name> (In gdb) run <binary name> <args> On crash, use backtrace command to see stack trace. The offending line will be at the top of the stack, but you may need to look further down in case the segfault is in some library code. 
c-20-66	X	Semaphore Deadlock / Blocking all processes sem_wait and sem_post unexpected outcome My goal is to synchronize forked processes by a common int value. That int number (init_num) must first become equal to the processes i have and then the processes can continue with their functions. My code : And *init_num is in shared memory space. The problem is after all of the processes have done init() and *init_num should be equal to processes my program deadlocks and stops right there !! Without doing the display() part. I am using POSIX semaphores and general implementation. All the necessary libraries are including and compiles just fine. Also all the semaphores and shared memory space are cleaned up. Output : Wanted output : Enable warnings, and you will see which immediately shows your problem. The children do not increment the value: they increment the pointer. Technically it is UB, but realistically they all read 0. Change it to 
c-20-67	X	Socket sends binary data instead of text data I have sample code for sending and receiving data about sockets on unix with c. This is server code: And this is client code: I wish to see a message indicating whether random number is less than, greater than or equal to input number.But what i see is this: I appreciate any help and before any of you ask, this is not a homework just a basic exercise on understanding sockets in unix. Here: sizeof(msg) is the size of a pointer. Either transmit strlen(msg1) + 1 or (better) declare msg1 et al thus: Furthermore here: strlen(serv_reply) is undefined because serv_reply has not been initialised. Here you did need sizeof(serv_reply). You are then outputting whatever was received regardless of its length and regardless of whether it is nul terminated. You need to output the received fragments until nothing is received, and not assume nul termination. For example: 
c-20-68	X	Process Control in C with Custom Commands Okay so I have this assignment that requires me to build a parallel shell tool called PELL. It provides users of pell with the ability to execute commands, execute multistep processes connected by pipes, and execute independent processes. Input: Lines of text containing conc or pipe commands: conc cmd1 args1 , cmd2 args2 , ... conc causes PELL to execute the commands concurrently (i.e., parallel). There is no communication between the commands, these simply happen concurrently (in parallel). pipe cmd1 args1 , cmd2 args2 pipe causes PELL to create a pipe and fork a child for each cmdi. The pipe is the output for step 1 and the input for step 2. Also, cmd1 can have stdin redirected from a file. cmd2 can have stdout redirected to a file. Results: For each command read from stdin: Prints the tokens Prints the command information Depending on the command: concCmd: prints the parent PID, child PID, and the command Example: pipeCmd, for each child: prints step, parent PID, child Pid, and the command Example: Here is the Header file for the code: And the included Driver File: Could use some help constructing the pseudocode for the program. I have an idea what the main function will look like, but need help setting up the code for the concCMD Command and pipeCMD Command. I'm not very proficient with c. Any help would be greatly appreciated. Here is the code I have written so far and I'm looking for way to make it work, and how to write the pipe command. I'm getting an ambiguous output redirection error. 
c-20-69	X	Undefined reference to strsep I am doing an exercise in C for school where I need to work with structs and files. I have a file with contacts written in this way: "name:surname:number" , and what i need is to open the file, separate the string between the two points and assign those elements in my struct. So, in some way I want my program to read the file and to set every row of contact in a new struct. The problem I have when I try to run it I get an error "Undefined reference to strstep" which points me to the moment when I am separating the string and putting it in a list. I tried strtok but my exe keeps crashing. I've given the code to my friends and it doesn't work there too. This is my struct contact: And this is the function where I have the problem, it should put the string in a struct and at the end return how many lines/contacts there are in the file. aaand in the main I call this (if this helps): The message i am getting: warning: assignment makes pointer from integer without a cast 
c-20-70	X	Delete all words starting with the same letter in a binary tree I have a function that deletes all words starting with the same first letter in a avl binary tree(letter is given by user). It deletes the words from tree but i cannot understand why unnecessary characters are printing when i call tree traversal. Example: words in a tree: life, value, administation, advantage, add, son. Expected output: life, son, value. Real output: {t life, son, value. Note: This is not a definite answer, but it's too long for a comment space. You didn't show what new_node = delete_node(root, root->data); does to the tree structure, but most probably it deletes the node pointed at by the root variable. If so, the root pointer becomes invalid on the return from delete_node(), hence the recursive call in the return statement makes the called function to operate on a non-NULL, anyway invalid root pointer. 
c-20-71	X	Get epoch seconds for specific date in C How can I get the number of seconds passed since January 1, 1970 for a specific date, for example:"2017-09-14 23:24:46" The output however is not what I expect: tm_year :2017 tm_month :9 tm_day :14 tm_hour :23 tm_min :24 tm_sec :46 time 1336625342 According to epochconverter.com, the proper value should be 1510529086. Why am I not getting this value? You need to adjust the values stored in your struct. The tm_year field is years since 1900, so subtract 1900 from this value. The tm_mon field is months since January, so subtract 1 from this value. So do the following after populating the struct: Output: 
c-20-72	X	Extern Variables seemingly not working I've been searching through Stackoverflow and the web for the answer and it seems like I'm doing this correctly, however I can't get it to work. I made a test program for using extern, (it's on xCode using the projects feature if that makes a difference). I'm trying to declare a variable, that I can access anywhere in my program, whenever I change the value of that variable, I want to be able to access the changed value. What I've done so far is I have a header file and a and of course my main.c In externFile.h I defined: In main.c I have: In externFile.c I have: However I'm getting this error: Does anyone have any sort of ideas about this? EDIT: Thanks for the help Weathervane and Eugene! The problem was that I defined ply inside of main(), instead of outside of the function. You haven't actually defined ply globally: Here, ply is a local variable, not a global, since it is defined inside of a function. The extern line in your header file does not define the global, but declares it. It says "this variable exists somewhere", but it doesn't create it. Because there is no global defined, you get an undefined reference error. Global variables must be defined at file scope, i.e. outside of a function: 
c-20-73	X	How to determine Daylight Saving Time (DST) in Tizen Native Application? Is there any possibility to determine is Daylight Saving Time (DST) now in Tizen Native Application (pure C) for wearable device (Gear S2/S3), because after: field tm_local->tm_isdst is always 0 (even for DST dates). 
c-20-74	X	Bubble sort in c linked list I need to do is read in an input file into a linked list. Part of the file is: NameA, 25 NameB, 33 NameC, 23 NameD, 39 And after i need to sort by the number (bubble sort) and write it to another file. Here is what i have: Can you help me to sort these data? The file appears to have 4 entries, not 10. A better way to read the file is using while(fgets(buffer, 1024, ifp)){...} This will stop when there are no more lines to be read. It doesn't matter here because the memory is freed as soon as you exit main but in a practical application you run the code in different functions and you have to free the memory. The linked list is not entirely correct because you are calling an extra malloc, this memory cannot be freed. Sorting a linked list using bubble sort is not trivial. A better way is to read the file in to an array of node, using realloc. Then use bubble sort on the array. Alternatively, you can convert the linked-list to an array (pointless!) Otherwise, to use bubble sort on linked list you can make two loops to walk the list, then compare and change the values of each node. The example below inserts the entries at the head of the list (it doesn't matter since the list is being sorted) and runs bubble sort: We beginners should help each other.:) I did not look through all your code. However it is obviously incorrect for example due to the incorrect order of allocations of nodes in this loop So the last node will have data members with indeterminate values except the data member next. I am trying to answer your question how to write a bubble sort function for a singly-linked list. To write a bubble sort function for a singly-linked list is not an easy task for such beginners as you and me. For example you need to write correctly a swap function for nodes of the list. Here you are. The program output is In the demonstrative program at first the list is sorted by IDs and then by names. Thus all you need now is to build correctly the list from data in the used file. for bubble sorting a linked list,you first require a head pointer then two more pointers and the implementation will be same as that of bubble sort but with slight differences as linked list element can not be accessed by directly by a index you have to use the following two pointers for comparing values as you do for arrays in bubble sort. don't forget to increment two pointers. 
c-20-75	X	Get the RGB-hexadecimal values from an array and give it to an malloc-array as int I need a method, how I can get a hexadecimal number from an array, then give it to a variable with the type int. I know that sounds easy but I need it in a "special way" - for example: I have given a RGB hex color: 01a7ff - and I saved the value of R, G and B in extra arrays - looking like this: Now I want to give the complete array of red, green and blue to a malloc reserved array so it looks like this: I first tried using atoi() but that didn't work if the array had also de hexadecimal literals (a,b,c,d,e,f) - has anyone a solution for me? Cheers Providing that data holds unsigned char values this should do: Note: It is enough to use unsigned char to hold data value from 0 to 255 
c-20-76	X	Strange letter print out from array c programming I am trying to delete the blank space between a string and print out the first word with isalpha() function. When I print out, only the first letter prints out. exempel "hello big panda" I get "hhhhh" but I want the hole word "hello" instead done this: But I don't want to change the string that is passed to it What you can simply do is use a while loop instead of your do-while. You can simply increment i until you find the index of first blank space. Then using the value of i you can insert '\0' in your string. Output it and you are done. :) If you would like to keep the original string then you could simply make a new string say newStr and then Your function must do 3 things as it works through the sentence finding words. (1) always check for the end of the string to prevent an attempted read beyond the end of the sentence; and (2) locate and print the requested word at the index given; and (3) handle the condition where the user requests a word index greater than that available. (you should always test the sentence you are passed in the function to make sure the pointer isn't a NULL pointer, and that the contents of the sentence is simply the '\0' character indicating an empty-string) An easy way to do this (after you have tested the input string), is to set up a continual loop, that repeatedly read the characters of a word, checks if it is the word to print (if so it prints), and if not read and discard all the non-alpha characters before the next word, and then repeats. Something simple like the following works. It takes the sentence (or updated position within the sentence) and the index for the word to print zero-indexed, e.g. (0, 1, 2, ...) and then loops a described above. (note: you can change the zero-index scheme to a 1, 2, 3, ... word-number scheme by initializing n=1; instead of 0 -- but since everything in C is zero indexed, that is left to you) Example Use/Output Note the first block of calls to prnword print each of the words in the sentence, saving the number of characters returned by prior calls and using that to start the function reading the 1st character of the desired word, meaning you are always looking for word index 0. The second call intentionally gives an index one past the last word to force handling the error. And finally, the last call simply says "Go print word 2" (index 1) starting from scratch. Example Use/Output Look things over and let me know if you have questions. 
c-20-77	X	Why aren't the elements of the struct array grouped by the condition parameter In this loop members of unit0 are supposed to be grouped when their conditions are tested, but for some reason instead of assigning them to their respective units even though they have the required specific condtion and the limits aren't exceeded per section, still all members are grouped into the temporary waiting array, unit0temp, Jackson-McBry-24-Sevre Alison-Smith-28-Moderate James-Arthur-21-Sevre Jackson-Adams-24-Sevre Samuel-Adams-24-Sevre Billie-Ellish-24-Low Jeremy-Zucker-25-Moderate The above are parsed into struct fields such as unit0[0].fn = "Jackson",unit0[0].ln = "McBry", unit0[0].age = 24, unit0[0].condition = "Sevre" 
c-20-78	X	How to print out process name if i know the pid using c? Create a lab_ps.c program, which prints all running process like in ps -e. Hints: The list of all processes can be found in /proc; Check the proc manual (man proc). Print two columns: PID and CMD. This is my task. I wrote a code where i get pid from /proc directory. How can i translate pid to process name in c? 
c-20-79	X	what is "PGC-I-0222-Redundant definition for symbol" how to solve pgcc&openacc linker error "__pgi_uacc_multicorestart", "__pgi_uacc_multicoreend" This is a follow up question after the one above. In "compile lbe.c to lbe.o message:", I always see the "PGC-I-0222-Redundant definition" message. Is it a warning or error? Why would it happen? How do I fix it? There are just information messages indicating that the symbols are getting defined twice. Since it's the same definition for both, it's fine and no need to fix. 
c-20-80	X	Creation of file under /proc and using it I'm trying to understand some example code my lecturer gave me. It is a method of transferring data from user space into kernel space via a /proc file. This is the only code he gave me and I feel like I'm missing the user space program and I don't think he's explained what's going on very well. He's trying to demonstrate locking files via semaphores, and also transferring the data I believe. The things I'm struggling to understand are: what is the "reference count" (He mentions it in the comments for procfs_open and procfs_close) Why would he use a proc file? It appears to do nothing. What do module_put and try_module_get do? I can't find any remotely good explanations online. How would I trigger the kernelWrite function from userspace? So that I know how I can actually transfer the data, not just receive it. Here is the code: Several questions, several answers: 1 Module reference count and try_module_get and module_put: Each kernel module has usage count, in particular if it is referenced by any other module or used any other way. In this case, when doing opening file it will prevent module from being removed, and after closing the file, it will remove reference. Why it should not be used is explained here 2 Proc file: Uses File_Ops_4_Our_Proc_File structure. You need to perform action in user space to trigger appropriate action on proc file (namely open, close and write). 3 Triggering actions. For example (from bash): Which writes character 'I' to proc file, triggering File_Ops_4_Our_Proc_File.write, effectively calling kernelWrite. 
c-20-81	X	Error with Binary Search Tree In an exercise, I have to read an input file as the following one: Where each content is between #. First, there is the operation to be done: Add, Search, or Sort. The second content is the word and the third one its respective meaning. For example, for the first line, what I need to do is add the word Jabuticaba into a list of word which will be sorted alphabetically at the end of the file with the command Sort. Remembering that I need to save the word's meaning too. For the informations, I created this struct: The struct has two char variables: An array to store the word and an array to store its meaning. To read the file and know which operation I should do, I used the strtok function to store the content between #. We can see the whole function for readind the file right below: For storing the informations, I'm using the AVL Binary Tree structure, that always be sure to be balanced when insertion or removal of a node happens. Its definition is right below: In the LeEntrada function, I'm using the function to insert, Insere_ArvoreAVL, and for printing the contents alphabetically, I'm using the function EmOrdem_Arvore, which is the in order function. There are the functions: I call the functions in main like this: The expected output is this: Pay attention that I ask to print these informations to be sure that they are being done correctly. I also ask to print what was returned from the insertion fucntion, so I can know if there was success or not. And, like we can see, it was successfull, since the returned value was 1. Although, the output that I get is the following one: So, the function EmOrdem_Arvore is not printing the first word, Jabuticaba, in this case. I would like to know what may be causing this problem. 
c-20-82	X	Output positive and negative number in a random array in C I have to create a program that separates the positive and the negative numbers from a random array. I tried to create void to separate only the positive numbers at first (visualizzaVettorePos) but I keep getting the Id return 1 exit status. Any thoughts? Code : Your program exhibits undefined behaviour. In C array indexes start at 0 and not at 1. Therefore you need to change your for loops like this: instead of: And for the same reason in the visualizzaVettoriPos function should be 
c-20-83	X	Need help finding an error in my C project The project is to write a program that reads three integers and then prints them in order read and reversed. use four functions: main, one to read the data, one to print them in the order read, and one to print them reversed I get the errors: In fuction 'main': [Error] expected declaration or statement at end of input recipe for target 'main.o' failed Seems like you are missing a simple } closing your main function. This would be more simple to observe if, and I cannot stress this enough, you used indentations in your code. This is something you should really think about doing more, it will help you, and others, with the readability of your code. Besides your nested function definitions there are lots of stray semicolons in your function definitions. Even if your compiler allows nested functions, you need to remove those Same for printReversed and printForward. I dont know why you are using command line argument, if the requirement of your project is to use four functions . I have given the following code which will work for your project. There is no need of writing two seperate functions for forward data and reverse data. You can do it by using same function for both. Just passing tha value will be reverse. dont use semicolon in the first line of function definition. 
c-20-84	X	why do the String members of my nodes print a blank line after getting created? I am creating a list of nodes that contain strings by reading lines from a text file. The text file could be anything. I put print statements in the function fillList to help debug. In the function fillList printing front->data within the while loop works, but outside the while loop a blank line is printed. In main printing the string member gives a blank line as well. I need help fixing this. Off of my debugging get_Line and addNode works fine. EDIT 1: My text file - data.txt - contains the following text - txt file screenshot - My output can be seen in this jpeg: output screenshot The problem is in your addNode function: Here, the data parameter corresponds to the data array defined in fillList. So the data member of each list element points back to the data array in fillList. This means that all list elements contain the same data. When you then leave the while loop, data contains an empty string. And since all nodes data member points to the local data array, you get an empty string when you print front-data. Even worse, when you return from fillList, the list elements now point to a local variable which is now out of scope. You then invoke undefined behavior by dereferencing that invalid pointer when you call printf from main. The blank line you see when printing from main is what happens to be in that invalid memory location, and you can't depend on that beahvior to be consistent. You can fix this by allocating a new buffer for each list element and copying the string into that buffer. You can do both at once using strdup: Also you'll want to add code when your program exits to deallocate both the nodes in the list and the strings they contain so you don't have a memory leak. 
c-20-85	X	Returning more than one output in C extensions? Python allows to return more than one result using commas as separating value. When developing a CPython extension written in C language, is it possible to obtain the same result? How? I'm developing a CPython extension that replaces an existing Python code to do some tests on performance and I will prefer to have the same interface to not change the existing code base. I'm using Python 3.6. Yes, you can create a tuple with PyTuple_New, populate it and return it. The callee will be able to unpack the result as usual. Python returns multiple values by using containers. A single object is returned that is unpacked. Comma separated means tuple; in square brackets, on the other hand, a list is created. See How does Python return multiple values from a function for more on this. If you'd like an example of how one might do this in C you can take a look at the implementation of str.partition or array.buffer_info (or any tuple returning built-in method). 
c-20-86	X	Circular buffer with fast lookup/insert/remove I have a problem that I didn't find a solution that could be efficient enough. I need to speed up a circular buffer with a fixed size of 1.000.000 elements. It is currently implemented using a singly linked list. For the moment, I have changed the implementation to use an array instead of the linked list. I use a write and read pointer to avoid shifting every index of my array. I need to do A LOT of lookup in my fifo, and I would need to delete items from indexes (well, I know it breaks the fifo rule). First I was thinking of a sorted index table that matches the fifo array. It would be a O(log n) complexity for the lookup, but every time I'll need to update my fifo, I'll also need to update my index table. This is the part I didn't manage to do it efficiently (with a small complexity). Any hints about an implementation that keeps track of the FIFO's order, and gives good performances in insert/delete/search operations ? Thanks. One approach would be to use: An array with n elements to store the items A Fenwick tree with n elements to store the occupancy. We use the Fenwick Tree to write a 1 whenever an element is present, or 0 if the element is not present. Once you have this structure, you can find the k^th present element and perform deletions in O(logn) time. (The actual implementation details may be a bit fiddly due to the FIFO wraparound - it may help to keep track of the total occupancy in the array and the occupancy from the pointer to the first element until the end of the array.) Note that this structure will allow you to delete items anywhere, but only to insert items at the end of the FIFO - it is not clear whether this matches your requirements? 
c-20-87	X	Why do I keep losing the values of my struct members? apologies if this is some stupid mistake I've made, I'm just a rookie. First off, I have created a struct; Then, I've created an array of struct pointers using; (NumberOfStars is just an int variable) This was declared and initialised at the top of the program, before any if statements. And I have done a for loop to change the values of the members, in my struct array; However, when I go to my second IF statement, for some reason these values are completely erased; full part of the code; Note: malloc() returns uninitlized memory. Quoting C11, chapter Â§7.22.3.4 The malloc function allocates space for an object whose size is specified by size and whose value is indeterminate. In the else if part, (when you reach there), you don't have the members initialized, because, you did not enter the if block which takes care of assigning the values!! Once again, C11, chapter Â§6.8.4.1, In both forms, the first substatement is executed if the expression compares unequal to 0. In the else form, the second substatement is executed if the expression compares equal to 0. [...] You need to move the assignment part outside of the if condition, if you want the values to be "available" in the else block also. 
c-20-88	X	OpenFile function open file ok but returns a NULL pointer (C program) I have had some troubles with my C code and decided to ask the gurus here what I am doing wrong. This Routines.c is made this way: gcc -Wall -g -O0 -pedantic -fPIC -c Routines.c -o Routines.o ================================================================ This Caller.c is made this way: gcc -Wall -g -O0 -fno-stack-protector -fPIC -c Caller.c gcc -Wall -g -O0 -fno-stack-protector -fPIC -o Caller Caller.o Routines.o ================================================================ Both c files compile zero error (no warnings too). -- Execution -- msgs from OpenFile() (that is, the file has been opened correctly) nm = msgs.txt, md = w fd fopen... errno = 0 fd not NULL !!! rc = 0 e errno = 0 msgs from OpenFile() (What happen here ???) fd NULL !!! Someone can tell me what has happened with a file handler returned to Caller as NULL, when it was correctly set on Routines at file opening ??? To solve my problem I had to do: But I'd like to calm my mind down and understand what the hell i did to that happen. Thanks (a lot) in advance. FILE * fd in OpenFile() is a local variable containing a pointer to a file. You're changing the pointer inside your local function scope - none of that information gets out of your OpenFile() function. 
c-20-89	X	Unix domain socket non-blocking operation failed at listen, in C This program will calculate RTT for non blocking communication for simple IPC program using UNIX domain socket. I'm having a problem with socket programming where at server-side my socket exit with error at listen(). The blocking version of the code works fine; I tried to modify it to non-blocking with SOCK_NONBLOCK at socket(), but it seems to fail at listening: hafizul96@ubuntu:~/asyntest$ ./Server [SERVER PROCESS] Socket Created, Process ID : 7334 [SERVER PROCESS] Socket Listening.. [SERVER PROCESS] Error Accepting ** Client: Server: Does anybody know what the problem is and how to fix it? Because your socket is non-blocking, accept does not wait until a connection happens but it returns EAGAIN or EWOULDBLOCK value. You shall call accept repeatedly until it returns a different value. To avoid consuming 100% of your CPU by those calls, do some sleep between two calls or use select or poll to wait until your socket is readable. 
c-20-90	X	IPC SysV Shared memory - shmget(), shmat() does not work Trying to create shmem memory and later overwrite it unsing HUGE Dirty COW vulnerability. Somehow allocation of MAXMYMEM shows an error "Cannot allocate memory", errorcode 12. Why it does not work? allocate.c Update 1: Update 2: The reason was that on Ubuntu 16.04 the number of Huge Pages was set to 0. by changing it to a different value, the program worked! 
c-20-91	X	C - int not-equal to printf? What this C statement does? i and r are integers. I'm trying to parse it using pycparser which doesn't recognize it and raises an error: pycparser.plyparser.ParseError: :7:6: before: { Thanks This is not standard C, but a GCC statement expression extension, which allows putting blocks in expressions and returns the value of the last statement in the block. Because the block here has only one statement which is itself an expression, this is equivalent to: This sets i to 1 if printf returned 0 (i.e. it succeeded but didn't print any characters), or 0 otherwise. Since this printf will always print at least two characters when it succeeds, i will always be 0. It looks like it is using a GNU C extension that allows to write a block statement where an expression is expected. The value of the block statement is the value of the last expression of the block. For example: will initialize x with 3. In your particular case the extension does not look very useful, because: is identical to: I'm guessing that your original code is probably generated by some dark magic macro. BTW, this code does not make much sense. It looks like it wants to check whether printf failed or suceeded in writing the text. But according to the specification, printf will return the number of bytes written if success or a negative value if error. So it will return 0 only if it writes 0 chars, and that will not happen with a \n at the end, and i will always end up being 0, either with or without error. 
c-20-92	X	Read string and integer from a file using fscanf I am having a structure like this I want to fill this structure from a file and the file contains current time and one value. Like this Now I want to do fscanf of time and the value i.e 98 from the file and put those values in the structure (time should go to the structure member buf and the value i.e. 98 should go to the structure member val.) Now the problem is fscanf terminates at first white space, so to resolve this I tried but after doing this value 98 from the file also going to structure member buf.. How can I store time in structure member buf and the value 98 in structure member val ? It would be best to use fgets() to fetch lines of input. Then sscanf() could be used to parse the input. You can combine assignment suppression (*) with a scanset directive (%[]) to ignore the first part of the date: %*[^0-9] %*d. Scan the time, then use suppression again to ignore the year. Note that the behavior of a dash in a scanset, e.g. %*[^0-9] is implementation-defined, but this commonly behaves as expected to indicate a range. A completely portable alternative would be to use: %*[^0123456789] instead. Here is an example program: Program output: Update I appear to have misunderstood OP's question. The above solution does not store the entire date in the buf field of the struct. In order to store the entire date, it would be nice to have some delimiter between the date and the final value to help in parsing input lines. In absence of such a delimiter, the techniques mentioned above may still be useful. The %n directive stores the number of characters read from the input stream so far when it is encountered. This can be used to identify the location following the date in the example input. Consider: Here sscanf() ignores each of the date components, and stores the character count in tail, which amounts to the index of the character following the date in buffer[]. sscanf() can be used again to get the final value by scanning: Then a null-terminator can be placed after the date, allowing the date to be copied to the appropriate field of the struct. Here is another example program. The parsing is not bullet-proof here, but it should handle well-formatted data. Note that when tail is too large, the line is skipped. This indicates that the date string would not fit into p1.buf. Here is a sample input file: And here is the program output: 
c-20-93	X	Why do you skip void function calls without catching them? I want to call a function that calculates the width of a circle. I want to call a function in the //void area (vp)//, but I can not catch the error in visual stdio and proceed as it is. Do you know what the cause is? To call the function, you write area(vp); not void area(vp);. The latter, as it appears in the function main, is a function prototype and has no run-time effect. And fix that definition of PI: yours is terribly inadequate given that you use a double type. See Math constant PI value in C You should write instead of the wrong and superfluous Adding to the obvious mistake you made in the syntax I don't see any reason for vp to be there. to ensure success for scanf(), always check for the return value of the call. Quoting C11, chapter Â§6.8.6.4, A return statement with an expression shall not appear in a function whose return type is void. [....] There are three problems with the code. For starters it is unclear why the pointer vp is declared as having the type void * though in the program it is used only to point objects of the type double. Why not to declare it like As result this trick with the pointer will not compile because in the left side the expression (double*)vp is rvalue and may not be assigned. You could just write The second problem is that this statement is also invalid. To call the function you should write And the third problem is that a function that has the return type void shall not specify an expression in the return statement This statement shall be removed. From the C Standard (6.8.6.4 The return statement) 1 A return statement with an expression shall not appear in a function whose return type is void. A return statement without an expression shall only appear in a function whose return type is void. There is no sense to declare the parameter of the function as having a referenced type. The function definition could look like The statement with the call pf printf should be moved in main 
c-20-94	X	why I cant read from and write in a file simultaneously I want to write some data in a file(test.dat) and then read some data from it.but either in "w+" or "a+" it is impossible (I have learned that with "w+" or "a+" you can read and write simultaneously in a file) whenever I run this program it ends in a runtime error.but if I just read or just write there is no problem. Opening the file with mode "w+" truncates the file (removes all contents). You can both read and write to it, but the original contents are lost. Mode "r+" would open it for reading and writing without changing the contents, and with the file position initially at the beginning of the file. 
c-20-95	X	Cythonizing fails because of unknown type name 'uint64_t' This may be a newbie problem. I can't cythonize a simple helloworld.pyx tutorial script while the exact same code works on linux: Here is the setup.py script: But I get this after running python setup.py build_ext --inplace: I'm on MacOS 10.13.1, python 3.6.3, Cython 0.27.3 and clang-900.0.38. Apparently there is a problem with including stdint.h, how should I go about doing it in Cython? EDIT: My gcc is in /usr/bin/gcc shows: I have found a solution to my problem. It seems like after installing High Sierra some header files in the /usr/local/include are messed up, and causing the brew installation to malfunction. Uninstall and reinstalling brew solved the problem. 
c-20-96	X	Why this program generating unnecessary space in output? This program is producing unnecessary space in it's output. Please can you tell me whats wrong. The program and it's output is given in below link Click Here If you change your printf at the bottom as follows: You'll see the following output: So there's a newline character at the start of the string. After the first call to scanf, there is a newline left in the input buffer. When you then read the string, you make multiple calls to scanf using the %c format specifier: This format specifier does not disregard newlines but will read them. So on the first iteration of the scanf loop you read the newline character. There are two other problem with this loop. First, you loop from 0 to n, meaning you read in n+1 characters but you only allocated space for n characters. So you write past the end of allocated memory. Doing so invokes undefined behavior. Second, you don't add a terminating null byte to what you've read in, so you have an array of characters but not a string. You then later attempt to print s as a string using the %s format specifier. But since you never added a null byte, printf will keep reading past the end of the string. This again invokes undefined behavior. To fix these issues, you first need to allocate one extra byte to have space for the terminating null byte for your string. Next, you should use a single scanf using the %s format specifier instead of a loop using %c. The %s format specifier ignores leading whitespace and it can specify a maximum field width so you don't overrun your buffer: Also, be sure to free(s) at the end of the program to prevent a memory leak. 
c-20-97	X	sscanf assigns wrong values in C i am fairly new to C and i am facing an issue when i try to read some values using sscanf. The problem is sscanf reads all values properly except when the value of int i am trying to read is something like 08 or 00043, it starts with zero and it is followed by number. This is the code i am using so when the input is something like this data 08 data what i get is value1=0 and value2=8 other examples in the format of input -> output thank you for any assistance you might be able to offer 
c-20-98	X	How do I access my struct's elements in different if statements? Apologies if this is a really dumb question. I have declared and initialised a struct array here (just above the for loop); I have accessed the elements I need in the for loop, in the first IF statement, however I am no longer able to access them on my second IF loop, probably because "struct StarsStruct *Stars" was declared locally. So how would I be able to access it in another if statement? Declaring it at the start doesn't work, because I guess creating the array with malloc has to be done in one go, with the declaration and initialisation. To sum up, I want to access member of the Stars struct, in another IF statement I will create, Stars[1].SerialNumber and such. However I currently cannot. You need to define your variable further up where it will be visible where it is needed. You'll just need to initialize it to NULL, then you can later assign the result of malloc where you need to. 
c-20-99	X	Unexpected error in C inline function I am trying to write a function returning the maximum value between two integers. The below code gives an error message when I run it on repl.it. But when I remove "inline", it becomes normal. Why am I doing wrong? Thanks! 
c-20-100	X	Finding name of executable sending packet in a netfilter hook I'm writing a kernel module that uses a netfilter hook to filter TCP packets and need to find out the path to the executable that is sending the packets. So far I have used the following approach but it prints names that are seemingly unrelated to the executables used (/usr/lib/firefox/firefox, usr/bin/telnet.netkit and /usr/bin/wget). Kernel log output: This reads like a poor quality college assignment and I have a distinct impression something of the sort already appeared here. Your code most likely executes from an interrupt context, i.e. a random thread got interrupted to do packet processing and 'current' is a pointer to said random thread. This should be easy to verify e.g. by obtaining a backtrace -- doable with WARN_ONCE and the like. Looking for executable name of current by going through procfs is weirdly bad. procfs has to do more work and ends up accessing what's effectively current anyway. To make matters worse, you fail to put the found path thus you leak resources. If this code indeed executes from an interrupt handler, the result is not only nonsensical but can't be safely obtained with this method due to sleep potential. Even if you were to obtain the "right" executable name, the entire assignment is crap. There are many ways in which one process can alter execution of another. thus effectively bypassing whatever filter you have in place. Interestingly there is a way to just change your process name to something else without execing anything, once more invalidating the concept. The best you can do is filter by credentials, but they are not process-specific. In principle you can add selinux labels to files and filter by that, but once more that's weak. In short, the assignment is bullshit. 
